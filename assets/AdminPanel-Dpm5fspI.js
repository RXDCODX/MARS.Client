import{r as x,j as e,u as I,e as h}from"./iframe-BC7DeeL6.js";import{u as k}from"./useSiteColors-d5o0KZIk.js";import{u as z,c as H,B as T}from"./Button-D9dGP0Sj.js";import{A as B}from"./ActionButtons-C3nWOGb5.js";import{R as u,C as E}from"./ColorPresetCard-BCiuDSTg.js";import{k as G,l as V,C as f,j as i,F as s,c as A,m as W,n as F,e as D}from"./scoreboardStore-Cg5d9x2_.js";import{M as $}from"./MetaPanel-DyqJLxDM.js";import{P as y}from"./PlayerCard-CdgIFBOH.js";import{V as M}from"./VisibilityCard-CjrRNQ9j.js";import{H as q}from"./index-BhlHwfix.js";import{u as U}from"./chunk-QMGIS6GS-BHUEN8Nk.js";const P=x.forwardRef(({bsPrefix:t,fluid:n=!1,as:a="div",className:l,...r},c)=>{const o=z(t,"container"),m=typeof n=="string"?`-${n}`:"-fluid";return e.jsx(a,{ref:c,...r,className:H(l,n?`${o}${m}`:o)})});P.displayName="Container";const K="_themeToggle_n5r65_1",J="_adminThemeToggle_n5r65_1",v={themeToggle:K,adminThemeToggle:J},O=({variant:t="default",size:n="sm"})=>{const{theme:a,toggleTheme:l}=I(),r=()=>t==="admin"?"outline-secondary":a==="light"?"outline-dark":"outline-light",c=()=>{switch(n){case"lg":return"lg";default:return"sm"}},o=()=>t==="admin"?v.adminThemeToggle:v.themeToggle;return e.jsx(T,{variant:r(),size:c(),onClick:l,className:o(),title:`Переключить на ${a==="light"?"темную":"светлую"} тему`,children:a==="light"?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-moon-fill"}),e.jsx("span",{className:"ms-1 d-none d-sm-inline",children:"Темная"})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-sun-fill"}),e.jsx("span",{className:"ms-1 d-none d-sm-inline",children:"Светлая"})]})})};O.__docgenInfo={description:"",methods:[],displayName:"ThemeToggle",props:{variant:{defaultValue:{value:'"default"',computed:!1},required:!1},size:{defaultValue:{value:'"sm"',computed:!1},required:!1}}};const Q="_adminPanel_1libf_1",X="_adminTitle_1libf_6",N={adminPanel:Q,adminTitle:X};var L={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},C=h.createContext&&h.createContext(L),Y=["attr","size","title"];function Z(t,n){if(t==null)return{};var a=ee(t,n),l,r;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)l=c[r],!(n.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(t,l)&&(a[l]=t[l])}return a}function ee(t,n){if(t==null)return{};var a={};for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){if(n.indexOf(l)>=0)continue;a[l]=t[l]}return a}function g(){return g=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},g.apply(this,arguments)}function w(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),a.push.apply(a,l)}return a}function j(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?w(Object(a),!0).forEach(function(l){te(t,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(a,l))})}return t}function te(t,n,a){return n=ae(n),n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function ae(t){var n=se(t,"string");return typeof n=="symbol"?n:n+""}function se(t,n){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var l=a.call(t,n);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function _(t){return t&&t.map((n,a)=>h.createElement(n.tag,j({key:a},n.attr),_(n.child)))}function R(t){return n=>h.createElement(ne,g({attr:j({},t.attr)},n),_(t.child))}function ne(t){var n=a=>{var{attr:l,size:r,title:c}=t,o=Z(t,Y),m=r||a.size||"1em",d;return a.className&&(d=a.className),t.className&&(d=(d?d+" ":"")+t.className),h.createElement("svg",g({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,l,o,{className:d,style:j(j({color:t.color||a.color},a.style),t.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),c&&h.createElement("title",null,c),t.children)};return C!==void 0?h.createElement(C.Consumer,null,a=>n(a)):n(L)}function re(t){return R({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"},child:[]}]})(t)}function le(t){return R({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}const S=()=>{const t=G(),{setLayout:n}=V(),a=(r,c)=>{n({...t,[r]:c})},l=()=>{n(A)};return e.jsxs(f,{className:"mb-4",children:[e.jsxs(f.Header,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h5",{className:"mb-0",children:[e.jsx(re,{className:"me-2"}),"Настройка макета"]}),e.jsxs(T,{variant:"outline-secondary",size:"sm",onClick:l,children:[e.jsx(le,{className:"me-1"}),"Сброс"]})]}),e.jsxs(f.Body,{className:"d-flex flex-column align-items-center",children:[e.jsxs(u,{children:[e.jsxs(i,{md:6,children:[e.jsx("h6",{className:"mb-3",children:"Позиционирование"}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Заголовок - отступ сверху (px)"}),e.jsx(s.Range,{min:"0",max:"200",value:t.headerTop,onChange:r=>a("headerTop",parseInt(r.target.value))}),e.jsxs(s.Text,{className:"text-muted",children:[t.headerTop,"px"]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Заголовок - позиция по горизонтали (%)"}),e.jsx(s.Range,{min:"0",max:"100",value:t.headerLeft,onChange:r=>a("headerLeft",parseInt(r.target.value))}),e.jsxs(s.Text,{className:"text-muted",children:[t.headerLeft,"%"]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Игроки - отступ сверху (px)"}),e.jsx(s.Range,{min:"0",max:"200",value:t.playersTop,onChange:r=>a("playersTop",parseInt(r.target.value))}),e.jsxs(s.Text,{className:"text-muted",children:[t.playersTop,"px"]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Игроки - отступ слева (px)"}),e.jsx(s.Range,{min:"0",max:"200",value:t.playersLeft,onChange:r=>a("playersLeft",parseInt(r.target.value))}),e.jsxs(s.Text,{className:"text-muted",children:[t.playersLeft,"px"]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Игроки - отступ справа (px)"}),e.jsx(s.Range,{min:"0",max:"200",value:t.playersRight,onChange:r=>a("playersRight",parseInt(r.target.value))}),e.jsxs(s.Text,{className:"text-muted",children:[t.playersRight,"px"]})]})]}),e.jsxs(i,{md:6,children:[e.jsx("h6",{className:"mb-3",children:"Размеры"}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Ширина заголовка (px)"}),e.jsx(s.Range,{min:"200",max:"800",value:t.headerWidth,onChange:r=>a("headerWidth",parseInt(r.target.value))}),e.jsxs(s.Text,{className:"text-muted",children:[t.headerWidth,"px"]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Высота заголовка (px)"}),e.jsx(s.Range,{min:"40",max:"120",value:t.headerHeight,onChange:r=>a("headerHeight",parseInt(r.target.value))}),e.jsxs(s.Text,{className:"text-muted",children:[t.headerHeight,"px"]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Ширина карточки игрока (px)"}),e.jsx(s.Range,{min:"200",max:"600",value:t.playerBarWidth,onChange:r=>a("playerBarWidth",parseInt(r.target.value))}),e.jsxs(s.Text,{className:"text-muted",children:[t.playerBarWidth,"px"]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Высота карточки игрока (px)"}),e.jsx(s.Range,{min:"60",max:"150",value:t.playerBarHeight,onChange:r=>a("playerBarHeight",parseInt(r.target.value))}),e.jsxs(s.Text,{className:"text-muted",children:[t.playerBarHeight,"px"]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Размер счета (px)"}),e.jsx(s.Range,{min:"30",max:"80",value:t.scoreSize,onChange:r=>a("scoreSize",parseInt(r.target.value))}),e.jsxs(s.Text,{className:"text-muted",children:[t.scoreSize,"px"]})]})]})]}),e.jsx(u,{className:"w-100 mt-3",children:e.jsxs(i,{md:12,children:[e.jsx("h6",{className:"mb-3",children:"Дополнительные настройки"}),e.jsxs(u,{children:[e.jsx(i,{md:4,children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Отступы (px)"}),e.jsx(s.Range,{min:"5",max:"30",value:t.padding,onChange:r=>a("padding",parseInt(r.target.value))}),e.jsxs(s.Text,{className:"text-muted",children:[t.padding,"px"]})]})}),e.jsx(i,{md:4,children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Расстояние между элементами (px)"}),e.jsx(s.Range,{min:"5",max:"50",value:t.spacing,onChange:r=>a("spacing",parseInt(r.target.value))}),e.jsxs(s.Text,{className:"text-muted",children:[t.spacing,"px"]})]})}),e.jsx(i,{md:4,children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Check,{type:"checkbox",label:"Показывать заголовок",checked:t.showHeader,onChange:r=>a("showHeader",r.target.checked)}),e.jsx(s.Check,{type:"checkbox",label:"Показывать флаги",checked:t.showFlags,onChange:r=>a("showFlags",r.target.checked)}),e.jsx(s.Check,{type:"checkbox",label:"Показывать теги",checked:t.showTags,onChange:r=>a("showTags",r.target.checked)})]})})]})]})}),e.jsx("iframe",{width:"1920",className:"w-100",src:"/scoreboard",style:{background:"var(--site-bg-primary)",border:"3px solid var(--site-border-accent)",borderRadius:"20px",display:"block",margin:"5vh 5px",boxShadow:"0 2px 8px var(--bs-box-shadow-lg)"}})]})]})};S.__docgenInfo={description:"",methods:[],displayName:"LayoutCard"};const ce=()=>{const t=k(),{swapPlayers:n}=W(),{handleReceiveState:a,reset:l}=F(),r=x.useRef(0),c=x.useCallback(p=>{const b=Date.now();if(b-r.current<100){console.log("Ignoring too frequent update");return}r.current=b,a(p)},[a]),o=D(p=>p._connection);x.useEffect(()=>{o.state===q.Connected&&(o.on("ReceiveState",c),o.on("StateUpdated",c))},[o,c]);const m=U();x.useEffect(()=>{typeof window<"u"&&window.innerWidth<768&&m("/scoreboard-admin")},[m]);const d=x.useCallback(async()=>{try{await n()}catch(p){console.error("Error swapping names:",p)}},[n]);return e.jsxs(P,{className:`py-4 admin-panel ${N.adminPanel}`,style:{backgroundColor:t.background.primary,color:t.text.primary},children:[e.jsxs(u,{className:"mb-4 align-items-center",children:[e.jsx(i,{xs:12,md:8,children:e.jsx("h2",{className:N.adminTitle,style:t.utils.getTextStyle("primary"),children:"Админ панель скорборда"})}),e.jsx(i,{xs:12,md:4,className:"d-flex justify-content-end",children:e.jsx(O,{variant:"admin",size:"md"})})]}),e.jsxs(u,{className:"mb-4",children:[e.jsx(i,{xs:12,md:6,lg:6,children:e.jsx(M,{})}),e.jsx(i,{xs:12,md:6,lg:6,children:e.jsx($,{})})]}),e.jsx(S,{}),e.jsx(E,{}),e.jsxs(u,{className:"justify-content-center align-items-center g-4",children:[e.jsx(i,{xs:12,md:5,lg:4,className:"d-flex justify-content-center mb-3 mb-md-0",children:e.jsx(y,{playerIndex:1,label:"Player 1",accent:"#0dcaf0"})}),e.jsx(i,{xs:12,md:2,lg:2,className:"d-flex flex-column align-items-center justify-content-center gap-3 mb-3 mb-md-0 mx-2",children:e.jsx(B,{onSwapNames:d,onSwapPlayers:n,onReset:l})}),e.jsx(i,{xs:12,md:5,lg:4,className:"d-flex justify-content-center mb-3 mb-md-0",children:e.jsx(y,{playerIndex:2,label:"Player 2",accent:"#6610f2"})})]})]})},ie=()=>e.jsx(ce,{});ie.__docgenInfo={description:"",methods:[],displayName:"AdminPanel"};export{ie as A};
