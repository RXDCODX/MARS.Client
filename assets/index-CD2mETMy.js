import{c as dx,b as hx,g as Js,a as mf,j as xt}from"./iframe-Bw5_no3n.js";import{l as Wd}from"./index-CWENsiQl.js";import{S as px,v as Wi}from"./index-tHvxiBO9.js";import{c as mx}from"./react-aIfyORke.js";var hu,Vd;function Ys(){if(Vd)return hu;Vd=1;class n{constructor(t,r,i){if(new.target.name===n.name)throw new Error("Base Emote class cannot be used");this.fetcher=t.fetcher,this.channel=t,this.id=r,this.type=null,this._setup(i)}_setup(t){this.code=t.code}toLink(){return null}toString(){return this.code}toObject(){return{code:this.code,id:this.id,channel_id:this.channel.channel_id}}}return hu=n,hu}var pu,zd;function ir(){return zd||(zd=1,pu={Twitch:{CDN:(n,e)=>`https://static-cdn.jtvnw.net/emoticons/v2/${n}/default/dark/${e+1}.0`},BTTV:{Global:"https://api.betterttv.net/3/cached/emotes/global",Channel:n=>`https://api.betterttv.net/3/cached/users/twitch/${n}`,CDN:(n,e)=>`https://cdn.betterttv.net/emote/${n}/${e+1}x.webp`},SevenTV:{Global:"https://7tv.io/v3/emote-sets/global",Channel:n=>`https://7tv.io/v3/users/twitch/${n}`,CDN:(n,e)=>`https://cdn.7tv.app/emote/${n}/${e}`},FFZ:{sets:{Global:3,Modifiers:1532818},Set:n=>`https://api.frankerfacez.com/v1/set/${n}`,Channel:n=>`https://api.frankerfacez.com/v1/room/id/${n}`,CDN:(n,e)=>`https://cdn.frankerfacez.com/emote/${n}/${e}`,CDNAnimated:(n,e)=>`https://cdn.frankerfacez.com/emote/${n}/animated/${e}.webp`},Templates:{html:'<img alt="{name}" title="{name}" class="twitch-emote twitch-emote-{size}" src="{link}">',markdown:'![{name}]({link} "{name}")',bbcode:"[img]{link}[/img]",plain:"{link}"}}),pu}var mu,Kd;function _f(){if(Kd)return mu;Kd=1;const n=Ys(),e=ir();class t extends n{constructor(i,a,s){super(i,a,s),this.type="bttv"}get owner(){return this.fetcher.channels.get(this.ownerName)}_setup(i){super._setup(i),this.ownerName="user"in i?i.user.name:null,this.animated=i.animated,this.imageType="webp"}toLink(i=0){return e.BTTV.CDN(this.id,i)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,ownerName:this.ownerName,type:this.type})}static fromObject(i,a=null){return new t(a,i.id,{code:i.code,animated:i.animated,user:{name:i.ownerName}})}}return mu=t,mu}var _u,Xd;function Fc(){if(Xd)return _u;Xd=1;class n extends Map{find(t,r){if(typeof t=="string"){if(typeof r>"u")return null;for(const i of this.values())if(i[t]===r)return i;return null}if(typeof t=="function"){let i=0;for(const a of this.values()){if(t(a,i,this))return a;i++}return null}return null}filter(t,r){r&&(t=t.bind(r));const i=new this.constructor;let a=0;for(const[s,o]of this)t(o,a,this)&&i.set(s,o),a++;return i}map(t,r){r&&(t=t.bind(r));const i=new Array(this.size);let a=0;for(const s of this.values())i[a]=t(s,a,this),a++;return i}}return _u=n,_u}var gu,Jd;function gf(){if(Jd)return gu;Jd=1;const n=Fc();class e{constructor(r,i){this.fetcher=r,this.channel_id=i,this.emotes=new n}fetchBTTVEmotes(){return this.fetcher.fetchBTTVEmotes(this.id)}fetchFFZEmotes(){return this.fetcher.fetchFFZEmotes(this.id)}fetchSevenTVEmotes(){return this.fetcher.fetchSevenTVEmotes(this.id)}}return gu=e,gu}var fu,Yd;function ff(){if(Yd)return fu;Yd=1;const n=Ys(),e=ir();class t extends n{constructor(i,a,s){super(i,a,s),this.type="ffz"}get owner(){return this.fetcher.channels.get(this.ownerName)}_setup(i){super._setup(i),this.code=i.name,this.ownerName="owner"in i?i.owner.name:null,this.sizes="animated"in i?Object.keys(i.animated):Object.keys(i.urls),this.animated="animated"in i,this.imageType="animated"in i?"webp":"png",this.modifier=i.modifier&&(i.modifier_flags&1)!==0}toLink(i=0){return i=this.sizes[i],this.animated?e.FFZ.CDNAnimated(this.id,i):e.FFZ.CDN(this.id,i)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,sizes:this.sizes,ownerName:this.ownerName,type:this.type,modifier:this.modifier})}static fromObject(i,a=null){const s=i.sizes.reduce((o,u)=>(o[u]=u,o),{});return new t(a,i.id,{code:i.code,name:i.code,urls:s,...i.animated?{animated:s}:{},owner:{name:i.ownerName},modifier:i.modifier,modifier_flags:i.modifier})}}return fu=t,fu}var yu,Zd;function yf(){if(Zd)return yu;Zd=1;const n=Ys(),e=ir();class t extends n{constructor(i,a,s){super(i,a,s),this.type="7tv"}get owner(){return this.fetcher.channels.get(this.ownerName)}_setup(i){super._setup(i),this.code=i.name,this.ownerName="owner"in i.data?i.data.owner.display_name:null,this.sizes=i.data.host.files.filter(a=>a.format===this.channel.format.toUpperCase()).map(a=>a.name),this.animated=i.data.animated,this.imageType=this.channel.format}toLink(i=0){return i=this.sizes[i],e.SevenTV.CDN(this.id,i)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,sizes:this.sizes,ownerName:this.ownerName,type:this.type,imageType:this.imageType})}static fromObject(i,a){const s=i.sizes.map(o=>({format:a.format.toUpperCase(),name:o}));return new t(a,i.id,{code:i.code,name:i.code,data:{animated:i.animated,owner:{display_name:i.ownerName},host:{files:s}}})}}return yu=t,yu}var bu,eh;function bf(){if(eh)return bu;eh=1;const n=Ys(),e=ir();class t extends n{constructor(i,a,s){super(i,a,s),this.type="twitch"}get owner(){return this.channel}_setup(i){super._setup(i),this.set=i.emoticon_set,this.animated="animated"in i.formats,this.imageType="animated"in i.formats?"gif":"png"}toLink(i=0){return e.Twitch.CDN(this.id,i)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,set:this.set,type:this.type})}static fromObject(i,a=null){return new t(a,i.id,{code:i.code,animated:i.animated,emoticon_set:i.set,formats:i.animated?{animated:i.animated}:{}})}}return bu=t,bu}/*! Axios v1.10.0 Copyright (c) 2025 Matt Zabriskie and contributors */var vu,th;function _x(){if(th)return vu;th=1;function n(g,v){return function(){return g.apply(v,arguments)}}const{toString:e}=Object.prototype,{getPrototypeOf:t}=Object,{iterator:r,toStringTag:i}=Symbol,a=(g=>v=>{const x=e.call(v);return g[x]||(g[x]=x.slice(8,-1).toLowerCase())})(Object.create(null)),s=g=>(g=g.toLowerCase(),v=>a(v)===g),o=g=>v=>typeof v===g,{isArray:u}=Array,h=o("undefined");function m(g){return g!==null&&!h(g)&&g.constructor!==null&&!h(g.constructor)&&p(g.constructor.isBuffer)&&g.constructor.isBuffer(g)}const w=s("ArrayBuffer");function y(g){let v;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?v=ArrayBuffer.isView(g):v=g&&g.buffer&&w(g.buffer),v}const _=o("string"),p=o("function"),l=o("number"),d=g=>g!==null&&typeof g=="object",b=g=>g===!0||g===!1,S=g=>{if(a(g)!=="object")return!1;const v=t(g);return(v===null||v===Object.prototype||Object.getPrototypeOf(v)===null)&&!(i in g)&&!(r in g)},R=s("Date"),P=s("File"),f=s("Blob"),H=s("FileList"),E=g=>d(g)&&p(g.pipe),B=g=>{let v;return g&&(typeof FormData=="function"&&g instanceof FormData||p(g.append)&&((v=a(g))==="formdata"||v==="object"&&p(g.toString)&&g.toString()==="[object FormData]"))},j=s("URLSearchParams"),[Z,z,Te,se]=["ReadableStream","Request","Response","Headers"].map(s),D=g=>g.trim?g.trim():g.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function N(g,v,{allOwnKeys:x=!1}={}){if(g===null||typeof g>"u")return;let C,T;if(typeof g!="object"&&(g=[g]),u(g))for(C=0,T=g.length;C<T;C++)v.call(null,g[C],C,g);else{const O=x?Object.getOwnPropertyNames(g):Object.keys(g),U=O.length;let $;for(C=0;C<U;C++)$=O[C],v.call(null,g[$],$,g)}}function ae(g,v){v=v.toLowerCase();const x=Object.keys(g);let C=x.length,T;for(;C-- >0;)if(T=x[C],v===T.toLowerCase())return T;return null}const he=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:dx,we=g=>!h(g)&&g!==he;function X(){const{caseless:g}=we(this)&&this||{},v={},x=(C,T)=>{const O=g&&ae(v,T)||T;S(v[O])&&S(C)?v[O]=X(v[O],C):S(C)?v[O]=X({},C):u(C)?v[O]=C.slice():v[O]=C};for(let C=0,T=arguments.length;C<T;C++)arguments[C]&&N(arguments[C],x);return v}const dt=(g,v,x,{allOwnKeys:C}={})=>(N(v,(T,O)=>{x&&p(T)?g[O]=n(T,x):g[O]=T},{allOwnKeys:C}),g),J=g=>(g.charCodeAt(0)===65279&&(g=g.slice(1)),g),Se=(g,v,x,C)=>{g.prototype=Object.create(v.prototype,C),g.prototype.constructor=g,Object.defineProperty(g,"super",{value:v.prototype}),x&&Object.assign(g.prototype,x)},Ce=(g,v,x,C)=>{let T,O,U;const $={};if(v=v||{},g==null)return v;do{for(T=Object.getOwnPropertyNames(g),O=T.length;O-- >0;)U=T[O],(!C||C(U,g,v))&&!$[U]&&(v[U]=g[U],$[U]=!0);g=x!==!1&&t(g)}while(g&&(!x||x(g,v))&&g!==Object.prototype);return v},tt=(g,v,x)=>{g=String(g),(x===void 0||x>g.length)&&(x=g.length),x-=v.length;const C=g.indexOf(v,x);return C!==-1&&C===x},Ie=g=>{if(!g)return null;if(u(g))return g;let v=g.length;if(!l(v))return null;const x=new Array(v);for(;v-- >0;)x[v]=g[v];return x},$e=(g=>v=>g&&v instanceof g)(typeof Uint8Array<"u"&&t(Uint8Array)),De=(g,v)=>{const C=(g&&g[r]).call(g);let T;for(;(T=C.next())&&!T.done;){const O=T.value;v.call(g,O[0],O[1])}},Be=(g,v)=>{let x;const C=[];for(;(x=g.exec(v))!==null;)C.push(x);return C},st=s("HTMLFormElement"),ht=g=>g.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(x,C,T){return C.toUpperCase()+T}),vt=(({hasOwnProperty:g})=>(v,x)=>g.call(v,x))(Object.prototype),ki=s("RegExp"),sr=(g,v)=>{const x=Object.getOwnPropertyDescriptors(g),C={};N(x,(T,O)=>{let U;(U=v(T,O,g))!==!1&&(C[O]=U||T)}),Object.defineProperties(g,C)},Mi=g=>{sr(g,(v,x)=>{if(p(g)&&["arguments","caller","callee"].indexOf(x)!==-1)return!1;const C=g[x];if(p(C)){if(v.enumerable=!1,"writable"in v){v.writable=!1;return}v.set||(v.set=()=>{throw Error("Can not rewrite read-only method '"+x+"'")})}})},or=(g,v)=>{const x={},C=T=>{T.forEach(O=>{x[O]=!0})};return u(g)?C(g):C(String(g).split(v)),x},rt=()=>{},Dl=(g,v)=>g!=null&&Number.isFinite(g=+g)?g:v;function Bl(g){return!!(g&&p(g.append)&&g[i]==="FormData"&&g[r])}const Ol=g=>{const v=new Array(10),x=(C,T)=>{if(d(C)){if(v.indexOf(C)>=0)return;if(!("toJSON"in C)){v[T]=C;const O=u(C)?[]:{};return N(C,(U,$)=>{const Y=x(U,T+1);!h(Y)&&(O[$]=Y)}),v[T]=void 0,O}}return C};return x(g,0)},Ul=s("AsyncFunction"),ql=g=>g&&(d(g)||p(g))&&p(g.then)&&p(g.catch),ro=((g,v)=>g?setImmediate:v?((x,C)=>(he.addEventListener("message",({source:T,data:O})=>{T===he&&O===x&&C.length&&C.shift()()},!1),T=>{C.push(T),he.postMessage(x,"*")}))(`axios@${Math.random()}`,[]):x=>setTimeout(x))(typeof setImmediate=="function",p(he.postMessage)),kl=typeof queueMicrotask<"u"?queueMicrotask.bind(he):typeof process<"u"&&process.nextTick||ro;var k={isArray:u,isArrayBuffer:w,isBuffer:m,isFormData:B,isArrayBufferView:y,isString:_,isNumber:l,isBoolean:b,isObject:d,isPlainObject:S,isReadableStream:Z,isRequest:z,isResponse:Te,isHeaders:se,isUndefined:h,isDate:R,isFile:P,isBlob:f,isRegExp:ki,isFunction:p,isStream:E,isURLSearchParams:j,isTypedArray:$e,isFileList:H,forEach:N,merge:X,extend:dt,trim:D,stripBOM:J,inherits:Se,toFlatObject:Ce,kindOf:a,kindOfTest:s,endsWith:tt,toArray:Ie,forEachEntry:De,matchAll:Be,isHTMLForm:st,hasOwnProperty:vt,hasOwnProp:vt,reduceDescriptors:sr,freezeMethods:Mi,toObjectSet:or,toCamelCase:ht,noop:rt,toFiniteNumber:Dl,findKey:ae,global:he,isContextDefined:we,isSpecCompliantForm:Bl,toJSONObject:Ol,isAsyncFn:Ul,isThenable:ql,setImmediate:ro,asap:kl,isIterable:g=>g!=null&&p(g[r])};function oe(g,v,x,C,T){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=g,this.name="AxiosError",v&&(this.code=v),x&&(this.config=x),C&&(this.request=C),T&&(this.response=T,this.status=T.status?T.status:null)}k.inherits(oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.status}}});const no=oe.prototype,io={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(g=>{io[g]={value:g}}),Object.defineProperties(oe,io),Object.defineProperty(no,"isAxiosError",{value:!0}),oe.from=(g,v,x,C,T,O)=>{const U=Object.create(no);return k.toFlatObject(g,U,function(Y){return Y!==Error.prototype},$=>$!=="isAxiosError"),oe.call(U,g.message,v,x,C,T),U.cause=g,U.name=g.name,O&&Object.assign(U,O),U};var Ml=null;function ji(g){return k.isPlainObject(g)||k.isArray(g)}function ao(g){return k.endsWith(g,"[]")?g.slice(0,-2):g}function so(g,v,x){return g?g.concat(v).map(function(T,O){return T=ao(T),!x&&O?"["+T+"]":T}).join(x?".":""):v}function jl(g){return k.isArray(g)&&!g.some(ji)}const Ll=k.toFlatObject(k,{},null,function(v){return/^is[A-Z]/.test(v)});function lr(g,v,x){if(!k.isObject(g))throw new TypeError("target must be an object");v=v||new FormData,x=k.toFlatObject(x,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ce,ne){return!k.isUndefined(ne[ce])});const C=x.metaTokens,T=x.visitor||Q,O=x.dots,U=x.indexes,Y=(x.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(v);if(!k.isFunction(T))throw new TypeError("visitor must be a function");function G(ee){if(ee===null)return"";if(k.isDate(ee))return ee.toISOString();if(k.isBoolean(ee))return ee.toString();if(!Y&&k.isBlob(ee))throw new oe("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(ee)||k.isTypedArray(ee)?Y&&typeof Blob=="function"?new Blob([ee]):Buffer.from(ee):ee}function Q(ee,ce,ne){let He=ee;if(ee&&!ne&&typeof ee=="object"){if(k.endsWith(ce,"{}"))ce=C?ce:ce.slice(0,-2),ee=JSON.stringify(ee);else if(k.isArray(ee)&&jl(ee)||(k.isFileList(ee)||k.endsWith(ce,"[]"))&&(He=k.toArray(ee)))return ce=ao(ce),He.forEach(function(Le,pt){!(k.isUndefined(Le)||Le===null)&&v.append(U===!0?so([ce],pt,O):U===null?ce:ce+"[]",G(Le))}),!1}return ji(ee)?!0:(v.append(so(ne,ce,O),G(ee)),!1)}const re=[],ye=Object.assign(Ll,{defaultVisitor:Q,convertValue:G,isVisitable:ji});function Oe(ee,ce){if(!k.isUndefined(ee)){if(re.indexOf(ee)!==-1)throw Error("Circular reference detected in "+ce.join("."));re.push(ee),k.forEach(ee,function(He,Ue){(!(k.isUndefined(He)||He===null)&&T.call(v,He,k.isString(Ue)?Ue.trim():Ue,ce,ye))===!0&&Oe(He,ce?ce.concat(Ue):[Ue])}),re.pop()}}if(!k.isObject(g))throw new TypeError("data must be an object");return Oe(g),v}function oo(g){const v={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(g).replace(/[!'()~]|%20|%00/g,function(C){return v[C]})}function Li(g,v){this._pairs=[],g&&lr(g,this,v)}const lo=Li.prototype;lo.append=function(v,x){this._pairs.push([v,x])},lo.toString=function(v){const x=v?function(C){return v.call(this,C,oo)}:oo;return this._pairs.map(function(T){return x(T[0])+"="+x(T[1])},"").join("&")};function Nl(g){return encodeURIComponent(g).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function uo(g,v,x){if(!v)return g;const C=x&&x.encode||Nl;k.isFunction(x)&&(x={serialize:x});const T=x&&x.serialize;let O;if(T?O=T(v,x):O=k.isURLSearchParams(v)?v.toString():new Li(v,x).toString(C),O){const U=g.indexOf("#");U!==-1&&(g=g.slice(0,U)),g+=(g.indexOf("?")===-1?"?":"&")+O}return g}class Fl{constructor(){this.handlers=[]}use(v,x,C){return this.handlers.push({fulfilled:v,rejected:x,synchronous:C?C.synchronous:!1,runWhen:C?C.runWhen:null}),this.handlers.length-1}eject(v){this.handlers[v]&&(this.handlers[v]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(v){k.forEach(this.handlers,function(C){C!==null&&v(C)})}}var co=Fl,ho={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$l=typeof URLSearchParams<"u"?URLSearchParams:Li,Gl=typeof FormData<"u"?FormData:null,Ql=typeof Blob<"u"?Blob:null,Wl={isBrowser:!0,classes:{URLSearchParams:$l,FormData:Gl,Blob:Ql},protocols:["http","https","file","blob","url","data"]};const Ni=typeof window<"u"&&typeof document<"u",Fi=typeof navigator=="object"&&navigator||void 0,Vl=Ni&&(!Fi||["ReactNative","NativeScript","NS"].indexOf(Fi.product)<0),zl=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Kl=Ni&&window.location.href||"http://localhost";var Xl=Object.freeze({__proto__:null,hasBrowserEnv:Ni,hasStandardBrowserWebWorkerEnv:zl,hasStandardBrowserEnv:Vl,navigator:Fi,origin:Kl}),je={...Xl,...Wl};function Jl(g,v){return lr(g,new je.classes.URLSearchParams,Object.assign({visitor:function(x,C,T,O){return je.isNode&&k.isBuffer(x)?(this.append(C,x.toString("base64")),!1):O.defaultVisitor.apply(this,arguments)}},v))}function Yl(g){return k.matchAll(/\w+|\[(\w*)]/g,g).map(v=>v[0]==="[]"?"":v[1]||v[0])}function Zl(g){const v={},x=Object.keys(g);let C;const T=x.length;let O;for(C=0;C<T;C++)O=x[C],v[O]=g[O];return v}function po(g){function v(x,C,T,O){let U=x[O++];if(U==="__proto__")return!0;const $=Number.isFinite(+U),Y=O>=x.length;return U=!U&&k.isArray(T)?T.length:U,Y?(k.hasOwnProp(T,U)?T[U]=[T[U],C]:T[U]=C,!$):((!T[U]||!k.isObject(T[U]))&&(T[U]=[]),v(x,C,T[U],O)&&k.isArray(T[U])&&(T[U]=Zl(T[U])),!$)}if(k.isFormData(g)&&k.isFunction(g.entries)){const x={};return k.forEachEntry(g,(C,T)=>{v(Yl(C),T,x,0)}),x}return null}function eu(g,v,x){if(k.isString(g))try{return(v||JSON.parse)(g),k.trim(g)}catch(C){if(C.name!=="SyntaxError")throw C}return(x||JSON.stringify)(g)}const $i={transitional:ho,adapter:["xhr","http","fetch"],transformRequest:[function(v,x){const C=x.getContentType()||"",T=C.indexOf("application/json")>-1,O=k.isObject(v);if(O&&k.isHTMLForm(v)&&(v=new FormData(v)),k.isFormData(v))return T?JSON.stringify(po(v)):v;if(k.isArrayBuffer(v)||k.isBuffer(v)||k.isStream(v)||k.isFile(v)||k.isBlob(v)||k.isReadableStream(v))return v;if(k.isArrayBufferView(v))return v.buffer;if(k.isURLSearchParams(v))return x.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),v.toString();let $;if(O){if(C.indexOf("application/x-www-form-urlencoded")>-1)return Jl(v,this.formSerializer).toString();if(($=k.isFileList(v))||C.indexOf("multipart/form-data")>-1){const Y=this.env&&this.env.FormData;return lr($?{"files[]":v}:v,Y&&new Y,this.formSerializer)}}return O||T?(x.setContentType("application/json",!1),eu(v)):v}],transformResponse:[function(v){const x=this.transitional||$i.transitional,C=x&&x.forcedJSONParsing,T=this.responseType==="json";if(k.isResponse(v)||k.isReadableStream(v))return v;if(v&&k.isString(v)&&(C&&!this.responseType||T)){const U=!(x&&x.silentJSONParsing)&&T;try{return JSON.parse(v)}catch($){if(U)throw $.name==="SyntaxError"?oe.from($,oe.ERR_BAD_RESPONSE,this,null,this.response):$}}return v}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:je.classes.FormData,Blob:je.classes.Blob},validateStatus:function(v){return v>=200&&v<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],g=>{$i.headers[g]={}});var Gi=$i;const tu=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var ru=g=>{const v={};let x,C,T;return g&&g.split(`
`).forEach(function(U){T=U.indexOf(":"),x=U.substring(0,T).trim().toLowerCase(),C=U.substring(T+1).trim(),!(!x||v[x]&&tu[x])&&(x==="set-cookie"?v[x]?v[x].push(C):v[x]=[C]:v[x]=v[x]?v[x]+", "+C:C)}),v};const mo=Symbol("internals");function Ot(g){return g&&String(g).trim().toLowerCase()}function ur(g){return g===!1||g==null?g:k.isArray(g)?g.map(ur):String(g)}function nu(g){const v=Object.create(null),x=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let C;for(;C=x.exec(g);)v[C[1]]=C[2];return v}const iu=g=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(g.trim());function Qi(g,v,x,C,T){if(k.isFunction(C))return C.call(this,v,x);if(T&&(v=x),!!k.isString(v)){if(k.isString(C))return v.indexOf(C)!==-1;if(k.isRegExp(C))return C.test(v)}}function au(g){return g.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(v,x,C)=>x.toUpperCase()+C)}function cr(g,v){const x=k.toCamelCase(" "+v);["get","set","has"].forEach(C=>{Object.defineProperty(g,C+x,{value:function(T,O,U){return this[C].call(this,v,T,O,U)},configurable:!0})})}class _o{constructor(v){v&&this.set(v)}set(v,x,C){const T=this;function O($,Y,G){const Q=Ot(Y);if(!Q)throw new Error("header name must be a non-empty string");const re=k.findKey(T,Q);(!re||T[re]===void 0||G===!0||G===void 0&&T[re]!==!1)&&(T[re||Y]=ur($))}const U=($,Y)=>k.forEach($,(G,Q)=>O(G,Q,Y));if(k.isPlainObject(v)||v instanceof this.constructor)U(v,x);else if(k.isString(v)&&(v=v.trim())&&!iu(v))U(ru(v),x);else if(k.isObject(v)&&k.isIterable(v)){let $={},Y,G;for(const Q of v){if(!k.isArray(Q))throw TypeError("Object iterator must return a key-value pair");$[G=Q[0]]=(Y=$[G])?k.isArray(Y)?[...Y,Q[1]]:[Y,Q[1]]:Q[1]}U($,x)}else v!=null&&O(x,v,C);return this}get(v,x){if(v=Ot(v),v){const C=k.findKey(this,v);if(C){const T=this[C];if(!x)return T;if(x===!0)return nu(T);if(k.isFunction(x))return x.call(this,T,C);if(k.isRegExp(x))return x.exec(T);throw new TypeError("parser must be boolean|regexp|function")}}}has(v,x){if(v=Ot(v),v){const C=k.findKey(this,v);return!!(C&&this[C]!==void 0&&(!x||Qi(this,this[C],C,x)))}return!1}delete(v,x){const C=this;let T=!1;function O(U){if(U=Ot(U),U){const $=k.findKey(C,U);$&&(!x||Qi(C,C[$],$,x))&&(delete C[$],T=!0)}}return k.isArray(v)?v.forEach(O):O(v),T}clear(v){const x=Object.keys(this);let C=x.length,T=!1;for(;C--;){const O=x[C];(!v||Qi(this,this[O],O,v,!0))&&(delete this[O],T=!0)}return T}normalize(v){const x=this,C={};return k.forEach(this,(T,O)=>{const U=k.findKey(C,O);if(U){x[U]=ur(T),delete x[O];return}const $=v?au(O):String(O).trim();$!==O&&delete x[O],x[$]=ur(T),C[$]=!0}),this}concat(...v){return this.constructor.concat(this,...v)}toJSON(v){const x=Object.create(null);return k.forEach(this,(C,T)=>{C!=null&&C!==!1&&(x[T]=v&&k.isArray(C)?C.join(", "):C)}),x}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([v,x])=>v+": "+x).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(v){return v instanceof this?v:new this(v)}static concat(v,...x){const C=new this(v);return x.forEach(T=>C.set(T)),C}static accessor(v){const C=(this[mo]=this[mo]={accessors:{}}).accessors,T=this.prototype;function O(U){const $=Ot(U);C[$]||(cr(T,U),C[$]=!0)}return k.isArray(v)?v.forEach(O):O(v),this}}_o.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),k.reduceDescriptors(_o.prototype,({value:g},v)=>{let x=v[0].toUpperCase()+v.slice(1);return{get:()=>g,set(C){this[x]=C}}}),k.freezeMethods(_o);var nt=_o;function su(g,v){const x=this||Gi,C=v||x,T=nt.from(C.headers);let O=C.data;return k.forEach(g,function($){O=$.call(x,O,T.normalize(),v?v.status:void 0)}),T.normalize(),O}function Rd(g){return!!(g&&g.__CANCEL__)}function dr(g,v,x){oe.call(this,g??"canceled",oe.ERR_CANCELED,v,x),this.name="CanceledError"}k.inherits(dr,oe,{__CANCEL__:!0});function Td(g,v,x){const C=x.config.validateStatus;!x.status||!C||C(x.status)?g(x):v(new oe("Request failed with status code "+x.status,[oe.ERR_BAD_REQUEST,oe.ERR_BAD_RESPONSE][Math.floor(x.status/100)-4],x.config,x.request,x))}function Fw(g){const v=/^([-+\w]{1,25})(:?\/\/|:)/.exec(g);return v&&v[1]||""}function $w(g,v){g=g||10;const x=new Array(g),C=new Array(g);let T=0,O=0,U;return v=v!==void 0?v:1e3,function(Y){const G=Date.now(),Q=C[O];U||(U=G),x[T]=Y,C[T]=G;let re=O,ye=0;for(;re!==T;)ye+=x[re++],re=re%g;if(T=(T+1)%g,T===O&&(O=(O+1)%g),G-U<v)return;const Oe=Q&&G-Q;return Oe?Math.round(ye*1e3/Oe):void 0}}function Gw(g,v){let x=0,C=1e3/v,T,O;const U=(G,Q=Date.now())=>{x=Q,T=null,O&&(clearTimeout(O),O=null),g.apply(null,G)};return[(...G)=>{const Q=Date.now(),re=Q-x;re>=C?U(G,Q):(T=G,O||(O=setTimeout(()=>{O=null,U(T)},C-re)))},()=>T&&U(T)]}const go=(g,v,x=3)=>{let C=0;const T=$w(50,250);return Gw(O=>{const U=O.loaded,$=O.lengthComputable?O.total:void 0,Y=U-C,G=T(Y),Q=U<=$;C=U;const re={loaded:U,total:$,progress:$?U/$:void 0,bytes:Y,rate:G||void 0,estimated:G&&$&&Q?($-U)/G:void 0,event:O,lengthComputable:$!=null,[v?"download":"upload"]:!0};g(re)},x)},Id=(g,v)=>{const x=g!=null;return[C=>v[0]({lengthComputable:x,total:g,loaded:C}),v[1]]},Pd=g=>(...v)=>k.asap(()=>g(...v));var Qw=je.hasStandardBrowserEnv?((g,v)=>x=>(x=new URL(x,je.origin),g.protocol===x.protocol&&g.host===x.host&&(v||g.port===x.port)))(new URL(je.origin),je.navigator&&/(msie|trident)/i.test(je.navigator.userAgent)):()=>!0,Ww=je.hasStandardBrowserEnv?{write(g,v,x,C,T,O){const U=[g+"="+encodeURIComponent(v)];k.isNumber(x)&&U.push("expires="+new Date(x).toGMTString()),k.isString(C)&&U.push("path="+C),k.isString(T)&&U.push("domain="+T),O===!0&&U.push("secure"),document.cookie=U.join("; ")},read(g){const v=document.cookie.match(new RegExp("(^|;\\s*)("+g+")=([^;]*)"));return v?decodeURIComponent(v[3]):null},remove(g){this.write(g,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Vw(g){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(g)}function zw(g,v){return v?g.replace(/\/?\/$/,"")+"/"+v.replace(/^\/+/,""):g}function Dd(g,v,x){let C=!Vw(v);return g&&(C||x==!1)?zw(g,v):v}const Bd=g=>g instanceof nt?{...g}:g;function Ut(g,v){v=v||{};const x={};function C(G,Q,re,ye){return k.isPlainObject(G)&&k.isPlainObject(Q)?k.merge.call({caseless:ye},G,Q):k.isPlainObject(Q)?k.merge({},Q):k.isArray(Q)?Q.slice():Q}function T(G,Q,re,ye){if(k.isUndefined(Q)){if(!k.isUndefined(G))return C(void 0,G,re,ye)}else return C(G,Q,re,ye)}function O(G,Q){if(!k.isUndefined(Q))return C(void 0,Q)}function U(G,Q){if(k.isUndefined(Q)){if(!k.isUndefined(G))return C(void 0,G)}else return C(void 0,Q)}function $(G,Q,re){if(re in v)return C(G,Q);if(re in g)return C(void 0,G)}const Y={url:O,method:O,data:O,baseURL:U,transformRequest:U,transformResponse:U,paramsSerializer:U,timeout:U,timeoutMessage:U,withCredentials:U,withXSRFToken:U,adapter:U,responseType:U,xsrfCookieName:U,xsrfHeaderName:U,onUploadProgress:U,onDownloadProgress:U,decompress:U,maxContentLength:U,maxBodyLength:U,beforeRedirect:U,transport:U,httpAgent:U,httpsAgent:U,cancelToken:U,socketPath:U,responseEncoding:U,validateStatus:$,headers:(G,Q,re)=>T(Bd(G),Bd(Q),re,!0)};return k.forEach(Object.keys(Object.assign({},g,v)),function(Q){const re=Y[Q]||T,ye=re(g[Q],v[Q],Q);k.isUndefined(ye)&&re!==$||(x[Q]=ye)}),x}var Od=g=>{const v=Ut({},g);let{data:x,withXSRFToken:C,xsrfHeaderName:T,xsrfCookieName:O,headers:U,auth:$}=v;v.headers=U=nt.from(U),v.url=uo(Dd(v.baseURL,v.url,v.allowAbsoluteUrls),g.params,g.paramsSerializer),$&&U.set("Authorization","Basic "+btoa(($.username||"")+":"+($.password?unescape(encodeURIComponent($.password)):"")));let Y;if(k.isFormData(x)){if(je.hasStandardBrowserEnv||je.hasStandardBrowserWebWorkerEnv)U.setContentType(void 0);else if((Y=U.getContentType())!==!1){const[G,...Q]=Y?Y.split(";").map(re=>re.trim()).filter(Boolean):[];U.setContentType([G||"multipart/form-data",...Q].join("; "))}}if(je.hasStandardBrowserEnv&&(C&&k.isFunction(C)&&(C=C(v)),C||C!==!1&&Qw(v.url))){const G=T&&O&&Ww.read(O);G&&U.set(T,G)}return v},Kw=typeof XMLHttpRequest<"u"&&function(g){return new Promise(function(x,C){const T=Od(g);let O=T.data;const U=nt.from(T.headers).normalize();let{responseType:$,onUploadProgress:Y,onDownloadProgress:G}=T,Q,re,ye,Oe,ee;function ce(){Oe&&Oe(),ee&&ee(),T.cancelToken&&T.cancelToken.unsubscribe(Q),T.signal&&T.signal.removeEventListener("abort",Q)}let ne=new XMLHttpRequest;ne.open(T.method.toUpperCase(),T.url,!0),ne.timeout=T.timeout;function He(){if(!ne)return;const Le=nt.from("getAllResponseHeaders"in ne&&ne.getAllResponseHeaders()),Ge={data:!$||$==="text"||$==="json"?ne.responseText:ne.response,status:ne.status,statusText:ne.statusText,headers:Le,config:g,request:ne};Td(function(qt){x(qt),ce()},function(qt){C(qt),ce()},Ge),ne=null}"onloadend"in ne?ne.onloadend=He:ne.onreadystatechange=function(){!ne||ne.readyState!==4||ne.status===0&&!(ne.responseURL&&ne.responseURL.indexOf("file:")===0)||setTimeout(He)},ne.onabort=function(){ne&&(C(new oe("Request aborted",oe.ECONNABORTED,g,ne)),ne=null)},ne.onerror=function(){C(new oe("Network Error",oe.ERR_NETWORK,g,ne)),ne=null},ne.ontimeout=function(){let pt=T.timeout?"timeout of "+T.timeout+"ms exceeded":"timeout exceeded";const Ge=T.transitional||ho;T.timeoutErrorMessage&&(pt=T.timeoutErrorMessage),C(new oe(pt,Ge.clarifyTimeoutError?oe.ETIMEDOUT:oe.ECONNABORTED,g,ne)),ne=null},O===void 0&&U.setContentType(null),"setRequestHeader"in ne&&k.forEach(U.toJSON(),function(pt,Ge){ne.setRequestHeader(Ge,pt)}),k.isUndefined(T.withCredentials)||(ne.withCredentials=!!T.withCredentials),$&&$!=="json"&&(ne.responseType=T.responseType),G&&([ye,ee]=go(G,!0),ne.addEventListener("progress",ye)),Y&&ne.upload&&([re,Oe]=go(Y),ne.upload.addEventListener("progress",re),ne.upload.addEventListener("loadend",Oe)),(T.cancelToken||T.signal)&&(Q=Le=>{ne&&(C(!Le||Le.type?new dr(null,g,ne):Le),ne.abort(),ne=null)},T.cancelToken&&T.cancelToken.subscribe(Q),T.signal&&(T.signal.aborted?Q():T.signal.addEventListener("abort",Q)));const Ue=Fw(T.url);if(Ue&&je.protocols.indexOf(Ue)===-1){C(new oe("Unsupported protocol "+Ue+":",oe.ERR_BAD_REQUEST,g));return}ne.send(O||null)})},Xw=(g,v)=>{const{length:x}=g=g?g.filter(Boolean):[];if(v||x){let C=new AbortController,T;const O=function(G){if(!T){T=!0,$();const Q=G instanceof Error?G:this.reason;C.abort(Q instanceof oe?Q:new dr(Q instanceof Error?Q.message:Q))}};let U=v&&setTimeout(()=>{U=null,O(new oe(`timeout ${v} of ms exceeded`,oe.ETIMEDOUT))},v);const $=()=>{g&&(U&&clearTimeout(U),U=null,g.forEach(G=>{G.unsubscribe?G.unsubscribe(O):G.removeEventListener("abort",O)}),g=null)};g.forEach(G=>G.addEventListener("abort",O));const{signal:Y}=C;return Y.unsubscribe=()=>k.asap($),Y}};const Jw=function*(g,v){let x=g.byteLength;if(x<v){yield g;return}let C=0,T;for(;C<x;)T=C+v,yield g.slice(C,T),C=T},Yw=async function*(g,v){for await(const x of Zw(g))yield*Jw(x,v)},Zw=async function*(g){if(g[Symbol.asyncIterator]){yield*g;return}const v=g.getReader();try{for(;;){const{done:x,value:C}=await v.read();if(x)break;yield C}}finally{await v.cancel()}},Ud=(g,v,x,C)=>{const T=Yw(g,v);let O=0,U,$=Y=>{U||(U=!0,C&&C(Y))};return new ReadableStream({async pull(Y){try{const{done:G,value:Q}=await T.next();if(G){$(),Y.close();return}let re=Q.byteLength;if(x){let ye=O+=re;x(ye)}Y.enqueue(new Uint8Array(Q))}catch(G){throw $(G),G}},cancel(Y){return $(Y),T.return()}},{highWaterMark:2})},fo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",qd=fo&&typeof ReadableStream=="function",ex=fo&&(typeof TextEncoder=="function"?(g=>v=>g.encode(v))(new TextEncoder):async g=>new Uint8Array(await new Response(g).arrayBuffer())),kd=(g,...v)=>{try{return!!g(...v)}catch{return!1}},tx=qd&&kd(()=>{let g=!1;const v=new Request(je.origin,{body:new ReadableStream,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!v}),Md=64*1024,ou=qd&&kd(()=>k.isReadableStream(new Response("").body)),yo={stream:ou&&(g=>g.body)};fo&&(g=>{["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!yo[v]&&(yo[v]=k.isFunction(g[v])?x=>x[v]():(x,C)=>{throw new oe(`Response type '${v}' is not supported`,oe.ERR_NOT_SUPPORT,C)})})})(new Response);const rx=async g=>{if(g==null)return 0;if(k.isBlob(g))return g.size;if(k.isSpecCompliantForm(g))return(await new Request(je.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(k.isArrayBufferView(g)||k.isArrayBuffer(g))return g.byteLength;if(k.isURLSearchParams(g)&&(g=g+""),k.isString(g))return(await ex(g)).byteLength},nx=async(g,v)=>{const x=k.toFiniteNumber(g.getContentLength());return x??rx(v)};var ix=fo&&(async g=>{let{url:v,method:x,data:C,signal:T,cancelToken:O,timeout:U,onDownloadProgress:$,onUploadProgress:Y,responseType:G,headers:Q,withCredentials:re="same-origin",fetchOptions:ye}=Od(g);G=G?(G+"").toLowerCase():"text";let Oe=Xw([T,O&&O.toAbortSignal()],U),ee;const ce=Oe&&Oe.unsubscribe&&(()=>{Oe.unsubscribe()});let ne;try{if(Y&&tx&&x!=="get"&&x!=="head"&&(ne=await nx(Q,C))!==0){let Ge=new Request(v,{method:"POST",body:C,duplex:"half"}),wt;if(k.isFormData(C)&&(wt=Ge.headers.get("content-type"))&&Q.setContentType(wt),Ge.body){const[qt,So]=Id(ne,go(Pd(Y)));C=Ud(Ge.body,Md,qt,So)}}k.isString(re)||(re=re?"include":"omit");const He="credentials"in Request.prototype;ee=new Request(v,{...ye,signal:Oe,method:x.toUpperCase(),headers:Q.normalize().toJSON(),body:C,duplex:"half",credentials:He?re:void 0});let Ue=await fetch(ee,ye);const Le=ou&&(G==="stream"||G==="response");if(ou&&($||Le&&ce)){const Ge={};["status","statusText","headers"].forEach(Qd=>{Ge[Qd]=Ue[Qd]});const wt=k.toFiniteNumber(Ue.headers.get("content-length")),[qt,So]=$&&Id(wt,go(Pd($),!0))||[];Ue=new Response(Ud(Ue.body,Md,qt,()=>{So&&So(),ce&&ce()}),Ge)}G=G||"text";let pt=await yo[k.findKey(yo,G)||"text"](Ue,g);return!Le&&ce&&ce(),await new Promise((Ge,wt)=>{Td(Ge,wt,{data:pt,headers:nt.from(Ue.headers),status:Ue.status,statusText:Ue.statusText,config:g,request:ee})})}catch(He){throw ce&&ce(),He&&He.name==="TypeError"&&/Load failed|fetch/i.test(He.message)?Object.assign(new oe("Network Error",oe.ERR_NETWORK,g,ee),{cause:He.cause||He}):oe.from(He,He&&He.code,g,ee)}});const lu={http:Ml,xhr:Kw,fetch:ix};k.forEach(lu,(g,v)=>{if(g){try{Object.defineProperty(g,"name",{value:v})}catch{}Object.defineProperty(g,"adapterName",{value:v})}});const jd=g=>`- ${g}`,ax=g=>k.isFunction(g)||g===null||g===!1;var Ld={getAdapter:g=>{g=k.isArray(g)?g:[g];const{length:v}=g;let x,C;const T={};for(let O=0;O<v;O++){x=g[O];let U;if(C=x,!ax(x)&&(C=lu[(U=String(x)).toLowerCase()],C===void 0))throw new oe(`Unknown adapter '${U}'`);if(C)break;T[U||"#"+O]=C}if(!C){const O=Object.entries(T).map(([$,Y])=>`adapter ${$} `+(Y===!1?"is not supported by the environment":"is not available in the build"));let U=v?O.length>1?`since :
`+O.map(jd).join(`
`):" "+jd(O[0]):"as no adapter specified";throw new oe("There is no suitable adapter to dispatch the request "+U,"ERR_NOT_SUPPORT")}return C},adapters:lu};function uu(g){if(g.cancelToken&&g.cancelToken.throwIfRequested(),g.signal&&g.signal.aborted)throw new dr(null,g)}function Nd(g){return uu(g),g.headers=nt.from(g.headers),g.data=su.call(g,g.transformRequest),["post","put","patch"].indexOf(g.method)!==-1&&g.headers.setContentType("application/x-www-form-urlencoded",!1),Ld.getAdapter(g.adapter||Gi.adapter)(g).then(function(C){return uu(g),C.data=su.call(g,g.transformResponse,C),C.headers=nt.from(C.headers),C},function(C){return Rd(C)||(uu(g),C&&C.response&&(C.response.data=su.call(g,g.transformResponse,C.response),C.response.headers=nt.from(C.response.headers))),Promise.reject(C)})}const Fd="1.10.0",bo={};["object","boolean","number","function","string","symbol"].forEach((g,v)=>{bo[g]=function(C){return typeof C===g||"a"+(v<1?"n ":" ")+g}});const $d={};bo.transitional=function(v,x,C){function T(O,U){return"[Axios v"+Fd+"] Transitional option '"+O+"'"+U+(C?". "+C:"")}return(O,U,$)=>{if(v===!1)throw new oe(T(U," has been removed"+(x?" in "+x:"")),oe.ERR_DEPRECATED);return x&&!$d[U]&&($d[U]=!0,console.warn(T(U," has been deprecated since v"+x+" and will be removed in the near future"))),v?v(O,U,$):!0}},bo.spelling=function(v){return(x,C)=>(console.warn(`${C} is likely a misspelling of ${v}`),!0)};function sx(g,v,x){if(typeof g!="object")throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);const C=Object.keys(g);let T=C.length;for(;T-- >0;){const O=C[T],U=v[O];if(U){const $=g[O],Y=$===void 0||U($,O,g);if(Y!==!0)throw new oe("option "+O+" must be "+Y,oe.ERR_BAD_OPTION_VALUE);continue}if(x!==!0)throw new oe("Unknown option "+O,oe.ERR_BAD_OPTION)}}var vo={assertOptions:sx,validators:bo};const ot=vo.validators;class wo{constructor(v){this.defaults=v||{},this.interceptors={request:new co,response:new co}}async request(v,x){try{return await this._request(v,x)}catch(C){if(C instanceof Error){let T={};Error.captureStackTrace?Error.captureStackTrace(T):T=new Error;const O=T.stack?T.stack.replace(/^.+\n/,""):"";try{C.stack?O&&!String(C.stack).endsWith(O.replace(/^.+\n.+\n/,""))&&(C.stack+=`
`+O):C.stack=O}catch{}}throw C}}_request(v,x){typeof v=="string"?(x=x||{},x.url=v):x=v||{},x=Ut(this.defaults,x);const{transitional:C,paramsSerializer:T,headers:O}=x;C!==void 0&&vo.assertOptions(C,{silentJSONParsing:ot.transitional(ot.boolean),forcedJSONParsing:ot.transitional(ot.boolean),clarifyTimeoutError:ot.transitional(ot.boolean)},!1),T!=null&&(k.isFunction(T)?x.paramsSerializer={serialize:T}:vo.assertOptions(T,{encode:ot.function,serialize:ot.function},!0)),x.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?x.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:x.allowAbsoluteUrls=!0),vo.assertOptions(x,{baseUrl:ot.spelling("baseURL"),withXsrfToken:ot.spelling("withXSRFToken")},!0),x.method=(x.method||this.defaults.method||"get").toLowerCase();let U=O&&k.merge(O.common,O[x.method]);O&&k.forEach(["delete","get","head","post","put","patch","common"],ee=>{delete O[ee]}),x.headers=nt.concat(U,O);const $=[];let Y=!0;this.interceptors.request.forEach(function(ce){typeof ce.runWhen=="function"&&ce.runWhen(x)===!1||(Y=Y&&ce.synchronous,$.unshift(ce.fulfilled,ce.rejected))});const G=[];this.interceptors.response.forEach(function(ce){G.push(ce.fulfilled,ce.rejected)});let Q,re=0,ye;if(!Y){const ee=[Nd.bind(this),void 0];for(ee.unshift.apply(ee,$),ee.push.apply(ee,G),ye=ee.length,Q=Promise.resolve(x);re<ye;)Q=Q.then(ee[re++],ee[re++]);return Q}ye=$.length;let Oe=x;for(re=0;re<ye;){const ee=$[re++],ce=$[re++];try{Oe=ee(Oe)}catch(ne){ce.call(this,ne);break}}try{Q=Nd.call(this,Oe)}catch(ee){return Promise.reject(ee)}for(re=0,ye=G.length;re<ye;)Q=Q.then(G[re++],G[re++]);return Q}getUri(v){v=Ut(this.defaults,v);const x=Dd(v.baseURL,v.url,v.allowAbsoluteUrls);return uo(x,v.params,v.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(v){wo.prototype[v]=function(x,C){return this.request(Ut(C||{},{method:v,url:x,data:(C||{}).data}))}}),k.forEach(["post","put","patch"],function(v){function x(C){return function(O,U,$){return this.request(Ut($||{},{method:v,headers:C?{"Content-Type":"multipart/form-data"}:{},url:O,data:U}))}}wo.prototype[v]=x(),wo.prototype[v+"Form"]=x(!0)});var xo=wo;class cu{constructor(v){if(typeof v!="function")throw new TypeError("executor must be a function.");let x;this.promise=new Promise(function(O){x=O});const C=this;this.promise.then(T=>{if(!C._listeners)return;let O=C._listeners.length;for(;O-- >0;)C._listeners[O](T);C._listeners=null}),this.promise.then=T=>{let O;const U=new Promise($=>{C.subscribe($),O=$}).then(T);return U.cancel=function(){C.unsubscribe(O)},U},v(function(O,U,$){C.reason||(C.reason=new dr(O,U,$),x(C.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(v){if(this.reason){v(this.reason);return}this._listeners?this._listeners.push(v):this._listeners=[v]}unsubscribe(v){if(!this._listeners)return;const x=this._listeners.indexOf(v);x!==-1&&this._listeners.splice(x,1)}toAbortSignal(){const v=new AbortController,x=C=>{v.abort(C)};return this.subscribe(x),v.signal.unsubscribe=()=>this.unsubscribe(x),v.signal}static source(){let v;return{token:new cu(function(T){v=T}),cancel:v}}}var ox=cu;function lx(g){return function(x){return g.apply(null,x)}}function ux(g){return k.isObject(g)&&g.isAxiosError===!0}const du={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(du).forEach(([g,v])=>{du[v]=g});var cx=du;function Gd(g){const v=new xo(g),x=n(xo.prototype.request,v);return k.extend(x,xo.prototype,v,{allOwnKeys:!0}),k.extend(x,v,null,{allOwnKeys:!0}),x.create=function(T){return Gd(Ut(g,T))},x}const Pe=Gd(Gi);return Pe.Axios=xo,Pe.CanceledError=dr,Pe.CancelToken=ox,Pe.isCancel=Rd,Pe.VERSION=Fd,Pe.toFormData=lr,Pe.AxiosError=oe,Pe.Cancel=Pe.CanceledError,Pe.all=function(v){return Promise.all(v)},Pe.spread=lx,Pe.isAxiosError=ux,Pe.mergeConfig=Ut,Pe.AxiosHeaders=nt,Pe.formToJSON=g=>po(k.isHTMLForm(g)?new FormData(g):g),Pe.getAdapter=Ld.getAdapter,Pe.HttpStatusCode=cx,Pe.default=Pe,vu=Pe,vu}var wu={},hr={},ic=function(n,e){return ic=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},ic(n,e)};function ml(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ic(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Io=function(){return Io=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Io.apply(this,arguments)};function vf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function I(n,e,t,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var o=n.length-1;o>=0;o--)(s=n[o])&&(a=(i<3?s(a):i>3?s(e,t,a):s(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function wf(n,e){return function(t,r){e(t,r,n)}}function xf(n,e,t,r,i,a){function s(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var o=r.kind,u=o==="getter"?"get":o==="setter"?"set":"value",h=!e&&n?r.static?n:n.prototype:null,m=e||(h?Object.getOwnPropertyDescriptor(h,r.name):{}),w,y=!1,_=t.length-1;_>=0;_--){var p={};for(var l in r)p[l]=l==="access"?{}:r[l];for(var l in r.access)p.access[l]=r.access[l];p.addInitializer=function(b){if(y)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(b||null))};var d=(0,t[_])(o==="accessor"?{get:m.get,set:m.set}:m[u],p);if(o==="accessor"){if(d===void 0)continue;if(d===null||typeof d!="object")throw new TypeError("Object expected");(w=s(d.get))&&(m.get=w),(w=s(d.set))&&(m.set=w),(w=s(d.init))&&i.unshift(w)}else(w=s(d))&&(o==="field"?i.unshift(w):m[u]=w)}h&&Object.defineProperty(h,r.name,m),y=!0}function Sf(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function Cf(n){return typeof n=="symbol"?n:"".concat(n)}function Ef(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function Hf(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function $c(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(m){try{h(r.next(m))}catch(w){s(w)}}function u(m){try{h(r.throw(m))}catch(w){s(w)}}function h(m){m.done?a(m.value):i(m.value).then(o,u)}h((r=r.apply(n,e||[])).next())})}function _l(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(h){return function(m){return u([h,m])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(t=0)),t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(m){h=[6,m],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var gl=Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]};function Af(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&gl(e,n,t)}function Po(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bt(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a}function Rf(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Bt(arguments[e]));return n}function Tf(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Ai(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function Ri(n){return this instanceof Ri?(this.v=n,this):new Ri(n)}function If(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(p){return Promise.resolve(p).then(_,w)}}function o(_,p){r[_]&&(i[_]=function(l){return new Promise(function(d,b){a.push([_,l,d,b])>1||u(_,l)})},p&&(i[_]=p(i[_])))}function u(_,p){try{h(r[_](p))}catch(l){y(a[0][3],l)}}function h(_){_.value instanceof Ri?Promise.resolve(_.value.v).then(m,w):y(a[0][2],_)}function m(_){u("next",_)}function w(_){u("throw",_)}function y(_,p){_(p),a.shift(),a.length&&u(a[0][0],a[0][1])}}function Pf(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=n[i]?function(s){return(t=!t)?{value:Ri(n[i](s)),done:!1}:a?a(s):s}:a}}function Df(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Po=="function"?Po(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(s){return new Promise(function(o,u){s=n[a](s),i(o,u,s.done,s.value)})}}function i(a,s,o,u){Promise.resolve(u).then(function(h){a({value:h,done:o})},s)}}function Bf(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var gx=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},ac=function(n){return ac=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},ac(n)};function Of(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=ac(n),r=0;r<t.length;r++)t[r]!=="default"&&gl(e,n,t[r]);return gx(e,n),e}function Uf(n){return n&&n.__esModule?n:{default:n}}function qf(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function kf(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function Mf(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function jf(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var fx=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function Lf(n){function e(a){n.error=n.hasError?new fx(a,n.error,"An error was suppressed during disposal."):a,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var a=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(a).then(i,function(s){return e(s),i()})}else r|=1}catch(s){e(s)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function Nf(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,a,s){return r?e?".jsx":".js":i&&(!a||!s)?t:i+a+"."+s.toLowerCase()+"js"}):n}const yx={__extends:ml,__assign:Io,__rest:vf,__decorate:I,__param:wf,__esDecorate:xf,__runInitializers:Sf,__propKey:Cf,__setFunctionName:Ef,__metadata:Hf,__awaiter:$c,__generator:_l,__createBinding:gl,__exportStar:Af,__values:Po,__read:Bt,__spread:Rf,__spreadArrays:Tf,__spreadArray:Ai,__await:Ri,__asyncGenerator:If,__asyncDelegator:Pf,__asyncValues:Df,__makeTemplateObject:Bf,__importStar:Of,__importDefault:Uf,__classPrivateFieldGet:qf,__classPrivateFieldSet:kf,__classPrivateFieldIn:Mf,__addDisposableResource:jf,__disposeResources:Lf,__rewriteRelativeImportExtension:Nf},bx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:jf,get __assign(){return Io},__asyncDelegator:Pf,__asyncGenerator:If,__asyncValues:Df,__await:Ri,__awaiter:$c,__classPrivateFieldGet:qf,__classPrivateFieldIn:Mf,__classPrivateFieldSet:kf,__createBinding:gl,__decorate:I,__disposeResources:Lf,__esDecorate:xf,__exportStar:Af,__extends:ml,__generator:_l,__importDefault:Uf,__importStar:Of,__makeTemplateObject:Bf,__metadata:Hf,__param:wf,__propKey:Cf,__read:Bt,__rest:vf,__rewriteRelativeImportExtension:Nf,__runInitializers:Sf,__setFunctionName:Ef,__spread:Rf,__spreadArray:Ai,__spreadArrays:Tf,__values:Po,default:yx},Symbol.toStringTag,{value:"Module"})),M=hx(bx);var xu={},rh;function fl(){return rh||(rh=1,xu.isNode=!1),xu}var Su={},Vi={},zi={},mt={},nh;function Ui(){if(nh)return mt;nh=1;var n;Object.defineProperty(mt,"__esModule",{value:!0}),mt.LogLevelToConsoleFunction=mt.resolveLogLevel=mt.LogLevel=void 0;var e=fl(),t;(function(a){a[a.CRITICAL=0]="CRITICAL",a[a.ERROR=1]="ERROR",a[a.WARNING=2]="WARNING",a[a.INFO=3]="INFO",a[a.DEBUG=4]="DEBUG",a[a.TRACE=7]="TRACE"})(t||(t={})),mt.LogLevel=t;function r(a){if(typeof a=="number"){if(Object.prototype.hasOwnProperty.call(t,a))return a;var s=Object.keys(t).map(function(u){return parseInt(u,10)}).filter(function(u){return!isNaN(u)&&u<a});return s.length?Math.max.apply(Math,s):t.WARNING}var o=a.replace(/\d+$/,"").toUpperCase();if(!Object.prototype.hasOwnProperty.call(t,o))throw new Error("Unknown log level string: ".concat(a));return t[o]}mt.resolveLogLevel=r;var i=e.isNode?console.log.bind(console):console.debug.bind(console);return mt.LogLevelToConsoleFunction=(n={},n[t.CRITICAL]=console.error.bind(console),n[t.ERROR]=console.error.bind(console),n[t.WARNING]=console.warn.bind(console),n[t.INFO]=console.info.bind(console),n[t.DEBUG]=i.bind(console),n[t.TRACE]=console.trace.bind(console),n),mt}var Ki={},Cu={},Xi={},ih;function vx(){if(ih)return Xi;ih=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.Enumerable=void 0;function n(e){return e===void 0&&(e=!0),function(t,r){Object.defineProperty(t,r,{get:function(){},set:function(i){Object.defineProperty(this,r,{value:i,writable:!0,enumerable:e})},enumerable:e})}}return Xi.Enumerable=n,Xi}var Ji={},ah;function wx(){if(ah)return Ji;ah=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.flatten=void 0;var n=M;function e(t){var r;return(r=[]).concat.apply(r,n.__spreadArray([],n.__read(t),!1))}return Ji.flatten=e,Ji}var Yi={},sh;function xx(){if(sh)return Yi;sh=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.immutableSplice=void 0;var n=M;function e(t,r,i){for(var a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];return n.__spreadArray(n.__spreadArray(n.__spreadArray([],n.__read(t.slice(0,r)),!1),n.__read(a),!1),n.__read(t.slice(r+i)),!1)}return Yi.immutableSplice=e,Yi}var Zi={},oh;function Sx(){if(oh)return Zi;oh=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.partitionedFlatMap=void 0;var n=M;function e(t,r,i){var a,s,o,u={};try{for(var h=n.__values(t),m=h.next();!m.done;m=h.next()){var w=m.value,y=r(w),_=i(w);Array.isArray(_)||(_=[_]),Object.prototype.hasOwnProperty.call(u,y)?(o=u[y]).push.apply(o,n.__spreadArray([],n.__read(_),!1)):u[y]=_}}catch(p){a={error:p}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return u}return Zi.partitionedFlatMap=e,Zi}var kt={},lh;function Cx(){if(lh)return kt;lh=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.resolveConfigValueSync=kt.resolveConfigValue=void 0;var n=M;function e(r){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(i){switch(i.label){case 0:return typeof r!="function"?[3,2]:[4,r()];case 1:return[2,i.sent()];case 2:return[2,r]}})})}kt.resolveConfigValue=e;function t(r){return typeof r=="function"?r():r}return kt.resolveConfigValueSync=t,kt}var ea={},uh;function Ex(){if(uh)return ea;uh=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.deprecateClass=void 0;var n=M;function e(t,r){var i=!1;return function(a){n.__extends(s,a);function s(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return i||(console.warn(r),i=!0),a.apply(this,n.__spreadArray([],n.__read(o),!1))||this}return s}(t)}return ea.deprecateClass=e,ea}var Eu={},ch;function Hx(){return ch||(ch=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.match=n.eq=void 0;var e=function(i){return{otherwise:function(){return i},on:function(){return e(i)}}},t=function(i){return{on:function(a,s){return a(i)?e(s(i)):t(i)},otherwise:function(a){return a(i)}}};n.match=t;var r=function(i){return function(a){return i===a}};n.eq=r,t.eq=n.eq}(Eu)),Eu}var ta={},dh;function Ax(){if(dh)return ta;dh=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.fibWithLimit=void 0;var n=M;function e(t){var r,i,a;return n.__generator(this,function(s){switch(s.label){case 0:r=0,i=1,s.label=1;case 1:return r<t?[4,r]:[3,3];case 2:return s.sent(),a=n.__read([i,r+i],2),r=a[0],i=a[1],[3,1];case 3:return[4,t];case 4:return s.sent(),[3,3];case 5:return[2]}})}return ta.fibWithLimit=e,ta}var ra={},hh;function Gc(){if(hh)return ra;hh=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.arrayToObject=void 0;var n=M;function e(t,r){return Object.assign.apply(Object,n.__spreadArray([{}],n.__read(t.map(r)),!1))}return ra.arrayToObject=e,ra}var na={},ph;function Rx(){if(ph)return na;ph=1,Object.defineProperty(na,"__esModule",{value:!0}),na.entriesToObject=void 0;var n=M,e=Gc();function t(r){return(0,e.arrayToObject)(r,function(i){var a,s=n.__read(i,2),o=s[0],u=s[1];return a={},a[o]=u,a})}return na.entriesToObject=t,na}var ia={},mh;function Tx(){if(mh)return ia;mh=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.forEachObjectEntry=void 0;var n=M;function e(t,r){Object.entries(t).forEach(function(i){var a=n.__read(i,2),s=a[0],o=a[1];return r(o,s)})}return ia.forEachObjectEntry=e,ia}var aa={},_h;function Ix(){if(_h)return aa;_h=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.groupBy=void 0;var n=M;function e(t,r){var i,a,s;if(typeof r!="function"){var o=r;r=function(_){return _[o].toString()}}var u={};try{for(var h=n.__values(t),m=h.next();!m.done;m=h.next()){var w=m.value,y=r(w);((s=u[y])!==null&&s!==void 0?s:u[y]=[]).push(w)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return u}return aa.groupBy=e,aa}var sa={},gh;function Px(){if(gh)return sa;gh=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.indexBy=void 0;var n=Gc();function e(t,r){if(typeof r!="function"){var i=r;r=function(a){return a[i].toString()}}return(0,n.arrayToObject)(t,function(a){var s;return s={},s[r(a)]=a,s})}return sa.indexBy=e,sa}var oa={},fh;function Dx(){if(fh)return oa;fh=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.mapObject=void 0;var n=M;function e(t,r){var i=Object.entries(t).map(function(a){var s,o=n.__read(a,2),u=o[0],h=o[1];return s={},s[u]=r(h,u),s});return Object.assign.apply(Object,n.__spreadArray([{}],n.__read(i),!1))}return oa.mapObject=e,oa}var la={},ua={},yh;function Ff(){if(yh)return ua;yh=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.pick=void 0;var n=M;function e(t,r){return Object.assign.apply(Object,n.__spreadArray([{}],n.__read(Object.entries(t).filter(function(i){var a=n.__read(i,1),s=a[0];return r.includes(s)}).map(function(i){var a,s=n.__read(i,2),o=s[0],u=s[1];return a={},a[o]=u,a})),!1))}return ua.pick=e,ua}var bh;function Bx(){if(bh)return la;bh=1,Object.defineProperty(la,"__esModule",{value:!0}),la.omit=void 0;var n=Ff();function e(t,r){return(0,n.pick)(t,Object.keys(t).filter(function(i){return!r.includes(i)}))}return la.omit=e,la}var _t={},vh;function Ox(){if(vh)return _t;vh=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.mapOptional=_t.mapNullable=_t.isNullish=void 0;function n(r){return r==null}_t.isNullish=n;function e(r,i){return n(r)?null:i(r)}_t.mapNullable=e;function t(r,i){return n(r)?void 0:i(r)}return _t.mapOptional=t,_t}var ca={},wh;function Ux(){if(wh)return ca;wh=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.delay=void 0;var n=M;function e(t){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(r){switch(r.label){case 0:return[4,new Promise(function(i){return setTimeout(i,t)})];case 1:return r.sent(),[2]}})})}return ca.delay=e,ca}var da={},xh;function qx(){if(xh)return da;xh=1,Object.defineProperty(da,"__esModule",{value:!0}),da.promiseWithResolvers=void 0;function n(){var e,t,r=new Promise(function(i,a){e=i,t=a});return{promise:r,resolve:e,reject:t}}return da.promiseWithResolvers=n,da}var ha={},Sh;function kx(){if(Sh)return ha;Sh=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.padLeft=void 0;function n(e,t,r){if(typeof e=="number"&&(e=e.toString()),t=t-e.length,t<=0)return e;r===void 0&&(r=" ");var i="";do(t&1)===1&&(i+=r),t>>=1,t&&(r+=r);while(t);return i+e}return ha.padLeft=n,ha}var pa={},Ch;function Mx(){if(Ch)return pa;Ch=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.splitWithLimit=void 0;var n=M;function e(t,r,i){var a=t.split(r);return a.length<=i?a:n.__spreadArray(n.__spreadArray([],n.__read(a.slice(0,i-1)),!1),[a.slice(i-1).join(r)],!1)}return pa.splitWithLimit=e,pa}var Mt={},Eh;function jx(){if(Eh)return Mt;Eh=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.utf8Substring=Mt.utf8Length=void 0;var n=M;function e(r){return n.__spreadArray([],n.__read(r),!1).length}Mt.utf8Length=e;function t(r,i,a){return n.__spreadArray([],n.__read(r),!1).slice(i,a).join("")}return Mt.utf8Substring=t,Mt}var Hh;function W(){return Hh||(Hh=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.utf8Substring=n.utf8Length=n.splitWithLimit=n.padLeft=n.promiseWithResolvers=n.delay=n.mapOptional=n.mapNullable=n.isNullish=n.pick=n.omit=n.mapObject=n.indexBy=n.groupBy=n.forEachObjectEntry=n.entriesToObject=n.arrayToObject=n.fibWithLimit=n.eq=n.match=n.deprecateClass=n.resolveConfigValueSync=n.resolveConfigValue=n.partitionedFlatMap=n.immutableSplice=n.flatten=n.Enumerable=void 0;var e=vx();Object.defineProperty(n,"Enumerable",{enumerable:!0,get:function(){return e.Enumerable}});var t=wx();Object.defineProperty(n,"flatten",{enumerable:!0,get:function(){return t.flatten}});var r=xx();Object.defineProperty(n,"immutableSplice",{enumerable:!0,get:function(){return r.immutableSplice}});var i=Sx();Object.defineProperty(n,"partitionedFlatMap",{enumerable:!0,get:function(){return i.partitionedFlatMap}});var a=Cx();Object.defineProperty(n,"resolveConfigValue",{enumerable:!0,get:function(){return a.resolveConfigValue}}),Object.defineProperty(n,"resolveConfigValueSync",{enumerable:!0,get:function(){return a.resolveConfigValueSync}});var s=Ex();Object.defineProperty(n,"deprecateClass",{enumerable:!0,get:function(){return s.deprecateClass}});var o=Hx();Object.defineProperty(n,"match",{enumerable:!0,get:function(){return o.match}}),Object.defineProperty(n,"eq",{enumerable:!0,get:function(){return o.eq}});var u=Ax();Object.defineProperty(n,"fibWithLimit",{enumerable:!0,get:function(){return u.fibWithLimit}});var h=Gc();Object.defineProperty(n,"arrayToObject",{enumerable:!0,get:function(){return h.arrayToObject}});var m=Rx();Object.defineProperty(n,"entriesToObject",{enumerable:!0,get:function(){return m.entriesToObject}});var w=Tx();Object.defineProperty(n,"forEachObjectEntry",{enumerable:!0,get:function(){return w.forEachObjectEntry}});var y=Ix();Object.defineProperty(n,"groupBy",{enumerable:!0,get:function(){return y.groupBy}});var _=Px();Object.defineProperty(n,"indexBy",{enumerable:!0,get:function(){return _.indexBy}});var p=Dx();Object.defineProperty(n,"mapObject",{enumerable:!0,get:function(){return p.mapObject}});var l=Bx();Object.defineProperty(n,"omit",{enumerable:!0,get:function(){return l.omit}});var d=Ff();Object.defineProperty(n,"pick",{enumerable:!0,get:function(){return d.pick}});var b=Ox();Object.defineProperty(n,"isNullish",{enumerable:!0,get:function(){return b.isNullish}}),Object.defineProperty(n,"mapNullable",{enumerable:!0,get:function(){return b.mapNullable}}),Object.defineProperty(n,"mapOptional",{enumerable:!0,get:function(){return b.mapOptional}});var S=Ux();Object.defineProperty(n,"delay",{enumerable:!0,get:function(){return S.delay}});var R=qx();Object.defineProperty(n,"promiseWithResolvers",{enumerable:!0,get:function(){return R.promiseWithResolvers}});var P=kx();Object.defineProperty(n,"padLeft",{enumerable:!0,get:function(){return P.padLeft}});var f=Mx();Object.defineProperty(n,"splitWithLimit",{enumerable:!0,get:function(){return f.splitWithLimit}});var H=jx();Object.defineProperty(n,"utf8Length",{enumerable:!0,get:function(){return H.utf8Length}}),Object.defineProperty(n,"utf8Substring",{enumerable:!0,get:function(){return H.utf8Substring}})}(Cu)),Cu}var ma={},Ah;function $f(){if(Ah)return ma;Ah=1;var n={},e,t;Object.defineProperty(ma,"__esModule",{value:!0}),ma.getMinLogLevelFromEnv=void 0;var r=Ui(),i=typeof process>"u"?[]:(t=(e=n.LOGGING)===null||e===void 0?void 0:e.split(";").map(function(h){var m=h.split("=",2),w=m[0],y=m[1];return y?[w==="default"?void 0:w.split(":"),(0,r.resolveLogLevel)(y)]:null}).filter(function(h){return!!h}).sort(function(h,m){var w,y,_=h[0],p=m[0];return((w=p?.length)!==null&&w!==void 0?w:0)-((y=_?.length)!==null&&y!==void 0?y:0)}))!==null&&t!==void 0?t:[],a=i.findIndex(function(h){var m=h[0];return!m}),s=void 0;a!==-1&&(s=i[a][1],i.splice(a));function o(h,m){return m.length<=h.length&&m.every(function(w,y){return w===h[y]})}function u(h){for(var m=h.split(":"),w=0,y=i;w<y.length;w++){var _=y[w],p=_[0],l=_[1];if(o(m,p))return l}return s}return ma.getMinLogLevelFromEnv=u,ma}var Rh;function Gf(){if(Rh)return Ki;Rh=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.BaseLogger=void 0;var n=W(),e=fl(),t=$f(),r=Ui(),i=function(){function a(s){var o=s.name,u=s.minLevel,h=s.emoji,m=h===void 0?!1:h,w=s.colors,y=s.timestamps,_=y===void 0?e.isNode:y,p,l;this._name=o,this._minLevel=(l=(p=(0,n.mapOptional)(u,function(d){return(0,r.resolveLogLevel)(d)}))!==null&&p!==void 0?p:(0,t.getMinLogLevelFromEnv)(o))!==null&&l!==void 0?l:r.LogLevel.WARNING,this._emoji=m,this._colors=w,this._timestamps=_}return a.prototype.crit=function(s){this.log(r.LogLevel.CRITICAL,s)},a.prototype.error=function(s){this.log(r.LogLevel.ERROR,s)},a.prototype.warn=function(s){this.log(r.LogLevel.WARNING,s)},a.prototype.info=function(s){this.log(r.LogLevel.INFO,s)},a.prototype.debug=function(s){this.log(r.LogLevel.DEBUG,s)},a.prototype.trace=function(s){this.log(r.LogLevel.TRACE,s)},a}();return Ki.BaseLogger=i,Ki}var Th;function Lx(){if(Th)return zi;Th=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.BrowserLogger=void 0;var n=M,e=Ui(),t=Gf(),r=function(i){n.__extends(a,i);function a(){return i!==null&&i.apply(this,arguments)||this}return a.prototype.log=function(s,o){if(!(s>this._minLevel)){var u=e.LogLevelToConsoleFunction[s],h="[".concat(this._name,"] ").concat(o);this._timestamps&&(h="[".concat(new Date().toISOString(),"] ").concat(o)),u(h)}},a}(t.BaseLogger);return zi.BrowserLogger=r,zi}var _a={},Ih;function Nx(){if(Ih)return _a;Ih=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.CustomLoggerWrapper=void 0;var n=W(),e=$f(),t=Ui(),r=function(){function i(a){var s=a.name,o=a.minLevel,u=a.custom,h;this._minLevel=(h=(0,n.mapOptional)(o,function(m){return(0,t.resolveLogLevel)(m)}))!==null&&h!==void 0?h:(0,e.getMinLogLevelFromEnv)(s),this._override=typeof u=="function"?{log:u}:u}return i.prototype.log=function(a,s){this._shouldLog(a)&&this._override.log(a,s)},i.prototype.crit=function(a){this._override.crit?this._shouldLog(t.LogLevel.CRITICAL)&&this._override.crit(a):this.log(t.LogLevel.CRITICAL,a)},i.prototype.error=function(a){this._override.error?this._shouldLog(t.LogLevel.ERROR)&&this._override.error(a):this.log(t.LogLevel.ERROR,a)},i.prototype.warn=function(a){this._override.warn?this._shouldLog(t.LogLevel.WARNING)&&this._override.warn(a):this.log(t.LogLevel.WARNING,a)},i.prototype.info=function(a){this._override.info?this._shouldLog(t.LogLevel.INFO)&&this._override.info(a):this.log(t.LogLevel.INFO,a)},i.prototype.debug=function(a){this._override.debug?this._shouldLog(t.LogLevel.DEBUG)&&this._override.debug(a):this.log(t.LogLevel.DEBUG,a)},i.prototype.trace=function(a){this._override.trace?this._shouldLog(t.LogLevel.TRACE)&&this._override.trace(a):this.log(t.LogLevel.TRACE,a)},i.prototype._shouldLog=function(a){return this._minLevel===void 0||this._minLevel>=a},i}();return _a.CustomLoggerWrapper=r,_a}var Hu={},Ph;function Fx(){return Ph||(Ph=1,function(n){var e,t,r;Object.defineProperty(n,"__esModule",{value:!0}),n.NodeLogger=n.LogLevelToBackgroundColor=n.LogLevelToColor=n.LogLevelToEmoji=void 0;var i=M,a=Ui(),s=Gf();n.LogLevelToEmoji=(e={},e[a.LogLevel.CRITICAL]="",e[a.LogLevel.ERROR]="",e[a.LogLevel.WARNING]=" ",e[a.LogLevel.INFO]=" ",e[a.LogLevel.DEBUG]="",e[a.LogLevel.TRACE]="",e);var o={black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,blackBright:90,redBright:91,greenBright:92,yellowBright:93,blueBright:94,magentaBright:95,cyanBright:96,whiteBright:97},u={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBlackBright:100,bgRedBright:101,bgGreenBright:102,bgYellowBright:103,bgBlueBright:104,bgMagentaBright:105,bgCyanBright:106,bgWhiteBright:107};function h(_,p,l){return function(d){return"\x1B[".concat(_,"m").concat(l?l(d):d,"\x1B[").concat(p,"m")}}function m(_){return h(o[_],39)}function w(_,p){return h(u[_],49,p)}n.LogLevelToColor=(t={},t[a.LogLevel.CRITICAL]=m("red"),t[a.LogLevel.ERROR]=m("redBright"),t[a.LogLevel.WARNING]=m("yellow"),t[a.LogLevel.INFO]=m("blue"),t[a.LogLevel.DEBUG]=m("magenta"),t[a.LogLevel.TRACE]=h(0,0),t),n.LogLevelToBackgroundColor=(r={},r[a.LogLevel.CRITICAL]=w("bgRed",m("white")),r[a.LogLevel.ERROR]=w("bgRedBright",m("white")),r[a.LogLevel.WARNING]=w("bgYellow",m("black")),r[a.LogLevel.INFO]=w("bgBlue",m("white")),r[a.LogLevel.DEBUG]=w("bgMagenta",m("black")),r[a.LogLevel.TRACE]=h(7,27),r);var y=function(_){i.__extends(p,_);function p(){return _!==null&&_.apply(this,arguments)||this}return p.prototype.log=function(l,d){var b,S,R;if(!(l>this._minLevel)){var P=a.LogLevelToConsoleFunction[l],f="";if(this._timestamps&&(f+="[".concat(new Date().toISOString(),"] ")),this._emoji){var H=n.LogLevelToEmoji[l];f+="".concat(H," ")}var E=(R=(b=this._colors)!==null&&b!==void 0?b:(S=process.stdout)===null||S===void 0?void 0:S.isTTY)!==null&&R!==void 0?R:!0;E?f+="".concat(n.LogLevelToBackgroundColor[l](this._name)," ").concat(n.LogLevelToBackgroundColor[l](a.LogLevel[l])," ").concat(n.LogLevelToColor[l](d)):f+="[".concat(this._name,":").concat(a.LogLevel[l].toLowerCase(),"] ").concat(d),P(f)}},p}(s.BaseLogger);n.NodeLogger=y}(Hu)),Hu}var Dh;function $x(){if(Dh)return Vi;Dh=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.createLogger=void 0;var n=fl(),e=Lx(),t=Nx(),r=Fx();function i(a){return a.custom?new t.CustomLoggerWrapper(a):n.isNode?new r.NodeLogger(a):new e.BrowserLogger(a)}return Vi.createLogger=i,Vi}var Bh;function yl(){return Bh||(Bh=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.LogLevel=n.createLogger=void 0;var e=$x();Object.defineProperty(n,"createLogger",{enumerable:!0,get:function(){return e.createLogger}});var t=Ui();Object.defineProperty(n,"LogLevel",{enumerable:!0,get:function(){return t.LogLevel}})}(Su)),Su}var Au={},ga={},fa={},Oh;function Qc(){if(Oh)return fa;Oh=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.CustomError=void 0;class n extends Error{constructor(...t){var r;super(...t),Object.setPrototypeOf(this,new.target.prototype),(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}}return fa.CustomError=n,fa}var Uh;function Wc(){if(Uh)return ga;Uh=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.RateLimiterDestroyedError=void 0;const n=Qc();class e extends n.CustomError{}return ga.RateLimiterDestroyedError=e,ga}var ya={},qh;function bl(){if(qh)return ya;qh=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.RateLimitReachedError=void 0;const n=Qc();class e extends n.CustomError{}return ya.RateLimitReachedError=e,ya}var ba={},kh;function Qf(){if(kh)return ba;kh=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.RetryAfterError=void 0;const n=Qc();class e extends n.CustomError{constructor(r){super(`Need to retry after ${r} ms`),this._retryAt=Date.now()+r}get retryAt(){return this._retryAt}}return ba.RetryAfterError=e,ba}var va={},Mh;function Gx(){if(Mh)return va;Mh=1,Object.defineProperty(va,"__esModule",{value:!0}),va.NullRateLimiter=void 0;let n=class{constructor(t){this._callback=t}async request(t){return await this._callback(t)}clear(){}pause(){}resume(){}};return va.NullRateLimiter=n,va}var wa={},xa={},jh;function Wf(){if(jh)return xa;jh=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.ResponseBasedRateLimiter=void 0;const n=yl(),e=W(),t=bl(),r=Qf();class i{constructor({logger:s}){this._queue=[],this._batchRunning=!1,this._paused=!1,this._logger=(0,n.createLogger)({name:"rate-limiter",emoji:!0,...s})}async request(s,o){return this._logger.trace("request start"),await new Promise((u,h)=>{var m;const w={req:s,resolve:u,reject:h,limitReachedBehavior:(m=o?.limitReachedBehavior)!==null&&m!==void 0?m:"enqueue"};this._batchRunning||this._nextBatchTimer||this._paused?(this._logger.trace(`request queued batchRunning:${this._batchRunning.toString()} hasNextBatchTimer:${(!!this._nextBatchTimer).toString()} paused:${this._paused.toString()}`),this._queue.push(w)):this._runRequestBatch([w])})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextBatch()}get stats(){var s,o,u,h,m;return{lastKnownLimit:(o=(s=this._parameters)===null||s===void 0?void 0:s.limit)!==null&&o!==void 0?o:null,lastKnownRemainingRequests:(h=(u=this._parameters)===null||u===void 0?void 0:u.remaining)!==null&&h!==void 0?h:null,lastKnownResetDate:(0,e.mapNullable)((m=this._parameters)===null||m===void 0?void 0:m.resetsAt,w=>new Date(w))}}async _runRequestBatch(s){this._logger.trace(`runRequestBatch start specs:${s.length}`),this._batchRunning=!0,this._parameters&&this._logger.debug(`Remaining requests: ${this._parameters.remaining}`),this._logger.debug(`Doing ${s.length} requests, new queue length is ${this._queue.length}`);const o=s.map(async w=>{const{req:y,resolve:_,reject:p}=w;try{const l=await this.doRequest(y),d=this.needsToRetryAfter(l);if(d!==null)throw this._queue.unshift(w),this._logger.info(`Retrying after ${d} ms`),new r.RetryAfterError(d);const b=this.getParametersFromResponse(l);return _(l),b}catch(l){if(l instanceof r.RetryAfterError)throw l;p(l);return}}),u=await Promise.allSettled(o),h=u.filter(w=>w.status==="rejected"),m=Date.now();if(h.length){this._logger.trace("runRequestBatch some rejected");const y=Math.max(m,...h.map(_=>_.reason.retryAt))-m;this._logger.warn(`Waiting for ${y} ms because the rate limit was exceeded`),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},y)}else{this._logger.trace("runRequestBatch none rejected");const w=u.filter(y=>y.status==="fulfilled"&&y.value!==void 0).map(y=>y.value).reduce((y,_)=>y?_.remaining<y.remaining?_:y:_,void 0);if(this._batchRunning=!1,w)if(this._parameters=w,w.resetsAt<m||w.remaining>0)this._logger.trace("runRequestBatch canRunMore"),this._runNextBatch();else{const y=w.resetsAt-m;this._logger.trace(`runRequestBatch delay:${y}`),this._logger.warn(`Waiting for ${y} ms because the rate limit was reached`),this._queue=this._queue.filter(_=>{switch(_.limitReachedBehavior){case"enqueue":return!0;case"null":return _.resolve(null),!1;case"throw":return _.reject(new t.RateLimitReachedError("Request removed from queue because the rate limit was reached")),!1;default:throw new Error("this should never happen")}}),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},y)}}this._logger.trace("runRequestBatch end")}_runNextBatch(){if(this._paused)return;this._logger.trace("runNextBatch start"),this._nextBatchTimer&&(clearTimeout(this._nextBatchTimer),this._nextBatchTimer=void 0);const s=this._parameters?Math.min(this._parameters.remaining,this._parameters.limit/10):1,o=this._queue.splice(0,s);o.length&&this._runRequestBatch(o),this._logger.trace("runNextBatch end")}}return xa.ResponseBasedRateLimiter=i,xa}var Lh;function Qx(){if(Lh)return wa;Lh=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.PartitionedRateLimiter=void 0;const n=Wf();class e{constructor(r){this._children=new Map,this._paused=!1,this._partitionKeyCallback=r.getPartitionKey,this._createChildCallback=r.createChild}async request(r,i){const a=this._partitionKeyCallback(r);return await this._getChild(a).request(r,i)}clear(){for(const r of this._children.values())r.clear()}pause(){this._paused=!0;for(const r of this._children.values())r.pause()}resume(){this._paused=!1;for(const r of this._children.values())r.resume()}getChildStats(r){if(!this._children.has(r))return null;const i=this._children.get(r);return i instanceof n.ResponseBasedRateLimiter?i.stats:null}_getChild(r){if(this._children.has(r))return this._children.get(r);const i=this._createChildCallback(r);return this._paused&&i.pause(),this._children.set(r,i),i}}return wa.PartitionedRateLimiter=e,wa}var Sa={},Nh;function Wx(){if(Nh)return Sa;Nh=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.PartitionedTimeBasedRateLimiter=void 0;const n=yl(),e=bl(),t=Wc();class r{constructor({logger:a,bucketSize:s,timeFrame:o,doRequest:u,getPartitionKey:h}){this._partitionedQueue=new Map,this._usedFromBucket=new Map,this._counterTimers=new Set,this._paused=!1,this._destroyed=!1,this._logger=(0,n.createLogger)({name:"rate-limiter",emoji:!0,...a}),this._bucketSize=s,this._timeFrame=o,this._callback=u,this._partitionKeyCallback=h}async request(a,s){return await new Promise((o,u)=>{var h,m;if(this._destroyed){u(new t.RateLimiterDestroyedError("Rate limiter was destroyed"));return}const w={req:a,resolve:o,reject:u,limitReachedBehavior:(h=s?.limitReachedBehavior)!==null&&h!==void 0?h:"enqueue"},y=this._partitionKeyCallback(a),_=(m=this._usedFromBucket.get(y))!==null&&m!==void 0?m:0;if(_>=this._bucketSize||this._paused)switch(w.limitReachedBehavior){case"enqueue":{const p=this._getPartitionedQueue(y);p.push(w),_+p.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} for ${y?`partition ${y}`:"default partition"} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${p.length}`):this._logger.info(`Enqueueing request for ${y?`partition ${y}`:"default partition"} because the rate limiter is paused; queue size is ${p.length}`);break}case"null":{w.resolve(null),this._paused?this._logger.info(`Returning null for request for ${y?`partition ${y}`:"default partition"} because the rate limiter is paused`):this._logger.warn(`Rate limit of ${this._bucketSize} for ${y?`partition ${y}`:"default partition"} was reached, dropping request and returning null`);break}case"throw":{w.reject(new e.RateLimitReachedError(`Request dropped because ${this._paused?"the rate limiter is paused":`the rate limit for ${y?`partition ${y}`:"default partition"} was reached`}`));break}default:throw new Error("this should never happen")}else this._runRequest(w,y)})}clear(){this._partitionedQueue.clear()}pause(){this._paused=!0}resume(){this._paused=!1;for(const a of this._partitionedQueue.keys())this._runNextRequest(a)}destroy(){this._paused=!1,this._destroyed=!0,this._counterTimers.forEach(a=>{clearTimeout(a)});for(const a of this._partitionedQueue.values())for(const s of a)s.reject(new t.RateLimiterDestroyedError("Rate limiter was destroyed"));this._partitionedQueue.clear()}_getPartitionedQueue(a){if(this._partitionedQueue.has(a))return this._partitionedQueue.get(a);const s=[];return this._partitionedQueue.set(a,s),s}async _runRequest(a,s){var o;const u=this._getPartitionedQueue(s);this._logger.debug(`doing a request for ${s?`partition ${s}`:"default partition"}, new queue length is ${u.length}`),this._usedFromBucket.set(s,((o=this._usedFromBucket.get(s))!==null&&o!==void 0?o:0)+1);const{req:h,resolve:m,reject:w}=a;try{m(await this._callback(h))}catch(y){w(y)}finally{const y=setTimeout(()=>{this._counterTimers.delete(y);const _=this._usedFromBucket.get(s)-1;this._usedFromBucket.set(s,_),u.length&&_<this._bucketSize&&this._runNextRequest(s)},this._timeFrame);this._counterTimers.add(y)}}_runNextRequest(a){if(this._paused)return;const o=this._getPartitionedQueue(a).shift();o&&this._runRequest(o,a)}}return Sa.PartitionedTimeBasedRateLimiter=r,Sa}var Ca={},Fh;function Vf(){if(Fh)return Ca;Fh=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.TimeBasedRateLimiter=void 0;const n=yl(),e=bl(),t=Wc();let r=class{constructor({logger:a,bucketSize:s,timeFrame:o,doRequest:u}){this._queue=[],this._usedFromBucket=0,this._counterTimers=new Set,this._paused=!1,this._destroyed=!1,this._logger=(0,n.createLogger)({name:"rate-limiter",emoji:!0,...a}),this._bucketSize=s,this._timeFrame=o,this._callback=u}async request(a,s){return await new Promise((o,u)=>{var h;if(this._destroyed){u(new t.RateLimiterDestroyedError("Rate limiter was destroyed"));return}const m={req:a,resolve:o,reject:u,limitReachedBehavior:(h=s?.limitReachedBehavior)!==null&&h!==void 0?h:"enqueue"};if(this._usedFromBucket>=this._bucketSize||this._paused)switch(m.limitReachedBehavior){case"enqueue":{this._queue.push(m),this._usedFromBucket+this._queue.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${this._queue.length}`):this._logger.info(`Enqueueing request because the rate limiter is paused; queue size is ${this._queue.length}`);break}case"null":{m.resolve(null),this._logger.warn(`Rate limit of ${this._bucketSize} was reached, dropping request and returning null`),this._paused?this._logger.info("Returning null for request because the rate limiter is paused"):this._logger.warn(`Rate limit of ${this._bucketSize} was reached, dropping request and returning null`);break}case"throw":{m.reject(new e.RateLimitReachedError(`Request dropped because ${this._paused?"the rate limiter is paused":"the rate limit was reached"}`));break}default:throw new Error("this should never happen")}else this._runRequest(m)})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextRequest()}destroy(){this._paused=!1,this._destroyed=!0,this._counterTimers.forEach(a=>{clearTimeout(a)});for(const a of this._queue)a.reject(new t.RateLimiterDestroyedError("Rate limiter was destroyed"));this._queue=[]}async _runRequest(a){this._logger.debug(`doing a request, new queue length is ${this._queue.length}`),this._usedFromBucket+=1;const{req:s,resolve:o,reject:u}=a;try{o(await this._callback(s))}catch(h){u(h)}finally{const h=setTimeout(()=>{this._counterTimers.delete(h),this._usedFromBucket-=1,this._queue.length&&this._usedFromBucket<this._bucketSize&&this._runNextRequest()},this._timeFrame);this._counterTimers.add(h)}}_runNextRequest(){if(this._paused)return;const a=this._queue.shift();a&&this._runRequest(a)}};return Ca.TimeBasedRateLimiter=r,Ca}var Ea={},$h;function Vx(){if($h)return Ea;$h=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.TimedPassthruRateLimiter=void 0;const n=Vf();let e=class extends n.TimeBasedRateLimiter{constructor(r,i){super({...i,async doRequest(a,s){return await r.request(a,s)}})}};return Ea.TimedPassthruRateLimiter=e,Ea}var Gh;function Vc(){return Gh||(Gh=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.TimedPassthruRateLimiter=n.TimeBasedRateLimiter=n.ResponseBasedRateLimiter=n.PartitionedTimeBasedRateLimiter=n.PartitionedRateLimiter=n.NullRateLimiter=n.RetryAfterError=n.RateLimitReachedError=n.RateLimiterDestroyedError=void 0;var e=Wc();Object.defineProperty(n,"RateLimiterDestroyedError",{enumerable:!0,get:function(){return e.RateLimiterDestroyedError}});var t=bl();Object.defineProperty(n,"RateLimitReachedError",{enumerable:!0,get:function(){return t.RateLimitReachedError}});var r=Qf();Object.defineProperty(n,"RetryAfterError",{enumerable:!0,get:function(){return r.RetryAfterError}});var i=Gx();Object.defineProperty(n,"NullRateLimiter",{enumerable:!0,get:function(){return i.NullRateLimiter}});var a=Qx();Object.defineProperty(n,"PartitionedRateLimiter",{enumerable:!0,get:function(){return a.PartitionedRateLimiter}});var s=Wx();Object.defineProperty(n,"PartitionedTimeBasedRateLimiter",{enumerable:!0,get:function(){return s.PartitionedTimeBasedRateLimiter}});var o=Wf();Object.defineProperty(n,"ResponseBasedRateLimiter",{enumerable:!0,get:function(){return o.ResponseBasedRateLimiter}});var u=Vf();Object.defineProperty(n,"TimeBasedRateLimiter",{enumerable:!0,get:function(){return u.TimeBasedRateLimiter}});var h=Vx();Object.defineProperty(n,"TimedPassthruRateLimiter",{enumerable:!0,get:function(){return h.TimedPassthruRateLimiter}})}(Au)),Au}var Ru={},jt={},fs={exports:{}},zx=fs.exports,Qh;function zf(){return Qh||(Qh=1,function(n,e){var t=typeof self<"u"?self:zx,r=function(){function a(){this.fetch=!1,this.DOMException=t.DOMException}return a.prototype=t,new a}();(function(a){(function(s){var o={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(D){return D&&DataView.prototype.isPrototypeOf(D)}if(o.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(D){return D&&h.indexOf(Object.prototype.toString.call(D))>-1};function w(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function y(D){return typeof D!="string"&&(D=String(D)),D}function _(D){var N={next:function(){var ae=D.shift();return{done:ae===void 0,value:ae}}};return o.iterable&&(N[Symbol.iterator]=function(){return N}),N}function p(D){this.map={},D instanceof p?D.forEach(function(N,ae){this.append(ae,N)},this):Array.isArray(D)?D.forEach(function(N){this.append(N[0],N[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(N){this.append(N,D[N])},this)}p.prototype.append=function(D,N){D=w(D),N=y(N);var ae=this.map[D];this.map[D]=ae?ae+", "+N:N},p.prototype.delete=function(D){delete this.map[w(D)]},p.prototype.get=function(D){return D=w(D),this.has(D)?this.map[D]:null},p.prototype.has=function(D){return this.map.hasOwnProperty(w(D))},p.prototype.set=function(D,N){this.map[w(D)]=y(N)},p.prototype.forEach=function(D,N){for(var ae in this.map)this.map.hasOwnProperty(ae)&&D.call(N,this.map[ae],ae,this)},p.prototype.keys=function(){var D=[];return this.forEach(function(N,ae){D.push(ae)}),_(D)},p.prototype.values=function(){var D=[];return this.forEach(function(N){D.push(N)}),_(D)},p.prototype.entries=function(){var D=[];return this.forEach(function(N,ae){D.push([ae,N])}),_(D)},o.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function l(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function d(D){return new Promise(function(N,ae){D.onload=function(){N(D.result)},D.onerror=function(){ae(D.error)}})}function b(D){var N=new FileReader,ae=d(N);return N.readAsArrayBuffer(D),ae}function S(D){var N=new FileReader,ae=d(N);return N.readAsText(D),ae}function R(D){for(var N=new Uint8Array(D),ae=new Array(N.length),he=0;he<N.length;he++)ae[he]=String.fromCharCode(N[he]);return ae.join("")}function P(D){if(D.slice)return D.slice(0);var N=new Uint8Array(D.byteLength);return N.set(new Uint8Array(D)),N.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(D){this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:o.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:o.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():o.arrayBuffer&&o.blob&&u(D)?(this._bodyArrayBuffer=P(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||m(D))?this._bodyArrayBuffer=P(D):this._bodyText=D=Object.prototype.toString.call(D):this._bodyText="",this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var D=l(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var D=l(this);if(D)return D;if(this._bodyBlob)return S(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(R(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var H=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(D){var N=D.toUpperCase();return H.indexOf(N)>-1?N:D}function B(D,N){N=N||{};var ae=N.body;if(D instanceof B){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,N.headers||(this.headers=new p(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!ae&&D._bodyInit!=null&&(ae=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new p(N.headers)),this.method=E(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ae)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ae)}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function j(D){var N=new FormData;return D.trim().split("&").forEach(function(ae){if(ae){var he=ae.split("="),we=he.shift().replace(/\+/g," "),X=he.join("=").replace(/\+/g," ");N.append(decodeURIComponent(we),decodeURIComponent(X))}}),N}function Z(D){var N=new p,ae=D.replace(/\r?\n[\t ]+/g," ");return ae.split(/\r?\n/).forEach(function(he){var we=he.split(":"),X=we.shift().trim();if(X){var dt=we.join(":").trim();N.append(X,dt)}}),N}f.call(B.prototype);function z(D,N){N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in N?N.statusText:"OK",this.headers=new p(N.headers),this.url=N.url||"",this._initBody(D)}f.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},z.error=function(){var D=new z(null,{status:0,statusText:""});return D.type="error",D};var Te=[301,302,303,307,308];z.redirect=function(D,N){if(Te.indexOf(N)===-1)throw new RangeError("Invalid status code");return new z(null,{status:N,headers:{location:D}})},s.DOMException=a.DOMException;try{new s.DOMException}catch{s.DOMException=function(N,ae){this.message=N,this.name=ae;var he=Error(N);this.stack=he.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function se(D,N){return new Promise(function(ae,he){var we=new B(D,N);if(we.signal&&we.signal.aborted)return he(new s.DOMException("Aborted","AbortError"));var X=new XMLHttpRequest;function dt(){X.abort()}X.onload=function(){var J={status:X.status,statusText:X.statusText,headers:Z(X.getAllResponseHeaders()||"")};J.url="responseURL"in X?X.responseURL:J.headers.get("X-Request-URL");var Se="response"in X?X.response:X.responseText;ae(new z(Se,J))},X.onerror=function(){he(new TypeError("Network request failed"))},X.ontimeout=function(){he(new TypeError("Network request failed"))},X.onabort=function(){he(new s.DOMException("Aborted","AbortError"))},X.open(we.method,we.url,!0),we.credentials==="include"?X.withCredentials=!0:we.credentials==="omit"&&(X.withCredentials=!1),"responseType"in X&&o.blob&&(X.responseType="blob"),we.headers.forEach(function(J,Se){X.setRequestHeader(Se,J)}),we.signal&&(we.signal.addEventListener("abort",dt),X.onreadystatechange=function(){X.readyState===4&&we.signal.removeEventListener("abort",dt)}),X.send(typeof we._bodyInit>"u"?null:we._bodyInit)})}return se.polyfill=!0,a.fetch||(a.fetch=se,a.Headers=p,a.Request=B,a.Response=z),s.Headers=p,s.Request=B,s.Response=z,s.fetch=se,Object.defineProperty(s,"__esModule",{value:!0}),s})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e}(fs,fs.exports)),fs.exports}var Tu,Wh;function zc(){if(Wh)return Tu;Wh=1;var n=Object.prototype.hasOwnProperty,e=Array.isArray,t=function(){for(var _=[],p=0;p<256;++p)_.push("%"+((p<16?"0":"")+p.toString(16)).toUpperCase());return _}(),r=function(p){for(;p.length>1;){var l=p.pop(),d=l.obj[l.prop];if(e(d)){for(var b=[],S=0;S<d.length;++S)typeof d[S]<"u"&&b.push(d[S]);l.obj[l.prop]=b}}},i=function(p,l){for(var d=l&&l.plainObjects?Object.create(null):{},b=0;b<p.length;++b)typeof p[b]<"u"&&(d[b]=p[b]);return d},a=function _(p,l,d){if(!l)return p;if(typeof l!="object"){if(e(p))p.push(l);else if(p&&typeof p=="object")(d&&(d.plainObjects||d.allowPrototypes)||!n.call(Object.prototype,l))&&(p[l]=!0);else return[p,l];return p}if(!p||typeof p!="object")return[p].concat(l);var b=p;return e(p)&&!e(l)&&(b=i(p,d)),e(p)&&e(l)?(l.forEach(function(S,R){if(n.call(p,R)){var P=p[R];P&&typeof P=="object"&&S&&typeof S=="object"?p[R]=_(P,S,d):p.push(S)}else p[R]=S}),p):Object.keys(l).reduce(function(S,R){var P=l[R];return n.call(S,R)?S[R]=_(S[R],P,d):S[R]=P,S},b)},s=function(p,l){return Object.keys(l).reduce(function(d,b){return d[b]=l[b],d},p)},o=function(_,p,l){var d=_.replace(/\+/g," ");if(l==="iso-8859-1")return d.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(d)}catch{return d}},u=function(p,l,d){if(p.length===0)return p;var b=p;if(typeof p=="symbol"?b=Symbol.prototype.toString.call(p):typeof p!="string"&&(b=String(p)),d==="iso-8859-1")return escape(b).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var S="",R=0;R<b.length;++R){var P=b.charCodeAt(R);if(P===45||P===46||P===95||P===126||P>=48&&P<=57||P>=65&&P<=90||P>=97&&P<=122){S+=b.charAt(R);continue}if(P<128){S=S+t[P];continue}if(P<2048){S=S+(t[192|P>>6]+t[128|P&63]);continue}if(P<55296||P>=57344){S=S+(t[224|P>>12]+t[128|P>>6&63]+t[128|P&63]);continue}R+=1,P=65536+((P&1023)<<10|b.charCodeAt(R)&1023),S+=t[240|P>>18]+t[128|P>>12&63]+t[128|P>>6&63]+t[128|P&63]}return S},h=function(p){for(var l=[{obj:{o:p},prop:"o"}],d=[],b=0;b<l.length;++b)for(var S=l[b],R=S.obj[S.prop],P=Object.keys(R),f=0;f<P.length;++f){var H=P[f],E=R[H];typeof E=="object"&&E!==null&&d.indexOf(E)===-1&&(l.push({obj:R,prop:H}),d.push(E))}return r(l),p},m=function(p){return Object.prototype.toString.call(p)==="[object RegExp]"},w=function(p){return!p||typeof p!="object"?!1:!!(p.constructor&&p.constructor.isBuffer&&p.constructor.isBuffer(p))},y=function(p,l){return[].concat(p,l)};return Tu={arrayToObject:i,assign:s,combine:y,compact:h,decode:o,encode:u,isBuffer:w,isRegExp:m,merge:a},Tu}var Iu,Vh;function Kc(){if(Vh)return Iu;Vh=1;var n=String.prototype.replace,e=/%20/g,t=zc(),r={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Iu=t.assign({default:r.RFC3986,formatters:{RFC1738:function(i){return n.call(i,e,"+")},RFC3986:function(i){return String(i)}}},r),Iu}var Pu,zh;function Kf(){if(zh)return Pu;zh=1;var n=zc(),e=Kc(),t=Object.prototype.hasOwnProperty,r={brackets:function(p){return p+"[]"},comma:"comma",indices:function(p,l){return p+"["+l+"]"},repeat:function(p){return p}},i=Array.isArray,a=Array.prototype.push,s=function(_,p){a.apply(_,i(p)?p:[p])},o=Date.prototype.toISOString,u=e.default,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:u,formatter:e.formatters[u],indices:!1,serializeDate:function(p){return o.call(p)},skipNulls:!1,strictNullHandling:!1},m=function(p){return typeof p=="string"||typeof p=="number"||typeof p=="boolean"||typeof p=="symbol"||typeof p=="bigint"},w=function _(p,l,d,b,S,R,P,f,H,E,B,j,Z){var z=p;if(typeof P=="function"?z=P(l,z):z instanceof Date?z=E(z):d==="comma"&&i(z)&&(z=z.join(",")),z===null){if(b)return R&&!j?R(l,h.encoder,Z,"key"):l;z=""}if(m(z)||n.isBuffer(z)){if(R){var Te=j?l:R(l,h.encoder,Z,"key");return[B(Te)+"="+B(R(z,h.encoder,Z,"value"))]}return[B(l)+"="+B(String(z))]}var se=[];if(typeof z>"u")return se;var D;if(i(P))D=P;else{var N=Object.keys(z);D=f?N.sort(f):N}for(var ae=0;ae<D.length;++ae){var he=D[ae];S&&z[he]===null||(i(z)?s(se,_(z[he],typeof d=="function"?d(l,he):l,d,b,S,R,P,f,H,E,B,j,Z)):s(se,_(z[he],l+(H?"."+he:"["+he+"]"),d,b,S,R,P,f,H,E,B,j,Z)))}return se},y=function(p){if(!p)return h;if(p.encoder!==null&&p.encoder!==void 0&&typeof p.encoder!="function")throw new TypeError("Encoder has to be a function.");var l=p.charset||h.charset;if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var d=e.default;if(typeof p.format<"u"){if(!t.call(e.formatters,p.format))throw new TypeError("Unknown format option provided.");d=p.format}var b=e.formatters[d],S=h.filter;return(typeof p.filter=="function"||i(p.filter))&&(S=p.filter),{addQueryPrefix:typeof p.addQueryPrefix=="boolean"?p.addQueryPrefix:h.addQueryPrefix,allowDots:typeof p.allowDots>"u"?h.allowDots:!!p.allowDots,charset:l,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:h.charsetSentinel,delimiter:typeof p.delimiter>"u"?h.delimiter:p.delimiter,encode:typeof p.encode=="boolean"?p.encode:h.encode,encoder:typeof p.encoder=="function"?p.encoder:h.encoder,encodeValuesOnly:typeof p.encodeValuesOnly=="boolean"?p.encodeValuesOnly:h.encodeValuesOnly,filter:S,formatter:b,serializeDate:typeof p.serializeDate=="function"?p.serializeDate:h.serializeDate,skipNulls:typeof p.skipNulls=="boolean"?p.skipNulls:h.skipNulls,sort:typeof p.sort=="function"?p.sort:null,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:h.strictNullHandling}};return Pu=function(_,p){var l=_,d=y(p),b,S;typeof d.filter=="function"?(S=d.filter,l=S("",l)):i(d.filter)&&(S=d.filter,b=S);var R=[];if(typeof l!="object"||l===null)return"";var P;p&&p.arrayFormat in r?P=p.arrayFormat:p&&"indices"in p?P=p.indices?"indices":"repeat":P="indices";var f=r[P];b||(b=Object.keys(l)),d.sort&&b.sort(d.sort);for(var H=0;H<b.length;++H){var E=b[H];d.skipNulls&&l[E]===null||s(R,w(l[E],E,f,d.strictNullHandling,d.skipNulls,d.encode?d.encoder:null,d.filter,d.sort,d.allowDots,d.serializeDate,d.formatter,d.encodeValuesOnly,d.charset))}var B=R.join(d.delimiter),j=d.addQueryPrefix===!0?"?":"";return d.charsetSentinel&&(d.charset==="iso-8859-1"?j+="utf8=%26%2310003%3B&":j+="utf8=%E2%9C%93&"),B.length>0?j+B:""},Pu}var Du,Kh;function Xf(){if(Kh)return Du;Kh=1;var n=zc(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},i=function(_){return _.replace(/&#(\d+);/g,function(p,l){return String.fromCharCode(parseInt(l,10))})},a=function(_,p){return _&&typeof _=="string"&&p.comma&&_.indexOf(",")>-1?_.split(","):_},s=function(p,l){if(t(p)){for(var d=[],b=0;b<p.length;b+=1)d.push(l(p[b]));return d}return l(p)},o="utf8=%26%2310003%3B",u="utf8=%E2%9C%93",h=function(p,l){var d={},b=l.ignoreQueryPrefix?p.replace(/^\?/,""):p,S=l.parameterLimit===1/0?void 0:l.parameterLimit,R=b.split(l.delimiter,S),P=-1,f,H=l.charset;if(l.charsetSentinel)for(f=0;f<R.length;++f)R[f].indexOf("utf8=")===0&&(R[f]===u?H="utf-8":R[f]===o&&(H="iso-8859-1"),P=f,f=R.length);for(f=0;f<R.length;++f)if(f!==P){var E=R[f],B=E.indexOf("]="),j=B===-1?E.indexOf("="):B+1,Z,z;j===-1?(Z=l.decoder(E,r.decoder,H,"key"),z=l.strictNullHandling?null:""):(Z=l.decoder(E.slice(0,j),r.decoder,H,"key"),z=s(a(E.slice(j+1),l),function(Te){return l.decoder(Te,r.decoder,H,"value")})),z&&l.interpretNumericEntities&&H==="iso-8859-1"&&(z=i(z)),E.indexOf("[]=")>-1&&(z=t(z)?[z]:z),e.call(d,Z)?d[Z]=n.combine(d[Z],z):d[Z]=z}return d},m=function(_,p,l,d){for(var b=d?p:a(p,l),S=_.length-1;S>=0;--S){var R,P=_[S];if(P==="[]"&&l.parseArrays)R=[].concat(b);else{R=l.plainObjects?Object.create(null):{};var f=P.charAt(0)==="["&&P.charAt(P.length-1)==="]"?P.slice(1,-1):P,H=parseInt(f,10);!l.parseArrays&&f===""?R={0:b}:!isNaN(H)&&P!==f&&String(H)===f&&H>=0&&l.parseArrays&&H<=l.arrayLimit?(R=[],R[H]=b):R[f]=b}b=R}return b},w=function(p,l,d,b){if(p){var S=d.allowDots?p.replace(/\.([^.[]+)/g,"[$1]"):p,R=/(\[[^[\]]*])/,P=/(\[[^[\]]*])/g,f=d.depth>0&&R.exec(S),H=f?S.slice(0,f.index):S,E=[];if(H){if(!d.plainObjects&&e.call(Object.prototype,H)&&!d.allowPrototypes)return;E.push(H)}for(var B=0;d.depth>0&&(f=P.exec(S))!==null&&B<d.depth;){if(B+=1,!d.plainObjects&&e.call(Object.prototype,f[1].slice(1,-1))&&!d.allowPrototypes)return;E.push(f[1])}return f&&E.push("["+S.slice(f.index)+"]"),m(E,l,d,b)}},y=function(p){if(!p)return r;if(p.decoder!==null&&p.decoder!==void 0&&typeof p.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var l=typeof p.charset>"u"?r.charset:p.charset;return{allowDots:typeof p.allowDots>"u"?r.allowDots:!!p.allowDots,allowPrototypes:typeof p.allowPrototypes=="boolean"?p.allowPrototypes:r.allowPrototypes,arrayLimit:typeof p.arrayLimit=="number"?p.arrayLimit:r.arrayLimit,charset:l,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:r.charsetSentinel,comma:typeof p.comma=="boolean"?p.comma:r.comma,decoder:typeof p.decoder=="function"?p.decoder:r.decoder,delimiter:typeof p.delimiter=="string"||n.isRegExp(p.delimiter)?p.delimiter:r.delimiter,depth:typeof p.depth=="number"||p.depth===!1?+p.depth:r.depth,ignoreQueryPrefix:p.ignoreQueryPrefix===!0,interpretNumericEntities:typeof p.interpretNumericEntities=="boolean"?p.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof p.parameterLimit=="number"?p.parameterLimit:r.parameterLimit,parseArrays:p.parseArrays!==!1,plainObjects:typeof p.plainObjects=="boolean"?p.plainObjects:r.plainObjects,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:r.strictNullHandling}};return Du=function(_,p){var l=y(p);if(_===""||_===null||typeof _>"u")return l.plainObjects?Object.create(null):{};for(var d=typeof _=="string"?h(_,l):_,b=l.plainObjects?Object.create(null):{},S=Object.keys(d),R=0;R<S.length;++R){var P=S[R],f=w(P,d[P],l,typeof _=="string");b=n.merge(b,f,l)}return n.compact(b)},Du}var Bu,Xh;function Jf(){if(Xh)return Bu;Xh=1;var n=Kf(),e=Xf(),t=Kc();return Bu={formats:t,parse:e,stringify:n},Bu}var Lt={},Ha={},Ou={},Uu={},qu={},Jh;function Kx(){if(Jh)return qu;Jh=1;function n(e){if(typeof e!="object")return e;var t,r,i=Object.prototype.toString.call(e);if(i==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){r=new e.constructor;for(t in e)e.hasOwnProperty(t)&&r[t]!==e[t]&&(r[t]=n(e[t]))}else{r={};for(t in e)t==="__proto__"?Object.defineProperty(r,t,{value:n(e[t]),configurable:!0,enumerable:!0,writable:!0}):r[t]=n(e[t])}return r}if(i==="[object Array]"){for(t=e.length,r=Array(t);t--;)r[t]=n(e[t]);return r}return i==="[object Set]"?(r=new Set,e.forEach(function(a){r.add(n(a))}),r):i==="[object Map]"?(r=new Map,e.forEach(function(a,s){r.set(n(s),n(a))}),r):i==="[object Date]"?new Date(+e):i==="[object RegExp]"?(r=new RegExp(e.source,e.flags),r.lastIndex=e.lastIndex,r):i==="[object DataView]"?new e.constructor(n(e.buffer)):i==="[object ArrayBuffer]"?e.slice(0):i.slice(-6)==="Array]"?new e.constructor(e):e}return qu.klona=n,qu}var Yh;function Yf(){return Yh||(Yh=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataObject=n.getRawData=n.rawDataSymbol=void 0;const e=Kx();n.rawDataSymbol=Symbol("twurpleRawData");function t(i){return(0,e.klona)(i[n.rawDataSymbol])}n.getRawData=t;class r{constructor(a){this[n.rawDataSymbol]=a}}n.DataObject=r}(Uu)),Uu}var Aa={},Ra={},Ta={},Zh;function Xc(){if(Zh)return Ta;Zh=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.CustomError=void 0;class n extends Error{constructor(t,r){var i;super(t,r),Object.setPrototypeOf(this,new.target.prototype),(i=Error.captureStackTrace)===null||i===void 0||i.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}}return Ta.CustomError=n,Ta}var ep;function Zf(){if(ep)return Ra;ep=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.RelationAssertionError=void 0;const n=Xc();class e extends n.CustomError{constructor(){super("Relation returned null - this may be a library bug or a race condition in your own code")}}return Ra.RelationAssertionError=e,Ra}var tp;function Xx(){if(tp)return Aa;tp=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.checkRelationAssertion=void 0;const n=Zf();function e(t){if(t==null)throw new n.RelationAssertionError;return t}return Aa.checkRelationAssertion=e,Aa}var Ia={},rp;function ey(){if(rp)return Ia;rp=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.rtfm=void 0;function n(e,t,r){return i=>{const a=r?function(){return`[${t}#${this[r]} - please check https://twurple.js.org/reference/${e}/classes/${t}.html for available properties]`}:function(){return`[${t} - please check https://twurple.js.org/reference/${e}/classes/${t}.html for available properties]`};Object.defineProperty(i.prototype,Symbol.for("nodejs.util.inspect.custom"),{value:a,enumerable:!1})}}return Ia.rtfm=n,Ia}var pr={},np;function Jx(){if(np)return pr;np=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.HelixExtension=void 0;const n=M,e=Yf(),t=ey();let r=class extends e.DataObject{get authorName(){return this[e.rawDataSymbol].author_name}get bitsEnabled(){return this[e.rawDataSymbol].bits_enabled}get installable(){return this[e.rawDataSymbol].can_install}get configurationLocation(){return this[e.rawDataSymbol].configuration_location}get description(){return this[e.rawDataSymbol].description}get tosUrl(){return this[e.rawDataSymbol].eula_tos_url}get hasChatSupport(){return this[e.rawDataSymbol].has_chat_support}get iconUrl(){return this[e.rawDataSymbol].icon_url}getIconUrl(a){return this[e.rawDataSymbol].icon_urls[a]}get id(){return this[e.rawDataSymbol].id}get name(){return this[e.rawDataSymbol].name}get privacyPolicyUrl(){return this[e.rawDataSymbol].privacy_policy_url}get requestsIdentityLink(){return this[e.rawDataSymbol].request_identity_link}get screenshotUrls(){return this[e.rawDataSymbol].screenshot_urls}get state(){return this[e.rawDataSymbol].state}get subscriptionsSupportLevel(){return this[e.rawDataSymbol].subscriptions_support_level}get summary(){return this[e.rawDataSymbol].summary}get supportEmail(){return this[e.rawDataSymbol].support_email}get version(){return this[e.rawDataSymbol].version}get viewerSummary(){return this[e.rawDataSymbol].viewer_summary}get viewerSummery(){return this[e.rawDataSymbol].viewer_summary}get allowedConfigUrls(){return this[e.rawDataSymbol].allowlisted_config_urls}get allowedPanelUrls(){return this[e.rawDataSymbol].allowlisted_panel_urls}get mobileViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.mobile)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get panelViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.panel)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get panelHeight(){var a,s;return(s=(a=this[e.rawDataSymbol].views.panel)===null||a===void 0?void 0:a.height)!==null&&s!==void 0?s:null}get panelCanLinkExternalContent(){var a,s;return(s=(a=this[e.rawDataSymbol].views.panel)===null||a===void 0?void 0:a.can_link_external_content)!==null&&s!==void 0?s:null}get overlayViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.video_overlay)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get overlayCanLinkExternalContent(){var a,s;return(s=(a=this[e.rawDataSymbol].views.video_overlay)===null||a===void 0?void 0:a.can_link_external_content)!==null&&s!==void 0?s:null}get componentViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get componentAspectWidth(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.aspect_width)!==null&&s!==void 0?s:null}get componentAspectHeight(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.aspect_height)!==null&&s!==void 0?s:null}get componentAspectRatioX(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.aspect_ratio_x)!==null&&s!==void 0?s:null}get componentAspectRatioY(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.aspect_ratio_y)!==null&&s!==void 0?s:null}get componentAutoScales(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.autoscale)!==null&&s!==void 0?s:null}get componentScalePixels(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.scale_pixels)!==null&&s!==void 0?s:null}get componentTargetHeight(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.target_height)!==null&&s!==void 0?s:null}get componentSize(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.size)!==null&&s!==void 0?s:null}get componentZoom(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.zoom)!==null&&s!==void 0?s:null}get componentZoomPixels(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.zoom_pixels)!==null&&s!==void 0?s:null}get componentCanLinkExternalContent(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.can_link_external_content)!==null&&s!==void 0?s:null}get configViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.config)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get configCanLinkExternalContent(){var a,s;return(s=(a=this[e.rawDataSymbol].views.config)===null||a===void 0?void 0:a.can_link_external_content)!==null&&s!==void 0?s:null}};return pr.HelixExtension=r,pr.HelixExtension=r=n.__decorate([(0,t.rtfm)("api","HelixExtension","id")],r),pr}var Pa={},ip;function Yx(){if(ip)return Pa;ip=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.HellFreezesOverError=void 0;const n=Xc();class e extends n.CustomError{constructor(r){super(`${r} - this should never happen, please file a bug in the GitHub issue tracker`)}}return Pa.HellFreezesOverError=e,Pa}var Nt={},ap;function Zx(){if(ap)return Nt;ap=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.extractUserName=Nt.extractUserId=void 0;function n(t){return typeof t=="string"?t:typeof t=="number"?t.toString(10):t.id}Nt.extractUserId=n;function e(t){return typeof t=="string"?t:t.name}return Nt.extractUserName=e,Nt}var sp;function q(){return sp||(sp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.extractUserName=n.extractUserId=n.RelationAssertionError=n.HellFreezesOverError=n.CustomError=n.HelixExtension=n.rtfm=n.checkRelationAssertion=n.rawDataSymbol=n.getRawData=n.DataObject=void 0;var e=Yf();Object.defineProperty(n,"DataObject",{enumerable:!0,get:function(){return e.DataObject}}),Object.defineProperty(n,"getRawData",{enumerable:!0,get:function(){return e.getRawData}}),Object.defineProperty(n,"rawDataSymbol",{enumerable:!0,get:function(){return e.rawDataSymbol}});var t=Xx();Object.defineProperty(n,"checkRelationAssertion",{enumerable:!0,get:function(){return t.checkRelationAssertion}});var r=ey();Object.defineProperty(n,"rtfm",{enumerable:!0,get:function(){return r.rtfm}});var i=Jx();Object.defineProperty(n,"HelixExtension",{enumerable:!0,get:function(){return i.HelixExtension}});var a=Xc();Object.defineProperty(n,"CustomError",{enumerable:!0,get:function(){return a.CustomError}});var s=Yx();Object.defineProperty(n,"HellFreezesOverError",{enumerable:!0,get:function(){return s.HellFreezesOverError}});var o=Zf();Object.defineProperty(n,"RelationAssertionError",{enumerable:!0,get:function(){return o.RelationAssertionError}});var u=Zx();Object.defineProperty(n,"extractUserId",{enumerable:!0,get:function(){return u.extractUserId}}),Object.defineProperty(n,"extractUserName",{enumerable:!0,get:function(){return u.extractUserName}})}(Ou)),Ou}var op;function ty(){if(op)return Ha;op=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.HttpStatusCodeError=void 0;const n=q();class e extends n.CustomError{constructor(r,i,a,s,o,u){super(`Encountered HTTP status code ${r}: ${i}

URL: ${a}
Method: ${s}
Body:
${!u&&o.length>150?`${o.slice(0,147)}...`:o}`),this._statusCode=r,this._url=a,this._method=s,this._body=o}get statusCode(){return this._statusCode}get url(){return this._url}get method(){return this._method}get body(){return this._body}}return Ha.HttpStatusCodeError=e,Ha}var lp;function ry(){if(lp)return Lt;lp=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.transformTwitchApiResponse=Lt.handleTwitchApiResponseError=void 0;const n=Jf(),e=ty();async function t(i,a){var s;if(!i.ok){const o=i.headers.get("Content-Type")==="application/json",u=o?JSON.stringify(await i.json(),null,2):await i.text(),h=(0,n.stringify)(a.query,{arrayFormat:"repeat",addQueryPrefix:!0}),m=`${a.url}${h}`;throw new e.HttpStatusCodeError(i.status,i.statusText,m,(s=a.method)!==null&&s!==void 0?s:"GET",u,o)}}Lt.handleTwitchApiResponseError=t;async function r(i){if(i.status===204)return;const a=await i.text();if(a)return JSON.parse(a)}return Lt.transformTwitchApiResponse=r,Lt}var Da={},up;function eS(){if(up)return Da;up=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.getTwitchApiUrl=void 0;function n(e,t,r){switch(t){case"helix":{const i=e.replace(/^\//,"");return r?i==="eventsub/subscriptions"?`http://localhost:${r}/${i}`:`http://localhost:${r}/mock/${i}`:`https://api.twitch.tv/helix/${i}`}case"auth":return`https://id.twitch.tv/oauth2/${e.replace(/^\//,"")}`;case"custom":return e;default:return e}}return Da.getTwitchApiUrl=n,Da}var cp;function tS(){if(cp)return jt;cp=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.callTwitchApi=jt.callTwitchApiRaw=void 0;const n=zf(),e=Jf(),t=ry(),r=eS();async function i(s,o,u,h,m={},w){var y,_;const p=(y=s.type)!==null&&y!==void 0?y:"helix",l=(0,r.getTwitchApiUrl)(s.url,p,w),d=(0,e.stringify)(s.query,{arrayFormat:"repeat",addQueryPrefix:!0}),b=new n.Headers({Accept:"application/json"});let S;s.jsonBody&&(S=JSON.stringify(s.jsonBody),b.append("Content-Type","application/json")),o&&p!=="auth"&&b.append("Client-ID",o),u&&b.append("Authorization",`${p==="helix"?h??"Bearer":"OAuth"} ${u}`);const R={...m,method:(_=s.method)!==null&&_!==void 0?_:"GET",headers:b,body:S};return await(0,n.default)(`${l}${d}`,R)}jt.callTwitchApiRaw=i;async function a(s,o,u,h,m={}){const w=await i(s,o,u,h,m);return await(0,t.handleTwitchApiResponseError)(w,s),await(0,t.transformTwitchApiResponse)(w)}return jt.callTwitchApi=a,jt}var Ba={},dp;function rS(){if(dp)return Ba;dp=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.createBroadcasterQuery=void 0;const n=q();function e(t){return{broadcaster_id:(0,n.extractUserId)(t)}}return Ba.createBroadcasterQuery=e,Ba}var hp;function Re(){return hp||(hp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.HttpStatusCodeError=n.transformTwitchApiResponse=n.handleTwitchApiResponseError=n.createBroadcasterQuery=n.callTwitchApiRaw=n.callTwitchApi=void 0;var e=tS();Object.defineProperty(n,"callTwitchApi",{enumerable:!0,get:function(){return e.callTwitchApi}}),Object.defineProperty(n,"callTwitchApiRaw",{enumerable:!0,get:function(){return e.callTwitchApiRaw}});var t=rS();Object.defineProperty(n,"createBroadcasterQuery",{enumerable:!0,get:function(){return t.createBroadcasterQuery}});var r=ry();Object.defineProperty(n,"handleTwitchApiResponseError",{enumerable:!0,get:function(){return r.handleTwitchApiResponseError}}),Object.defineProperty(n,"transformTwitchApiResponse",{enumerable:!0,get:function(){return r.transformTwitchApiResponse}});var i=ty();Object.defineProperty(n,"HttpStatusCodeError",{enumerable:!0,get:function(){return i.HttpStatusCodeError}})}(Ru)),Ru}var Oa={},pp;function ny(){if(pp)return Oa;pp=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.ConfigError=void 0;const n=q();class e extends n.CustomError{}return Oa.ConfigError=e,Oa}var Ua={},mp;function nS(){if(mp)return Ua;mp=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.HelixRateLimiter=void 0;const n=Vc(),e=Re();class t extends n.ResponseBasedRateLimiter{async doRequest({options:i,clientId:a,accessToken:s,authorizationType:o,fetchOptions:u,mockServerPort:h}){return await(0,e.callTwitchApiRaw)(i,a,s,o,u,h)}needsToRetryAfter(i){return i.status===429&&(!i.headers.has("ratelimit-remaining")||Number(i.headers.get("ratelimit-remaining"))===0)?+i.headers.get("ratelimit-reset")*1e3-Date.now():null}getParametersFromResponse(i){const{headers:a}=i;return{limit:+a.get("ratelimit-limit"),remaining:+a.get("ratelimit-remaining"),resetsAt:+a.get("ratelimit-reset")*1e3}}}return Ua.HelixRateLimiter=t,Ua}var mr={},ku={},qa={},ka={},_p;function vl(){if(_p)return ka;_p=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.createCacheKey=void 0;function n(t){switch(typeof t){case"undefined":return"";case"object":{if(t===null)return"";if("cacheKey"in t)return t.cacheKey;const r=JSON.stringify(t);if(r!=="{}")return r}default:return t.toString()}}function e(t,r,i){return[t,...r.map(n)].join("/")+(i?"/":"")}return ka.createCacheKey=e,ka}var gp;function iS(){if(gp)return qa;gp=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.Cacheable=void 0;const n=vl(),e=Symbol("cache");function t(r){var i,a;return a=class extends r{constructor(){super(...arguments),this[i]=new Map}getFromCache(s){if(this._cleanCache(),this[e].has(s)){const o=this[e].get(s);if(o)return o.value}}setCache(s,o,u){this[e].set(s,{value:o,expires:Date.now()+u*1e3})}removeFromCache(s,o){const u=this._getInternalCacheKey(s,o);o?this[e].forEach((h,m)=>{m.startsWith(u)&&this[e].delete(m)}):this[e].delete(u)}_cleanCache(){const s=Date.now();this[e].forEach((o,u)=>{o.expires<s&&this[e].delete(u)})}_getInternalCacheKey(s,o){if(typeof s=="string"){let u=s;return u.endsWith("/")||(u+="/"),u}else{const u=s.shift();return(0,n.createCacheKey)(u,s,o)}}},i=e,a}return qa.Cacheable=t,qa}var Ma={},fp;function aS(){if(fp)return Ma;fp=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.Cached=void 0;const n=vl();function e(t=1/0,r=!1){return function(i,a,s){const o=s.value;return s.value=async function(...u){const h=(0,n.createCacheKey)(a,u),m=this.getFromCache(h);if(m)return m;const w=await o.apply(this,u);return(w!=null||r)&&this.setCache(h,w,t),w},s}}return Ma.Cached=e,Ma}var ja={},yp;function sS(){if(yp)return ja;yp=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.CachedGetter=void 0;const n=vl();function e(t=1/0){return function(r,i,a){if(a.get){const s=a.get;a.get=function(){const o=(0,n.createCacheKey)(i,[]),u=this.getFromCache(o);if(u)return u;const h=s.call(this);return this.setCache(o,h,t),h}}return a}}return ja.CachedGetter=e,ja}var La={},bp;function oS(){if(bp)return La;bp=1,Object.defineProperty(La,"__esModule",{value:!0}),La.ClearsCache=void 0;function n(e,t){return function(r,i,a){const s=a.value;return a.value=async function(...o){const u=await s.apply(this,o),h=t===void 0?o.slice():o.slice(0,t);return this.removeFromCache([e,...h],!0),u},a}}return La.ClearsCache=n,La}var vp;function wl(){return vp||(vp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.createCacheKey=n.ClearsCache=n.CachedGetter=n.Cached=n.Cacheable=void 0;var e=iS();Object.defineProperty(n,"Cacheable",{enumerable:!0,get:function(){return e.Cacheable}});var t=aS();Object.defineProperty(n,"Cached",{enumerable:!0,get:function(){return t.Cached}});var r=sS();Object.defineProperty(n,"CachedGetter",{enumerable:!0,get:function(){return r.CachedGetter}});var i=oS();Object.defineProperty(n,"ClearsCache",{enumerable:!0,get:function(){return i.ClearsCache}});var a=vl();Object.defineProperty(n,"createCacheKey",{enumerable:!0,get:function(){return a.createCacheKey}})}(ku)),ku}var Mu={},Na={},Fa={},wp;function iy(){if(wp)return Fa;wp=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.Listener=void 0;class n{constructor(t,r,i,a=!1){this.owner=t,this.event=r,this.listener=i,this._internal=a}unbind(){this.owner.removeListener(this)}}return Fa.Listener=n,Fa}var xp;function lS(){if(xp)return Na;xp=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.EventEmitter=void 0;const n=iy();class e{constructor(){this._eventListeners=new Map,this._internalEventListeners=new Map}on(r,i){return this._addListener(!1,r,i)}addListener(r,i){return this._addListener(!1,r,i)}removeListener(r,i){this._removeListener(!1,r,i)}registerEvent(){const r=i=>this.addListener(r,i);return r}emit(r,...i){if(this._eventListeners.has(r))for(const a of this._eventListeners.get(r))a(...i);if(this._internalEventListeners.has(r))for(const a of this._internalEventListeners.get(r))a(...i)}registerInternalEvent(){const r=i=>this.addInternalListener(r,i);return r}addInternalListener(r,i){return this._addListener(!0,r,i)}removeInternalListener(r,i){this._removeListener(!0,r,i)}_addListener(r,i,a){const s=r?this._eventListeners:this._internalEventListeners;return s.has(i)?s.get(i).push(a):s.set(i,[a]),new n.Listener(this,i,a,r)}_removeListener(r,i,a){const s=r?this._eventListeners:this._internalEventListeners;if(!i)s.clear();else if(typeof i=="object"){const o=i;this._removeListener(o._internal,o.event,o.listener)}else{const o=i;if(s.has(o))if(a){const u=s.get(o);let h=0;for(;(h=u.indexOf(a))!==-1;)u.splice(h,1)}else s.delete(o)}}}return Na.EventEmitter=e,Na}var Sp;function ay(){return Sp||(Sp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Listener=n.EventEmitter=void 0;var e=lS();Object.defineProperty(n,"EventEmitter",{enumerable:!0,get:function(){return e.EventEmitter}});var t=iy();Object.defineProperty(n,"Listener",{enumerable:!0,get:function(){return t.Listener}})}(Mu)),Mu}var ju={},Ft={},Cp;function Jc(){if(Cp)return Ft;Cp=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.accessTokenIsExpired=Ft.getExpiryDateOfAccessToken=void 0;const n=W(),e=6e4;function t(a){return(0,n.mapNullable)(a.expiresIn,s=>a.obtainmentTimestamp+s*1e3-e)}function r(a){return(0,n.mapNullable)(t(a),s=>new Date(s))}Ft.getExpiryDateOfAccessToken=r;function i(a){var s;return(s=(0,n.mapNullable)(t(a),o=>Date.now()>o))!==null&&s!==void 0?s:!1}return Ft.accessTokenIsExpired=i,Ft}var Ee={},$a={},Ep;function Yc(){if(Ep)return $a;Ep=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.InvalidTokenError=void 0;const n=q();class e extends n.CustomError{constructor(r){super("Invalid token supplied",r)}}return $a.InvalidTokenError=e,$a}var Ga={},Hp;function Zc(){if(Hp)return Ga;Hp=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.InvalidTokenTypeError=void 0;const n=q();let e=class extends n.CustomError{};return Ga.InvalidTokenTypeError=e,Ga}var it={},Ap;function uS(){if(Ap)return it;Ap=1,Object.defineProperty(it,"__esModule",{value:!0}),it.createRevokeTokenQuery=it.createRefreshTokenQuery=it.createGetAppTokenQuery=it.createExchangeCodeQuery=void 0;function n(i,a,s,o){return{grant_type:"authorization_code",client_id:i,client_secret:a,code:s,redirect_uri:o}}it.createExchangeCodeQuery=n;function e(i,a){return{grant_type:"client_credentials",client_id:i,client_secret:a}}it.createGetAppTokenQuery=e;function t(i,a,s){return{grant_type:"refresh_token",client_id:i,client_secret:a,refresh_token:s}}it.createRefreshTokenQuery=t;function r(i,a){return{client_id:i,token:a}}return it.createRevokeTokenQuery=r,it}var _r={},Rp;function sy(){if(Rp)return _r;Rp=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.TokenInfo=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a){super(a),this._obtainmentDate=new Date}get clientId(){return this[t.rawDataSymbol].client_id}get userId(){var a;return(a=this[t.rawDataSymbol].user_id)!==null&&a!==void 0?a:null}get userName(){var a;return(a=this[t.rawDataSymbol].login)!==null&&a!==void 0?a:null}get scopes(){return this[t.rawDataSymbol].scopes}get expiryDate(){return(0,e.mapNullable)(this[t.rawDataSymbol].expires_in,a=>new Date(this._obtainmentDate.getTime()+a*1e3))}};return _r.TokenInfo=r,_r.TokenInfo=r=n.__decorate([(0,t.rtfm)("auth","TokenInfo","clientId")],r),_r}var Tp;function xl(){if(Tp)return Ee;Tp=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.loadAndCompareTokenInfo=Ee.compareScopeSets=Ee.compareScopes=Ee.getValidTokenFromProviderForIntent=Ee.getValidTokenFromProviderForUser=Ee.getTokenInfo=Ee.revokeToken=Ee.refreshUserToken=Ee.getAppToken=Ee.exchangeCode=void 0;const n=Re(),e=Yc(),t=Zc(),r=uS(),i=sy();function a(b){var S,R;return{accessToken:b.access_token,refreshToken:b.refresh_token||null,scope:(S=b.scope)!==null&&S!==void 0?S:[],expiresIn:(R=b.expires_in)!==null&&R!==void 0?R:null,obtainmentTimestamp:Date.now()}}async function s(b,S,R,P){return a(await(0,n.callTwitchApi)({type:"auth",url:"token",method:"POST",query:(0,r.createExchangeCodeQuery)(b,S,R,P)}))}Ee.exchangeCode=s;async function o(b,S){return a(await(0,n.callTwitchApi)({type:"auth",url:"token",method:"POST",query:(0,r.createGetAppTokenQuery)(b,S)}))}Ee.getAppToken=o;async function u(b,S,R){return a(await(0,n.callTwitchApi)({type:"auth",url:"token",method:"POST",query:(0,r.createRefreshTokenQuery)(b,S,R)}))}Ee.refreshUserToken=u;async function h(b,S){await(0,n.callTwitchApi)({type:"auth",url:"revoke",method:"POST",query:(0,r.createRevokeTokenQuery)(b,S)})}Ee.revokeToken=h;async function m(b,S){try{const R=await(0,n.callTwitchApi)({type:"auth",url:"validate"},S,b);return new i.TokenInfo(R)}catch(R){throw R instanceof n.HttpStatusCodeError&&R.statusCode===401?new e.InvalidTokenError({cause:R}):R}}Ee.getTokenInfo=m;async function w(b,S,R,P){let f=null,H=!1;try{const E=await b.getAccessTokenForUser(S,R);if(E){H=!0;const B=await m(E.accessToken);return{accessToken:E,tokenInfo:B}}}catch(E){E instanceof e.InvalidTokenError?f=E:P?.error(`Retrieving an access token failed: ${E.message}`)}if(H&&(P?.warn("No valid token available; trying to refresh"),b.refreshAccessTokenForUser))try{const E=await b.refreshAccessTokenForUser(S),B=await m(E.accessToken);return{accessToken:E,tokenInfo:B}}catch(E){E instanceof e.InvalidTokenError?f=E:P?.error(`Refreshing the access token failed: ${E.message}`)}throw f??new Error("Could not retrieve a valid token")}Ee.getValidTokenFromProviderForUser=w;async function y(b,S,R,P){let f=null,H=!1;if(!b.getAccessTokenForIntent)throw new t.InvalidTokenTypeError("This call requires an AuthProvider that supports intents.\nPlease use an auth provider that does, such as `RefreshingAuthProvider`.");try{const E=await b.getAccessTokenForIntent(S,R);if(E){H=!0;const B=await m(E.accessToken);return{accessToken:E,tokenInfo:B}}}catch(E){E instanceof e.InvalidTokenError?f=E:P?.error(`Retrieving an access token failed: ${E.message}`)}if(H&&(P?.warn("No valid token available; trying to refresh"),b.refreshAccessTokenForIntent))try{const E=await b.refreshAccessTokenForIntent(S),B=await m(E.accessToken);return{accessToken:E,tokenInfo:B}}catch(E){E instanceof e.InvalidTokenError?f=E:P?.error(`Refreshing the access token failed: ${E.message}`)}throw f??new Error("Could not retrieve a valid token")}Ee.getValidTokenFromProviderForIntent=y;const _=new Map([["channel_commercial",["channel:edit:commercial"]],["channel_editor",["channel:manage:broadcast"]],["channel_read",["channel:read:stream_key"]],["channel_subscriptions",["channel:read:subscriptions"]],["user_blocks_read",["user:read:blocked_users"]],["user_blocks_edit",["user:manage:blocked_users"]],["user_follows_edit",["user:edit:follows"]],["user_read",["user:read:email"]],["user_subscriptions",["user:read:subscriptions"]],["user:edit:broadcast",["channel:manage:broadcast","channel:manage:extensions"]]]);function p(b,S){if(S?.length){const R=new Set(b.flatMap(P=>{var f;return[P,...(f=_.get(P))!==null&&f!==void 0?f:[]]}));if(S.every(P=>!R.has(P))){const P=S.join(", ");throw new Error(`This token does not have any of the requested scopes (${P}) and can not be upgraded.
If you need dynamically upgrading scopes, please implement the AuthProvider interface accordingly:

	https://twurple.js.org/reference/auth/interfaces/AuthProvider.html`)}}}Ee.compareScopes=p;function l(b,S){for(const R of S)p(b,R)}Ee.compareScopeSets=l;async function d(b,S,R,P,f){if(f?.length||!R){const H=await m(S,b);if(!H.userId)throw new Error("Trying to use an app access token as a user access token");const E=P??H.scopes;return f&&l(E,f.filter(B=>!!B)),[E,H.userId]}return[P,R]}return Ee.loadAndCompareTokenInfo=d,Ee}var Qa={},Ip;function ed(){if(Ip)return Qa;Ip=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.TokenFetcher=void 0;const n=W();class e{constructor(r){this._newTokenScopeSets=[],this._newTokenPromise=null,this._queuedScopeSets=[],this._queueExecutor=null,this._queuePromise=null,this._executor=r}async fetch(...r){var i;const a=r.filter(h=>!!h);if(this._newTokenPromise){if(!a.length)return await this._newTokenPromise;if(this._queueExecutor?this._queuedScopeSets.push(...a):this._queuedScopeSets=[...a],!this._queuePromise){const{promise:h,resolve:m,reject:w}=(0,n.promiseWithResolvers)();this._queuePromise=h,this._queueExecutor=async()=>{var y;if(this._queuePromise){this._newTokenScopeSets=this._queuedScopeSets,this._queuedScopeSets=[],this._newTokenPromise=this._queuePromise,this._queuePromise=null,this._queueExecutor=null;try{m(await this._executor(this._newTokenScopeSets))}catch(_){w(_)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(y=this._queueExecutor)===null||y===void 0||y.call(this)}}}}return await this._queuePromise}this._newTokenScopeSets=[...a];const{promise:s,resolve:o,reject:u}=(0,n.promiseWithResolvers)();this._newTokenPromise=s;try{o(await this._executor(this._newTokenScopeSets))}catch(h){u(h)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(i=this._queueExecutor)===null||i===void 0||i.call(this)}return await s}}return Qa.TokenFetcher=e,Qa}var gr={},Pp;function cS(){if(Pp)return gr;Pp=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.AppTokenAuthProvider=void 0;const n=M,e=W(),t=q(),r=Jc(),i=xl(),a=ed();let s=class{constructor(u,h,m=[]){this._clientId=u,this._clientSecret=h,this._impliedScopes=m,this._fetcher=new a.TokenFetcher(async w=>await this._fetch(w))}get clientId(){return this._clientId}get currentScopes(){return this._impliedScopes}async getAccessTokenForUser(u,...h){if(h.every(m=>{var w;return(w=m?.some(y=>this._impliedScopes.includes(y)))!==null&&w!==void 0?w:!0}))return{...await this.getAppAccessToken(),userId:(0,t.extractUserId)(u)};throw new Error("Can not get user access token for AppTokenAuthProvider")}getCurrentScopesForUser(){return this._impliedScopes}async getAnyAccessToken(){return await this._fetcher.fetch()}async getAppAccessToken(u=!1){return u&&(this._token=void 0),await this._fetcher.fetch()}async _fetch(u){if(u.length>0)for(const h of u)if(this._impliedScopes.length){if(h.every(m=>!this._impliedScopes.includes(m)))throw new Error(`One of the scopes ${h.join(", ")} requested but only the scope ${this._impliedScopes.join(", ")} is implied`)}else throw new Error(`One of the scopes ${h.join(", ")} requested but the client credentials flow does not support scopes`);return!this._token||(0,r.accessTokenIsExpired)(this._token)?this._token=await(0,i.getAppToken)(this._clientId,this._clientSecret):this._token}};return gr.AppTokenAuthProvider=s,n.__decorate([(0,e.Enumerable)(!1)],s.prototype,"_clientSecret",void 0),n.__decorate([(0,e.Enumerable)(!1)],s.prototype,"_token",void 0),n.__decorate([(0,e.Enumerable)(!1)],s.prototype,"_fetcher",void 0),gr.AppTokenAuthProvider=s=n.__decorate([(0,t.rtfm)("auth","AppTokenAuthProvider","clientId")],s),gr}var fr={},Wa={},Dp;function oy(){if(Dp)return Wa;Dp=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.CachedRefreshFailureError=void 0;const n=q();let e=class extends n.CustomError{constructor(r){super(`The user context for the user ${r} has been disabled.
This happened because the access token became invalid (e.g. by expiry) and refreshing it failed (e.g. because the account's password was changed).

Use .addUser(), .addUserForToken() or .addUserForCode() for the same user context to re-enable the user with a new, valid token.`),this.userId=r}};return Wa.CachedRefreshFailureError=e,Wa}var Va={},Bp;function ly(){if(Bp)return Va;Bp=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.IntermediateUserRemovalError=void 0;const n=q();let e=class extends n.CustomError{constructor(r){super(`User ${r} was removed while trying to fetch a token.

Make sure you're not executing any actions when you want to remove a user.`),this.userId=r}};return Va.IntermediateUserRemovalError=e,Va}var za={},Op;function uy(){if(Op)return za;Op=1,Object.defineProperty(za,"__esModule",{value:!0}),za.UnknownIntentError=void 0;const n=q();let e=class extends n.CustomError{constructor(r){super(`Unknown intent: ${r}`),this.intent=r}};return za.UnknownIntentError=e,za}var Up;function dS(){if(Up)return fr;Up=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.RefreshingAuthProvider=void 0;const n=M,e=W(),t=ay(),r=q(),i=Jc(),a=oy(),s=ly(),o=Yc(),u=Zc(),h=uy(),m=xl(),w=ed();let y=class extends t.EventEmitter{constructor(p){var l;super(),this._userAccessTokens=new Map,this._userTokenFetchers=new Map,this._intentToUserId=new Map,this._userIdToIntents=new Map,this._cachedRefreshFailures=new Set,this.onRefresh=this.registerEvent(),this.onRefreshFailure=this.registerEvent(),this._clientId=p.clientId,this._clientSecret=p.clientSecret,this._redirectUri=p.redirectUri,this._appImpliedScopes=(l=p.appImpliedScopes)!==null&&l!==void 0?l:[],this._appTokenFetcher=new w.TokenFetcher(async d=>await this._fetchAppToken(d))}addUser(p,l,d){const b=(0,r.extractUserId)(p);if(!l.refreshToken)throw new Error(`Trying to add user ${b} without refresh token`);this._cachedRefreshFailures.delete(b),this._userAccessTokens.set(b,{...l,userId:b}),this._userTokenFetchers.has(b)||this._userTokenFetchers.set(b,new w.TokenFetcher(async S=>await this._fetchUserToken(b,S))),d&&this.addIntentsToUser(p,d)}async addUserForToken(p,l){let d=null;if(p.accessToken&&!(0,i.accessTokenIsExpired)(p))try{const P=await(0,m.getTokenInfo)(p.accessToken);d=[p,P]}catch(P){if(!(P instanceof o.InvalidTokenError))throw P}if(!d){if(!p.refreshToken)throw new o.InvalidTokenError;const P=await(0,m.refreshUserToken)(this._clientId,this._clientSecret,p.refreshToken),f=await(0,m.getTokenInfo)(P.accessToken);this.emit(this.onRefresh,f.userId,P),d=[P,f]}const[b,S]=d;if(!S.userId)throw new u.InvalidTokenTypeError("Could not determine a user ID for your token; you might be trying to disguise an app token as a user token.");const R=b.scope?b:{...b,scope:S.scopes};return this.addUser(S.userId,R,l),S.userId}async addUserForCode(p,l){if(!this._redirectUri)throw new Error("This method requires you to pass a `redirectUri` as a configuration property");const d=await(0,m.exchangeCode)(this._clientId,this._clientSecret,p,this._redirectUri);return await this.addUserForToken(d,l)}hasUser(p){return this._userTokenFetchers.has((0,r.extractUserId)(p))}removeUser(p){const l=(0,r.extractUserId)(p);if(this._userIdToIntents.has(l)){const d=this._userIdToIntents.get(l);for(const b of d)this._intentToUserId.delete(b);this._userIdToIntents.delete(l)}this._userAccessTokens.delete(l),this._userTokenFetchers.delete(l),this._cachedRefreshFailures.delete(l)}addIntentsToUser(p,l){const d=(0,r.extractUserId)(p);if(!this._userAccessTokens.has(d))throw new Error("Trying to add intents to a user that was not added to this provider");for(const b of l)this._intentToUserId.has(b)&&this._userIdToIntents.get(this._intentToUserId.get(b)).delete(b),this._intentToUserId.set(b,d),this._userIdToIntents.has(d)?this._userIdToIntents.get(d).add(b):this._userIdToIntents.set(d,new Set([b]))}getIntentsForUser(p){const l=(0,r.extractUserId)(p);return this._userIdToIntents.has(l)?Array.from(this._userIdToIntents.get(l)):[]}removeIntents(p){var l;for(const d of p)if(this._intentToUserId.has(d)){const b=this._intentToUserId.get(d);(l=this._userIdToIntents.get(b))===null||l===void 0||l.delete(d),this._intentToUserId.delete(d)}}async refreshAccessTokenForUser(p){const l=(0,r.extractUserId)(p);if(this._cachedRefreshFailures.has(l))throw new a.CachedRefreshFailureError(l);const d=this._userAccessTokens.get(l);if(!d)throw new Error("Trying to refresh token for user that was not added to the provider");const b=await this._refreshUserTokenWithCallback(l,d.refreshToken);return this._checkIntermediateUserRemoval(l),this._userAccessTokens.set(l,{...b,userId:l}),this.emit(this.onRefresh,l,b),{...b,userId:l}}async refreshAccessTokenForIntent(p){if(!this._intentToUserId.has(p))throw new h.UnknownIntentError(p);const l=this._intentToUserId.get(p);return await this.refreshAccessTokenForUser(l)}get clientId(){return this._clientId}getCurrentScopesForUser(p){var l;const d=this._userAccessTokens.get((0,r.extractUserId)(p));if(!d)throw new Error("Trying to get scopes for user that was not added to the provider");return(l=d.scope)!==null&&l!==void 0?l:[]}async getAccessTokenForUser(p,...l){const d=(0,r.extractUserId)(p),b=this._userTokenFetchers.get(d);if(!b)return null;if(this._cachedRefreshFailures.has(d))throw new a.CachedRefreshFailureError(d);return(0,m.compareScopeSets)(this.getCurrentScopesForUser(d),l.filter(Boolean)),await b.fetch(...l)}async getAccessTokenForIntent(p,...l){if(!this._intentToUserId.has(p))return null;const d=this._intentToUserId.get(p),b=await this.getAccessTokenForUser(d,...l);if(!b)throw new r.HellFreezesOverError(`Found intent ${p} corresponding to user ID ${d} but no token was found`);return{...b,userId:d}}async getAnyAccessToken(p){if(p){const l=(0,r.extractUserId)(p);if(this._userAccessTokens.has(l)){const d=await this.getAccessTokenForUser(l);if(!d)throw new r.HellFreezesOverError(`Token for user ID ${l} exists but nothing was returned by getAccessTokenForUser`);return{...d,userId:l}}}return await this.getAppAccessToken()}async getAppAccessToken(p=!1){return p&&(this._appAccessToken=void 0),await this._appTokenFetcher.fetch(...this._appImpliedScopes.map(l=>[l]))}_checkIntermediateUserRemoval(p){if(!this._userTokenFetchers.has(p))throw this._cachedRefreshFailures.delete(p),new s.IntermediateUserRemovalError(p)}async _fetchUserToken(p,l){const d=this._userAccessTokens.get(p);if(!d)throw new Error("Trying to get token for user that was not added to the provider");if(d.accessToken&&!(0,i.accessTokenIsExpired)(d))try{if(d.scope)return(0,m.compareScopeSets)(d.scope,l),d;const[S=[]]=await(0,m.loadAndCompareTokenInfo)(this._clientId,d.accessToken,p,d.scope,l),R={...d,scope:S};return this._checkIntermediateUserRemoval(p),this._userAccessTokens.set(p,R),R}catch(S){if(!(S instanceof o.InvalidTokenError))throw S}this._checkIntermediateUserRemoval(p);const b=await this.refreshAccessTokenForUser(p);return(0,m.compareScopeSets)(b.scope,l),b}async _refreshUserTokenWithCallback(p,l){try{return await(0,m.refreshUserToken)(this.clientId,this._clientSecret,l)}catch(d){throw this._cachedRefreshFailures.add(p),this.emit(this.onRefreshFailure,p,d),d}}async _fetchAppToken(p){if(p.length>0)for(const l of p)if(this._appImpliedScopes.length){if(l.every(d=>!this._appImpliedScopes.includes(d)))throw new Error(`One of the scopes ${l.join(", ")} requested but only the scope ${this._appImpliedScopes.join(", ")} is implied`)}else throw new Error(`One of the scopes ${l.join(", ")} requested but the client credentials flow does not support scopes`);return!this._appAccessToken||(0,i.accessTokenIsExpired)(this._appAccessToken)?await this._refreshAppToken():this._appAccessToken}async _refreshAppToken(){return this._appAccessToken=await(0,m.getAppToken)(this._clientId,this._clientSecret)}};return fr.RefreshingAuthProvider=y,n.__decorate([(0,e.Enumerable)(!1)],y.prototype,"_clientSecret",void 0),n.__decorate([(0,e.Enumerable)(!1)],y.prototype,"_userAccessTokens",void 0),n.__decorate([(0,e.Enumerable)(!1)],y.prototype,"_userTokenFetchers",void 0),n.__decorate([(0,e.Enumerable)(!1)],y.prototype,"_appAccessToken",void 0),n.__decorate([(0,e.Enumerable)(!1)],y.prototype,"_appTokenFetcher",void 0),fr.RefreshingAuthProvider=y=n.__decorate([(0,r.rtfm)("auth","RefreshingAuthProvider","clientId")],y),fr}var yr={},qp;function hS(){if(qp)return yr;qp=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.StaticAuthProvider=void 0;const n=M,e=W(),t=q(),r=xl();let i=class{constructor(s,o,u){this._clientId=s||"",this._accessToken=typeof o=="string"?{accessToken:o,refreshToken:null,scope:u??[],expiresIn:null,obtainmentTimestamp:Date.now()}:o,this._scopes=u}get clientId(){return this._clientId}async getAccessTokenForUser(s,...o){return await this._getAccessToken(o)}async getAccessTokenForIntent(s,...o){return await this._getAccessToken(o)}async getAnyAccessToken(){return await this._getAccessToken()}getCurrentScopesForUser(){var s;return(s=this._scopes)!==null&&s!==void 0?s:[]}async _getAccessToken(s){const[o,u]=await(0,r.loadAndCompareTokenInfo)(this._clientId,this._accessToken.accessToken,this._userId,this._scopes,s);return this._scopes=o,this._userId=u,{...this._accessToken,userId:u}}};return yr.StaticAuthProvider=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_clientId",void 0),n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_accessToken",void 0),yr.StaticAuthProvider=i=n.__decorate([(0,t.rtfm)("auth","StaticAuthProvider","clientId")],i),yr}var kp;function cy(){return kp||(kp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.UnknownIntentError=n.InvalidTokenTypeError=n.InvalidTokenError=n.IntermediateUserRemovalError=n.CachedRefreshFailureError=n.StaticAuthProvider=n.RefreshingAuthProvider=n.AppTokenAuthProvider=n.TokenInfo=n.TokenFetcher=n.revokeToken=n.refreshUserToken=n.getValidTokenFromProviderForIntent=n.getValidTokenFromProviderForUser=n.getTokenInfo=n.getAppToken=n.exchangeCode=n.getExpiryDateOfAccessToken=n.accessTokenIsExpired=void 0;var e=Jc();Object.defineProperty(n,"accessTokenIsExpired",{enumerable:!0,get:function(){return e.accessTokenIsExpired}}),Object.defineProperty(n,"getExpiryDateOfAccessToken",{enumerable:!0,get:function(){return e.getExpiryDateOfAccessToken}});var t=xl();Object.defineProperty(n,"exchangeCode",{enumerable:!0,get:function(){return t.exchangeCode}}),Object.defineProperty(n,"getAppToken",{enumerable:!0,get:function(){return t.getAppToken}}),Object.defineProperty(n,"getTokenInfo",{enumerable:!0,get:function(){return t.getTokenInfo}}),Object.defineProperty(n,"getValidTokenFromProviderForUser",{enumerable:!0,get:function(){return t.getValidTokenFromProviderForUser}}),Object.defineProperty(n,"getValidTokenFromProviderForIntent",{enumerable:!0,get:function(){return t.getValidTokenFromProviderForIntent}}),Object.defineProperty(n,"refreshUserToken",{enumerable:!0,get:function(){return t.refreshUserToken}}),Object.defineProperty(n,"revokeToken",{enumerable:!0,get:function(){return t.revokeToken}});var r=ed();Object.defineProperty(n,"TokenFetcher",{enumerable:!0,get:function(){return r.TokenFetcher}});var i=sy();Object.defineProperty(n,"TokenInfo",{enumerable:!0,get:function(){return i.TokenInfo}});var a=cS();Object.defineProperty(n,"AppTokenAuthProvider",{enumerable:!0,get:function(){return a.AppTokenAuthProvider}});var s=dS();Object.defineProperty(n,"RefreshingAuthProvider",{enumerable:!0,get:function(){return s.RefreshingAuthProvider}});var o=hS();Object.defineProperty(n,"StaticAuthProvider",{enumerable:!0,get:function(){return o.StaticAuthProvider}});var u=oy();Object.defineProperty(n,"CachedRefreshFailureError",{enumerable:!0,get:function(){return u.CachedRefreshFailureError}});var h=ly();Object.defineProperty(n,"IntermediateUserRemovalError",{enumerable:!0,get:function(){return h.IntermediateUserRemovalError}});var m=Yc();Object.defineProperty(n,"InvalidTokenError",{enumerable:!0,get:function(){return m.InvalidTokenError}});var w=Zc();Object.defineProperty(n,"InvalidTokenTypeError",{enumerable:!0,get:function(){return w.InvalidTokenTypeError}});var y=uy();Object.defineProperty(n,"UnknownIntentError",{enumerable:!0,get:function(){return y.UnknownIntentError}})}(ju)),ju}var Lu={},Nu,Mp;function pS(){if(Mp)return Nu;Mp=1;function n(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return Nu=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},r),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,r=0,i=0;i<this._errors.length;i++){var a=this._errors[i],s=a.message,o=(e[s]||0)+1;e[s]=o,o>=r&&(t=a,r=o)}return t},Nu}var jp;function mS(){return jp||(jp=1,function(n){var e=pS();n.operation=function(t){var r=n.timeouts(t);return new e(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in t)r[i]=t[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],s=0;s<r.retries;s++)a.push(this.createTimeout(s,r));return t&&t.forever&&!a.length&&a.push(this.createTimeout(s,r)),a.sort(function(o,u){return o-u}),a},n.createTimeout=function(t,r){var i=r.randomize?Math.random()+1:1,a=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,t));return a=Math.min(a,r.maxTimeout),a},n.wrap=function(t,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var a in t)typeof t[a]=="function"&&i.push(a)}for(var s=0;s<i.length;s++){var o=i[s],u=t[o];t[o]=(function(m){var w=n.operation(r),y=Array.prototype.slice.call(arguments,1),_=y.pop();y.push(function(p){w.retry(p)||(p&&(arguments[0]=w.mainError()),_.apply(this,arguments))}),w.attempt(function(){m.apply(t,y)})}).bind(t,u),t[o].options=r}}}(Lu)),Lu}var Fu,Lp;function dy(){return Lp||(Lp=1,Fu=mS()),Fu}var br={},Ka={},Np;function _S(){if(Np)return Ka;Np=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.createBitsLeaderboardQuery=void 0;function n(e={}){const{count:t=10,period:r="all",startDate:i,contextUserId:a}=e;return{count:t.toString(),period:r,started_at:i?.toISOString(),user_id:a}}return Ka.createBitsLeaderboardQuery=n,Ka}var Xa={},Fp;function ve(){if(Fp)return Xa;Fp=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.BaseApi=void 0;const n=M,e=W();class t{constructor(i){this._client=i}_getUserContextIdWithDefault(i){var a;return(a=this._client._getUserIdFromRequestContext(i))!==null&&a!==void 0?a:i}}return Xa.BaseApi=t,n.__decorate([(0,e.Enumerable)(!1)],t.prototype,"_client",void 0),Xa}var vr={},wr={},$p;function hy(){if($p)return wr;$p=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.HelixBitsLeaderboardEntry=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}get rank(){return this[t.rawDataSymbol].rank}get amount(){return this[t.rawDataSymbol].score}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return wr.HelixBitsLeaderboardEntry=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),wr.HelixBitsLeaderboardEntry=r=n.__decorate([(0,t.rtfm)("api","HelixBitsLeaderboardEntry","userId")],r),wr}var Gp;function py(){if(Gp)return vr;Gp=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.HelixBitsLeaderboard=void 0;const n=M,e=wl(),t=W(),r=q(),i=hy();let a=class extends r.DataObject{constructor(o,u){super(o),this._client=u}get entries(){return this[r.rawDataSymbol].data.map(o=>new i.HelixBitsLeaderboardEntry(o,this._client))}get totalCount(){return this[r.rawDataSymbol].total}};return vr.HelixBitsLeaderboard=a,n.__decorate([(0,t.Enumerable)(!1)],a.prototype,"_client",void 0),n.__decorate([(0,e.CachedGetter)()],a.prototype,"entries",null),vr.HelixBitsLeaderboard=a=n.__decorate([e.Cacheable,(0,r.rtfm)("api","HelixBitsLeaderboard")],a),vr}var xr={},Qp;function my(){if(Qp)return xr;Qp=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.HelixCheermoteList=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a){super((0,e.indexBy)(a,s=>s.prefix.toLowerCase()))}getCheermoteDisplayInfo(a,s,o){a=a.toLowerCase();const{background:u,state:h,scale:m}=o,{tiers:w}=this[t.rawDataSymbol][a],y=w.sort((_,p)=>p.min_bits-_.min_bits).find(_=>_.min_bits<=s);if(!y)throw new t.HellFreezesOverError(`Cheermote "${a}" does not have an applicable tier for ${s} bits`);return{url:y.images[u][h][m],color:y.color}}getPossibleNames(){return Object.keys(this[t.rawDataSymbol])}};return xr.HelixCheermoteList=r,xr.HelixCheermoteList=r=n.__decorate([(0,t.rtfm)("api","HelixCheermoteList")],r),xr}var Wp;function _y(){if(Wp)return br;Wp=1,Object.defineProperty(br,"__esModule",{value:!0}),br.HelixBitsApi=void 0;const n=M,e=W(),t=Re(),r=q(),i=_S(),a=ve(),s=py(),o=my();let u=class extends a.BaseApi{async getLeaderboard(m,w={}){const y=await this._client.callApi({type:"helix",url:"bits/leaderboard",userId:(0,r.extractUserId)(m),scopes:["bits:read"],query:(0,i.createBitsLeaderboardQuery)(w)});return new s.HelixBitsLeaderboard(y,this._client)}async getCheermotes(m){const w=await this._client.callApi({type:"helix",url:"bits/cheermotes",userId:(0,e.mapOptional)(m,r.extractUserId),query:(0,e.mapOptional)(m,t.createBroadcasterQuery)});return new o.HelixCheermoteList(w.data)}};return br.HelixBitsApi=u,br.HelixBitsApi=u=n.__decorate([(0,r.rtfm)("api","HelixBitsApi")],u),br}var Sr={},Qe={},Vp;function gS(){if(Vp)return Qe;Vp=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.createFollowedChannelQuery=Qe.createChannelFollowerQuery=Qe.createChannelVipUpdateQuery=Qe.createChannelCommercialBody=Qe.createChannelUpdateBody=void 0;const n=W(),e=q();function t(o){var u;return{game_id:o.gameId,broadcaster_language:o.language,title:o.title,delay:(u=o.delay)===null||u===void 0?void 0:u.toString(),tags:o.tags,content_classification_labels:o.contentClassificationLabels,is_branded_content:o.isBrandedContent}}Qe.createChannelUpdateBody=t;function r(o,u){return{broadcaster_id:(0,e.extractUserId)(o),length:u}}Qe.createChannelCommercialBody=r;function i(o,u){return{broadcaster_id:(0,e.extractUserId)(o),user_id:(0,e.extractUserId)(u)}}Qe.createChannelVipUpdateQuery=i;function a(o,u){return{broadcaster_id:(0,e.extractUserId)(o),user_id:(0,n.mapOptional)(u,e.extractUserId)}}Qe.createChannelFollowerQuery=a;function s(o,u){return{broadcaster_id:(0,n.mapOptional)(u,e.extractUserId),user_id:(0,e.extractUserId)(o)}}return Qe.createFollowedChannelQuery=s,Qe}var We={},zp;function et(){if(zp)return We;zp=1,Object.defineProperty(We,"__esModule",{value:!0}),We.createChannelUsersCheckQuery=We.createGetByIdsQuery=We.createModeratorActionQuery=We.createUserQuery=We.createSingleKeyQuery=void 0;const n=q();function e(s,o){return{[s]:o}}We.createSingleKeyQuery=e;function t(s){return{user_id:(0,n.extractUserId)(s)}}We.createUserQuery=t;function r(s,o){return{broadcaster_id:s,moderator_id:o}}We.createModeratorActionQuery=r;function i(s,o){return{broadcaster_id:(0,n.extractUserId)(s),id:o}}We.createGetByIdsQuery=i;function a(s,o){return{broadcaster_id:(0,n.extractUserId)(s),user_id:o.map(n.extractUserId)}}return We.createChannelUsersCheckQuery=a,We}var Cr={},Kp;function td(){if(Kp)return Cr;Kp=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.HelixUserRelation=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].user_id}get name(){return this[t.rawDataSymbol].user_login}get displayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return Cr.HelixUserRelation=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Cr.HelixUserRelation=r=n.__decorate([(0,t.rtfm)("api","HelixUserRelation","id")],r),Cr}var Ja={},Xp;function ar(){if(Xp)return Ja;Xp=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.HelixRequestBatcher=void 0;const n=M,e=W();class t{constructor(i,a,s,o,u,h=100){this._callOptions=i,this._queryParamName=a,this._matchKey=s,this._mapper=u,this._limitPerRequest=h,this._requestedIds=[],this._requestResolversById=new Map,this._waitTimer=null,this._client=o,this._delay=o._batchDelay}async request(i){const{promise:a,resolve:s,reject:o}=(0,e.promiseWithResolvers)();return this._requestedIds.includes(i)||this._requestedIds.push(i),this._requestResolversById.has(i)?this._requestResolversById.get(i).push({resolve:s,reject:o}):this._requestResolversById.set(i,[{resolve:s,reject:o}]),this._waitTimer&&(clearTimeout(this._waitTimer),this._waitTimer=null),this._requestedIds.length>=this._limitPerRequest?this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest)):this._waitTimer=setTimeout(()=>{this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest))},this._delay),await a}async _handleBatch(i){var a;try{const{data:s}=await this._doRequest(i),o=(0,e.indexBy)(s,this._matchKey);for(const u of i){for(const h of(a=this._requestResolversById.get(u))!==null&&a!==void 0?a:[])Object.prototype.hasOwnProperty.call(o,u)?h.resolve(this._mapper(o[u])):h.resolve(null);this._requestResolversById.delete(u)}}catch{await Promise.all(i.map(async o=>{var u,h;try{const m=await this._doRequest([o]);for(const w of(u=this._requestResolversById.get(o))!==null&&u!==void 0?u:[])w.resolve(m.data.length?this._mapper(m.data[0]):null)}catch(m){for(const w of(h=this._requestResolversById.get(o))!==null&&h!==void 0?h:[])w.reject(m)}this._requestResolversById.delete(o)}))}}async _doRequest(i){return await this._client.callApi({type:"helix",...this._callOptions,query:{...this._callOptions.query,[this._queryParamName]:i}})}}return Ja.HelixRequestBatcher=t,n.__decorate([(0,e.Enumerable)(!1)],t.prototype,"_client",void 0),Ja}var Er={},Jp;function ke(){if(Jp)return Er;Jp=1;var n;Object.defineProperty(Er,"__esModule",{value:!0}),Er.HelixPaginatedRequest=void 0;const e=M,t=W(),r=q();Object.prototype.hasOwnProperty.call(Symbol,"asyncIterator")||(Symbol.asyncIterator=(n=Symbol.asyncIterator)!==null&&n!==void 0?n:Symbol.for("Symbol.asyncIterator"));let i=class{constructor(s,o,u,h=100){this._callOptions=s,this._mapper=u,this._limitPerPage=h,this._isFinished=!1,this._client=o}get current(){var s;return(s=this._currentData)===null||s===void 0?void 0:s.data}async getNext(){var s;if(this._isFinished)return[];const o=await this._fetchData();return!((s=o.data)===null||s===void 0)&&s.length?this._processResult(o):(this._isFinished=!0,[])}async getAll(){this.reset();const s=[];do{const o=await this.getNext();if(!o.length)break;s.push(...o)}while(this._currentCursor);return this.reset(),s}get currentCursor(){return this._currentCursor}reset(){this._currentCursor=void 0,this._isFinished=!1,this._currentData=void 0}async*[Symbol.asyncIterator](){for(this.reset();;){const s=await this.getNext();if(!s.length)break;yield*s[Symbol.iterator]()}}async _fetchData(s={}){return await this._client.callApi({type:"helix",...this._callOptions,...s,query:{...this._callOptions.query,after:this._currentCursor,first:this._limitPerPage.toString(),...s.query}})}_processResult(s){var o;return this._currentCursor=typeof s.pagination=="string"?s.pagination:(o=s.pagination)===null||o===void 0?void 0:o.cursor,this._currentCursor===void 0&&(this._isFinished=!0),this._currentData=s,s.data.reduce((u,h)=>{const m=this._mapper(h);return Array.isArray(m)?[...u,...m]:[...u,m]},[])}};return Er.HelixPaginatedRequest=i,e.__decorate([(0,t.Enumerable)(!1)],i.prototype,"_client",void 0),Er.HelixPaginatedRequest=i=e.__decorate([(0,r.rtfm)("api","HelixPaginatedRequest")],i),Er}var Hr={},Yp;function Zs(){if(Yp)return Hr;Yp=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.HelixPaginatedRequestWithTotal=void 0;const n=M,e=q(),t=ke();let r=class extends t.HelixPaginatedRequest{async getTotalCount(){var a;return((a=this._currentData)!==null&&a!==void 0?a:await this._fetchData({query:{after:void 0}})).total}};return Hr.HelixPaginatedRequestWithTotal=r,Hr.HelixPaginatedRequestWithTotal=r=n.__decorate([(0,e.rtfm)("api","HelixPaginatedRequestWithTotal")],r),Hr}var $t={},Zp;function Fe(){if(Zp)return $t;Zp=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.createPaginatedResultWithTotal=$t.createPaginatedResult=void 0;function n(t,r,i){var a;let s;return{get data(){var o,u;return s??(s=(u=(o=t.data)===null||o===void 0?void 0:o.map(h=>new r(h,i)))!==null&&u!==void 0?u:[])},cursor:typeof t.pagination=="string"?t.pagination:(a=t.pagination)===null||a===void 0?void 0:a.cursor}}$t.createPaginatedResult=n;function e(t,r,i){let a;return{get data(){var s,o;return a??(a=(o=(s=t.data)===null||s===void 0?void 0:s.map(u=>new r(u,i)))!==null&&o!==void 0?o:[])},cursor:t.pagination.cursor,total:t.total}}return $t.createPaginatedResultWithTotal=e,$t}var Ya={},em;function Me(){if(em)return Ya;em=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.createPaginationQuery=void 0;function n({after:e,before:t,limit:r}={}){return{after:e,before:t,first:r?.toString()}}return Ya.createPaginationQuery=n,Ya}var Ar={},tm;function gy(){if(tm)return Ar;tm=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.HelixChannel=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].broadcaster_id}get name(){return this[t.rawDataSymbol].broadcaster_login}get displayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get language(){return this[t.rawDataSymbol].broadcaster_language}get gameId(){return this[t.rawDataSymbol].game_id}get gameName(){return this[t.rawDataSymbol].game_name}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get title(){return this[t.rawDataSymbol].title}get delay(){return this[t.rawDataSymbol].delay}get tags(){return this[t.rawDataSymbol].tags}get contentClassificationLabels(){return this[t.rawDataSymbol].content_classification_labels}get isBrandedContent(){return this[t.rawDataSymbol].is_branded_content}};return Ar.HelixChannel=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Ar.HelixChannel=r=n.__decorate([(0,t.rtfm)("api","HelixChannel","id")],r),Ar}var Rr={},rm;function fy(){if(rm)return Rr;rm=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.HelixChannelEditor=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}};return Rr.HelixChannelEditor=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Rr.HelixChannelEditor=r=n.__decorate([(0,t.rtfm)("api","HelixChannelEditor","userId")],r),Rr}var Tr={},nm;function yy(){if(nm)return Tr;nm=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.HelixChannelFollower=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get followDate(){return new Date(this[t.rawDataSymbol].followed_at)}};return Tr.HelixChannelFollower=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Tr.HelixChannelFollower=r=n.__decorate([(0,t.rtfm)("api","HelixChannelFollower","userId")],r),Tr}var Ir={},im;function by(){if(im)return Ir;im=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.HelixFollowedChannel=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get followDate(){return new Date(this[t.rawDataSymbol].followed_at)}};return Ir.HelixFollowedChannel=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Ir.HelixFollowedChannel=r=n.__decorate([(0,t.rtfm)("api","HelixFollowedChannel","broadcasterId")],r),Ir}var Pr={},am;function vy(){if(am)return Pr;am=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.HelixAdSchedule=void 0;const n=M,e=q();let t=class extends e.DataObject{get snoozeCount(){return this[e.rawDataSymbol].snooze_count}get snoozeRefreshDate(){return this[e.rawDataSymbol].snooze_refresh_at?new Date(this[e.rawDataSymbol].snooze_refresh_at*1e3):null}get nextAdDate(){return this[e.rawDataSymbol].next_ad_at?new Date(this[e.rawDataSymbol].next_ad_at*1e3):null}get duration(){return this[e.rawDataSymbol].duration}get lastAdDate(){return this[e.rawDataSymbol].last_ad_at?new Date(this[e.rawDataSymbol].last_ad_at*1e3):null}get prerollFreeTime(){return this[e.rawDataSymbol].preroll_free_time}};return Pr.HelixAdSchedule=t,Pr.HelixAdSchedule=t=n.__decorate([(0,e.rtfm)("api","HelixAdSchedule")],t),Pr}var Dr={},sm;function fS(){if(sm)return Dr;sm=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.HelixSnoozeNextAdResult=void 0;const n=M,e=q();let t=class extends e.DataObject{get snoozeCount(){return this[e.rawDataSymbol].snooze_count}get snoozeRefreshDate(){return new Date(this[e.rawDataSymbol].snooze_refresh_at*1e3)}get nextAdDate(){return new Date(this[e.rawDataSymbol].next_ad_at*1e3)}};return Dr.HelixSnoozeNextAdResult=t,Dr.HelixSnoozeNextAdResult=t=n.__decorate([(0,e.rtfm)("api","HelixSnoozeNextAdResult")],t),Dr}var om;function wy(){if(om)return Sr;om=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.HelixChannelApi=void 0;const n=M,e=W(),t=Re(),r=q(),i=gS(),a=et(),s=td(),o=ar(),u=ke(),h=Zs(),m=Fe(),w=Me(),y=ve(),_=gy(),p=fy(),l=yy(),d=by(),b=vy(),S=fS();let R=class extends y.BaseApi{constructor(){super(...arguments),this._getChannelByIdBatcher=new o.HelixRequestBatcher({url:"channels"},"broadcaster_id","broadcaster_id",this._client,f=>new _.HelixChannel(f,this._client))}async getChannelInfoById(f){const H=(0,r.extractUserId)(f),E=await this._client.callApi({type:"helix",url:"channels",userId:H,query:(0,t.createBroadcasterQuery)(H)});return(0,e.mapNullable)(E.data[0],B=>new _.HelixChannel(B,this._client))}async getChannelInfoByIdBatched(f){return await this._getChannelByIdBatcher.request((0,r.extractUserId)(f))}async getChannelInfoByIds(f){const H=f.map(r.extractUserId);return(await this._client.callApi({type:"helix",url:"channels",query:(0,a.createSingleKeyQuery)("broadcaster_id",H)})).data.map(B=>new _.HelixChannel(B,this._client))}async updateChannelInfo(f,H){await this._client.callApi({type:"helix",url:"channels",method:"PATCH",userId:(0,r.extractUserId)(f),scopes:["channel:manage:broadcast"],query:(0,t.createBroadcasterQuery)(f),jsonBody:(0,i.createChannelUpdateBody)(H)})}async startChannelCommercial(f,H){await this._client.callApi({type:"helix",url:"channels/commercial",method:"POST",userId:(0,r.extractUserId)(f),scopes:["channel:edit:commercial"],jsonBody:(0,i.createChannelCommercialBody)(f,H)})}async getChannelEditors(f){return(await this._client.callApi({type:"helix",url:"channels/editors",userId:(0,r.extractUserId)(f),scopes:["channel:read:editors"],query:(0,t.createBroadcasterQuery)(f)})).data.map(E=>new p.HelixChannelEditor(E,this._client))}async getVips(f,H){const E=await this._client.callApi({type:"helix",url:"channels/vips",userId:(0,r.extractUserId)(f),scopes:["channel:read:vips","channel:manage:vips"],query:{...(0,t.createBroadcasterQuery)(f),...(0,w.createPaginationQuery)(H)}});return(0,m.createPaginatedResult)(E,s.HelixUserRelation,this._client)}getVipsPaginated(f){return new u.HelixPaginatedRequest({url:"channels/vips",userId:(0,r.extractUserId)(f),scopes:["channel:read:vips","channel:manage:vips"],query:(0,t.createBroadcasterQuery)(f)},this._client,H=>new s.HelixUserRelation(H,this._client))}async checkVipForUsers(f,H){return(await this._client.callApi({type:"helix",url:"channels/vips",userId:(0,r.extractUserId)(f),scopes:["channel:read:vips","channel:manage:vips"],query:(0,a.createChannelUsersCheckQuery)(f,H)})).data.map(B=>new s.HelixUserRelation(B,this._client))}async checkVipForUser(f,H){const E=(0,r.extractUserId)(H);return(await this.checkVipForUsers(f,[E])).some(j=>j.id===E)}async addVip(f,H){await this._client.callApi({type:"helix",url:"channels/vips",method:"POST",userId:(0,r.extractUserId)(f),scopes:["channel:manage:vips"],query:(0,i.createChannelVipUpdateQuery)(f,H)})}async removeVip(f,H){await this._client.callApi({type:"helix",url:"channels/vips",method:"DELETE",userId:(0,r.extractUserId)(f),scopes:["channel:manage:vips"],query:(0,i.createChannelVipUpdateQuery)(f,H)})}async getChannelFollowerCount(f){return(await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:(0,r.extractUserId)(f),query:{...(0,i.createChannelFollowerQuery)(f),...(0,w.createPaginationQuery)({limit:1})}})).total}async getChannelFollowers(f,H,E){const B=await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:(0,r.extractUserId)(f),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:{...(0,i.createChannelFollowerQuery)(f,H),...(0,w.createPaginationQuery)(E)}});return(0,m.createPaginatedResultWithTotal)(B,l.HelixChannelFollower,this._client)}getChannelFollowersPaginated(f){return new h.HelixPaginatedRequestWithTotal({url:"channels/followers",method:"GET",userId:(0,r.extractUserId)(f),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:(0,i.createChannelFollowerQuery)(f)},this._client,H=>new l.HelixChannelFollower(H,this._client))}async getFollowedChannels(f,H,E){const B=await this._client.callApi({type:"helix",url:"channels/followed",method:"GET",userId:(0,r.extractUserId)(f),scopes:["user:read:follows"],query:{...(0,i.createFollowedChannelQuery)(f,H),...(0,w.createPaginationQuery)(E)}});return(0,m.createPaginatedResultWithTotal)(B,d.HelixFollowedChannel,this._client)}getFollowedChannelsPaginated(f,H){return new h.HelixPaginatedRequestWithTotal({url:"channels/followed",method:"GET",userId:(0,r.extractUserId)(f),scopes:["user:read:follows"],query:(0,i.createFollowedChannelQuery)(f,H)},this._client,E=>new d.HelixFollowedChannel(E,this._client))}async getAdSchedule(f){const H=await this._client.callApi({type:"helix",url:"channels/ads",method:"GET",userId:(0,r.extractUserId)(f),scopes:["channel:read:ads"],query:(0,t.createBroadcasterQuery)(f)});return new b.HelixAdSchedule(H.data[0])}async snoozeNextAd(f){const H=await this._client.callApi({type:"helix",url:"channels/ads/schedule/snooze",method:"POST",userId:(0,r.extractUserId)(f),scopes:["channel:manage:ads"],query:(0,t.createBroadcasterQuery)(f)});return new S.HelixSnoozeNextAdResult(H.data[0])}};return Sr.HelixChannelApi=R,n.__decorate([(0,e.Enumerable)(!1)],R.prototype,"_getChannelByIdBatcher",void 0),Sr.HelixChannelApi=R=n.__decorate([(0,r.rtfm)("api","HelixChannelApi")],R),Sr}var Br={},Ve={},lm;function yS(){if(lm)return Ve;lm=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.createRedemptionsForBroadcasterQuery=Ve.createRewardRedemptionsByIdsQuery=Ve.createCustomRewardBody=Ve.createCustomRewardChangeQuery=Ve.createCustomRewardsQuery=void 0;const n=q();function e(s,o){return{broadcaster_id:(0,n.extractUserId)(s),only_manageable_rewards:o?.toString()}}Ve.createCustomRewardsQuery=e;function t(s,o){return{broadcaster_id:(0,n.extractUserId)(s),id:o}}Ve.createCustomRewardChangeQuery=t;function r(s){var o,u,h;const m={title:s.title,cost:s.cost,prompt:s.prompt,background_color:s.backgroundColor,is_enabled:s.isEnabled,is_user_input_required:s.userInputRequired,should_redemptions_skip_request_queue:s.autoFulfill};return s.maxRedemptionsPerStream!==void 0&&(m.is_max_per_stream_enabled=!!s.maxRedemptionsPerStream,m.max_per_stream=(o=s.maxRedemptionsPerStream)!==null&&o!==void 0?o:0),s.maxRedemptionsPerUserPerStream!==void 0&&(m.is_max_per_user_per_stream_enabled=!!s.maxRedemptionsPerUserPerStream,m.max_per_user_per_stream=(u=s.maxRedemptionsPerUserPerStream)!==null&&u!==void 0?u:0),s.globalCooldown!==void 0&&(m.is_global_cooldown_enabled=!!s.globalCooldown,m.global_cooldown_seconds=(h=s.globalCooldown)!==null&&h!==void 0?h:0),"isPaused"in s&&(m.is_paused=s.isPaused),m}Ve.createCustomRewardBody=r;function i(s,o,u){return{broadcaster_id:(0,n.extractUserId)(s),reward_id:o,id:u}}Ve.createRewardRedemptionsByIdsQuery=i;function a(s,o,u,h){return{broadcaster_id:(0,n.extractUserId)(s),reward_id:o,status:u,sort:h.newestFirst?"NEWEST":"OLDEST"}}return Ve.createRedemptionsForBroadcasterQuery=a,Ve}var Or={},um;function xy(){if(um)return Or;um=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.HelixCustomReward=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}getImageUrl(a){var s,o;const u=`url_${a}x`;return(o=(s=this[t.rawDataSymbol].image)===null||s===void 0?void 0:s[u])!==null&&o!==void 0?o:this[t.rawDataSymbol].default_image[u]}get backgroundColor(){return this[t.rawDataSymbol].background_color}get isEnabled(){return this[t.rawDataSymbol].is_enabled}get cost(){return this[t.rawDataSymbol].cost}get title(){return this[t.rawDataSymbol].title}get prompt(){return this[t.rawDataSymbol].prompt}get userInputRequired(){return this[t.rawDataSymbol].is_user_input_required}get maxRedemptionsPerStream(){return this[t.rawDataSymbol].max_per_stream_setting.is_enabled?this[t.rawDataSymbol].max_per_stream_setting.max_per_stream:null}get maxRedemptionsPerUserPerStream(){return this[t.rawDataSymbol].max_per_user_per_stream_setting.is_enabled?this[t.rawDataSymbol].max_per_user_per_stream_setting.max_per_user_per_stream:null}get globalCooldown(){return this[t.rawDataSymbol].global_cooldown_setting.is_enabled?this[t.rawDataSymbol].global_cooldown_setting.global_cooldown_seconds:null}get isPaused(){return this[t.rawDataSymbol].is_paused}get isInStock(){return this[t.rawDataSymbol].is_in_stock}get redemptionsThisStream(){return this[t.rawDataSymbol].redemptions_redeemed_current_stream}get autoFulfill(){return this[t.rawDataSymbol].should_redemptions_skip_request_queue}get cooldownExpiryDate(){return this[t.rawDataSymbol].cooldown_expires_at?new Date(this[t.rawDataSymbol].cooldown_expires_at):null}};return Or.HelixCustomReward=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Or.HelixCustomReward=r=n.__decorate([(0,t.rtfm)("api","HelixCustomReward","id")],r),Or}var Ur={},cm;function Sy(){if(cm)return Ur;cm=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.HelixCustomRewardRedemption=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get userInput(){return this[t.rawDataSymbol].user_input}get isFulfilled(){return this[t.rawDataSymbol].status==="FULFILLED"}get isCanceled(){return this[t.rawDataSymbol].status==="CANCELED"}get redemptionDate(){return new Date(this[t.rawDataSymbol].redeemed_at)}get rewardId(){return this[t.rawDataSymbol].reward.id}get rewardTitle(){return this[t.rawDataSymbol].reward.title}get rewardPrompt(){return this[t.rawDataSymbol].reward.prompt}get rewardCost(){return this[t.rawDataSymbol].reward.cost}async getReward(){return(0,t.checkRelationAssertion)(await this._client.channelPoints.getCustomRewardById(this[t.rawDataSymbol].broadcaster_id,this[t.rawDataSymbol].reward.id))}async updateStatus(a){return(await this._client.channelPoints.updateRedemptionStatusByIds(this[t.rawDataSymbol].broadcaster_id,this[t.rawDataSymbol].reward.id,[this[t.rawDataSymbol].id],a))[0]}};return Ur.HelixCustomRewardRedemption=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Ur.HelixCustomRewardRedemption=r=n.__decorate([(0,t.rtfm)("api","HelixCustomRewardRedemption","id")],r),Ur}var dm;function Cy(){if(dm)return Br;dm=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.HelixChannelPointsApi=void 0;const n=M,e=Re(),t=q(),r=yS(),i=et(),a=ke(),s=Fe(),o=Me(),u=ve(),h=xy(),m=Sy();let w=class extends u.BaseApi{async getCustomRewards(_,p){return(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:(0,t.extractUserId)(_),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,r.createCustomRewardsQuery)(_,p)})).data.map(d=>new h.HelixCustomReward(d,this._client))}async getCustomRewardsByIds(_,p){return p.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:(0,t.extractUserId)(_),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,i.createGetByIdsQuery)(_,p)})).data.map(d=>new h.HelixCustomReward(d,this._client)):[]}async getCustomRewardById(_,p){const l=await this.getCustomRewardsByIds(_,[p]);return l.length?l[0]:null}async createCustomReward(_,p){const l=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"POST",userId:(0,t.extractUserId)(_),scopes:["channel:manage:redemptions"],query:(0,e.createBroadcasterQuery)(_),jsonBody:(0,r.createCustomRewardBody)(p)});return new h.HelixCustomReward(l.data[0],this._client)}async updateCustomReward(_,p,l){const d=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"PATCH",userId:(0,t.extractUserId)(_),scopes:["channel:manage:redemptions"],query:(0,r.createCustomRewardChangeQuery)(_,p),jsonBody:(0,r.createCustomRewardBody)(l)});return new h.HelixCustomReward(d.data[0],this._client)}async deleteCustomReward(_,p){await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"DELETE",userId:(0,t.extractUserId)(_),scopes:["channel:manage:redemptions"],query:(0,r.createCustomRewardChangeQuery)(_,p)})}async getRedemptionsByIds(_,p,l){return l.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:(0,t.extractUserId)(_),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,r.createRewardRedemptionsByIdsQuery)(_,p,l)})).data.map(b=>new m.HelixCustomRewardRedemption(b,this._client)):[]}async getRedemptionById(_,p,l){const d=await this.getRedemptionsByIds(_,p,[l]);return d.length?d[0]:null}async getRedemptionsForBroadcaster(_,p,l,d){const b=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:(0,t.extractUserId)(_),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:{...(0,r.createRedemptionsForBroadcasterQuery)(_,p,l,d),...(0,o.createPaginationQuery)(d)}});return(0,s.createPaginatedResult)(b,m.HelixCustomRewardRedemption,this._client)}getRedemptionsForBroadcasterPaginated(_,p,l,d){return new a.HelixPaginatedRequest({url:"channel_points/custom_rewards/redemptions",userId:(0,t.extractUserId)(_),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,r.createRedemptionsForBroadcasterQuery)(_,p,l,d)},this._client,b=>new m.HelixCustomRewardRedemption(b,this._client),50)}async updateRedemptionStatusByIds(_,p,l,d){return l.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",method:"PATCH",userId:(0,t.extractUserId)(_),scopes:["channel:manage:redemptions"],query:(0,r.createRewardRedemptionsByIdsQuery)(_,p,l),jsonBody:{status:d}})).data.map(S=>new m.HelixCustomRewardRedemption(S,this._client)):[]}};return Br.HelixChannelPointsApi=w,Br.HelixChannelPointsApi=w=n.__decorate([(0,t.rtfm)("api","HelixChannelPointsApi")],w),Br}var qr={},kr={},Mr={},hm;function rd(){if(hm)return Mr;hm=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.HelixCharityCampaignAmount=void 0;const n=M,e=q();let t=class extends e.DataObject{get value(){return this[e.rawDataSymbol].value}get decimalPlaces(){return this[e.rawDataSymbol].decimal_places}get localizedValue(){return this.value/10**this.decimalPlaces}get currency(){return this[e.rawDataSymbol].currency}};return Mr.HelixCharityCampaignAmount=t,Mr.HelixCharityCampaignAmount=t=n.__decorate([(0,e.rtfm)("api","HelixCharityCampaignAmount")],t),Mr}var pm;function Ey(){if(pm)return kr;pm=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.HelixCharityCampaign=void 0;const n=M,e=W(),t=q(),r=rd();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get charityName(){return this[t.rawDataSymbol].charity_name}get charityDescription(){return this[t.rawDataSymbol].charity_description}get charityLogo(){return this[t.rawDataSymbol].charity_logo}get charityWebsite(){return this[t.rawDataSymbol].charity_website}get currentAmount(){return new r.HelixCharityCampaignAmount(this[t.rawDataSymbol].current_amount)}get targetAmount(){return new r.HelixCharityCampaignAmount(this[t.rawDataSymbol].target_amount)}};return kr.HelixCharityCampaign=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),kr.HelixCharityCampaign=i=n.__decorate([(0,t.rtfm)("api","HelixCharityCampaign","id")],i),kr}var jr={},mm;function Hy(){if(mm)return jr;mm=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.HelixCharityCampaignDonation=void 0;const n=M,e=W(),t=q(),r=rd();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get campaignId(){return this[t.rawDataSymbol].campaign_id}get donorId(){return this[t.rawDataSymbol].user_id}get donorName(){return this[t.rawDataSymbol].user_login}get donorDisplayName(){return this[t.rawDataSymbol].user_name}async getDonor(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get amount(){return new r.HelixCharityCampaignAmount(this[t.rawDataSymbol].amount)}};return jr.HelixCharityCampaignDonation=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),jr.HelixCharityCampaignDonation=i=n.__decorate([(0,t.rtfm)("api","HelixCharityCampaignDonation")],i),jr}var _m;function Ay(){if(_m)return qr;_m=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.HelixCharityApi=void 0;const n=M,e=Re(),t=q(),r=Fe(),i=Me(),a=ve(),s=Ey(),o=Hy();let u=class extends a.BaseApi{async getCharityCampaign(m){const w=await this._client.callApi({type:"helix",url:"charity/campaigns",method:"GET",userId:(0,t.extractUserId)(m),scopes:["channel:read:charity"],query:(0,e.createBroadcasterQuery)(m)});return new s.HelixCharityCampaign(w.data[0],this._client)}async getCharityCampaignDonations(m,w){const y=await this._client.callApi({type:"helix",url:"charity/donations",userId:(0,t.extractUserId)(m),scopes:["channel:read:charity"],query:{...(0,e.createBroadcasterQuery)(m),...(0,i.createPaginationQuery)(w)}});return(0,r.createPaginatedResult)(y,o.HelixCharityCampaignDonation,this._client)}};return qr.HelixCharityApi=u,qr.HelixCharityApi=u=n.__decorate([(0,t.rtfm)("api","HelixCharityApi")],u),qr}var Lr={},ze={},gm;function bS(){if(gm)return ze;gm=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.createSendChatMessageBody=ze.createSendChatMessageQuery=ze.createShoutoutQuery=ze.createChatColorUpdateQuery=ze.createChatSettingsUpdateBody=void 0;const n=q();function e(s){return{slow_mode:s.slowModeEnabled,slow_mode_wait_time:s.slowModeDelay,follower_mode:s.followerOnlyModeEnabled,follower_mode_duration:s.followerOnlyModeDelay,subscriber_mode:s.subscriberOnlyModeEnabled,emote_mode:s.emoteOnlyModeEnabled,unique_chat_mode:s.uniqueChatModeEnabled,non_moderator_chat_delay:s.nonModeratorChatDelayEnabled,non_moderator_chat_delay_duration:s.nonModeratorChatDelay}}ze.createChatSettingsUpdateBody=e;function t(s,o){return{user_id:(0,n.extractUserId)(s),color:o}}ze.createChatColorUpdateQuery=t;function r(s,o,u){return{from_broadcaster_id:(0,n.extractUserId)(s),to_broadcaster_id:(0,n.extractUserId)(o),moderator_id:u}}ze.createShoutoutQuery=r;function i(s,o){return{broadcaster_id:s,sender_id:o}}ze.createSendChatMessageQuery=i;function a(s,o){return{message:s,reply_parent_message_id:o?.replyParentMessageId}}return ze.createSendChatMessageBody=a,ze}var Nr={},Fr={},Za={},fm;function Ry(){if(fm)return Za;fm=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.HelixEmoteBase=void 0;const n=q();class e extends n.DataObject{get id(){return this[n.rawDataSymbol].id}get name(){return this[n.rawDataSymbol].name}get formats(){return this[n.rawDataSymbol].format}get scales(){return this[n.rawDataSymbol].scale}get themeModes(){return this[n.rawDataSymbol].theme_mode}getStaticImageUrl(r="1.0",i="light"){return this[n.rawDataSymbol].format.includes("static")&&this[n.rawDataSymbol].scale.includes(r)?this.getFormattedImageUrl(r,"static",i):null}getAnimatedImageUrl(r="1.0",i="light"){return this[n.rawDataSymbol].format.includes("animated")&&this[n.rawDataSymbol].scale.includes(r)?this.getFormattedImageUrl(r,"animated",i):null}getFormattedImageUrl(r="1.0",i="static",a="light"){return`https://static-cdn.jtvnw.net/emoticons/v2/${this[n.rawDataSymbol].id}/${i}/${a}/${r}`}}return Za.HelixEmoteBase=e,Za}var ym;function Sl(){if(ym)return Fr;ym=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.HelixEmote=void 0;const n=M,e=q(),t=Ry();let r=class extends t.HelixEmoteBase{getImageUrl(a){return this[e.rawDataSymbol].images[`url_${a}x`]}};return Fr.HelixEmote=r,Fr.HelixEmote=r=n.__decorate([(0,e.rtfm)("api","HelixEmote","id")],r),Fr}var bm;function Ty(){if(bm)return Nr;bm=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.HelixChannelEmote=void 0;const n=M,e=W(),t=q(),r=Sl();let i=class extends r.HelixEmote{constructor(s,o){super(s),this._client=o}get tier(){return this[t.rawDataSymbol].tier||null}get type(){return this[t.rawDataSymbol].emote_type}get emoteSetId(){return this[t.rawDataSymbol].emote_set_id}async getAllEmotesFromSet(){return await this._client.chat.getEmotesFromSets([this[t.rawDataSymbol].emote_set_id])}};return Nr.HelixChannelEmote=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Nr.HelixChannelEmote=i=n.__decorate([(0,t.rtfm)("api","HelixChannelEmote","id")],i),Nr}var $r={},Gr={},vm;function Iy(){if(vm)return Gr;vm=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.HelixChatBadgeVersion=void 0;const n=M,e=q();let t=class extends e.DataObject{get id(){return this[e.rawDataSymbol].id}getImageUrl(i){return this[e.rawDataSymbol][`image_url_${i}x`]}get title(){return this[e.rawDataSymbol].title}get description(){return this[e.rawDataSymbol].description}get clickAction(){return this[e.rawDataSymbol].click_action}get clickUrl(){return this[e.rawDataSymbol].click_url}};return Gr.HelixChatBadgeVersion=t,Gr.HelixChatBadgeVersion=t=n.__decorate([(0,e.rtfm)("api","HelixChatBadgeVersion","id")],t),Gr}var wm;function Py(){if(wm)return $r;wm=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.HelixChatBadgeSet=void 0;const n=M,e=wl(),t=q(),r=Iy();let i=class extends t.DataObject{get id(){return this[t.rawDataSymbol].set_id}get versions(){return this[t.rawDataSymbol].versions.map(s=>new r.HelixChatBadgeVersion(s))}getVersion(s){var o;return(o=this.versions.find(u=>u.id===s))!==null&&o!==void 0?o:null}};return $r.HelixChatBadgeSet=i,n.__decorate([(0,e.CachedGetter)()],i.prototype,"versions",null),$r.HelixChatBadgeSet=i=n.__decorate([e.Cacheable,(0,t.rtfm)("api","HelixChatBadgeSet","id")],i),$r}var Qr={},xm;function Dy(){if(xm)return Qr;xm=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.HelixChatChatter=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return Qr.HelixChatChatter=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Qr.HelixChatChatter=r=n.__decorate([(0,t.rtfm)("api","HelixChatChatter")],r),Qr}var Wr={},Sm;function nd(){if(Sm)return Wr;Sm=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.HelixChatSettings=void 0;const n=M,e=q();let t=class extends e.DataObject{get broadcasterId(){return this[e.rawDataSymbol].broadcaster_id}get slowModeEnabled(){return this[e.rawDataSymbol].slow_mode}get slowModeDelay(){return this[e.rawDataSymbol].slow_mode_wait_time}get followerOnlyModeEnabled(){return this[e.rawDataSymbol].follower_mode}get followerOnlyModeDelay(){return this[e.rawDataSymbol].follower_mode_duration}get subscriberOnlyModeEnabled(){return this[e.rawDataSymbol].subscriber_mode}get emoteOnlyModeEnabled(){return this[e.rawDataSymbol].emote_mode}get uniqueChatModeEnabled(){return this[e.rawDataSymbol].unique_chat_mode}};return Wr.HelixChatSettings=t,Wr.HelixChatSettings=t=n.__decorate([(0,e.rtfm)("api","HelixChatSettings","broadcasterId")],t),Wr}var Vr={},Cm;function By(){if(Cm)return Vr;Cm=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.HelixEmoteFromSet=void 0;const n=M,e=W(),t=q(),r=Sl();let i=class extends r.HelixEmote{constructor(s,o){super(s),this._client=o}get type(){return this[t.rawDataSymbol].emote_type}get emoteSetId(){return this[t.rawDataSymbol].emote_set_id}get ownerId(){switch(this[t.rawDataSymbol].owner_id){case"0":case"twitch":return null;default:return this[t.rawDataSymbol].owner_id}}async getOwner(){switch(this[t.rawDataSymbol].owner_id){case"0":case"twitch":return null;default:return await this._client.users.getUserById(this[t.rawDataSymbol].owner_id)}}};return Vr.HelixEmoteFromSet=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Vr.HelixEmoteFromSet=i=n.__decorate([(0,t.rtfm)("api","HelixEmoteFromSet","id")],i),Vr}var zr={},Em;function Oy(){if(Em)return zr;Em=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.HelixUserEmote=void 0;const n=M,e=q(),t=Ry(),r=W();let i=class extends t.HelixEmoteBase{constructor(s,o){super(s),this._client=o}get type(){return this[e.rawDataSymbol].emote_type}get emoteSetId(){return this[e.rawDataSymbol].emote_set_id||null}get ownerId(){return this[e.rawDataSymbol].owner_id||null}async getAllEmotesFromSet(){return this[e.rawDataSymbol].emote_set_id?await this._client.chat.getEmotesFromSets([this[e.rawDataSymbol].emote_set_id]):null}async getOwner(){return this[e.rawDataSymbol].owner_id?await this._client.users.getUserById(this[e.rawDataSymbol].owner_id):null}};return zr.HelixUserEmote=i,n.__decorate([(0,r.Enumerable)(!1)],i.prototype,"_client",void 0),zr.HelixUserEmote=i=n.__decorate([(0,e.rtfm)("api","HelixUserEmote","id")],i),zr}var Kr={},Hm;function Uy(){if(Hm)return Kr;Hm=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.HelixPrivilegedChatSettings=void 0;const n=M,e=q(),t=nd();let r=class extends t.HelixChatSettings{get nonModeratorChatDelayEnabled(){return this[e.rawDataSymbol].non_moderator_chat_delay}get nonModeratorChatDelay(){return this[e.rawDataSymbol].non_moderator_chat_delay_duration}};return Kr.HelixPrivilegedChatSettings=r,Kr.HelixPrivilegedChatSettings=r=n.__decorate([(0,e.rtfm)("api","HelixPrivilegedChatSettings","broadcasterId")],r),Kr}var Xr={},Am;function qy(){if(Am)return Xr;Am=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.HelixSentChatMessage=void 0;const n=M,e=q();let t=class extends e.DataObject{get id(){return this[e.rawDataSymbol].message_id}get isSent(){return this[e.rawDataSymbol].is_sent}get dropReasonCode(){var i;return(i=this[e.rawDataSymbol].drop_reason)===null||i===void 0?void 0:i.code}get dropReasonMessage(){var i;return(i=this[e.rawDataSymbol].drop_reason)===null||i===void 0?void 0:i.message}};return Xr.HelixSentChatMessage=t,Xr.HelixSentChatMessage=t=n.__decorate([(0,e.rtfm)("api","HelixSentChatMessage","id")],t),Xr}var es={},Rm;function vS(){if(Rm)return es;Rm=1,Object.defineProperty(es,"__esModule",{value:!0}),es.createSharedChatSessionQuery=void 0;const n=q();function e(t){return{broadcaster_id:(0,n.extractUserId)(t)}}return es.createSharedChatSessionQuery=e,es}var Jr={},Yr={},Tm;function ky(){if(Tm)return Yr;Tm=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.HelixSharedChatSessionParticipant=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}};return Yr.HelixSharedChatSessionParticipant=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Yr.HelixSharedChatSessionParticipant=r=n.__decorate([(0,t.rtfm)("api","HelixSharedChatSessionParticipant","broadcasterId")],r),Yr}var Im;function My(){if(Im)return Jr;Im=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.HelixSharedChatSession=void 0;const n=M,e=W(),t=q(),r=ky();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get sessionId(){return this[t.rawDataSymbol].session_id}get hostBroadcasterId(){return this[t.rawDataSymbol].host_broadcaster_id}async getHostBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].host_broadcaster_id))}get participants(){return this[t.rawDataSymbol].participants.map(s=>new r.HelixSharedChatSessionParticipant(s,this._client))}get createdDate(){return new Date(this[t.rawDataSymbol].created_at)}get updatedDate(){return new Date(this[t.rawDataSymbol].updated_at)}};return Jr.HelixSharedChatSession=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Jr.HelixSharedChatSession=i=n.__decorate([(0,t.rtfm)("api","HelixSharedChatSession","sessionId")],i),Jr}var Pm;function jy(){if(Pm)return Lr;Pm=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.HelixChatApi=void 0;const n=M,e=Re(),t=q(),r=bS(),i=et(),a=ke(),s=Zs(),o=Fe(),u=Me(),h=ve(),m=Ty(),w=Py(),y=Dy(),_=nd(),p=Sl(),l=By(),d=Oy(),b=Uy(),S=qy(),R=vS(),P=My();let f=class extends h.BaseApi{async getChatters(E,B){const j=(0,t.extractUserId)(E),Z=await this._client.callApi({type:"helix",url:"chat/chatters",userId:j,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:{...this._createModeratorActionQuery(j),...(0,u.createPaginationQuery)(B)}});return(0,o.createPaginatedResultWithTotal)(Z,y.HelixChatChatter,this._client)}getChattersPaginated(E){const B=(0,t.extractUserId)(E);return new s.HelixPaginatedRequestWithTotal({url:"chat/chatters",userId:B,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:this._createModeratorActionQuery(B)},this._client,j=>new y.HelixChatChatter(j,this._client),1e3)}async getGlobalBadges(){return(await this._client.callApi({type:"helix",url:"chat/badges/global"})).data.map(B=>new w.HelixChatBadgeSet(B))}async getChannelBadges(E){return(await this._client.callApi({type:"helix",url:"chat/badges",userId:(0,t.extractUserId)(E),query:(0,e.createBroadcasterQuery)(E)})).data.map(j=>new w.HelixChatBadgeSet(j))}async getGlobalEmotes(){return(await this._client.callApi({type:"helix",url:"chat/emotes/global"})).data.map(B=>new p.HelixEmote(B))}async getChannelEmotes(E){return(await this._client.callApi({type:"helix",url:"chat/emotes",userId:(0,t.extractUserId)(E),query:(0,e.createBroadcasterQuery)(E)})).data.map(j=>new m.HelixChannelEmote(j,this._client))}async getEmotesFromSets(E){return(await this._client.callApi({type:"helix",url:"chat/emotes/set",query:(0,i.createSingleKeyQuery)("emote_set_id",E)})).data.map(j=>new l.HelixEmoteFromSet(j,this._client))}async getUserEmotes(E,B){const j=(0,t.extractUserId)(E),Z=await this._client.callApi({type:"helix",url:"chat/emotes/user",userId:(0,t.extractUserId)(E),scopes:["user:read:emotes"],query:{...(0,i.createSingleKeyQuery)("user_id",j),...(0,i.createSingleKeyQuery)("broadcasterId",B?.broadcaster?(0,t.extractUserId)(B.broadcaster):void 0),...(0,u.createPaginationQuery)(B)}});return(0,o.createPaginatedResult)(Z,d.HelixUserEmote,this._client)}getUserEmotesPaginated(E,B){const j=(0,t.extractUserId)(E);return new a.HelixPaginatedRequest({url:"chat/emotes/user",userId:j,scopes:["user:read:emotes"],query:{...(0,i.createSingleKeyQuery)("user_id",j),...(0,i.createSingleKeyQuery)("broadcasterId",B?(0,t.extractUserId)(B):void 0)}},this._client,Z=>new d.HelixUserEmote(Z,this._client))}async getSettings(E){const B=await this._client.callApi({type:"helix",url:"chat/settings",userId:(0,t.extractUserId)(E),query:(0,e.createBroadcasterQuery)(E)});return new _.HelixChatSettings(B.data[0])}async getSettingsPrivileged(E){const B=(0,t.extractUserId)(E),j=await this._client.callApi({type:"helix",url:"chat/settings",userId:B,canOverrideScopedUserContext:!0,scopes:["moderator:read:chat_settings"],query:this._createModeratorActionQuery(B)});return new b.HelixPrivilegedChatSettings(j.data[0])}async updateSettings(E,B){const j=(0,t.extractUserId)(E),Z=await this._client.callApi({type:"helix",url:"chat/settings",method:"PATCH",userId:j,canOverrideScopedUserContext:!0,scopes:["moderator:manage:chat_settings"],query:this._createModeratorActionQuery(j),jsonBody:(0,r.createChatSettingsUpdateBody)(B)});return new b.HelixPrivilegedChatSettings(Z.data[0])}async sendChatMessage(E,B,j){const Z=(0,t.extractUserId)(E),z=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",userId:Z,canOverrideScopedUserContext:!0,scopes:["user:write:chat"],query:(0,r.createSendChatMessageQuery)(Z,this._getUserContextIdWithDefault(Z)),jsonBody:(0,r.createSendChatMessageBody)(B,j)});return new S.HelixSentChatMessage(z.data[0])}async sendChatMessageAsApp(E,B,j,Z){const z=(0,t.extractUserId)(E),Te=(0,t.extractUserId)(B),se=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",forceType:"app",query:(0,r.createSendChatMessageQuery)(Te,z),jsonBody:(0,r.createSendChatMessageBody)(j,Z)});return new S.HelixSentChatMessage(se.data[0])}async sendAnnouncement(E,B){const j=(0,t.extractUserId)(E);await this._client.callApi({type:"helix",url:"chat/announcements",method:"POST",userId:j,canOverrideScopedUserContext:!0,scopes:["moderator:manage:announcements"],query:this._createModeratorActionQuery(j),jsonBody:{message:B.message,color:B.color}})}async getColorsForUsers(E){const B=await this._client.callApi({type:"helix",url:"chat/color",query:(0,i.createSingleKeyQuery)("user_id",E.map(t.extractUserId))});return new Map(B.data.map(j=>[j.user_id,j.color||null]))}async getColorForUser(E){const B=await this._client.callApi({type:"helix",url:"chat/color",userId:(0,t.extractUserId)(E),query:(0,i.createSingleKeyQuery)("user_id",(0,t.extractUserId)(E))});if(B.data.length)return B.data[0].color||null}async setColorForUser(E,B){await this._client.callApi({type:"helix",url:"chat/color",method:"PUT",userId:(0,t.extractUserId)(E),scopes:["user:manage:chat_color"],query:(0,r.createChatColorUpdateQuery)(E,B)})}async shoutoutUser(E,B){const j=(0,t.extractUserId)(E);await this._client.callApi({type:"helix",url:"chat/shoutouts",method:"POST",userId:j,canOverrideScopedUserContext:!0,scopes:["moderator:manage:shoutouts"],query:(0,r.createShoutoutQuery)(E,B,this._getUserContextIdWithDefault(j))})}async getSharedChatSession(E){const B=(0,t.extractUserId)(E),j=await this._client.callApi({type:"helix",url:"shared_chat/session",userId:B,query:(0,R.createSharedChatSessionQuery)(B)});return j.data.length===0?null:new P.HelixSharedChatSession(j.data[0],this._client)}_createModeratorActionQuery(E){return(0,i.createModeratorActionQuery)(E,this._getUserContextIdWithDefault(E))}};return Lr.HelixChatApi=f,Lr.HelixChatApi=f=n.__decorate([(0,t.rtfm)("api","HelixChatApi")],f),Lr}var Zr={},Gt={},Dm;function wS(){if(Dm)return Gt;Dm=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.createClipQuery=Gt.createClipCreateQuery=void 0;const n=q();function e(r,i){return{broadcaster_id:(0,n.extractUserId)(r),has_delay:i.toString()}}Gt.createClipCreateQuery=e;function t(r){const{filterType:i,ids:a,startDate:s,endDate:o,isFeatured:u}=r;return{[i]:a,started_at:s,ended_at:o,is_featured:u?.toString()}}return Gt.createClipQuery=t,Gt}var en={},Bm;function Ly(){if(Bm)return en;Bm=1,Object.defineProperty(en,"__esModule",{value:!0}),en.HelixClip=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get url(){return this[t.rawDataSymbol].url}get embedUrl(){return this[t.rawDataSymbol].embed_url}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get creatorId(){return this[t.rawDataSymbol].creator_id}get creatorDisplayName(){return this[t.rawDataSymbol].creator_name}async getCreator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].creator_id))}get videoId(){return this[t.rawDataSymbol].video_id}async getVideo(){return(0,t.checkRelationAssertion)(await this._client.videos.getVideoById(this[t.rawDataSymbol].video_id))}get gameId(){return this[t.rawDataSymbol].game_id}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get language(){return this[t.rawDataSymbol].language}get title(){return this[t.rawDataSymbol].title}get views(){return this[t.rawDataSymbol].view_count}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get thumbnailUrl(){return this[t.rawDataSymbol].thumbnail_url}get duration(){return this[t.rawDataSymbol].duration}get vodOffset(){return this[t.rawDataSymbol].vod_offset}get isFeatured(){return this[t.rawDataSymbol].is_featured}};return en.HelixClip=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),en.HelixClip=r=n.__decorate([(0,t.rtfm)("api","HelixClip","id")],r),en}var Om;function Ny(){if(Om)return Zr;Om=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.HelixClipApi=void 0;const n=M,e=W(),t=q(),r=wS(),i=ar(),a=ke(),s=Fe(),o=Me(),u=ve(),h=Ly();let m=class extends u.BaseApi{constructor(){super(...arguments),this._getClipByIdBatcher=new i.HelixRequestBatcher({url:"clips"},"id","id",this._client,y=>new h.HelixClip(y,this._client))}async getClipsForBroadcaster(y,_={}){return await this._getClips({..._,filterType:"broadcaster_id",ids:(0,t.extractUserId)(y),userId:(0,t.extractUserId)(y)})}getClipsForBroadcasterPaginated(y,_={}){return this._getClipsPaginated({..._,filterType:"broadcaster_id",ids:(0,t.extractUserId)(y),userId:(0,t.extractUserId)(y)})}async getClipsForGame(y,_={}){return await this._getClips({..._,filterType:"game_id",ids:y})}getClipsForGamePaginated(y,_={}){return this._getClipsPaginated({..._,filterType:"game_id",ids:y})}async getClipsByIds(y){return(await this._getClips({filterType:"id",ids:y})).data}async getClipById(y){const _=await this.getClipsByIds([y]);return _.length?_[0]:null}async getClipByIdBatched(y){return await this._getClipByIdBatcher.request(y)}async createClip(y){const{channel:_,createAfterDelay:p=!1}=y;return(await this._client.callApi({type:"helix",url:"clips",method:"POST",userId:(0,t.extractUserId)(_),scopes:["clips:edit"],canOverrideScopedUserContext:!0,query:(0,r.createClipCreateQuery)(_,p)})).data[0].id}async _getClips(y){if(!y.ids.length)return{data:[]};const _=await this._client.callApi({type:"helix",url:"clips",userId:y.userId,query:{...(0,r.createClipQuery)(y),...(0,o.createPaginationQuery)(y)}});return(0,s.createPaginatedResult)(_,h.HelixClip,this._client)}_getClipsPaginated(y){return new a.HelixPaginatedRequest({url:"clips",userId:y.userId,query:(0,r.createClipQuery)(y)},this._client,_=>new h.HelixClip(_,this._client))}};return Zr.HelixClipApi=m,n.__decorate([(0,e.Enumerable)(!1)],m.prototype,"_getClipByIdBatcher",void 0),Zr.HelixClipApi=m=n.__decorate([(0,t.rtfm)("api","HelixClipApi")],m),Zr}var tn={},ts={},Um;function Fy(){if(Um)return ts;Um=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.HelixContentClassificationLabel=void 0;const n=q();class e extends n.DataObject{get id(){return this[n.rawDataSymbol].id}get name(){return this[n.rawDataSymbol].name}get description(){return this[n.rawDataSymbol].description}}return ts.HelixContentClassificationLabel=e,ts}var qm;function $y(){if(qm)return tn;qm=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.HelixContentClassificationLabelApi=void 0;const n=M,e=q(),t=ve(),r=Fy();let i=class extends t.BaseApi{async getAll(s){return(await this._client.callApi({url:"content_classification_labels",query:{locale:s}})).data.map(u=>new r.HelixContentClassificationLabel(u))}};return tn.HelixContentClassificationLabelApi=i,tn.HelixContentClassificationLabelApi=i=n.__decorate([(0,e.rtfm)("api","HelixContentClassificationLabelApi")],i),tn}var rn={},Qt={},km;function xS(){if(km)return Qt;km=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.createDropsEntitlementUpdateBody=Qt.createDropsEntitlementQuery=void 0;const n=W(),e=q();function t(i,a){return{user_id:a?(0,n.mapOptional)(i.user,e.extractUserId):void 0,game_id:i.gameId,fulfillment_status:i.fulfillmentStatus}}Qt.createDropsEntitlementQuery=t;function r(i,a){return{fulfillment_status:a,entitlement_ids:i}}return Qt.createDropsEntitlementUpdateBody=r,Qt}var nn={},Mm;function Gy(){if(Mm)return nn;Mm=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.HelixDropsEntitlement=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get rewardId(){return this[t.rawDataSymbol].benefit_id}get grantDate(){return new Date(this[t.rawDataSymbol].timestamp)}get userId(){return this[t.rawDataSymbol].user_id}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get gameId(){return this[t.rawDataSymbol].game_id}async getGame(){return(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id))}get fulfillmentStatus(){return this[t.rawDataSymbol].fulfillment_status}get updateDate(){return new Date(this[t.rawDataSymbol].last_updated)}};return nn.HelixDropsEntitlement=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),nn.HelixDropsEntitlement=r=n.__decorate([(0,t.rtfm)("api","HelixDropsEntitlement")],r),nn}var jm;function Qy(){if(jm)return rn;jm=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.HelixEntitlementApi=void 0;const n=M,e=W(),t=q(),r=xS(),i=ar(),a=ke(),s=Fe(),o=Me(),u=ve(),h=Gy();let m=class extends u.BaseApi{constructor(){super(...arguments),this._getDropsEntitlementByIdBatcher=new i.HelixRequestBatcher({url:"entitlements/drops"},"id","id",this._client,y=>new h.HelixDropsEntitlement(y,this._client))}async getDropsEntitlements(y,_=!1){const p=await this._client.callApi({type:"helix",url:"entitlements/drops",userId:(0,e.mapOptional)(y.user,t.extractUserId),forceType:y.user&&_?"app":void 0,query:{...(0,r.createDropsEntitlementQuery)(y,_),...(0,o.createPaginationQuery)(y)}});return(0,s.createPaginatedResult)(p,h.HelixDropsEntitlement,this._client)}getDropsEntitlementsPaginated(y,_=!1){return new a.HelixPaginatedRequest({url:"entitlements/drops",userId:(0,e.mapOptional)(y.user,t.extractUserId),forceType:y.user&&_?"app":void 0,query:(0,r.createDropsEntitlementQuery)(y,_)},this._client,p=>new h.HelixDropsEntitlement(p,this._client))}async getDropsEntitlementsByIds(y){return(await this._client.callApi({type:"helix",url:"entitlements/drops",query:{id:y}})).data.map(p=>new h.HelixDropsEntitlement(p,this._client))}async getDropsEntitlementById(y){var _;return(_=(await this.getDropsEntitlementsByIds([y]))[0])!==null&&_!==void 0?_:null}async getDropsEntitlementByIdBatched(y){return await this._getDropsEntitlementByIdBatcher.request(y)}async updateDropsEntitlements(y,_){const p=await this._client.callApi({type:"helix",url:"entitlements/drops",method:"PATCH",jsonBody:(0,r.createDropsEntitlementUpdateBody)(y,_)});return new Map(p.data.flatMap(l=>l.ids.map(d=>[d,l.status])))}};return rn.HelixEntitlementApi=m,n.__decorate([(0,e.Enumerable)(!1)],m.prototype,"_getDropsEntitlementByIdBatcher",void 0),rn.HelixEntitlementApi=m=n.__decorate([(0,t.rtfm)("api","HelixEntitlementApi")],m),rn}var an={},qe={},Lm;function SS(){if(Lm)return qe;Lm=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.createEventSubConduitShardsUpdateCondition=qe.createEventSubConduitUpdateCondition=qe.createEventSubConduitCondition=qe.createEventSubDropEntitlementGrantCondition=qe.createEventSubUserCondition=qe.createEventSubModeratorCondition=qe.createEventSubRewardCondition=qe.createEventSubBroadcasterCondition=void 0;const n=q();function e(h){return{broadcaster_user_id:(0,n.extractUserId)(h)}}qe.createEventSubBroadcasterCondition=e;function t(h,m){return{broadcaster_user_id:(0,n.extractUserId)(h),reward_id:m}}qe.createEventSubRewardCondition=t;function r(h,m){return{broadcaster_user_id:h,moderator_user_id:m}}qe.createEventSubModeratorCondition=r;function i(h,m){return{broadcaster_user_id:h,user_id:m}}qe.createEventSubUserCondition=i;function a(h){return{organization_id:h.organizationId,category_id:h.categoryId,campaign_id:h.campaignId}}qe.createEventSubDropEntitlementGrantCondition=a;function s(h,m){return{conduit_id:h,status:m}}qe.createEventSubConduitCondition=s;function o(h,m){return{id:h,shard_count:m.toString()}}qe.createEventSubConduitUpdateCondition=o;function u(h,m){return{conduit_id:h,shards:m}}return qe.createEventSubConduitShardsUpdateCondition=u,qe}var sn={},Nm;function id(){if(Nm)return sn;Nm=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.HelixEventSubSubscription=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get status(){return this[t.rawDataSymbol].status}get type(){return this[t.rawDataSymbol].type}get cost(){return this[t.rawDataSymbol].cost}get condition(){return this[t.rawDataSymbol].condition}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get transportMethod(){return this[t.rawDataSymbol].transport.method}async unsubscribe(){await this._client.eventSub.deleteSubscription(this[t.rawDataSymbol].id)}get _transport(){return this[t.rawDataSymbol].transport}set _status(a){this[t.rawDataSymbol].status=a}};return sn.HelixEventSubSubscription=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),sn.HelixEventSubSubscription=r=n.__decorate([(0,t.rtfm)("api","HelixEventSubSubscription","id")],r),sn}var on={},Fm;function Wy(){if(Fm)return on;Fm=1,Object.defineProperty(on,"__esModule",{value:!0}),on.HelixPaginatedEventSubSubscriptionsRequest=void 0;const n=M,e=q(),t=Zs(),r=id();let i=class extends t.HelixPaginatedRequestWithTotal{constructor(s,o,u){super({url:"eventsub/subscriptions",userId:o,query:s},u,h=>new r.HelixEventSubSubscription(h,u))}async getTotalCost(){var s;return((s=this._currentData)!==null&&s!==void 0?s:await this._fetchData({query:{after:void 0}})).total_cost}async getMaxTotalCost(){var s;return((s=this._currentData)!==null&&s!==void 0?s:await this._fetchData({query:{after:void 0}})).max_total_cost}};return on.HelixPaginatedEventSubSubscriptionsRequest=i,on.HelixPaginatedEventSubSubscriptionsRequest=i=n.__decorate([(0,e.rtfm)("api","HelixPaginatedEventSubSubscriptionsRequest")],i),on}var ln={},$m;function Vy(){if($m)return ln;$m=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.HelixEventSubConduit=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get shardCount(){return this[t.rawDataSymbol].shard_count}async update(a){return await this._client.eventSub.updateConduit(this[t.rawDataSymbol].id,a)}async delete(){await this._client.eventSub.deleteConduit(this[t.rawDataSymbol].id)}async getShards(){return await this._client.eventSub.getConduitShards(this[t.rawDataSymbol].id)}};return ln.HelixEventSubConduit=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),ln.HelixEventSubConduit=r=n.__decorate([(0,t.rtfm)("api","HelixEventSubConduit")],r),ln}var un={},Gm;function zy(){if(Gm)return un;Gm=1,Object.defineProperty(un,"__esModule",{value:!0}),un.HelixEventSubConduitShard=void 0;const n=M,e=q();let t=class extends e.DataObject{get id(){return this[e.rawDataSymbol].id}get status(){return this[e.rawDataSymbol].status}get transportMethod(){return this[e.rawDataSymbol].transport.method}};return un.HelixEventSubConduitShard=t,un.HelixEventSubConduitShard=t=n.__decorate([(0,e.rtfm)("api","HelixEventSubConduitShard")],t),un}var Qm;function Ky(){if(Qm)return an;Qm=1,Object.defineProperty(an,"__esModule",{value:!0}),an.HelixEventSubApi=void 0;const n=M,e=W(),t=q(),r=SS(),i=et(),a=ke(),s=Fe(),o=Me(),u=ve(),h=id(),m=Wy(),w=Vy(),y=zy();let _=class extends u.BaseApi{async getSubscriptions(l){const d=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:(0,o.createPaginationQuery)(l)});return{...(0,s.createPaginatedResultWithTotal)(d,h.HelixEventSubSubscription,this._client),totalCost:d.total_cost,maxTotalCost:d.max_total_cost}}getSubscriptionsPaginated(){return new m.HelixPaginatedEventSubSubscriptionsRequest({},void 0,this._client)}async getSubscriptionsForStatus(l,d){const b=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...(0,o.createPaginationQuery)(d),status:l}});return{...(0,s.createPaginatedResultWithTotal)(b,h.HelixEventSubSubscription,this._client),totalCost:b.total_cost,maxTotalCost:b.max_total_cost}}getSubscriptionsForStatusPaginated(l){return new m.HelixPaginatedEventSubSubscriptionsRequest({status:l},void 0,this._client)}async getSubscriptionsForType(l,d){const b=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...(0,o.createPaginationQuery)(d),type:l}});return{...(0,s.createPaginatedResultWithTotal)(b,h.HelixEventSubSubscription,this._client),totalCost:b.total_cost,maxTotalCost:b.max_total_cost}}getSubscriptionsForTypePaginated(l){return new m.HelixPaginatedEventSubSubscriptionsRequest({type:l},void 0,this._client)}async getSubscriptionsForUser(l,d){const b=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",userId:(0,t.extractUserId)(l),query:{...(0,i.createSingleKeyQuery)("user_id",(0,t.extractUserId)(l)),...(0,o.createPaginationQuery)(d)}});return{...(0,s.createPaginatedResultWithTotal)(b,h.HelixEventSubSubscription,this._client),totalCost:b.total_cost,maxTotalCost:b.max_total_cost}}getSubscriptionsForUserPaginated(l){const d=(0,t.extractUserId)(l);return new m.HelixPaginatedEventSubSubscriptionsRequest((0,i.createSingleKeyQuery)("user_id",d),d,this._client)}async createSubscription(l,d,b,S,R,P,f,H){const E=S.method==="webhook"||S.method==="conduit",B=E?void 0:P;if(!E&&!R)throw new Error(`Transport ${S.method} can only handle subscriptions with user context`);const j={type:l,version:d,condition:b,transport:S};H&&(j.is_batching_enabled=!0);const Z=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"POST",scopes:B,userId:(0,e.mapOptional)(R,t.extractUserId),canOverrideScopedUserContext:f,forceType:E?"app":"user",jsonBody:j});return new h.HelixEventSubSubscription(Z.data[0],this._client)}async deleteSubscription(l){await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"DELETE",query:{id:l}})}async deleteAllSubscriptions(){await this._deleteSubscriptionsWithCondition()}async deleteBrokenSubscriptions(){await this._deleteSubscriptionsWithCondition(l=>l.status!=="enabled"&&l.status!=="webhook_callback_verification_pending")}async subscribeToStreamOnlineEvents(l,d){return await this.createSubscription("stream.online","1",(0,r.createEventSubBroadcasterCondition)(l),d,l)}async subscribeToStreamOfflineEvents(l,d){return await this.createSubscription("stream.offline","1",(0,r.createEventSubBroadcasterCondition)(l),d,l)}async subscribeToChannelUpdateEvents(l,d){return await this.createSubscription("channel.update","2",(0,r.createEventSubBroadcasterCondition)(l),d,l)}async subscribeToChannelFollowEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.follow","2",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,b,["moderator:read:followers"],!0)}async subscribeToChannelSubscriptionEvents(l,d){return await this.createSubscription("channel.subscribe","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionGiftEvents(l,d){return await this.createSubscription("channel.subscription.gift","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionMessageEvents(l,d){return await this.createSubscription("channel.subscription.message","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionEndEvents(l,d){return await this.createSubscription("channel.subscription.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:subscriptions"])}async subscribeToChannelCheerEvents(l,d){return await this.createSubscription("channel.cheer","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["bits:read"])}async subscribeToChannelCharityCampaignStartEvents(l,d){return await this.createSubscription("channel.charity_campaign.start","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:charity"])}async subscribeToChannelCharityCampaignStopEvents(l,d){return await this.createSubscription("channel.charity_campaign.stop","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:charity"])}async subscribeToChannelCharityDonationEvents(l,d){return await this.createSubscription("channel.charity_campaign.donate","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:charity"])}async subscribeToChannelCharityCampaignProgressEvents(l,d){return await this.createSubscription("channel.charity_campaign.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:charity"])}async subscribeToChannelBanEvents(l,d){return await this.createSubscription("channel.ban","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:moderate"])}async subscribeToChannelUnbanEvents(l,d){return await this.createSubscription("channel.unban","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:moderate"])}async subscribeToChannelShieldModeBeginEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shield_mode.begin","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,b,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelShieldModeEndEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shield_mode.end","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,b,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelModeratorAddEvents(l,d){return await this.createSubscription("channel.moderator.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["moderation:read"])}async subscribeToChannelModeratorRemoveEvents(l,d){return await this.createSubscription("channel.moderator.remove","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["moderation:read"])}async subscribeToChannelRaidEventsFrom(l,d){return await this.createSubscription("channel.raid","1",(0,i.createSingleKeyQuery)("from_broadcaster_user_id",(0,t.extractUserId)(l)),d,l)}async subscribeToChannelRaidEventsTo(l,d){return await this.createSubscription("channel.raid","1",(0,i.createSingleKeyQuery)("to_broadcaster_user_id",(0,t.extractUserId)(l)),d,l)}async subscribeToChannelRewardAddEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward.update","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEventsForReward(l,d,b){return await this.createSubscription("channel.channel_points_custom_reward.update","1",(0,r.createEventSubRewardCondition)(l,d),b,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEventsForReward(l,d,b){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",(0,r.createEventSubRewardCondition)(l,d),b,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEventsForReward(l,d,b){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",(0,r.createEventSubRewardCondition)(l,d),b,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEventsForReward(l,d,b){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",(0,r.createEventSubRewardCondition)(l,d),b,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelAutomaticRewardRedemptionAddEvents(l,d){return await this.createSubscription("channel.channel_points_automatic_reward_redemption.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelPollBeginEvents(l,d){return await this.createSubscription("channel.poll.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollProgressEvents(l,d){return await this.createSubscription("channel.poll.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollEndEvents(l,d){return await this.createSubscription("channel.poll.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPredictionBeginEvents(l,d){return await this.createSubscription("channel.prediction.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionProgressEvents(l,d){return await this.createSubscription("channel.prediction.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionLockEvents(l,d){return await this.createSubscription("channel.prediction.lock","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionEndEvents(l,d){return await this.createSubscription("channel.prediction.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelGoalBeginEvents(l,d){return await this.createSubscription("channel.goal.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:goals"])}async subscribeToChannelGoalProgressEvents(l,d){return await this.createSubscription("channel.goal.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:goals"])}async subscribeToChannelGoalEndEvents(l,d){return await this.createSubscription("channel.goal.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:goals"])}async subscribeToChannelHypeTrainBeginEvents(l,d){return await this.createSubscription("channel.hype_train.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:hype_train"])}async subscribeToChannelHypeTrainProgressEvents(l,d){return await this.createSubscription("channel.hype_train.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:hype_train"])}async subscribeToChannelHypeTrainEndEvents(l,d){return await this.createSubscription("channel.hype_train.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:hype_train"])}async subscribeToChannelShoutoutCreateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shoutout.create","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,b,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelShoutoutReceiveEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shoutout.receive","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,b,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelAdBreakBeginEvents(l,d){return await this.createSubscription("channel.ad_break.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:ads"])}async subscribeToChannelChatClearEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.clear","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatClearUserMessagesEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.clear_user_messages","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatMessageDeleteEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.message_delete","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatNotificationEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.notification","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatMessageEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.message","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatSettingsUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat_settings.update","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelUnbanRequestCreateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.unban_request.create","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelUnbanRequestResolveEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.unban_request.resolve","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelModerateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.moderate","2",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,[],!0)}async subscribeToChannelWarningAcknowledgeEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.warning.acknowledge","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelWarningSendEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.warning.send","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelVipAddEvents(l,d){return await this.createSubscription("channel.vip.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:vips","channel:manage:vips"])}async subscribeToChannelVipRemoveEvents(l,d){return await this.createSubscription("channel.vip.remove","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:vips","channel:manage:vips"])}async subscribeToExtensionBitsTransactionCreateEvents(l,d){return await this.createSubscription("extension.bits_transaction.create","1",(0,i.createSingleKeyQuery)("extension_client_id",l),d)}async subscribeToUserAuthorizationGrantEvents(l,d){return await this.createSubscription("user.authorization.grant","1",(0,i.createSingleKeyQuery)("client_id",l),d)}async subscribeToUserAuthorizationRevokeEvents(l,d){return await this.createSubscription("user.authorization.revoke","1",(0,i.createSingleKeyQuery)("client_id",l),d)}async subscribeToUserUpdateEvents(l,d,b){return await this.createSubscription("user.update","1",(0,i.createSingleKeyQuery)("user_id",(0,t.extractUserId)(l)),d,l,b?["user:read:email"]:void 0)}async subscribeToUserWhisperMessageEvents(l,d){return await this.createSubscription("user.whisper.message","1",(0,i.createSingleKeyQuery)("user_id",(0,t.extractUserId)(l)),d,l,["user:read:whispers","user:manage:whispers"])}async subscribeToDropEntitlementGrantEvents(l,d){return await this.createSubscription("drop.entitlement.grant","1",(0,r.createEventSubDropEntitlementGrantCondition)(l),d,void 0,void 0,!1,!0)}async subscribeToAutoModMessageHoldEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("automod.message.hold","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("automod.message.update","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageHoldV2Events(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("automod.message.hold","2",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateV2Events(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("automod.message.update","2",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:manage:automod"],!0)}async subscribeToAutoModSettingsUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("automod.settings.update","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:automod_settings"],!0)}async subscribeToAutoModTermsUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("automod.terms.update","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:manage:automod"],!0)}async subscribeToChannelChatUserMessageHoldEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.user_message_hold","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatUserMessageUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.user_message_update","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelSuspiciousUserUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.suspicious_user.update","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSuspiciousUserMessageEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.suspicious_user.message","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSharedChatSessionBeginEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shared_chat.begin","1",(0,r.createEventSubBroadcasterCondition)(b),d,b)}async subscribeToChannelSharedChatSessionUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shared_chat.update","1",(0,r.createEventSubBroadcasterCondition)(b),d,b)}async subscribeToChannelSharedChatSessionEndEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shared_chat.end","1",(0,r.createEventSubBroadcasterCondition)(b),d,b)}async getConduits(){return(await this._client.callApi({type:"helix",url:"eventsub/conduits"})).data.map(d=>new w.HelixEventSubConduit(d,this._client))}async createConduit(l){const d=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"POST",query:{...(0,i.createSingleKeyQuery)("shard_count",l.toString())}});return new w.HelixEventSubConduit(d.data[0],this._client)}async updateConduit(l,d){const b=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"PATCH",query:(0,r.createEventSubConduitUpdateCondition)(l,d)});return new w.HelixEventSubConduit(b.data[0],this._client)}async deleteConduit(l){await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"DELETE",query:{...(0,i.createSingleKeyQuery)("id",l)}})}async getConduitShards(l,d,b){const S=await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",query:{...(0,r.createEventSubConduitCondition)(l,d),...(0,o.createPaginationQuery)(b)}});return{...(0,s.createPaginatedResult)(S,y.HelixEventSubConduitShard,this._client)}}getConduitShardsPaginated(l,d){return new a.HelixPaginatedRequest({url:"eventsub/conduits/shards",query:(0,r.createEventSubConduitCondition)(l,d)},this._client,b=>new y.HelixEventSubConduitShard(b))}async updateConduitShards(l,d){return(await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",method:"PATCH",jsonBody:(0,r.createEventSubConduitShardsUpdateCondition)(l,d)})).data.map(S=>new y.HelixEventSubConduitShard(S))}async _deleteSubscriptionsWithCondition(l){const d=this.getSubscriptionsPaginated();for await(const b of d)(!l||l(b))&&await b.unsubscribe()}};return an.HelixEventSubApi=_,an.HelixEventSubApi=_=n.__decorate([(0,t.rtfm)("api","HelixEventSubApi")],_),an}var cn={},gt={},Wm;function CS(){if(Wm)return gt;Wm=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.createExtensionTransactionQuery=gt.createExtensionProductBody=gt.createReleasedExtensionFilter=void 0;function n(r,i){return{extension_id:r,extension_version:i}}gt.createReleasedExtensionFilter=n;function e(r){return{sku:r.sku,cost:{amount:r.cost,type:"bits"},display_name:r.displayName,in_development:r.inDevelopment,expiration:r.expirationDate,is_broadcast:r.broadcast}}gt.createExtensionProductBody=e;function t(r,i){return{extension_id:r,id:i.transactionIds}}return gt.createExtensionTransactionQuery=t,gt}var dn={},Vm;function Xy(){if(Vm)return dn;Vm=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.HelixChannelReference=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].broadcaster_id}get displayName(){return this[t.rawDataSymbol].broadcaster_name}async getChannel(){return(0,t.checkRelationAssertion)(await this._client.channels.getChannelInfoById(this[t.rawDataSymbol].broadcaster_id))}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get gameId(){return this[t.rawDataSymbol].game_id}get gameName(){return this[t.rawDataSymbol].game_name}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get title(){return this[t.rawDataSymbol].title}};return dn.HelixChannelReference=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),dn.HelixChannelReference=r=n.__decorate([(0,t.rtfm)("api","HelixChannelReference","id")],r),dn}var hn={},zm;function Jy(){if(zm)return hn;zm=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.HelixExtensionBitsProduct=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{get sku(){return this[t.rawDataSymbol].sku}get cost(){return this[t.rawDataSymbol].cost.amount}get displayName(){return this[t.rawDataSymbol].display_name}get inDevelopment(){return this[t.rawDataSymbol].in_development}get isBroadcast(){return this[t.rawDataSymbol].is_broadcast}get expirationDate(){return(0,e.mapNullable)(this[t.rawDataSymbol].expiration,a=>new Date(a))}};return hn.HelixExtensionBitsProduct=r,hn.HelixExtensionBitsProduct=r=n.__decorate([(0,t.rtfm)("api","HelixExtensionBitsProduct","sku")],r),hn}var pn={},Km;function Yy(){if(Km)return pn;Km=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.HelixExtensionTransaction=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get transactionDate(){return new Date(this[t.rawDataSymbol].timestamp)}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_name}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get productType(){return this[t.rawDataSymbol].product_type}get productSku(){return this[t.rawDataSymbol].product_data.sku}get productCost(){return this[t.rawDataSymbol].product_data.cost.amount}get productDisplayName(){return this[t.rawDataSymbol].product_data.displayName}get productInDevelopment(){return this[t.rawDataSymbol].product_data.inDevelopment}};return pn.HelixExtensionTransaction=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),pn.HelixExtensionTransaction=r=n.__decorate([(0,t.rtfm)("api","HelixExtensionTransaction","id")],r),pn}var Xm;function Zy(){if(Xm)return cn;Xm=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.HelixExtensionsApi=void 0;const n=M,e=q(),t=CS(),r=et(),i=ke(),a=Fe(),s=Me(),o=ve(),u=Xy(),h=Jy(),m=Yy();let w=class extends o.BaseApi{async getReleasedExtension(_,p){const l=await this._client.callApi({type:"helix",url:"extensions/released",query:(0,t.createReleasedExtensionFilter)(_,p)});return new e.HelixExtension(l.data[0])}async getLiveChannelsWithExtension(_,p){const l=await this._client.callApi({type:"helix",url:"extensions/live",query:{...(0,r.createSingleKeyQuery)("extension_id",_),...(0,s.createPaginationQuery)(p)}});return(0,a.createPaginatedResult)(l,u.HelixChannelReference,this._client)}getLiveChannelsWithExtensionPaginated(_){return new i.HelixPaginatedRequest({url:"extensions/live",query:(0,r.createSingleKeyQuery)("extension_id",_)},this._client,p=>new u.HelixChannelReference(p,this._client))}async getExtensionBitsProducts(_){return(await this._client.callApi({type:"helix",url:"bits/extensions",forceType:"app",query:(0,r.createSingleKeyQuery)("should_include_all",_?.toString())})).data.map(l=>new h.HelixExtensionBitsProduct(l))}async putExtensionBitsProduct(_){const p=await this._client.callApi({type:"helix",url:"bits/extensions",method:"PUT",forceType:"app",jsonBody:(0,t.createExtensionProductBody)(_)});return new h.HelixExtensionBitsProduct(p.data[0])}async getExtensionTransactions(_,p={}){const l=await this._client.callApi({type:"helix",url:"extensions/transactions",forceType:"app",query:{...(0,t.createExtensionTransactionQuery)(_,p),...(0,s.createPaginationQuery)(p)}});return(0,a.createPaginatedResult)(l,m.HelixExtensionTransaction,this._client)}getExtensionTransactionsPaginated(_,p={}){return new i.HelixPaginatedRequest({url:"extensions/transactions",forceType:"app",query:(0,t.createExtensionTransactionQuery)(_,p)},this._client,l=>new m.HelixExtensionTransaction(l,this._client))}};return cn.HelixExtensionsApi=w,cn.HelixExtensionsApi=w=n.__decorate([(0,e.rtfm)("api","HelixExtensionsApi")],w),cn}var mn={},_n={},Jm;function ad(){if(Jm)return _n;Jm=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.HelixGame=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get name(){return this[t.rawDataSymbol].name}get boxArtUrl(){return this[t.rawDataSymbol].box_art_url}get igdbId(){return this[t.rawDataSymbol].igdb_id||null}getBoxArtUrl(a,s){return this[t.rawDataSymbol].box_art_url.replace("{width}",a.toString()).replace("{height}",s.toString())}async getStreams(a){return await this._client.streams.getStreams({...a,game:this[t.rawDataSymbol].id})}getStreamsPaginated(){return this._client.streams.getStreamsPaginated({game:this[t.rawDataSymbol].id})}};return _n.HelixGame=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),_n.HelixGame=r=n.__decorate([(0,t.rtfm)("api","HelixGame","id")],r),_n}var Ym;function eb(){if(Ym)return mn;Ym=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.HelixGameApi=void 0;const n=M,e=W(),t=q(),r=ar(),i=ke(),a=Fe(),s=Me(),o=ve(),u=ad();let h=class extends o.BaseApi{constructor(){super(...arguments),this._getGameByIdBatcher=new r.HelixRequestBatcher({url:"games"},"id","id",this._client,w=>new u.HelixGame(w,this._client)),this._getGameByNameBatcher=new r.HelixRequestBatcher({url:"games"},"name","name",this._client,w=>new u.HelixGame(w,this._client)),this._getGameByIgdbIdBatcher=new r.HelixRequestBatcher({url:"games"},"igdb_id","igdb_id",this._client,w=>new u.HelixGame(w,this._client))}async getGamesByIds(w){return await this._getGames("id",w)}async getGamesByNames(w){return await this._getGames("name",w)}async getGamesByIgdbIds(w){return await this._getGames("igdb_id",w)}async getGameById(w){var y;return(y=(await this._getGames("id",[w]))[0])!==null&&y!==void 0?y:null}async getGameByName(w){var y;return(y=(await this._getGames("name",[w]))[0])!==null&&y!==void 0?y:null}async getGameByIgdbId(w){var y;return(y=(await this._getGames("igdb_id",[w]))[0])!==null&&y!==void 0?y:null}async getGameByIdBatched(w){return await this._getGameByIdBatcher.request(w)}async getGameByNameBatched(w){return await this._getGameByNameBatcher.request(w)}async getGameByIgdbIdBatched(w){return await this._getGameByIgdbIdBatcher.request(w)}async getTopGames(w){const y=await this._client.callApi({type:"helix",url:"games/top",query:(0,s.createPaginationQuery)(w)});return(0,a.createPaginatedResult)(y,u.HelixGame,this._client)}getTopGamesPaginated(){return new i.HelixPaginatedRequest({url:"games/top"},this._client,w=>new u.HelixGame(w,this._client))}async _getGames(w,y){return y.length?(await this._client.callApi({type:"helix",url:"games",query:{[w]:y}})).data.map(p=>new u.HelixGame(p,this._client)):[]}};return mn.HelixGameApi=h,n.__decorate([(0,e.Enumerable)(!1)],h.prototype,"_getGameByIdBatcher",void 0),n.__decorate([(0,e.Enumerable)(!1)],h.prototype,"_getGameByNameBatcher",void 0),n.__decorate([(0,e.Enumerable)(!1)],h.prototype,"_getGameByIgdbIdBatcher",void 0),mn.HelixGameApi=h=n.__decorate([(0,t.rtfm)("api","HelixGameApi")],h),mn}var gn={},fn={},Zm;function tb(){if(Zm)return fn;Zm=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.HelixGoal=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get type(){return this[t.rawDataSymbol].type}get description(){return this[t.rawDataSymbol].description}get currentAmount(){return this[t.rawDataSymbol].current_amount}get targetAmount(){return this[t.rawDataSymbol].target_amount}get creationDate(){return this[t.rawDataSymbol].created_at}};return fn.HelixGoal=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),fn.HelixGoal=r=n.__decorate([(0,t.rtfm)("api","HelixGoal","id")],r),fn}var e_;function rb(){if(e_)return gn;e_=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.HelixGoalApi=void 0;const n=M,e=Re(),t=q(),r=ve(),i=tb();let a=class extends r.BaseApi{async getGoals(o){return(await this._client.callApi({type:"helix",url:"goals",userId:(0,t.extractUserId)(o),scopes:["channel:read:goals"],query:(0,e.createBroadcasterQuery)(o)})).data.map(h=>new i.HelixGoal(h,this._client))}};return gn.HelixGoalApi=a,gn.HelixGoalApi=a=n.__decorate([(0,t.rtfm)("api","HelixGoalApi")],a),gn}var rs={},yn={},bn={},t_;function nb(){if(t_)return bn;t_=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.HelixHypeTrainContribution=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user))}get type(){return this[t.rawDataSymbol].type}get total(){return this[t.rawDataSymbol].total}};return bn.HelixHypeTrainContribution=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),bn.HelixHypeTrainContribution=r=n.__decorate([(0,t.rtfm)("api","HelixHypeTrainContribution","userId")],r),bn}var r_;function ib(){if(r_)return yn;r_=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.HelixHypeTrainEvent=void 0;const n=M,e=W(),t=q(),r=nb();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get eventId(){return this[t.rawDataSymbol].id}get eventType(){return this[t.rawDataSymbol].event_type}get eventDate(){return new Date(this[t.rawDataSymbol].event_timestamp)}get eventVersion(){return this[t.rawDataSymbol].version}get id(){return this[t.rawDataSymbol].event_data.id}get broadcasterId(){return this[t.rawDataSymbol].event_data.broadcaster_id}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].event_data.broadcaster_id))}get level(){return this[t.rawDataSymbol].event_data.level}get startDate(){return new Date(this[t.rawDataSymbol].event_data.started_at)}get expiryDate(){return new Date(this[t.rawDataSymbol].event_data.expires_at)}get cooldownDate(){return new Date(this[t.rawDataSymbol].event_data.cooldown_end_time)}get total(){return this[t.rawDataSymbol].event_data.total}get goal(){return this[t.rawDataSymbol].event_data.goal}get lastContribution(){return new r.HelixHypeTrainContribution(this[t.rawDataSymbol].event_data.last_contribution,this._client)}get topContributions(){return this[t.rawDataSymbol].event_data.top_contributions.map(s=>new r.HelixHypeTrainContribution(s,this._client))}};return yn.HelixHypeTrainEvent=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),yn.HelixHypeTrainEvent=i=n.__decorate([(0,t.rtfm)("api","HelixHypeTrainEvent","id")],i),yn}var n_;function ab(){if(n_)return rs;n_=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.HelixHypeTrainApi=void 0;const n=Re(),e=q(),t=ke(),r=Fe(),i=Me(),a=ve(),s=ib();class o extends a.BaseApi{async getHypeTrainEventsForBroadcaster(h,m){const w=await this._client.callApi({type:"helix",url:"hypetrain/events",userId:(0,e.extractUserId)(h),scopes:["channel:read:hype_train"],query:{...(0,n.createBroadcasterQuery)(h),...(0,i.createPaginationQuery)(m)}});return(0,r.createPaginatedResult)(w,s.HelixHypeTrainEvent,this._client)}getHypeTrainEventsForBroadcasterPaginated(h){return new t.HelixPaginatedRequest({url:"hypetrain/events",userId:(0,e.extractUserId)(h),scopes:["channel:read:hype_train"],query:(0,n.createBroadcasterQuery)(h)},this._client,m=>new s.HelixHypeTrainEvent(m,this._client))}}return rs.HelixHypeTrainApi=o,rs}var vn={},Ae={},i_;function ES(){if(i_)return Ae;i_=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.createWarnUserBody=Ae.createCheckAutoModStatusBody=Ae.createUpdateShieldModeStatusBody=Ae.createBanUserBody=Ae.createAutoModSettingsBody=Ae.createAutoModProcessBody=Ae.createResolveUnbanRequestQuery=Ae.createModeratorModifyQuery=Ae.createModerationUserListQuery=void 0;const n=q();function e(m,w){return{broadcaster_id:(0,n.extractUserId)(m),user_id:w?.userId}}Ae.createModerationUserListQuery=e;function t(m,w){return{broadcaster_id:(0,n.extractUserId)(m),user_id:(0,n.extractUserId)(w)}}Ae.createModeratorModifyQuery=t;function r(m,w,y,_,p){return{unban_request_id:y,broadcaster_id:(0,n.extractUserId)(m),moderator_id:(0,n.extractUserId)(w),status:_?"approved":"denied",resolution_text:p}}Ae.createResolveUnbanRequestQuery=r;function i(m,w,y){return{user_id:(0,n.extractUserId)(m),msg_id:w,action:y?"ALLOW":"DENY"}}Ae.createAutoModProcessBody=i;function a(m){return{overall_level:m.overallLevel,aggression:m.aggression,bullying:m.bullying,disability:m.disability,misogyny:m.misogyny,race_ethnicity_or_religion:m.raceEthnicityOrReligion,sex_based_terms:m.sexBasedTerms,sexuality_sex_or_gender:m.sexualitySexOrGender,swearing:m.swearing}}Ae.createAutoModSettingsBody=a;function s(m){return{data:{duration:m.duration,reason:m.reason,user_id:(0,n.extractUserId)(m.user)}}}Ae.createBanUserBody=s;function o(m){return{is_active:m}}Ae.createUpdateShieldModeStatusBody=o;function u(m){return{data:m.map(w=>({msg_id:w.messageId,msg_text:w.messageText}))}}Ae.createCheckAutoModStatusBody=u;function h(m,w){return{data:{user_id:(0,n.extractUserId)(m),reason:w}}}return Ae.createWarnUserBody=h,Ae}var wn={},a_;function HS(){if(a_)return wn;a_=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.HelixAutoModSettings=void 0;const n=M,e=q();let t=class extends e.DataObject{get broadcasterId(){return this[e.rawDataSymbol].broadcaster_id}get moderatorId(){return this[e.rawDataSymbol].moderator_id}get overallLevel(){return this[e.rawDataSymbol].overall_level?this[e.rawDataSymbol].overall_level:null}get disability(){return this[e.rawDataSymbol].disability}get aggression(){return this[e.rawDataSymbol].aggression}get sexualitySexOrGender(){return this[e.rawDataSymbol].sexuality_sex_or_gender}get misogyny(){return this[e.rawDataSymbol].misogyny}get bullying(){return this[e.rawDataSymbol].bullying}get swearing(){return this[e.rawDataSymbol].swearing}get raceEthnicityOrReligion(){return this[e.rawDataSymbol].race_ethnicity_or_religion}get sexBasedTerms(){return this[e.rawDataSymbol].sex_based_terms}};return wn.HelixAutoModSettings=t,wn.HelixAutoModSettings=t=n.__decorate([(0,e.rtfm)("api","HelixAutoModSettings","broadcasterId")],t),wn}var xn={},s_;function AS(){if(s_)return xn;s_=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.HelixAutoModStatus=void 0;const n=M,e=q();let t=class extends e.DataObject{get messageId(){return this[e.rawDataSymbol].msg_id}get isPermitted(){return this[e.rawDataSymbol].is_permitted}};return xn.HelixAutoModStatus=t,xn.HelixAutoModStatus=t=n.__decorate([(0,e.rtfm)("api","HelixAutoModStatus","messageId")],t),xn}var Sn={},Cn={},o_;function sd(){if(o_)return Cn;o_=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.HelixBanUser=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s,o){super(a),this._expiryTimestamp=s,this._client=o}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get expiryDate(){return(0,e.mapNullable)(this._expiryTimestamp,a=>new Date(a))}get moderatorId(){return this[t.rawDataSymbol].moderator_id}async getModerator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].moderator_id))}get userId(){return this[t.rawDataSymbol].user_id}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return Cn.HelixBanUser=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_expiryTimestamp",void 0),Cn.HelixBanUser=r=n.__decorate([(0,t.rtfm)("api","HelixBanUser","userId")],r),Cn}var l_;function sb(){if(l_)return Sn;l_=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.HelixBan=void 0;const n=M,e=q(),t=sd();let r=class extends t.HelixBanUser{constructor(a,s){super(a,a.expires_at||null,s)}get userName(){return this[e.rawDataSymbol].user_login}get userDisplayName(){return this[e.rawDataSymbol].user_name}get moderatorName(){return this[e.rawDataSymbol].moderator_login}get moderatorDisplayName(){return this[e.rawDataSymbol].moderator_name}get reason(){return this[e.rawDataSymbol].reason||null}};return Sn.HelixBan=r,Sn.HelixBan=r=n.__decorate([(0,e.rtfm)("api","HelixBan","userId")],r),Sn}var En={},u_;function ob(){if(u_)return En;u_=1,Object.defineProperty(En,"__esModule",{value:!0}),En.HelixBlockedTerm=void 0;const n=M,e=q();let t=class extends e.DataObject{get broadcasterId(){return this[e.rawDataSymbol].broadcaster_id}get creationDate(){return new Date(this[e.rawDataSymbol].created_at)}get expirationDate(){return this[e.rawDataSymbol].expires_at?new Date(this[e.rawDataSymbol].expires_at):null}get id(){return this[e.rawDataSymbol].id}get moderatorId(){return this[e.rawDataSymbol].moderator_id}get text(){return this[e.rawDataSymbol].text}get updatedDate(){return new Date(this[e.rawDataSymbol].updated_at)}};return En.HelixBlockedTerm=t,En.HelixBlockedTerm=t=n.__decorate([(0,e.rtfm)("api","HelixBlockedTerm","id")],t),En}var Hn={},c_;function lb(){if(c_)return Hn;c_=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.HelixModeratedChannel=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].broadcaster_id}get name(){return this[t.rawDataSymbol].broadcaster_login}get displayName(){return this[t.rawDataSymbol].broadcaster_name}async getChannel(){return(0,t.checkRelationAssertion)(await this._client.channels.getChannelInfoById(this[t.rawDataSymbol].broadcaster_id))}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}};return Hn.HelixModeratedChannel=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Hn.HelixModeratedChannel=r=n.__decorate([(0,t.rtfm)("api","HelixModeratedChannel","id")],r),Hn}var An={},d_;function ub(){if(d_)return An;d_=1,Object.defineProperty(An,"__esModule",{value:!0}),An.HelixModerator=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return An.HelixModerator=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),An.HelixModerator=r=n.__decorate([(0,t.rtfm)("api","HelixModerator","userId")],r),An}var Rn={},h_;function cb(){if(h_)return Rn;h_=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.HelixShieldModeStatus=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get isActive(){return this[t.rawDataSymbol].is_active}get moderatorId(){return this[t.rawDataSymbol].moderator_id}get moderatorName(){return this[t.rawDataSymbol].moderator_login}get moderatorDisplayName(){return this[t.rawDataSymbol].moderator_name}async getModerator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].moderator_id))}get lastActivationDate(){return this[t.rawDataSymbol].last_activated_at===""?null:new Date(this[t.rawDataSymbol].last_activated_at)}};return Rn.HelixShieldModeStatus=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Rn.HelixShieldModeStatus=r=n.__decorate([(0,t.rtfm)("api","HelixShieldModeStatus")],r),Rn}var Tn={},p_;function db(){if(p_)return Tn;p_=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.HelixUnbanRequest=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_id}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get moderatorId(){return this[t.rawDataSymbol].moderator_id}get moderatorName(){return this[t.rawDataSymbol].moderator_login}get moderatorDisplayName(){return this[t.rawDataSymbol].moderator_name}async getModerator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].moderator_id))}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get message(){return this[t.rawDataSymbol].text}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get resolutionMessage(){return this[t.rawDataSymbol].resolution_text||null}get resolutionDate(){return(0,e.mapNullable)(this[t.rawDataSymbol].resolved_at,a=>new Date(a))}};return Tn.HelixUnbanRequest=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Tn.HelixUnbanRequest=r=n.__decorate([(0,t.rtfm)("api","HelixUnbanRequest","id")],r),Tn}var In={},m_;function hb(){if(m_)return In;m_=1,Object.defineProperty(In,"__esModule",{value:!0}),In.HelixWarning=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get broadcasterId(){return this[t.rawDataSymbol].user_id}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get moderatorId(){return this[t.rawDataSymbol].moderator_id}async getModerator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].moderator_id))}get userId(){return this[t.rawDataSymbol].user_id}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get reason(){return this[t.rawDataSymbol].reason}};return In.HelixWarning=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),In.HelixWarning=r=n.__decorate([(0,t.rtfm)("api","HelixWarning","userId")],r),In}var __;function pb(){if(__)return vn;__=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.HelixModerationApi=void 0;const n=M,e=Re(),t=q(),r=et(),i=ES(),a=ke(),s=Fe(),o=Me(),u=ve(),h=HS(),m=AS(),w=sb(),y=sd(),_=ob(),p=lb(),l=ub(),d=cb(),b=db(),S=hb();let R=class extends u.BaseApi{async getBannedUsers(f,H){const E=await this._client.callApi({type:"helix",url:"moderation/banned",userId:(0,t.extractUserId)(f),scopes:["moderation:read"],query:{...(0,i.createModerationUserListQuery)(f,H),...(0,o.createPaginationQuery)(H)}});return(0,s.createPaginatedResult)(E,w.HelixBan,this._client)}getBannedUsersPaginated(f){return new a.HelixPaginatedRequest({url:"moderation/banned",userId:(0,t.extractUserId)(f),scopes:["moderation:read"],query:(0,e.createBroadcasterQuery)(f)},this._client,H=>new w.HelixBan(H,this._client),50)}async checkUserBan(f,H){const E=(0,t.extractUserId)(H);return(await this.getBannedUsers(f,{userId:E})).data.some(j=>j.userId===E)}async getModerators(f,H){const E=await this._client.callApi({type:"helix",url:"moderation/moderators",userId:(0,t.extractUserId)(f),scopes:["moderation:read","channel:manage:moderators"],query:{...(0,i.createModerationUserListQuery)(f,H),...(0,o.createPaginationQuery)(H)}});return(0,s.createPaginatedResult)(E,l.HelixModerator,this._client)}getModeratorsPaginated(f){return new a.HelixPaginatedRequest({url:"moderation/moderators",userId:(0,t.extractUserId)(f),scopes:["moderation:read","channel:manage:moderators"],query:(0,e.createBroadcasterQuery)(f)},this._client,H=>new l.HelixModerator(H,this._client))}async getModeratedChannels(f,H){const E=(0,t.extractUserId)(f),B=await this._client.callApi({type:"helix",url:"moderation/channels",userId:E,scopes:["user:read:moderated_channels"],query:{...(0,r.createSingleKeyQuery)("user_id",E),...(0,o.createPaginationQuery)(H)}});return(0,s.createPaginatedResult)(B,p.HelixModeratedChannel,this._client)}getModeratedChannelsPaginated(f){const H=(0,t.extractUserId)(f);return new a.HelixPaginatedRequest({url:"moderation/channels",userId:H,scopes:["user:read:moderated_channels"],query:(0,r.createSingleKeyQuery)("user_id",H)},this._client,E=>new p.HelixModeratedChannel(E,this._client))}async checkUserMod(f,H){const E=(0,t.extractUserId)(H);return(await this.getModerators(f,{userId:E})).data.some(j=>j.userId===E)}async addModerator(f,H){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"POST",userId:(0,t.extractUserId)(f),scopes:["channel:manage:moderators"],query:(0,i.createModeratorModifyQuery)(f,H)})}async removeModerator(f,H){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"DELETE",userId:(0,t.extractUserId)(f),scopes:["channel:manage:moderators"],query:(0,i.createModeratorModifyQuery)(f,H)})}async checkAutoModStatus(f,H){return(await this._client.callApi({type:"helix",url:"moderation/enforcements/status",method:"POST",userId:(0,t.extractUserId)(f),scopes:["moderation:read"],query:(0,e.createBroadcasterQuery)(f),jsonBody:(0,i.createCheckAutoModStatusBody)(H)})).data.map(B=>new m.HelixAutoModStatus(B))}async processHeldAutoModMessage(f,H,E){await this._client.callApi({type:"helix",url:"moderation/automod/message",method:"POST",userId:(0,t.extractUserId)(f),scopes:["moderator:manage:automod"],jsonBody:(0,i.createAutoModProcessBody)(f,H,E)})}async getAutoModSettings(f){const H=(0,t.extractUserId)(f);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",userId:H,scopes:["moderator:read:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(H)})).data.map(B=>new h.HelixAutoModSettings(B))}async updateAutoModSettings(f,H){const E=(0,t.extractUserId)(f);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",method:"PUT",userId:E,scopes:["moderator:manage:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(E),jsonBody:(0,i.createAutoModSettingsBody)(H)})).data.map(j=>new h.HelixAutoModSettings(j))}async banUser(f,H){const E=(0,t.extractUserId)(f);return(await this._client.callApi({type:"helix",url:"moderation/bans",method:"POST",userId:E,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(E),jsonBody:(0,i.createBanUserBody)(H)})).data.map(j=>new y.HelixBanUser(j,j.end_time,this._client))}async unbanUser(f,H){const E=(0,t.extractUserId)(f);await this._client.callApi({type:"helix",url:"moderation/bans",method:"DELETE",userId:E,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(E),...(0,r.createSingleKeyQuery)("user_id",(0,t.extractUserId)(H))}})}async getBlockedTerms(f,H){const E=(0,t.extractUserId)(f),B=await this._client.callApi({type:"helix",url:"moderation/blocked_terms",userId:E,scopes:["moderator:read:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(E),...(0,o.createPaginationQuery)(H)}});return(0,s.createPaginatedResult)(B,_.HelixBlockedTerm,this._client)}async addBlockedTerm(f,H){const E=(0,t.extractUserId)(f);return(await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"POST",userId:E,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(E),jsonBody:{text:H}})).data.map(j=>new _.HelixBlockedTerm(j))}async removeBlockedTerm(f,H,E){const B=(0,t.extractUserId)(f);await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"DELETE",userId:B,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(B),id:E}})}async deleteChatMessages(f,H){const E=(0,t.extractUserId)(f);await this._client.callApi({type:"helix",url:"moderation/chat",method:"DELETE",userId:E,scopes:["moderator:manage:chat_messages"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(E),...(0,r.createSingleKeyQuery)("message_id",H)}})}async getShieldModeStatus(f){const H=(0,t.extractUserId)(f),E=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"GET",userId:H,scopes:["moderator:read:shield_mode","moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(H)});return new d.HelixShieldModeStatus(E.data[0],this._client)}async updateShieldModeStatus(f,H){const E=(0,t.extractUserId)(f),B=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"PUT",userId:E,scopes:["moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(E),jsonBody:(0,i.createUpdateShieldModeStatusBody)(H)});return new d.HelixShieldModeStatus(B.data[0],this._client)}async getUnbanRequests(f,H,E){const B=(0,t.extractUserId)(f),j=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"GET",userId:B,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(B),...(0,r.createSingleKeyQuery)("status",H),...(0,o.createPaginationQuery)(E)}});return(0,s.createPaginatedResult)(j,b.HelixUnbanRequest,this._client)}getUnbanRequestsPaginated(f,H){const E=(0,t.extractUserId)(f);return new a.HelixPaginatedRequest({url:"moderation/unban_requests",method:"GET",userId:E,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(E),...(0,r.createSingleKeyQuery)("status",H)}},this._client,B=>new b.HelixUnbanRequest(B,this._client))}async resolveUnbanRequest(f,H,E,B){const j=(0,t.extractUserId)(f),Z=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"PATCH",userId:j,scopes:["moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:(0,i.createResolveUnbanRequestQuery)(j,this._getUserContextIdWithDefault(j),H,E,B?.slice(0,500))});return new b.HelixUnbanRequest(Z.data[0],this._client)}async warnUser(f,H,E){const B=(0,t.extractUserId)(f),j=await this._client.callApi({type:"helix",url:"moderation/warnings",method:"POST",userId:B,scopes:["moderator:manage:warnings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(B),jsonBody:(0,i.createWarnUserBody)(H,E.slice(0,500))});return new S.HelixWarning(j.data[0],this._client)}_createModeratorActionQuery(f){return(0,r.createModeratorActionQuery)(f,this._getUserContextIdWithDefault(f))}};return vn.HelixModerationApi=R,vn.HelixModerationApi=R=n.__decorate([(0,t.rtfm)("api","HelixModerationApi")],R),vn}var Pn={},Wt={},g_;function RS(){if(g_)return Wt;g_=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.createPollEndBody=Wt.createPollBody=void 0;const n=q();function e(r,i){var a;return{broadcaster_id:(0,n.extractUserId)(r),title:i.title,choices:i.choices.map(s=>({title:s})),duration:i.duration,channel_points_voting_enabled:i.channelPointsPerVote!=null,channel_points_per_vote:(a=i.channelPointsPerVote)!==null&&a!==void 0?a:0}}Wt.createPollBody=e;function t(r,i,a){return{broadcaster_id:(0,n.extractUserId)(r),id:i,status:a?"TERMINATED":"ARCHIVED"}}return Wt.createPollEndBody=t,Wt}var Dn={},Bn={},f_;function mb(){if(f_)return Bn;f_=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.HelixPollChoice=void 0;const n=M,e=q();let t=class extends e.DataObject{get id(){return this[e.rawDataSymbol].id}get title(){return this[e.rawDataSymbol].title}get totalVotes(){return this[e.rawDataSymbol].votes}get channelPointsVotes(){return this[e.rawDataSymbol].channel_points_votes}};return Bn.HelixPollChoice=t,Bn.HelixPollChoice=t=n.__decorate([(0,e.rtfm)("api","HelixPollChoice","id")],t),Bn}var y_;function _b(){if(y_)return Dn;y_=1,Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.HelixPoll=void 0;const n=M,e=W(),t=q(),r=mb();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get title(){return this[t.rawDataSymbol].title}get isChannelPointsVotingEnabled(){return this[t.rawDataSymbol].channel_points_voting_enabled}get channelPointsPerVote(){return this[t.rawDataSymbol].channel_points_per_vote}get status(){return this[t.rawDataSymbol].status}get durationInSeconds(){return this[t.rawDataSymbol].duration}get startDate(){return new Date(this[t.rawDataSymbol].started_at)}get endDate(){return new Date(this.startDate.getTime()+this[t.rawDataSymbol].duration*1e3)}get choices(){return this[t.rawDataSymbol].choices.map(s=>new r.HelixPollChoice(s))}};return Dn.HelixPoll=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Dn.HelixPoll=i=n.__decorate([(0,t.rtfm)("api","HelixPoll","id")],i),Dn}var b_;function gb(){if(b_)return Pn;b_=1,Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.HelixPollApi=void 0;const n=M,e=Re(),t=q(),r=et(),i=RS(),a=ke(),s=Fe(),o=Me(),u=ve(),h=_b();let m=class extends u.BaseApi{async getPolls(y,_){const p=await this._client.callApi({type:"helix",url:"polls",userId:(0,t.extractUserId)(y),scopes:["channel:read:polls","channel:manage:polls"],query:{...(0,e.createBroadcasterQuery)(y),...(0,o.createPaginationQuery)(_)}});return(0,s.createPaginatedResult)(p,h.HelixPoll,this._client)}getPollsPaginated(y){return new a.HelixPaginatedRequest({url:"polls",userId:(0,t.extractUserId)(y),scopes:["channel:read:polls","channel:manage:polls"],query:(0,e.createBroadcasterQuery)(y)},this._client,_=>new h.HelixPoll(_,this._client),20)}async getPollsByIds(y,_){return _.length?(await this._client.callApi({type:"helix",url:"polls",userId:(0,t.extractUserId)(y),scopes:["channel:read:polls","channel:manage:polls"],query:(0,r.createGetByIdsQuery)(y,_)})).data.map(l=>new h.HelixPoll(l,this._client)):[]}async getPollById(y,_){const p=await this.getPollsByIds(y,[_]);return p.length?p[0]:null}async createPoll(y,_){const p=await this._client.callApi({type:"helix",url:"polls",method:"POST",userId:(0,t.extractUserId)(y),scopes:["channel:manage:polls"],jsonBody:(0,i.createPollBody)(y,_)});return new h.HelixPoll(p.data[0],this._client)}async endPoll(y,_,p=!0){const l=await this._client.callApi({type:"helix",url:"polls",method:"PATCH",userId:(0,t.extractUserId)(y),scopes:["channel:manage:polls"],jsonBody:(0,i.createPollEndBody)(y,_,p)});return new h.HelixPoll(l.data[0],this._client)}};return Pn.HelixPollApi=m,Pn.HelixPollApi=m=n.__decorate([(0,t.rtfm)("api","HelixPollApi")],m),Pn}var On={},Vt={},v_;function TS(){if(v_)return Vt;v_=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.createEndPredictionBody=Vt.createPredictionBody=void 0;const n=q();function e(r,i){return{broadcaster_id:(0,n.extractUserId)(r),title:i.title,outcomes:i.outcomes.map(a=>({title:a})),prediction_window:i.autoLockAfter}}Vt.createPredictionBody=e;function t(r,i,a,s){return{broadcaster_id:(0,n.extractUserId)(r),id:i,status:a,winning_outcome_id:s}}return Vt.createEndPredictionBody=t,Vt}var Un={},qn={},kn={},w_;function fb(){if(w_)return kn;w_=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.HelixPredictor=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return await this._client.users.getUserById(this[t.rawDataSymbol].user_id)}get channelPointsUsed(){return this[t.rawDataSymbol].channel_points_used}get channelPointsWon(){return this[t.rawDataSymbol].channel_points_won}};return kn.HelixPredictor=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),kn.HelixPredictor=r=n.__decorate([(0,t.rtfm)("api","HelixPredictor","userId")],r),kn}var x_;function yb(){if(x_)return qn;x_=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.HelixPredictionOutcome=void 0;const n=M,e=W(),t=q(),r=fb();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[t.rawDataSymbol].id}get title(){return this[t.rawDataSymbol].title}get users(){return this[t.rawDataSymbol].users}get totalChannelPoints(){return this[t.rawDataSymbol].channel_points}get color(){return this[t.rawDataSymbol].color}get topPredictors(){var s,o;return(o=(s=this[t.rawDataSymbol].top_predictors)===null||s===void 0?void 0:s.map(u=>new r.HelixPredictor(u,this._client)))!==null&&o!==void 0?o:[]}};return qn.HelixPredictionOutcome=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),qn.HelixPredictionOutcome=i=n.__decorate([(0,t.rtfm)("api","HelixPredictionOutcome","id")],i),qn}var S_;function bb(){if(S_)return Un;S_=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.HelixPrediction=void 0;const n=M,e=W(),t=q(),r=yb();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get title(){return this[t.rawDataSymbol].title}get status(){return this[t.rawDataSymbol].status}get autoLockAfter(){return this[t.rawDataSymbol].prediction_window}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get endDate(){return this[t.rawDataSymbol].ended_at?new Date(this[t.rawDataSymbol].ended_at):null}get lockDate(){return this[t.rawDataSymbol].locked_at?new Date(this[t.rawDataSymbol].locked_at):null}get outcomes(){return this[t.rawDataSymbol].outcomes.map(s=>new r.HelixPredictionOutcome(s,this._client))}get winningOutcomeId(){return this[t.rawDataSymbol].winning_outcome_id||null}get winningOutcome(){if(!this[t.rawDataSymbol].winning_outcome_id)return null;const s=this[t.rawDataSymbol].outcomes.find(o=>o.id===this[t.rawDataSymbol].winning_outcome_id);if(!s)throw new t.HellFreezesOverError("Winning outcome not found in outcomes array");return new r.HelixPredictionOutcome(s,this._client)}};return Un.HelixPrediction=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Un.HelixPrediction=i=n.__decorate([(0,t.rtfm)("api","HelixPrediction","id")],i),Un}var C_;function vb(){if(C_)return On;C_=1,Object.defineProperty(On,"__esModule",{value:!0}),On.HelixPredictionApi=void 0;const n=M,e=Re(),t=q(),r=et(),i=TS(),a=ke(),s=Fe(),o=Me(),u=ve(),h=bb();let m=class extends u.BaseApi{async getPredictions(y,_){const p=await this._client.callApi({type:"helix",url:"predictions",userId:(0,t.extractUserId)(y),scopes:["channel:read:predictions"],query:{...(0,e.createBroadcasterQuery)(y),...(0,o.createPaginationQuery)(_)}});return(0,s.createPaginatedResult)(p,h.HelixPrediction,this._client)}getPredictionsPaginated(y){return new a.HelixPaginatedRequest({url:"predictions",userId:(0,t.extractUserId)(y),scopes:["channel:read:predictions"],query:(0,e.createBroadcasterQuery)(y)},this._client,_=>new h.HelixPrediction(_,this._client),20)}async getPredictionsByIds(y,_){return _.length?(await this._client.callApi({type:"helix",url:"predictions",userId:(0,t.extractUserId)(y),scopes:["channel:read:predictions"],query:(0,r.createGetByIdsQuery)(y,_)})).data.map(l=>new h.HelixPrediction(l,this._client)):[]}async getPredictionById(y,_){const p=await this.getPredictionsByIds(y,[_]);return p.length?p[0]:null}async createPrediction(y,_){const p=await this._client.callApi({type:"helix",url:"predictions",method:"POST",userId:(0,t.extractUserId)(y),scopes:["channel:manage:predictions"],jsonBody:(0,i.createPredictionBody)(y,_)});return new h.HelixPrediction(p.data[0],this._client)}async lockPrediction(y,_){return await this._endPrediction(y,_,"LOCKED")}async resolvePrediction(y,_,p){return await this._endPrediction(y,_,"RESOLVED",p)}async cancelPrediction(y,_){return await this._endPrediction(y,_,"CANCELED")}async _endPrediction(y,_,p,l){const d=await this._client.callApi({type:"helix",url:"predictions",method:"PATCH",userId:(0,t.extractUserId)(y),scopes:["channel:manage:predictions"],jsonBody:(0,i.createEndPredictionBody)(y,_,p,l)});return new h.HelixPrediction(d.data[0],this._client)}};return On.HelixPredictionApi=m,On.HelixPredictionApi=m=n.__decorate([(0,t.rtfm)("api","HelixPredictionApi")],m),On}var Mn={},ns={},E_;function IS(){if(E_)return ns;E_=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.createRaidStartQuery=void 0;const n=q();function e(t,r){return{from_broadcaster_id:(0,n.extractUserId)(t),to_broadcaster_id:(0,n.extractUserId)(r)}}return ns.createRaidStartQuery=e,ns}var jn={},H_;function wb(){if(H_)return jn;H_=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.HelixRaid=void 0;const n=M,e=q();let t=class extends e.DataObject{get creationDate(){return new Date(this[e.rawDataSymbol].created_at)}get targetIsMature(){return this[e.rawDataSymbol].is_mature}};return jn.HelixRaid=t,jn.HelixRaid=t=n.__decorate([(0,e.rtfm)("api","HelixRaid")],t),jn}var A_;function xb(){if(A_)return Mn;A_=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.HelixRaidApi=void 0;const n=M,e=Re(),t=q(),r=IS(),i=ve(),a=wb();let s=class extends i.BaseApi{async startRaid(u,h){const m=await this._client.callApi({type:"helix",url:"raids",method:"POST",userId:(0,t.extractUserId)(u),scopes:["channel:manage:raids"],query:(0,r.createRaidStartQuery)(u,h)});return new a.HelixRaid(m.data[0])}async cancelRaid(u){await this._client.callApi({type:"helix",url:"raids",method:"DELETE",userId:(0,t.extractUserId)(u),scopes:["channel:manage:raids"],query:(0,e.createBroadcasterQuery)(u)})}};return Mn.HelixRaidApi=s,Mn.HelixRaidApi=s=n.__decorate([(0,t.rtfm)("api","HelixRaidApi")],s),Mn}var is={},Ke={},R_;function Sb(){if(R_)return Ke;R_=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.createScheduleSegmentUpdateBody=Ke.createScheduleSegmentModifyQuery=Ke.createScheduleSegmentBody=Ke.createScheduleSettingsUpdateQuery=Ke.createScheduleQuery=void 0;const n=q();function e(s,o){var u;return{broadcaster_id:(0,n.extractUserId)(s),start_time:o?.startDate,utc_offset:(u=o?.utcOffset)===null||u===void 0?void 0:u.toString()}}Ke.createScheduleQuery=e;function t(s,o){return o.vacation?{broadcaster_id:(0,n.extractUserId)(s),is_vacation_enabled:"true",vacation_start_time:o.vacation.startDate,vacation_end_time:o.vacation.endDate,timezone:o.vacation.timezone}:{broadcaster_id:(0,n.extractUserId)(s),is_vacation_enabled:"false"}}Ke.createScheduleSettingsUpdateQuery=t;function r(s){return{start_time:s.startDate,timezone:s.timezone,is_recurring:s.isRecurring,duration:s.duration,category_id:s.categoryId,title:s.title}}Ke.createScheduleSegmentBody=r;function i(s,o){return{broadcaster_id:(0,n.extractUserId)(s),id:o}}Ke.createScheduleSegmentModifyQuery=i;function a(s){return{start_time:s.startDate,timezone:s.timezone,is_canceled:s.isCanceled,duration:s.duration,category_id:s.categoryId,title:s.title}}return Ke.createScheduleSegmentUpdateBody=a,Ke}var Ln={},Nn={},T_;function Cl(){if(T_)return Nn;T_=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.HelixScheduleSegment=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get startDate(){return new Date(this[t.rawDataSymbol].start_time)}get endDate(){return new Date(this[t.rawDataSymbol].end_time)}get title(){return this[t.rawDataSymbol].title}get cancelEndDate(){return(0,e.mapNullable)(this[t.rawDataSymbol].canceled_until,a=>new Date(a))}get categoryId(){var a,s;return(s=(a=this[t.rawDataSymbol].category)===null||a===void 0?void 0:a.id)!==null&&s!==void 0?s:null}get categoryName(){var a,s;return(s=(a=this[t.rawDataSymbol].category)===null||a===void 0?void 0:a.name)!==null&&s!==void 0?s:null}async getCategory(){var a;const s=(a=this[t.rawDataSymbol].category)===null||a===void 0?void 0:a.id;return s?await this._client.games.getGameById(s):null}get isRecurring(){return this[t.rawDataSymbol].is_recurring}};return Nn.HelixScheduleSegment=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Nn.HelixScheduleSegment=r=n.__decorate([(0,t.rtfm)("api","HelixScheduleSegment","id")],r),Nn}var I_;function Cb(){if(I_)return Ln;I_=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.HelixPaginatedScheduleSegmentRequest=void 0;const n=M,e=q(),t=Sb(),r=ke(),i=Cl();let a=class extends r.HelixPaginatedRequest{constructor(o,u,h){super({url:"schedule",query:(0,t.createScheduleQuery)(o,h)},u,m=>new i.HelixScheduleSegment(m,u),25)}async _fetchData(o={}){var u;const h=await super._fetchData(o);return{data:(u=h.data.segments)!==null&&u!==void 0?u:[],pagination:h.pagination}}};return Ln.HelixPaginatedScheduleSegmentRequest=a,Ln.HelixPaginatedScheduleSegmentRequest=a=n.__decorate([(0,e.rtfm)("api","HelixPaginatedScheduleSegmentRequest")],a),Ln}var Fn={},P_;function Eb(){if(P_)return Fn;P_=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.HelixSchedule=void 0;const n=M,e=W(),t=q(),r=Cl();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get segments(){var s,o;return(o=(s=this[t.rawDataSymbol].segments)===null||s===void 0?void 0:s.map(u=>new r.HelixScheduleSegment(u,this._client)))!==null&&o!==void 0?o:[]}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get vacationStartDate(){var s;const o=(s=this[t.rawDataSymbol].vacation)===null||s===void 0?void 0:s.start_time;return o?new Date(o):null}get vacationEndDate(){var s;const o=(s=this[t.rawDataSymbol].vacation)===null||s===void 0?void 0:s.end_time;return o?new Date(o):null}};return Fn.HelixSchedule=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Fn.HelixSchedule=i=n.__decorate([(0,t.rtfm)("api","HelixSchedule","broadcasterId")],i),Fn}var D_;function Hb(){if(D_)return is;D_=1,Object.defineProperty(is,"__esModule",{value:!0}),is.HelixScheduleApi=void 0;const n=Re(),e=q(),t=et(),r=Sb(),i=Me(),a=ve(),s=Cb(),o=Eb(),u=Cl();class h extends a.BaseApi{async getSchedule(w,y){const _=await this._client.callApi({type:"helix",url:"schedule",userId:(0,e.extractUserId)(w),query:{...(0,r.createScheduleQuery)(w,y),...(0,i.createPaginationQuery)(y)}});return{data:new o.HelixSchedule(_.data,this._client),cursor:_.pagination.cursor}}getScheduleSegmentsPaginated(w,y){return new s.HelixPaginatedScheduleSegmentRequest(w,this._client,y)}async getScheduleSegmentsByIds(w,y){var _,p;return(p=(_=(await this._client.callApi({type:"helix",url:"schedule",userId:(0,e.extractUserId)(w),query:(0,t.createGetByIdsQuery)(w,y)})).data.segments)===null||_===void 0?void 0:_.map(d=>new u.HelixScheduleSegment(d,this._client)))!==null&&p!==void 0?p:[]}async getScheduleSegmentById(w,y){const _=await this.getScheduleSegmentsByIds(w,[y]);return _.length?_[0]:null}async getScheduleAsIcal(w){return await this._client.callApi({type:"helix",url:"schedule/icalendar",query:(0,n.createBroadcasterQuery)(w)})}async updateScheduleSettings(w,y){await this._client.callApi({type:"helix",url:"schedule/settings",method:"PATCH",userId:(0,e.extractUserId)(w),scopes:["channel:manage:schedule"],query:(0,r.createScheduleSettingsUpdateQuery)(w,y)})}async createScheduleSegment(w,y){const _=await this._client.callApi({type:"helix",url:"schedule/segment",method:"POST",userId:(0,e.extractUserId)(w),scopes:["channel:manage:schedule"],query:(0,n.createBroadcasterQuery)(w),jsonBody:(0,r.createScheduleSegmentBody)(y)});return new u.HelixScheduleSegment(_.data.segments[0],this._client)}async updateScheduleSegment(w,y,_){const p=await this._client.callApi({type:"helix",url:"schedule/segment",method:"PATCH",userId:(0,e.extractUserId)(w),scopes:["channel:manage:schedule"],query:(0,r.createScheduleSegmentModifyQuery)(w,y),jsonBody:(0,r.createScheduleSegmentUpdateBody)(_)});return new u.HelixScheduleSegment(p.data.segments[0],this._client)}async deleteScheduleSegment(w,y){await this._client.callApi({type:"helix",url:"schedule/segment",method:"DELETE",userId:(0,e.extractUserId)(w),scopes:["channel:manage:schedule"],query:(0,r.createScheduleSegmentModifyQuery)(w,y)})}}return is.HelixScheduleApi=h,is}var $n={},as={},B_;function PS(){if(B_)return as;B_=1,Object.defineProperty(as,"__esModule",{value:!0}),as.createSearchChannelsQuery=void 0;function n(e,t){var r;return{query:e,live_only:(r=t.liveOnly)===null||r===void 0?void 0:r.toString()}}return as.createSearchChannelsQuery=n,as}var Gn={},O_;function Ab(){if(O_)return Gn;O_=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.HelixChannelSearchResult=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get language(){return this[t.rawDataSymbol].broadcaster_language}get id(){return this[t.rawDataSymbol].id}get name(){return this[t.rawDataSymbol].broadcaster_login}get displayName(){return this[t.rawDataSymbol].display_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].id))}get gameId(){return this[t.rawDataSymbol].game_id}get gameName(){return this[t.rawDataSymbol].game_name}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get isLive(){return this[t.rawDataSymbol].is_live}get tags(){return this[t.rawDataSymbol].tags}get thumbnailUrl(){return this[t.rawDataSymbol].thumbnail_url}get startDate(){return this[t.rawDataSymbol].is_live?new Date(this[t.rawDataSymbol].started_at):null}};return Gn.HelixChannelSearchResult=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Gn.HelixChannelSearchResult=r=n.__decorate([(0,t.rtfm)("api","HelixChannelSearchResult","id")],r),Gn}var U_;function Rb(){if(U_)return $n;U_=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.HelixSearchApi=void 0;const n=M,e=q(),t=PS(),r=ke(),i=Fe(),a=Me(),s=ve(),o=ad(),u=Ab();let h=class extends s.BaseApi{async searchCategories(w,y){const _=await this._client.callApi({type:"helix",url:"search/categories",query:{query:w,...(0,a.createPaginationQuery)(y)}});return(0,i.createPaginatedResult)(_,o.HelixGame,this._client)}searchCategoriesPaginated(w){return new r.HelixPaginatedRequest({url:"search/categories",query:{query:w}},this._client,y=>new o.HelixGame(y,this._client))}async searchChannels(w,y={}){const _=await this._client.callApi({type:"helix",url:"search/channels",query:{...(0,t.createSearchChannelsQuery)(w,y),...(0,a.createPaginationQuery)(y)}});return(0,i.createPaginatedResult)(_,u.HelixChannelSearchResult,this._client)}searchChannelsPaginated(w,y={}){return new r.HelixPaginatedRequest({url:"search/channels",query:(0,t.createSearchChannelsQuery)(w,y)},this._client,_=>new u.HelixChannelSearchResult(_,this._client))}};return $n.HelixSearchApi=h,$n.HelixSearchApi=h=n.__decorate([(0,e.rtfm)("api","HelixSearchApi")],h),$n}var Qn={},ss={},q_;function Tb(){if(q_)return ss;q_=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.StreamNotLiveError=void 0;const n=q();class e extends n.CustomError{constructor(r){super("Your stream needs to be live to do this",r)}}return ss.StreamNotLiveError=e,ss}var ft={},k_;function DS(){if(k_)return ft;k_=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.createVideoQuery=ft.createStreamMarkerBody=ft.createStreamQuery=void 0;const n=q();function e(i){return{game_id:i.game,language:i.language,type:i.type,user_id:i.userId,user_login:i.userName}}ft.createStreamQuery=e;function t(i,a){return{user_id:(0,n.extractUserId)(i),description:a}}ft.createStreamMarkerBody=t;function r(i){return{video_id:i}}return ft.createVideoQuery=r,ft}var Wn={},M_;function Ib(){if(M_)return Wn;M_=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.HelixStream=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get gameId(){return this[t.rawDataSymbol].game_id}get gameName(){return this[t.rawDataSymbol].game_name}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get type(){return this[t.rawDataSymbol].type}get title(){return this[t.rawDataSymbol].title}get viewers(){return this[t.rawDataSymbol].viewer_count}get startDate(){return new Date(this[t.rawDataSymbol].started_at)}get language(){return this[t.rawDataSymbol].language}get thumbnailUrl(){return this[t.rawDataSymbol].thumbnail_url}getThumbnailUrl(a,s){return this[t.rawDataSymbol].thumbnail_url.replace("{width}",a.toString()).replace("{height}",s.toString())}get tags(){return this[t.rawDataSymbol].tags}get isMature(){return this[t.rawDataSymbol].is_mature}};return Wn.HelixStream=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Wn.HelixStream=r=n.__decorate([(0,t.rtfm)("api","HelixStream","id")],r),Wn}var Vn={},j_;function od(){if(j_)return Vn;j_=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.HelixStreamMarker=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get description(){return this[t.rawDataSymbol].description}get positionInSeconds(){return this[t.rawDataSymbol].position_seconds}};return Vn.HelixStreamMarker=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Vn.HelixStreamMarker=r=n.__decorate([(0,t.rtfm)("api","HelixStreamMarker","id")],r),Vn}var zn={},L_;function Pb(){if(L_)return zn;L_=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.HelixStreamMarkerWithVideo=void 0;const n=M,e=q(),t=od();let r=class extends t.HelixStreamMarker{constructor(a,s,o){super(a,o),this._videoId=s}get url(){return this[e.rawDataSymbol].URL}get videoId(){return this._videoId}async getVideo(){return(0,e.checkRelationAssertion)(await this._client.videos.getVideoById(this._videoId))}};return zn.HelixStreamMarkerWithVideo=r,zn.HelixStreamMarkerWithVideo=r=n.__decorate([(0,e.rtfm)("api","HelixStreamMarkerWithVideo","id")],r),zn}var N_;function Db(){if(N_)return Qn;N_=1;var n;Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.HelixStreamApi=void 0;const e=M,t=W(),r=Re(),i=q(),a=Tb(),s=et(),o=DS(),u=ar(),h=ke(),m=Fe(),w=Me(),y=ve(),_=Ib(),p=od(),l=Pb();let d=n=class extends y.BaseApi{constructor(){super(...arguments),this._getStreamByUserIdBatcher=new u.HelixRequestBatcher({url:"streams"},"user_id","user_id",this._client,S=>new _.HelixStream(S,this._client)),this._getStreamByUserNameBatcher=new u.HelixRequestBatcher({url:"streams"},"user_login","user_login",this._client,S=>new _.HelixStream(S,this._client))}async getStreams(S={}){const R=await this._client.callApi({url:"streams",type:"helix",query:{...(0,o.createStreamQuery)(S),...(0,w.createPaginationQuery)(S)}});return(0,m.createPaginatedResult)(R,_.HelixStream,this._client)}getStreamsPaginated(S={}){return new h.HelixPaginatedRequest({url:"streams",query:(0,o.createStreamQuery)(S)},this._client,R=>new _.HelixStream(R,this._client))}async getStreamsByUserNames(S){return(await this.getStreams({userName:S.map(i.extractUserName)})).data}async getStreamByUserName(S){var R;return(R=(await this.getStreamsByUserNames([S]))[0])!==null&&R!==void 0?R:null}async getStreamByUserNameBatched(S){return await this._getStreamByUserNameBatcher.request((0,i.extractUserName)(S))}async getStreamsByUserIds(S){return(await this.getStreams({userId:S.map(i.extractUserId)})).data}async getStreamByUserId(S){const R=(0,i.extractUserId)(S),P=await this._client.callApi({url:"streams",type:"helix",userId:R,query:(0,o.createStreamQuery)({userId:R})});return(0,t.mapNullable)(P.data[0],f=>new _.HelixStream(f,this._client))}async getStreamByUserIdBatched(S){return await this._getStreamByUserIdBatcher.request((0,i.extractUserId)(S))}async getStreamMarkersForUser(S,R){var P;const f=await this._client.callApi({url:"streams/markers",type:"helix",query:{...(0,s.createUserQuery)(S),...(0,w.createPaginationQuery)(R)},userId:(0,i.extractUserId)(S),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:(0,t.flatten)(f.data.map(H=>n._mapGetStreamMarkersResult(H,this._client))),cursor:(P=f.pagination)===null||P===void 0?void 0:P.cursor}}getStreamMarkersForUserPaginated(S){return new h.HelixPaginatedRequest({url:"streams/markers",query:(0,s.createUserQuery)(S),userId:(0,i.extractUserId)(S),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,R=>n._mapGetStreamMarkersResult(R,this._client))}async getStreamMarkersForVideo(S,R,P){var f;const H=await this._client.callApi({url:"streams/markers",type:"helix",query:{...(0,o.createVideoQuery)(R),...(0,w.createPaginationQuery)(P)},userId:(0,i.extractUserId)(S),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:(0,t.flatten)(H.data.map(E=>n._mapGetStreamMarkersResult(E,this._client))),cursor:(f=H.pagination)===null||f===void 0?void 0:f.cursor}}getStreamMarkersForVideoPaginated(S,R){return new h.HelixPaginatedRequest({url:"streams/markers",query:(0,o.createVideoQuery)(R),userId:(0,i.extractUserId)(S),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,P=>n._mapGetStreamMarkersResult(P,this._client))}async createStreamMarker(S,R){try{const P=await this._client.callApi({url:"streams/markers",method:"POST",type:"helix",userId:(0,i.extractUserId)(S),scopes:["channel:manage:broadcast"],canOverrideScopedUserContext:!0,jsonBody:(0,o.createStreamMarkerBody)(S,R)});return new p.HelixStreamMarker(P.data[0],this._client)}catch(P){throw P instanceof r.HttpStatusCodeError&&P.statusCode===404?new a.StreamNotLiveError({cause:P}):P}}async getStreamKey(S){const R=(0,i.extractUserId)(S);return(await this._client.callApi({type:"helix",url:"streams/key",userId:R,scopes:["channel:read:stream_key"],query:(0,r.createBroadcasterQuery)(S)})).data[0].stream_key}async getFollowedStreams(S,R){const P=(0,i.extractUserId)(S),f=await this._client.callApi({type:"helix",url:"streams/followed",userId:P,scopes:["user:read:follows"],query:{...(0,s.createSingleKeyQuery)("user_id",P),...(0,w.createPaginationQuery)(R)}});return(0,m.createPaginatedResult)(f,_.HelixStream,this._client)}getFollowedStreamsPaginated(S){const R=(0,i.extractUserId)(S);return new h.HelixPaginatedRequest({url:"streams/followed",userId:R,scopes:["user:read:follows"],query:(0,s.createSingleKeyQuery)("user_id",R)},this._client,P=>new _.HelixStream(P,this._client))}static _mapGetStreamMarkersResult(S,R){return S.videos.reduce((P,f)=>[...P,...f.markers.map(H=>new l.HelixStreamMarkerWithVideo(H,f.video_id,R))],[])}};return Qn.HelixStreamApi=d,e.__decorate([(0,t.Enumerable)(!1)],d.prototype,"_getStreamByUserIdBatcher",void 0),e.__decorate([(0,t.Enumerable)(!1)],d.prototype,"_getStreamByUserNameBatcher",void 0),Qn.HelixStreamApi=d=n=e.__decorate([(0,i.rtfm)("api","HelixStreamApi")],d),Qn}var Kn={},os={},F_;function BS(){if(F_)return os;F_=1,Object.defineProperty(os,"__esModule",{value:!0}),os.createSubscriptionCheckQuery=void 0;const n=q();function e(t,r){return{broadcaster_id:(0,n.extractUserId)(t),user_id:(0,n.extractUserId)(r)}}return os.createSubscriptionCheckQuery=e,os}var Xn={},Jn={},Yn={},$_;function ld(){if($_)return Yn;$_=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.HelixUserSubscription=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id)}get isGift(){return this[t.rawDataSymbol].is_gift}get tier(){return this[t.rawDataSymbol].tier}};return Yn.HelixUserSubscription=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Yn.HelixUserSubscription=r=n.__decorate([(0,t.rtfm)("api","HelixUserSubscription","broadcasterId")],r),Yn}var G_;function ud(){if(G_)return Jn;G_=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.HelixSubscription=void 0;const n=M,e=q(),t=ld();let r=class extends t.HelixUserSubscription{get broadcasterId(){return this[e.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[e.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[e.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,e.checkRelationAssertion)(await this._client.users.getUserById(this[e.rawDataSymbol].broadcaster_id))}get gifterId(){return this[e.rawDataSymbol].is_gift?this[e.rawDataSymbol].gifter_id:null}get gifterName(){return this[e.rawDataSymbol].is_gift?this[e.rawDataSymbol].gifter_login:null}get gifterDisplayName(){return this[e.rawDataSymbol].is_gift?this[e.rawDataSymbol].gifter_name:null}async getGifter(){return this[e.rawDataSymbol].is_gift?(0,e.checkRelationAssertion)(await this._client.users.getUserById(this[e.rawDataSymbol].gifter_id)):null}get userId(){return this[e.rawDataSymbol].user_id}get userName(){return this[e.rawDataSymbol].user_login}get userDisplayName(){return this[e.rawDataSymbol].user_name}async getUser(){return(0,e.checkRelationAssertion)(await this._client.users.getUserById(this[e.rawDataSymbol].user_id))}};return Jn.HelixSubscription=r,Jn.HelixSubscription=r=n.__decorate([(0,e.rtfm)("api","HelixSubscription","userId")],r),Jn}var Q_;function Bb(){if(Q_)return Xn;Q_=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.HelixPaginatedSubscriptionsRequest=void 0;const n=M,e=Re(),t=q(),r=Zs(),i=ud();let a=class extends r.HelixPaginatedRequestWithTotal{constructor(o,u){super({url:"subscriptions",scopes:["channel:read:subscriptions"],userId:(0,t.extractUserId)(o),query:(0,e.createBroadcasterQuery)(o)},u,h=>new i.HelixSubscription(h,u))}async getPoints(){var o;return((o=this._currentData)!==null&&o!==void 0?o:await this._fetchData({query:{after:void 0}})).points}};return Xn.HelixPaginatedSubscriptionsRequest=a,Xn.HelixPaginatedSubscriptionsRequest=a=n.__decorate([(0,t.rtfm)("api","HelixPaginatedSubscriptionsRequest")],a),Xn}var W_;function Ob(){if(W_)return Kn;W_=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.HelixSubscriptionApi=void 0;const n=M,e=Re(),t=q(),r=et(),i=BS(),a=Fe(),s=Me(),o=ve(),u=Bb(),h=ud(),m=ld();let w=class extends o.BaseApi{async getSubscriptions(_,p){const l=await this._client.callApi({url:"subscriptions",scopes:["channel:read:subscriptions"],type:"helix",userId:(0,t.extractUserId)(_),query:{...(0,e.createBroadcasterQuery)(_),...(0,s.createPaginationQuery)(p)}});return{...(0,a.createPaginatedResultWithTotal)(l,h.HelixSubscription,this._client),points:l.points}}getSubscriptionsPaginated(_){return new u.HelixPaginatedSubscriptionsRequest(_,this._client)}async getSubscriptionsForUsers(_,p){return(await this._client.callApi({type:"helix",url:"subscriptions",userId:(0,t.extractUserId)(_),scopes:["channel:read:subscriptions"],query:(0,r.createChannelUsersCheckQuery)(_,p)})).data.map(d=>new h.HelixSubscription(d,this._client))}async getSubscriptionForUser(_,p){const l=await this.getSubscriptionsForUsers(_,[p]);return l.length?l[0]:null}async checkUserSubscription(_,p){try{const l=await this._client.callApi({type:"helix",url:"subscriptions/user",userId:(0,t.extractUserId)(_),scopes:["user:read:subscriptions"],query:(0,i.createSubscriptionCheckQuery)(p,_)});return new m.HelixUserSubscription(l.data[0],this._client)}catch(l){if(l instanceof e.HttpStatusCodeError&&l.statusCode===404)return null;throw l}}};return Kn.HelixSubscriptionApi=w,Kn.HelixSubscriptionApi=w=n.__decorate([(0,t.rtfm)("api","HelixSubscriptionApi")],w),Kn}var Zn={},ei={},V_;function cd(){if(V_)return ei;V_=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.HelixTeam=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get name(){return this[t.rawDataSymbol].team_name}get displayName(){return this[t.rawDataSymbol].team_display_name}get backgroundImageUrl(){return this[t.rawDataSymbol].background_image_url}get bannerUrl(){return this[t.rawDataSymbol].banner}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get updateDate(){return new Date(this[t.rawDataSymbol].updated_at)}get info(){return this[t.rawDataSymbol].info}get logoThumbnailUrl(){return this[t.rawDataSymbol].thumbnail_url}async getUserRelations(){return(await this._client.teams.getTeamById(this.id)).userRelations}};return ei.HelixTeam=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),ei.HelixTeam=r=n.__decorate([(0,t.rtfm)("api","HelixTeam","id")],r),ei}var ti={},z_;function Ub(){if(z_)return ti;z_=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.HelixTeamWithUsers=void 0;const n=M,e=q(),t=td(),r=cd();let i=class extends r.HelixTeam{get userRelations(){return this[e.rawDataSymbol].users.map(s=>new t.HelixUserRelation(s,this._client))}};return ti.HelixTeamWithUsers=i,ti.HelixTeamWithUsers=i=n.__decorate([(0,e.rtfm)("api","HelixTeamWithUsers","id")],i),ti}var K_;function qb(){if(K_)return Zn;K_=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.HelixTeamApi=void 0;const n=M,e=Re(),t=q(),r=ve(),i=cd(),a=Ub();let s=class extends r.BaseApi{async getTeamsForBroadcaster(u){var h,m;return(m=(h=(await this._client.callApi({type:"helix",url:"teams/channel",userId:(0,t.extractUserId)(u),query:(0,e.createBroadcasterQuery)(u)})).data)===null||h===void 0?void 0:h.map(y=>new i.HelixTeam(y,this._client)))!==null&&m!==void 0?m:[]}async getTeamById(u){try{const h=await this._client.callApi({type:"helix",url:"teams",query:{id:u}});return new a.HelixTeamWithUsers(h.data[0],this._client)}catch(h){if(h instanceof e.HttpStatusCodeError&&h.statusCode===500)return null;throw h}}async getTeamByName(u){try{const h=await this._client.callApi({type:"helix",url:"teams",query:{name:u}});return new a.HelixTeamWithUsers(h.data[0],this._client)}catch(h){if(h instanceof e.HttpStatusCodeError&&h.statusCode===404)return null;throw h}}};return Zn.HelixTeamApi=s,Zn.HelixTeamApi=s=n.__decorate([(0,t.rtfm)("api","HelixTeamApi")],s),Zn}var ri={},zt={},X_;function OS(){if(X_)return zt;X_=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.createUserBlockDeleteQuery=zt.createUserBlockCreateQuery=void 0;const n=q();function e(r,i){return{target_user_id:(0,n.extractUserId)(r),source_context:i.sourceContext,reason:i.reason}}zt.createUserBlockCreateQuery=e;function t(r){return{target_user_id:(0,n.extractUserId)(r)}}return zt.createUserBlockDeleteQuery=t,zt}var ni={},ii={},ls={},J_;function dd(){if(J_)return ls;J_=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.HelixBaseExtension=void 0;const n=q();class e extends n.DataObject{get id(){return this[n.rawDataSymbol].id}get version(){return this[n.rawDataSymbol].version}get name(){return this[n.rawDataSymbol].name}}return ls.HelixBaseExtension=e,ls}var Y_;function kb(){if(Y_)return ii;Y_=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.HelixInstalledExtension=void 0;const n=M,e=q(),t=dd();let r=class extends t.HelixBaseExtension{constructor(a,s,o){super(o),this._slotType=a,this._slotId=s}get slotType(){return this._slotType}get slotId(){return this._slotId}};return ii.HelixInstalledExtension=r,ii.HelixInstalledExtension=r=n.__decorate([(0,e.rtfm)("api","HelixInstalledExtension","id")],r),ii}var Z_;function Mb(){if(Z_)return ni;Z_=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.HelixInstalledExtensionList=void 0;const n=M,e=q(),t=kb();let r=class extends e.DataObject{getExtensionAtSlot(a,s){const o=this[e.rawDataSymbol][a][s];return o.active?new t.HelixInstalledExtension(a,s,o):null}getExtensionsForSlotType(a){return[...Object.entries(this[e.rawDataSymbol][a])].filter(s=>s[1].active).map(([s,o])=>new t.HelixInstalledExtension(a,s,o))}getAllExtensions(){return[...Object.entries(this[e.rawDataSymbol])].flatMap(([a,s])=>[...Object.entries(s)].filter(o=>o[1].active).map(([o,u])=>new t.HelixInstalledExtension(a,o,u)))}};return ni.HelixInstalledExtensionList=r,ni.HelixInstalledExtensionList=r=n.__decorate([(0,e.rtfm)("api","HelixInstalledExtensionList")],r),ni}var ai={},eg;function jb(){if(eg)return ai;eg=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.HelixUserExtension=void 0;const n=M,e=q(),t=dd();let r=class extends t.HelixBaseExtension{get canActivate(){return this[e.rawDataSymbol].can_activate}get types(){return this[e.rawDataSymbol].type}};return ai.HelixUserExtension=r,ai.HelixUserExtension=r=n.__decorate([(0,e.rtfm)("api","HelixUserExtension","id")],r),ai}var si={},oi={},tg;function hd(){if(tg)return oi;tg=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.HelixUser=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get name(){return this[t.rawDataSymbol].login}get displayName(){return this[t.rawDataSymbol].display_name}get description(){return this[t.rawDataSymbol].description}get type(){return this[t.rawDataSymbol].type}get broadcasterType(){return this[t.rawDataSymbol].broadcaster_type}get profilePictureUrl(){return this[t.rawDataSymbol].profile_image_url}get offlinePlaceholderUrl(){return this[t.rawDataSymbol].offline_image_url}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}async getStream(){return await this._client.streams.getStreamByUserId(this)}async getFollowedChannels(){return await this._client.channels.getFollowedChannels(this)}async getFollowedChannel(a){var s;return(s=(await this._client.channels.getFollowedChannels(this,a)).data[0])!==null&&s!==void 0?s:null}async follows(a){return await this.getFollowedChannel(a)!==null}async getChannelFollowers(){return await this._client.channels.getChannelFollowers(this)}async getChannelFollower(a){var s;return(s=(await this._client.channels.getChannelFollowers(this,a)).data[0])!==null&&s!==void 0?s:null}async isFollowedBy(a){return await this.getChannelFollower(a)!==null}async getSubscriptionTo(a){return await this._client.subscriptions.checkUserSubscription(this,a)}async isSubscribedTo(a){return await this.getSubscriptionTo(a)!==null}async getSubscriber(a){return await this._client.subscriptions.getSubscriptionForUser(this,a)}async hasSubscriber(a){return await this.getSubscriber(a)!==null}};return oi.HelixUser=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),oi.HelixUser=r=n.__decorate([(0,t.rtfm)("api","HelixUser","id")],r),oi}var rg;function Lb(){if(rg)return si;rg=1,Object.defineProperty(si,"__esModule",{value:!0}),si.HelixPrivilegedUser=void 0;const n=M,e=q(),t=hd();let r=class extends t.HelixUser{get email(){return this[e.rawDataSymbol].email}async setDescription(a){return await this._client.users.updateAuthenticatedUser(this,{description:a})}};return si.HelixPrivilegedUser=r,si.HelixPrivilegedUser=r=n.__decorate([(0,e.rtfm)("api","HelixPrivilegedUser","id")],r),si}var li={},ng;function Nb(){if(ng)return li;ng=1,Object.defineProperty(li,"__esModule",{value:!0}),li.HelixUserBlock=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].display_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return li.HelixUserBlock=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),li.HelixUserBlock=r=n.__decorate([(0,t.rtfm)("api","HelixUserBlock","userId")],r),li}var ig;function Fb(){if(ig)return ri;ig=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.HelixUserApi=void 0;const n=M,e=W(),t=Re(),r=q(),i=et(),a=OS(),s=ar(),o=ke(),u=Fe(),h=Me(),m=ve(),w=Mb(),y=jb(),_=Lb(),p=hd(),l=Nb();let d=class extends m.BaseApi{constructor(){super(...arguments),this._getUserByIdBatcher=new s.HelixRequestBatcher({url:"users"},"id","id",this._client,S=>new p.HelixUser(S,this._client)),this._getUserByNameBatcher=new s.HelixRequestBatcher({url:"users"},"login","login",this._client,S=>new p.HelixUser(S,this._client))}async getUsersByIds(S){return await this._getUsers("id",S.map(r.extractUserId))}async getUsersByNames(S){return await this._getUsers("login",S.map(r.extractUserName))}async getUserById(S){const R=(0,r.extractUserId)(S),P=await this._client.callApi({type:"helix",url:"users",userId:R,query:{id:R}});return(0,e.mapNullable)(P.data[0],f=>new p.HelixUser(f,this._client))}async getUserByIdBatched(S){return await this._getUserByIdBatcher.request((0,r.extractUserId)(S))}async getUserByName(S){const R=await this._getUsers("login",[(0,r.extractUserName)(S)]);return R.length?R[0]:null}async getUserByNameBatched(S){return await this._getUserByNameBatcher.request((0,r.extractUserName)(S))}async getAuthenticatedUser(S,R=!1){var P;const f=await this._client.callApi({type:"helix",url:"users",forceType:"user",userId:(0,r.extractUserId)(S),scopes:R?["user:read:email"]:void 0});if(!(!((P=f.data)===null||P===void 0)&&P.length))throw new r.HellFreezesOverError("Could not get authenticated user");return new _.HelixPrivilegedUser(f.data[0],this._client)}async updateAuthenticatedUser(S,R){const P=await this._client.callApi({type:"helix",url:"users",method:"PUT",userId:(0,r.extractUserId)(S),scopes:["user:edit"],query:{description:R.description}});return new _.HelixPrivilegedUser(P.data[0],this._client)}async getBlocks(S,R){const P=await this._client.callApi({type:"helix",url:"users/blocks",userId:(0,r.extractUserId)(S),scopes:["user:read:blocked_users"],query:{...(0,t.createBroadcasterQuery)(S),...(0,h.createPaginationQuery)(R)}});return(0,u.createPaginatedResult)(P,l.HelixUserBlock,this._client)}getBlocksPaginated(S){return new o.HelixPaginatedRequest({url:"users/blocks",userId:(0,r.extractUserId)(S),scopes:["user:read:blocked_users"],query:(0,t.createBroadcasterQuery)(S)},this._client,R=>new l.HelixUserBlock(R,this._client))}async createBlock(S,R,P={}){await this._client.callApi({type:"helix",url:"users/blocks",method:"PUT",userId:(0,r.extractUserId)(S),scopes:["user:manage:blocked_users"],query:(0,a.createUserBlockCreateQuery)(R,P)})}async deleteBlock(S,R){await this._client.callApi({type:"helix",url:"users/blocks",method:"DELETE",userId:(0,r.extractUserId)(S),scopes:["user:manage:blocked_users"],query:(0,a.createUserBlockDeleteQuery)(R)})}async getExtensionsForAuthenticatedUser(S,R=!1){return(await this._client.callApi({type:"helix",url:"users/extensions/list",userId:(0,r.extractUserId)(S),scopes:R?["channel:manage:extensions"]:["user:read:broadcast","channel:manage:extensions"]})).data.map(f=>new y.HelixUserExtension(f))}async getActiveExtensions(S,R=!1){const P=(0,r.extractUserId)(S),f=await this._client.callApi({type:"helix",url:"users/extensions",userId:P,scopes:R?["user:read:broadcast","channel:manage:extensions"]:void 0,query:(0,i.createSingleKeyQuery)("user_id",P)});return new w.HelixInstalledExtensionList(f.data)}async updateActiveExtensionsForAuthenticatedUser(S,R){const P=await this._client.callApi({type:"helix",url:"users/extensions",method:"PUT",userId:(0,r.extractUserId)(S),scopes:["channel:manage:extensions"],jsonBody:{data:R}});return new w.HelixInstalledExtensionList(P.data)}async _getUsers(S,R){if(R.length===0)return[];const P={[S]:R};return(await this._client.callApi({type:"helix",url:"users",query:P})).data.map(H=>new p.HelixUser(H,this._client))}};return ri.HelixUserApi=d,n.__decorate([(0,e.Enumerable)(!1)],d.prototype,"_getUserByIdBatcher",void 0),n.__decorate([(0,e.Enumerable)(!1)],d.prototype,"_getUserByNameBatcher",void 0),ri.HelixUserApi=d=n.__decorate([(0,r.rtfm)("api","HelixUserApi")],d),ri}var ui={},ci={},ag;function $b(){if(ag)return ci;ag=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.HelixVideo=void 0;const n=M,e=wl(),t=W(),r=q();let i=class extends r.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[r.rawDataSymbol].id}get userId(){return this[r.rawDataSymbol].user_id}get userName(){return this[r.rawDataSymbol].user_login}get userDisplayName(){return this[r.rawDataSymbol].user_name}async getUser(){return(0,r.checkRelationAssertion)(await this._client.users.getUserById(this[r.rawDataSymbol].user_id))}get title(){return this[r.rawDataSymbol].title}get description(){return this[r.rawDataSymbol].description}get creationDate(){return new Date(this[r.rawDataSymbol].created_at)}get publishDate(){return new Date(this[r.rawDataSymbol].published_at)}get url(){return this[r.rawDataSymbol].url}get thumbnailUrl(){return this[r.rawDataSymbol].thumbnail_url}getThumbnailUrl(s,o){return this[r.rawDataSymbol].thumbnail_url.replace("%{width}",s.toString()).replace("%{height}",o.toString())}get isPublic(){return this[r.rawDataSymbol].viewable==="public"}get views(){return this[r.rawDataSymbol].view_count}get language(){return this[r.rawDataSymbol].language}get type(){return this[r.rawDataSymbol].type}get duration(){return this[r.rawDataSymbol].duration}get durationInSeconds(){const s=this[r.rawDataSymbol].duration.match(/\d+[hms]/g);if(!s)throw new r.HellFreezesOverError(`Could not parse duration string: ${this[r.rawDataSymbol].duration}`);return s.map(o=>{const u=/(\d+)([hms])/.exec(o);if(!u)throw new r.HellFreezesOverError(`Could not parse partial duration string: ${o}`);const[,h,m]=u;return parseInt(h,10)*{h:3600,m:60,s:1}[m]}).reduce((o,u)=>o+u)}get streamId(){return this[r.rawDataSymbol].stream_id}get mutedSegmentData(){var s,o;return(o=(s=this[r.rawDataSymbol].muted_segments)===null||s===void 0?void 0:s.slice())!==null&&o!==void 0?o:[]}isMutedAt(s,o,u=!1){if(this[r.rawDataSymbol].muted_segments===null)return!1;if(o==null)return this[r.rawDataSymbol].muted_segments.some(m=>m.offset<=s&&s<=m.offset+m.duration);const h=s+o;return u?this[r.rawDataSymbol].muted_segments.some(m=>{const w=m.offset+m.duration;return s<w&&m.offset<h}):this[r.rawDataSymbol].muted_segments.some(m=>{const w=m.offset+m.duration;return m.offset<=s&&h<=w})}};return ci.HelixVideo=i,n.__decorate([(0,t.Enumerable)(!1)],i.prototype,"_client",void 0),n.__decorate([(0,e.CachedGetter)()],i.prototype,"durationInSeconds",null),ci.HelixVideo=i=n.__decorate([e.Cacheable,(0,r.rtfm)("api","HelixVideo","id")],i),ci}var sg;function Gb(){if(sg)return ui;sg=1;var n;Object.defineProperty(ui,"__esModule",{value:!0}),ui.HelixVideoApi=void 0;const e=M,t=W(),r=q(),i=ar(),a=ke(),s=Fe(),o=Me(),u=ve(),h=$b();let m=n=class extends u.BaseApi{constructor(){super(...arguments),this._getVideoByIdBatcher=new i.HelixRequestBatcher({url:"videos"},"id","id",this._client,y=>new h.HelixVideo(y,this._client))}async getVideosByIds(y){return(await this._getVideos("id",y)).data}async getVideoById(y){const _=await this.getVideosByIds([y]);return _.length?_[0]:null}async getVideoByIdBatched(y){return await this._getVideoByIdBatcher.request(y)}async getVideosByUser(y,_={}){const p=(0,r.extractUserId)(y);return await this._getVideos("user_id",[p],_)}getVideosByUserPaginated(y,_={}){const p=(0,r.extractUserId)(y);return this._getVideosPaginated("user_id",[p],_)}async getVideosByGame(y,_={}){return await this._getVideos("game_id",[y],_)}getVideosByGamePaginated(y,_={}){return this._getVideosPaginated("game_id",[y],_)}async deleteVideosByIds(y,_){await this._client.callApi({type:"helix",url:"videos",method:"DELETE",scopes:["channel:manage:videos"],userId:(0,r.extractUserId)(y),query:{id:_}})}async _getVideos(y,_,p={}){if(!_.length)return{data:[]};const l=await this._client.callApi({type:"helix",url:"videos",userId:y==="user_id"?_[0]:void 0,query:{...n._makeVideosQuery(y,_,p),...(0,o.createPaginationQuery)(p)}});return(0,s.createPaginatedResult)(l,h.HelixVideo,this._client)}_getVideosPaginated(y,_,p={}){return new a.HelixPaginatedRequest({url:"videos",userId:y==="user_id"?_[0]:void 0,query:n._makeVideosQuery(y,_,p)},this._client,l=>new h.HelixVideo(l,this._client))}static _makeVideosQuery(y,_,p={}){const{language:l,period:d,orderBy:b,type:S}=p;return{[y]:_,language:l,period:d,sort:b,type:S}}};return ui.HelixVideoApi=m,e.__decorate([(0,t.Enumerable)(!1)],m.prototype,"_getVideoByIdBatcher",void 0),ui.HelixVideoApi=m=n=e.__decorate([(0,r.rtfm)("api","HelixVideoApi")],m),ui}var di={},us={},og;function US(){if(og)return us;og=1,Object.defineProperty(us,"__esModule",{value:!0}),us.createWhisperQuery=void 0;const n=q();function e(t,r){return{from_user_id:(0,n.extractUserId)(t),to_user_id:(0,n.extractUserId)(r)}}return us.createWhisperQuery=e,us}var lg;function Qb(){if(lg)return di;lg=1,Object.defineProperty(di,"__esModule",{value:!0}),di.HelixWhisperApi=void 0;const n=M,e=q(),t=US(),r=ve();let i=class extends r.BaseApi{async sendWhisper(s,o,u){await this._client.callApi({type:"helix",url:"whispers",method:"POST",userId:(0,e.extractUserId)(s),scopes:["user:manage:whispers"],query:(0,t.createWhisperQuery)(s,o),jsonBody:{message:u}})}};return di.HelixWhisperApi=i,di.HelixWhisperApi=i=n.__decorate([(0,e.rtfm)("api","HelixWhisperApi")],i),di}var cs={},ug;function Wb(){if(ug)return cs;ug=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.ApiReportedRequest=void 0;class n{constructor(t,r,i){this._options=t,this._httpStatus=r,this._resolvedUserId=i}get options(){return this._options}get httpStatus(){return this._httpStatus}get resolvedUserId(){return this._resolvedUserId}}return cs.ApiReportedRequest=n,cs}var cg;function pd(){if(cg)return mr;cg=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.BaseApiClient=void 0;const n=M,e=wl(),t=Vc(),r=W(),i=ay(),a=Re(),s=cy(),o=q(),u=dy(),h=_y(),m=wy(),w=Cy(),y=Ay(),_=jy(),p=Ny(),l=$y(),d=Qy(),b=Ky(),S=Zy(),R=eb(),P=rb(),f=ab(),H=pb(),E=gb(),B=vb(),j=xb(),Z=Hb(),z=Rb(),Te=Db(),se=Ob(),D=qb(),N=Fb(),ae=Gb(),he=Qb(),we=Wb();let X=class extends i.EventEmitter{constructor(J,Se,Ce){super(),this.onRequest=this.registerEvent(),this._config=J,this._logger=Se,this._rateLimiter=Ce}async requestScopesForUser(J,Se){await this._config.authProvider.getAccessTokenForUser(J,...Se.map(Ce=>[Ce]))}async getTokenInfo(){try{const J=await this.callApi({type:"auth",url:"validate"});return new s.TokenInfo(J)}catch(J){throw J instanceof a.HttpStatusCodeError&&J.statusCode===401?new s.InvalidTokenError({cause:J}):J}}async callApi(J){var Se;const{authProvider:Ce}=this._config;if(!((Se=J.auth)!==null&&Se!==void 0?Se:!0))return await(0,a.callTwitchApi)(J,Ce.clientId,void 0,void 0,this._config.fetchOptions);let Ie=!1;if(J.forceType)switch(J.forceType){case"app":{if(!Ce.getAppAccessToken)throw new Error("Tried to make an API call that requires an app access token but your auth provider does not support that");const Be=await Ce.getAppAccessToken();return await this._callApiUsingInitialToken(J,Be)}case"user":{Ie=!0;break}default:throw new o.HellFreezesOverError(`Unknown forced token type: ${J.forceType}`)}if(J.scopes&&(Ie=!0),Ie){const Be=J.canOverrideScopedUserContext?this._getUserIdFromRequestContext(J.userId):J.userId;if(!Be)throw new Error("Tried to make an API call with a user context but no context user ID");const st=await Ce.getAccessTokenForUser(Be,J.scopes);if(!st)throw new Error(`Tried to make an API call with a user context for user ID ${Be} but no token was found`);if((0,s.accessTokenIsExpired)(st)&&Ce.refreshAccessTokenForUser){const ht=await Ce.refreshAccessTokenForUser(Be);return await this._callApiUsingInitialToken(J,ht,!0)}return await this._callApiUsingInitialToken(J,st)}const $e=this._getUserIdFromRequestContext(J.userId),De=$e===null?await Ce.getAnyAccessToken():await Ce.getAnyAccessToken($e??J.userId);if((0,s.accessTokenIsExpired)(De)&&De.userId&&Ce.refreshAccessTokenForUser){const Be=await Ce.refreshAccessTokenForUser(De.userId);return await this._callApiUsingInitialToken(J,Be,!0)}return await this._callApiUsingInitialToken(J,De)}get bits(){return new h.HelixBitsApi(this)}get channels(){return new m.HelixChannelApi(this)}get channelPoints(){return new w.HelixChannelPointsApi(this)}get charity(){return new y.HelixCharityApi(this)}get chat(){return new _.HelixChatApi(this)}get clips(){return new p.HelixClipApi(this)}get contentClassificationLabels(){return new l.HelixContentClassificationLabelApi(this)}get entitlements(){return new d.HelixEntitlementApi(this)}get eventSub(){return new b.HelixEventSubApi(this)}get extensions(){return new S.HelixExtensionsApi(this)}get games(){return new R.HelixGameApi(this)}get hypeTrain(){return new f.HelixHypeTrainApi(this)}get goals(){return new P.HelixGoalApi(this)}get moderation(){return new H.HelixModerationApi(this)}get polls(){return new E.HelixPollApi(this)}get predictions(){return new B.HelixPredictionApi(this)}get raids(){return new j.HelixRaidApi(this)}get schedule(){return new Z.HelixScheduleApi(this)}get search(){return new z.HelixSearchApi(this)}get streams(){return new Te.HelixStreamApi(this)}get subscriptions(){return new se.HelixSubscriptionApi(this)}get teams(){return new D.HelixTeamApi(this)}get users(){return new N.HelixUserApi(this)}get videos(){return new ae.HelixVideoApi(this)}get whispers(){return new he.HelixWhisperApi(this)}get rateLimiterStats(){return this._rateLimiter instanceof t.ResponseBasedRateLimiter?this._rateLimiter.stats:null}get _authProvider(){return this._config.authProvider}get _mockServerPort(){return this._config.mockServerPort}get _batchDelay(){var J;return(J=this._config.batchDelay)!==null&&J!==void 0?J:0}_getUserIdFromRequestContext(J){return J}async _callApiUsingInitialToken(J,Se,Ce=!1){var tt;const{authProvider:Ie}=this._config,{authorizationType:$e}=Ie;let De=await this._callApiInternal(J,Ie.clientId,Se.accessToken,$e);if(De.status===401&&!Ce){if(Se.userId){if(Ie.refreshAccessTokenForUser){const Be=await Ie.refreshAccessTokenForUser(Se.userId);De=await this._callApiInternal(J,Ie.clientId,Be.accessToken,$e)}}else if(Ie.getAppAccessToken){const Be=await Ie.getAppAccessToken(!0);De=await this._callApiInternal(J,Ie.clientId,Be.accessToken,$e)}}return this.emit(this.onRequest,new we.ApiReportedRequest(J,De.status,(tt=Se.userId)!==null&&tt!==void 0?tt:null)),await(0,a.handleTwitchApiResponseError)(De,J),await(0,a.transformTwitchApiResponse)(De)}async _callApiInternal(J,Se,Ce,tt){var Ie,$e,De;const{fetchOptions:Be,mockServerPort:st}=this._config,ht=(Ie=J.type)!==null&&Ie!==void 0?Ie:"helix";this._logger.debug(`Calling ${ht} API: ${($e=J.method)!==null&&$e!==void 0?$e:"GET"} ${J.url}`),this._logger.trace(`Query: ${JSON.stringify(J.query)}`),J.jsonBody&&this._logger.trace(`Request body: ${JSON.stringify(J.jsonBody)}`);const vt=u.operation({retries:3,minTimeout:500,factor:2}),{promise:ki,resolve:sr,reject:Mi}=(0,r.promiseWithResolvers)();vt.attempt(async()=>{try{const rt=ht==="helix"?await this._rateLimiter.request({options:J,clientId:Se,accessToken:Ce,authorizationType:tt,fetchOptions:Be,mockServerPort:st}):await(0,a.callTwitchApiRaw)(J,Se,Ce,tt,Be,st);!rt.ok&&rt.status>=500&&rt.status<600&&await(0,a.handleTwitchApiResponseError)(rt,J),sr(rt)}catch(rt){if(vt.retry(rt))return;Mi(vt.mainError())}});const or=await ki;return this._logger.debug(`Called ${ht} API: ${(De=J.method)!==null&&De!==void 0?De:"GET"} ${J.url} - result: ${or.status}`),or}};return mr.BaseApiClient=X,n.__decorate([(0,e.CachedGetter)()],X.prototype,"bits",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"channels",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"channelPoints",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"charity",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"chat",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"clips",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"contentClassificationLabels",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"entitlements",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"eventSub",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"extensions",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"games",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"hypeTrain",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"goals",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"moderation",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"polls",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"predictions",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"raids",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"schedule",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"search",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"streams",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"subscriptions",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"teams",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"users",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"videos",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"whispers",null),mr.BaseApiClient=X=n.__decorate([e.Cacheable,(0,o.rtfm)("api","ApiClient")],X),mr}var hi={},dg;function qS(){if(dg)return hi;dg=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.NoContextApiClient=void 0;const n=M,e=q(),t=pd();let r=class extends t.BaseApiClient{_getUserIdFromRequestContext(){return null}};return hi.NoContextApiClient=r,hi.NoContextApiClient=r=n.__decorate([(0,e.rtfm)("api","ApiClient")],r),hi}var pi={},hg;function kS(){if(hg)return pi;hg=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.UserContextApiClient=void 0;const n=M,e=q(),t=pd();let r=class extends t.BaseApiClient{constructor(a,s,o,u){super(a,s,o),this._userId=u}_getUserIdFromRequestContext(){return this._userId}};return pi.UserContextApiClient=r,pi.UserContextApiClient=r=n.__decorate([(0,e.rtfm)("api","ApiClient")],r),pi}var pg;function MS(){if(pg)return hr;pg=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.ApiClient=void 0;const n=M,e=fl(),t=yl(),r=Vc(),i=Re(),a=q(),s=ny(),o=nS(),u=pd(),h=qS(),m=kS();let w=class extends u.BaseApiClient{constructor(_){if(!_.authProvider)throw new s.ConfigError("No auth provider given. Please supply the `authProvider` option.");const p={name:"twurple:api:rate-limiter",..._.logger};super(_,(0,t.createLogger)({name:"twurple:api:client",..._.logger}),e.isNode?new r.PartitionedRateLimiter({getPartitionKey:l=>{var d;return(d=l.userId)!==null&&d!==void 0?d:null},createChild:()=>new o.HelixRateLimiter({logger:p})}):new r.PartitionedTimeBasedRateLimiter({logger:p,bucketSize:800,timeFrame:64e3,doRequest:async({options:l,clientId:d,accessToken:b,authorizationType:S,fetchOptions:R,mockServerPort:P})=>await(0,i.callTwitchApiRaw)(l,d,b,S,R,P),getPartitionKey:l=>{var d;return(d=l.userId)!==null&&d!==void 0?d:null}}))}async asUser(_,p){const l=new m.UserContextApiClient(this._config,this._logger,this._rateLimiter,(0,a.extractUserId)(_));return await p(l)}async asIntent(_,p){if(!this._authProvider.getAccessTokenForIntent)throw new Error("Trying to use intents with an auth provider that does not support them");for(const l of _){const d=await this._authProvider.getAccessTokenForIntent(l);if(d){const b=new m.UserContextApiClient(this._config,this._logger,this._rateLimiter,d.userId);return await p(b)}}throw new Error(`Intents [${_.join(", ")}] not found in auth provider`)}async withoutUser(_){const p=new h.NoContextApiClient(this._config,this._logger,this._rateLimiter);return await _(p)}};return hr.ApiClient=w,hr.ApiClient=w=n.__decorate([(0,a.rtfm)("api","ApiClient")],w),hr}var mi={},mg;function jS(){if(mg)return mi;mg=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.HelixFollow=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].from_id}get userName(){return this[t.rawDataSymbol].from_login}get userDisplayName(){return this[t.rawDataSymbol].from_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].from_id))}get followedUserId(){return this[t.rawDataSymbol].to_id}get followedUserName(){return this[t.rawDataSymbol].to_login}get followedUserDisplayName(){return this[t.rawDataSymbol].to_name}async getFollowedUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].to_id))}get followDate(){return new Date(this[t.rawDataSymbol].followed_at)}};return mi.HelixFollow=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),mi.HelixFollow=r=n.__decorate([(0,t.rtfm)("api","HelixFollow")],r),mi}var _g;function LS(){return _g||(_g=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.HelixGoal=n.HelixGoalApi=n.HelixGame=n.HelixGameApi=n.HelixExtensionTransaction=n.HelixExtensionBitsProduct=n.HelixExtensionsApi=n.HelixPaginatedEventSubSubscriptionsRequest=n.HelixEventSubSubscription=n.HelixEventSubConduitShard=n.HelixEventSubConduit=n.HelixEventSubApi=n.HelixDropsEntitlement=n.HelixEntitlementApi=n.HelixContentClassificationLabel=n.HelixContentClassificationLabelApi=n.HelixClip=n.HelixClipApi=n.HelixSharedChatSession=n.HelixSharedChatSessionParticipant=n.HelixSentChatMessage=n.HelixPrivilegedChatSettings=n.HelixUserEmote=n.HelixEmoteFromSet=n.HelixChannelEmote=n.HelixEmote=n.HelixChatChatter=n.HelixChatSettings=n.HelixChatBadgeVersion=n.HelixChatBadgeSet=n.HelixChatApi=n.HelixCharityCampaignAmount=n.HelixCharityCampaignDonation=n.HelixCharityCampaign=n.HelixCharityApi=n.HelixCustomRewardRedemption=n.HelixCustomReward=n.HelixChannelPointsApi=n.HelixChannelReference=n.HelixFollowedChannel=n.HelixChannelFollower=n.HelixChannelEditor=n.HelixChannel=n.HelixAdSchedule=n.HelixChannelApi=n.HelixCheermoteList=n.HelixBitsLeaderboardEntry=n.HelixBitsLeaderboard=n.HelixBitsApi=n.ApiClient=void 0,n.HelixVideo=n.HelixVideoApi=n.HelixUserExtension=n.HelixInstalledExtensionList=n.HelixInstalledExtension=n.HelixBaseExtension=n.HelixUser=n.HelixPrivilegedUser=n.HelixFollow=n.HelixUserBlock=n.HelixUserApi=n.HelixTeamWithUsers=n.HelixTeam=n.HelixTeamApi=n.HelixUserSubscription=n.HelixSubscription=n.HelixSubscriptionApi=n.HelixPaginatedSubscriptionsRequest=n.HelixStreamMarkerWithVideo=n.HelixStreamMarker=n.HelixStream=n.HelixStreamApi=n.HelixChannelSearchResult=n.HelixSearchApi=n.HelixPaginatedScheduleSegmentRequest=n.HelixScheduleSegment=n.HelixSchedule=n.HelixScheduleApi=n.HelixUserRelation=n.HelixRaid=n.HelixRaidApi=n.HelixPredictor=n.HelixPredictionOutcome=n.HelixPrediction=n.HelixPredictionApi=n.HelixPollChoice=n.HelixPoll=n.HelixPollApi=n.HelixWarning=n.HelixUnbanRequest=n.HelixShieldModeStatus=n.HelixBlockedTerm=n.HelixBanUser=n.HelixModeratedChannel=n.HelixModerator=n.HelixBan=n.HelixModerationApi=n.HelixHypeTrainEvent=n.HelixHypeTrainContribution=n.HelixHypeTrainApi=void 0,n.HellFreezesOverError=n.HelixExtension=n.extractUserName=n.extractUserId=n.HelixPaginatedRequestWithTotal=n.HelixPaginatedRequest=n.ApiReportedRequest=n.StreamNotLiveError=n.ConfigError=n.HelixWhisperApi=void 0;var e=MS();Object.defineProperty(n,"ApiClient",{enumerable:!0,get:function(){return e.ApiClient}});var t=_y();Object.defineProperty(n,"HelixBitsApi",{enumerable:!0,get:function(){return t.HelixBitsApi}});var r=py();Object.defineProperty(n,"HelixBitsLeaderboard",{enumerable:!0,get:function(){return r.HelixBitsLeaderboard}});var i=hy();Object.defineProperty(n,"HelixBitsLeaderboardEntry",{enumerable:!0,get:function(){return i.HelixBitsLeaderboardEntry}});var a=my();Object.defineProperty(n,"HelixCheermoteList",{enumerable:!0,get:function(){return a.HelixCheermoteList}});var s=wy();Object.defineProperty(n,"HelixChannelApi",{enumerable:!0,get:function(){return s.HelixChannelApi}});var o=vy();Object.defineProperty(n,"HelixAdSchedule",{enumerable:!0,get:function(){return o.HelixAdSchedule}});var u=gy();Object.defineProperty(n,"HelixChannel",{enumerable:!0,get:function(){return u.HelixChannel}});var h=fy();Object.defineProperty(n,"HelixChannelEditor",{enumerable:!0,get:function(){return h.HelixChannelEditor}});var m=yy();Object.defineProperty(n,"HelixChannelFollower",{enumerable:!0,get:function(){return m.HelixChannelFollower}});var w=by();Object.defineProperty(n,"HelixFollowedChannel",{enumerable:!0,get:function(){return w.HelixFollowedChannel}});var y=Xy();Object.defineProperty(n,"HelixChannelReference",{enumerable:!0,get:function(){return y.HelixChannelReference}});var _=Cy();Object.defineProperty(n,"HelixChannelPointsApi",{enumerable:!0,get:function(){return _.HelixChannelPointsApi}});var p=xy();Object.defineProperty(n,"HelixCustomReward",{enumerable:!0,get:function(){return p.HelixCustomReward}});var l=Sy();Object.defineProperty(n,"HelixCustomRewardRedemption",{enumerable:!0,get:function(){return l.HelixCustomRewardRedemption}});var d=Ay();Object.defineProperty(n,"HelixCharityApi",{enumerable:!0,get:function(){return d.HelixCharityApi}});var b=Ey();Object.defineProperty(n,"HelixCharityCampaign",{enumerable:!0,get:function(){return b.HelixCharityCampaign}});var S=Hy();Object.defineProperty(n,"HelixCharityCampaignDonation",{enumerable:!0,get:function(){return S.HelixCharityCampaignDonation}});var R=rd();Object.defineProperty(n,"HelixCharityCampaignAmount",{enumerable:!0,get:function(){return R.HelixCharityCampaignAmount}});var P=jy();Object.defineProperty(n,"HelixChatApi",{enumerable:!0,get:function(){return P.HelixChatApi}});var f=Py();Object.defineProperty(n,"HelixChatBadgeSet",{enumerable:!0,get:function(){return f.HelixChatBadgeSet}});var H=Iy();Object.defineProperty(n,"HelixChatBadgeVersion",{enumerable:!0,get:function(){return H.HelixChatBadgeVersion}});var E=nd();Object.defineProperty(n,"HelixChatSettings",{enumerable:!0,get:function(){return E.HelixChatSettings}});var B=Dy();Object.defineProperty(n,"HelixChatChatter",{enumerable:!0,get:function(){return B.HelixChatChatter}});var j=Sl();Object.defineProperty(n,"HelixEmote",{enumerable:!0,get:function(){return j.HelixEmote}});var Z=Ty();Object.defineProperty(n,"HelixChannelEmote",{enumerable:!0,get:function(){return Z.HelixChannelEmote}});var z=By();Object.defineProperty(n,"HelixEmoteFromSet",{enumerable:!0,get:function(){return z.HelixEmoteFromSet}});var Te=Oy();Object.defineProperty(n,"HelixUserEmote",{enumerable:!0,get:function(){return Te.HelixUserEmote}});var se=Uy();Object.defineProperty(n,"HelixPrivilegedChatSettings",{enumerable:!0,get:function(){return se.HelixPrivilegedChatSettings}});var D=qy();Object.defineProperty(n,"HelixSentChatMessage",{enumerable:!0,get:function(){return D.HelixSentChatMessage}});var N=ky();Object.defineProperty(n,"HelixSharedChatSessionParticipant",{enumerable:!0,get:function(){return N.HelixSharedChatSessionParticipant}});var ae=My();Object.defineProperty(n,"HelixSharedChatSession",{enumerable:!0,get:function(){return ae.HelixSharedChatSession}});var he=Ny();Object.defineProperty(n,"HelixClipApi",{enumerable:!0,get:function(){return he.HelixClipApi}});var we=Ly();Object.defineProperty(n,"HelixClip",{enumerable:!0,get:function(){return we.HelixClip}});var X=$y();Object.defineProperty(n,"HelixContentClassificationLabelApi",{enumerable:!0,get:function(){return X.HelixContentClassificationLabelApi}});var dt=Fy();Object.defineProperty(n,"HelixContentClassificationLabel",{enumerable:!0,get:function(){return dt.HelixContentClassificationLabel}});var J=Qy();Object.defineProperty(n,"HelixEntitlementApi",{enumerable:!0,get:function(){return J.HelixEntitlementApi}});var Se=Gy();Object.defineProperty(n,"HelixDropsEntitlement",{enumerable:!0,get:function(){return Se.HelixDropsEntitlement}});var Ce=Ky();Object.defineProperty(n,"HelixEventSubApi",{enumerable:!0,get:function(){return Ce.HelixEventSubApi}});var tt=Vy();Object.defineProperty(n,"HelixEventSubConduit",{enumerable:!0,get:function(){return tt.HelixEventSubConduit}});var Ie=zy();Object.defineProperty(n,"HelixEventSubConduitShard",{enumerable:!0,get:function(){return Ie.HelixEventSubConduitShard}});var $e=id();Object.defineProperty(n,"HelixEventSubSubscription",{enumerable:!0,get:function(){return $e.HelixEventSubSubscription}});var De=Wy();Object.defineProperty(n,"HelixPaginatedEventSubSubscriptionsRequest",{enumerable:!0,get:function(){return De.HelixPaginatedEventSubSubscriptionsRequest}});var Be=Zy();Object.defineProperty(n,"HelixExtensionsApi",{enumerable:!0,get:function(){return Be.HelixExtensionsApi}});var st=Jy();Object.defineProperty(n,"HelixExtensionBitsProduct",{enumerable:!0,get:function(){return st.HelixExtensionBitsProduct}});var ht=Yy();Object.defineProperty(n,"HelixExtensionTransaction",{enumerable:!0,get:function(){return ht.HelixExtensionTransaction}});var vt=eb();Object.defineProperty(n,"HelixGameApi",{enumerable:!0,get:function(){return vt.HelixGameApi}});var ki=ad();Object.defineProperty(n,"HelixGame",{enumerable:!0,get:function(){return ki.HelixGame}});var sr=rb();Object.defineProperty(n,"HelixGoalApi",{enumerable:!0,get:function(){return sr.HelixGoalApi}});var Mi=tb();Object.defineProperty(n,"HelixGoal",{enumerable:!0,get:function(){return Mi.HelixGoal}});var or=ab();Object.defineProperty(n,"HelixHypeTrainApi",{enumerable:!0,get:function(){return or.HelixHypeTrainApi}});var rt=nb();Object.defineProperty(n,"HelixHypeTrainContribution",{enumerable:!0,get:function(){return rt.HelixHypeTrainContribution}});var Dl=ib();Object.defineProperty(n,"HelixHypeTrainEvent",{enumerable:!0,get:function(){return Dl.HelixHypeTrainEvent}});var Bl=pb();Object.defineProperty(n,"HelixModerationApi",{enumerable:!0,get:function(){return Bl.HelixModerationApi}});var Ol=sb();Object.defineProperty(n,"HelixBan",{enumerable:!0,get:function(){return Ol.HelixBan}});var Ul=ub();Object.defineProperty(n,"HelixModerator",{enumerable:!0,get:function(){return Ul.HelixModerator}});var ql=lb();Object.defineProperty(n,"HelixModeratedChannel",{enumerable:!0,get:function(){return ql.HelixModeratedChannel}});var ro=sd();Object.defineProperty(n,"HelixBanUser",{enumerable:!0,get:function(){return ro.HelixBanUser}});var kl=ob();Object.defineProperty(n,"HelixBlockedTerm",{enumerable:!0,get:function(){return kl.HelixBlockedTerm}});var Ad=cb();Object.defineProperty(n,"HelixShieldModeStatus",{enumerable:!0,get:function(){return Ad.HelixShieldModeStatus}});var k=db();Object.defineProperty(n,"HelixUnbanRequest",{enumerable:!0,get:function(){return k.HelixUnbanRequest}});var oe=hb();Object.defineProperty(n,"HelixWarning",{enumerable:!0,get:function(){return oe.HelixWarning}});var no=gb();Object.defineProperty(n,"HelixPollApi",{enumerable:!0,get:function(){return no.HelixPollApi}});var io=_b();Object.defineProperty(n,"HelixPoll",{enumerable:!0,get:function(){return io.HelixPoll}});var Ml=mb();Object.defineProperty(n,"HelixPollChoice",{enumerable:!0,get:function(){return Ml.HelixPollChoice}});var ji=vb();Object.defineProperty(n,"HelixPredictionApi",{enumerable:!0,get:function(){return ji.HelixPredictionApi}});var ao=bb();Object.defineProperty(n,"HelixPrediction",{enumerable:!0,get:function(){return ao.HelixPrediction}});var so=yb();Object.defineProperty(n,"HelixPredictionOutcome",{enumerable:!0,get:function(){return so.HelixPredictionOutcome}});var jl=fb();Object.defineProperty(n,"HelixPredictor",{enumerable:!0,get:function(){return jl.HelixPredictor}});var Ll=xb();Object.defineProperty(n,"HelixRaidApi",{enumerable:!0,get:function(){return Ll.HelixRaidApi}});var lr=wb();Object.defineProperty(n,"HelixRaid",{enumerable:!0,get:function(){return lr.HelixRaid}});var oo=td();Object.defineProperty(n,"HelixUserRelation",{enumerable:!0,get:function(){return oo.HelixUserRelation}});var Li=Hb();Object.defineProperty(n,"HelixScheduleApi",{enumerable:!0,get:function(){return Li.HelixScheduleApi}});var lo=Eb();Object.defineProperty(n,"HelixSchedule",{enumerable:!0,get:function(){return lo.HelixSchedule}});var Nl=Cl();Object.defineProperty(n,"HelixScheduleSegment",{enumerable:!0,get:function(){return Nl.HelixScheduleSegment}});var uo=Cb();Object.defineProperty(n,"HelixPaginatedScheduleSegmentRequest",{enumerable:!0,get:function(){return uo.HelixPaginatedScheduleSegmentRequest}});var Fl=Rb();Object.defineProperty(n,"HelixSearchApi",{enumerable:!0,get:function(){return Fl.HelixSearchApi}});var co=Ab();Object.defineProperty(n,"HelixChannelSearchResult",{enumerable:!0,get:function(){return co.HelixChannelSearchResult}});var ho=Db();Object.defineProperty(n,"HelixStreamApi",{enumerable:!0,get:function(){return ho.HelixStreamApi}});var $l=Ib();Object.defineProperty(n,"HelixStream",{enumerable:!0,get:function(){return $l.HelixStream}});var Gl=od();Object.defineProperty(n,"HelixStreamMarker",{enumerable:!0,get:function(){return Gl.HelixStreamMarker}});var Ql=Pb();Object.defineProperty(n,"HelixStreamMarkerWithVideo",{enumerable:!0,get:function(){return Ql.HelixStreamMarkerWithVideo}});var Wl=Bb();Object.defineProperty(n,"HelixPaginatedSubscriptionsRequest",{enumerable:!0,get:function(){return Wl.HelixPaginatedSubscriptionsRequest}});var Ni=Ob();Object.defineProperty(n,"HelixSubscriptionApi",{enumerable:!0,get:function(){return Ni.HelixSubscriptionApi}});var Fi=ud();Object.defineProperty(n,"HelixSubscription",{enumerable:!0,get:function(){return Fi.HelixSubscription}});var Vl=ld();Object.defineProperty(n,"HelixUserSubscription",{enumerable:!0,get:function(){return Vl.HelixUserSubscription}});var zl=qb();Object.defineProperty(n,"HelixTeamApi",{enumerable:!0,get:function(){return zl.HelixTeamApi}});var Kl=cd();Object.defineProperty(n,"HelixTeam",{enumerable:!0,get:function(){return Kl.HelixTeam}});var Xl=Ub();Object.defineProperty(n,"HelixTeamWithUsers",{enumerable:!0,get:function(){return Xl.HelixTeamWithUsers}});var je=Fb();Object.defineProperty(n,"HelixUserApi",{enumerable:!0,get:function(){return je.HelixUserApi}});var Jl=Nb();Object.defineProperty(n,"HelixUserBlock",{enumerable:!0,get:function(){return Jl.HelixUserBlock}});var Yl=jS();Object.defineProperty(n,"HelixFollow",{enumerable:!0,get:function(){return Yl.HelixFollow}});var Zl=Lb();Object.defineProperty(n,"HelixPrivilegedUser",{enumerable:!0,get:function(){return Zl.HelixPrivilegedUser}});var po=hd();Object.defineProperty(n,"HelixUser",{enumerable:!0,get:function(){return po.HelixUser}});var eu=dd();Object.defineProperty(n,"HelixBaseExtension",{enumerable:!0,get:function(){return eu.HelixBaseExtension}});var $i=kb();Object.defineProperty(n,"HelixInstalledExtension",{enumerable:!0,get:function(){return $i.HelixInstalledExtension}});var Gi=Mb();Object.defineProperty(n,"HelixInstalledExtensionList",{enumerable:!0,get:function(){return Gi.HelixInstalledExtensionList}});var tu=jb();Object.defineProperty(n,"HelixUserExtension",{enumerable:!0,get:function(){return tu.HelixUserExtension}});var ru=Gb();Object.defineProperty(n,"HelixVideoApi",{enumerable:!0,get:function(){return ru.HelixVideoApi}});var mo=$b();Object.defineProperty(n,"HelixVideo",{enumerable:!0,get:function(){return mo.HelixVideo}});var Ot=Qb();Object.defineProperty(n,"HelixWhisperApi",{enumerable:!0,get:function(){return Ot.HelixWhisperApi}});var ur=ny();Object.defineProperty(n,"ConfigError",{enumerable:!0,get:function(){return ur.ConfigError}});var nu=Tb();Object.defineProperty(n,"StreamNotLiveError",{enumerable:!0,get:function(){return nu.StreamNotLiveError}});var iu=Wb();Object.defineProperty(n,"ApiReportedRequest",{enumerable:!0,get:function(){return iu.ApiReportedRequest}});var Qi=ke();Object.defineProperty(n,"HelixPaginatedRequest",{enumerable:!0,get:function(){return Qi.HelixPaginatedRequest}});var au=Zs();Object.defineProperty(n,"HelixPaginatedRequestWithTotal",{enumerable:!0,get:function(){return au.HelixPaginatedRequestWithTotal}});var cr=q();Object.defineProperty(n,"extractUserId",{enumerable:!0,get:function(){return cr.extractUserId}}),Object.defineProperty(n,"extractUserName",{enumerable:!0,get:function(){return cr.extractUserName}}),Object.defineProperty(n,"HelixExtension",{enumerable:!0,get:function(){return cr.HelixExtension}}),Object.defineProperty(n,"HellFreezesOverError",{enumerable:!0,get:function(){return cr.HellFreezesOverError}})}(wu)),wu}var $u,gg;function NS(){if(gg)return $u;gg=1;const n=_f(),e=gf(),t=Fc(),r=ir(),i=ff(),a=yf(),s=bf(),o=_x(),{ApiClient:u}=LS(),{AppTokenAuthProvider:h}=cy();class m{constructor(y,_,p){if(p&&p.apiClient)this.apiClient=p.apiClient;else if(y!==void 0&&_!==void 0){const l=new h(y,_);this.apiClient=new u({authProvider:l})}this.emotes=new t,this.channels=new t,this.ffzModifiersFetched=!1}get globalChannel(){return this.channels.get(null)}_setupChannel(y,_=null){let p=this.channels.get(y);return p||(p=new e(this,y),this.channels.set(y,p)),_&&(p.format=_),p}_getRawTwitchEmotes(y){if(!this.apiClient)throw new Error("Client id or client secret not provided.");return y?this.apiClient.chat.getChannelEmotes(y):this.apiClient.chat.getGlobalEmotes()}_cacheTwitchEmote(y,_,p=null){const l=this._setupChannel(y),d=p||new s(l,_.id,_);return this.emotes.set(d.code,d),l.emotes.set(d.code,d),d}_getRawBTTVEmotes(y){const _=y?r.BTTV.Channel(y):r.BTTV.Global;return o.get(_).then(p=>p.data instanceof Array?p.data:[...p.data.channelEmotes,...p.data.sharedEmotes])}_cacheBTTVEmote(y,_,p=null){const l=this._setupChannel(y),d=p||new n(l,_.id,_);return this.emotes.set(d.code,d),l.emotes.set(d.code,d),d}_getRawFFZEmoteSet(y){const _=r.FFZ.Set(y);return o.get(_).then(p=>p.data.set.emoticons)}_getRawFFZEmotes(y){const _=r.FFZ.Channel(y);return o.get(_).then(p=>{const l=[];for(const d of Object.keys(p.data.sets)){const b=p.data.sets[d];l.push(...b.emoticons)}return l})}_cacheFFZEmote(y,_,p=null){const l=this._setupChannel(y),d=p||new i(l,_.id,_);return this.emotes.set(d.code,d),l.emotes.set(d.code,d),d}_getRawSevenTVEmotes(y){const _=y?r.SevenTV.Channel(y):r.SevenTV.Global;return o.get(_).then(p=>p.data)}_cacheSevenTVEmote(y,_,p,l=null){const d=this._setupChannel(y,p),b=l||new a(d,_.id,_);return this.emotes.set(b.code,b),d.emotes.set(b.code,b),b}fetchTwitchEmotes(y=null){return this._getRawTwitchEmotes(y).then(_=>{for(const p of _)this._cacheTwitchEmote(y,{code:p.name,id:p.id,formats:p.formats});return this.channels.get(y).emotes.filter(p=>p.type==="twitch")})}fetchBTTVEmotes(y=null){return this._getRawBTTVEmotes(y).then(_=>{for(const p of _)this._cacheBTTVEmote(y,p);return this.channels.get(y).emotes.filter(p=>p.type==="bttv")})}async fetchFFZEmotes(y=null){return this.ffzModifiersFetched||(this.ffzModifiersFetched=!0,await this._getRawFFZEmoteSet(r.FFZ.sets.Modifiers).then(_=>{for(const p of _)this._cacheFFZEmote(null,p)})),y?this._getRawFFZEmotes(y).then(_=>{for(const p of _)this._cacheFFZEmote(y,p);return this.channels.get(y).emotes.filter(p=>p.type==="ffz")}):this._getRawFFZEmoteSet(r.FFZ.sets.Global).then(_=>{for(const p of _)this._cacheFFZEmote(y,p);return this.channels.get(y).emotes.filter(p=>p.type==="ffz")})}fetchSevenTVEmotes(y=null,_="webp"){return this._getRawSevenTVEmotes(y).then(p=>{if("emotes"in p)for(const l of p.emotes)this._cacheSevenTVEmote(y,l,_);else for(const l of p.emote_set.emotes)this._cacheSevenTVEmote(y,l,_);return this.channels.get(y).emotes.filter(l=>l.type==="7tv")})}fromObject(y){const _=[],p={bttv:{class:n,cache:(l,d,b)=>this._cacheBTTVEmote(d,null,b)},ffz:{class:i,cache:(l,d,b)=>this._cacheFFZEmote(d,null,b)},"7tv":{class:a,cache:(l,d,b)=>this._cacheSevenTVEmote(d,null,l.imageType,b)},twitch:{class:s,cache:(l,d,b)=>this._cacheTwitchEmote(d,null,b)}};for(const l of y){const{type:d}=l;if(!Object.keys(p).includes(d))throw new TypeError(`Unknown type: ${d}`);const b=p[d].class;this._setupChannel(l.channel_id,d==="7tv"?l.imageType:null);const S=b.fromObject(l,this.channels.get(l.channel_id));p[d].cache(l,l.channel_id,S),_.push(S)}return _}}return $u=m,$u}var Gu,fg;function FS(){if(fg)return Gu;fg=1;const n=ir();class e{constructor(r,i={}){this.fetcher=r,this.options=Object.assign({template:"",type:"markdown",match:/:(.+?):/g},i),this._validateOptions(this.options)}_validateOptions(r){if(r.template&&typeof r.template!="string")throw new TypeError("Template must be a string");if(!["markdown","html","bbcode","plain"].includes(r.type))throw new TypeError("Parse type must be one of `markdown`, `html`, `bbcode`, or `plain`");if(!(r.match instanceof RegExp)||!r.match.global)throw new TypeError("Match must be a global RegExp.")}parse(r,i=0){return r.replace(this.options.match,(s,o)=>{const u=this.fetcher.emotes.get(o);if(!u)return s;if(u.modifier)return"";const h=this.options.template||n.Templates[this.options.type],m=u.toLink(i);return h.replace(/{link}/g,m).replace(/{name}/g,u.code).replace(/{size}/g,i).replace(/{creator}/g,u.ownerName||"global")})}}return Gu=e,Gu}var Qu,yg;function $S(){return yg||(yg=1,Qu={BTTVEmote:_f(),Channel:gf(),Collection:Fc(),Constants:ir(),Emote:Ys(),EmoteFetcher:NS(),EmoteParser:FS(),FFZEmote:ff(),SevenTVEmote:yf(),TwitchEmote:bf()}),Qu}var GS=$S();const Wu=Js(GS),El=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";var St,ie;(function(n){n[n.CRITICAL=0]="CRITICAL",n[n.ERROR=1]="ERROR",n[n.WARNING=2]="WARNING",n[n.INFO=3]="INFO",n[n.DEBUG=4]="DEBUG",n[n.TRACE=7]="TRACE"})(ie||(ie={}));function md(n){if(typeof n=="number"){if(Object.prototype.hasOwnProperty.call(ie,n))return n;var e=Object.keys(ie).map(function(r){return parseInt(r,10)}).filter(function(r){return!isNaN(r)&&r<n});return e.length?Math.max.apply(Math,e):ie.WARNING}var t=n.replace(/\d+$/,"").toUpperCase();if(!Object.prototype.hasOwnProperty.call(ie,t))throw new Error("Unknown log level string: ".concat(n));return ie[t]}var QS=El?console.log.bind(console):console.debug.bind(console),Vb=(St={},St[ie.CRITICAL]=console.error.bind(console),St[ie.ERROR]=console.error.bind(console),St[ie.WARNING]=console.warn.bind(console),St[ie.INFO]=console.info.bind(console),St[ie.DEBUG]=QS.bind(console),St[ie.TRACE]=console.trace.bind(console),St);function V(n){return function(e,t){Object.defineProperty(e,t,{get:function(){},set:function(r){Object.defineProperty(this,t,{value:r,writable:!0,enumerable:n})},enumerable:n})}}function bg(n){var e;return(e=[]).concat.apply(e,Ai([],Bt(n),!1))}function vg(n){return $c(this,void 0,Promise,function(){return _l(this,function(e){switch(e.label){case 0:return typeof n!="function"?[3,2]:[4,n()];case 1:return[2,e.sent()];case 2:return[2,n]}})})}function WS(n){return typeof n=="function"?n():n}function VS(n){var e,t,r;return _l(this,function(i){switch(i.label){case 0:e=0,t=1,i.label=1;case 1:return e<n?[4,e]:[3,3];case 2:return i.sent(),r=Bt([t,e+t],2),e=r[0],t=r[1],[3,1];case 3:return[4,n];case 4:return i.sent(),[3,3];case 5:return[2]}})}function ys(n,e){return Object.assign.apply(Object,Ai([{}],Bt(n.map(e)),!1))}function sc(n,e){Object.entries(n).forEach(function(t){var r=Bt(t,2),i=r[0],a=r[1];return e(a,i)})}function zb(n,e){if(typeof e!="function"){var t=e;e=function(r){return r[t].toString()}}return ys(n,function(r){var i;return i={},i[e(r)]=r,i})}function Kb(n){return n==null}function Xe(n,e){return Kb(n)?null:e(n)}function ct(n,e){return Kb(n)?void 0:e(n)}function Do(){var n,e,t=new Promise(function(r,i){n=r,e=i});return{promise:t,resolve:n,reject:e}}function zS(n,e,t){if(typeof n=="number"&&(n=n.toString()),e=e-n.length,e<=0)return n;t===void 0&&(t=" ");var r="";do(e&1)===1&&(r+=t),e>>=1,e&&(t+=t);while(e);return r+n}function er(n,e,t){var r=n.split(e);return r.length<=t?r:Ai(Ai([],Bt(r.slice(0,t-1)),!1),[r.slice(t-1).join(e)],!1)}var KS={},Vu,zu,Bo=typeof process>"u"?[]:(zu=(Vu=KS.LOGGING)===null||Vu===void 0?void 0:Vu.split(";").map(function(n){var e=n.split("=",2),t=e[0],r=e[1];return r?[t==="default"?void 0:t.split(":"),md(r)]:null}).filter(function(n){return!!n}).sort(function(n,e){var t,r,i=n[0],a=e[0];return((t=a?.length)!==null&&t!==void 0?t:0)-((r=i?.length)!==null&&r!==void 0?r:0)}))!==null&&zu!==void 0?zu:[],Ku=Bo.findIndex(function(n){var e=n[0];return!e}),Xb=void 0;Ku!==-1&&(Xb=Bo[Ku][1],Bo.splice(Ku));function XS(n,e){return e.length<=n.length&&e.every(function(t,r){return t===n[r]})}function Jb(n){for(var e=n.split(":"),t=0,r=Bo;t<r.length;t++){var i=r[t],a=i[0],s=i[1];if(XS(e,a))return s}return Xb}var Yb=function(){function n(e){var t=e.name,r=e.minLevel,i=e.emoji,a=i===void 0?!1:i,s=e.colors,o=e.timestamps,u=o===void 0?El:o,h,m;this._name=t,this._minLevel=(m=(h=ct(r,function(w){return md(w)}))!==null&&h!==void 0?h:Jb(t))!==null&&m!==void 0?m:ie.WARNING,this._emoji=a,this._colors=s,this._timestamps=u}return n.prototype.crit=function(e){this.log(ie.CRITICAL,e)},n.prototype.error=function(e){this.log(ie.ERROR,e)},n.prototype.warn=function(e){this.log(ie.WARNING,e)},n.prototype.info=function(e){this.log(ie.INFO,e)},n.prototype.debug=function(e){this.log(ie.DEBUG,e)},n.prototype.trace=function(e){this.log(ie.TRACE,e)},n}(),JS=function(n){ml(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.log=function(t,r){if(!(t>this._minLevel)){var i=Vb[t],a="[".concat(this._name,"] ").concat(r);this._timestamps&&(a="[".concat(new Date().toISOString(),"] ").concat(r)),i(a)}},e}(Yb),YS=function(){function n(e){var t=e.name,r=e.minLevel,i=e.custom,a;this._minLevel=(a=ct(r,function(s){return md(s)}))!==null&&a!==void 0?a:Jb(t),this._override=typeof i=="function"?{log:i}:i}return n.prototype.log=function(e,t){this._shouldLog(e)&&this._override.log(e,t)},n.prototype.crit=function(e){this._override.crit?this._shouldLog(ie.CRITICAL)&&this._override.crit(e):this.log(ie.CRITICAL,e)},n.prototype.error=function(e){this._override.error?this._shouldLog(ie.ERROR)&&this._override.error(e):this.log(ie.ERROR,e)},n.prototype.warn=function(e){this._override.warn?this._shouldLog(ie.WARNING)&&this._override.warn(e):this.log(ie.WARNING,e)},n.prototype.info=function(e){this._override.info?this._shouldLog(ie.INFO)&&this._override.info(e):this.log(ie.INFO,e)},n.prototype.debug=function(e){this._override.debug?this._shouldLog(ie.DEBUG)&&this._override.debug(e):this.log(ie.DEBUG,e)},n.prototype.trace=function(e){this._override.trace?this._shouldLog(ie.TRACE)&&this._override.trace(e):this.log(ie.TRACE,e)},n.prototype._shouldLog=function(e){return this._minLevel===void 0||this._minLevel>=e},n}(),Ct,Et,Ht,ZS=(Ct={},Ct[ie.CRITICAL]="",Ct[ie.ERROR]="",Ct[ie.WARNING]=" ",Ct[ie.INFO]=" ",Ct[ie.DEBUG]="",Ct[ie.TRACE]="",Ct),e0={black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,blackBright:90,redBright:91,greenBright:92,yellowBright:93,blueBright:94,magentaBright:95,cyanBright:96,whiteBright:97},t0={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBlackBright:100,bgRedBright:101,bgGreenBright:102,bgYellowBright:103,bgBlueBright:104,bgMagentaBright:105,bgCyanBright:106,bgWhiteBright:107};function Hl(n,e,t){return function(r){return"\x1B[".concat(n,"m").concat(t?t(r):r,"\x1B[").concat(e,"m")}}function ut(n){return Hl(e0[n],39)}function ds(n,e){return Hl(t0[n],49,e)}var r0=(Et={},Et[ie.CRITICAL]=ut("red"),Et[ie.ERROR]=ut("redBright"),Et[ie.WARNING]=ut("yellow"),Et[ie.INFO]=ut("blue"),Et[ie.DEBUG]=ut("magenta"),Et[ie.TRACE]=Hl(0,0),Et),wg=(Ht={},Ht[ie.CRITICAL]=ds("bgRed",ut("white")),Ht[ie.ERROR]=ds("bgRedBright",ut("white")),Ht[ie.WARNING]=ds("bgYellow",ut("black")),Ht[ie.INFO]=ds("bgBlue",ut("white")),Ht[ie.DEBUG]=ds("bgMagenta",ut("black")),Ht[ie.TRACE]=Hl(7,27),Ht),n0=function(n){ml(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.log=function(t,r){var i,a,s;if(!(t>this._minLevel)){var o=Vb[t],u="";if(this._timestamps&&(u+="[".concat(new Date().toISOString(),"] ")),this._emoji){var h=ZS[t];u+="".concat(h," ")}var m=(s=(i=this._colors)!==null&&i!==void 0?i:(a=process.stdout)===null||a===void 0?void 0:a.isTTY)!==null&&s!==void 0?s:!0;m?u+="".concat(wg[t](this._name)," ").concat(wg[t](ie[t])," ").concat(r0[t](r)):u+="[".concat(this._name,":").concat(ie[t].toLowerCase(),"] ").concat(r),o(u)}},e}(Yb);function Al(n){return n.custom?new YS(n):El?new n0(n):new JS(n)}let _d=class extends Error{constructor(...e){var t;super(...e),Object.setPrototypeOf(this,new.target.prototype),(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}};class xg extends _d{}class Zb extends _d{}class Sg extends _d{constructor(e){super(`Need to retry after ${e} ms`),this._retryAt=Date.now()+e}get retryAt(){return this._retryAt}}class gd{constructor({logger:e}){this._queue=[],this._batchRunning=!1,this._paused=!1,this._logger=Al({name:"rate-limiter",emoji:!0,...e})}async request(e,t){return this._logger.trace("request start"),await new Promise((r,i)=>{var a;const s={req:e,resolve:r,reject:i,limitReachedBehavior:(a=t?.limitReachedBehavior)!==null&&a!==void 0?a:"enqueue"};this._batchRunning||this._nextBatchTimer||this._paused?(this._logger.trace(`request queued batchRunning:${this._batchRunning.toString()} hasNextBatchTimer:${(!!this._nextBatchTimer).toString()} paused:${this._paused.toString()}`),this._queue.push(s)):this._runRequestBatch([s])})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextBatch()}get stats(){var e,t,r,i,a;return{lastKnownLimit:(t=(e=this._parameters)===null||e===void 0?void 0:e.limit)!==null&&t!==void 0?t:null,lastKnownRemainingRequests:(i=(r=this._parameters)===null||r===void 0?void 0:r.remaining)!==null&&i!==void 0?i:null,lastKnownResetDate:Xe((a=this._parameters)===null||a===void 0?void 0:a.resetsAt,s=>new Date(s))}}async _runRequestBatch(e){this._logger.trace(`runRequestBatch start specs:${e.length}`),this._batchRunning=!0,this._parameters&&this._logger.debug(`Remaining requests: ${this._parameters.remaining}`),this._logger.debug(`Doing ${e.length} requests, new queue length is ${this._queue.length}`);const t=e.map(async s=>{const{req:o,resolve:u,reject:h}=s;try{const m=await this.doRequest(o),w=this.needsToRetryAfter(m);if(w!==null)throw this._queue.unshift(s),this._logger.info(`Retrying after ${w} ms`),new Sg(w);const y=this.getParametersFromResponse(m);return u(m),y}catch(m){if(m instanceof Sg)throw m;h(m);return}}),r=await Promise.allSettled(t),i=r.filter(s=>s.status==="rejected"),a=Date.now();if(i.length){this._logger.trace("runRequestBatch some rejected");const o=Math.max(a,...i.map(u=>u.reason.retryAt))-a;this._logger.warn(`Waiting for ${o} ms because the rate limit was exceeded`),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},o)}else{this._logger.trace("runRequestBatch none rejected");const s=r.filter(o=>o.status==="fulfilled"&&o.value!==void 0).map(o=>o.value).reduce((o,u)=>o?u.remaining<o.remaining?u:o:u,void 0);if(this._batchRunning=!1,s)if(this._parameters=s,s.resetsAt<a||s.remaining>0)this._logger.trace("runRequestBatch canRunMore"),this._runNextBatch();else{const o=s.resetsAt-a;this._logger.trace(`runRequestBatch delay:${o}`),this._logger.warn(`Waiting for ${o} ms because the rate limit was reached`),this._queue=this._queue.filter(u=>{switch(u.limitReachedBehavior){case"enqueue":return!0;case"null":return u.resolve(null),!1;case"throw":return u.reject(new Zb("Request removed from queue because the rate limit was reached")),!1;default:throw new Error("this should never happen")}}),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},o)}}this._logger.trace("runRequestBatch end")}_runNextBatch(){if(this._paused)return;this._logger.trace("runNextBatch start"),this._nextBatchTimer&&(clearTimeout(this._nextBatchTimer),this._nextBatchTimer=void 0);const e=this._parameters?Math.min(this._parameters.remaining,this._parameters.limit/10):1,t=this._queue.splice(0,e);t.length&&this._runRequestBatch(t),this._logger.trace("runNextBatch end")}}class i0{constructor(e){this._children=new Map,this._paused=!1,this._partitionKeyCallback=e.getPartitionKey,this._createChildCallback=e.createChild}async request(e,t){const r=this._partitionKeyCallback(e);return await this._getChild(r).request(e,t)}clear(){for(const e of this._children.values())e.clear()}pause(){this._paused=!0;for(const e of this._children.values())e.pause()}resume(){this._paused=!1;for(const e of this._children.values())e.resume()}getChildStats(e){if(!this._children.has(e))return null;const t=this._children.get(e);return t instanceof gd?t.stats:null}_getChild(e){if(this._children.has(e))return this._children.get(e);const t=this._createChildCallback(e);return this._paused&&t.pause(),this._children.set(e,t),t}}class a0{constructor({logger:e,bucketSize:t,timeFrame:r,doRequest:i,getPartitionKey:a}){this._partitionedQueue=new Map,this._usedFromBucket=new Map,this._counterTimers=new Set,this._paused=!1,this._destroyed=!1,this._logger=Al({name:"rate-limiter",emoji:!0,...e}),this._bucketSize=t,this._timeFrame=r,this._callback=i,this._partitionKeyCallback=a}async request(e,t){return await new Promise((r,i)=>{var a,s;if(this._destroyed){i(new xg("Rate limiter was destroyed"));return}const o={req:e,resolve:r,reject:i,limitReachedBehavior:(a=t?.limitReachedBehavior)!==null&&a!==void 0?a:"enqueue"},u=this._partitionKeyCallback(e),h=(s=this._usedFromBucket.get(u))!==null&&s!==void 0?s:0;if(h>=this._bucketSize||this._paused)switch(o.limitReachedBehavior){case"enqueue":{const m=this._getPartitionedQueue(u);m.push(o),h+m.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} for ${u?`partition ${u}`:"default partition"} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${m.length}`):this._logger.info(`Enqueueing request for ${u?`partition ${u}`:"default partition"} because the rate limiter is paused; queue size is ${m.length}`);break}case"null":{o.resolve(null),this._paused?this._logger.info(`Returning null for request for ${u?`partition ${u}`:"default partition"} because the rate limiter is paused`):this._logger.warn(`Rate limit of ${this._bucketSize} for ${u?`partition ${u}`:"default partition"} was reached, dropping request and returning null`);break}case"throw":{o.reject(new Zb(`Request dropped because ${this._paused?"the rate limiter is paused":`the rate limit for ${u?`partition ${u}`:"default partition"} was reached`}`));break}default:throw new Error("this should never happen")}else this._runRequest(o,u)})}clear(){this._partitionedQueue.clear()}pause(){this._paused=!0}resume(){this._paused=!1;for(const e of this._partitionedQueue.keys())this._runNextRequest(e)}destroy(){this._paused=!1,this._destroyed=!0,this._counterTimers.forEach(e=>{clearTimeout(e)});for(const e of this._partitionedQueue.values())for(const t of e)t.reject(new xg("Rate limiter was destroyed"));this._partitionedQueue.clear()}_getPartitionedQueue(e){if(this._partitionedQueue.has(e))return this._partitionedQueue.get(e);const t=[];return this._partitionedQueue.set(e,t),t}async _runRequest(e,t){var r;const i=this._getPartitionedQueue(t);this._logger.debug(`doing a request for ${t?`partition ${t}`:"default partition"}, new queue length is ${i.length}`),this._usedFromBucket.set(t,((r=this._usedFromBucket.get(t))!==null&&r!==void 0?r:0)+1);const{req:a,resolve:s,reject:o}=e;try{s(await this._callback(a))}catch(u){o(u)}finally{const u=setTimeout(()=>{this._counterTimers.delete(u);const h=this._usedFromBucket.get(t)-1;this._usedFromBucket.set(t,h),i.length&&h<this._bucketSize&&this._runNextRequest(t)},this._timeFrame);this._counterTimers.add(u)}}_runNextRequest(e){if(this._paused)return;const r=this._getPartitionedQueue(e).shift();r&&this._runRequest(r,e)}}var ev=zf();const s0=Js(ev);var o0=Kf();const tv=Js(o0);Xf();Kc();const c=Symbol("twurpleRawData");class K{constructor(e){this[c]=e}}class qi extends Error{constructor(e,t){var r;super(e,t),Object.setPrototypeOf(this,new.target.prototype),(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}}class l0 extends qi{constructor(){super("Relation returned null - this may be a library bug or a race condition in your own code")}}function te(n){if(n==null)throw new l0;return n}function L(n,e,t){return r=>{const i=t?function(){return`[${e}#${this[t]} - please check https://twurple.js.org/reference/${n}/classes/${e}.html for available properties]`}:function(){return`[${e} - please check https://twurple.js.org/reference/${n}/classes/${e}.html for available properties]`};Object.defineProperty(r.prototype,Symbol.for("nodejs.util.inspect.custom"),{value:i,enumerable:!1})}}let oc=class extends K{get authorName(){return this[c].author_name}get bitsEnabled(){return this[c].bits_enabled}get installable(){return this[c].can_install}get configurationLocation(){return this[c].configuration_location}get description(){return this[c].description}get tosUrl(){return this[c].eula_tos_url}get hasChatSupport(){return this[c].has_chat_support}get iconUrl(){return this[c].icon_url}getIconUrl(e){return this[c].icon_urls[e]}get id(){return this[c].id}get name(){return this[c].name}get privacyPolicyUrl(){return this[c].privacy_policy_url}get requestsIdentityLink(){return this[c].request_identity_link}get screenshotUrls(){return this[c].screenshot_urls}get state(){return this[c].state}get subscriptionsSupportLevel(){return this[c].subscriptions_support_level}get summary(){return this[c].summary}get supportEmail(){return this[c].support_email}get version(){return this[c].version}get viewerSummary(){return this[c].viewer_summary}get viewerSummery(){return this[c].viewer_summary}get allowedConfigUrls(){return this[c].allowlisted_config_urls}get allowedPanelUrls(){return this[c].allowlisted_panel_urls}get mobileViewerUrl(){var e,t;return(t=(e=this[c].views.mobile)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get panelViewerUrl(){var e,t;return(t=(e=this[c].views.panel)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get panelHeight(){var e,t;return(t=(e=this[c].views.panel)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:null}get panelCanLinkExternalContent(){var e,t;return(t=(e=this[c].views.panel)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}get overlayViewerUrl(){var e,t;return(t=(e=this[c].views.video_overlay)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get overlayCanLinkExternalContent(){var e,t;return(t=(e=this[c].views.video_overlay)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}get componentViewerUrl(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get componentAspectWidth(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.aspect_width)!==null&&t!==void 0?t:null}get componentAspectHeight(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.aspect_height)!==null&&t!==void 0?t:null}get componentAspectRatioX(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.aspect_ratio_x)!==null&&t!==void 0?t:null}get componentAspectRatioY(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.aspect_ratio_y)!==null&&t!==void 0?t:null}get componentAutoScales(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.autoscale)!==null&&t!==void 0?t:null}get componentScalePixels(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.scale_pixels)!==null&&t!==void 0?t:null}get componentTargetHeight(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.target_height)!==null&&t!==void 0?t:null}get componentSize(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.size)!==null&&t!==void 0?t:null}get componentZoom(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.zoom)!==null&&t!==void 0?t:null}get componentZoomPixels(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.zoom_pixels)!==null&&t!==void 0?t:null}get componentCanLinkExternalContent(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}get configViewerUrl(){var e,t;return(t=(e=this[c].views.config)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get configCanLinkExternalContent(){var e,t;return(t=(e=this[c].views.config)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}};oc=I([L("api","HelixExtension","id")],oc);class Ti extends qi{constructor(e){super(`${e} - this should never happen, please file a bug in the GitHub issue tracker`)}}function A(n){return typeof n=="string"?n:typeof n=="number"?n.toString(10):n.id}function vs(n){return typeof n=="string"?n:n.name}class Ii extends qi{constructor(e,t,r,i,a,s){super(`Encountered HTTP status code ${e}: ${t}

URL: ${r}
Method: ${i}
Body:
${!s&&a.length>150?`${a.slice(0,147)}...`:a}`),this._statusCode=e,this._url=r,this._method=i,this._body=a}get statusCode(){return this._statusCode}get url(){return this._url}get method(){return this._method}get body(){return this._body}}async function lc(n,e){var t;if(!n.ok){const r=n.headers.get("Content-Type")==="application/json",i=r?JSON.stringify(await n.json(),null,2):await n.text(),a=tv(e.query,{arrayFormat:"repeat",addQueryPrefix:!0}),s=`${e.url}${a}`;throw new Ii(n.status,n.statusText,s,(t=e.method)!==null&&t!==void 0?t:"GET",i,r)}}async function rv(n){if(n.status===204)return;const e=await n.text();if(e)return JSON.parse(e)}function u0(n,e,t){switch(e){case"helix":{const r=n.replace(/^\//,"");return t?r==="eventsub/subscriptions"?`http://localhost:${t}/${r}`:`http://localhost:${t}/mock/${r}`:`https://api.twitch.tv/helix/${r}`}case"auth":return`https://id.twitch.tv/oauth2/${n.replace(/^\//,"")}`;case"custom":return n;default:return n}}async function Rl(n,e,t,r,i={},a){var s,o;const u=(s=n.type)!==null&&s!==void 0?s:"helix",h=u0(n.url,u,a),m=tv(n.query,{arrayFormat:"repeat",addQueryPrefix:!0}),w=new ev.Headers({Accept:"application/json"});let y;n.jsonBody&&(y=JSON.stringify(n.jsonBody),w.append("Content-Type","application/json")),e&&u!=="auth"&&w.append("Client-ID",e),t&&w.append("Authorization",`${u==="helix"?r??"Bearer":"OAuth"} ${t}`);const _={...i,method:(o=n.method)!==null&&o!==void 0?o:"GET",headers:w,body:y};return await s0(`${h}${m}`,_)}async function nv(n,e,t,r,i={}){const a=await Rl(n,e,t,r,i);return await lc(a,n),await rv(a)}function pe(n){return{broadcaster_id:A(n)}}class c0 extends qi{}class d0 extends gd{async doRequest({options:e,clientId:t,accessToken:r,authorizationType:i,fetchOptions:a,mockServerPort:s}){return await Rl(e,t,r,i,a,s)}needsToRetryAfter(e){return e.status===429&&(!e.headers.has("ratelimit-remaining")||Number(e.headers.get("ratelimit-remaining"))===0)?+e.headers.get("ratelimit-reset")*1e3-Date.now():null}getParametersFromResponse(e){const{headers:t}=e;return{limit:+t.get("ratelimit-limit"),remaining:+t.get("ratelimit-remaining"),resetsAt:+t.get("ratelimit-reset")*1e3}}}function h0(n){switch(typeof n){case"undefined":return"";case"object":{if(n===null)return"";if("cacheKey"in n)return n.cacheKey;const e=JSON.stringify(n);if(e!=="{}")return e}default:return n.toString()}}function iv(n,e,t){return[n,...e.map(h0)].join("/")+(t?"/":"")}const yt=Symbol("cache");function eo(n){var e,t;return t=class extends n{constructor(){super(...arguments),this[e]=new Map}getFromCache(r){if(this._cleanCache(),this[yt].has(r)){const i=this[yt].get(r);if(i)return i.value}}setCache(r,i,a){this[yt].set(r,{value:i,expires:Date.now()+a*1e3})}removeFromCache(r,i){const a=this._getInternalCacheKey(r,i);i?this[yt].forEach((s,o)=>{o.startsWith(a)&&this[yt].delete(o)}):this[yt].delete(a)}_cleanCache(){const r=Date.now();this[yt].forEach((i,a)=>{i.expires<r&&this[yt].delete(a)})}_getInternalCacheKey(r,i){if(typeof r=="string"){let a=r;return a.endsWith("/")||(a+="/"),a}else{const a=r.shift();return iv(a,r,i)}}},e=yt,t}function ge(n=1/0){return function(e,t,r){if(r.get){const i=r.get;r.get=function(){const a=iv(t,[]),s=this.getFromCache(a);if(s)return s;const o=i.call(this);return this.setCache(a,o,n),o}}return r}}class p0{constructor(e,t,r,i=!1){this.owner=e,this.event=t,this.listener=r,this._internal=i}unbind(){this.owner.removeListener(this)}}class Tl{constructor(){this._eventListeners=new Map,this._internalEventListeners=new Map}on(e,t){return this._addListener(!1,e,t)}addListener(e,t){return this._addListener(!1,e,t)}removeListener(e,t){this._removeListener(!1,e,t)}registerEvent(){const e=t=>this.addListener(e,t);return e}emit(e,...t){if(this._eventListeners.has(e))for(const r of this._eventListeners.get(e))r(...t);if(this._internalEventListeners.has(e))for(const r of this._internalEventListeners.get(e))r(...t)}registerInternalEvent(){const e=t=>this.addInternalListener(e,t);return e}addInternalListener(e,t){return this._addListener(!0,e,t)}removeInternalListener(e,t){this._removeListener(!0,e,t)}_addListener(e,t,r){const i=e?this._eventListeners:this._internalEventListeners;return i.has(t)?i.get(t).push(r):i.set(t,[r]),new p0(this,t,r,e)}_removeListener(e,t,r){const i=e?this._eventListeners:this._internalEventListeners;if(!t)i.clear();else if(typeof t=="object"){const a=t;this._removeListener(a._internal,a.event,a.listener)}else{const a=t;if(i.has(a))if(r){const s=i.get(a);let o=0;for(;(o=s.indexOf(r))!==-1;)s.splice(o,1)}else i.delete(a)}}}const m0=6e4;function _0(n){return Xe(n.expiresIn,e=>n.obtainmentTimestamp+e*1e3-m0)}function uc(n){var e;return(e=Xe(_0(n),t=>Date.now()>t))!==null&&e!==void 0?e:!1}class g0 extends qi{constructor(e){super("Invalid token supplied",e)}}function f0(n,e){return{grant_type:"client_credentials",client_id:n,client_secret:e}}let cc=class extends K{constructor(e){super(e),this._obtainmentDate=new Date}get clientId(){return this[c].client_id}get userId(){var e;return(e=this[c].user_id)!==null&&e!==void 0?e:null}get userName(){var e;return(e=this[c].login)!==null&&e!==void 0?e:null}get scopes(){return this[c].scopes}get expiryDate(){return Xe(this[c].expires_in,e=>new Date(this._obtainmentDate.getTime()+e*1e3))}};cc=I([L("auth","TokenInfo","clientId")],cc);function y0(n){var e,t;return{accessToken:n.access_token,refreshToken:n.refresh_token||null,scope:(e=n.scope)!==null&&e!==void 0?e:[],expiresIn:(t=n.expires_in)!==null&&t!==void 0?t:null,obtainmentTimestamp:Date.now()}}async function b0(n,e){return y0(await nv({type:"auth",url:"token",method:"POST",query:f0(n,e)}))}class v0{constructor(e){this._newTokenScopeSets=[],this._newTokenPromise=null,this._queuedScopeSets=[],this._queueExecutor=null,this._queuePromise=null,this._executor=e}async fetch(...e){var t;const r=e.filter(o=>!!o);if(this._newTokenPromise){if(!r.length)return await this._newTokenPromise;if(this._queueExecutor?this._queuedScopeSets.push(...r):this._queuedScopeSets=[...r],!this._queuePromise){const{promise:o,resolve:u,reject:h}=Do();this._queuePromise=o,this._queueExecutor=async()=>{var m;if(this._queuePromise){this._newTokenScopeSets=this._queuedScopeSets,this._queuedScopeSets=[],this._newTokenPromise=this._queuePromise,this._queuePromise=null,this._queueExecutor=null;try{u(await this._executor(this._newTokenScopeSets))}catch(w){h(w)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(m=this._queueExecutor)===null||m===void 0||m.call(this)}}}}return await this._queuePromise}this._newTokenScopeSets=[...r];const{promise:i,resolve:a,reject:s}=Do();this._newTokenPromise=i;try{a(await this._executor(this._newTokenScopeSets))}catch(o){s(o)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(t=this._queueExecutor)===null||t===void 0||t.call(this)}return await i}}let Pi=class{constructor(e,t,r=[]){this._clientId=e,this._clientSecret=t,this._impliedScopes=r,this._fetcher=new v0(async i=>await this._fetch(i))}get clientId(){return this._clientId}get currentScopes(){return this._impliedScopes}async getAccessTokenForUser(e,...t){if(t.every(r=>{var i;return(i=r?.some(a=>this._impliedScopes.includes(a)))!==null&&i!==void 0?i:!0}))return{...await this.getAppAccessToken(),userId:A(e)};throw new Error("Can not get user access token for AppTokenAuthProvider")}getCurrentScopesForUser(){return this._impliedScopes}async getAnyAccessToken(){return await this._fetcher.fetch()}async getAppAccessToken(e=!1){return e&&(this._token=void 0),await this._fetcher.fetch()}async _fetch(e){if(e.length>0)for(const t of e)if(this._impliedScopes.length){if(t.every(r=>!this._impliedScopes.includes(r)))throw new Error(`One of the scopes ${t.join(", ")} requested but only the scope ${this._impliedScopes.join(", ")} is implied`)}else throw new Error(`One of the scopes ${t.join(", ")} requested but the client credentials flow does not support scopes`);return!this._token||uc(this._token)?this._token=await b0(this._clientId,this._clientSecret):this._token}};I([V(!1)],Pi.prototype,"_clientSecret",void 0);I([V(!1)],Pi.prototype,"_token",void 0);I([V(!1)],Pi.prototype,"_fetcher",void 0);Pi=I([L("auth","AppTokenAuthProvider","clientId")],Pi);var w0=dy();function x0(n={}){const{count:e=10,period:t="all",startDate:r,contextUserId:i}=n;return{count:e.toString(),period:t,started_at:r?.toISOString(),user_id:i}}class be{constructor(e){this._client=e}_getUserContextIdWithDefault(e){var t;return(t=this._client._getUserIdFromRequestContext(e))!==null&&t!==void 0?t:e}}I([V(!1)],be.prototype,"_client",void 0);let Oo=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}get rank(){return this[c].rank}get amount(){return this[c].score}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};I([V(!1)],Oo.prototype,"_client",void 0);Oo=I([L("api","HelixBitsLeaderboardEntry","userId")],Oo);let Es=class extends K{constructor(e,t){super(e),this._client=t}get entries(){return this[c].data.map(e=>new Oo(e,this._client))}get totalCount(){return this[c].total}};I([V(!1)],Es.prototype,"_client",void 0);I([ge()],Es.prototype,"entries",null);Es=I([eo,L("api","HelixBitsLeaderboard")],Es);let dc=class extends K{constructor(e){super(zb(e,t=>t.prefix.toLowerCase()))}getCheermoteDisplayInfo(e,t,r){e=e.toLowerCase();const{background:i,state:a,scale:s}=r,{tiers:o}=this[c][e],u=o.sort((h,m)=>m.min_bits-h.min_bits).find(h=>h.min_bits<=t);if(!u)throw new Ti(`Cheermote "${e}" does not have an applicable tier for ${t} bits`);return{url:u.images[i][a][s],color:u.color}}getPossibleNames(){return Object.keys(this[c])}};dc=I([L("api","HelixCheermoteList")],dc);let hc=class extends be{async getLeaderboard(e,t={}){const r=await this._client.callApi({type:"helix",url:"bits/leaderboard",userId:A(e),scopes:["bits:read"],query:x0(t)});return new Es(r,this._client)}async getCheermotes(e){const t=await this._client.callApi({type:"helix",url:"bits/cheermotes",userId:ct(e,A),query:ct(e,pe)});return new dc(t.data)}};hc=I([L("api","HelixBitsApi")],hc);function S0(n){var e;return{game_id:n.gameId,broadcaster_language:n.language,title:n.title,delay:(e=n.delay)===null||e===void 0?void 0:e.toString(),tags:n.tags,content_classification_labels:n.contentClassificationLabels,is_branded_content:n.isBrandedContent}}function C0(n,e){return{broadcaster_id:A(n),length:e}}function Cg(n,e){return{broadcaster_id:A(n),user_id:A(e)}}function Xu(n,e){return{broadcaster_id:A(n),user_id:ct(e,A)}}function Eg(n,e){return{broadcaster_id:ct(e,A),user_id:A(n)}}function me(n,e){return{[n]:e}}function Hg(n){return{user_id:A(n)}}function av(n,e){return{broadcaster_id:n,moderator_id:e}}function Il(n,e){return{broadcaster_id:A(n),id:e}}function sv(n,e){return{broadcaster_id:A(n),user_id:e.map(A)}}let tr=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].user_id}get name(){return this[c].user_login}get displayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};I([V(!1)],tr.prototype,"_client",void 0);tr=I([L("api","HelixUserRelation","id")],tr);class Ze{constructor(e,t,r,i,a,s=100){this._callOptions=e,this._queryParamName=t,this._matchKey=r,this._mapper=a,this._limitPerRequest=s,this._requestedIds=[],this._requestResolversById=new Map,this._waitTimer=null,this._client=i,this._delay=i._batchDelay}async request(e){const{promise:t,resolve:r,reject:i}=Do();return this._requestedIds.includes(e)||this._requestedIds.push(e),this._requestResolversById.has(e)?this._requestResolversById.get(e).push({resolve:r,reject:i}):this._requestResolversById.set(e,[{resolve:r,reject:i}]),this._waitTimer&&(clearTimeout(this._waitTimer),this._waitTimer=null),this._requestedIds.length>=this._limitPerRequest?this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest)):this._waitTimer=setTimeout(()=>{this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest))},this._delay),await t}async _handleBatch(e){var t;try{const{data:r}=await this._doRequest(e),i=zb(r,this._matchKey);for(const a of e){for(const s of(t=this._requestResolversById.get(a))!==null&&t!==void 0?t:[])Object.prototype.hasOwnProperty.call(i,a)?s.resolve(this._mapper(i[a])):s.resolve(null);this._requestResolversById.delete(a)}}catch{await Promise.all(e.map(async i=>{var a,s;try{const o=await this._doRequest([i]);for(const u of(a=this._requestResolversById.get(i))!==null&&a!==void 0?a:[])u.resolve(o.data.length?this._mapper(o.data[0]):null)}catch(o){for(const u of(s=this._requestResolversById.get(i))!==null&&s!==void 0?s:[])u.reject(o)}this._requestResolversById.delete(i)}))}}async _doRequest(e){return await this._client.callApi({type:"helix",...this._callOptions,query:{...this._callOptions.query,[this._queryParamName]:e}})}}I([V(!1)],Ze.prototype,"_client",void 0);var Ju;Object.prototype.hasOwnProperty.call(Symbol,"asyncIterator")||(Symbol.asyncIterator=(Ju=Symbol.asyncIterator)!==null&&Ju!==void 0?Ju:Symbol.for("Symbol.asyncIterator"));let fe=class{constructor(e,t,r,i=100){this._callOptions=e,this._mapper=r,this._limitPerPage=i,this._isFinished=!1,this._client=t}get current(){var e;return(e=this._currentData)===null||e===void 0?void 0:e.data}async getNext(){var e;if(this._isFinished)return[];const t=await this._fetchData();return!((e=t.data)===null||e===void 0)&&e.length?this._processResult(t):(this._isFinished=!0,[])}async getAll(){this.reset();const e=[];do{const t=await this.getNext();if(!t.length)break;e.push(...t)}while(this._currentCursor);return this.reset(),e}get currentCursor(){return this._currentCursor}reset(){this._currentCursor=void 0,this._isFinished=!1,this._currentData=void 0}async*[Symbol.asyncIterator](){for(this.reset();;){const e=await this.getNext();if(!e.length)break;yield*e[Symbol.iterator]()}}async _fetchData(e={}){return await this._client.callApi({type:"helix",...this._callOptions,...e,query:{...this._callOptions.query,after:this._currentCursor,first:this._limitPerPage.toString(),...e.query}})}_processResult(e){var t;return this._currentCursor=typeof e.pagination=="string"?e.pagination:(t=e.pagination)===null||t===void 0?void 0:t.cursor,this._currentCursor===void 0&&(this._isFinished=!0),this._currentData=e,e.data.reduce((r,i)=>{const a=this._mapper(i);return Array.isArray(a)?[...r,...a]:[...r,a]},[])}};I([V(!1)],fe.prototype,"_client",void 0);fe=I([L("api","HelixPaginatedRequest")],fe);let nr=class extends fe{async getTotalCount(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).total}};nr=I([L("api","HelixPaginatedRequestWithTotal")],nr);function xe(n,e,t){var r;let i;return{get data(){var a,s;return i??(i=(s=(a=n.data)===null||a===void 0?void 0:a.map(o=>new e(o,t)))!==null&&s!==void 0?s:[])},cursor:typeof n.pagination=="string"?n.pagination:(r=n.pagination)===null||r===void 0?void 0:r.cursor}}function It(n,e,t){let r;return{get data(){var i,a;return r??(r=(a=(i=n.data)===null||i===void 0?void 0:i.map(s=>new e(s,t)))!==null&&a!==void 0?a:[])},cursor:n.pagination.cursor,total:n.total}}function de({after:n,before:e,limit:t}={}){return{after:n,before:e,first:t?.toString()}}let xi=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].broadcaster_id}get name(){return this[c].broadcaster_login}get displayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get language(){return this[c].broadcaster_language}get gameId(){return this[c].game_id}get gameName(){return this[c].game_name}async getGame(){return this[c].game_id?te(await this._client.games.getGameById(this[c].game_id)):null}get title(){return this[c].title}get delay(){return this[c].delay}get tags(){return this[c].tags}get contentClassificationLabels(){return this[c].content_classification_labels}get isBrandedContent(){return this[c].is_branded_content}};I([V(!1)],xi.prototype,"_client",void 0);xi=I([L("api","HelixChannel","id")],xi);let Uo=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get creationDate(){return new Date(this[c].created_at)}};I([V(!1)],Uo.prototype,"_client",void 0);Uo=I([L("api","HelixChannelEditor","userId")],Uo);let Hs=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get followDate(){return new Date(this[c].followed_at)}};I([V(!1)],Hs.prototype,"_client",void 0);Hs=I([L("api","HelixChannelFollower","userId")],Hs);let As=class extends K{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get followDate(){return new Date(this[c].followed_at)}};I([V(!1)],As.prototype,"_client",void 0);As=I([L("api","HelixFollowedChannel","broadcasterId")],As);let pc=class extends K{get snoozeCount(){return this[c].snooze_count}get snoozeRefreshDate(){return this[c].snooze_refresh_at?new Date(this[c].snooze_refresh_at*1e3):null}get nextAdDate(){return this[c].next_ad_at?new Date(this[c].next_ad_at*1e3):null}get duration(){return this[c].duration}get lastAdDate(){return this[c].last_ad_at?new Date(this[c].last_ad_at*1e3):null}get prerollFreeTime(){return this[c].preroll_free_time}};pc=I([L("api","HelixAdSchedule")],pc);let mc=class extends K{get snoozeCount(){return this[c].snooze_count}get snoozeRefreshDate(){return new Date(this[c].snooze_refresh_at*1e3)}get nextAdDate(){return new Date(this[c].next_ad_at*1e3)}};mc=I([L("api","HelixSnoozeNextAdResult")],mc);let qo=class extends be{constructor(){super(...arguments),this._getChannelByIdBatcher=new Ze({url:"channels"},"broadcaster_id","broadcaster_id",this._client,e=>new xi(e,this._client))}async getChannelInfoById(e){const t=A(e),r=await this._client.callApi({type:"helix",url:"channels",userId:t,query:pe(t)});return Xe(r.data[0],i=>new xi(i,this._client))}async getChannelInfoByIdBatched(e){return await this._getChannelByIdBatcher.request(A(e))}async getChannelInfoByIds(e){const t=e.map(A);return(await this._client.callApi({type:"helix",url:"channels",query:me("broadcaster_id",t)})).data.map(i=>new xi(i,this._client))}async updateChannelInfo(e,t){await this._client.callApi({type:"helix",url:"channels",method:"PATCH",userId:A(e),scopes:["channel:manage:broadcast"],query:pe(e),jsonBody:S0(t)})}async startChannelCommercial(e,t){await this._client.callApi({type:"helix",url:"channels/commercial",method:"POST",userId:A(e),scopes:["channel:edit:commercial"],jsonBody:C0(e,t)})}async getChannelEditors(e){return(await this._client.callApi({type:"helix",url:"channels/editors",userId:A(e),scopes:["channel:read:editors"],query:pe(e)})).data.map(r=>new Uo(r,this._client))}async getVips(e,t){const r=await this._client.callApi({type:"helix",url:"channels/vips",userId:A(e),scopes:["channel:read:vips","channel:manage:vips"],query:{...pe(e),...de(t)}});return xe(r,tr,this._client)}getVipsPaginated(e){return new fe({url:"channels/vips",userId:A(e),scopes:["channel:read:vips","channel:manage:vips"],query:pe(e)},this._client,t=>new tr(t,this._client))}async checkVipForUsers(e,t){return(await this._client.callApi({type:"helix",url:"channels/vips",userId:A(e),scopes:["channel:read:vips","channel:manage:vips"],query:sv(e,t)})).data.map(i=>new tr(i,this._client))}async checkVipForUser(e,t){const r=A(t);return(await this.checkVipForUsers(e,[r])).some(a=>a.id===r)}async addVip(e,t){await this._client.callApi({type:"helix",url:"channels/vips",method:"POST",userId:A(e),scopes:["channel:manage:vips"],query:Cg(e,t)})}async removeVip(e,t){await this._client.callApi({type:"helix",url:"channels/vips",method:"DELETE",userId:A(e),scopes:["channel:manage:vips"],query:Cg(e,t)})}async getChannelFollowerCount(e){return(await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:A(e),query:{...Xu(e),...de({limit:1})}})).total}async getChannelFollowers(e,t,r){const i=await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:A(e),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:{...Xu(e,t),...de(r)}});return It(i,Hs,this._client)}getChannelFollowersPaginated(e){return new nr({url:"channels/followers",method:"GET",userId:A(e),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:Xu(e)},this._client,t=>new Hs(t,this._client))}async getFollowedChannels(e,t,r){const i=await this._client.callApi({type:"helix",url:"channels/followed",method:"GET",userId:A(e),scopes:["user:read:follows"],query:{...Eg(e,t),...de(r)}});return It(i,As,this._client)}getFollowedChannelsPaginated(e,t){return new nr({url:"channels/followed",method:"GET",userId:A(e),scopes:["user:read:follows"],query:Eg(e,t)},this._client,r=>new As(r,this._client))}async getAdSchedule(e){const t=await this._client.callApi({type:"helix",url:"channels/ads",method:"GET",userId:A(e),scopes:["channel:read:ads"],query:pe(e)});return new pc(t.data[0])}async snoozeNextAd(e){const t=await this._client.callApi({type:"helix",url:"channels/ads/schedule/snooze",method:"POST",userId:A(e),scopes:["channel:manage:ads"],query:pe(e)});return new mc(t.data[0])}};I([V(!1)],qo.prototype,"_getChannelByIdBatcher",void 0);qo=I([L("api","HelixChannelApi")],qo);function E0(n,e){return{broadcaster_id:A(n),only_manageable_rewards:e?.toString()}}function Ag(n,e){return{broadcaster_id:A(n),id:e}}function Rg(n){var e,t,r;const i={title:n.title,cost:n.cost,prompt:n.prompt,background_color:n.backgroundColor,is_enabled:n.isEnabled,is_user_input_required:n.userInputRequired,should_redemptions_skip_request_queue:n.autoFulfill};return n.maxRedemptionsPerStream!==void 0&&(i.is_max_per_stream_enabled=!!n.maxRedemptionsPerStream,i.max_per_stream=(e=n.maxRedemptionsPerStream)!==null&&e!==void 0?e:0),n.maxRedemptionsPerUserPerStream!==void 0&&(i.is_max_per_user_per_stream_enabled=!!n.maxRedemptionsPerUserPerStream,i.max_per_user_per_stream=(t=n.maxRedemptionsPerUserPerStream)!==null&&t!==void 0?t:0),n.globalCooldown!==void 0&&(i.is_global_cooldown_enabled=!!n.globalCooldown,i.global_cooldown_seconds=(r=n.globalCooldown)!==null&&r!==void 0?r:0),"isPaused"in n&&(i.is_paused=n.isPaused),i}function Tg(n,e,t){return{broadcaster_id:A(n),reward_id:e,id:t}}function Ig(n,e,t,r){return{broadcaster_id:A(n),reward_id:e,status:t,sort:r.newestFirst?"NEWEST":"OLDEST"}}let Jt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}getImageUrl(e){var t,r;const i=`url_${e}x`;return(r=(t=this[c].image)===null||t===void 0?void 0:t[i])!==null&&r!==void 0?r:this[c].default_image[i]}get backgroundColor(){return this[c].background_color}get isEnabled(){return this[c].is_enabled}get cost(){return this[c].cost}get title(){return this[c].title}get prompt(){return this[c].prompt}get userInputRequired(){return this[c].is_user_input_required}get maxRedemptionsPerStream(){return this[c].max_per_stream_setting.is_enabled?this[c].max_per_stream_setting.max_per_stream:null}get maxRedemptionsPerUserPerStream(){return this[c].max_per_user_per_stream_setting.is_enabled?this[c].max_per_user_per_stream_setting.max_per_user_per_stream:null}get globalCooldown(){return this[c].global_cooldown_setting.is_enabled?this[c].global_cooldown_setting.global_cooldown_seconds:null}get isPaused(){return this[c].is_paused}get isInStock(){return this[c].is_in_stock}get redemptionsThisStream(){return this[c].redemptions_redeemed_current_stream}get autoFulfill(){return this[c].should_redemptions_skip_request_queue}get cooldownExpiryDate(){return this[c].cooldown_expires_at?new Date(this[c].cooldown_expires_at):null}};I([V(!1)],Jt.prototype,"_client",void 0);Jt=I([L("api","HelixCustomReward","id")],Jt);let Yt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get userInput(){return this[c].user_input}get isFulfilled(){return this[c].status==="FULFILLED"}get isCanceled(){return this[c].status==="CANCELED"}get redemptionDate(){return new Date(this[c].redeemed_at)}get rewardId(){return this[c].reward.id}get rewardTitle(){return this[c].reward.title}get rewardPrompt(){return this[c].reward.prompt}get rewardCost(){return this[c].reward.cost}async getReward(){return te(await this._client.channelPoints.getCustomRewardById(this[c].broadcaster_id,this[c].reward.id))}async updateStatus(e){return(await this._client.channelPoints.updateRedemptionStatusByIds(this[c].broadcaster_id,this[c].reward.id,[this[c].id],e))[0]}};I([V(!1)],Yt.prototype,"_client",void 0);Yt=I([L("api","HelixCustomRewardRedemption","id")],Yt);let _c=class extends be{async getCustomRewards(e,t){return(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:A(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:E0(e,t)})).data.map(i=>new Jt(i,this._client))}async getCustomRewardsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:A(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:Il(e,t)})).data.map(i=>new Jt(i,this._client)):[]}async getCustomRewardById(e,t){const r=await this.getCustomRewardsByIds(e,[t]);return r.length?r[0]:null}async createCustomReward(e,t){const r=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"POST",userId:A(e),scopes:["channel:manage:redemptions"],query:pe(e),jsonBody:Rg(t)});return new Jt(r.data[0],this._client)}async updateCustomReward(e,t,r){const i=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"PATCH",userId:A(e),scopes:["channel:manage:redemptions"],query:Ag(e,t),jsonBody:Rg(r)});return new Jt(i.data[0],this._client)}async deleteCustomReward(e,t){await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"DELETE",userId:A(e),scopes:["channel:manage:redemptions"],query:Ag(e,t)})}async getRedemptionsByIds(e,t,r){return r.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:A(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:Tg(e,t,r)})).data.map(a=>new Yt(a,this._client)):[]}async getRedemptionById(e,t,r){const i=await this.getRedemptionsByIds(e,t,[r]);return i.length?i[0]:null}async getRedemptionsForBroadcaster(e,t,r,i){const a=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:A(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:{...Ig(e,t,r,i),...de(i)}});return xe(a,Yt,this._client)}getRedemptionsForBroadcasterPaginated(e,t,r,i){return new fe({url:"channel_points/custom_rewards/redemptions",userId:A(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:Ig(e,t,r,i)},this._client,a=>new Yt(a,this._client),50)}async updateRedemptionStatusByIds(e,t,r,i){return r.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",method:"PATCH",userId:A(e),scopes:["channel:manage:redemptions"],query:Tg(e,t,r),jsonBody:{status:i}})).data.map(s=>new Yt(s,this._client)):[]}};_c=I([L("api","HelixChannelPointsApi")],_c);let Rs=class extends K{get value(){return this[c].value}get decimalPlaces(){return this[c].decimal_places}get localizedValue(){return this.value/10**this.decimalPlaces}get currency(){return this[c].currency}};Rs=I([L("api","HelixCharityCampaignAmount")],Rs);let ko=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get charityName(){return this[c].charity_name}get charityDescription(){return this[c].charity_description}get charityLogo(){return this[c].charity_logo}get charityWebsite(){return this[c].charity_website}get currentAmount(){return new Rs(this[c].current_amount)}get targetAmount(){return new Rs(this[c].target_amount)}};I([V(!1)],ko.prototype,"_client",void 0);ko=I([L("api","HelixCharityCampaign","id")],ko);let Mo=class extends K{constructor(e,t){super(e),this._client=t}get campaignId(){return this[c].campaign_id}get donorId(){return this[c].user_id}get donorName(){return this[c].user_login}get donorDisplayName(){return this[c].user_name}async getDonor(){return te(await this._client.users.getUserById(this[c].user_id))}get amount(){return new Rs(this[c].amount)}};I([V(!1)],Mo.prototype,"_client",void 0);Mo=I([L("api","HelixCharityCampaignDonation")],Mo);let gc=class extends be{async getCharityCampaign(e){const t=await this._client.callApi({type:"helix",url:"charity/campaigns",method:"GET",userId:A(e),scopes:["channel:read:charity"],query:pe(e)});return new ko(t.data[0],this._client)}async getCharityCampaignDonations(e,t){const r=await this._client.callApi({type:"helix",url:"charity/donations",userId:A(e),scopes:["channel:read:charity"],query:{...pe(e),...de(t)}});return xe(r,Mo,this._client)}};gc=I([L("api","HelixCharityApi")],gc);function H0(n){return{slow_mode:n.slowModeEnabled,slow_mode_wait_time:n.slowModeDelay,follower_mode:n.followerOnlyModeEnabled,follower_mode_duration:n.followerOnlyModeDelay,subscriber_mode:n.subscriberOnlyModeEnabled,emote_mode:n.emoteOnlyModeEnabled,unique_chat_mode:n.uniqueChatModeEnabled,non_moderator_chat_delay:n.nonModeratorChatDelayEnabled,non_moderator_chat_delay_duration:n.nonModeratorChatDelay}}function A0(n,e){return{user_id:A(n),color:e}}function R0(n,e,t){return{from_broadcaster_id:A(n),to_broadcaster_id:A(e),moderator_id:t}}function Pg(n,e){return{broadcaster_id:n,sender_id:e}}function Dg(n,e){return{message:n,reply_parent_message_id:e?.replyParentMessageId}}class ov extends K{get id(){return this[c].id}get name(){return this[c].name}get formats(){return this[c].format}get scales(){return this[c].scale}get themeModes(){return this[c].theme_mode}getStaticImageUrl(e="1.0",t="light"){return this[c].format.includes("static")&&this[c].scale.includes(e)?this.getFormattedImageUrl(e,"static",t):null}getAnimatedImageUrl(e="1.0",t="light"){return this[c].format.includes("animated")&&this[c].scale.includes(e)?this.getFormattedImageUrl(e,"animated",t):null}getFormattedImageUrl(e="1.0",t="static",r="light"){return`https://static-cdn.jtvnw.net/emoticons/v2/${this[c].id}/${t}/${r}/${e}`}}let Ts=class extends ov{getImageUrl(e){return this[c].images[`url_${e}x`]}};Ts=I([L("api","HelixEmote","id")],Ts);let jo=class extends Ts{constructor(e,t){super(e),this._client=t}get tier(){return this[c].tier||null}get type(){return this[c].emote_type}get emoteSetId(){return this[c].emote_set_id}async getAllEmotesFromSet(){return await this._client.chat.getEmotesFromSets([this[c].emote_set_id])}};I([V(!1)],jo.prototype,"_client",void 0);jo=I([L("api","HelixChannelEmote","id")],jo);let fc=class extends K{get id(){return this[c].id}getImageUrl(e){return this[c][`image_url_${e}x`]}get title(){return this[c].title}get description(){return this[c].description}get clickAction(){return this[c].click_action}get clickUrl(){return this[c].click_url}};fc=I([L("api","HelixChatBadgeVersion","id")],fc);let Is=class extends K{get id(){return this[c].set_id}get versions(){return this[c].versions.map(e=>new fc(e))}getVersion(e){var t;return(t=this.versions.find(r=>r.id===e))!==null&&t!==void 0?t:null}};I([ge()],Is.prototype,"versions",null);Is=I([eo,L("api","HelixChatBadgeSet","id")],Is);let Ps=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};I([V(!1)],Ps.prototype,"_client",void 0);Ps=I([L("api","HelixChatChatter")],Ps);let Lo=class extends K{get broadcasterId(){return this[c].broadcaster_id}get slowModeEnabled(){return this[c].slow_mode}get slowModeDelay(){return this[c].slow_mode_wait_time}get followerOnlyModeEnabled(){return this[c].follower_mode}get followerOnlyModeDelay(){return this[c].follower_mode_duration}get subscriberOnlyModeEnabled(){return this[c].subscriber_mode}get emoteOnlyModeEnabled(){return this[c].emote_mode}get uniqueChatModeEnabled(){return this[c].unique_chat_mode}};Lo=I([L("api","HelixChatSettings","broadcasterId")],Lo);let No=class extends Ts{constructor(e,t){super(e),this._client=t}get type(){return this[c].emote_type}get emoteSetId(){return this[c].emote_set_id}get ownerId(){switch(this[c].owner_id){case"0":case"twitch":return null;default:return this[c].owner_id}}async getOwner(){switch(this[c].owner_id){case"0":case"twitch":return null;default:return await this._client.users.getUserById(this[c].owner_id)}}};I([V(!1)],No.prototype,"_client",void 0);No=I([L("api","HelixEmoteFromSet","id")],No);let Ds=class extends ov{constructor(e,t){super(e),this._client=t}get type(){return this[c].emote_type}get emoteSetId(){return this[c].emote_set_id||null}get ownerId(){return this[c].owner_id||null}async getAllEmotesFromSet(){return this[c].emote_set_id?await this._client.chat.getEmotesFromSets([this[c].emote_set_id]):null}async getOwner(){return this[c].owner_id?await this._client.users.getUserById(this[c].owner_id):null}};I([V(!1)],Ds.prototype,"_client",void 0);Ds=I([L("api","HelixUserEmote","id")],Ds);let Fo=class extends Lo{get nonModeratorChatDelayEnabled(){return this[c].non_moderator_chat_delay}get nonModeratorChatDelay(){return this[c].non_moderator_chat_delay_duration}};Fo=I([L("api","HelixPrivilegedChatSettings","broadcasterId")],Fo);let $o=class extends K{get id(){return this[c].message_id}get isSent(){return this[c].is_sent}get dropReasonCode(){var e;return(e=this[c].drop_reason)===null||e===void 0?void 0:e.code}get dropReasonMessage(){var e;return(e=this[c].drop_reason)===null||e===void 0?void 0:e.message}};$o=I([L("api","HelixSentChatMessage","id")],$o);function T0(n){return{broadcaster_id:A(n)}}let Go=class extends K{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[c].broadcaster_id}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}};I([V(!1)],Go.prototype,"_client",void 0);Go=I([L("api","HelixSharedChatSessionParticipant","broadcasterId")],Go);let Qo=class extends K{constructor(e,t){super(e),this._client=t}get sessionId(){return this[c].session_id}get hostBroadcasterId(){return this[c].host_broadcaster_id}async getHostBroadcaster(){return te(await this._client.users.getUserById(this[c].host_broadcaster_id))}get participants(){return this[c].participants.map(e=>new Go(e,this._client))}get createdDate(){return new Date(this[c].created_at)}get updatedDate(){return new Date(this[c].updated_at)}};I([V(!1)],Qo.prototype,"_client",void 0);Qo=I([L("api","HelixSharedChatSession","sessionId")],Qo);let yc=class extends be{async getChatters(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"chat/chatters",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:{...this._createModeratorActionQuery(r),...de(t)}});return It(i,Ps,this._client)}getChattersPaginated(e){const t=A(e);return new nr({url:"chat/chatters",userId:t,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:this._createModeratorActionQuery(t)},this._client,r=>new Ps(r,this._client),1e3)}async getGlobalBadges(){return(await this._client.callApi({type:"helix",url:"chat/badges/global"})).data.map(t=>new Is(t))}async getChannelBadges(e){return(await this._client.callApi({type:"helix",url:"chat/badges",userId:A(e),query:pe(e)})).data.map(r=>new Is(r))}async getGlobalEmotes(){return(await this._client.callApi({type:"helix",url:"chat/emotes/global"})).data.map(t=>new Ts(t))}async getChannelEmotes(e){return(await this._client.callApi({type:"helix",url:"chat/emotes",userId:A(e),query:pe(e)})).data.map(r=>new jo(r,this._client))}async getEmotesFromSets(e){return(await this._client.callApi({type:"helix",url:"chat/emotes/set",query:me("emote_set_id",e)})).data.map(r=>new No(r,this._client))}async getUserEmotes(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"chat/emotes/user",userId:A(e),scopes:["user:read:emotes"],query:{...me("user_id",r),...me("broadcasterId",t?.broadcaster?A(t.broadcaster):void 0),...de(t)}});return xe(i,Ds,this._client)}getUserEmotesPaginated(e,t){const r=A(e);return new fe({url:"chat/emotes/user",userId:r,scopes:["user:read:emotes"],query:{...me("user_id",r),...me("broadcasterId",t?A(t):void 0)}},this._client,i=>new Ds(i,this._client))}async getSettings(e){const t=await this._client.callApi({type:"helix",url:"chat/settings",userId:A(e),query:pe(e)});return new Lo(t.data[0])}async getSettingsPrivileged(e){const t=A(e),r=await this._client.callApi({type:"helix",url:"chat/settings",userId:t,canOverrideScopedUserContext:!0,scopes:["moderator:read:chat_settings"],query:this._createModeratorActionQuery(t)});return new Fo(r.data[0])}async updateSettings(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"chat/settings",method:"PATCH",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:chat_settings"],query:this._createModeratorActionQuery(r),jsonBody:H0(t)});return new Fo(i.data[0])}async sendChatMessage(e,t,r){const i=A(e),a=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",userId:i,canOverrideScopedUserContext:!0,scopes:["user:write:chat"],query:Pg(i,this._getUserContextIdWithDefault(i)),jsonBody:Dg(t,r)});return new $o(a.data[0])}async sendChatMessageAsApp(e,t,r,i){const a=A(e),s=A(t),o=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",forceType:"app",query:Pg(s,a),jsonBody:Dg(r,i)});return new $o(o.data[0])}async sendAnnouncement(e,t){const r=A(e);await this._client.callApi({type:"helix",url:"chat/announcements",method:"POST",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:announcements"],query:this._createModeratorActionQuery(r),jsonBody:{message:t.message,color:t.color}})}async getColorsForUsers(e){const t=await this._client.callApi({type:"helix",url:"chat/color",query:me("user_id",e.map(A))});return new Map(t.data.map(r=>[r.user_id,r.color||null]))}async getColorForUser(e){const t=await this._client.callApi({type:"helix",url:"chat/color",userId:A(e),query:me("user_id",A(e))});if(t.data.length)return t.data[0].color||null}async setColorForUser(e,t){await this._client.callApi({type:"helix",url:"chat/color",method:"PUT",userId:A(e),scopes:["user:manage:chat_color"],query:A0(e,t)})}async shoutoutUser(e,t){const r=A(e);await this._client.callApi({type:"helix",url:"chat/shoutouts",method:"POST",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:shoutouts"],query:R0(e,t,this._getUserContextIdWithDefault(r))})}async getSharedChatSession(e){const t=A(e),r=await this._client.callApi({type:"helix",url:"shared_chat/session",userId:t,query:T0(t)});return r.data.length===0?null:new Qo(r.data[0],this._client)}_createModeratorActionQuery(e){return av(e,this._getUserContextIdWithDefault(e))}};yc=I([L("api","HelixChatApi")],yc);function I0(n,e){return{broadcaster_id:A(n),has_delay:e.toString()}}function Bg(n){const{filterType:e,ids:t,startDate:r,endDate:i,isFeatured:a}=n;return{[e]:t,started_at:r,ended_at:i,is_featured:a?.toString()}}let Si=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get url(){return this[c].url}get embedUrl(){return this[c].embed_url}get broadcasterId(){return this[c].broadcaster_id}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get creatorId(){return this[c].creator_id}get creatorDisplayName(){return this[c].creator_name}async getCreator(){return te(await this._client.users.getUserById(this[c].creator_id))}get videoId(){return this[c].video_id}async getVideo(){return te(await this._client.videos.getVideoById(this[c].video_id))}get gameId(){return this[c].game_id}async getGame(){return this[c].game_id?te(await this._client.games.getGameById(this[c].game_id)):null}get language(){return this[c].language}get title(){return this[c].title}get views(){return this[c].view_count}get creationDate(){return new Date(this[c].created_at)}get thumbnailUrl(){return this[c].thumbnail_url}get duration(){return this[c].duration}get vodOffset(){return this[c].vod_offset}get isFeatured(){return this[c].is_featured}};I([V(!1)],Si.prototype,"_client",void 0);Si=I([L("api","HelixClip","id")],Si);let Wo=class extends be{constructor(){super(...arguments),this._getClipByIdBatcher=new Ze({url:"clips"},"id","id",this._client,e=>new Si(e,this._client))}async getClipsForBroadcaster(e,t={}){return await this._getClips({...t,filterType:"broadcaster_id",ids:A(e),userId:A(e)})}getClipsForBroadcasterPaginated(e,t={}){return this._getClipsPaginated({...t,filterType:"broadcaster_id",ids:A(e),userId:A(e)})}async getClipsForGame(e,t={}){return await this._getClips({...t,filterType:"game_id",ids:e})}getClipsForGamePaginated(e,t={}){return this._getClipsPaginated({...t,filterType:"game_id",ids:e})}async getClipsByIds(e){return(await this._getClips({filterType:"id",ids:e})).data}async getClipById(e){const t=await this.getClipsByIds([e]);return t.length?t[0]:null}async getClipByIdBatched(e){return await this._getClipByIdBatcher.request(e)}async createClip(e){const{channel:t,createAfterDelay:r=!1}=e;return(await this._client.callApi({type:"helix",url:"clips",method:"POST",userId:A(t),scopes:["clips:edit"],canOverrideScopedUserContext:!0,query:I0(t,r)})).data[0].id}async _getClips(e){if(!e.ids.length)return{data:[]};const t=await this._client.callApi({type:"helix",url:"clips",userId:e.userId,query:{...Bg(e),...de(e)}});return xe(t,Si,this._client)}_getClipsPaginated(e){return new fe({url:"clips",userId:e.userId,query:Bg(e)},this._client,t=>new Si(t,this._client))}};I([V(!1)],Wo.prototype,"_getClipByIdBatcher",void 0);Wo=I([L("api","HelixClipApi")],Wo);class P0 extends K{get id(){return this[c].id}get name(){return this[c].name}get description(){return this[c].description}}let bc=class extends be{async getAll(e){return(await this._client.callApi({url:"content_classification_labels",query:{locale:e}})).data.map(r=>new P0(r))}};bc=I([L("api","HelixContentClassificationLabelApi")],bc);function Og(n,e){return{user_id:e?ct(n.user,A):void 0,game_id:n.gameId,fulfillment_status:n.fulfillmentStatus}}function D0(n,e){return{fulfillment_status:e,entitlement_ids:n}}let Zt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get rewardId(){return this[c].benefit_id}get grantDate(){return new Date(this[c].timestamp)}get userId(){return this[c].user_id}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get gameId(){return this[c].game_id}async getGame(){return te(await this._client.games.getGameById(this[c].game_id))}get fulfillmentStatus(){return this[c].fulfillment_status}get updateDate(){return new Date(this[c].last_updated)}};I([V(!1)],Zt.prototype,"_client",void 0);Zt=I([L("api","HelixDropsEntitlement")],Zt);let Vo=class extends be{constructor(){super(...arguments),this._getDropsEntitlementByIdBatcher=new Ze({url:"entitlements/drops"},"id","id",this._client,e=>new Zt(e,this._client))}async getDropsEntitlements(e,t=!1){const r=await this._client.callApi({type:"helix",url:"entitlements/drops",userId:ct(e.user,A),forceType:e.user&&t?"app":void 0,query:{...Og(e,t),...de(e)}});return xe(r,Zt,this._client)}getDropsEntitlementsPaginated(e,t=!1){return new fe({url:"entitlements/drops",userId:ct(e.user,A),forceType:e.user&&t?"app":void 0,query:Og(e,t)},this._client,r=>new Zt(r,this._client))}async getDropsEntitlementsByIds(e){return(await this._client.callApi({type:"helix",url:"entitlements/drops",query:{id:e}})).data.map(r=>new Zt(r,this._client))}async getDropsEntitlementById(e){var t;return(t=(await this.getDropsEntitlementsByIds([e]))[0])!==null&&t!==void 0?t:null}async getDropsEntitlementByIdBatched(e){return await this._getDropsEntitlementByIdBatcher.request(e)}async updateDropsEntitlements(e,t){const r=await this._client.callApi({type:"helix",url:"entitlements/drops",method:"PATCH",jsonBody:D0(e,t)});return new Map(r.data.flatMap(i=>i.ids.map(a=>[a,i.status])))}};I([V(!1)],Vo.prototype,"_getDropsEntitlementByIdBatcher",void 0);Vo=I([L("api","HelixEntitlementApi")],Vo);function le(n){return{broadcaster_user_id:A(n)}}function Co(n,e){return{broadcaster_user_id:A(n),reward_id:e}}function Ne(n,e){return{broadcaster_user_id:n,moderator_user_id:e}}function At(n,e){return{broadcaster_user_id:n,user_id:e}}function B0(n){return{organization_id:n.organizationId,category_id:n.categoryId,campaign_id:n.campaignId}}function Ug(n,e){return{conduit_id:n,status:e}}function O0(n,e){return{id:n,shard_count:e.toString()}}function U0(n,e){return{conduit_id:n,shards:e}}let bt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get status(){return this[c].status}get type(){return this[c].type}get cost(){return this[c].cost}get condition(){return this[c].condition}get creationDate(){return new Date(this[c].created_at)}get transportMethod(){return this[c].transport.method}async unsubscribe(){await this._client.eventSub.deleteSubscription(this[c].id)}get _transport(){return this[c].transport}set _status(e){this[c].status=e}};I([V(!1)],bt.prototype,"_client",void 0);bt=I([L("api","HelixEventSubSubscription","id")],bt);let wi=class extends nr{constructor(e,t,r){super({url:"eventsub/subscriptions",userId:t,query:e},r,i=>new bt(i,r))}async getTotalCost(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).total_cost}async getMaxTotalCost(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).max_total_cost}};wi=I([L("api","HelixPaginatedEventSubSubscriptionsRequest")],wi);let Ci=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get shardCount(){return this[c].shard_count}async update(e){return await this._client.eventSub.updateConduit(this[c].id,e)}async delete(){await this._client.eventSub.deleteConduit(this[c].id)}async getShards(){return await this._client.eventSub.getConduitShards(this[c].id)}};I([V(!1)],Ci.prototype,"_client",void 0);Ci=I([L("api","HelixEventSubConduit")],Ci);let ws=class extends K{get id(){return this[c].id}get status(){return this[c].status}get transportMethod(){return this[c].transport.method}};ws=I([L("api","HelixEventSubConduitShard")],ws);let vc=class extends be{async getSubscriptions(e){const t=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:de(e)});return{...It(t,bt,this._client),totalCost:t.total_cost,maxTotalCost:t.max_total_cost}}getSubscriptionsPaginated(){return new wi({},void 0,this._client)}async getSubscriptionsForStatus(e,t){const r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...de(t),status:e}});return{...It(r,bt,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForStatusPaginated(e){return new wi({status:e},void 0,this._client)}async getSubscriptionsForType(e,t){const r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...de(t),type:e}});return{...It(r,bt,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForTypePaginated(e){return new wi({type:e},void 0,this._client)}async getSubscriptionsForUser(e,t){const r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",userId:A(e),query:{...me("user_id",A(e)),...de(t)}});return{...It(r,bt,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForUserPaginated(e){const t=A(e);return new wi(me("user_id",t),t,this._client)}async createSubscription(e,t,r,i,a,s,o,u){const h=i.method==="webhook"||i.method==="conduit",m=h?void 0:s;if(!h&&!a)throw new Error(`Transport ${i.method} can only handle subscriptions with user context`);const w={type:e,version:t,condition:r,transport:i};u&&(w.is_batching_enabled=!0);const y=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"POST",scopes:m,userId:ct(a,A),canOverrideScopedUserContext:o,forceType:h?"app":"user",jsonBody:w});return new bt(y.data[0],this._client)}async deleteSubscription(e){await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"DELETE",query:{id:e}})}async deleteAllSubscriptions(){await this._deleteSubscriptionsWithCondition()}async deleteBrokenSubscriptions(){await this._deleteSubscriptionsWithCondition(e=>e.status!=="enabled"&&e.status!=="webhook_callback_verification_pending")}async subscribeToStreamOnlineEvents(e,t){return await this.createSubscription("stream.online","1",le(e),t,e)}async subscribeToStreamOfflineEvents(e,t){return await this.createSubscription("stream.offline","1",le(e),t,e)}async subscribeToChannelUpdateEvents(e,t){return await this.createSubscription("channel.update","2",le(e),t,e)}async subscribeToChannelFollowEvents(e,t){const r=A(e);return await this.createSubscription("channel.follow","2",Ne(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:followers"],!0)}async subscribeToChannelSubscriptionEvents(e,t){return await this.createSubscription("channel.subscribe","1",le(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionGiftEvents(e,t){return await this.createSubscription("channel.subscription.gift","1",le(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionMessageEvents(e,t){return await this.createSubscription("channel.subscription.message","1",le(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionEndEvents(e,t){return await this.createSubscription("channel.subscription.end","1",le(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelCheerEvents(e,t){return await this.createSubscription("channel.cheer","1",le(e),t,e,["bits:read"])}async subscribeToChannelCharityCampaignStartEvents(e,t){return await this.createSubscription("channel.charity_campaign.start","1",le(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityCampaignStopEvents(e,t){return await this.createSubscription("channel.charity_campaign.stop","1",le(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityDonationEvents(e,t){return await this.createSubscription("channel.charity_campaign.donate","1",le(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityCampaignProgressEvents(e,t){return await this.createSubscription("channel.charity_campaign.progress","1",le(e),t,e,["channel:read:charity"])}async subscribeToChannelBanEvents(e,t){return await this.createSubscription("channel.ban","1",le(e),t,e,["channel:moderate"])}async subscribeToChannelUnbanEvents(e,t){return await this.createSubscription("channel.unban","1",le(e),t,e,["channel:moderate"])}async subscribeToChannelShieldModeBeginEvents(e,t){const r=A(e);return await this.createSubscription("channel.shield_mode.begin","1",Ne(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelShieldModeEndEvents(e,t){const r=A(e);return await this.createSubscription("channel.shield_mode.end","1",Ne(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelModeratorAddEvents(e,t){return await this.createSubscription("channel.moderator.add","1",le(e),t,e,["moderation:read"])}async subscribeToChannelModeratorRemoveEvents(e,t){return await this.createSubscription("channel.moderator.remove","1",le(e),t,e,["moderation:read"])}async subscribeToChannelRaidEventsFrom(e,t){return await this.createSubscription("channel.raid","1",me("from_broadcaster_user_id",A(e)),t,e)}async subscribeToChannelRaidEventsTo(e,t){return await this.createSubscription("channel.raid","1",me("to_broadcaster_user_id",A(e)),t,e)}async subscribeToChannelRewardAddEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.add","1",le(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.update","1",le(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward.update","1",Co(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",le(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",Co(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",le(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",Co(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",le(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",Co(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelAutomaticRewardRedemptionAddEvents(e,t){return await this.createSubscription("channel.channel_points_automatic_reward_redemption.add","1",le(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelPollBeginEvents(e,t){return await this.createSubscription("channel.poll.begin","1",le(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollProgressEvents(e,t){return await this.createSubscription("channel.poll.progress","1",le(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollEndEvents(e,t){return await this.createSubscription("channel.poll.end","1",le(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPredictionBeginEvents(e,t){return await this.createSubscription("channel.prediction.begin","1",le(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionProgressEvents(e,t){return await this.createSubscription("channel.prediction.progress","1",le(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionLockEvents(e,t){return await this.createSubscription("channel.prediction.lock","1",le(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionEndEvents(e,t){return await this.createSubscription("channel.prediction.end","1",le(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelGoalBeginEvents(e,t){return await this.createSubscription("channel.goal.begin","1",le(e),t,e,["channel:read:goals"])}async subscribeToChannelGoalProgressEvents(e,t){return await this.createSubscription("channel.goal.progress","1",le(e),t,e,["channel:read:goals"])}async subscribeToChannelGoalEndEvents(e,t){return await this.createSubscription("channel.goal.end","1",le(e),t,e,["channel:read:goals"])}async subscribeToChannelHypeTrainBeginEvents(e,t){return await this.createSubscription("channel.hype_train.begin","1",le(e),t,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainProgressEvents(e,t){return await this.createSubscription("channel.hype_train.progress","1",le(e),t,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainEndEvents(e,t){return await this.createSubscription("channel.hype_train.end","1",le(e),t,e,["channel:read:hype_train"])}async subscribeToChannelShoutoutCreateEvents(e,t){const r=A(e);return await this.createSubscription("channel.shoutout.create","1",Ne(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelShoutoutReceiveEvents(e,t){const r=A(e);return await this.createSubscription("channel.shoutout.receive","1",Ne(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelAdBreakBeginEvents(e,t){return await this.createSubscription("channel.ad_break.begin","1",le(e),t,e,["channel:read:ads"])}async subscribeToChannelChatClearEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.clear","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatClearUserMessagesEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.clear_user_messages","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatMessageDeleteEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.message_delete","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatNotificationEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.notification","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatMessageEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.message","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatSettingsUpdateEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat_settings.update","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelUnbanRequestCreateEvents(e,t){const r=A(e);return await this.createSubscription("channel.unban_request.create","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelUnbanRequestResolveEvents(e,t){const r=A(e);return await this.createSubscription("channel.unban_request.resolve","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelModerateEvents(e,t){const r=A(e);return await this.createSubscription("channel.moderate","2",Ne(r,this._getUserContextIdWithDefault(r)),t,e,[],!0)}async subscribeToChannelWarningAcknowledgeEvents(e,t){const r=A(e);return await this.createSubscription("channel.warning.acknowledge","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelWarningSendEvents(e,t){const r=A(e);return await this.createSubscription("channel.warning.send","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelVipAddEvents(e,t){return await this.createSubscription("channel.vip.add","1",le(e),t,e,["channel:read:vips","channel:manage:vips"])}async subscribeToChannelVipRemoveEvents(e,t){return await this.createSubscription("channel.vip.remove","1",le(e),t,e,["channel:read:vips","channel:manage:vips"])}async subscribeToExtensionBitsTransactionCreateEvents(e,t){return await this.createSubscription("extension.bits_transaction.create","1",me("extension_client_id",e),t)}async subscribeToUserAuthorizationGrantEvents(e,t){return await this.createSubscription("user.authorization.grant","1",me("client_id",e),t)}async subscribeToUserAuthorizationRevokeEvents(e,t){return await this.createSubscription("user.authorization.revoke","1",me("client_id",e),t)}async subscribeToUserUpdateEvents(e,t,r){return await this.createSubscription("user.update","1",me("user_id",A(e)),t,e,r?["user:read:email"]:void 0)}async subscribeToUserWhisperMessageEvents(e,t){return await this.createSubscription("user.whisper.message","1",me("user_id",A(e)),t,e,["user:read:whispers","user:manage:whispers"])}async subscribeToDropEntitlementGrantEvents(e,t){return await this.createSubscription("drop.entitlement.grant","1",B0(e),t,void 0,void 0,!1,!0)}async subscribeToAutoModMessageHoldEvents(e,t){const r=A(e);return await this.createSubscription("automod.message.hold","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateEvents(e,t){const r=A(e);return await this.createSubscription("automod.message.update","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageHoldV2Events(e,t){const r=A(e);return await this.createSubscription("automod.message.hold","2",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateV2Events(e,t){const r=A(e);return await this.createSubscription("automod.message.update","2",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModSettingsUpdateEvents(e,t){const r=A(e);return await this.createSubscription("automod.settings.update","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:automod_settings"],!0)}async subscribeToAutoModTermsUpdateEvents(e,t){const r=A(e);return await this.createSubscription("automod.terms.update","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToChannelChatUserMessageHoldEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.user_message_hold","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatUserMessageUpdateEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.user_message_update","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelSuspiciousUserUpdateEvents(e,t){const r=A(e);return await this.createSubscription("channel.suspicious_user.update","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSuspiciousUserMessageEvents(e,t){const r=A(e);return await this.createSubscription("channel.suspicious_user.message","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSharedChatSessionBeginEvents(e,t){const r=A(e);return await this.createSubscription("channel.shared_chat.begin","1",le(r),t,r)}async subscribeToChannelSharedChatSessionUpdateEvents(e,t){const r=A(e);return await this.createSubscription("channel.shared_chat.update","1",le(r),t,r)}async subscribeToChannelSharedChatSessionEndEvents(e,t){const r=A(e);return await this.createSubscription("channel.shared_chat.end","1",le(r),t,r)}async getConduits(){return(await this._client.callApi({type:"helix",url:"eventsub/conduits"})).data.map(t=>new Ci(t,this._client))}async createConduit(e){const t=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"POST",query:{...me("shard_count",e.toString())}});return new Ci(t.data[0],this._client)}async updateConduit(e,t){const r=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"PATCH",query:O0(e,t)});return new Ci(r.data[0],this._client)}async deleteConduit(e){await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"DELETE",query:{...me("id",e)}})}async getConduitShards(e,t,r){const i=await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",query:{...Ug(e,t),...de(r)}});return{...xe(i,ws,this._client)}}getConduitShardsPaginated(e,t){return new fe({url:"eventsub/conduits/shards",query:Ug(e,t)},this._client,r=>new ws(r))}async updateConduitShards(e,t){return(await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",method:"PATCH",jsonBody:U0(e,t)})).data.map(i=>new ws(i))}async _deleteSubscriptionsWithCondition(e){const t=this.getSubscriptionsPaginated();for await(const r of t)(!e||e(r))&&await r.unsubscribe()}};vc=I([L("api","HelixEventSubApi")],vc);function q0(n,e){return{extension_id:n,extension_version:e}}function k0(n){return{sku:n.sku,cost:{amount:n.cost,type:"bits"},display_name:n.displayName,in_development:n.inDevelopment,expiration:n.expirationDate,is_broadcast:n.broadcast}}function qg(n,e){return{extension_id:n,id:e.transactionIds}}let Bs=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].broadcaster_id}get displayName(){return this[c].broadcaster_name}async getChannel(){return te(await this._client.channels.getChannelInfoById(this[c].broadcaster_id))}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get gameId(){return this[c].game_id}get gameName(){return this[c].game_name}async getGame(){return this[c].game_id?te(await this._client.games.getGameById(this[c].game_id)):null}get title(){return this[c].title}};I([V(!1)],Bs.prototype,"_client",void 0);Bs=I([L("api","HelixChannelReference","id")],Bs);let zo=class extends K{get sku(){return this[c].sku}get cost(){return this[c].cost.amount}get displayName(){return this[c].display_name}get inDevelopment(){return this[c].in_development}get isBroadcast(){return this[c].is_broadcast}get expirationDate(){return Xe(this[c].expiration,e=>new Date(e))}};zo=I([L("api","HelixExtensionBitsProduct","sku")],zo);let Os=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get transactionDate(){return new Date(this[c].timestamp)}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_name}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get productType(){return this[c].product_type}get productSku(){return this[c].product_data.sku}get productCost(){return this[c].product_data.cost.amount}get productDisplayName(){return this[c].product_data.displayName}get productInDevelopment(){return this[c].product_data.inDevelopment}};I([V(!1)],Os.prototype,"_client",void 0);Os=I([L("api","HelixExtensionTransaction","id")],Os);let wc=class extends be{async getReleasedExtension(e,t){const r=await this._client.callApi({type:"helix",url:"extensions/released",query:q0(e,t)});return new oc(r.data[0])}async getLiveChannelsWithExtension(e,t){const r=await this._client.callApi({type:"helix",url:"extensions/live",query:{...me("extension_id",e),...de(t)}});return xe(r,Bs,this._client)}getLiveChannelsWithExtensionPaginated(e){return new fe({url:"extensions/live",query:me("extension_id",e)},this._client,t=>new Bs(t,this._client))}async getExtensionBitsProducts(e){return(await this._client.callApi({type:"helix",url:"bits/extensions",forceType:"app",query:me("should_include_all",e?.toString())})).data.map(r=>new zo(r))}async putExtensionBitsProduct(e){const t=await this._client.callApi({type:"helix",url:"bits/extensions",method:"PUT",forceType:"app",jsonBody:k0(e)});return new zo(t.data[0])}async getExtensionTransactions(e,t={}){const r=await this._client.callApi({type:"helix",url:"extensions/transactions",forceType:"app",query:{...qg(e,t),...de(t)}});return xe(r,Os,this._client)}getExtensionTransactionsPaginated(e,t={}){return new fe({url:"extensions/transactions",forceType:"app",query:qg(e,t)},this._client,r=>new Os(r,this._client))}};wc=I([L("api","HelixExtensionsApi")],wc);let at=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get name(){return this[c].name}get boxArtUrl(){return this[c].box_art_url}get igdbId(){return this[c].igdb_id||null}getBoxArtUrl(e,t){return this[c].box_art_url.replace("{width}",e.toString()).replace("{height}",t.toString())}async getStreams(e){return await this._client.streams.getStreams({...e,game:this[c].id})}getStreamsPaginated(){return this._client.streams.getStreamsPaginated({game:this[c].id})}};I([V(!1)],at.prototype,"_client",void 0);at=I([L("api","HelixGame","id")],at);let Di=class extends be{constructor(){super(...arguments),this._getGameByIdBatcher=new Ze({url:"games"},"id","id",this._client,e=>new at(e,this._client)),this._getGameByNameBatcher=new Ze({url:"games"},"name","name",this._client,e=>new at(e,this._client)),this._getGameByIgdbIdBatcher=new Ze({url:"games"},"igdb_id","igdb_id",this._client,e=>new at(e,this._client))}async getGamesByIds(e){return await this._getGames("id",e)}async getGamesByNames(e){return await this._getGames("name",e)}async getGamesByIgdbIds(e){return await this._getGames("igdb_id",e)}async getGameById(e){var t;return(t=(await this._getGames("id",[e]))[0])!==null&&t!==void 0?t:null}async getGameByName(e){var t;return(t=(await this._getGames("name",[e]))[0])!==null&&t!==void 0?t:null}async getGameByIgdbId(e){var t;return(t=(await this._getGames("igdb_id",[e]))[0])!==null&&t!==void 0?t:null}async getGameByIdBatched(e){return await this._getGameByIdBatcher.request(e)}async getGameByNameBatched(e){return await this._getGameByNameBatcher.request(e)}async getGameByIgdbIdBatched(e){return await this._getGameByIgdbIdBatcher.request(e)}async getTopGames(e){const t=await this._client.callApi({type:"helix",url:"games/top",query:de(e)});return xe(t,at,this._client)}getTopGamesPaginated(){return new fe({url:"games/top"},this._client,e=>new at(e,this._client))}async _getGames(e,t){return t.length?(await this._client.callApi({type:"helix",url:"games",query:{[e]:t}})).data.map(i=>new at(i,this._client)):[]}};I([V(!1)],Di.prototype,"_getGameByIdBatcher",void 0);I([V(!1)],Di.prototype,"_getGameByNameBatcher",void 0);I([V(!1)],Di.prototype,"_getGameByIgdbIdBatcher",void 0);Di=I([L("api","HelixGameApi")],Di);let Ko=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterDisplayName(){return this[c].broadcaster_name}get broadcasterName(){return this[c].broadcaster_login}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get type(){return this[c].type}get description(){return this[c].description}get currentAmount(){return this[c].current_amount}get targetAmount(){return this[c].target_amount}get creationDate(){return this[c].created_at}};I([V(!1)],Ko.prototype,"_client",void 0);Ko=I([L("api","HelixGoal","id")],Ko);let xc=class extends be{async getGoals(e){return(await this._client.callApi({type:"helix",url:"goals",userId:A(e),scopes:["channel:read:goals"],query:pe(e)})).data.map(r=>new Ko(r,this._client))}};xc=I([L("api","HelixGoalApi")],xc);let Us=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user}async getUser(){return te(await this._client.users.getUserById(this[c].user))}get type(){return this[c].type}get total(){return this[c].total}};I([V(!1)],Us.prototype,"_client",void 0);Us=I([L("api","HelixHypeTrainContribution","userId")],Us);let qs=class extends K{constructor(e,t){super(e),this._client=t}get eventId(){return this[c].id}get eventType(){return this[c].event_type}get eventDate(){return new Date(this[c].event_timestamp)}get eventVersion(){return this[c].version}get id(){return this[c].event_data.id}get broadcasterId(){return this[c].event_data.broadcaster_id}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].event_data.broadcaster_id))}get level(){return this[c].event_data.level}get startDate(){return new Date(this[c].event_data.started_at)}get expiryDate(){return new Date(this[c].event_data.expires_at)}get cooldownDate(){return new Date(this[c].event_data.cooldown_end_time)}get total(){return this[c].event_data.total}get goal(){return this[c].event_data.goal}get lastContribution(){return new Us(this[c].event_data.last_contribution,this._client)}get topContributions(){return this[c].event_data.top_contributions.map(e=>new Us(e,this._client))}};I([V(!1)],qs.prototype,"_client",void 0);qs=I([L("api","HelixHypeTrainEvent","id")],qs);class M0 extends be{async getHypeTrainEventsForBroadcaster(e,t){const r=await this._client.callApi({type:"helix",url:"hypetrain/events",userId:A(e),scopes:["channel:read:hype_train"],query:{...pe(e),...de(t)}});return xe(r,qs,this._client)}getHypeTrainEventsForBroadcasterPaginated(e){return new fe({url:"hypetrain/events",userId:A(e),scopes:["channel:read:hype_train"],query:pe(e)},this._client,t=>new qs(t,this._client))}}function kg(n,e){return{broadcaster_id:A(n),user_id:e?.userId}}function Mg(n,e){return{broadcaster_id:A(n),user_id:A(e)}}function j0(n,e,t,r,i){return{unban_request_id:t,broadcaster_id:A(n),moderator_id:A(e),status:r?"approved":"denied",resolution_text:i}}function L0(n,e,t){return{user_id:A(n),msg_id:e,action:t?"ALLOW":"DENY"}}function N0(n){return{overall_level:n.overallLevel,aggression:n.aggression,bullying:n.bullying,disability:n.disability,misogyny:n.misogyny,race_ethnicity_or_religion:n.raceEthnicityOrReligion,sex_based_terms:n.sexBasedTerms,sexuality_sex_or_gender:n.sexualitySexOrGender,swearing:n.swearing}}function F0(n){return{data:{duration:n.duration,reason:n.reason,user_id:A(n.user)}}}function $0(n){return{is_active:n}}function G0(n){return{data:n.map(e=>({msg_id:e.messageId,msg_text:e.messageText}))}}function Q0(n,e){return{data:{user_id:A(n),reason:e}}}let Xo=class extends K{get broadcasterId(){return this[c].broadcaster_id}get moderatorId(){return this[c].moderator_id}get overallLevel(){return this[c].overall_level?this[c].overall_level:null}get disability(){return this[c].disability}get aggression(){return this[c].aggression}get sexualitySexOrGender(){return this[c].sexuality_sex_or_gender}get misogyny(){return this[c].misogyny}get bullying(){return this[c].bullying}get swearing(){return this[c].swearing}get raceEthnicityOrReligion(){return this[c].race_ethnicity_or_religion}get sexBasedTerms(){return this[c].sex_based_terms}};Xo=I([L("api","HelixAutoModSettings","broadcasterId")],Xo);let Sc=class extends K{get messageId(){return this[c].msg_id}get isPermitted(){return this[c].is_permitted}};Sc=I([L("api","HelixAutoModStatus","messageId")],Sc);let Bi=class extends K{constructor(e,t,r){super(e),this._expiryTimestamp=t,this._client=r}get creationDate(){return new Date(this[c].created_at)}get expiryDate(){return Xe(this._expiryTimestamp,e=>new Date(e))}get moderatorId(){return this[c].moderator_id}async getModerator(){return te(await this._client.users.getUserById(this[c].moderator_id))}get userId(){return this[c].user_id}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};I([V(!1)],Bi.prototype,"_client",void 0);I([V(!1)],Bi.prototype,"_expiryTimestamp",void 0);Bi=I([L("api","HelixBanUser","userId")],Bi);let Jo=class extends Bi{constructor(e,t){super(e,e.expires_at||null,t)}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}get moderatorName(){return this[c].moderator_login}get moderatorDisplayName(){return this[c].moderator_name}get reason(){return this[c].reason||null}};Jo=I([L("api","HelixBan","userId")],Jo);let Yo=class extends K{get broadcasterId(){return this[c].broadcaster_id}get creationDate(){return new Date(this[c].created_at)}get expirationDate(){return this[c].expires_at?new Date(this[c].expires_at):null}get id(){return this[c].id}get moderatorId(){return this[c].moderator_id}get text(){return this[c].text}get updatedDate(){return new Date(this[c].updated_at)}};Yo=I([L("api","HelixBlockedTerm","id")],Yo);let ks=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].broadcaster_id}get name(){return this[c].broadcaster_login}get displayName(){return this[c].broadcaster_name}async getChannel(){return te(await this._client.channels.getChannelInfoById(this[c].broadcaster_id))}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}};I([V(!1)],ks.prototype,"_client",void 0);ks=I([L("api","HelixModeratedChannel","id")],ks);let Ms=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};I([V(!1)],Ms.prototype,"_client",void 0);Ms=I([L("api","HelixModerator","userId")],Ms);let js=class extends K{constructor(e,t){super(e),this._client=t}get isActive(){return this[c].is_active}get moderatorId(){return this[c].moderator_id}get moderatorName(){return this[c].moderator_login}get moderatorDisplayName(){return this[c].moderator_name}async getModerator(){return te(await this._client.users.getUserById(this[c].moderator_id))}get lastActivationDate(){return this[c].last_activated_at===""?null:new Date(this[c].last_activated_at)}};I([V(!1)],js.prototype,"_client",void 0);js=I([L("api","HelixShieldModeStatus")],js);let Ei=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_id}get broadcasterDisplayName(){return this[c].broadcaster_id}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get moderatorId(){return this[c].moderator_id}get moderatorName(){return this[c].moderator_login}get moderatorDisplayName(){return this[c].moderator_name}async getModerator(){return te(await this._client.users.getUserById(this[c].moderator_id))}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get message(){return this[c].text}get creationDate(){return new Date(this[c].created_at)}get resolutionMessage(){return this[c].resolution_text||null}get resolutionDate(){return Xe(this[c].resolved_at,e=>new Date(e))}};I([V(!1)],Ei.prototype,"_client",void 0);Ei=I([L("api","HelixUnbanRequest","id")],Ei);let Zo=class extends K{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[c].user_id}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get moderatorId(){return this[c].moderator_id}async getModerator(){return te(await this._client.users.getUserById(this[c].moderator_id))}get userId(){return this[c].user_id}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get reason(){return this[c].reason}};I([V(!1)],Zo.prototype,"_client",void 0);Zo=I([L("api","HelixWarning","userId")],Zo);let Cc=class extends be{async getBannedUsers(e,t){const r=await this._client.callApi({type:"helix",url:"moderation/banned",userId:A(e),scopes:["moderation:read"],query:{...kg(e,t),...de(t)}});return xe(r,Jo,this._client)}getBannedUsersPaginated(e){return new fe({url:"moderation/banned",userId:A(e),scopes:["moderation:read"],query:pe(e)},this._client,t=>new Jo(t,this._client),50)}async checkUserBan(e,t){const r=A(t);return(await this.getBannedUsers(e,{userId:r})).data.some(a=>a.userId===r)}async getModerators(e,t){const r=await this._client.callApi({type:"helix",url:"moderation/moderators",userId:A(e),scopes:["moderation:read","channel:manage:moderators"],query:{...kg(e,t),...de(t)}});return xe(r,Ms,this._client)}getModeratorsPaginated(e){return new fe({url:"moderation/moderators",userId:A(e),scopes:["moderation:read","channel:manage:moderators"],query:pe(e)},this._client,t=>new Ms(t,this._client))}async getModeratedChannels(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"moderation/channels",userId:r,scopes:["user:read:moderated_channels"],query:{...me("user_id",r),...de(t)}});return xe(i,ks,this._client)}getModeratedChannelsPaginated(e){const t=A(e);return new fe({url:"moderation/channels",userId:t,scopes:["user:read:moderated_channels"],query:me("user_id",t)},this._client,r=>new ks(r,this._client))}async checkUserMod(e,t){const r=A(t);return(await this.getModerators(e,{userId:r})).data.some(a=>a.userId===r)}async addModerator(e,t){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"POST",userId:A(e),scopes:["channel:manage:moderators"],query:Mg(e,t)})}async removeModerator(e,t){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"DELETE",userId:A(e),scopes:["channel:manage:moderators"],query:Mg(e,t)})}async checkAutoModStatus(e,t){return(await this._client.callApi({type:"helix",url:"moderation/enforcements/status",method:"POST",userId:A(e),scopes:["moderation:read"],query:pe(e),jsonBody:G0(t)})).data.map(i=>new Sc(i))}async processHeldAutoModMessage(e,t,r){await this._client.callApi({type:"helix",url:"moderation/automod/message",method:"POST",userId:A(e),scopes:["moderator:manage:automod"],jsonBody:L0(e,t,r)})}async getAutoModSettings(e){const t=A(e);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",userId:t,scopes:["moderator:read:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(t)})).data.map(i=>new Xo(i))}async updateAutoModSettings(e,t){const r=A(e);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",method:"PUT",userId:r,scopes:["moderator:manage:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:N0(t)})).data.map(a=>new Xo(a))}async banUser(e,t){const r=A(e);return(await this._client.callApi({type:"helix",url:"moderation/bans",method:"POST",userId:r,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:F0(t)})).data.map(a=>new Bi(a,a.end_time,this._client))}async unbanUser(e,t){const r=A(e);await this._client.callApi({type:"helix",url:"moderation/bans",method:"DELETE",userId:r,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...me("user_id",A(t))}})}async getBlockedTerms(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"moderation/blocked_terms",userId:r,scopes:["moderator:read:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...de(t)}});return xe(i,Yo,this._client)}async addBlockedTerm(e,t){const r=A(e);return(await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"POST",userId:r,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:{text:t}})).data.map(a=>new Yo(a))}async removeBlockedTerm(e,t,r){const i=A(e);await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"DELETE",userId:i,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(i),id:r}})}async deleteChatMessages(e,t){const r=A(e);await this._client.callApi({type:"helix",url:"moderation/chat",method:"DELETE",userId:r,scopes:["moderator:manage:chat_messages"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...me("message_id",t)}})}async getShieldModeStatus(e){const t=A(e),r=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"GET",userId:t,scopes:["moderator:read:shield_mode","moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(t)});return new js(r.data[0],this._client)}async updateShieldModeStatus(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"PUT",userId:r,scopes:["moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:$0(t)});return new js(i.data[0],this._client)}async getUnbanRequests(e,t,r){const i=A(e),a=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"GET",userId:i,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(i),...me("status",t),...de(r)}});return xe(a,Ei,this._client)}getUnbanRequestsPaginated(e,t){const r=A(e);return new fe({url:"moderation/unban_requests",method:"GET",userId:r,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...me("status",t)}},this._client,i=>new Ei(i,this._client))}async resolveUnbanRequest(e,t,r,i){const a=A(e),s=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"PATCH",userId:a,scopes:["moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:j0(a,this._getUserContextIdWithDefault(a),t,r,i?.slice(0,500))});return new Ei(s.data[0],this._client)}async warnUser(e,t,r){const i=A(e),a=await this._client.callApi({type:"helix",url:"moderation/warnings",method:"POST",userId:i,scopes:["moderator:manage:warnings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(i),jsonBody:Q0(t,r.slice(0,500))});return new Zo(a.data[0],this._client)}_createModeratorActionQuery(e){return av(e,this._getUserContextIdWithDefault(e))}};Cc=I([L("api","HelixModerationApi")],Cc);function W0(n,e){var t;return{broadcaster_id:A(n),title:e.title,choices:e.choices.map(r=>({title:r})),duration:e.duration,channel_points_voting_enabled:e.channelPointsPerVote!=null,channel_points_per_vote:(t=e.channelPointsPerVote)!==null&&t!==void 0?t:0}}function V0(n,e,t){return{broadcaster_id:A(n),id:e,status:t?"TERMINATED":"ARCHIVED"}}let Ec=class extends K{get id(){return this[c].id}get title(){return this[c].title}get totalVotes(){return this[c].votes}get channelPointsVotes(){return this[c].channel_points_votes}};Ec=I([L("api","HelixPollChoice","id")],Ec);let Rt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get title(){return this[c].title}get isChannelPointsVotingEnabled(){return this[c].channel_points_voting_enabled}get channelPointsPerVote(){return this[c].channel_points_per_vote}get status(){return this[c].status}get durationInSeconds(){return this[c].duration}get startDate(){return new Date(this[c].started_at)}get endDate(){return new Date(this.startDate.getTime()+this[c].duration*1e3)}get choices(){return this[c].choices.map(e=>new Ec(e))}};I([V(!1)],Rt.prototype,"_client",void 0);Rt=I([L("api","HelixPoll","id")],Rt);let Hc=class extends be{async getPolls(e,t){const r=await this._client.callApi({type:"helix",url:"polls",userId:A(e),scopes:["channel:read:polls","channel:manage:polls"],query:{...pe(e),...de(t)}});return xe(r,Rt,this._client)}getPollsPaginated(e){return new fe({url:"polls",userId:A(e),scopes:["channel:read:polls","channel:manage:polls"],query:pe(e)},this._client,t=>new Rt(t,this._client),20)}async getPollsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"polls",userId:A(e),scopes:["channel:read:polls","channel:manage:polls"],query:Il(e,t)})).data.map(i=>new Rt(i,this._client)):[]}async getPollById(e,t){const r=await this.getPollsByIds(e,[t]);return r.length?r[0]:null}async createPoll(e,t){const r=await this._client.callApi({type:"helix",url:"polls",method:"POST",userId:A(e),scopes:["channel:manage:polls"],jsonBody:W0(e,t)});return new Rt(r.data[0],this._client)}async endPoll(e,t,r=!0){const i=await this._client.callApi({type:"helix",url:"polls",method:"PATCH",userId:A(e),scopes:["channel:manage:polls"],jsonBody:V0(e,t,r)});return new Rt(i.data[0],this._client)}};Hc=I([L("api","HelixPollApi")],Hc);function z0(n,e){return{broadcaster_id:A(n),title:e.title,outcomes:e.outcomes.map(t=>({title:t})),prediction_window:e.autoLockAfter}}function K0(n,e,t,r){return{broadcaster_id:A(n),id:e,status:t,winning_outcome_id:r}}let el=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return await this._client.users.getUserById(this[c].user_id)}get channelPointsUsed(){return this[c].channel_points_used}get channelPointsWon(){return this[c].channel_points_won}};I([V(!1)],el.prototype,"_client",void 0);el=I([L("api","HelixPredictor","userId")],el);let Ls=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get title(){return this[c].title}get users(){return this[c].users}get totalChannelPoints(){return this[c].channel_points}get color(){return this[c].color}get topPredictors(){var e,t;return(t=(e=this[c].top_predictors)===null||e===void 0?void 0:e.map(r=>new el(r,this._client)))!==null&&t!==void 0?t:[]}};I([V(!1)],Ls.prototype,"_client",void 0);Ls=I([L("api","HelixPredictionOutcome","id")],Ls);let Tt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get title(){return this[c].title}get status(){return this[c].status}get autoLockAfter(){return this[c].prediction_window}get creationDate(){return new Date(this[c].created_at)}get endDate(){return this[c].ended_at?new Date(this[c].ended_at):null}get lockDate(){return this[c].locked_at?new Date(this[c].locked_at):null}get outcomes(){return this[c].outcomes.map(e=>new Ls(e,this._client))}get winningOutcomeId(){return this[c].winning_outcome_id||null}get winningOutcome(){if(!this[c].winning_outcome_id)return null;const e=this[c].outcomes.find(t=>t.id===this[c].winning_outcome_id);if(!e)throw new Ti("Winning outcome not found in outcomes array");return new Ls(e,this._client)}};I([V(!1)],Tt.prototype,"_client",void 0);Tt=I([L("api","HelixPrediction","id")],Tt);let Ac=class extends be{async getPredictions(e,t){const r=await this._client.callApi({type:"helix",url:"predictions",userId:A(e),scopes:["channel:read:predictions"],query:{...pe(e),...de(t)}});return xe(r,Tt,this._client)}getPredictionsPaginated(e){return new fe({url:"predictions",userId:A(e),scopes:["channel:read:predictions"],query:pe(e)},this._client,t=>new Tt(t,this._client),20)}async getPredictionsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"predictions",userId:A(e),scopes:["channel:read:predictions"],query:Il(e,t)})).data.map(i=>new Tt(i,this._client)):[]}async getPredictionById(e,t){const r=await this.getPredictionsByIds(e,[t]);return r.length?r[0]:null}async createPrediction(e,t){const r=await this._client.callApi({type:"helix",url:"predictions",method:"POST",userId:A(e),scopes:["channel:manage:predictions"],jsonBody:z0(e,t)});return new Tt(r.data[0],this._client)}async lockPrediction(e,t){return await this._endPrediction(e,t,"LOCKED")}async resolvePrediction(e,t,r){return await this._endPrediction(e,t,"RESOLVED",r)}async cancelPrediction(e,t){return await this._endPrediction(e,t,"CANCELED")}async _endPrediction(e,t,r,i){const a=await this._client.callApi({type:"helix",url:"predictions",method:"PATCH",userId:A(e),scopes:["channel:manage:predictions"],jsonBody:K0(e,t,r,i)});return new Tt(a.data[0],this._client)}};Ac=I([L("api","HelixPredictionApi")],Ac);function X0(n,e){return{from_broadcaster_id:A(n),to_broadcaster_id:A(e)}}let Rc=class extends K{get creationDate(){return new Date(this[c].created_at)}get targetIsMature(){return this[c].is_mature}};Rc=I([L("api","HelixRaid")],Rc);let Tc=class extends be{async startRaid(e,t){const r=await this._client.callApi({type:"helix",url:"raids",method:"POST",userId:A(e),scopes:["channel:manage:raids"],query:X0(e,t)});return new Rc(r.data[0])}async cancelRaid(e){await this._client.callApi({type:"helix",url:"raids",method:"DELETE",userId:A(e),scopes:["channel:manage:raids"],query:pe(e)})}};Tc=I([L("api","HelixRaidApi")],Tc);function lv(n,e){var t;return{broadcaster_id:A(n),start_time:e?.startDate,utc_offset:(t=e?.utcOffset)===null||t===void 0?void 0:t.toString()}}function J0(n,e){return e.vacation?{broadcaster_id:A(n),is_vacation_enabled:"true",vacation_start_time:e.vacation.startDate,vacation_end_time:e.vacation.endDate,timezone:e.vacation.timezone}:{broadcaster_id:A(n),is_vacation_enabled:"false"}}function Y0(n){return{start_time:n.startDate,timezone:n.timezone,is_recurring:n.isRecurring,duration:n.duration,category_id:n.categoryId,title:n.title}}function jg(n,e){return{broadcaster_id:A(n),id:e}}function Z0(n){return{start_time:n.startDate,timezone:n.timezone,is_canceled:n.isCanceled,duration:n.duration,category_id:n.categoryId,title:n.title}}let Dt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get startDate(){return new Date(this[c].start_time)}get endDate(){return new Date(this[c].end_time)}get title(){return this[c].title}get cancelEndDate(){return Xe(this[c].canceled_until,e=>new Date(e))}get categoryId(){var e,t;return(t=(e=this[c].category)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:null}get categoryName(){var e,t;return(t=(e=this[c].category)===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:null}async getCategory(){var e;const t=(e=this[c].category)===null||e===void 0?void 0:e.id;return t?await this._client.games.getGameById(t):null}get isRecurring(){return this[c].is_recurring}};I([V(!1)],Dt.prototype,"_client",void 0);Dt=I([L("api","HelixScheduleSegment","id")],Dt);let Ic=class extends fe{constructor(e,t,r){super({url:"schedule",query:lv(e,r)},t,i=>new Dt(i,t),25)}async _fetchData(e={}){var t;const r=await super._fetchData(e);return{data:(t=r.data.segments)!==null&&t!==void 0?t:[],pagination:r.pagination}}};Ic=I([L("api","HelixPaginatedScheduleSegmentRequest")],Ic);let tl=class extends K{constructor(e,t){super(e),this._client=t}get segments(){var e,t;return(t=(e=this[c].segments)===null||e===void 0?void 0:e.map(r=>new Dt(r,this._client)))!==null&&t!==void 0?t:[]}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get vacationStartDate(){var e;const t=(e=this[c].vacation)===null||e===void 0?void 0:e.start_time;return t?new Date(t):null}get vacationEndDate(){var e;const t=(e=this[c].vacation)===null||e===void 0?void 0:e.end_time;return t?new Date(t):null}};I([V(!1)],tl.prototype,"_client",void 0);tl=I([L("api","HelixSchedule","broadcasterId")],tl);class eC extends be{async getSchedule(e,t){const r=await this._client.callApi({type:"helix",url:"schedule",userId:A(e),query:{...lv(e,t),...de(t)}});return{data:new tl(r.data,this._client),cursor:r.pagination.cursor}}getScheduleSegmentsPaginated(e,t){return new Ic(e,this._client,t)}async getScheduleSegmentsByIds(e,t){var r,i;return(i=(r=(await this._client.callApi({type:"helix",url:"schedule",userId:A(e),query:Il(e,t)})).data.segments)===null||r===void 0?void 0:r.map(s=>new Dt(s,this._client)))!==null&&i!==void 0?i:[]}async getScheduleSegmentById(e,t){const r=await this.getScheduleSegmentsByIds(e,[t]);return r.length?r[0]:null}async getScheduleAsIcal(e){return await this._client.callApi({type:"helix",url:"schedule/icalendar",query:pe(e)})}async updateScheduleSettings(e,t){await this._client.callApi({type:"helix",url:"schedule/settings",method:"PATCH",userId:A(e),scopes:["channel:manage:schedule"],query:J0(e,t)})}async createScheduleSegment(e,t){const r=await this._client.callApi({type:"helix",url:"schedule/segment",method:"POST",userId:A(e),scopes:["channel:manage:schedule"],query:pe(e),jsonBody:Y0(t)});return new Dt(r.data.segments[0],this._client)}async updateScheduleSegment(e,t,r){const i=await this._client.callApi({type:"helix",url:"schedule/segment",method:"PATCH",userId:A(e),scopes:["channel:manage:schedule"],query:jg(e,t),jsonBody:Z0(r)});return new Dt(i.data.segments[0],this._client)}async deleteScheduleSegment(e,t){await this._client.callApi({type:"helix",url:"schedule/segment",method:"DELETE",userId:A(e),scopes:["channel:manage:schedule"],query:jg(e,t)})}}function Lg(n,e){var t;return{query:n,live_only:(t=e.liveOnly)===null||t===void 0?void 0:t.toString()}}let Ns=class extends K{constructor(e,t){super(e),this._client=t}get language(){return this[c].broadcaster_language}get id(){return this[c].id}get name(){return this[c].broadcaster_login}get displayName(){return this[c].display_name}async getUser(){return te(await this._client.users.getUserById(this[c].id))}get gameId(){return this[c].game_id}get gameName(){return this[c].game_name}async getGame(){return this[c].game_id?te(await this._client.games.getGameById(this[c].game_id)):null}get isLive(){return this[c].is_live}get tags(){return this[c].tags}get thumbnailUrl(){return this[c].thumbnail_url}get startDate(){return this[c].is_live?new Date(this[c].started_at):null}};I([V(!1)],Ns.prototype,"_client",void 0);Ns=I([L("api","HelixChannelSearchResult","id")],Ns);let Pc=class extends be{async searchCategories(e,t){const r=await this._client.callApi({type:"helix",url:"search/categories",query:{query:e,...de(t)}});return xe(r,at,this._client)}searchCategoriesPaginated(e){return new fe({url:"search/categories",query:{query:e}},this._client,t=>new at(t,this._client))}async searchChannels(e,t={}){const r=await this._client.callApi({type:"helix",url:"search/channels",query:{...Lg(e,t),...de(t)}});return xe(r,Ns,this._client)}searchChannelsPaginated(e,t={}){return new fe({url:"search/channels",query:Lg(e,t)},this._client,r=>new Ns(r,this._client))}};Pc=I([L("api","HelixSearchApi")],Pc);class tC extends qi{constructor(e){super("Your stream needs to be live to do this",e)}}function Yu(n){return{game_id:n.game,language:n.language,type:n.type,user_id:n.userId,user_login:n.userName}}function rC(n,e){return{user_id:A(n),description:e}}function Ng(n){return{video_id:n}}let lt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get gameId(){return this[c].game_id}get gameName(){return this[c].game_name}async getGame(){return this[c].game_id?te(await this._client.games.getGameById(this[c].game_id)):null}get type(){return this[c].type}get title(){return this[c].title}get viewers(){return this[c].viewer_count}get startDate(){return new Date(this[c].started_at)}get language(){return this[c].language}get thumbnailUrl(){return this[c].thumbnail_url}getThumbnailUrl(e,t){return this[c].thumbnail_url.replace("{width}",e.toString()).replace("{height}",t.toString())}get tags(){return this[c].tags}get isMature(){return this[c].is_mature}};I([V(!1)],lt.prototype,"_client",void 0);lt=I([L("api","HelixStream","id")],lt);let Fs=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get creationDate(){return new Date(this[c].created_at)}get description(){return this[c].description}get positionInSeconds(){return this[c].position_seconds}};I([V(!1)],Fs.prototype,"_client",void 0);Fs=I([L("api","HelixStreamMarker","id")],Fs);let Dc=class extends Fs{constructor(e,t,r){super(e,r),this._videoId=t}get url(){return this[c].URL}get videoId(){return this._videoId}async getVideo(){return te(await this._client.videos.getVideoById(this._videoId))}};Dc=I([L("api","HelixStreamMarkerWithVideo","id")],Dc);var bi;let $s=bi=class extends be{constructor(){super(...arguments),this._getStreamByUserIdBatcher=new Ze({url:"streams"},"user_id","user_id",this._client,e=>new lt(e,this._client)),this._getStreamByUserNameBatcher=new Ze({url:"streams"},"user_login","user_login",this._client,e=>new lt(e,this._client))}async getStreams(e={}){const t=await this._client.callApi({url:"streams",type:"helix",query:{...Yu(e),...de(e)}});return xe(t,lt,this._client)}getStreamsPaginated(e={}){return new fe({url:"streams",query:Yu(e)},this._client,t=>new lt(t,this._client))}async getStreamsByUserNames(e){return(await this.getStreams({userName:e.map(vs)})).data}async getStreamByUserName(e){var t;return(t=(await this.getStreamsByUserNames([e]))[0])!==null&&t!==void 0?t:null}async getStreamByUserNameBatched(e){return await this._getStreamByUserNameBatcher.request(vs(e))}async getStreamsByUserIds(e){return(await this.getStreams({userId:e.map(A)})).data}async getStreamByUserId(e){const t=A(e),r=await this._client.callApi({url:"streams",type:"helix",userId:t,query:Yu({userId:t})});return Xe(r.data[0],i=>new lt(i,this._client))}async getStreamByUserIdBatched(e){return await this._getStreamByUserIdBatcher.request(A(e))}async getStreamMarkersForUser(e,t){var r;const i=await this._client.callApi({url:"streams/markers",type:"helix",query:{...Hg(e),...de(t)},userId:A(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:bg(i.data.map(a=>bi._mapGetStreamMarkersResult(a,this._client))),cursor:(r=i.pagination)===null||r===void 0?void 0:r.cursor}}getStreamMarkersForUserPaginated(e){return new fe({url:"streams/markers",query:Hg(e),userId:A(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,t=>bi._mapGetStreamMarkersResult(t,this._client))}async getStreamMarkersForVideo(e,t,r){var i;const a=await this._client.callApi({url:"streams/markers",type:"helix",query:{...Ng(t),...de(r)},userId:A(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:bg(a.data.map(s=>bi._mapGetStreamMarkersResult(s,this._client))),cursor:(i=a.pagination)===null||i===void 0?void 0:i.cursor}}getStreamMarkersForVideoPaginated(e,t){return new fe({url:"streams/markers",query:Ng(t),userId:A(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,r=>bi._mapGetStreamMarkersResult(r,this._client))}async createStreamMarker(e,t){try{const r=await this._client.callApi({url:"streams/markers",method:"POST",type:"helix",userId:A(e),scopes:["channel:manage:broadcast"],canOverrideScopedUserContext:!0,jsonBody:rC(e,t)});return new Fs(r.data[0],this._client)}catch(r){throw r instanceof Ii&&r.statusCode===404?new tC({cause:r}):r}}async getStreamKey(e){const t=A(e);return(await this._client.callApi({type:"helix",url:"streams/key",userId:t,scopes:["channel:read:stream_key"],query:pe(e)})).data[0].stream_key}async getFollowedStreams(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"streams/followed",userId:r,scopes:["user:read:follows"],query:{...me("user_id",r),...de(t)}});return xe(i,lt,this._client)}getFollowedStreamsPaginated(e){const t=A(e);return new fe({url:"streams/followed",userId:t,scopes:["user:read:follows"],query:me("user_id",t)},this._client,r=>new lt(r,this._client))}static _mapGetStreamMarkersResult(e,t){return e.videos.reduce((r,i)=>[...r,...i.markers.map(a=>new Dc(a,i.video_id,t))],[])}};I([V(!1)],$s.prototype,"_getStreamByUserIdBatcher",void 0);I([V(!1)],$s.prototype,"_getStreamByUserNameBatcher",void 0);$s=bi=I([L("api","HelixStreamApi")],$s);function nC(n,e){return{broadcaster_id:A(n),user_id:A(e)}}let Gs=class extends K{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return await this._client.users.getUserById(this[c].broadcaster_id)}get isGift(){return this[c].is_gift}get tier(){return this[c].tier}};I([V(!1)],Gs.prototype,"_client",void 0);Gs=I([L("api","HelixUserSubscription","broadcasterId")],Gs);let Qs=class extends Gs{get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get gifterId(){return this[c].is_gift?this[c].gifter_id:null}get gifterName(){return this[c].is_gift?this[c].gifter_login:null}get gifterDisplayName(){return this[c].is_gift?this[c].gifter_name:null}async getGifter(){return this[c].is_gift?te(await this._client.users.getUserById(this[c].gifter_id)):null}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};Qs=I([L("api","HelixSubscription","userId")],Qs);let Bc=class extends nr{constructor(e,t){super({url:"subscriptions",scopes:["channel:read:subscriptions"],userId:A(e),query:pe(e)},t,r=>new Qs(r,t))}async getPoints(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).points}};Bc=I([L("api","HelixPaginatedSubscriptionsRequest")],Bc);let Oc=class extends be{async getSubscriptions(e,t){const r=await this._client.callApi({url:"subscriptions",scopes:["channel:read:subscriptions"],type:"helix",userId:A(e),query:{...pe(e),...de(t)}});return{...It(r,Qs,this._client),points:r.points}}getSubscriptionsPaginated(e){return new Bc(e,this._client)}async getSubscriptionsForUsers(e,t){return(await this._client.callApi({type:"helix",url:"subscriptions",userId:A(e),scopes:["channel:read:subscriptions"],query:sv(e,t)})).data.map(i=>new Qs(i,this._client))}async getSubscriptionForUser(e,t){const r=await this.getSubscriptionsForUsers(e,[t]);return r.length?r[0]:null}async checkUserSubscription(e,t){try{const r=await this._client.callApi({type:"helix",url:"subscriptions/user",userId:A(e),scopes:["user:read:subscriptions"],query:nC(t,e)});return new Gs(r.data[0],this._client)}catch(r){if(r instanceof Ii&&r.statusCode===404)return null;throw r}}};Oc=I([L("api","HelixSubscriptionApi")],Oc);let Ws=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get name(){return this[c].team_name}get displayName(){return this[c].team_display_name}get backgroundImageUrl(){return this[c].background_image_url}get bannerUrl(){return this[c].banner}get creationDate(){return new Date(this[c].created_at)}get updateDate(){return new Date(this[c].updated_at)}get info(){return this[c].info}get logoThumbnailUrl(){return this[c].thumbnail_url}async getUserRelations(){return(await this._client.teams.getTeamById(this.id)).userRelations}};I([V(!1)],Ws.prototype,"_client",void 0);Ws=I([L("api","HelixTeam","id")],Ws);let rl=class extends Ws{get userRelations(){return this[c].users.map(e=>new tr(e,this._client))}};rl=I([L("api","HelixTeamWithUsers","id")],rl);let Uc=class extends be{async getTeamsForBroadcaster(e){var t,r;return(r=(t=(await this._client.callApi({type:"helix",url:"teams/channel",userId:A(e),query:pe(e)})).data)===null||t===void 0?void 0:t.map(a=>new Ws(a,this._client)))!==null&&r!==void 0?r:[]}async getTeamById(e){try{const t=await this._client.callApi({type:"helix",url:"teams",query:{id:e}});return new rl(t.data[0],this._client)}catch(t){if(t instanceof Ii&&t.statusCode===500)return null;throw t}}async getTeamByName(e){try{const t=await this._client.callApi({type:"helix",url:"teams",query:{name:e}});return new rl(t.data[0],this._client)}catch(t){if(t instanceof Ii&&t.statusCode===404)return null;throw t}}};Uc=I([L("api","HelixTeamApi")],Uc);function iC(n,e){return{target_user_id:A(n),source_context:e.sourceContext,reason:e.reason}}function aC(n){return{target_user_id:A(n)}}class uv extends K{get id(){return this[c].id}get version(){return this[c].version}get name(){return this[c].name}}let xs=class extends uv{constructor(e,t,r){super(r),this._slotType=e,this._slotId=t}get slotType(){return this._slotType}get slotId(){return this._slotId}};xs=I([L("api","HelixInstalledExtension","id")],xs);let nl=class extends K{getExtensionAtSlot(e,t){const r=this[c][e][t];return r.active?new xs(e,t,r):null}getExtensionsForSlotType(e){return[...Object.entries(this[c][e])].filter(t=>t[1].active).map(([t,r])=>new xs(e,t,r))}getAllExtensions(){return[...Object.entries(this[c])].flatMap(([e,t])=>[...Object.entries(t)].filter(r=>r[1].active).map(([r,i])=>new xs(e,r,i)))}};nl=I([L("api","HelixInstalledExtensionList")],nl);let qc=class extends uv{get canActivate(){return this[c].can_activate}get types(){return this[c].type}};qc=I([L("api","HelixUserExtension","id")],qc);let Pt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get name(){return this[c].login}get displayName(){return this[c].display_name}get description(){return this[c].description}get type(){return this[c].type}get broadcasterType(){return this[c].broadcaster_type}get profilePictureUrl(){return this[c].profile_image_url}get offlinePlaceholderUrl(){return this[c].offline_image_url}get creationDate(){return new Date(this[c].created_at)}async getStream(){return await this._client.streams.getStreamByUserId(this)}async getFollowedChannels(){return await this._client.channels.getFollowedChannels(this)}async getFollowedChannel(e){var t;return(t=(await this._client.channels.getFollowedChannels(this,e)).data[0])!==null&&t!==void 0?t:null}async follows(e){return await this.getFollowedChannel(e)!==null}async getChannelFollowers(){return await this._client.channels.getChannelFollowers(this)}async getChannelFollower(e){var t;return(t=(await this._client.channels.getChannelFollowers(this,e)).data[0])!==null&&t!==void 0?t:null}async isFollowedBy(e){return await this.getChannelFollower(e)!==null}async getSubscriptionTo(e){return await this._client.subscriptions.checkUserSubscription(this,e)}async isSubscribedTo(e){return await this.getSubscriptionTo(e)!==null}async getSubscriber(e){return await this._client.subscriptions.getSubscriptionForUser(this,e)}async hasSubscriber(e){return await this.getSubscriber(e)!==null}};I([V(!1)],Pt.prototype,"_client",void 0);Pt=I([L("api","HelixUser","id")],Pt);let il=class extends Pt{get email(){return this[c].email}async setDescription(e){return await this._client.users.updateAuthenticatedUser(this,{description:e})}};il=I([L("api","HelixPrivilegedUser","id")],il);let Vs=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].display_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};I([V(!1)],Vs.prototype,"_client",void 0);Vs=I([L("api","HelixUserBlock","userId")],Vs);let zs=class extends be{constructor(){super(...arguments),this._getUserByIdBatcher=new Ze({url:"users"},"id","id",this._client,e=>new Pt(e,this._client)),this._getUserByNameBatcher=new Ze({url:"users"},"login","login",this._client,e=>new Pt(e,this._client))}async getUsersByIds(e){return await this._getUsers("id",e.map(A))}async getUsersByNames(e){return await this._getUsers("login",e.map(vs))}async getUserById(e){const t=A(e),r=await this._client.callApi({type:"helix",url:"users",userId:t,query:{id:t}});return Xe(r.data[0],i=>new Pt(i,this._client))}async getUserByIdBatched(e){return await this._getUserByIdBatcher.request(A(e))}async getUserByName(e){const t=await this._getUsers("login",[vs(e)]);return t.length?t[0]:null}async getUserByNameBatched(e){return await this._getUserByNameBatcher.request(vs(e))}async getAuthenticatedUser(e,t=!1){var r;const i=await this._client.callApi({type:"helix",url:"users",forceType:"user",userId:A(e),scopes:t?["user:read:email"]:void 0});if(!(!((r=i.data)===null||r===void 0)&&r.length))throw new Ti("Could not get authenticated user");return new il(i.data[0],this._client)}async updateAuthenticatedUser(e,t){const r=await this._client.callApi({type:"helix",url:"users",method:"PUT",userId:A(e),scopes:["user:edit"],query:{description:t.description}});return new il(r.data[0],this._client)}async getBlocks(e,t){const r=await this._client.callApi({type:"helix",url:"users/blocks",userId:A(e),scopes:["user:read:blocked_users"],query:{...pe(e),...de(t)}});return xe(r,Vs,this._client)}getBlocksPaginated(e){return new fe({url:"users/blocks",userId:A(e),scopes:["user:read:blocked_users"],query:pe(e)},this._client,t=>new Vs(t,this._client))}async createBlock(e,t,r={}){await this._client.callApi({type:"helix",url:"users/blocks",method:"PUT",userId:A(e),scopes:["user:manage:blocked_users"],query:iC(t,r)})}async deleteBlock(e,t){await this._client.callApi({type:"helix",url:"users/blocks",method:"DELETE",userId:A(e),scopes:["user:manage:blocked_users"],query:aC(t)})}async getExtensionsForAuthenticatedUser(e,t=!1){return(await this._client.callApi({type:"helix",url:"users/extensions/list",userId:A(e),scopes:t?["channel:manage:extensions"]:["user:read:broadcast","channel:manage:extensions"]})).data.map(i=>new qc(i))}async getActiveExtensions(e,t=!1){const r=A(e),i=await this._client.callApi({type:"helix",url:"users/extensions",userId:r,scopes:t?["user:read:broadcast","channel:manage:extensions"]:void 0,query:me("user_id",r)});return new nl(i.data)}async updateActiveExtensionsForAuthenticatedUser(e,t){const r=await this._client.callApi({type:"helix",url:"users/extensions",method:"PUT",userId:A(e),scopes:["channel:manage:extensions"],jsonBody:{data:t}});return new nl(r.data)}async _getUsers(e,t){if(t.length===0)return[];const r={[e]:t};return(await this._client.callApi({type:"helix",url:"users",query:r})).data.map(a=>new Pt(a,this._client))}};I([V(!1)],zs.prototype,"_getUserByIdBatcher",void 0);I([V(!1)],zs.prototype,"_getUserByNameBatcher",void 0);zs=I([L("api","HelixUserApi")],zs);let rr=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get title(){return this[c].title}get description(){return this[c].description}get creationDate(){return new Date(this[c].created_at)}get publishDate(){return new Date(this[c].published_at)}get url(){return this[c].url}get thumbnailUrl(){return this[c].thumbnail_url}getThumbnailUrl(e,t){return this[c].thumbnail_url.replace("%{width}",e.toString()).replace("%{height}",t.toString())}get isPublic(){return this[c].viewable==="public"}get views(){return this[c].view_count}get language(){return this[c].language}get type(){return this[c].type}get duration(){return this[c].duration}get durationInSeconds(){const e=this[c].duration.match(/\d+[hms]/g);if(!e)throw new Ti(`Could not parse duration string: ${this[c].duration}`);return e.map(t=>{const r=/(\d+)([hms])/.exec(t);if(!r)throw new Ti(`Could not parse partial duration string: ${t}`);const[,i,a]=r;return parseInt(i,10)*{h:3600,m:60,s:1}[a]}).reduce((t,r)=>t+r)}get streamId(){return this[c].stream_id}get mutedSegmentData(){var e,t;return(t=(e=this[c].muted_segments)===null||e===void 0?void 0:e.slice())!==null&&t!==void 0?t:[]}isMutedAt(e,t,r=!1){if(this[c].muted_segments===null)return!1;if(t==null)return this[c].muted_segments.some(a=>a.offset<=e&&e<=a.offset+a.duration);const i=e+t;return r?this[c].muted_segments.some(a=>{const s=a.offset+a.duration;return e<s&&a.offset<i}):this[c].muted_segments.some(a=>{const s=a.offset+a.duration;return a.offset<=e&&i<=s})}};I([V(!1)],rr.prototype,"_client",void 0);I([ge()],rr.prototype,"durationInSeconds",null);rr=I([eo,L("api","HelixVideo","id")],rr);var Ro;let al=Ro=class extends be{constructor(){super(...arguments),this._getVideoByIdBatcher=new Ze({url:"videos"},"id","id",this._client,e=>new rr(e,this._client))}async getVideosByIds(e){return(await this._getVideos("id",e)).data}async getVideoById(e){const t=await this.getVideosByIds([e]);return t.length?t[0]:null}async getVideoByIdBatched(e){return await this._getVideoByIdBatcher.request(e)}async getVideosByUser(e,t={}){const r=A(e);return await this._getVideos("user_id",[r],t)}getVideosByUserPaginated(e,t={}){const r=A(e);return this._getVideosPaginated("user_id",[r],t)}async getVideosByGame(e,t={}){return await this._getVideos("game_id",[e],t)}getVideosByGamePaginated(e,t={}){return this._getVideosPaginated("game_id",[e],t)}async deleteVideosByIds(e,t){await this._client.callApi({type:"helix",url:"videos",method:"DELETE",scopes:["channel:manage:videos"],userId:A(e),query:{id:t}})}async _getVideos(e,t,r={}){if(!t.length)return{data:[]};const i=await this._client.callApi({type:"helix",url:"videos",userId:e==="user_id"?t[0]:void 0,query:{...Ro._makeVideosQuery(e,t,r),...de(r)}});return xe(i,rr,this._client)}_getVideosPaginated(e,t,r={}){return new fe({url:"videos",userId:e==="user_id"?t[0]:void 0,query:Ro._makeVideosQuery(e,t,r)},this._client,i=>new rr(i,this._client))}static _makeVideosQuery(e,t,r={}){const{language:i,period:a,orderBy:s,type:o}=r;return{[e]:t,language:i,period:a,sort:s,type:o}}};I([V(!1)],al.prototype,"_getVideoByIdBatcher",void 0);al=Ro=I([L("api","HelixVideoApi")],al);function sC(n,e){return{from_user_id:A(n),to_user_id:A(e)}}let kc=class extends be{async sendWhisper(e,t,r){await this._client.callApi({type:"helix",url:"whispers",method:"POST",userId:A(e),scopes:["user:manage:whispers"],query:sC(e,t),jsonBody:{message:r}})}};kc=I([L("api","HelixWhisperApi")],kc);class oC{constructor(e,t,r){this._options=e,this._httpStatus=t,this._resolvedUserId=r}get options(){return this._options}get httpStatus(){return this._httpStatus}get resolvedUserId(){return this._resolvedUserId}}let _e=class extends Tl{constructor(e,t,r){super(),this.onRequest=this.registerEvent(),this._config=e,this._logger=t,this._rateLimiter=r}async requestScopesForUser(e,t){await this._config.authProvider.getAccessTokenForUser(e,...t.map(r=>[r]))}async getTokenInfo(){try{const e=await this.callApi({type:"auth",url:"validate"});return new cc(e)}catch(e){throw e instanceof Ii&&e.statusCode===401?new g0({cause:e}):e}}async callApi(e){var t;const{authProvider:r}=this._config;if(!((t=e.auth)!==null&&t!==void 0?t:!0))return await nv(e,r.clientId,void 0,void 0,this._config.fetchOptions);let a=!1;if(e.forceType)switch(e.forceType){case"app":{if(!r.getAppAccessToken)throw new Error("Tried to make an API call that requires an app access token but your auth provider does not support that");const u=await r.getAppAccessToken();return await this._callApiUsingInitialToken(e,u)}case"user":{a=!0;break}default:throw new Ti(`Unknown forced token type: ${e.forceType}`)}if(e.scopes&&(a=!0),a){const u=e.canOverrideScopedUserContext?this._getUserIdFromRequestContext(e.userId):e.userId;if(!u)throw new Error("Tried to make an API call with a user context but no context user ID");const h=await r.getAccessTokenForUser(u,e.scopes);if(!h)throw new Error(`Tried to make an API call with a user context for user ID ${u} but no token was found`);if(uc(h)&&r.refreshAccessTokenForUser){const m=await r.refreshAccessTokenForUser(u);return await this._callApiUsingInitialToken(e,m,!0)}return await this._callApiUsingInitialToken(e,h)}const s=this._getUserIdFromRequestContext(e.userId),o=s===null?await r.getAnyAccessToken():await r.getAnyAccessToken(s??e.userId);if(uc(o)&&o.userId&&r.refreshAccessTokenForUser){const u=await r.refreshAccessTokenForUser(o.userId);return await this._callApiUsingInitialToken(e,u,!0)}return await this._callApiUsingInitialToken(e,o)}get bits(){return new hc(this)}get channels(){return new qo(this)}get channelPoints(){return new _c(this)}get charity(){return new gc(this)}get chat(){return new yc(this)}get clips(){return new Wo(this)}get contentClassificationLabels(){return new bc(this)}get entitlements(){return new Vo(this)}get eventSub(){return new vc(this)}get extensions(){return new wc(this)}get games(){return new Di(this)}get hypeTrain(){return new M0(this)}get goals(){return new xc(this)}get moderation(){return new Cc(this)}get polls(){return new Hc(this)}get predictions(){return new Ac(this)}get raids(){return new Tc(this)}get schedule(){return new eC(this)}get search(){return new Pc(this)}get streams(){return new $s(this)}get subscriptions(){return new Oc(this)}get teams(){return new Uc(this)}get users(){return new zs(this)}get videos(){return new al(this)}get whispers(){return new kc(this)}get rateLimiterStats(){return this._rateLimiter instanceof gd?this._rateLimiter.stats:null}get _authProvider(){return this._config.authProvider}get _mockServerPort(){return this._config.mockServerPort}get _batchDelay(){var e;return(e=this._config.batchDelay)!==null&&e!==void 0?e:0}_getUserIdFromRequestContext(e){return e}async _callApiUsingInitialToken(e,t,r=!1){var i;const{authProvider:a}=this._config,{authorizationType:s}=a;let o=await this._callApiInternal(e,a.clientId,t.accessToken,s);if(o.status===401&&!r){if(t.userId){if(a.refreshAccessTokenForUser){const u=await a.refreshAccessTokenForUser(t.userId);o=await this._callApiInternal(e,a.clientId,u.accessToken,s)}}else if(a.getAppAccessToken){const u=await a.getAppAccessToken(!0);o=await this._callApiInternal(e,a.clientId,u.accessToken,s)}}return this.emit(this.onRequest,new oC(e,o.status,(i=t.userId)!==null&&i!==void 0?i:null)),await lc(o,e),await rv(o)}async _callApiInternal(e,t,r,i){var a,s,o;const{fetchOptions:u,mockServerPort:h}=this._config,m=(a=e.type)!==null&&a!==void 0?a:"helix";this._logger.debug(`Calling ${m} API: ${(s=e.method)!==null&&s!==void 0?s:"GET"} ${e.url}`),this._logger.trace(`Query: ${JSON.stringify(e.query)}`),e.jsonBody&&this._logger.trace(`Request body: ${JSON.stringify(e.jsonBody)}`);const w=w0.operation({retries:3,minTimeout:500,factor:2}),{promise:y,resolve:_,reject:p}=Do();w.attempt(async()=>{try{const d=m==="helix"?await this._rateLimiter.request({options:e,clientId:t,accessToken:r,authorizationType:i,fetchOptions:u,mockServerPort:h}):await Rl(e,t,r,i,u,h);!d.ok&&d.status>=500&&d.status<600&&await lc(d,e),_(d)}catch(d){if(w.retry(d))return;p(w.mainError())}});const l=await y;return this._logger.debug(`Called ${m} API: ${(o=e.method)!==null&&o!==void 0?o:"GET"} ${e.url} - result: ${l.status}`),l}};I([ge()],_e.prototype,"bits",null);I([ge()],_e.prototype,"channels",null);I([ge()],_e.prototype,"channelPoints",null);I([ge()],_e.prototype,"charity",null);I([ge()],_e.prototype,"chat",null);I([ge()],_e.prototype,"clips",null);I([ge()],_e.prototype,"contentClassificationLabels",null);I([ge()],_e.prototype,"entitlements",null);I([ge()],_e.prototype,"eventSub",null);I([ge()],_e.prototype,"extensions",null);I([ge()],_e.prototype,"games",null);I([ge()],_e.prototype,"hypeTrain",null);I([ge()],_e.prototype,"goals",null);I([ge()],_e.prototype,"moderation",null);I([ge()],_e.prototype,"polls",null);I([ge()],_e.prototype,"predictions",null);I([ge()],_e.prototype,"raids",null);I([ge()],_e.prototype,"schedule",null);I([ge()],_e.prototype,"search",null);I([ge()],_e.prototype,"streams",null);I([ge()],_e.prototype,"subscriptions",null);I([ge()],_e.prototype,"teams",null);I([ge()],_e.prototype,"users",null);I([ge()],_e.prototype,"videos",null);I([ge()],_e.prototype,"whispers",null);_e=I([eo,L("api","ApiClient")],_e);let Mc=class extends _e{_getUserIdFromRequestContext(){return null}};Mc=I([L("api","ApiClient")],Mc);let sl=class extends _e{constructor(e,t,r,i){super(e,t,r),this._userId=i}_getUserIdFromRequestContext(){return this._userId}};sl=I([L("api","ApiClient")],sl);let jc=class extends _e{constructor(e){if(!e.authProvider)throw new c0("No auth provider given. Please supply the `authProvider` option.");const t={name:"twurple:api:rate-limiter",...e.logger};super(e,Al({name:"twurple:api:client",...e.logger}),El?new i0({getPartitionKey:r=>{var i;return(i=r.userId)!==null&&i!==void 0?i:null},createChild:()=>new d0({logger:t})}):new a0({logger:t,bucketSize:800,timeFrame:64e3,doRequest:async({options:r,clientId:i,accessToken:a,authorizationType:s,fetchOptions:o,mockServerPort:u})=>await Rl(r,i,a,s,o,u),getPartitionKey:r=>{var i;return(i=r.userId)!==null&&i!==void 0?i:null}}))}async asUser(e,t){const r=new sl(this._config,this._logger,this._rateLimiter,A(e));return await t(r)}async asIntent(e,t){if(!this._authProvider.getAccessTokenForIntent)throw new Error("Trying to use intents with an auth provider that does not support them");for(const r of e){const i=await this._authProvider.getAccessTokenForIntent(r);if(i){const a=new sl(this._config,this._logger,this._rateLimiter,i.userId);return await t(a)}}throw new Error(`Intents [${e.join(", ")}] not found in auth provider`)}async withoutUser(e){const t=new Mc(this._config,this._logger,this._rateLimiter);return await e(t)}};jc=I([L("api","ApiClient")],jc);const Fg={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,STORYBOOK:"true",VITE_API_BASE_URL:"http://localhost:9155/",VITE_BASE_PATH:"http://localhost:9155/",VITE_STATE:"book"},Ks=new Map,Eo=n=>{const e=Ks.get(n);return e?Object.fromEntries(Object.entries(e.stores).map(([t,r])=>[t,r.getState()])):{}},lC=(n,e,t)=>{if(n===void 0)return{type:"untracked",connection:e.connect(t)};const r=Ks.get(t.name);if(r)return{type:"tracked",store:n,...r};const i={connection:e.connect(t),stores:{}};return Ks.set(t.name,i),{type:"tracked",store:n,...i}},uC=(n,e)=>{if(e===void 0)return;const t=Ks.get(n);t&&(delete t.stores[e],Object.keys(t.stores).length===0&&Ks.delete(n))},cC=n=>{var e,t;if(!n)return;const r=n.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(t=/.+ (.+) .+/.exec(a))==null?void 0:t[1]},dC=(n,e={})=>(t,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...u}=e;let h;try{h=(a??(Fg?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!h)return n(t,r,i);const{connection:m,...w}=lC(o,h,u);let y=!0;i.setState=(l,d,b)=>{const S=t(l,d);if(!y)return S;const R=b===void 0?{type:s||cC(new Error().stack)||"anonymous"}:typeof b=="string"?{type:b}:b;return o===void 0?(m?.send(R,r()),S):(m?.send({...R,type:`${o}/${R.type}`},{...Eo(u.name),[o]:i.getState()}),S)},i.devtools={cleanup:()=>{m&&typeof m.unsubscribe=="function"&&m.unsubscribe(),uC(u.name,o)}};const _=(...l)=>{const d=y;y=!1,t(...l),y=d},p=n(i.setState,r,i);if(w.type==="untracked"?m?.init(p):(w.stores[w.store]=i,m?.init(Object.fromEntries(Object.entries(w.stores).map(([l,d])=>[l,l===w.store?p:d.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let l=!1;const d=i.dispatch;i.dispatch=(...b)=>{(Fg?"production":void 0)!=="production"&&b[0].type==="__setState"&&!l&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),l=!0),d(...b)}}return m.subscribe(l=>{var d;switch(l.type){case"ACTION":if(typeof l.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Zu(l.payload,b=>{if(b.type==="__setState"){if(o===void 0){_(b.state);return}Object.keys(b.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const S=b.state[o];if(S==null)return;JSON.stringify(i.getState())!==JSON.stringify(S)&&_(S);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(b)});case"DISPATCH":switch(l.payload.type){case"RESET":return _(p),o===void 0?m?.init(i.getState()):m?.init(Eo(u.name));case"COMMIT":if(o===void 0){m?.init(i.getState());return}return m?.init(Eo(u.name));case"ROLLBACK":return Zu(l.state,b=>{if(o===void 0){_(b),m?.init(i.getState());return}_(b[o]),m?.init(Eo(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Zu(l.state,b=>{if(o===void 0){_(b);return}JSON.stringify(i.getState())!==JSON.stringify(b[o])&&_(b[o])});case"IMPORT_STATE":{const{nextLiftedState:b}=l.payload,S=(d=b.computedStates.slice(-1)[0])==null?void 0:d.state;if(!S)return;_(o===void 0?S:S[o]),m?.send(null,b);return}case"PAUSE_RECORDING":return y=!y}return}}),p},hC=dC,Zu=(n,e)=>{let t;try{t=JSON.parse(n)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}t!==void 0&&e(t)},pC={badges:[],twitchMessages:[]},$g=mx()(hC((n,e)=>({...pC,init:(t,r)=>{const{client:i,fetcher:a,parser:s,newParser:o}=mC(t,r);_C(i).then(u=>n({badges:u})).catch(u=>{console.error(u),n({badges:[]})}),Promise.all([a.fetchTwitchEmotes(),a.fetchTwitchEmotes(785975641),a.fetchBTTVEmotes(),a.fetchSevenTVEmotes(),a.fetchSevenTVEmotes(785975641),a.fetchFFZEmotes()]).then(()=>{console.log("Emotes loaded"),n({fetcher:a,parser:s,twitchApiClient:i,parseToLink:o})}).catch(u=>{console.error("Error loading emotes..."),console.error(u),n({fetcher:a,parser:s,twitchApiClient:i,parseToLink:o})})},setBadges:t=>n({badges:t}),parse:(t,r)=>{const i=e().parser??e().parseToLink;return i?i.parse(t,r):t},sendMsgToPyrokxnezxz:async t=>{await px.invoke("TwitchMsg",t)}})));function mC(n,e){const t=new Pi(n,e),r=new jc({authProvider:t}),i=new Wu.EmoteFetcher(void 0,void 0,{apiClient:r}),a=new Wu.EmoteParser(i,{template:'<img class="emote" alt="{name}" src="{link}" />',match:/(\w+)+?/g}),s=new Wu.EmoteParser(i,{template:'<img class="emote" alt="{name}" src="{link}" />',match:new RegExp("(?<!<[^>]*)(\\w+)(?![^<]*>)","g")});return{fetcher:i,parser:a,client:r,newParser:s}}async function _C(n){const e=await n.chat.getChannelBadges(785975641),t=await n.chat.getGlobalBadges();return[...e,...t]}class gC extends Tl{constructor({lineBased:e,logger:t,additionalOptions:r}={}){super(),this._currentLine="",this._connecting=!1,this._connected=!1,this.onReceive=this.registerEvent(),this.onConnect=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onEnd=this.registerEvent(),this._lineBased=e??!1,this._logger=t,this._additionalOptions=r}get isConnecting(){return this._connecting}get isConnected(){return this._connected}sendLine(e){this._connected&&(e=e.replace(/[\0\r\n]/g,""),this.sendRaw(`${e}\r
`))}assumeExternalDisconnect(){var e;(e=this._logger)===null||e===void 0||e.trace("AbstractConnection assumeExternalDisconnect"),this._connected=!1,this._connecting=!1,this.clearSocket(),this.emit(this.onDisconnect,!1)}receiveRaw(e){var t,r;if(!this._lineBased){this.emit(this.onReceive,e);return}const i=e.split(`\r
`);if(this._currentLine+=(t=i.shift())!==null&&t!==void 0?t:"",i.length){this.emit(this.onReceive,this._currentLine),this._currentLine=(r=i.pop())!==null&&r!==void 0?r:"";for(const a of i)this.emit(this.onReceive,a)}}}class fC{constructor(){throw new Error("DirectConnection is not implemented in a browser environment")}}class yC extends Tl{constructor(e,t,r={}){var i;super(),this._type=e,this._target=t,this._config=r,this._retryLimit=1/0,this._initialRetryLimit=3,this._connecting=!1,this._connectionRetryCount=0,this.onReceive=this.registerEvent(),this.onConnect=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onEnd=this.registerEvent(),this._retryLimit=(i=r.retryLimit)!==null&&i!==void 0?i:1/0,this._logger=r.logger}get isConnected(){var e,t;return(t=(e=this._currentConnection)===null||e===void 0?void 0:e.isConnected)!==null&&t!==void 0?t:!1}get isConnecting(){var e,t;return(t=(e=this._currentConnection)===null||e===void 0?void 0:e.isConnecting)!==null&&t!==void 0?t:this._connecting}get hasSocket(){var e,t;return(t=(e=this._currentConnection)===null||e===void 0?void 0:e.hasSocket)!==null&&t!==void 0?t:!1}sendLine(e){var t;(t=this._currentConnection)===null||t===void 0||t.sendLine(e)}connect(){if(this._currentConnection||this._connecting)throw new Error("Connection already present");this._connecting=!0,this._connectionRetryCount=0,this._tryConnect(!0)}disconnect(){var e;if((e=this._logger)===null||e===void 0||e.trace(`PersistentConnection disconnect currentConnectionExists:${(!!this._currentConnection).toString()} connecting:${this._connecting.toString()}`),this._connecting=!1,this._currentConnection){const t=this._currentConnection;this._currentConnection=void 0,t.disconnect()}}assumeExternalDisconnect(){var e,t;(e=this._logger)===null||e===void 0||e.trace("PersistentConnection assumeExternalDisconnect"),(t=this._currentConnection)===null||t===void 0||t.assumeExternalDisconnect()}reconnect(){this._reconnect(!0)}acknowledgeSuccessfulReconnect(){this._previousConnection&&(this._previousConnection.disconnect(),this._previousConnection=void 0)}_startTryingToConnect(e=!1){this._connecting=!0,this._connectionRetryCount=0,this._tryConnect(e)}_tryConnect(e=!1){var t,r;(t=this._logger)===null||t===void 0||t.trace(`PersistentConnection tryConnect currentConnectionExists:${(!!this._currentConnection).toString()} connecting:${this._connecting.toString()}`);const i=e?this._initialRetryLimit:this._retryLimit;(r=this._retryTimerGenerator)!==null&&r!==void 0||(this._retryTimerGenerator=VS(120));const a=this._currentConnection=new this._type(WS(this._target),this._config);a.onReceive(s=>this.emit(this.onReceive,s)),a.onConnect(()=>{this.emit(this.onConnect),this._connecting=!1,this._retryTimerGenerator=void 0}),a.onDisconnect((s,o)=>{var u,h,m;if(this.emit(this.onDisconnect,s,o),s)this.emit(this.onEnd,!0),this._connecting=!1,this._retryTimerGenerator=void 0,a.disconnect(),this._currentConnection===a&&(this._currentConnection=void 0),this._previousConnection===a&&(this._previousConnection=void 0);else if(this._connecting){if((u=this._logger)===null||u===void 0||u.debug(`Connection error caught: ${(h=o?.message)!==null&&h!==void 0?h:"unknown error"}`),this._connectionRetryCount>=i)return;this._connectionRetryCount++;const w=this._retryTimerGenerator.next().value;w!==0&&((m=this._logger)===null||m===void 0||m.info(`Retrying in ${w} seconds`)),setTimeout(()=>{var y;this._connecting&&((y=this._logger)===null||y===void 0||y.info(e?"Retrying connection":"Trying to reconnect"),this._tryConnect())},w*1e3)}else this._reconnect()}),a.connect()}_reconnect(e=!1){e&&this._config.overlapManualReconnect?(this._previousConnection=this._currentConnection,this._currentConnection=void 0):this.disconnect(),this._startTryingToConnect(e)}}var vi=null;typeof WebSocket<"u"?vi=WebSocket:typeof MozWebSocket<"u"?vi=MozWebSocket:typeof global<"u"?vi=global.WebSocket||global.MozWebSocket:typeof window<"u"?vi=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(vi=self.WebSocket||self.MozWebSocket);class bC extends gC{constructor(e,t){if(super(t),this._socket=null,this._closingOnDemand=!1,e.hostName&&e.port)this._url=`ws${e.secure?"s":""}://${e.hostName}:${e.port}`;else if(e.url)this._url=e.url;else throw new Error("WebSocketConnection requires either hostName & port or url to be set")}get hasSocket(){return!!this._socket}sendRaw(e){var t;(t=this._socket)===null||t===void 0||t.send(e)}connect(){var e,t;(e=this._logger)===null||e===void 0||e.trace("WebSocketConnection connect"),this._connecting=!0,this._socket=new vi(this._url,(t=this._additionalOptions)===null||t===void 0?void 0:t.wsOptions),this._socket.onopen=()=>{var r;(r=this._logger)===null||r===void 0||r.trace("WebSocketConnection onOpen"),this._connected=!0,this._connecting=!1,this._closingOnDemand=!1,this.emit(this.onConnect)},this._socket.onmessage=({data:r})=>{this.receiveRaw(r.toString())},this._socket.onerror=r=>{var i;(i=this._logger)===null||i===void 0||i.trace(`WebSocketConnection onError message:${r.message}`)},this._socket.onclose=r=>{var i;const a=this._connected,s=this._connecting;if((i=this._logger)===null||i===void 0||i.trace(`WebSocketConnection onClose wasConnected:${a.toString()} wasConnecting:${s.toString()} closingOnDemand:${this._closingOnDemand.toString()} wasClean:${r.wasClean.toString()}`),this._connected=!1,this._connecting=!1,this._closingOnDemand)this._closingOnDemand=!1,this.emit(this.onDisconnect,!0),this.emit(this.onEnd,!0);else{const o=new Error(`[${r.code}] ${r.reason}`);this.emit(this.onDisconnect,!1,o),this.emit(this.onEnd,!1,o)}this.clearSocket()}}disconnect(){var e,t;(e=this._logger)===null||e===void 0||e.trace("WebSocketConnection disconnect"),this._closingOnDemand=!0,(t=this._socket)===null||t===void 0||t.close()}clearSocket(){this._socket&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onerror=null,this._socket.onclose=null,this._socket=null)}}function Ss(n){var e,t,r;if(Array.isArray(n)){for(t=Array(e=n.length);e--;)t[e]=(r=n[e])&&typeof r=="object"?Ss(r):r;return t}if(Object.prototype.toString.call(n)==="[object Object]"){t={};for(e in n)e==="__proto__"?Object.defineProperty(t,e,{value:Ss(n[e]),configurable:!0,enumerable:!0,writable:!0}):t[e]=(r=n[e])&&typeof r=="object"?Ss(r):r;return t}return n}const vC={name:"away-notify"};class ol extends Error{constructor(e,t,r){super(`command "${e}" expected ${t} or more parameters, got ${r}`),this._command=e,this._expectedParams=t,this._actualParams=r,Object.setPrototypeOf(this,ol.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ol)}get command(){return this._command}get expectedParams(){return this._expectedParams}get actualParams(){return this._actualParams}}class ll extends Error{constructor(e,t,r,i){var a;super(`required parameter "${t}" did not validate against ${(a=r.type)!==null&&a!==void 0?a:"regex"} validation: "${i}"`),this._command=e,this._paramName=t,this._paramSpec=r,this._givenValue=i,Object.setPrototypeOf(this,ll.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ll)}get command(){return this._command}get paramName(){return this._paramName}get paramSpec(){return this._paramSpec}get givenValue(){return this._givenValue}}const Hi={channelTypes:"#&",supportedUserModes:"iwso",supportedChannelModes:{prefix:"ov",list:"b",alwaysWithParam:"ovk",paramWhenSet:"l",noParam:"imnpst"},prefixes:[{modeChar:"v",prefix:"+"},{modeChar:"o",prefix:"@"}]};var ec={exports:{}},Gg;function wC(){return Gg||(Gg=1,function(n){n.exports=e=>{if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},n.exports.default=n.exports}(ec)),ec.exports}var xC=wC();const SC=Js(xC);function Lc(n,e="#&"){return new RegExp(`^[${SC(e)}][^ \b\0
\r,]+$`).test(n)}const Qg={0:"\0",n:`
`,r:"\r","":""};function Wg(n){if(!n.startsWith("")||(n=n.substring(1),n.endsWith("")&&(n=n.slice(0,-1)),!n))return!1;n=n.replace(/\x10(.)/,(r,i)=>i in Qg?Qg[i]:"");let[e,t=""]=er(n," ",2);return e=e?e.toUpperCase():"",{command:e,params:t}}const CC={"\\":"\\",";":":","\n":"n","\r":"r"," ":"s"};function EC(n){return n.replace(/[\\;\n\r ]/g,e=>`\\${CC[e]}`)}function HC(n){let e=`${n.nick}`;return n.user&&(e+=`!${n.user}`),n.host&&(e+=`@${n.host}`),e}function AC(n,e,t,r,i=Hi,a=!1){const s=new n(n.COMMAND,void 0,{serverProperties:i}),o={};if(s._paramSpec&&sc(s._paramSpec,(u,h)=>{if(!(a&&u.noServer)&&!(!a&&u.noClient)){if(h in e){const m=e[h];if(m!==void 0){if(n.checkParam(m,u,i))o[h]={value:m,trailing:!!u.trailing};else if(!u.optional)throw new Error(`required parameter "${h}" did not suit requirements: "${m}"`)}}if(!(h in o)&&!u.optional)throw new Error(`required parameter "${h}" not found in command "${n.COMMAND}"`)}}),s._parsedParams=o,s._paramSpec)for(const u of Object.keys(s._paramSpec))Object.defineProperty(s,u,{get(){var h,m;return(m=(h=this._parsedParams)===null||h===void 0?void 0:h[u])===null||m===void 0?void 0:m.value}});return s._initPrefixAndTags(t,r),s}class F{static checkParam(e,t,r=Hi){return!(t.type==="channel"&&!Lc(e,r.channelTypes)||t.type==="channelList"&&!e.split(",").every(a=>Lc(a,r.channelTypes))||t.match&&!t.match.test(e))}constructor(e,{params:t,tags:r,prefix:i,rawLine:a}={},{serverProperties:s=Hi,isServer:o=!1,shouldParseParams:u=!0}={},h){this._params=[],this._serverProperties=Hi,this._paramSpec=h,this._command=e,this._params=t,this._tags=r??new Map,this._prefix=i,this._serverProperties=s,this._raw=a,u&&this.parseParams(o)}getMinParamCount(e=!1){return this._paramSpec?Object.values(this._paramSpec).filter(t=>t.noServer&&e||t.noClient&&!e?!1:!t.optional).length:0}get paramCount(){var e,t;return(t=(e=this._params)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}prefixToString(){return this._prefix?HC(this._prefix):""}tagsToString(){return[...this._tags.entries()].map(([e,t])=>t?`${e}=${EC(t)}`:e).join(";")}toString(e=!1,t=!1){const i=[t?this._buildCommandFromRawParams():this._buildCommandFromNamedParams()];if(e){const s=this.prefixToString();s&&i.unshift(`:${s}`)}const a=this.tagsToString();return a&&i.unshift(`@${a}`),i.join(" ")}_initPrefixAndTags(e,t){this._prefix=e,t&&(this._tags=t)}parseParams(e=!1){if(this._params){let t=this.getMinParamCount(e);if(t>this._params.length)throw new ol(this._command,t,this._params.length);const r=this._paramSpec;if(!r)return;let i=0;const a={};for(const[s,o]of Object.entries(r)){if(o.noServer&&e||o.noClient&&!e)continue;if(this._params.length-i<=t){if(o.optional)continue;if(this._params.length-i!==t)throw new Error("not enough parameters left for required parameters parsing (this is a library bug)")}let u=this._params[i];if(!u){if(o.optional)break;throw new Error("unexpected parameter underflow")}if(o.rest){const h=[];for(;this._params[i]&&!this._params[i].trailing;)h.push(this._params[i].value),++i;if(!h.length){if(o.optional)continue;throw new Error(`no parameters left for required rest parameter "${s}"`)}u={value:h.join(" "),trailing:!1}}if(F.checkParam(u.value,o))a[s]={...u},o.optional||--t,o.rest||++i;else if(!o.optional)throw new ll(this._command,s,o,u.value);if(o.trailing)break}if(this._parsedParams=a,this._paramSpec)for(const s of Object.keys(this._paramSpec))Object.defineProperty(this,s,{get(){var o,u;return(u=(o=this._parsedParams)===null||o===void 0?void 0:o[s])===null||u===void 0?void 0:u.value}})}}get rawParamValues(){var e,t;return(t=(e=this._params)===null||e===void 0?void 0:e.map(r=>r.value))!==null&&t!==void 0?t:[]}get prefix(){return this._prefix}get command(){return this._command}get tags(){return this._tags}get rawLine(){return this._raw}isResponseTo(e){return!1}endsResponseTo(e){return!1}_acceptsInReplyCollection(e){return e.isResponseTo(this)}_buildCommandFromNamedParams(){const e=this._paramSpec?Object.keys(this._paramSpec):[];return[this._command,...e.map(t=>{var r;const i=(r=this._parsedParams)===null||r===void 0?void 0:r[t];if(i)return(i.trailing?":":"")+i.value}).filter(t=>t!==void 0)].join(" ")}_buildCommandFromRawParams(){var e,t;return[this._command,...(t=(e=this._params)===null||e===void 0?void 0:e.map(r=>`${r.trailing?":":""}${r.value}`))!==null&&t!==void 0?t:[]].join(" ")}}F.COMMAND="";F.SUPPORTS_CAPTURE=!1;class cv extends F{constructor(e,t,r){super(e,t,r,{reference:{},type:{optional:!0},additionalParams:{optional:!0}})}}cv.COMMAND="BATCH";const RC={name:"batch",messageTypes:[cv],usesTags:!0},TC={name:"cap-notify"};class dv extends F{constructor(e,t,r){super(e,t,r,{newUser:{},newHost:{}})}}dv.COMMAND="CHGHOST";const IC={name:"chghost",messageTypes:[dv]},PC={name:"invite-notify"};class hv extends F{}hv.COMMAND="ACK";const DC={name:"labeled-response",messageTypes:[hv],usesTags:!0},BC={name:"message-tags",usesTags:!0},OC={name:"multi-prefix"},UC=Object.freeze(Object.defineProperty({__proto__:null,AwayNotify:vC,Batch:RC,CapNotify:TC,ChgHost:IC,InviteNotify:PC,LabeledResponse:DC,MessageTags:BC,MultiPrefix:OC},Symbol.toStringTag,{value:"Module"}));class qC{constructor(e,t,...r){this._client=e,this._originalMessage=t,this._messages=[],this._endEventHandlers=new Map,this._types=new Set(r)}untilEvent(e){this._cleanEndEventHandler(e);const t=this._client.on(e,()=>this.end());this._endEventHandlers.set(e,t)}async promise(){return this._promise||(this._promise=new Promise(e=>{this._promiseResolve=e})),await this._promise}collect(e){return this._originalMessage._acceptsInReplyCollection(e)?(this._messages.push(e),e.endsResponseTo(this._originalMessage)&&this.end(),!0):!1}end(){this._client.stopCollect(this),this._cleanEndEventHandlers(),this._promiseResolve&&this._promiseResolve(this._messages)}_cleanEndEventHandlers(){this._endEventHandlers.forEach(e=>{this._client.removeListener(e)}),this._endEventHandlers.clear()}_cleanEndEventHandler(e){this._endEventHandlers.has(e)&&(this._client.removeListener(this._endEventHandlers.get(e)),this._endEventHandlers.delete(e))}}class fd extends F{constructor(e,t,r){super(e,t,r,{password:{}})}}fd.COMMAND="PASS";class Cs extends F{constructor(e,t,r){super(e,t,r,{nick:{}})}}Cs.COMMAND="NICK";class yd extends F{constructor(e,t,r){super(e,t,r,{user:{},mode:{},unused:{},realName:{trailing:!0}})}}yd.COMMAND="USER";class pv extends F{constructor(e,t,r){super(e,t,r,{name:{},password:{}})}}pv.COMMAND="OPER";class bd extends F{constructor(e,t,r){super(e,t,r,{text:{trailing:!0,optional:!0}})}}bd.COMMAND="QUIT";class mv extends F{constructor(e,t,r){super(e,t,r,{server:{},reason:{trailing:!0}})}}mv.COMMAND="SQUIT";class ul extends F{constructor(e,t,r){super(e,t,r,{channel:{type:"channel"},key:{optional:!0}})}}ul.COMMAND="JOIN";class cl extends F{constructor(e,t,r){super(e,t,r,{channel:{type:"channel"},reason:{trailing:!0,optional:!0}})}}cl.COMMAND="PART";class dl extends Error{constructor(e){super(`Unknown channel mode character ${e}`),this._char=e,Object.setPrototypeOf(this,dl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl)}get char(){return this._char}}class _v extends F{constructor(e,t,r){super(e,t,r,{target:{},modes:{rest:!0,optional:!0}})}get isChannel(){return Lc(this.target,this._serverProperties.channelTypes)}separate(){const e=[],t=this.modes;if(!t)throw new Error("can't separate a channel mode request, just set actions");const r=t.split(" "),i=r.shift();let a="add";for(const s of i){let o=a;switch(s){case"+":{a="add";break}case"-":{a="remove";break}default:{let u=!1,h=!0;if(this.isChannel){if(this._serverProperties.supportedChannelModes.alwaysWithParam.includes(s)||this._serverProperties.supportedChannelModes.prefix.includes(s))u=!0;else if(this._serverProperties.supportedChannelModes.paramWhenSet.includes(s))a==="add"&&(u=!0);else if(this._serverProperties.supportedChannelModes.list.includes(s))r.length?u=!0:o="getList";else if(!this._serverProperties.supportedChannelModes.noParam.includes(s))throw new dl(s)}else h=this._serverProperties.supportedUserModes.includes(s);if(u&&!r.length)continue;e.push({prefix:this._prefix,action:o,letter:s,param:u?r.shift():void 0,known:h})}}}return e}}_v.COMMAND="MODE";class gv extends F{constructor(e,t,r){super(e,t,r,{channel:{type:"channel"},newTopic:{optional:!0,trailing:!0}})}}gv.COMMAND="TOPIC";class to extends F{constructor(e,t,r){super(e,t,r,{channel:{type:"channelList",optional:!0}})}}to.COMMAND="NAMES";to.SUPPORTS_CAPTURE=!0;class fv extends F{constructor(e,t,r){super(e,t,r,{channel:{optional:!0},server:{optional:!0}})}}fv.COMMAND="LIST";class yv extends F{constructor(e,t,r){super(e,t,r,{target:{},channel:{type:"channel"}})}}yv.COMMAND="INVITE";class bv extends F{constructor(e,t,r){super(e,t,r,{channel:{type:"channel"},target:{},reason:{trailing:!0,optional:!0}})}}bv.COMMAND="KICK";class vv extends F{constructor(e,t,r){super(e,t,r,{server:{optional:!0}})}}vv.COMMAND="TIME";class Xs extends F{constructor(e,t,r){super(e,t,r,{target:{},text:{trailing:!0}})}}Xs.COMMAND="PRIVMSG";class vd extends F{constructor(e,t,r){super(e,t,r,{target:{},text:{trailing:!0}})}}vd.COMMAND="NOTICE";class Pl extends F{constructor(e,t,r){super(e,t,r,{mask:{},flags:{optional:!0},extendedMask:{optional:!0,trailing:!0}})}}Pl.COMMAND="WHO";class wv extends F{constructor(e,t,r){super(e,t,r,{server:{optional:!0},nickMask:{}})}}wv.COMMAND="WHOIS";class xv extends F{constructor(e,t,r){super(e,t,r,{nick:{},count:{optional:!0},server:{optional:!0}})}}xv.COMMAND="WHOWAS";class Sv extends F{constructor(e,t,r){super(e,t,r,{target:{},reason:{trailing:!0,optional:!0}})}}Sv.COMMAND="KILL";class hl extends F{constructor(e,t,r){super(e,t,r,{text:{trailing:!0}})}}hl.COMMAND="PING";class pl extends F{constructor(e,t,r){super(e,t,r,{server:{noClient:!0},text:{trailing:!0}})}}pl.COMMAND="PONG";class Cv extends F{constructor(e,t,r){super(e,t,r,{text:{trailing:!0}})}}Cv.COMMAND="ERROR";class Ev extends F{constructor(e,t,r){super(e,t,r,{text:{trailing:!0,optional:!0}})}}Ev.COMMAND="AWAY";class Hv extends F{}Hv.COMMAND="REHASH";class Av extends F{}Av.COMMAND="RESTART";class Rv extends F{constructor(e,t,r){super(e,t,r,{text:{trailing:!0}})}}Rv.COMMAND="WALLOPS";class Tv extends F{constructor(e,t,r){super(e,t,r,{nicks:{rest:!0}})}}Tv.COMMAND="USERHOST";class Iv extends F{constructor(e,t,r){super(e,t,r,{nicks:{rest:!0}})}}Iv.COMMAND="ISON";class Ye extends F{constructor(e,t,r){super(e,t,r,{target:{match:/^(?:[a-z_\-\[\]\\^{}|`][a-z0-9_\-\[\]\\^{}|`]+|\*)$/i,optional:!0,noClient:!0},subCommand:{match:/^(?:LS|LIST|REQ|ACK|NAK|END|NEW|DEL)$/i},version:{match:/^\d+$/,optional:!0},continued:{match:/^\*$/,optional:!0},capabilities:{trailing:!0,optional:!0}})}isResponseTo(e){if(!(e instanceof Ye))return!1;switch(this.subCommand){case"ACK":case"NAK":return e.subCommand==="REQ"&&e.capabilities===this.capabilities.trim();case"LS":case"LIST":return e.subCommand===this.subCommand;default:return!1}}endsResponseTo(e){if(!(e instanceof Ye))return!1;switch(this.subCommand){case"LS":case"LIST":return!this.continued;default:return!0}}}Ye.COMMAND="CAP";Ye.SUPPORTS_CAPTURE=!0;class Pv extends F{constructor(e,t,r){super(e,t,r,{target:{}})}}Pv.COMMAND="TAGMSG";const Dv=Object.freeze(Object.defineProperty({__proto__:null,Away:Ev,CapabilityNegotiation:Ye,ChannelInvite:yv,ChannelJoin:ul,ChannelKick:bv,ChannelList:fv,ChannelPart:cl,ClientQuit:bd,ErrorMessage:Cv,IsOnQuery:Iv,Kill:Sv,Mode:_v,Names:to,NickChange:Cs,Notice:vd,OperLogin:pv,Password:fd,Ping:hl,Pong:pl,PrivateMessage:Xs,Rehash:Hv,Restart:Av,ServerQuit:mv,TagMessage:Pv,Time:vv,Topic:gv,UserHostQuery:Tv,UserRegistration:yd,Wallops:Rv,WhoIsQuery:wv,WhoQuery:Pl,WhoWasQuery:xv},Symbol.toStringTag,{value:"Module"}));class wd extends F{constructor(e,t,r){super(e,t,r,{me:{},welcomeText:{trailing:!0}})}}wd.COMMAND="001";class Bv extends F{constructor(e,t,r){super(e,t,r,{me:{},yourHost:{trailing:!0}})}}Bv.COMMAND="002";class Ov extends F{constructor(e,t,r){super(e,t,r,{me:{},createdText:{trailing:!0}})}}Ov.COMMAND="003";class xd extends F{constructor(e,t,r){super(e,t,r,{me:{},serverName:{},version:{},userModes:{},channelModes:{},channelModesWithParam:{optional:!0}})}}xd.COMMAND="004";class Sd extends F{constructor(e,t,r){super(e,t,r,{me:{},supports:{rest:!0},suffix:{trailing:!0}})}}Sd.COMMAND="005";class Uv extends F{constructor(e,t,r){super(e,t,r,{me:{},modes:{}})}}Uv.COMMAND="221";class qv extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},text:{trailing:!0}})}}qv.COMMAND="301";class kv extends F{constructor(e,t,r){super(e,t,r,{me:{},hosts:{trailing:!0}})}}kv.COMMAND="302";class Mv extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Mv.COMMAND="305";class jv extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}jv.COMMAND="306";class Lv extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},username:{},host:{},_unused:{},realname:{trailing:!0}})}}Lv.COMMAND="311";class Nv extends F{constructor(e,t,r){super(e,t,r,{me:{},query:{},suffix:{trailing:!0}})}isResponseTo(e){return e instanceof Pl}endsResponseTo(){return!0}}Nv.COMMAND="315";class Fv extends F{constructor(e,t,r){super(e,t,r,{me:{},nickMask:{},suffix:{trailing:!0}})}}Fv.COMMAND="318";class $v extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},channels:{trailing:!0}})}}$v.COMMAND="319";class Gv extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},memberCount:{},topic:{trailing:!0}})}}Gv.COMMAND="322";class Qv extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Qv.COMMAND="323";class Wv extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},modes:{rest:!0}})}}Wv.COMMAND="324";class Vv extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Vv.COMMAND="331";class zv extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},topic:{trailing:!0}})}}zv.COMMAND="332";class Kv extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},who:{},ts:{}})}}Kv.COMMAND="333";class Xv extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},channel:{type:"channel"}})}}Xv.COMMAND="341";class Jv extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},mask:{},creatorName:{optional:!0},timestamp:{optional:!0}})}}Jv.COMMAND="348";class Yv extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Yv.COMMAND="349";class Zv extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{},user:{},host:{},server:{},nick:{},flags:{},hopsAndRealName:{trailing:!0}})}get isAway(){return this.flags.includes("G")}get isOper(){return this.flags.includes("*")}get isBot(){return this.flags.includes("B")}isResponseTo(e){return e instanceof Pl}}Zv.COMMAND="352";class ew extends F{constructor(e,t,r){super(e,t,r,{me:{},channelType:{},channel:{type:"channel"},names:{trailing:!0}})}isResponseTo(e){return e instanceof to}}ew.COMMAND="353";class tw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{},suffix:{trailing:!0}})}isResponseTo(e){return e instanceof to}endsResponseTo(){return!0}}tw.COMMAND="366";class rw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},mask:{},creatorName:{optional:!0},timestamp:{optional:!0}})}}rw.COMMAND="367";class nw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}nw.COMMAND="368";class iw extends F{constructor(e,t,r){super(e,t,r,{me:{},line:{trailing:!0}})}}iw.COMMAND="372";class aw extends F{constructor(e,t,r){super(e,t,r,{me:{},line:{trailing:!0}})}}aw.COMMAND="375";class Cd extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Cd.COMMAND="376";class sw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}sw.COMMAND="381";class ow extends F{constructor(e,t,r){super(e,t,r,{me:{},server:{optional:!0},timestamp:{trailing:!0}})}}ow.COMMAND="391";class lw extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},suffix:{trailing:!0}})}}lw.COMMAND="401";class uw extends F{constructor(e,t,r){super(e,t,r,{me:{},server:{},suffix:{trailing:!0}})}}uw.COMMAND="402";class cw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{},suffix:{trailing:!0}})}}cw.COMMAND="403";class dw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}dw.COMMAND="404";class hw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}hw.COMMAND="405";class pw extends F{constructor(e,t,r){super(e,t,r,{me:{},subCommand:{},suffix:{trailing:!0}})}}pw.COMMAND="410";class mw extends F{constructor(e,t,r){super(e,t,r,{me:{},originalCommand:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command===this.originalCommand}endsResponseTo(){return!0}}mw.COMMAND="421";class Ed extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Ed.COMMAND="422";class _w extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}_w.COMMAND="431";class gw extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}gw.COMMAND="432";class fw extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}fw.COMMAND="433";class yw extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}yw.COMMAND="436";class bw extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},channel:{type:"channel"},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}bw.COMMAND="441";class vw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}vw.COMMAND="442";class ww extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},channel:{type:"channel"},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}ww.COMMAND="443";class xw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}xw.COMMAND="451";class Sw extends F{constructor(e,t,r){super(e,t,r,{me:{},originalCommand:{},suffix:{trailing:!0}})}}Sw.COMMAND="461";class Hd extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Hd.COMMAND="462";class Cw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Cw.COMMAND="471";class Ew extends F{constructor(e,t,r){super(e,t,r,{me:{},char:{},suffix:{trailing:!0}})}}Ew.COMMAND="472";class Hw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Hw.COMMAND="473";class Aw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Aw.COMMAND="474";class Rw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Rw.COMMAND="475";class Tw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{},suffix:{trailing:!0}})}}Tw.COMMAND="479";class Iw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Iw.COMMAND="481";class Pw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{},suffix:{trailing:!0}})}}Pw.COMMAND="482";class Dw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Dw.COMMAND="491";class Bw extends F{constructor(e,t,r){super(e,t,r,{me:{},modeChar:{optional:!0,match:/^\w$/},suffix:{trailing:!0}})}}Bw.COMMAND="501";class Ow extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Ow.COMMAND="502";const Uw=Object.freeze(Object.defineProperty({__proto__:null,Error401NoSuchNick:lw,Error402NoSuchServer:uw,Error403NoSuchChannel:cw,Error404CanNotSendToChan:dw,Error405TooManyChannels:hw,Error410InvalidCapCmd:pw,Error421UnknownCommand:mw,Error422NoMotd:Ed,Error431NoNickNameGiven:_w,Error432ErroneusNickname:gw,Error433NickNameInUse:fw,Error436NickCollision:yw,Error441UserNotInChannel:bw,Error442NotOnChannel:vw,Error443UserOnChannel:ww,Error451NotRegistered:xw,Error461NeedMoreParams:Sw,Error462AlreadyRegistered:Hd,Error471ChannelIsFull:Cw,Error472UnknownMode:Ew,Error473InviteOnlyChan:Hw,Error474BannedFromChan:Aw,Error475BadChannelKey:Rw,Error479BadChanName:Tw,Error481NoPrivileges:Iw,Error482ChanOpPrivsNeeded:Pw,Error491NoOperHost:Dw,Error501UmodeUnknownFlag:Bw,Error502UsersDontMatch:Ow,Reply001Welcome:wd,Reply002YourHost:Bv,Reply003Created:Ov,Reply004ServerInfo:xd,Reply005Isupport:Sd,Reply221UmodeIs:Uv,Reply301Away:qv,Reply302UserHost:kv,Reply305UnAway:Mv,Reply306NowAway:jv,Reply311WhoisUser:Lv,Reply315EndOfWho:Nv,Reply318EndOfWhois:Fv,Reply319WhoisChannels:$v,Reply322List:Gv,Reply323ListEnd:Qv,Reply324ChannelModeIs:Wv,Reply331NoTopic:Vv,Reply332Topic:zv,Reply333TopicWhoTime:Kv,Reply341Inviting:Xv,Reply348ExceptList:Jv,Reply349EndOfExceptList:Yv,Reply352WhoReply:Zv,Reply353NamesReply:ew,Reply366EndOfNames:tw,Reply367BanList:rw,Reply368EndOfBanList:nw,Reply372Motd:iw,Reply375MotdStart:aw,Reply376EndOfMotd:Cd,Reply381YoureOper:sw,Reply391Time:ow},Symbol.toStringTag,{value:"Module"})),kC=new Map([...Object.values(Dv),...Object.values(Uw)].map(n=>[n.COMMAND,n]));function MC(n){const[e,t]=er(n,"!",2);if(t){const[r,i]=er(t,"@",2);return i?{nick:e,user:r,host:i}:{nick:e,host:r}}return{nick:e}}const Vg={":":";",n:`
`,r:"\r",s:" "};function jC(n){const e=new Map,t=n.split(";");for(const r of t){const[i,a]=er(r,"=",2);i!==""&&e.set(i,a?a.replace(/\\(.?)/g,(s,o)=>Object.prototype.hasOwnProperty.call(Vg,o)?Vg[o]:o):"")}return e}function LC(n,e=Hi,t=kC,r=!1,i=[],a=!0){const s=n.split(" ");let o,u;const h=[];let m,w;for(;s.length;){if([o]=s,o.startsWith("@")&&!m&&!u&&!w)m=jC(o.slice(1));else if(o.startsWith(":"))if(!w&&!u)o.length>1&&(w=MC(o.slice(1)));else{h.push({value:s.join(" ").slice(1),trailing:!0});break}else u?h.push({value:o,trailing:!1}):u=o.toUpperCase();s.shift()}if(m||(m=new Map),!u)throw new Error(`line without command received: ${n}`);a&&(a=!i.includes(u));let y=F;return t.has(u)&&(y=t.get(u)),new y(u,{params:h,tags:m,prefix:w,rawLine:n},{serverProperties:e,isServer:r,shouldParseParams:a})}class NC extends Tl{constructor(e){super(),this._registered=!1,this._supportsCapabilities=!0,this._events=new Map,this._registeredMessageTypes=new Map,this.onConnect=this.registerEvent(),this.onRegister=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onPrivmsg=this.registerEvent(),this.onAction=this.registerEvent(),this.onNotice=this.registerEvent(),this.onNickChange=this.registerEvent(),this.onCtcp=this.registerEvent(),this.onCtcpReply=this.registerEvent(),this.onPasswordError=this.registerEvent(),this.onAnyMessage=this.registerEvent(),this._serverProperties=Ss(Hi),this._supportedFeatures={},this._collectors=[],this._clientCapabilities=new Map,this._serverCapabilities=new Map,this._negotiatedCapabilities=new Map,this._currentChannels=new Set,this._hasRegisteredBefore=!1,this._channelsFromLastRegister=new Set,this._initialConnectionSetupDone=!1;const{connection:t,credentials:r,channels:i,channelTypes:a,webSocket:s,logger:o={}}=e;this._options=e;const{pingOnInactivity:u=60,pingTimeout:h=10}=t;this._pingOnInactivity=u,this._pingTimeout=h,this._currentNick=r.nick,this._logger=Al({name:"ircv3",emoji:!0,...o}),this.registerCoreMessageTypes();const{hostName:m,secure:w,reconnect:y=!0}=t,_={hostName:m,port:this.port,secure:w},p={lineBased:!0,logger:this._logger,additionalOptions:e.connectionOptions},l=s?bC:fC;y?this._connection=new yC(l,_,p):this._connection=new l(p,this._logger,e.connectionOptions);for(const d of Object.values(UC))this.addCapability(d);this.addInternalListener(this.onRegister,async()=>{const d=this._hasRegisteredBefore,b=this._channelsFromLastRegister;this._hasRegisteredBefore=!0,this._channelsFromLastRegister=new Set;const S=d&&this._options.rejoinChannelsOnReconnect?b:await vg(i);if(S)for(const R of S)this.join(R)}),this.onTypedMessage(Ye,async({subCommand:d,capabilities:b})=>{const S=b.split(" ");switch(d.toUpperCase()){case"NEW":{this._logger.debug(`Server registered new capabilities: ${S.join(", ")}`);const R=ys(S,f=>{if(!f)return{};const[H,E]=er(f,"=",2);return{[H]:{name:H,param:E||!0}}});for(const[f,H]of Object.entries(R))this._serverCapabilities.set(f,H);const P=Object.keys(R);await this._negotiateCapabilities(Array.from(this._clientCapabilities.entries()).filter(([f])=>P.includes(f)).map(([,f])=>f));break}case"DEL":{this._logger.debug(`Server removed capabilities: ${S.join(", ")}`);for(const R of S)this._serverCapabilities.delete(R),this._negotiatedCapabilities.delete(R)}}}),this.onTypedMessage(hl,({text:d})=>{this.sendMessage(pl,{text:d})}),this.onTypedMessage(wd,({me:d})=>this._handleReceivedClientNick(d)),this.onTypedMessage(xd,({userModes:d})=>{d&&(this._serverProperties.supportedUserModes=d)}),this.onTypedMessage(Sd,({supports:d})=>{const b=ys(d.split(" "),S=>{const[R,P]=er(S,"=",2);return{[R]:P||!0}});this._supportedFeatures={...this._supportedFeatures,...b}}),this.onTypedMessage(Cd,({me:d})=>{this._registered||(this._handleReceivedClientNick(d),this._registered=!0,this.emit(this.onRegister))}),this.onTypedMessage(Ed,({me:d})=>{this._registered||(this._handleReceivedClientNick(d),this._registered=!0,this.emit(this.onRegister))}),this.onTypedMessage(Hd,({me:d})=>{this._registered||(this._logger.warn("We thought we're not registered yet, but we actually are"),this._handleReceivedClientNick(d),this._registered=!0,this.emit(this.onRegister))}),this.onTypedMessage(Xs,d=>{var b;const{target:S,text:R}=d,P=Wg(R),f=(b=d.prefix)===null||b===void 0?void 0:b.nick;P?P.command==="ACTION"?this.emit(this.onAction,S,f,P.params,d):this.emit(this.onCtcp,S,f,P.command,P.params,d):this.emit(this.onPrivmsg,S,f,R,d)}),this.onTypedMessage(Cs,d=>{var b;const{nick:S}=d,R=(b=d.prefix)===null||b===void 0?void 0:b.nick;R===this._currentNick&&(this._currentNick=S),this.emit(this.onNickChange,R,S,d)}),this.onTypedMessage(vd,d=>{var b;const{target:S,text:R}=d,P=Wg(R),f=(b=d.prefix)===null||b===void 0?void 0:b.nick;P&&this.emit(this.onCtcpReply,S,f,P.command,P.params,d),this.emit(this.onNotice,S,f,R,d)}),this._options.manuallyAcknowledgeJoins||this.onTypedMessage(ul,({channel:d,prefix:b})=>{b?.nick===this._currentNick&&this.acknowledgeJoin(d)}),this.onTypedMessage(cl,d=>{var b;((b=d.prefix)===null||b===void 0?void 0:b.nick)===this._currentNick&&(this._currentChannels.delete(d.channel),this._channelsFromLastRegister.delete(d.channel))}),this.addInternalListener(this.onRegister,()=>this._startPingCheckTimer()),this._desiredNick=r.nick,this._userName=r.userName,this._realName=r.realName,a&&(this._serverProperties.channelTypes=a)}receiveLine(e){var t;this._logger.debug(`Received message: ${e}`);let r;try{r=LC(e,this._serverProperties,this._registeredMessageTypes,!0,this._options.nonConformingCommands)}catch(i){this._logger.error(`Error parsing message: ${i.message}`),this._logger.trace((t=i.stack)!==null&&t!==void 0?t:"No stack available");return}this._logger.trace(`Parsed message: ${JSON.stringify(r)}`),this._startPingCheckTimer(),this.emit(this.onAnyMessage,r),this._handleEvents(r)}get serverProperties(){return Ss(this._serverProperties)}get port(){const{webSocket:e,connection:{port:t,secure:r}}=this._options;return t||(e?r?443:80:r?6697:6667)}pingCheck(){const e=Date.now(),t=e.toString(),r=this.onTypedMessage(pl,i=>{const{text:a}=i;a===t&&(this._logger.debug(`Current ping: ${Date.now()-e}ms`),this._pingTimeoutTimer&&clearTimeout(this._pingTimeoutTimer),this.removeMessageListener(r))});this._pingTimeoutTimer=setTimeout(()=>{this.removeMessageListener(r),this._options.connection.reconnect===!1?this._logger.error(`Disconnecting because the last ping took over ${this._pingTimeout} seconds`):this._logger.warn(`Reconnecting because the last ping took over ${this._pingTimeout} seconds`),this._connection.assumeExternalDisconnect()},this._pingTimeout*1e3),this.sendMessage(hl,{text:t})}reconnect(e){this.quit(e),this.connect()}registerMessageType(e){e.COMMAND!==""&&(this._logger.trace(`Registering message type ${e.COMMAND}`),this._registeredMessageTypes.set(e.COMMAND.toUpperCase(),e))}knowsCommand(e){return this._registeredMessageTypes.has(e.toUpperCase())}getCommandClass(e){return this._registeredMessageTypes.get(e.toUpperCase())}acknowledgeJoin(e){this._currentChannels.add(e),this._channelsFromLastRegister.add(e)}connect(){this._supportsCapabilities=!1,this._negotiatedCapabilities=new Map,this._currentChannels=new Set,this._currentNick=this._desiredNick,this._setupConnection(),this._logger.info(`Connecting to ${this._options.connection.hostName}:${this.port}`),this._connection.connect()}addCapability(e){if(this._clientCapabilities.set(e.name,e),e.messageTypes)for(const t of Object.values(e.messageTypes))this.registerMessageType(t)}async registerCapability(e){return this.addCapability(e),this._serverCapabilities.has(e.name)?await this._negotiateCapabilities([e]):[]}send(e){this.sendRaw(e.toString())}sendRaw(e){this._connection.isConnected&&(this._logger.debug(`Sending message: ${e}`),this._connection.sendLine(e))}onNamedMessage(e,t,r){this._events.has(e)||this._events.set(e,new Map);const i=this._events.get(e);if(!r)do r=`${e}:${zS(Math.random()*1e4,4,"0")}`;while(i.has(r));return i.set(r,t),r}onTypedMessage(e,t,r){return this.onNamedMessage(e.COMMAND,t,r)}removeMessageListener(e){const[t]=e.split(":");this._events.has(t)&&this._events.get(t).delete(e)}createMessage(e,t,r){const i=r?new Map(Object.entries(r)):void 0;return AC(e,t,void 0,i,this.serverProperties)}sendMessage(e,t,r){this.send(this.createMessage(e,t,r))}async sendMessageAndCaptureReply(e,t){if(!e.SUPPORTS_CAPTURE)throw new Error(`The command "${e.COMMAND}" does not support reply capture`);const r=this.createMessage(e,t),i=this.collect(r).promise();return this.send(r),await i}get isConnected(){return this._connection.isConnected}get isConnecting(){return this._connection.isConnecting}get isRegistered(){return this._registered}get currentNick(){return this._currentNick}get currentChannels(){return Array.from(this._currentChannels)}collect(e,...t){const r=new qC(this,e,...t);return this._collectors.push(r),r}stopCollect(e){this._collectors.splice(this._collectors.findIndex(t=>t===e),1)}join(e,t){this.sendMessage(ul,{channel:e,key:t})}part(e){this.sendMessage(cl,{channel:e})}quit(e){this.sendMessage(bd,{text:e}),this.quitAbruptly()}quitAbruptly(){this._registered=!1,this._connection.disconnect()}say(e,t,r={}){this.sendMessage(Xs,{target:e,text:t},r)}sendCtcp(e,t,r){this.say(e,`${t.toUpperCase()} ${r}`)}action(e,t){this.sendCtcp(e,"ACTION",t)}changeNick(e){this._currentNick!==e&&(this._desiredNick=e,this.isRegistered&&this.sendMessage(Cs,{nick:e}))}registerCoreMessageTypes(){sc(Dv,e=>{this.registerMessageType(e)}),sc(Uw,e=>{this.registerMessageType(e)})}async _negotiateCapabilityBatch(e){return await Promise.all(e.filter(t=>t.length).map(async t=>await this._negotiateCapabilities(t)))}async _negotiateCapabilities(e){const t=ys(e,s=>({[s.name]:s})),i=(await this.sendMessageAndCaptureReply(Ye,{subCommand:"REQ",capabilities:e.map(s=>s.name).join(" ")})).shift();if(!i)throw new Error("capability negotiation failed unexpectedly without any reply");if(!(i instanceof Ye))throw new Error(`capability negotiation failed unexpectedly with "${i.command}" command`);const a=i.capabilities.split(" ").filter(s=>s);if(i.subCommand==="ACK"){this._logger.debug(`Successfully negotiated capabilities: ${a.join(", ")}`);const s=a.map(o=>t[o]);for(const o of s){const u=this._clientCapabilities.get(o.name);u.param=o.param,this._negotiatedCapabilities.set(u.name,u)}return s}return this._logger.warn(`Failed to negotiate capabilities: ${a.join(", ")}`),new Error("capabilities failed to negotiate")}_setupConnection(){this._initialConnectionSetupDone||(this._connection.onConnect(async()=>{var e,t;this._logger.info(`Connection to server ${this._options.connection.hostName}:${this.port} established`),this.emit(this.onConnect),this._logger.debug("Determining connection password");try{const[r]=await Promise.all([vg(this._options.credentials.password),this.sendMessageAndCaptureReply(Ye,{subCommand:"LS",version:"302"}).then(async i=>{if(!i.length||!(i[0]instanceof Ye))return this._logger.debug("Server does not support capabilities"),[];this._supportsCapabilities=!0;const a=i.map(o=>ys(o.capabilities.split(" "),u=>{if(!u)return{};const[h,m]=er(u,"=",2);return{[h]:{name:h,param:m||!0}}}));this._serverCapabilities=new Map(Object.entries(Object.assign({},...a))),this._logger.debug(`Capabilities supported by server: ${Array.from(this._serverCapabilities.keys()).join(", ")}`);const s=a.map(o=>{const u=Object.keys(o);return Array.from(this._clientCapabilities.entries()).filter(([h])=>u.includes(h)).map(([,h])=>h)});return await this._negotiateCapabilityBatch(s)}).then(()=>{this.sendMessage(Ye,{subCommand:"END"})})]);r&&this.sendMessage(fd,{password:r}),this.sendMessage(Cs,{nick:this._desiredNick}),this.sendMessage(yd,{user:(e=this._userName)!==null&&e!==void 0?e:this._desiredNick,mode:"8",unused:"*",realName:(t=this._realName)!==null&&t!==void 0?t:this._desiredNick})}catch(r){this.emit(this.onPasswordError,r),this.quit()}}),this._initialConnectionSetupDone=!0,this._connection.onReceive(e=>{this.receiveLine(e)}),this._connection.onDisconnect((e,t)=>{var r;if(this._registered=!1,this._pingCheckTimer&&clearTimeout(this._pingCheckTimer),this._pingTimeoutTimer&&clearTimeout(this._pingTimeoutTimer),e)this._logger.info("Disconnected");else{const i=(r=this._options.connection.reconnect)!==null&&r!==void 0?r:!0,a=t?`Disconnected unexpectedly: ${t.message}`:"Disconnected unexpectedly";i?this._logger.warn(`${a}; trying to reconnect`):this._logger.error(a)}this.emit(this.onDisconnect,e,t)}),this._connection.onEnd(e=>{e||this._logger.warn("No further retries will be made")}))}_handleReceivedClientNick(e){this._currentNick!==e&&(this._currentNick!==""&&this._logger.warn(`Mismatching nicks: passed ${this._currentNick}, but you're actually ${e}`),this._currentNick=e)}_handleEvents(e){this._collectors.some(r=>r.collect(e));const t=this._events.get(e.constructor.COMMAND);if(t)for(const r of t.values())r(e)}_startPingCheckTimer(){this._pingCheckTimer&&clearTimeout(this._pingCheckTimer),this._connection.isConnected?this._pingCheckTimer=setTimeout(()=>this.pingCheck(),this._pingOnInactivity*1e3):this._pingCheckTimer=void 0}}I([V(!1)],NC.prototype,"_options",void 0);var To;let Oi=To=class{constructor(e,t){this._userName=e.toLowerCase(),this._userData=t?new Map(t):new Map}static _parseBadgesLike(e){return e?new Map(e.split(",").map(t=>{const r=t.indexOf("/");return r===-1?[t,""]:[t.slice(0,r),t.slice(r+1)]})):new Map}get userName(){return this._userName}get displayName(){var e;return(e=this._userData.get("display-name"))!==null&&e!==void 0?e:this._userName}get color(){return this._userData.get("color")}get badges(){const e=this._userData.get("badges");return To._parseBadgesLike(e)}get badgeInfo(){const e=this._userData.get("badge-info");return To._parseBadgesLike(e)}get userId(){return this._userData.get("user-id")}get userType(){return this._userData.get("user-type")}get isBroadcaster(){return this.badges.has("broadcaster")}get isSubscriber(){return this.badges.has("subscriber")||this.isFounder}get isFounder(){return this.badges.has("founder")}get isMod(){return this.badges.has("moderator")}get isVip(){const e=this._userData.get("vip");return e!=null&&e!=="0"}get isArtist(){return this.badges.has("artist-badge")}};I([V(!1)],Oi.prototype,"_userData",void 0);I([ge()],Oi.prototype,"badges",null);I([ge()],Oi.prototype,"badgeInfo",null);Oi=To=I([eo,L("chat","ChatUser","userId")],Oi);function FC(n){return n?new Map(n.split("/").map(e=>{const[t,r]=e.split(":",2);return r?[t,r.split(",")]:null}).filter(e=>e!==null)):new Map}const $C=["ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","TEN"];let Nc=class extends Xs{get id(){return this._tags.get("id")}get date(){const e=this._tags.get("tmi-sent-ts");return new Date(Number(e))}get userInfo(){return new Oi(this._prefix.nick,this._tags)}get channelId(){var e;return(e=this._tags.get("room-id"))!==null&&e!==void 0?e:null}get isCheer(){return this._tags.has("bits")}get isRedemption(){return!!this._tags.get("custom-reward-id")}get rewardId(){return this._tags.get("custom-reward-id")||null}get isFirst(){return this._tags.get("first-msg")==="1"}get isReturningChatter(){return this._tags.get("returning-chatter")==="1"}get isHighlight(){return this._tags.get("msg-id")==="highlighted-message"}get isReply(){return this._tags.has("reply-parent-msg-id")}get parentMessageId(){var e;return(e=this._tags.get("reply-parent-msg-id"))!==null&&e!==void 0?e:null}get parentMessageText(){var e;return(e=this._tags.get("reply-parent-msg-body"))!==null&&e!==void 0?e:null}get parentMessageUserId(){var e;return(e=this._tags.get("reply-parent-user-id"))!==null&&e!==void 0?e:null}get parentMessageUserName(){var e;return(e=this._tags.get("reply-parent-user-login"))!==null&&e!==void 0?e:null}get parentMessageUserDisplayName(){var e;return(e=this._tags.get("reply-parent-display-name"))!==null&&e!==void 0?e:null}get threadMessageId(){var e;return(e=this._tags.get("reply-thread-parent-msg-id"))!==null&&e!==void 0?e:null}get threadMessageUserId(){var e;return(e=this._tags.get("reply-thread-parent-user-id"))!==null&&e!==void 0?e:null}get bits(){var e;return Number((e=this._tags.get("bits"))!==null&&e!==void 0?e:0)}get emoteOffsets(){return FC(this._tags.get("emotes"))}get isHypeChat(){return this._tags.has("pinned-chat-paid-amount")}get hypeChatAmount(){return Xe(this._tags.get("pinned-chat-paid-amount"),Number)}get hypeChatDecimalPlaces(){return Xe(this._tags.get("pinned-chat-paid-exponent"),Number)}get hypeChatLocalizedAmount(){const e=this.hypeChatAmount;return e?e/10**this.hypeChatDecimalPlaces:null}get hypeChatCurrency(){var e;return(e=this._tags.get("pinned-chat-paid-currency"))!==null&&e!==void 0?e:null}get hypeChatLevel(){const e=this._tags.get("pinned-chat-paid-level");return e?$C.indexOf(e)+1:null}get hypeChatIsSystemMessage(){const e=this._tags.get("pinned-chat-paid-is-system-message");return e?!!Number(e):null}};Nc=I([L("chat","ChatMessage","id")],Nc);var hs={},_i={},Ho={},Kt={},Xt={},tc={},zg;function qw(){return zg||(zg=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Doctype=n.CDATA=n.Tag=n.Style=n.Script=n.Comment=n.Directive=n.Text=n.Root=n.isTag=n.ElementType=void 0;var e;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(e=n.ElementType||(n.ElementType={}));function t(r){return r.type===e.Tag||r.type===e.Script||r.type===e.Style}n.isTag=t,n.Root=e.Root,n.Text=e.Text,n.Directive=e.Directive,n.Comment=e.Comment,n.Script=e.Script,n.Style=e.Style,n.Tag=e.Tag,n.CDATA=e.CDATA,n.Doctype=e.Doctype}(tc)),tc}var ue={},Kg;function Xg(){if(Kg)return ue;Kg=1;var n=ue&&ue.__extends||function(){var f=function(H,E){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var Z in j)Object.prototype.hasOwnProperty.call(j,Z)&&(B[Z]=j[Z])},f(H,E)};return function(H,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");f(H,E);function B(){this.constructor=H}H.prototype=E===null?Object.create(E):(B.prototype=E.prototype,new B)}}(),e=ue&&ue.__assign||function(){return e=Object.assign||function(f){for(var H,E=1,B=arguments.length;E<B;E++){H=arguments[E];for(var j in H)Object.prototype.hasOwnProperty.call(H,j)&&(f[j]=H[j])}return f},e.apply(this,arguments)};Object.defineProperty(ue,"__esModule",{value:!0}),ue.cloneNode=ue.hasChildren=ue.isDocument=ue.isDirective=ue.isComment=ue.isText=ue.isCDATA=ue.isTag=ue.Element=ue.Document=ue.CDATA=ue.NodeWithChildren=ue.ProcessingInstruction=ue.Comment=ue.Text=ue.DataNode=ue.Node=void 0;var t=qw(),r=function(){function f(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(f.prototype,"parentNode",{get:function(){return this.parent},set:function(H){this.parent=H},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"previousSibling",{get:function(){return this.prev},set:function(H){this.prev=H},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"nextSibling",{get:function(){return this.next},set:function(H){this.next=H},enumerable:!1,configurable:!0}),f.prototype.cloneNode=function(H){return H===void 0&&(H=!1),R(this,H)},f}();ue.Node=r;var i=function(f){n(H,f);function H(E){var B=f.call(this)||this;return B.data=E,B}return Object.defineProperty(H.prototype,"nodeValue",{get:function(){return this.data},set:function(E){this.data=E},enumerable:!1,configurable:!0}),H}(r);ue.DataNode=i;var a=function(f){n(H,f);function H(){var E=f!==null&&f.apply(this,arguments)||this;return E.type=t.ElementType.Text,E}return Object.defineProperty(H.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),H}(i);ue.Text=a;var s=function(f){n(H,f);function H(){var E=f!==null&&f.apply(this,arguments)||this;return E.type=t.ElementType.Comment,E}return Object.defineProperty(H.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),H}(i);ue.Comment=s;var o=function(f){n(H,f);function H(E,B){var j=f.call(this,B)||this;return j.name=E,j.type=t.ElementType.Directive,j}return Object.defineProperty(H.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),H}(i);ue.ProcessingInstruction=o;var u=function(f){n(H,f);function H(E){var B=f.call(this)||this;return B.children=E,B}return Object.defineProperty(H.prototype,"firstChild",{get:function(){var E;return(E=this.children[0])!==null&&E!==void 0?E:null},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"childNodes",{get:function(){return this.children},set:function(E){this.children=E},enumerable:!1,configurable:!0}),H}(r);ue.NodeWithChildren=u;var h=function(f){n(H,f);function H(){var E=f!==null&&f.apply(this,arguments)||this;return E.type=t.ElementType.CDATA,E}return Object.defineProperty(H.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),H}(u);ue.CDATA=h;var m=function(f){n(H,f);function H(){var E=f!==null&&f.apply(this,arguments)||this;return E.type=t.ElementType.Root,E}return Object.defineProperty(H.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),H}(u);ue.Document=m;var w=function(f){n(H,f);function H(E,B,j,Z){j===void 0&&(j=[]),Z===void 0&&(Z=E==="script"?t.ElementType.Script:E==="style"?t.ElementType.Style:t.ElementType.Tag);var z=f.call(this,j)||this;return z.name=E,z.attribs=B,z.type=Z,z}return Object.defineProperty(H.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"tagName",{get:function(){return this.name},set:function(E){this.name=E},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"attributes",{get:function(){var E=this;return Object.keys(this.attribs).map(function(B){var j,Z;return{name:B,value:E.attribs[B],namespace:(j=E["x-attribsNamespace"])===null||j===void 0?void 0:j[B],prefix:(Z=E["x-attribsPrefix"])===null||Z===void 0?void 0:Z[B]}})},enumerable:!1,configurable:!0}),H}(u);ue.Element=w;function y(f){return(0,t.isTag)(f)}ue.isTag=y;function _(f){return f.type===t.ElementType.CDATA}ue.isCDATA=_;function p(f){return f.type===t.ElementType.Text}ue.isText=p;function l(f){return f.type===t.ElementType.Comment}ue.isComment=l;function d(f){return f.type===t.ElementType.Directive}ue.isDirective=d;function b(f){return f.type===t.ElementType.Root}ue.isDocument=b;function S(f){return Object.prototype.hasOwnProperty.call(f,"children")}ue.hasChildren=S;function R(f,H){H===void 0&&(H=!1);var E;if(p(f))E=new a(f.data);else if(l(f))E=new s(f.data);else if(y(f)){var B=H?P(f.children):[],j=new w(f.name,e({},f.attribs),B);B.forEach(function(se){return se.parent=j}),f.namespace!=null&&(j.namespace=f.namespace),f["x-attribsNamespace"]&&(j["x-attribsNamespace"]=e({},f["x-attribsNamespace"])),f["x-attribsPrefix"]&&(j["x-attribsPrefix"]=e({},f["x-attribsPrefix"])),E=j}else if(_(f)){var B=H?P(f.children):[],Z=new h(B);B.forEach(function(D){return D.parent=Z}),E=Z}else if(b(f)){var B=H?P(f.children):[],z=new m(B);B.forEach(function(D){return D.parent=z}),f["x-mode"]&&(z["x-mode"]=f["x-mode"]),E=z}else if(d(f)){var Te=new o(f.name,f.data);f["x-name"]!=null&&(Te["x-name"]=f["x-name"],Te["x-publicId"]=f["x-publicId"],Te["x-systemId"]=f["x-systemId"]),E=Te}else throw new Error("Not implemented yet: ".concat(f.type));return E.startIndex=f.startIndex,E.endIndex=f.endIndex,f.sourceCodeLocation!=null&&(E.sourceCodeLocation=f.sourceCodeLocation),E}ue.cloneNode=R;function P(f){for(var H=f.map(function(B){return R(B,!0)}),E=1;E<H.length;E++)H[E].prev=H[E-1],H[E-1].next=H[E];return H}return ue}var Jg;function kw(){return Jg||(Jg=1,function(n){var e=Xt&&Xt.__createBinding||(Object.create?function(o,u,h,m){m===void 0&&(m=h);var w=Object.getOwnPropertyDescriptor(u,h);(!w||("get"in w?!u.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return u[h]}}),Object.defineProperty(o,m,w)}:function(o,u,h,m){m===void 0&&(m=h),o[m]=u[h]}),t=Xt&&Xt.__exportStar||function(o,u){for(var h in o)h!=="default"&&!Object.prototype.hasOwnProperty.call(u,h)&&e(u,o,h)};Object.defineProperty(n,"__esModule",{value:!0}),n.DomHandler=void 0;var r=qw(),i=Xg();t(Xg(),n);var a={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},s=function(){function o(u,h,m){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof h=="function"&&(m=h,h=a),typeof u=="object"&&(h=u,u=void 0),this.callback=u??null,this.options=h??a,this.elementCB=m??null}return o.prototype.onparserinit=function(u){this.parser=u},o.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(u){this.handleCallback(u)},o.prototype.onclosetag=function(){this.lastNode=null;var u=this.tagStack.pop();this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(u)},o.prototype.onopentag=function(u,h){var m=this.options.xmlMode?r.ElementType.Tag:void 0,w=new i.Element(u,h,void 0,m);this.addNode(w),this.tagStack.push(w)},o.prototype.ontext=function(u){var h=this.lastNode;if(h&&h.type===r.ElementType.Text)h.data+=u,this.options.withEndIndices&&(h.endIndex=this.parser.endIndex);else{var m=new i.Text(u);this.addNode(m),this.lastNode=m}},o.prototype.oncomment=function(u){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=u;return}var h=new i.Comment(u);this.addNode(h),this.lastNode=h},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var u=new i.Text(""),h=new i.CDATA([u]);this.addNode(h),u.parent=h,this.lastNode=u},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(u,h){var m=new i.ProcessingInstruction(u,h);this.addNode(m)},o.prototype.handleCallback=function(u){if(typeof this.callback=="function")this.callback(u,this.dom);else if(u)throw u},o.prototype.addNode=function(u){var h=this.tagStack[this.tagStack.length-1],m=h.children[h.children.length-1];this.options.withStartIndices&&(u.startIndex=this.parser.startIndex),this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),h.children.push(u),m&&(u.prev=m,m.next=u),u.parent=h,this.lastNode=null},o}();n.DomHandler=s,n.default=s}(Xt)),Xt}var rc={},Yg;function GC(){return Yg||(Yg=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CARRIAGE_RETURN_PLACEHOLDER_REGEX=n.CARRIAGE_RETURN_PLACEHOLDER=n.CARRIAGE_RETURN_REGEX=n.CARRIAGE_RETURN=n.CASE_SENSITIVE_TAG_NAMES_MAP=n.CASE_SENSITIVE_TAG_NAMES=void 0,n.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],n.CASE_SENSITIVE_TAG_NAMES_MAP=n.CASE_SENSITIVE_TAG_NAMES.reduce(function(e,t){return e[t.toLowerCase()]=t,e},{}),n.CARRIAGE_RETURN="\r",n.CARRIAGE_RETURN_REGEX=new RegExp(n.CARRIAGE_RETURN,"g"),n.CARRIAGE_RETURN_PLACEHOLDER="__HTML_DOM_PARSER_CARRIAGE_RETURN_PLACEHOLDER_".concat(Date.now(),"__"),n.CARRIAGE_RETURN_PLACEHOLDER_REGEX=new RegExp(n.CARRIAGE_RETURN_PLACEHOLDER,"g")}(rc)),rc}var Zg;function Mw(){if(Zg)return Kt;Zg=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.formatAttributes=r,Kt.escapeSpecialCharacters=a,Kt.revertEscapedCharacters=s,Kt.formatDOM=o;var n=kw(),e=GC();function t(u){return e.CASE_SENSITIVE_TAG_NAMES_MAP[u]}function r(u){for(var h={},m=0,w=u.length;m<w;m++){var y=u[m];h[y.name]=y.value}return h}function i(u){u=u.toLowerCase();var h=t(u);return h||u}function a(u){return u.replace(e.CARRIAGE_RETURN_REGEX,e.CARRIAGE_RETURN_PLACEHOLDER)}function s(u){return u.replace(e.CARRIAGE_RETURN_PLACEHOLDER_REGEX,e.CARRIAGE_RETURN)}function o(u,h,m){h===void 0&&(h=null);for(var w=[],y,_=0,p=u.length;_<p;_++){var l=u[_];switch(l.nodeType){case 1:{var d=i(l.nodeName);y=new n.Element(d,r(l.attributes)),y.children=o(d==="template"?l.content.childNodes:l.childNodes,y);break}case 3:y=new n.Text(s(l.nodeValue));break;case 8:y=new n.Comment(l.nodeValue);break;default:continue}var b=w[_-1]||null;b&&(b.next=y),y.parent=h,y.prev=b,y.next=null,w.push(y)}return m&&(y=new n.ProcessingInstruction(m.substring(0,m.indexOf(" ")).toLowerCase(),m),y.next=w[0]||null,y.parent=h,w.unshift(y),w[1]&&(w[1].prev=w[0])),w}return Kt}var ef;function QC(){if(ef)return Ho;ef=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.default=l;var n=Mw(),e="html",t="head",r="body",i=/<([a-zA-Z]+[0-9]?)/,a=/<head[^]*>/i,s=/<body[^]*>/i,o=function(d,b){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},u=function(d,b){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},h=typeof window=="object"&&window.DOMParser;if(typeof h=="function"){var m=new h,w="text/html";u=function(d,b){return b&&(d="<".concat(b,">").concat(d,"</").concat(b,">")),m.parseFromString(d,w)},o=u}if(typeof document=="object"&&document.implementation){var y=document.implementation.createHTMLDocument();o=function(d,b){if(b){var S=y.documentElement.querySelector(b);return S&&(S.innerHTML=d),y}return y.documentElement.innerHTML=d,y}}var _=typeof document=="object"&&document.createElement("template"),p;_&&_.content&&(p=function(d){return _.innerHTML=d,_.content.childNodes});function l(d){var b,S;d=(0,n.escapeSpecialCharacters)(d);var R=d.match(i),P=R&&R[1]?R[1].toLowerCase():"";switch(P){case e:{var f=u(d);if(!a.test(d)){var H=f.querySelector(t);(b=H?.parentNode)===null||b===void 0||b.removeChild(H)}if(!s.test(d)){var H=f.querySelector(r);(S=H?.parentNode)===null||S===void 0||S.removeChild(H)}return f.querySelectorAll(e)}case t:case r:{var E=o(d).querySelectorAll(P);return s.test(d)&&a.test(d)?E[0].parentNode.childNodes:E}default:{if(p)return p(d);var H=o(d,r).querySelector(r);return H.childNodes}}}return Ho}var tf;function WC(){if(tf)return _i;tf=1;var n=_i&&_i.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(_i,"__esModule",{value:!0}),_i.default=i;var e=n(QC()),t=Mw(),r=/<(![a-zA-Z\s]+)>/;function i(a){if(typeof a!="string")throw new TypeError("First argument must be a string");if(!a)return[];var s=a.match(r),o=s?s[1]:void 0;return(0,t.formatDOM)((0,e.default)(a),null,o)}return _i}var Ao={},Je={},ps={},rf;function VC(){if(rf)return ps;rf=1;var n=0;ps.SAME=n;var e=1;return ps.CAMELCASE=e,ps.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1},ps}var nf;function zC(){if(nf)return Je;nf=1;const n=0,e=1,t=2,r=3,i=4,a=5,s=6;function o(f){return h.hasOwnProperty(f)?h[f]:null}function u(f,H,E,B,j,Z,z){this.acceptsBooleans=H===t||H===r||H===i,this.attributeName=B,this.attributeNamespace=j,this.mustUseProperty=E,this.propertyName=f,this.type=H,this.sanitizeURL=Z,this.removeEmptyString=z}const h={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach(f=>{h[f]=new u(f,n,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([f,H])=>{h[f]=new u(f,e,!1,H,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(f=>{h[f]=new u(f,t,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(f=>{h[f]=new u(f,t,!1,f,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(f=>{h[f]=new u(f,r,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(f=>{h[f]=new u(f,r,!0,f,null,!1,!1)}),["capture","download"].forEach(f=>{h[f]=new u(f,i,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(f=>{h[f]=new u(f,s,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(f=>{h[f]=new u(f,a,!1,f.toLowerCase(),null,!1,!1)});const w=/[\-\:]([a-z])/g,y=f=>f[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(f=>{const H=f.replace(w,y);h[H]=new u(H,e,!1,f,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(f=>{const H=f.replace(w,y);h[H]=new u(H,e,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(f=>{const H=f.replace(w,y);h[H]=new u(H,e,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(f=>{h[f]=new u(f,e,!1,f.toLowerCase(),null,!1,!1)});const _="xlinkHref";h[_]=new u("xlinkHref",e,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(f=>{h[f]=new u(f,e,!1,f.toLowerCase(),null,!0,!0)});const{CAMELCASE:p,SAME:l,possibleStandardNames:d}=VC(),S=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD"+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",R=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+S+"]*$")),P=Object.keys(d).reduce((f,H)=>{const E=d[H];return E===l?f[H]=H:E===p?f[H.toLowerCase()]=H:f[H]=E,f},{});return Je.BOOLEAN=r,Je.BOOLEANISH_STRING=t,Je.NUMERIC=a,Je.OVERLOADED_BOOLEAN=i,Je.POSITIVE_NUMERIC=s,Je.RESERVED=n,Je.STRING=e,Je.getPropertyInfo=o,Je.isCustomAttribute=R,Je.possibleStandardNames=P,Je}var ms={},gi={},nc,af;function KC(){if(af)return nc;af=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,o=/^\s+|\s+$/g,u=`
`,h="/",m="*",w="",y="comment",_="declaration";nc=function(l,d){if(typeof l!="string")throw new TypeError("First argument must be a string");if(!l)return[];d=d||{};var b=1,S=1;function R(se){var D=se.match(e);D&&(b+=D.length);var N=se.lastIndexOf(u);S=~N?se.length-N:S+se.length}function P(){var se={line:b,column:S};return function(D){return D.position=new f(se),B(),D}}function f(se){this.start=se,this.end={line:b,column:S},this.source=d.source}f.prototype.content=l;function H(se){var D=new Error(d.source+":"+b+":"+S+": "+se);if(D.reason=se,D.filename=d.source,D.line=b,D.column=S,D.source=l,!d.silent)throw D}function E(se){var D=se.exec(l);if(D){var N=D[0];return R(N),l=l.slice(N.length),D}}function B(){E(t)}function j(se){var D;for(se=se||[];D=Z();)D!==!1&&se.push(D);return se}function Z(){var se=P();if(!(h!=l.charAt(0)||m!=l.charAt(1))){for(var D=2;w!=l.charAt(D)&&(m!=l.charAt(D)||h!=l.charAt(D+1));)++D;if(D+=2,w===l.charAt(D-1))return H("End of comment missing");var N=l.slice(2,D-2);return S+=2,R(N),l=l.slice(D),S+=2,se({type:y,comment:N})}}function z(){var se=P(),D=E(r);if(D){if(Z(),!E(i))return H("property missing ':'");var N=E(a),ae=se({type:_,property:p(D[0].replace(n,w)),value:N?p(N[0].replace(n,w)):w});return E(s),ae}}function Te(){var se=[];j(se);for(var D;D=z();)D!==!1&&(se.push(D),j(se));return se}return B(),Te()};function p(l){return l?l.replace(o,w):w}return nc}var sf;function XC(){if(sf)return gi;sf=1;var n=gi&&gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gi,"__esModule",{value:!0}),gi.default=t;var e=n(KC());function t(r,i){var a=null;if(!r||typeof r!="string")return a;var s=(0,e.default)(r),o=typeof i=="function";return s.forEach(function(u){if(u.type==="declaration"){var h=u.property,m=u.value;o?i(h,m,u):m&&(a=a||{},a[h]=m)}}),a}return gi}var _s={},of;function JC(){if(of)return _s;of=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(h){return!h||t.test(h)||n.test(h)},s=function(h,m){return m.toUpperCase()},o=function(h,m){return"".concat(m,"-")},u=function(h,m){return m===void 0&&(m={}),a(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(i,o):h=h.replace(r,o),h.replace(e,s))};return _s.camelCase=u,_s}var gs,lf;function YC(){if(lf)return gs;lf=1;var n=gs&&gs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=n(XC()),t=JC();function r(i,a){var s={};return!i||typeof i!="string"||(0,e.default)(i,function(o,u){o&&u&&(s[(0,t.camelCase)(o,a)]=u)}),s}return r.default=r,gs=r,gs}var uf;function jw(){return uf||(uf=1,function(n){var e=ms&&ms.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(n,"__esModule",{value:!0}),n.returnFirstArg=n.canTextBeChildOfNode=n.ELEMENTS_WITH_NO_TEXT_CHILDREN=n.PRESERVE_CUSTOM_ATTRIBUTES=void 0,n.isCustomComponent=a,n.setStyleProp=o;var t=mf(),r=e(YC()),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function a(m,w){return m.includes("-")?!i.has(m):!!(w&&typeof w.is=="string")}var s={reactCompat:!0};function o(m,w){if(typeof m=="string"){if(!m.trim()){w.style={};return}try{w.style=(0,r.default)(m,s)}catch{w.style={}}}}n.PRESERVE_CUSTOM_ATTRIBUTES=Number(t.version.split(".")[0])>=16,n.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var u=function(m){return!n.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(m.name)};n.canTextBeChildOfNode=u;var h=function(m){return m};n.returnFirstArg=h}(ms)),ms}var cf;function Lw(){if(cf)return Ao;cf=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.default=a;var n=zC(),e=jw(),t=["checked","value"],r=["input","select","textarea"],i={reset:!0,submit:!0};function a(o,u){o===void 0&&(o={});var h={},m=!!(o.type&&i[o.type]);for(var w in o){var y=o[w];if((0,n.isCustomAttribute)(w)){h[w]=y;continue}var _=w.toLowerCase(),p=s(_);if(p){var l=(0,n.getPropertyInfo)(p);switch(t.includes(p)&&r.includes(u)&&!m&&(p=s("default"+_)),h[p]=y,l&&l.type){case n.BOOLEAN:h[p]=!0;break;case n.OVERLOADED_BOOLEAN:y===""&&(h[p]=!0);break}continue}e.PRESERVE_CUSTOM_ATTRIBUTES&&(h[w]=y)}return(0,e.setStyleProp)(o.style,h),h}function s(o){return n.possibleStandardNames[o]}return Ao}var fi={},df;function ZC(){if(df)return fi;df=1;var n=fi&&fi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(fi,"__esModule",{value:!0}),fi.default=a;var e=mf(),t=n(Lw()),r=jw(),i={cloneElement:e.cloneElement,createElement:e.createElement,isValidElement:e.isValidElement};function a(o,u){u===void 0&&(u={});for(var h=[],m=typeof u.replace=="function",w=u.transform||r.returnFirstArg,y=u.library||i,_=y.cloneElement,p=y.createElement,l=y.isValidElement,d=o.length,b=0;b<d;b++){var S=o[b];if(m){var R=u.replace(S,b);if(l(R)){d>1&&(R=_(R,{key:R.key||b})),h.push(w(R,S,b));continue}}if(S.type==="text"){var P=!S.data.trim().length;if(P&&S.parent&&!(0,r.canTextBeChildOfNode)(S.parent)||u.trim&&P)continue;h.push(w(S.data,S,b));continue}var f=S,H={};s(f)?((0,r.setStyleProp)(f.attribs.style,f.attribs),H=f.attribs):f.attribs&&(H=(0,t.default)(f.attribs,f.name));var E=void 0;switch(S.type){case"script":case"style":S.children[0]&&(H.dangerouslySetInnerHTML={__html:S.children[0].data});break;case"tag":S.name==="textarea"&&S.children[0]?H.defaultValue=S.children[0].data:S.children&&S.children.length&&(E=a(S.children,u));break;default:continue}d>1&&(H.key=b),h.push(w(p(S.name,H,E),S,b))}return h.length===1?h[0]:h}function s(o){return r.PRESERVE_CUSTOM_ATTRIBUTES&&o.type==="tag"&&(0,r.isCustomComponent)(o.name,o.attribs)}return fi}var hf;function eE(){return hf||(hf=1,function(n){var e=hs&&hs.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(n,"__esModule",{value:!0}),n.htmlToDOM=n.domToReact=n.attributesToProps=n.Text=n.ProcessingInstruction=n.Element=n.Comment=void 0,n.default=o;var t=e(WC());n.htmlToDOM=t.default;var r=e(Lw());n.attributesToProps=r.default;var i=e(ZC());n.domToReact=i.default;var a=kw();Object.defineProperty(n,"Comment",{enumerable:!0,get:function(){return a.Comment}}),Object.defineProperty(n,"Element",{enumerable:!0,get:function(){return a.Element}}),Object.defineProperty(n,"ProcessingInstruction",{enumerable:!0,get:function(){return a.ProcessingInstruction}}),Object.defineProperty(n,"Text",{enumerable:!0,get:function(){return a.Text}});var s={lowerCaseAttributeNames:!1};function o(u,h){if(typeof u!="string")throw new TypeError("First argument must be a string");return u?(0,i.default)((0,t.default)(u,h?.htmlparser2||s),h):[]}}(hs)),hs}var tE=eE();const pf=Js(tE),Nw=pf.default||pf,rE={mp4:"video/mp4",m4v:"video/mp4",mov:"video/quicktime",qt:"video/quicktime",webm:"video/webm",ogv:"video/ogg",ogg:"video/ogg",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",flv:"video/x-flv",mkv:"video/x-matroska","3gp":"video/3gpp","3g2":"video/3gpp2",mpeg:"video/mpeg",mpg:"video/mpeg",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp",svg:"image/svg+xml",svgz:"image/svg+xml",bmp:"image/bmp",ico:"image/x-icon",tif:"image/tiff",tiff:"image/tiff",avif:"image/avif",apng:"image/apng",jfif:"image/jpeg",pjpeg:"image/jpeg",pjp:"image/jpeg"};function nE(n){const e=/<img\s+([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi;return n.replace(e,(t,r,i,a)=>{const s=i.split(".").pop()?.toLowerCase().split(/[#?]/)[0]||"",o=rE[s]||"application/octet-stream";return/type=["'][^"']*["']/i.test(t)?t:`<img ${r}src="${i}" type="${o}"${a}>`})}const iE="_grid_1uaxy_1",aE="_grid_cell_1uaxy_13",yi={grid:iE,grid_cell:aE};function sE({mediaInfo:n}){const e=$g(u=>u.parser),t=$g(u=>u.parseToLink),r=n.mediaInfo.textInfo.text;if(r===null&&r===""||!e||!t)return;const i=r?.split("="),a=i?.length;if(a){if(a&&a>2)return console.error("    "),null}else return null;const s=[];for(let u=0;u<i.length;u++)if(i[u]=i[u].trim(),i[u]){const h=oE({text:i[u],parser:e,newParser:t});h&&(s[u]=h)}const o=i[1]!=null&&s[1]!=null;return xt.jsxs("div",{className:yi.grid,children:[xt.jsx("div",{className:yi.grid_cell,children:xt.jsx(Wd.Textfit,{forceSingleModeWidth:!0,style:{width:"100%",height:"100%",marginLeft:"auto",marginRight:"auto",textAlign:"center",display:"flex",justifyContent:"center",alignContent:"center",flexWrap:"nowrap",alignItems:"stretch"},max:2e3,children:s[0]})}),xt.jsx("div",{className:yi.grid_cell}),xt.jsx("div",{className:yi.grid_cell}),xt.jsx("div",{className:yi.grid_cell}),xt.jsx("div",{className:yi.grid_cell+` down-cell ${o?" bg-black":""}`,children:xt.jsx(Wd.Textfit,{forceSingleModeWidth:!0,style:{width:"100%",height:"100%",marginLeft:"auto",marginRight:"auto",textAlign:"center",display:"flex",justifyContent:"center",alignContent:"center",flexWrap:"nowrap",alignItems:"stretch"},max:2e3,children:o?s[1]:""})})]})}sE.__docgenInfo={description:"",methods:[],displayName:"BigTextBlockForAudio",props:{mediaInfo:{required:!0,tsType:{name:"MediaDto"},description:""}}};function oE({text:n,parser:e,newParser:t}){if(!n)return;let r="";if(typeof n=="string")r=n.replace(/[\u{E0000}-\u{E007F}]/gu,""),n&&e&&(r=e.parse(n,1));else if("message"in n&&typeof n.message=="string"){let a=function(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")};const s=n;if(s.message===void 0)return;r=s.message.replace(/[\u{E0000}-\u{E007F}]/gu,""),s.emoteSet?.emotes?.forEach(u=>{u.name===void 0||u.imageUrl===void 0||s.message===void 0||(r=r.replaceAll(new RegExp(`(?<!<[^>]*)${a(u.name)}(?![^<]*>)`,"g"),`<img class="emote"
        srcset="//static-cdn.jtvnw.net/emoticons/v2/${u.id}/default/dark/1.0 1x, //static-cdn.jtvnw.net/emoticons/v2/${u.id}/default/light/2.0 2x, //static-cdn.jtvnw.net/emoticons/v2/${u.id}/default/dark/4.0 4x" alt="${u.name}" 
        loading="lazy"
        decoding="async" />`))});const o=t.parse(r);r=nE(o)}else throw new Error("Invalid message type");return n?Nw(r):void 0}function bs(n,e){if(n>=-1&&e<=1)return function(a,s){if(a<-1||s>1)throw new Error("min must be >= -1 and max must be <= 1");const o=Math.random()*(s-a)+a;return Math.round(o*1e3)/1e3}(n,e);const t=new Uint32Array(1);window.crypto.getRandomValues(t);const r=t[0]/4294967296;return Math.floor(r*(e-n+1))+n}function A1(n,e,t=!0){const r={},{positionInfo:i}=e;let a,s;if(a=n.offsetWidth||i.width||0,s=n.offsetHeight||i.height||0,!a&&i.width&&(a=i.width),!s&&i.height&&(s=i.height),i.randomCoordinates){const o=Math.max(0,window.innerWidth-a),u=Math.max(0,window.innerHeight-s);let h=bs(0,o),m=bs(0,u);return t||(h=bs(0,window.innerWidth),m=bs(0,window.innerHeight)),r.left=`${h}px`,r.top=`${m}px`,r.position="absolute",r}if(i.isHorizontalCenter&&i.isVerticallCenter){let o={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return t&&(o={...o,maxWidth:`${window.innerWidth}px`,maxHeight:`${window.innerHeight}px`}),o}if(i.isHorizontalCenter){let o=i.yCoordinate!==void 0?i.yCoordinate:0;return i.yCoordinate===void 0&&t&&(o+s/2>window.innerHeight&&(o=window.innerHeight-s/2),o-s/2<0&&(o=s/2)),r.position="absolute",r.left="50%",r.transform="translateX(-50%)",r.top=`${o}px`,r}if(i.isVerticallCenter){let o=i.xCoordinate!==void 0?i.xCoordinate:0;return i.xCoordinate===void 0&&t&&(o+a/2>window.innerWidth&&(o=window.innerWidth-a/2),o-a/2<0&&(o=a/2)),r.position="absolute",r.top="50%",r.transform="translateY(-50%)",r.left=`${o}px`,r}if(i.xCoordinate!==void 0){let o=i.xCoordinate;t&&(o+a>window.innerWidth&&(o=window.innerWidth-a),o<0&&(o=0)),r.left=`${o}px`,r.position="absolute"}if(i.yCoordinate!==void 0){let o=i.yCoordinate;t&&(o+s>window.innerHeight&&(o=window.innerHeight-s),o<0&&(o=0)),r.top=`${o}px`,r.position="absolute"}return(r.left!==void 0||r.top!==void 0)&&(r.position="absolute"),r}function R1(n){const e={};return n?.positionInfo.isRotated&&(e.transform=`rotate(${bs(n.positionInfo.rotation*-1,n.positionInfo.rotation)}deg)`),e}const lE=(n=1)=>{const e=Math.floor(Math.random()*256),t=Math.floor(Math.random()*256),r=Math.floor(Math.random()*256);return`rgba(${e}, ${t}, ${r}, ${n})`};function T1(n,e){let t="",r="";if(e instanceof Nc?(t=e.text,e.userInfo.badges.forEach((a,s)=>{const u=n.find(m=>m.id==s)?.versions.find(m=>m.id==a);if(!u)return;const h=u.getImageUrl(4);r=r+`<img class="badge_pa" src="${h}" type="image/png">
`})):e.badges!==void 0&&(t=e.message,e.badges.forEach(a=>{const o=n.find(h=>h.id==a.key)?.versions?.find(h=>h.id==a.value);if(!o)return;const u=o.getImageUrl(4);r=r+`<img class="badge_pa" src="${u}" type="image/png">
`})),!t)return;const i=Nw(r);if(typeof i!="string")return i}function I1(n,e,t){if(typeof n=="string")return n=n.replace(/[\u{E0000}-\u{E007F}]/gu,""),n.split(" ").map(a=>e.parse(a,1));if("message"in n&&typeof n.message=="string"){const r=n;if(r.message===void 0||r.emoteSet===void 0||r.emoteSet.emotes===void 0)return;r.message=r.message.replace(/[\u{E0000}-\u{E007F}]/gu,"");const i=r.emoteSet.emotes.map(s=>(s.name!==void 0&&(r.message=r.message?.replace(s.name,"")),s.imageUrl));return r.message.trim().split(" ").forEach(s=>{i.push(t.parse(s,1))}),i.filter(s=>s!==void 0)}else throw new Error("text must be string or ChatMessage")}const uE=n=>{if(n==="white"||n==="#ffffff"||n==="rgb(255, 255, 255)")return!0},P1=n=>{for(;;){const e=lE(n);if(!uE(e))return e}},D1=n=>(n?.faceImage.url?.includes(".mp4")||n?.faceImage.url?.includes(".webm"))??!1;function B1(n){if(!n)return;n=n.trim();const e=[];let t=[];const r=n.replace(/[\u{E0000}-\u{E007F}]/gu,"").split(/\s+/).filter(i=>i.trim().length>0);for(const i of r)i.startsWith("https://")||i.startsWith("http://")?(t.length>0&&(e.push({type:"text",content:t.join(" "),id:Wi()}),t=[]),i.includes(".mp4")||i.includes(".webm")||i.includes(".ogg")?e.push({id:Wi(),type:"video",source:i,content:i}):i.includes(".jpeg")||i.includes(".jpg")||i.includes(".png")||i.includes(".gif")||i.includes(".svg")||i.includes(".webp")?e.push({id:Wi(),type:"image",source:i,content:i}):e.push({id:Wi(),type:"link",source:i,content:i})):i&&t.push(i);return t.length>0&&e.push({id:Wi(),type:"text",content:t.join(" ")}),e}function O1(n,e,t){if(t){const s=n.filter(u=>!e.some(h=>t(u,h))),o=e.filter(u=>!n.some(h=>t(h,u)));return[...s,...o]}const r=new Set(n),i=new Set(e),a=[];for(const s of n)i.has(s)||a.push(s);for(const s of e)r.has(s)||a.push(s);return a}export{sE as B,T1 as a,bs as b,P1 as c,D1 as d,O1 as e,I1 as f,lE as g,A1 as h,uE as i,R1 as j,B1 as p,oE as r,$g as u};
