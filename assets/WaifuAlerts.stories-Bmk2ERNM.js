import{a as Ye,g as Ze,r as z,j as o}from"./iframe-ewsJ7F1S.js";import{w as Ne,e as $}from"./index-BnesSBbZ.js";import{l as se}from"./index-BmQsvoyR.js";import{S as De}from"./index-CNeMa8F8.js";import{S as J}from"./v4-BMV8v22Z.js";import{a as K}from"./animate.module-CI42XwLX.js";import{a as ke,g as Fe,u as qe,e as et}from"./index-Kvcu86GH.js";import{A as tt}from"./Announce-C7xQFdBt.js";function rt(s){const r=[...s];for(let g=r.length-1;g>0;g--){const l=Math.floor(Math.random()*(g+1));[r[g],r[l]]=[r[l],r[g]]}return r}function Ie(s){let r;return s.waifu.isAdded?r="ты добавил":s.waifu.isMerged?r="поженился с":r="тебе выпал(-а)",r+" "+s.waifu.name}function pe(s){return s.waifu.anime?`из аниме ${s.waifu.anime}`:`из манги ${s.waifu.manga}`}const We=["Кстати","К слову","Между прочим","Кстати сказать","В самом деле","Во всяком случае","Фактически"];function nt(s){if(!s.waifuHusband||!s.waifu.isPrivated||!s.waifuHusband.whenPrivated)return"";const r=new Date(s.waifuHusband.whenPrivated),l=new Date().getTime()-r.getTime(),c={days:Math.floor(l/(1e3*60*60*24)),hours:Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(l%(1e3*60*60)/(1e3*60)),seconds:Math.floor(l%(1e3*60)/1e3)};debugger;const _=st(c,s.waifu),T=ke(0,We.length-1);return` ${We[T]}, ${_}`}function st(s,r){var e;const g=s.days,l=Math.floor(g/365);let c=g%365;const _=Math.floor(c/30);c%=30;const T=Math.floor(c/7);c%=7;const i=[l>0?`${l} ${b(l,"год","года","лет")}`:null,_>0?`${_} ${b(_,"месяц","месяца","месяцев")}`:null,T>0?`${T} ${b(T,"неделя","недели","недель")}`:null,c>0?`${c} ${b(c,"день","дня","дней")}`:null,s.hours>0?`${s.hours} ${b(s.hours,"час","часа","часов")}`:null,s.minutes>0?`${s.minutes} ${b(s.minutes,"минута","минуты","минут")}`:null,s.seconds>0?`${s.seconds} ${b(s.seconds,"секунда","секунды","секунд")}`:null].filter(Boolean),t=(e=r.anime)!=null&&e.trim()?" из аниме "+r.anime:" из манги "+r.manga;return`ты в браке с ${r.name}${t} уже ${i.join(", ")}!`}function b(s,r,g,l){s=Math.abs(s)%100;const c=s%10;return s>10&&s<20?l:c>1&&c<5?g:c===1?r:l}const at="_baza_smtqg_13",U={baza:at,"alert-box":"_alert-box_smtqg_23","roulette-name-text":"_roulette-name-text_smtqg_32","smooth-box":"_smooth-box_smtqg_43","merge-container":"_merge-container_smtqg_55","merge-text":"_merge-text_smtqg_69","merge-image":"_merge-image_smtqg_83"};var oe={exports:{}},it=oe.exports,Ce;function ot(){return Ce||(Ce=1,function(s,r){(function(l,c){s.exports=c(Ye())})(it,g=>(()=>{var l={"./src/components/PrizesWrapper/PrizesWrapper.css":(i,t,e)=>{e.r(t)},"./src/components/Wrapper/Wrapper.css":(i,t,e)=>{e.r(t)},"./src/designs/Regular/Regular.css":(i,t,e)=>{e.r(t)},"./src/components/PrizesWrapper/PrizesWrapper.tsx":(i,t,e)=>{e.r(t),e.d(t,{default:()=>f});var n=e("react"),a=e.n(n),v=e("./src/context/RouletteContext.tsx"),h=e("./src/utills/index.ts");e("./src/components/PrizesWrapper/PrizesWrapper.css");var E=function(P){var p=P.children,u=P.className,m=P.tagName,d=m===void 0?"div":m,x=P.style,R=(0,n.useContext)(v.default),M=R.type,I=R.options,j=R.start,S=R.prizeListClassName,O=I.withoutAnimation!==!0&&j!==!0,y=(0,h.classNames)("roulette-pro-prize-list",{"with-animation":O},[M],S,u);return a().createElement(d,{className:y,style:x},p)};const f=E},"./src/components/PrizesWrapper/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/components/PrizesWrapper/PrizesWrapper.tsx");const a=n.default},"./src/components/Roulette/Roulette.tsx":(i,t,e)=>{e.r(t),e.d(t,{default:()=>m});var n=e("react"),a=e.n(n),v=e("./src/designs/Regular/index.ts"),h=e("./src/context/RouletteContext.tsx"),E=e("./src/components/Wrapper/index.ts"),f=e("./src/components/PrizesWrapper/index.ts"),P=e("./src/utills/index.ts"),p=e("./src/hooks/index.ts"),u=function(d){var x,R,M,I=d.topChildren,j=d.bottomChildren,S=d.designPlugin,O=d.prizeItemRenderFunction,y=d.prizes,N=d.defaultDesignOptions,Q=N===void 0?{}:N,F=d.start,X=d.prizeIndex,H=d.spinningTime,Y=H===void 0?10:H,Z=d.transitionFunction,le=Z===void 0?"cubic-bezier(0.0125, 0.1, 0.1, 1)":Z,ge=d.onPrizeDefined,be=ge===void 0?function(){}:ge,W=d.classes,V=d.soundWhileSpinning,ve=d.options,ue=ve===void 0?{}:ve,he=d.type,L=he===void 0?"horizontal":he,Ee=(0,n.useState)(0),Pe=Ee[0],xe=Ee[1],q=(0,n.useRef)(),_e=(0,p.useAudio)(V??""),$e=_e.start,Ae=_e.stop,Re=ue.stopInCenter,de=(0,v.default)(Q)({type:L}),w=typeof S!="function"?de:S({type:L}),ee=w.prizeItemWidth,te=w.prizeItemHeight;(0,n.useEffect)(function(){if(q){var A=function(){var D=q.current.getBoundingClientRect(),B=D.width,C=D.height;switch(L){case"horizontal":return xe(B);case"vertical":return xe(C);default:console.error("Unknown roulette type ".concat(L))}};return A(),window.addEventListener("resize",A),function(){window.removeEventListener("resize",A)}}},[q,L]),(0,n.useEffect)(function(){if(F){V&&$e();var A=setTimeout(function(){be(),V&&Ae()},Y*1e3);return function(){clearTimeout(A),V&&Ae()}}},[F,Y]);var Xe=(0,n.useMemo)(function(){var A=L==="horizontal"?ee:te,D=(0,P.getPrizeOffset)(A,X,Pe/2),B=Re===!0?0:(0,P.getPrizeAdditionalOffset)(A);return D+B},[L,X,ee,te,Pe,Re]),He=function(){var A,D,B=function(){switch(L){case"horizontal":return"left";case"vertical":return"top";default:throw new Error("Type is unknown")}},C=B();return F===!1?(A={},A[C]="0",A.willChange=C,A):(D={transition:"all ".concat(Y,"s ").concat(le," 0s")},D[C]="-".concat(Xe,"px"),D)},Ve=He(),Oe=(0,n.useCallback)(function(){return typeof O=="function"?O:typeof w.prizeItemRenderFunction=="function"?w.prizeItemRenderFunction:de.prizeItemRenderFunction},[de.prizeItemRenderFunction,w.prizeItemRenderFunction,O]),k=(0,n.useMemo)(function(){var A,D=Oe(),B=(0,P.classNames)(W==null?void 0:W.prizeItem,(A=w.classes)===null||A===void 0?void 0:A.prizeItem);return y.map(function(C){return a().createElement("li",{key:C.id,className:B},D(C))})},[y,Oe,W==null?void 0:W.prizeItem,(x=w.classes)===null||x===void 0?void 0:x.prizeItem]);(0,n.useEffect)(function(){var A,D,B,C;if(k.length!==0){for(var re=-1,ne=-1,Te=function(){re=-1,ne=-1},ce=0;ce<k.length;ce+=1){var G=(C=(B=(D=(A=k[ce])===null||A===void 0?void 0:A.props)===null||D===void 0?void 0:D.children)===null||B===void 0?void 0:B.props)===null||C===void 0?void 0:C.style,fe=G==null?void 0:G.width,me=G==null?void 0:G.height;if(re===-1&&ne===-1){re=fe,ne=me;continue}if(!(re===fe&&ne===me)){(fe!==ee||me!==te)&&console.error("One or more prize items have a different width or height than what is set in the designPlugin. Therefore, the roulette is incorrectly calculating the offset for the prize item index. Please check your `prizeItemRenderFunction`. All prize items must have the same width and height as set in the `prizeItemRenderFunction`"),console.error("One or more prize items have different width or height; therefore, the roulette is incorrectly calculating the offset for the prize item index. All prize items must have the same width and height. Please check your `prizeItemRenderFunction` or `designPlugin` options");break}}return Te(),function(){Te()}}},[k,ee,te]);var ye=(0,P.classNames)(W==null?void 0:W.wrapper,(R=w.classes)===null||R===void 0?void 0:R.wrapper),ze=(0,P.classNames)(W==null?void 0:W.prizeListWrapper,(M=w.classes)===null||M===void 0?void 0:M.prizeListWrapper),Ge=(0,n.useMemo)(function(){return{options:ue,start:F,wrapperClassName:ye,prizeListClassName:ze,type:L}},[ue,F,L,ze,ye]),Je=a().createElement(n.Fragment,null,w.topChildren,I),Qe=a().createElement(n.Fragment,null,w.bottomChildren,j);return a().createElement(h.default.Provider,{value:Ge},a().createElement(E.default,{ref:q},Je,a().createElement(f.default,{tagName:"ul",style:Ve},k),Qe))};const m=u},"./src/components/Roulette/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/components/Roulette/Roulette.tsx");const a=n.default},"./src/components/Wrapper/Wrapper.tsx":(i,t,e)=>{e.r(t),e.d(t,{default:()=>f});var n=e("react"),a=e.n(n),v=e("./src/utills/index.ts"),h=e("./src/context/RouletteContext.tsx");e("./src/components/Wrapper/Wrapper.css");var E=(0,n.forwardRef)(function(P,p){var u=P.children,m=P.className,d=(0,n.useContext)(h.default),x=(0,v.classNames)("roulette-pro-wrapper",d.wrapperClassName,m);return a().createElement("div",{className:x,ref:p},u)});E.displayName="Wrapper";const f=E},"./src/components/Wrapper/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/components/Wrapper/Wrapper.tsx");const a=n.default},"./src/context/RouletteContext.tsx":(i,t,e)=>{e.r(t),e.d(t,{default:()=>v});var n=e("react"),a=(0,n.createContext)({});const v=a},"./src/designs/Regular/Regular.tsx":(i,t,e)=>{e.r(t),e.d(t,{default:()=>E});var n=e("react"),a=e.n(n);e("./src/designs/Regular/Regular.css");var v=function(f){var P=f.type,p=f.hideCenterDelimiter;return p!==!0?a().createElement("div",{"data-testid":"design-top",className:"roulette-pro-regular-design-top ".concat(P)}):null},h=function(f){var P=f.prizesWithText,p=f.hideCenterDelimiter;return function(u){var m=u.type,d=205,x=m==="vertical"?172:174,R=P===!0?234:x,M="roulette-pro-regular-design-prize-item-".concat(m);return{topChildren:a().createElement(v,{type:m,hideCenterDelimiter:p}),bottomChildren:null,prizeItemWidth:d,prizeItemHeight:R,prizeItemRenderFunction:function(I){var j=I.image,S=I.text,O=P===!0&&S!==void 0;return a().createElement("div",{className:"roulette-pro-regular-prize-item",style:{width:d,height:R}},a().createElement("div",{className:O===!0?"roulette-pro-regular-prize-item-wrapper":"roulette-pro-regular-prize-item-wrapper center"},a().createElement("div",{className:"roulette-pro-regular-image-wrapper"},a().createElement("img",{className:"roulette-pro-regular-prize-item-image",src:j,alt:O===!0?"prize item ".concat(S):"prize item"})),O===!0&&a().createElement("p",{className:"roulette-pro-regular-prize-item-text"},S)))},classes:{prizeItem:M}}}};const E=h},"./src/designs/Regular/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/designs/Regular/Regular.tsx");const a=n.default},"./src/hooks/index.ts":(i,t,e)=>{e.r(t),e.d(t,{useAudio:()=>n.default});var n=e("./src/hooks/useAudio/index.ts")},"./src/hooks/useAudio/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/hooks/useAudio/useAudio.ts");const a=n.default},"./src/hooks/useAudio/useAudio.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>v});var n=e("react"),a=function(h){var E=(0,n.useState)(null),f=E[0],P=E[1],p=(0,n.useState)(!1),u=p[0],m=p[1];(0,n.useEffect)(function(){typeof window>"u"||typeof Audio>"u"||!h||P(new Audio(h))},[h]);var d=(0,n.useCallback)(function(){f&&(f.play(),m(!0))},[f]),x=(0,n.useCallback)(function(){f&&(f.pause(),f.currentTime=0,m(!1))},[f]);return(0,n.useEffect)(function(){return function(){m(!1)}},[]),(0,n.useEffect)(function(){if(f){var R=function(){x()};return f.addEventListener("ended",R),function(){f.removeEventListener("ended",R)}}},[f,x]),{isPlaying:u,start:d,stop:x}};const v=a},"./src/utills/classNames/classNames.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>P});var n=function(p){return Array.isArray(p)},a=function(p){return p!==null&&n(p)===!1&&typeof p=="object"},v=function(p){return typeof p=="function"},h=function(p){return typeof p=="boolean"},E=function(p){return p.toString!==Object.prototype.toString},f=function(){for(var p=[],u=0;u<arguments.length;u++)p[u]=arguments[u];for(var m="",d=function(O,y){var N=h(O);!O||N===!0||(m+="".concat(y!==void 0?y:O," "))},x=function(O){var y=Object.entries(O),N=E(O);if(y.forEach(function(F){var X=F[0],H=F[1];if(H){var Y=v(H),Z=X==="toString";if(Y===!0&&Z===!1){var le=H();d(le,X);return}Z===!1&&(m+="".concat(X," "))}}),N===!0){var Q=O.toString();d(Q)}},R=function(O){O.forEach(function(y){if(!(!y||typeof y=="boolean")){var N=n(y),Q=a(y);if(N===!0)return R(y);if(Q===!0)return x(y);m+="".concat(y," ")}})},M=0;M<p.length;M+=1){var I=p[M],j=a(I),S=n(I);if(j===!0){x(I);continue}if(S===!0){R(I);continue}d(I)}return m.trim()};const P=f},"./src/utills/classNames/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/utills/classNames/classNames.ts");const a=n.default},"./src/utills/getPrizeAdditionalOffset/getPrizeAdditionalOffset.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>v});var n=e("./src/utills/getRandomIntInRange/index.ts"),a=function(h){var E=h/2,f=(0,n.default)(-E+1,E-1);return f};const v=a},"./src/utills/getPrizeAdditionalOffset/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/utills/getPrizeAdditionalOffset/getPrizeAdditionalOffset.ts");const a=n.default},"./src/utills/getPrizeOffset/getPrizeOffset.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=function(v,h,E){return v*h-(E-v/2)};const a=n},"./src/utills/getPrizeOffset/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/utills/getPrizeOffset/getPrizeOffset.ts");const a=n.default},"./src/utills/getRandomIntInRange/getRandomIntInRange.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=function(v,h){var E=Math.ceil(v),f=Math.floor(h);return Math.floor(Math.random()*(f-E+1)+E)};const a=n},"./src/utills/getRandomIntInRange/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/utills/getRandomIntInRange/getRandomIntInRange.ts");const a=n.default},"./src/utills/index.ts":(i,t,e)=>{e.r(t),e.d(t,{classNames:()=>h.default,getPrizeAdditionalOffset:()=>v.default,getPrizeOffset:()=>n.default,getRandomIntInRange:()=>a.default});var n=e("./src/utills/getPrizeOffset/index.ts"),a=e("./src/utills/getRandomIntInRange/index.ts"),v=e("./src/utills/getPrizeAdditionalOffset/index.ts"),h=e("./src/utills/classNames/index.ts")},react:i=>{i.exports=g}},c={};function _(i){var t=c[i];if(t!==void 0)return t.exports;var e=c[i]={exports:{}};return l[i](e,e.exports,_),e.exports}_.n=i=>{var t=i&&i.__esModule?()=>i.default:()=>i;return _.d(t,{a:t}),t},_.d=(i,t)=>{for(var e in t)_.o(t,e)&&!_.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})},_.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),_.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var T={};return(()=>{/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/_.r(T),_.d(T,{default:()=>t});var i=_("./src/components/Roulette/index.ts");const t=i.default})(),T})())}(oe)),oe.exports}var lt=ot();const ut=Ze(lt);function Ke({rouletteIndex:s,prizes:r,callback:g,name:l,color:c}){if(r.length===0)throw new Error("Prizes is empty");const[_,T]=z.useState(!1),i=z.useRef(null),t=z.useRef(null),[e,n]=z.useState(!1),[a]=z.useState(c||Fe()),[v,h]=z.useState({width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center",alignSelf:"center",animationDuration:"2.2s"});return o.jsxs("div",{ref:i,className:" "+K.animated+" "+K.fadeIn,onAnimationEnd:()=>{T(!0),n(!0)},style:v,children:[o.jsxs("div",{ref:t,className:U["smooth-box"],style:{width:"100%",margin:"0 auto",height:"100%",alignSelf:"center",position:"relative"},children:[e&&o.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"4px",height:`${t.current.offsetHeight}px`,background:"orange",zIndex:10,transform:"translate(-50%, -50%)",visibility:e?"visible":"hidden"}}),o.jsx(ut,{start:_,prizes:r,prizeIndex:s,spinningTime:20,type:"horizontal",classes:{},options:{withoutAnimation:!0},defaultDesignOptions:{prizesWithText:!0,hideCenterDelimiter:!0},onPrizeDefined:()=>{n(!1);const E=i.current;E.onanimationend=()=>{g()},h(f=>({...f,animationDuration:"1.5s"})),E.className=" "+K.animated+" "+K.fadeOut}})]}),o.jsxs("div",{className:U["roulette-name-text"],children:[o.jsx("span",{children:"рулетка"}),o.jsx("span",{children:"для"}),o.jsx("span",{style:{color:a},children:l})]})]})}Ke.__docgenInfo={description:"",methods:[],displayName:"WaifuRoulette",props:{rouletteIndex:{required:!0,tsType:{name:"number"},description:""},prizes:{required:!0,tsType:{name:"Array",elements:[{name:"PrizeType"}],raw:"PrizeType[]"},description:""},callback:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},name:{required:!0,tsType:{name:"string"},description:""},color:{required:!1,tsType:{name:"string"},description:""}}};function dt(s,r){switch(r.type){case 0:return r.waifu?s.isWaifuShowing?{...s,messages:[...s.messages,r.waifu]}:{...s,messages:[...s.messages],currentMessage:r.waifu,isWaifuShowing:!0}:s;case 1:if(r.waifu===void 0)return{...s};if(s.messages.length>0){const l=s.messages.filter(c=>c.waifu.shikiId!==r.waifu.waifu.shikiId);if(l.length>0){const c=l[0];return{...s,messages:l,currentMessage:c,isWaifuShowing:!0}}return{...s,isWaifuShowing:!1,messages:l,currentMessage:void 0}}return{...s,messages:[],currentMessage:void 0,isWaifuShowing:!1};case 2:const g=et(s.prizes??[],r.prizes??[],(l,c)=>l.id===c.id);return g.forEach(l=>{if(l.image){const c=new Image;c.src=l.image}}),{...s,prizes:[...s.prizes,...g]};case 3:return{...s,prizes:rt(s.prizes??[])}}}function je(){const s={messages:[],isWaifuShowing:!1,prizes:[]},[{currentMessage:r,prizes:g},l]=z.useReducer(dt,s),[c,_]=z.useState(!1),T=z.useRef(null),[i,t]=z.useState(!1),[e,n]=z.useState(-1),a=qe(u=>u.sendMsgToPyrokxnezxz);J.useSignalREffect("waifuroll",(u,m,d,x)=>{v({waifu:u,displayName:m,waifuHusband:d,color:x})},[]),J.useSignalREffect("addnewwaifu",(u,m,d)=>{u.isAdded=!0,v({waifu:u,displayName:m,color:d})},[]),J.useSignalREffect("Mergewaifu",(u,m,d,x)=>{u.isMerged=!0;const R={waifu:u,displayName:m.name,waifuHusband:m,color:x,avatarUrl:d};v(R)},[]),J.useSignalREffect("UpdateWaifuPrizes",async u=>{l({type:2,prizes:u})},[]);function v(u){l({type:0,waifu:u})}function h(u){l({type:1,waifu:u})}function E(){l({type:3})}z.useEffect(()=>{if(r&&g){const u=g.findIndex(m=>m.id===r.waifu.shikiId);n(u)}},[g,r]),z.useEffect(()=>{r&&(r.waifu.isMerged||r.waifu.isAdded)&&t(!0)},[r]);const f=z.useCallback(()=>{J.invoke("MuteAll")},[]),P=z.useCallback(()=>{J.invoke("UnmuteSessions")},[]),p=z.useCallback(u=>{throw P(),h(u),Error("Failed to play audio")},[r]);return o.jsxs(o.Fragment,{children:[!c&&o.jsx(tt,{title:"WaifuRoll",callback:()=>_(!0)}),r&&!i&&e!==-1&&o.jsx(Ke,{callback:()=>{t(!0),n(-1)},rouletteIndex:e,prizes:g||[],name:r.displayName,color:r.color},r.waifu.shikiId),r&&i&&!r.waifu.isMerged&&o.jsxs("div",{id:r.waifu.shikiId,ref:T,className:U.baza+" "+K.bounceIn+" "+K.animated,children:[o.jsx("div",{className:U["alert-box"],children:o.jsx("img",{src:r.waifu.imageUrl,style:{height:"498px",width:"320px"},onLoad:()=>{setTimeout(()=>{T.current.onanimationend=()=>{h(r),n(-1),t(!1),E()},T.current.className=U.baza+" "+K.bounceOut+" "+K.animated},7e3),r.waifu.isAdded||a(`@${r.displayName}, ${Ie(r)} ${pe(r)}!${nt(r)}`)}})}),o.jsxs("div",{className:U["alert-box"],children:[o.jsx("span",{className:"text-shadow block-text",style:{color:"white"},children:o.jsx(se.Textfit,{min:1,max:1500,forceSingleModeWidth:!0,children:r.displayName.toUpperCase()})}),o.jsx("span",{className:"text-shadow block-text",style:{color:"cornflowerblue"},children:o.jsx(se.Textfit,{min:1,max:1500,forceSingleModeWidth:!0,children:Ie(r)})}),o.jsx("span",{className:"text-shadow block-text",style:{color:"red"},children:o.jsx(se.Textfit,{min:1,max:1500,forceSingleModeWidth:!0,children:pe(r)})})]})]},r.waifu.shikiId),r&&i&&r.waifu.isMerged&&o.jsxs(o.Fragment,{children:[o.jsx(De,{width:"100%",height:"100%",autorun:{speed:30,duration:20*1e3},decorateOptions:()=>({particleCount:2,angle:60,spread:55,origin:{x:0},colors:["#000000","#FF0000","#FFFFFF"]})}),o.jsx(De,{width:"100%",height:"100%",autorun:{speed:30,duration:20*1e3},decorateOptions:()=>({particleCount:2,angle:120,spread:55,origin:{x:1},colors:["#000000","#FF0000","#FFFFFF"]})}),o.jsxs("div",{className:U["merge-container"],children:[o.jsx("div",{className:U["merge-image"],children:o.jsx("img",{src:r.avatarUrl})}),o.jsx("div",{className:U["merge-text"],children:o.jsxs(se.Textfit,{style:{color:"white"},mode:"multi",min:1,max:2e3,children:["Поздравляем"," ",o.jsx("span",{style:{color:r.color},children:r.waifuHusband.name})," ","и"," ",o.jsxs("span",{style:{color:Fe()},children:[r.waifu.name," "]})," ","из"," ",o.jsx("span",{style:{color:r.waifu.anime?"blue":"gold"},children:pe(r)})," ","с свадьбой!"]})}),o.jsx("div",{className:U["merge-image"],children:o.jsx("img",{src:r.waifu.imageUrl})})]}),o.jsx("audio",{controls:!1,autoPlay:!0,onError:()=>p(r),onEnded:()=>{t(!0),n(-1),P(),h(r)},onCanPlay:u=>{var m,d;try{(m=u.currentTarget)==null||m.play()}catch{u.currentTarget.muted=!0,(d=u.currentTarget)==null||d.play()}},onCanPlayThrough:()=>f(),children:o.jsx("source",{src:"http://localhost:9155/Alerts/svadba.mp3"})},r.waifu.shikiId)]})]})}je.__docgenInfo={description:"",methods:[],displayName:"WaifuAlerts"};const Pt={title:"Waifu/WaifuAlerts",component:je,parameters:{layout:"fullscreen",docs:{description:{component:"Система алертов для вайфу-рулетки с анимациями и рулеткой."}}},tags:["autodocs"],decorators:[s=>o.jsx("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",position:"relative",overflow:"hidden"},children:o.jsx(s,{})})]},ae={args:{},play:async({canvasElement:s})=>{Ne(s),await new Promise(l=>setTimeout(l,100)),$(s).toBeInTheDocument();const r=s.querySelectorAll('[class*="baza"]');$(r.length).toBe(0);const g=s.querySelectorAll('[class*="roulette"]');$(g.length).toBe(0)}},ie={args:{},parameters:{docs:{description:{story:"Пустая система вайфу-алертов без активных событий."}}},play:async({canvasElement:s})=>{Ne(s),await new Promise(c=>setTimeout(c,100)),$(s).toBeInTheDocument();const r=s.querySelectorAll('[class*="baza"]');$(r.length).toBe(0);const g=s.querySelectorAll('[class*="roulette"]');$(g.length).toBe(0);const l=s.querySelectorAll("canvas");$(l.length).toBe(0)}};var Me,we,Be;ae.parameters={...ae.parameters,docs:{...(Me=ae.parameters)==null?void 0:Me.docs,source:{originalSource:`{
  args: {},
  play: async ({
    canvasElement
  }) => {
    const canvas = within(canvasElement);

    // Ждем появления компонента
    await new Promise(resolve => setTimeout(resolve, 100));

    // Проверяем, что компонент отрендерился
    expect(canvasElement).toBeInTheDocument();

    // Проверяем, что нет активных вайфу-алертов изначально
    const waifuAlerts = canvasElement.querySelectorAll('[class*="baza"]');
    expect(waifuAlerts.length).toBe(0);

    // Проверяем, что нет рулетки изначально
    const roulette = canvasElement.querySelectorAll('[class*="roulette"]');
    expect(roulette.length).toBe(0);
  }
}`,...(Be=(we=ae.parameters)==null?void 0:we.docs)==null?void 0:Be.source}}};var Se,Le,Ue;ie.parameters={...ie.parameters,docs:{...(Se=ie.parameters)==null?void 0:Se.docs,source:{originalSource:`{
  args: {},
  parameters: {
    docs: {
      description: {
        story: 'Пустая система вайфу-алертов без активных событий.'
      }
    }
  },
  play: async ({
    canvasElement
  }) => {
    const canvas = within(canvasElement);

    // Ждем появления компонента
    await new Promise(resolve => setTimeout(resolve, 100));

    // Проверяем, что компонент отрендерился
    expect(canvasElement).toBeInTheDocument();

    // Проверяем, что нет вайфу-алертов
    const waifuAlerts = canvasElement.querySelectorAll('[class*="baza"]');
    expect(waifuAlerts.length).toBe(0);

    // Проверяем, что нет рулетки
    const roulette = canvasElement.querySelectorAll('[class*="roulette"]');
    expect(roulette.length).toBe(0);

    // Проверяем, что нет конфетти
    const confetti = canvasElement.querySelectorAll('canvas');
    expect(confetti.length).toBe(0);
  }
}`,...(Ue=(Le=ie.parameters)==null?void 0:Le.docs)==null?void 0:Ue.source}}};const xt=["Default","Empty"];export{ae as Default,ie as Empty,xt as __namedExportsOrder,Pt as default};
