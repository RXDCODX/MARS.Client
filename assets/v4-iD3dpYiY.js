import{b as Mt,a as oe}from"./iframe-rOG4V-f_.js";var fe={},de={},pe={};class he extends Error{constructor(e,t){const n=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=n}}class ft extends Error{constructor(e="A timeout occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class Q extends Error{constructor(e="An abort occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class Rr extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=n}}class Ir extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=n}}class Fr extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=n}}class Xt extends Error{constructor(e){const t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class Or extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=n}}class $t{constructor(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}}class et{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}var y;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None"})(y||(y={}));class $e{constructor(){}log(e,t){}}$e.instance=new $e;const cr="8.0.7";class j{static isRequired(e,t){if(e==null)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,n){if(!(e in t))throw new Error(`Unknown ${n} value: ${e}.`)}}class O{static get isBrowser(){return!O.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!O.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!O.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Ze(r,e){let t="";return je(r)?(t=`Binary data of length ${r.byteLength}`,e&&(t+=`. Content: '${Ar(r)}'`)):typeof r=="string"&&(t=`String data of length ${r.length}`,e&&(t+=`. Content: '${r}'`)),t}function Ar(r){const e=new Uint8Array(r);let t="";return e.forEach(n=>{const i=n<16?"0":"";t+=`0x${i}${n.toString(16)} `}),t.substr(0,t.length-1)}function je(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}async function ar(r,e,t,n,i,o){const a={},[u,d]=qe();a[u]=d,r.log(y.Trace,`(${e} transport) sending data. ${Ze(i,o.logMessageContent)}.`);const s=je(i)?"arraybuffer":"text",c=await t.post(n,{content:i,headers:{...a,...o.headers},responseType:s,timeout:o.timeout,withCredentials:o.withCredentials});r.log(y.Trace,`(${e} transport) request complete. Response status: ${c.statusCode}.`)}function Dr(r){return r===void 0?new ht(y.Information):r===null?$e.instance:r.log!==void 0?r:new ht(r)}class Nr{constructor(e,t){this._subject=e,this._observer=t}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(t=>{})}}class ht{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){const n=`[${new Date().toISOString()}] ${y[e]}: ${t}`;switch(e){case y.Critical:case y.Error:this.out.error(n);break;case y.Warning:this.out.warn(n);break;case y.Information:this.out.info(n);break;default:this.out.log(n);break}}}}function qe(){let r="X-SignalR-User-Agent";return O.isNode&&(r="User-Agent"),[r,jr(cr,Br(),$r(),Mr())]}function jr(r,e,t,n){let i="Microsoft SignalR/";const o=r.split(".");return i+=`${o[0]}.${o[1]}`,i+=` (${r}; `,e&&e!==""?i+=`${e}; `:i+="Unknown OS; ",i+=`${t}`,n?i+=`; ${n}`:i+="; Unknown Runtime Version",i+=")",i}function Br(){if(O.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function Mr(){if(O.isNode)return process.versions.node}function $r(){return O.isNode?"NodeJS":"Browser"}function bt(r){return r.stack?r.stack:r.message?r.message:`${r}`}function qr(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class xr extends et{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||O.isNode){const t=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(t("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=t("node-fetch"):this._fetchType=fetch,this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(qr());if(typeof AbortController>"u"){const t=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new Q;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const t=new this._abortControllerType;let n;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),n=new Q});let i=null;if(e.timeout){const d=e.timeout;i=setTimeout(()=>{t.abort(),this._logger.log(y.Warning,"Timeout from HTTP request."),n=new ft},d)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},je(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let o;try{o=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(d){throw n||(this._logger.log(y.Warning,`Error from HTTP request. ${d}.`),d)}finally{i&&clearTimeout(i),e.abortSignal&&(e.abortSignal.onabort=null)}if(!o.ok){const d=await Jt(o,"text");throw new he(d||o.statusText,o.status)}const u=await Jt(o,e.responseType);return new $t(o.status,o.statusText,u)}getCookieString(e){let t="";return O.isNode&&this._jar&&this._jar.getCookies(e,(n,i)=>t=i.join("; ")),t}}function Jt(r,e){let t;switch(e){case"arraybuffer":t=r.arrayBuffer();break;case"text":t=r.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:t=r.text();break}return t}class Lr extends et{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Q):e.method?e.url?new Promise((t,n)=>{const i=new XMLHttpRequest;i.open(e.method,e.url,!0),i.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(je(e.content)?i.setRequestHeader("Content-Type","application/octet-stream"):i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const o=e.headers;o&&Object.keys(o).forEach(a=>{i.setRequestHeader(a,o[a])}),e.responseType&&(i.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),n(new Q)}),e.timeout&&(i.timeout=e.timeout),i.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),i.status>=200&&i.status<300?t(new $t(i.status,i.statusText,i.response||i.responseText)):n(new he(i.response||i.responseText||i.statusText,i.status))},i.onerror=()=>{this._logger.log(y.Warning,`Error from HTTP request. ${i.status}: ${i.statusText}.`),n(new he(i.statusText,i.status))},i.ontimeout=()=>{this._logger.log(y.Warning,"Timeout from HTTP request."),n(new ft)},i.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class lr extends et{constructor(e){if(super(),typeof fetch<"u"||O.isNode)this._httpClient=new xr(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new Lr(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Q):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class J{static write(e){return`${e}${J.RecordSeparator}`}static parse(e){if(e[e.length-1]!==J.RecordSeparator)throw new Error("Message is incomplete.");const t=e.split(J.RecordSeparator);return t.pop(),t}}J.RecordSeparatorCode=30;J.RecordSeparator=String.fromCharCode(J.RecordSeparatorCode);class Ur{writeHandshakeRequest(e){return J.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,n;if(je(e)){const u=new Uint8Array(e),d=u.indexOf(J.RecordSeparatorCode);if(d===-1)throw new Error("Message is incomplete.");const s=d+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(u.slice(0,s))),n=u.byteLength>s?u.slice(s).buffer:null}else{const u=e,d=u.indexOf(J.RecordSeparator);if(d===-1)throw new Error("Message is incomplete.");const s=d+1;t=u.substring(0,s),n=u.length>s?u.substring(s):null}const i=J.parse(t),o=JSON.parse(i[0]);if(o.type)throw new Error("Expected a handshake response from the server.");return[n,o]}}var S;(function(r){r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence"})(S||(S={}));class ur{constructor(){this.observers=[]}next(e){for(const t of this.observers)t.next(e)}error(e){for(const t of this.observers)t.error&&t.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new Nr(this,e)}}class Hr{constructor(e,t,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=n}async _send(e){const t=this._protocol.writeMessage(e);let n=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let i=()=>{},o=()=>{};je(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise((a,u)=>{i=a,o=u})),this._messages.push(new Wr(t,this._totalMessageCount,i,o))}try{this._reconnectInProgress||await this._connection.send(t)}catch{this._disconnected()}await n}_ack(e){let t=-1;for(let n=0;n<this._messages.length;n++){const i=this._messages[n];if(i._id<=e.sequenceId)t=n,je(i._message)?this._bufferedByteCount-=i._message.byteLength:this._bufferedByteCount-=i._message.length,i._resolver();else if(this._bufferedByteCount<this._bufferSize)i._resolver();else break}t!==-1&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==S.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const t=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:S.Sequence,sequenceId:e}));const t=this._messages;for(const n of t)await this._connection.send(n._message);this._reconnectInProgress=!1}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(const t of this._messages)t._rejector(e)}_isInvocationMessage(e){switch(e.type){case S.Invocation:case S.StreamItem:case S.Completion:case S.StreamInvocation:case S.CancelInvocation:return!0;case S.Close:case S.Sequence:case S.Ping:case S.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:S.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class Wr{constructor(e,t,n,i){this._message=e,this._id=t,this._resolver=n,this._rejector=i}}const Vr=30*1e3,Kr=15*1e3,zr=1e5;var I;(function(r){r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting"})(I||(I={}));class dt{static create(e,t,n,i,o,a,u){return new dt(e,t,n,i,o,a,u)}constructor(e,t,n,i,o,a,u){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(y.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},j.isRequired(e,"connection"),j.isRequired(t,"logger"),j.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=o??Vr,this.keepAliveIntervalInMilliseconds=a??Kr,this._statefulReconnectBufferSize=u??zr,this._logger=t,this._protocol=n,this.connection=e,this._reconnectPolicy=i,this._handshakeProtocol=new Ur,this.connection.onreceive=d=>this._processIncomingData(d),this.connection.onclose=d=>this._connectionClosed(d),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=I.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:S.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==I.Disconnected&&this._connectionState!==I.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==I.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=I.Connecting,this._logger.log(y.Debug,"Starting HubConnection.");try{await this._startInternal(),O.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=I.Connected,this._connectionStarted=!0,this._logger.log(y.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=I.Disconnected,this._logger.log(y.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((t,n)=>{this._handshakeResolver=t,this._handshakeRejecter=n});await this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);const n={protocol:this._protocol.name,version:t};if(this._logger.log(y.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(y.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new Hr(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(t){throw this._logger.log(y.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(t),t}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){if(this._connectionState===I.Disconnected)return this._logger.log(y.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===I.Disconnecting)return this._logger.log(y.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const t=this._connectionState;return this._connectionState=I.Disconnecting,this._logger.log(y.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(y.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===I.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Q("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...t){const[n,i]=this._replaceStreamingParams(t),o=this._createStreamInvocation(e,t,i);let a;const u=new ur;return u.cancelCallback=()=>{const d=this._createCancelInvocation(o.invocationId);return delete this._callbacks[o.invocationId],a.then(()=>this._sendWithProtocol(d))},this._callbacks[o.invocationId]=(d,s)=>{if(s){u.error(s);return}else d&&(d.type===S.Completion?d.error?u.error(new Error(d.error)):u.complete():u.next(d.item))},a=this._sendWithProtocol(o).catch(d=>{u.error(d),delete this._callbacks[o.invocationId]}),this._launchStreams(n,a),u}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){const[n,i]=this._replaceStreamingParams(t),o=this._sendWithProtocol(this._createInvocation(e,t,!0,i));return this._launchStreams(n,o),o}invoke(e,...t){const[n,i]=this._replaceStreamingParams(t),o=this._createInvocation(e,t,!1,i);return new Promise((u,d)=>{this._callbacks[o.invocationId]=(c,l)=>{if(l){d(l);return}else c&&(c.type===S.Completion?c.error?d(new Error(c.error)):u(c.result):d(new Error(`Unexpected message type: ${c.type}`)))};const s=this._sendWithProtocol(o).catch(c=>{d(c),delete this._callbacks[o.invocationId]});this._launchStreams(n,s)})}on(e,t){!e||!t||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(t)===-1&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();const n=this._methods[e];if(n)if(t){const i=n.indexOf(t);i!==-1&&(n.splice(i,1),n.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const t=this._protocol.parseMessages(e,this._logger);for(const n of t)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(n)))switch(n.type){case S.Invocation:this._invokeClientMethod(n).catch(i=>{this._logger.log(y.Error,`Invoke client method threw error: ${bt(i)}`)});break;case S.StreamItem:case S.Completion:{const i=this._callbacks[n.invocationId];if(i){n.type===S.Completion&&delete this._callbacks[n.invocationId];try{i(n)}catch(o){this._logger.log(y.Error,`Stream callback threw error: ${bt(o)}`)}}break}case S.Ping:break;case S.Close:{this._logger.log(y.Information,"Close message received from server.");const i=n.error?new Error("Server returned an error on close: "+n.error):void 0;n.allowReconnect===!0?this.connection.stop(i):this._stopPromise=this._stopInternal(i);break}case S.Ack:this._messageBuffer&&this._messageBuffer._ack(n);break;case S.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(n);break;default:this._logger.log(y.Warning,`Invalid message type: ${n.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,n;try{[n,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(i){const o="Error parsing handshake response: "+i;this._logger.log(y.Error,o);const a=new Error(o);throw this._handshakeRejecter(a),a}if(t.error){const i="Server returned handshake error: "+t.error;this._logger.log(y.Error,i);const o=new Error(i);throw this._handshakeRejecter(o),o}else this._logger.log(y.Debug,"Server handshake complete.");return this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===I.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const t=e.target.toLowerCase(),n=this._methods[t];if(!n){this._logger.log(y.Warning,`No client method with the name '${t}' found.`),e.invocationId&&(this._logger.log(y.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}const i=n.slice(),o=!!e.invocationId;let a,u,d;for(const s of i)try{const c=a;a=await s.apply(this,e.arguments),o&&a&&c&&(this._logger.log(y.Error,`Multiple results provided for '${t}'. Sending error to server.`),d=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),u=void 0}catch(c){u=c,this._logger.log(y.Error,`A callback for the method '${t}' threw error '${c}'.`)}d?await this._sendWithProtocol(d):o?(u?d=this._createCompletionMessage(e.invocationId,`${u}`,null):a!==void 0?d=this._createCompletionMessage(e.invocationId,null,a):(this._logger.log(y.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),d=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(d)):a&&this._logger.log(y.Error,`Result given for '${t}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(y.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Q("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===I.Disconnecting?this._completeClose(e):this._connectionState===I.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===I.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=I.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),O.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(y.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}async _reconnect(e){const t=Date.now();let n=0,i=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),o=this._getNextRetryDelay(n++,0,i);if(o===null){this._logger.log(y.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=I.Reconnecting,e?this._logger.log(y.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(y.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(a=>a.apply(this,[e]))}catch(a){this._logger.log(y.Error,`An onreconnecting callback called with error '${e}' threw error '${a}'.`)}if(this._connectionState!==I.Reconnecting){this._logger.log(y.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;o!==null;){if(this._logger.log(y.Information,`Reconnect attempt number ${n} will start in ${o} ms.`),await new Promise(a=>{this._reconnectDelayHandle=setTimeout(a,o)}),this._reconnectDelayHandle=void 0,this._connectionState!==I.Reconnecting){this._logger.log(y.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=I.Connected,this._logger.log(y.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(a=>a.apply(this,[this.connection.connectionId]))}catch(a){this._logger.log(y.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${a}'.`)}return}catch(a){if(this._logger.log(y.Information,`Reconnect attempt failed because of error '${a}'.`),this._connectionState!==I.Reconnecting){this._logger.log(y.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===I.Disconnecting&&this._completeClose();return}i=a instanceof Error?a:new Error(a.toString()),o=this._getNextRetryDelay(n++,Date.now()-t,i)}}this._logger.log(y.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(i){return this._logger.log(y.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${i}'.`),null}}_cancelCallbacksWithError(e){const t=this._callbacks;this._callbacks={},Object.keys(t).forEach(n=>{const i=t[n];try{i(null,e)}catch(o){this._logger.log(y.Error,`Stream 'error' callback called with '${e}' threw error: ${bt(o)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,n,i){if(n)return i.length!==0?{arguments:t,streamIds:i,target:e,type:S.Invocation}:{arguments:t,target:e,type:S.Invocation};{const o=this._invocationId;return this._invocationId++,i.length!==0?{arguments:t,invocationId:o.toString(),streamIds:i,target:e,type:S.Invocation}:{arguments:t,invocationId:o.toString(),target:e,type:S.Invocation}}}_launchStreams(e,t){if(e.length!==0){t||(t=Promise.resolve());for(const n in e)e[n].subscribe({complete:()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(n)))},error:i=>{let o;i instanceof Error?o=i.message:i&&i.toString?o=i.toString():o="Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(n,o)))},next:i=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(n,i)))}})}}_replaceStreamingParams(e){const t=[],n=[];for(let i=0;i<e.length;i++){const o=e[i];if(this._isObservable(o)){const a=this._invocationId;this._invocationId++,t[a]=o,n.push(a.toString()),e.splice(i,1)}}return[t,n]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,t,n){const i=this._invocationId;return this._invocationId++,n.length!==0?{arguments:t,invocationId:i.toString(),streamIds:n,target:e,type:S.StreamInvocation}:{arguments:t,invocationId:i.toString(),target:e,type:S.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:S.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:S.StreamItem}}_createCompletionMessage(e,t,n){return t?{error:t,invocationId:e,type:S.Completion}:{invocationId:e,result:n,type:S.Completion}}_createCloseMessage(){return{type:S.Close}}}const Xr=[0,2e3,1e4,3e4,null];class Yt{constructor(e){this._retryDelays=e!==void 0?[...e,null]:Xr}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class Ne{}Ne.Authorization="Authorization";Ne.Cookie="Cookie";class Jr extends et{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const n=await this._innerClient.send(e);return t&&n.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):n}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[Ne.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[Ne.Authorization]&&delete e.headers[Ne.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var N;(function(r){r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling"})(N||(N={}));var $;(function(r){r[r.Text=1]="Text",r[r.Binary=2]="Binary"})($||($={}));let Yr=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Gt{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,n){this._httpClient=e,this._logger=t,this._pollAbort=new Yr,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,t){if(j.isRequired(e,"url"),j.isRequired(t,"transferFormat"),j.isIn(t,$,"transferFormat"),this._url=e,this._logger.log(y.Trace,"(LongPolling transport) Connecting."),t===$.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,i]=qe(),o={[n]:i,...this._options.headers},a={abortSignal:this._pollAbort.signal,headers:o,timeout:1e5,withCredentials:this._options.withCredentials};t===$.Binary&&(a.responseType="arraybuffer");const u=`${e}&_=${Date.now()}`;this._logger.log(y.Trace,`(LongPolling transport) polling: ${u}.`);const d=await this._httpClient.get(u,a);d.statusCode!==200?(this._logger.log(y.Error,`(LongPolling transport) Unexpected response code: ${d.statusCode}.`),this._closeError=new he(d.statusText||"",d.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,a)}async _poll(e,t){try{for(;this._running;)try{const n=`${e}&_=${Date.now()}`;this._logger.log(y.Trace,`(LongPolling transport) polling: ${n}.`);const i=await this._httpClient.get(n,t);i.statusCode===204?(this._logger.log(y.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):i.statusCode!==200?(this._logger.log(y.Error,`(LongPolling transport) Unexpected response code: ${i.statusCode}.`),this._closeError=new he(i.statusText||"",i.statusCode),this._running=!1):i.content?(this._logger.log(y.Trace,`(LongPolling transport) data received. ${Ze(i.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(i.content)):this._logger.log(y.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(n){this._running?n instanceof ft?this._logger.log(y.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=n,this._running=!1):this._logger.log(y.Trace,`(LongPolling transport) Poll errored after shutdown: ${n.message}`)}}finally{this._logger.log(y.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?ar(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(y.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(y.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[t,n]=qe();e[t]=n;const i={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let o;try{await this._httpClient.delete(this._url,i)}catch(a){o=a}o?o instanceof he&&(o.statusCode===404?this._logger.log(y.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(y.Trace,`(LongPolling transport) Error sending a DELETE request: ${o}`)):this._logger.log(y.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(y.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(y.Trace,e),this.onclose(this._closeError)}}}class Gr{constructor(e,t,n,i){this._httpClient=e,this._accessToken=t,this._logger=n,this._options=i,this.onreceive=null,this.onclose=null}async connect(e,t){return j.isRequired(e,"url"),j.isRequired(t,"transferFormat"),j.isIn(t,$,"transferFormat"),this._logger.log(y.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((n,i)=>{let o=!1;if(t!==$.Text){i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let a;if(O.isBrowser||O.isWebWorker)a=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const u=this._httpClient.getCookieString(e),d={};d.Cookie=u;const[s,c]=qe();d[s]=c,a=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...d,...this._options.headers}})}try{a.onmessage=u=>{if(this.onreceive)try{this._logger.log(y.Trace,`(SSE transport) data received. ${Ze(u.data,this._options.logMessageContent)}.`),this.onreceive(u.data)}catch(d){this._close(d);return}},a.onerror=u=>{o?this._close():i(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},a.onopen=()=>{this._logger.log(y.Information,`SSE connected to ${this._url}`),this._eventSource=a,o=!0,n()}}catch(u){i(u);return}})}async send(e){return this._eventSource?ar(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class Qr{constructor(e,t,n,i,o,a){this._logger=n,this._accessTokenFactory=t,this._logMessageContent=i,this._webSocketConstructor=o,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=a}async connect(e,t){j.isRequired(e,"url"),j.isRequired(t,"transferFormat"),j.isIn(t,$,"transferFormat"),this._logger.log(y.Trace,"(WebSockets transport) Connecting.");let n;return this._accessTokenFactory&&(n=await this._accessTokenFactory()),new Promise((i,o)=>{e=e.replace(/^http/,"ws");let a;const u=this._httpClient.getCookieString(e);let d=!1;if(O.isNode||O.isReactNative){const s={},[c,l]=qe();s[c]=l,n&&(s[Ne.Authorization]=`Bearer ${n}`),u&&(s[Ne.Cookie]=u),a=new this._webSocketConstructor(e,void 0,{headers:{...s,...this._headers}})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);a||(a=new this._webSocketConstructor(e)),t===$.Binary&&(a.binaryType="arraybuffer"),a.onopen=s=>{this._logger.log(y.Information,`WebSocket connected to ${e}.`),this._webSocket=a,d=!0,i()},a.onerror=s=>{let c=null;typeof ErrorEvent<"u"&&s instanceof ErrorEvent?c=s.error:c="There was an error with the transport",this._logger.log(y.Information,`(WebSockets transport) ${c}.`)},a.onmessage=s=>{if(this._logger.log(y.Trace,`(WebSockets transport) data received. ${Ze(s.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(s.data)}catch(c){this._close(c);return}},a.onclose=s=>{if(d)this._close(s);else{let c=null;typeof ErrorEvent<"u"&&s instanceof ErrorEvent?c=s.error:c="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",o(new Error(c))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(y.Trace,`(WebSockets transport) sending data. ${Ze(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(y.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}const Qt=100;class Zr{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,j.isRequired(e,"url"),this._logger=Dr(t.logger),this.baseUrl=this._resolveUrl(e),t=t||{},t.logMessageContent=t.logMessageContent===void 0?!1:t.logMessageContent,typeof t.withCredentials=="boolean"||t.withCredentials===void 0)t.withCredentials=t.withCredentials===void 0?!0:t.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.timeout=t.timeout===void 0?100*1e3:t.timeout;let n=null,i=null;if(O.isNode&&typeof require<"u"){const o=typeof __webpack_require__=="function"?__non_webpack_require__:require;n=o("ws"),i=o("eventsource")}!O.isNode&&typeof WebSocket<"u"&&!t.WebSocket?t.WebSocket=WebSocket:O.isNode&&!t.WebSocket&&n&&(t.WebSocket=n),!O.isNode&&typeof EventSource<"u"&&!t.EventSource?t.EventSource=EventSource:O.isNode&&!t.EventSource&&typeof i<"u"&&(t.EventSource=i),this._httpClient=new Jr(t.httpClient||new lr(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}async start(e){if(e=e||$.Binary,j.isIn(e,$,"transferFormat"),this._logger.log(y.Debug,`Starting connection with transfer format '${$[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(y.Error,t),await this._stopPromise,Promise.reject(new Q(t))}else if(this._connectionState!=="Connected"){const t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(y.Error,t),Promise.reject(new Q(t))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new qt(this.transport)),this._sendQueue.send(e))}async stop(e){if(this._connectionState==="Disconnected")return this._logger.log(y.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(y.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(t=>{this._stopPromiseResolver=t}),await this._stopInternal(e),await this._stopPromise}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(t){this._logger.log(y.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(y.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===N.WebSockets)this.transport=this._constructTransport(N.WebSockets),await this._startTransport(t,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let n=null,i=0;do{if(n=await this._getNegotiationResponse(t),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Q("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(t=n.url),n.accessToken){const o=n.accessToken;this._accessTokenFactory=()=>o,this._httpClient._accessToken=o,this._httpClient._accessTokenFactory=void 0}i++}while(n.url&&i<Qt);if(i===Qt&&n.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(t,this._options.transport,n,e)}this.transport instanceof Gt&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(y.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(n){return this._logger.log(y.Error,"Failed to start the connection: "+n),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(n)}}async _getNegotiationResponse(e){const t={},[n,i]=qe();t[n]=i;const o=this._resolveNegotiateUrl(e);this._logger.log(y.Debug,`Sending negotiation request: ${o}.`);try{const a=await this._httpClient.post(o,{content:"",headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(a.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${a.statusCode}'`));const u=JSON.parse(a.content);return(!u.negotiateVersion||u.negotiateVersion<1)&&(u.connectionToken=u.connectionId),u.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Xt("Client didn't negotiate Stateful Reconnect but the server did.")):u}catch(a){let u="Failed to complete negotiation with the server: "+a;return a instanceof he&&a.statusCode===404&&(u=u+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(y.Error,u),Promise.reject(new Xt(u))}}_createConnectUrl(e,t){return t?e+(e.indexOf("?")===-1?"?":"&")+`id=${t}`:e}async _createTransport(e,t,n,i){let o=this._createConnectUrl(e,n.connectionToken);if(this._isITransport(t)){this._logger.log(y.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,await this._startTransport(o,i),this.connectionId=n.connectionId;return}const a=[],u=n.availableTransports||[];let d=n;for(const s of u){const c=this._resolveTransportOrError(s,t,i,d?.useStatefulReconnect===!0);if(c instanceof Error)a.push(`${s.transport} failed:`),a.push(c);else if(this._isITransport(c)){if(this.transport=c,!d){try{d=await this._getNegotiationResponse(e)}catch(l){return Promise.reject(l)}o=this._createConnectUrl(e,d.connectionToken)}try{await this._startTransport(o,i),this.connectionId=d.connectionId;return}catch(l){if(this._logger.log(y.Error,`Failed to start the transport '${s.transport}': ${l}`),d=void 0,a.push(new Fr(`${s.transport} failed: ${l}`,N[s.transport])),this._connectionState!=="Connecting"){const h="Failed to select transport before stop() was called.";return this._logger.log(y.Debug,h),Promise.reject(new Q(h))}}}}return a.length>0?Promise.reject(new Or(`Unable to connect to the server with any of the available transports. ${a.join(" ")}`,a)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case N.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Qr(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case N.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Gr(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case N.LongPolling:return new Gt(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async n=>{let i=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(e,t),await this.features.resend()}catch{i=!0}else{this._stopConnection(n);return}i&&this._stopConnection(n)}:this.transport.onclose=n=>this._stopConnection(n),this.transport.connect(e,t)}_resolveTransportOrError(e,t,n,i){const o=N[e.transport];if(o==null)return this._logger.log(y.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(eo(t,o))if(e.transferFormats.map(u=>$[u]).indexOf(n)>=0){if(o===N.WebSockets&&!this._options.WebSocket||o===N.ServerSentEvents&&!this._options.EventSource)return this._logger.log(y.Debug,`Skipping transport '${N[o]}' because it is not supported in your environment.'`),new Rr(`'${N[o]}' is not supported in your environment.`,o);this._logger.log(y.Debug,`Selecting transport '${N[o]}'.`);try{return this.features.reconnect=o===N.WebSockets?i:void 0,this._constructTransport(o)}catch(u){return u}}else return this._logger.log(y.Debug,`Skipping transport '${N[o]}' because it does not support the requested transfer format '${$[n]}'.`),new Error(`'${N[o]}' does not support ${$[n]}.`);else return this._logger.log(y.Debug,`Skipping transport '${N[o]}' because it was disabled by the client.`),new Ir(`'${N[o]}' is disabled by the client.`,o)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(y.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(y.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(y.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(y.Error,`Connection disconnected with error '${e}'.`):this._logger.log(y.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(t=>{this._logger.log(y.Error,`TransportSendQueue.stop() threw error '${t}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(y.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!O.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const t=window.document.createElement("a");return t.href=e,this._logger.log(y.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){const t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";const n=new URLSearchParams(t.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?n.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&n.append("useStatefulReconnect","true"),t.search=n.toString(),t.toString()}}function eo(r,e){return!r||(e&r)!==0}class qt{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new nt,this._transportResult=new nt,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new nt),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new nt;const e=this._transportResult;this._transportResult=void 0;const t=typeof this._buffer[0]=="string"?this._buffer.join(""):qt._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(t),e.resolve()}catch(n){e.reject(n)}}}static _concatBuffers(e){const t=e.map(o=>o.byteLength).reduce((o,a)=>o+a),n=new Uint8Array(t);let i=0;for(const o of e)n.set(new Uint8Array(o),i),i+=o.byteLength;return n.buffer}}class nt{constructor(){this.promise=new Promise((e,t)=>[this._resolver,this._rejecter]=[e,t])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}const to="json";class hr{constructor(){this.name=to,this.version=2,this.transferFormat=$.Text}parseMessages(e,t){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];t===null&&(t=$e.instance);const n=J.parse(e),i=[];for(const o of n){const a=JSON.parse(o);if(typeof a.type!="number")throw new Error("Invalid payload.");switch(a.type){case S.Invocation:this._isInvocationMessage(a);break;case S.StreamItem:this._isStreamItemMessage(a);break;case S.Completion:this._isCompletionMessage(a);break;case S.Ping:break;case S.Close:break;case S.Ack:this._isAckMessage(a);break;case S.Sequence:this._isSequenceMessage(a);break;default:t.log(y.Information,"Unknown message type '"+a.type+"' ignored.");continue}i.push(a)}return i}writeMessage(e){return J.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if(typeof e!="string"||e==="")throw new Error(t)}}const no={trace:y.Trace,debug:y.Debug,info:y.Information,information:y.Information,warn:y.Warning,warning:y.Warning,error:y.Error,critical:y.Critical,none:y.None};function ro(r){const e=no[r.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${r}`)}class oo{configureLogging(e){if(j.isRequired(e,"logging"),io(e))this.logger=e;else if(typeof e=="string"){const t=ro(e);this.logger=new ht(t)}else this.logger=new ht(e);return this}withUrl(e,t){return j.isRequired(e,"url"),j.isNotEmpty(e,"url"),this.url=e,typeof t=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...t}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return j.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Yt(e):this.reconnectPolicy=e:this.reconnectPolicy=new Yt,this}withServerTimeout(e){return j.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return j.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e?.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const t=new Zr(this.url,e);return dt.create(t,this.logger||$e.instance,this.protocol||new hr,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function io(r){return r.log!==void 0}const so=Object.freeze(Object.defineProperty({__proto__:null,AbortError:Q,DefaultHttpClient:lr,HttpClient:et,HttpError:he,HttpResponse:$t,get HttpTransportType(){return N},HubConnection:dt,HubConnectionBuilder:oo,get HubConnectionState(){return I},JsonHubProtocol:hr,get LogLevel(){return y},get MessageType(){return S},NullLogger:$e,Subject:ur,TimeoutError:ft,get TransferFormat(){return $},VERSION:cr},Symbol.toStringTag,{value:"Module"})),fr=Mt(so);var rt={},Zt;function ie(){if(Zt)return rt;Zt=1,Object.defineProperty(rt,"__esModule",{value:!0});function r(){const t={};function n(s,c){s in t||(t[s]=[]),t[s].push(c)}function i(s,c){if(s in t){if(typeof c=="function"){const l=t[s].indexOf(c);t[s].splice(l,1)}(typeof c!="function"||t[s].length===0)&&delete t[s]}}function o(s,c){s in t&&t[s].forEach(l=>l(c))}function a(){const s=new BroadcastChannel("hermes");return s.onmessage=l=>o(l.data.topic,l.data.data),{on:n,off:i,send:(l,h,f="other")=>{(f==="all"||f==="other")&&s.postMessage({topic:l,data:h}),(f==="all"||f==="current")&&o(l,h)}}}function u(){const s=window.localStorage,c="__hermes:",l={},h=(f,p,g="other")=>{const _=c+f;s.getItem(_)===null||s.getItem(_)===""?((g==="all"||g==="other")&&(s.setItem(_,JSON.stringify(p)),s.removeItem(_)),(g==="all"||g==="current")&&o(f,p)):(_ in l||(l[_]=[]),l[_].push(p))};return window.addEventListener("storage",f=>{if(f.key&&f.key.indexOf(c)===0&&(f.oldValue===null||f.oldValue==="")){const p=f.key.replace(c,""),g=f.newValue?JSON.parse(f.newValue):f.newValue;o(p,g)}}),window.addEventListener("storage",f=>{if(f.key&&f.key.indexOf(c)===0&&(f.newValue===null||f.newValue==="")){const p=f.key.replace(c,"");p in l&&(h(p,l[p].shift()),l[p].length===0&&delete l[p])}}),{on:n,off:i,send:h}}function d(){return{on:n,off:i,send:(c,l,h="other")=>{h!=="other"&&(h==="all"||h==="current")&&o(c,l)}}}if(typeof window<"u"){if("BroadcastChannel"in window)return a();if("localStorage"in window)return u()}return d()}var e=r();return rt.default=e,rt}var z={},en;function Y(){if(en)return z;en=1;var r=z&&z.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(z,"__esModule",{value:!0}),z.__DEV__=z.useEvent=z.sendWithHermes=z.removeDuplicates=void 0;const e=r(ie()),t=oe(),n=!1;z.__DEV__=n;function i(u){const s=new Set(u).values();return Array.from(s)}z.removeDuplicates=i;function o(u,d,s){e.default.send(u,d,s?"all":"current")}z.sendWithHermes=o;function a(u){const d=(0,t.useRef)(u);d.current!==u&&(d.current=u);const s=(0,t.useCallback)((...c)=>d.current(...c),[]);return u&&s}return z.useEvent=a,z}var _e={},tn;function co(){if(tn)return _e;tn=1;var r=_e&&_e.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(_e,"__esModule",{value:!0}),_e.createUseSignalREffect=void 0;const e=r(ie()),t=oe(),n=Y();function i(o){return(u,d)=>{const s=(0,n.useEvent)(d);(0,t.useEffect)(()=>{var c;function l(h){s(...h)}return(c=o.on)===null||c===void 0||c.call(o,u),e.default.on(u,l),()=>{var h;(h=o.off)===null||h===void 0||h.call(o,u),e.default.off(u,l)}},[])}}return _e.createUseSignalREffect=i,_e}var ge={},Ct={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */var nn;function xt(){return nn||(nn=1,function(r,e){(function(t){var n;if(r.exports=t(),n=!0,!n){var i=window.Cookies,o=window.Cookies=t();o.noConflict=function(){return window.Cookies=i,o}}})(function(){function t(){for(var o=0,a={};o<arguments.length;o++){var u=arguments[o];for(var d in u)a[d]=u[d]}return a}function n(o){return o.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function i(o){function a(){}function u(s,c,l){if(!(typeof document>"u")){l=t({path:"/"},a.defaults,l),typeof l.expires=="number"&&(l.expires=new Date(new Date*1+l.expires*864e5)),l.expires=l.expires?l.expires.toUTCString():"";try{var h=JSON.stringify(c);/^[\{\[]/.test(h)&&(c=h)}catch{}c=o.write?o.write(c,s):encodeURIComponent(String(c)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),s=encodeURIComponent(String(s)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var f="";for(var p in l)l[p]&&(f+="; "+p,l[p]!==!0&&(f+="="+l[p].split(";")[0]));return document.cookie=s+"="+c+f}}function d(s,c){if(!(typeof document>"u")){for(var l={},h=document.cookie?document.cookie.split("; "):[],f=0;f<h.length;f++){var p=h[f].split("="),g=p.slice(1).join("=");!c&&g.charAt(0)==='"'&&(g=g.slice(1,-1));try{var _=n(p[0]);if(g=(o.read||o)(g,_)||n(g),c)try{g=JSON.parse(g)}catch{}if(l[_]=g,s===_)break}catch{}}return s?l[s]:l}}return a.set=u,a.get=function(s){return d(s,!1)},a.getJSON=function(s){return d(s,!0)},a.remove=function(s,c){u(s,"",t(c,{expires:-1}))},a.defaults={},a.withConverter=i,a}return i(function(){})})}(Ct)),Ct.exports}var ve={},rn;function dr(){if(rn)return ve;rn=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.createConnection=ve.isConnectionConnecting=void 0;const r=fr;function e(n){return n.state===r.HubConnectionState.Connected||n.state===r.HubConnectionState.Reconnecting||n.state===r.HubConnectionState.Connecting}ve.isConnectionConnecting=e;function t(n,i,o=!0){let a=new r.HubConnectionBuilder().withUrl(n,i);return o&&(Array.isArray(o)?a=a.withAutomaticReconnect(o):a=a.withAutomaticReconnect()),i.logger&&(a=a.configureLogging(i.logger)),a.build()}return ve.createConnection=t,ve}var on;function ao(){if(on)return ge;on=1;var r=ge&&ge.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ge,"__esModule",{value:!0}),ge.providerFactory=void 0;const e=r(ie()),t=oe(),n=r(xt()),i=dr(),o=Y(),a="IS_SIGNAL_R_CONNECTED",u="KEY_LAST_CONNECTION_TIME";function d(c){return({url:h,connectEnabled:f=!0,automaticReconnect:p=!0,children:g,dependencies:_=[],accessTokenFactory:v,onError:m,onOpen:b,onReconnect:C,onClosed:w,onBeforeClose:R,logger:E,...D})=>{const P=(0,o.useEvent)(m),k=(0,o.useEvent)(v),F=(0,t.useRef)(()=>{});function te(){var ne;if(!f)return;const T=(0,i.createConnection)(h,{accessTokenFactory:()=>k?.()||"",logger:E,...D},p);T.onreconnecting(K=>P?.(K)),T.onreconnected(()=>C?.(T)),c.connection=T,c.reOn(),T.onclose(K=>{w?.(K)});let A=Number(n.default.get(u))||null,V=null;e.default.on(a,K=>{if(!K){A=null,V=null,yt();return}E&&console.log("Another tab connected"),V=K,A=Date.now(),(0,i.isConnectionConnecting)(T)||(G&&clearInterval(G),T.stop())});let G;async function yt(){function K(){if(V){clearInterval(G),T.stop();return}s(T.connectionId)}if((!A||A<Date.now()-5e3)&&!(0,i.isConnectionConnecting)(T))try{s(T.connectionId),await T.start(),b?.(T),G=setInterval(K,4e3),K()}catch(zt){console.log(zt),G&&clearInterval(G),P?.(zt)}}yt();const Pr=setInterval(yt,6e3);function Kt(){(0,i.isConnectionConnecting)(T)&&(s(null),clearInterval(G),T.stop())}(ne=window?.addEventListener)===null||ne===void 0||ne.call(window,"beforeunload",Kt),F.current=async()=>{var K;clearInterval(Pr),G&&clearInterval(G),await R?.(T),T.stop(),e.default.off(a),(K=window?.removeEventListener)===null||K===void 0||K.call(window,"beforeunload",Kt)}}(0,t.useState)(()=>{te()});const W=(0,t.useRef)(!1);return(0,t.useEffect)(()=>(W.current&&te(),W.current=!0,()=>{F.current()}),[f,h,..._]),g}}ge.providerFactory=d;function s(c){if(!c){e.default.send(a,""),n.default.set(u,"");return}e.default.send(a,c);const l=new Date;l.setSeconds(l.getSeconds()+10),n.default.set(u,Date.now().toString(),{expires:l,path:"/"})}return ge}var ot,lo=new Uint8Array(16);function pr(){if(!ot&&(ot=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ot))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ot(lo)}const uo=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function pt(r){return typeof r=="string"&&uo.test(r)}var B=[];for(var wt=0;wt<256;++wt)B.push((wt+256).toString(16).substr(1));function _t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(B[r[e+0]]+B[r[e+1]]+B[r[e+2]]+B[r[e+3]]+"-"+B[r[e+4]]+B[r[e+5]]+"-"+B[r[e+6]]+B[r[e+7]]+"-"+B[r[e+8]]+B[r[e+9]]+"-"+B[r[e+10]]+B[r[e+11]]+B[r[e+12]]+B[r[e+13]]+B[r[e+14]]+B[r[e+15]]).toLowerCase();if(!pt(t))throw TypeError("Stringified UUID is invalid");return t}var sn,St,kt=0,Et=0;function ho(r,e,t){var n=e&&t||0,i=e||new Array(16);r=r||{};var o=r.node||sn,a=r.clockseq!==void 0?r.clockseq:St;if(o==null||a==null){var u=r.random||(r.rng||pr)();o==null&&(o=sn=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),a==null&&(a=St=(u[6]<<8|u[7])&16383)}var d=r.msecs!==void 0?r.msecs:Date.now(),s=r.nsecs!==void 0?r.nsecs:Et+1,c=d-kt+(s-Et)/1e4;if(c<0&&r.clockseq===void 0&&(a=a+1&16383),(c<0||d>kt)&&r.nsecs===void 0&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");kt=d,Et=s,St=a,d+=122192928e5;var l=((d&268435455)*1e4+s)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=l&255;var h=d/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=h&255,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(var f=0;f<6;++f)i[n+f]=o[f];return e||_t(i)}function _r(r){if(!pt(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function fo(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var po="6ba7b810-9dad-11d1-80b4-00c04fd430c8",_o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function gr(r,e,t){function n(i,o,a,u){if(typeof i=="string"&&(i=fo(i)),typeof o=="string"&&(o=_r(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+i.length);if(d.set(o),d.set(i,o.length),d=t(d),d[6]=d[6]&15|e,d[8]=d[8]&63|128,a){u=u||0;for(var s=0;s<16;++s)a[u+s]=d[s];return a}return _t(d)}try{n.name=r}catch{}return n.DNS=po,n.URL=_o,n}function go(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return vo(mo(yo(r),r.length*8))}function vo(r){for(var e=[],t=r.length*32,n="0123456789abcdef",i=0;i<t;i+=8){var o=r[i>>5]>>>i%32&255,a=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);e.push(a)}return e}function vr(r){return(r+64>>>9<<4)+14+1}function mo(r,e){r[e>>5]|=128<<e%32,r[vr(e)-1]=e;for(var t=1732584193,n=-271733879,i=-1732584194,o=271733878,a=0;a<r.length;a+=16){var u=t,d=n,s=i,c=o;t=q(t,n,i,o,r[a],7,-680876936),o=q(o,t,n,i,r[a+1],12,-389564586),i=q(i,o,t,n,r[a+2],17,606105819),n=q(n,i,o,t,r[a+3],22,-1044525330),t=q(t,n,i,o,r[a+4],7,-176418897),o=q(o,t,n,i,r[a+5],12,1200080426),i=q(i,o,t,n,r[a+6],17,-1473231341),n=q(n,i,o,t,r[a+7],22,-45705983),t=q(t,n,i,o,r[a+8],7,1770035416),o=q(o,t,n,i,r[a+9],12,-1958414417),i=q(i,o,t,n,r[a+10],17,-42063),n=q(n,i,o,t,r[a+11],22,-1990404162),t=q(t,n,i,o,r[a+12],7,1804603682),o=q(o,t,n,i,r[a+13],12,-40341101),i=q(i,o,t,n,r[a+14],17,-1502002290),n=q(n,i,o,t,r[a+15],22,1236535329),t=x(t,n,i,o,r[a+1],5,-165796510),o=x(o,t,n,i,r[a+6],9,-1069501632),i=x(i,o,t,n,r[a+11],14,643717713),n=x(n,i,o,t,r[a],20,-373897302),t=x(t,n,i,o,r[a+5],5,-701558691),o=x(o,t,n,i,r[a+10],9,38016083),i=x(i,o,t,n,r[a+15],14,-660478335),n=x(n,i,o,t,r[a+4],20,-405537848),t=x(t,n,i,o,r[a+9],5,568446438),o=x(o,t,n,i,r[a+14],9,-1019803690),i=x(i,o,t,n,r[a+3],14,-187363961),n=x(n,i,o,t,r[a+8],20,1163531501),t=x(t,n,i,o,r[a+13],5,-1444681467),o=x(o,t,n,i,r[a+2],9,-51403784),i=x(i,o,t,n,r[a+7],14,1735328473),n=x(n,i,o,t,r[a+12],20,-1926607734),t=L(t,n,i,o,r[a+5],4,-378558),o=L(o,t,n,i,r[a+8],11,-2022574463),i=L(i,o,t,n,r[a+11],16,1839030562),n=L(n,i,o,t,r[a+14],23,-35309556),t=L(t,n,i,o,r[a+1],4,-1530992060),o=L(o,t,n,i,r[a+4],11,1272893353),i=L(i,o,t,n,r[a+7],16,-155497632),n=L(n,i,o,t,r[a+10],23,-1094730640),t=L(t,n,i,o,r[a+13],4,681279174),o=L(o,t,n,i,r[a],11,-358537222),i=L(i,o,t,n,r[a+3],16,-722521979),n=L(n,i,o,t,r[a+6],23,76029189),t=L(t,n,i,o,r[a+9],4,-640364487),o=L(o,t,n,i,r[a+12],11,-421815835),i=L(i,o,t,n,r[a+15],16,530742520),n=L(n,i,o,t,r[a+2],23,-995338651),t=U(t,n,i,o,r[a],6,-198630844),o=U(o,t,n,i,r[a+7],10,1126891415),i=U(i,o,t,n,r[a+14],15,-1416354905),n=U(n,i,o,t,r[a+5],21,-57434055),t=U(t,n,i,o,r[a+12],6,1700485571),o=U(o,t,n,i,r[a+3],10,-1894986606),i=U(i,o,t,n,r[a+10],15,-1051523),n=U(n,i,o,t,r[a+1],21,-2054922799),t=U(t,n,i,o,r[a+8],6,1873313359),o=U(o,t,n,i,r[a+15],10,-30611744),i=U(i,o,t,n,r[a+6],15,-1560198380),n=U(n,i,o,t,r[a+13],21,1309151649),t=U(t,n,i,o,r[a+4],6,-145523070),o=U(o,t,n,i,r[a+11],10,-1120210379),i=U(i,o,t,n,r[a+2],15,718787259),n=U(n,i,o,t,r[a+9],21,-343485551),t=ue(t,u),n=ue(n,d),i=ue(i,s),o=ue(o,c)}return[t,n,i,o]}function yo(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(vr(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function ue(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function bo(r,e){return r<<e|r>>>32-e}function gt(r,e,t,n,i,o){return ue(bo(ue(ue(e,r),ue(n,o)),i),t)}function q(r,e,t,n,i,o,a){return gt(e&t|~e&n,r,e,i,o,a)}function x(r,e,t,n,i,o,a){return gt(e&n|t&~n,r,e,i,o,a)}function L(r,e,t,n,i,o,a){return gt(e^t^n,r,e,i,o,a)}function U(r,e,t,n,i,o,a){return gt(t^(e|~n),r,e,i,o,a)}var Co=gr("v3",48,go);function wo(r,e,t){r=r||{};var n=r.random||(r.rng||pr)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return _t(n)}function So(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function Tt(r,e){return r<<e|r>>>32-e}function ko(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var o=r.length/4+2,a=Math.ceil(o/16),u=new Array(a),d=0;d<a;++d){for(var s=new Uint32Array(16),c=0;c<16;++c)s[c]=r[d*64+c*4]<<24|r[d*64+c*4+1]<<16|r[d*64+c*4+2]<<8|r[d*64+c*4+3];u[d]=s}u[a-1][14]=(r.length-1)*8/Math.pow(2,32),u[a-1][14]=Math.floor(u[a-1][14]),u[a-1][15]=(r.length-1)*8&4294967295;for(var l=0;l<a;++l){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=u[l][f];for(var p=16;p<80;++p)h[p]=Tt(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var g=t[0],_=t[1],v=t[2],m=t[3],b=t[4],C=0;C<80;++C){var w=Math.floor(C/20),R=Tt(g,5)+So(w,_,v,m)+b+e[w]+h[C]>>>0;b=m,m=v,v=Tt(_,30)>>>0,_=g,g=R}t[0]=t[0]+g>>>0,t[1]=t[1]+_>>>0,t[2]=t[2]+v>>>0,t[3]=t[3]+m>>>0,t[4]=t[4]+b>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Eo=gr("v5",80,ko);const To="00000000-0000-0000-0000-000000000000";function Po(r){if(!pt(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const Ro=Object.freeze(Object.defineProperty({__proto__:null,NIL:To,parse:_r,stringify:_t,v1:ho,v3:Co,v4:wo,v5:Eo,validate:pt,version:Po},Symbol.toStringTag,{value:"Module"})),Io=Mt(Ro);var We={},cn;function Fo(){if(cn)return We;cn=1,Object.defineProperty(We,"__esModule",{value:!0}),We.providerNativeFactory=void 0;const r=oe(),e=Y(),t=dr();function n(i){return({url:a,connectEnabled:u=!0,automaticReconnect:d=!0,children:s,dependencies:c=[],accessTokenFactory:l,onError:h,onOpen:f,onClosed:p,onReconnect:g,onBeforeClose:_,...v})=>{const m=(0,e.useEvent)(h),b=(0,e.useEvent)(l),C=(0,r.useRef)(()=>{});function w(){if(!u)return;const E=(0,t.createConnection)(a,{accessTokenFactory:()=>b?.()||"",...v},d);E.onreconnecting(k=>m?.(k)),E.onreconnected(()=>g?.(E)),i.connection=E,i.reOn(),E.onclose(k=>{p?.(k)});async function D(){if(!(0,t.isConnectionConnecting)(E))try{await E.start(),f?.(E)}catch(k){console.log(k),m?.(k)}}D();const P=setInterval(D,6e3);C.current=async()=>{clearInterval(P),await _?.(E),E.stop()}}(0,r.useState)(()=>{w()});const R=(0,r.useRef)(!1);return(0,r.useEffect)(()=>(R.current&&w(),R.current=!0,()=>{C.current()}),[u,a,...c]),s}}return We.providerNativeFactory=n,We}var an;function Oo(){if(an)return pe;an=1;var r=pe&&pe.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(pe,"__esModule",{value:!0}),pe.createSignalRContext=void 0;const e=fr,t=r(ie()),n=Y(),i=co(),o=ao(),a=Io,u=Fo(),d="SIGNAL_R_INVOKE";function s(c){const l=[],h={connection:null,useSignalREffect:null,shareConnectionBetweenTab:c?.shareConnectionBetweenTab||!1,invoke(p,...g){var _;if(!h.shareConnectionBetweenTab)return(_=h.connection)===null||_===void 0?void 0:_.invoke(p,...g);const v=(0,a.v4)();return(0,n.sendWithHermes)(d,{methodName:p,args:g,callbackResponse:v},h.shareConnectionBetweenTab),new Promise(m=>{t.default.on(v,b=>{m(b)})})},Provider:null,on:p=>{var g;l.includes(p)||(g=h.connection)===null||g===void 0||g.on(p,(..._)=>{(0,n.sendWithHermes)(p,_,h.shareConnectionBetweenTab)}),l.push(p)},off:p=>{var g;l.includes(p)&&l.splice(l.indexOf(p),1),l.includes(p)||(g=h.connection)===null||g===void 0||g.off(p)},reOn:()=>{(0,n.removeDuplicates)(l).forEach(g=>{var _;(_=h.connection)===null||_===void 0||_.on(g,(...v)=>{(0,n.sendWithHermes)(g,v,h.shareConnectionBetweenTab)})})}};h.Provider=h.shareConnectionBetweenTab?(0,o.providerFactory)(h):(0,u.providerNativeFactory)(h);async function f(p){var g;const _=await((g=h.connection)===null||g===void 0?void 0:g.invoke(p.methodName,...p.args));(0,n.sendWithHermes)(p.callbackResponse,_,h.shareConnectionBetweenTab)}return h.useSignalREffect=(0,i.createUseSignalREffect)(h),t.default.on(d,p=>{var g;((g=h.connection)===null||g===void 0?void 0:g.state)===e.HubConnectionState.Connected&&f(p)}),h}return pe.createSignalRContext=s,pe}var ln;function Ao(){return ln||(ln=1,function(r){var e=de&&de.__createBinding||(Object.create?function(n,i,o,a){a===void 0&&(a=o);var u=Object.getOwnPropertyDescriptor(i,o);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,a,u)}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]}),t=de&&de.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(r,"__esModule",{value:!0}),t(Oo(),r)}(de)),de}var me={},ye={},be={},un;function Do(){if(un)return be;un=1;var r=be&&be.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(be,"__esModule",{value:!0}),be.createUseSocketEffect=void 0;const e=r(ie()),t=oe(),n=Y();function i(o){return(u,d)=>{const s=(0,n.useEvent)(d);(0,t.useEffect)(()=>{var c;function l(h){s(...Array.isArray(h)?h:[h])}return(c=o.on)===null||c===void 0||c.call(o,u),e.default.on(u,l),()=>{var h;(h=o.off)===null||h===void 0||h.call(o,u),e.default.off(u,l)}},[])}}return be.createUseSocketEffect=i,be}var Ce={},we={},Qe={exports:{}},Be={},Pt={},Z={},Ve={},ee={},Se={},se={},Rt={},Me={},ce={},hn;function Lt(){if(hn)return ce;hn=1,Object.defineProperty(ce,"__esModule",{value:!0}),ce.ERROR_PACKET=ce.PACKET_TYPES_REVERSE=ce.PACKET_TYPES=void 0;const r=Object.create(null);ce.PACKET_TYPES=r,r.open="0",r.close="1",r.ping="2",r.pong="3",r.message="4",r.upgrade="5",r.noop="6";const e=Object.create(null);ce.PACKET_TYPES_REVERSE=e,Object.keys(r).forEach(n=>{e[r[n]]=n});const t={type:"error",data:"parser error"};return ce.ERROR_PACKET=t,ce}var fn;function No(){if(fn)return Me;fn=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.encodePacket=void 0,Me.encodePacketToBinary=d;const r=Lt(),e=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",t=typeof ArrayBuffer=="function",n=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,i=({type:s,data:c},l,h)=>e&&c instanceof Blob?l?h(c):o(c,h):t&&(c instanceof ArrayBuffer||n(c))?l?h(c):o(new Blob([c]),h):h(r.PACKET_TYPES[s]+(c||""));Me.encodePacket=i;const o=(s,c)=>{const l=new FileReader;return l.onload=function(){const h=l.result.split(",")[1];c("b"+(h||""))},l.readAsDataURL(s)};function a(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let u;function d(s,c){if(e&&s.data instanceof Blob)return s.data.arrayBuffer().then(a).then(c);if(t&&(s.data instanceof ArrayBuffer||n(s.data)))return c(a(s.data));i(s,!1,l=>{u||(u=new TextEncoder),c(u.encode(l))})}return Me}var Ke={},ke={},dn;function jo(){if(dn)return ke;dn=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.decode=ke.encode=void 0;const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<r.length;i++)e[r.charCodeAt(i)]=i;const t=i=>{let o=new Uint8Array(i),a,u=o.length,d="";for(a=0;a<u;a+=3)d+=r[o[a]>>2],d+=r[(o[a]&3)<<4|o[a+1]>>4],d+=r[(o[a+1]&15)<<2|o[a+2]>>6],d+=r[o[a+2]&63];return u%3===2?d=d.substring(0,d.length-1)+"=":u%3===1&&(d=d.substring(0,d.length-2)+"=="),d};ke.encode=t;const n=i=>{let o=i.length*.75,a=i.length,u,d=0,s,c,l,h;i[i.length-1]==="="&&(o--,i[i.length-2]==="="&&o--);const f=new ArrayBuffer(o),p=new Uint8Array(f);for(u=0;u<a;u+=4)s=e[i.charCodeAt(u)],c=e[i.charCodeAt(u+1)],l=e[i.charCodeAt(u+2)],h=e[i.charCodeAt(u+3)],p[d++]=s<<2|c>>4,p[d++]=(c&15)<<4|l>>2,p[d++]=(l&3)<<6|h&63;return f};return ke.decode=n,ke}var pn;function Bo(){if(pn)return Ke;pn=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.decodePacket=void 0;const r=Lt(),e=jo(),t=typeof ArrayBuffer=="function",n=(a,u)=>{if(typeof a!="string")return{type:"message",data:o(a,u)};const d=a.charAt(0);return d==="b"?{type:"message",data:i(a.substring(1),u)}:r.PACKET_TYPES_REVERSE[d]?a.length>1?{type:r.PACKET_TYPES_REVERSE[d],data:a.substring(1)}:{type:r.PACKET_TYPES_REVERSE[d]}:r.ERROR_PACKET};Ke.decodePacket=n;const i=(a,u)=>{if(t){const d=(0,e.decode)(a);return o(d,u)}else return{base64:!0,data:a}},o=(a,u)=>{switch(u){case"blob":return a instanceof Blob?a:new Blob([a]);case"arraybuffer":default:return a instanceof ArrayBuffer?a:a.buffer}};return Ke}var _n;function tt(){return _n||(_n=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodePayload=r.decodePacket=r.encodePayload=r.encodePacket=r.protocol=void 0,r.createPacketEncoderStream=u,r.createPacketDecoderStream=l;const e=No();Object.defineProperty(r,"encodePacket",{enumerable:!0,get:function(){return e.encodePacket}});const t=Bo();Object.defineProperty(r,"decodePacket",{enumerable:!0,get:function(){return t.decodePacket}});const n=Lt(),i="",o=(h,f)=>{const p=h.length,g=new Array(p);let _=0;h.forEach((v,m)=>{(0,e.encodePacket)(v,!1,b=>{g[m]=b,++_===p&&f(g.join(i))})})};r.encodePayload=o;const a=(h,f)=>{const p=h.split(i),g=[];for(let _=0;_<p.length;_++){const v=(0,t.decodePacket)(p[_],f);if(g.push(v),v.type==="error")break}return g};r.decodePayload=a;function u(){return new TransformStream({transform(h,f){(0,e.encodePacketToBinary)(h,p=>{const g=p.length;let _;if(g<126)_=new Uint8Array(1),new DataView(_.buffer).setUint8(0,g);else if(g<65536){_=new Uint8Array(3);const v=new DataView(_.buffer);v.setUint8(0,126),v.setUint16(1,g)}else{_=new Uint8Array(9);const v=new DataView(_.buffer);v.setUint8(0,127),v.setBigUint64(1,BigInt(g))}h.data&&typeof h.data!="string"&&(_[0]|=128),f.enqueue(_),f.enqueue(p)})}})}let d;function s(h){return h.reduce((f,p)=>f+p.length,0)}function c(h,f){if(h[0].length===f)return h.shift();const p=new Uint8Array(f);let g=0;for(let _=0;_<f;_++)p[_]=h[0][g++],g===h[0].length&&(h.shift(),g=0);return h.length&&g<h[0].length&&(h[0]=h[0].slice(g)),p}function l(h,f){d||(d=new TextDecoder);const p=[];let g=0,_=-1,v=!1;return new TransformStream({transform(m,b){for(p.push(m);;){if(g===0){if(s(p)<1)break;const C=c(p,1);v=(C[0]&128)===128,_=C[0]&127,_<126?g=3:_===126?g=1:g=2}else if(g===1){if(s(p)<2)break;const C=c(p,2);_=new DataView(C.buffer,C.byteOffset,C.length).getUint16(0),g=3}else if(g===2){if(s(p)<8)break;const C=c(p,8),w=new DataView(C.buffer,C.byteOffset,C.length),R=w.getUint32(0);if(R>Math.pow(2,21)-1){b.enqueue(n.ERROR_PACKET);break}_=R*Math.pow(2,32)+w.getUint32(4),g=3}else{if(s(p)<_)break;const C=c(p,_);b.enqueue((0,t.decodePacket)(v?C:d.decode(C),f)),g=0}if(_===0||_>h){b.enqueue(n.ERROR_PACKET);break}}}})}r.protocol=4}(Rt)),Rt}function H(r){if(r)return Mo(r)}function Mo(r){for(var e in H.prototype)r[e]=H.prototype[e];return r}H.prototype.on=H.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};H.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};H.prototype.off=H.prototype.removeListener=H.prototype.removeAllListeners=H.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,i=0;i<t.length;i++)if(n=t[i],n===e||n.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+r],this};H.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,i=t.length;n<i;++n)t[n].apply(this,e)}return this};H.prototype.emitReserved=H.prototype.emit;H.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};H.prototype.hasListeners=function(r){return!!this.listeners(r).length};const $o=Object.freeze(Object.defineProperty({__proto__:null,Emitter:H},Symbol.toStringTag,{value:"Module"})),xe=Mt($o);var Ee={},re={},gn;function Le(){if(gn)return re;gn=1,Object.defineProperty(re,"__esModule",{value:!0}),re.defaultBinaryType=re.globalThisShim=re.nextTick=void 0,re.createCookieJar=r,re.nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),re.globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),re.defaultBinaryType="arraybuffer";function r(){}return re}var vn;function Ue(){if(vn)return Ee;vn=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.pick=e,Ee.installTimerFunctions=i,Ee.byteLength=a,Ee.randomString=d;const r=Le();function e(s,...c){return c.reduce((l,h)=>(s.hasOwnProperty(h)&&(l[h]=s[h]),l),{})}const t=r.globalThisShim.setTimeout,n=r.globalThisShim.clearTimeout;function i(s,c){c.useNativeTimers?(s.setTimeoutFn=t.bind(r.globalThisShim),s.clearTimeoutFn=n.bind(r.globalThisShim)):(s.setTimeoutFn=r.globalThisShim.setTimeout.bind(r.globalThisShim),s.clearTimeoutFn=r.globalThisShim.clearTimeout.bind(r.globalThisShim))}const o=1.33;function a(s){return typeof s=="string"?u(s):Math.ceil((s.byteLength||s.size)*o)}function u(s){let c=0,l=0;for(let h=0,f=s.length;h<f;h++)c=s.charCodeAt(h),c<128?l+=1:c<2048?l+=2:c<55296||c>=57344?l+=3:(h++,l+=4);return l}function d(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}return Ee}var ze={},mn;function mr(){if(mn)return ze;mn=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.encode=r,ze.decode=e;function r(t){let n="";for(let i in t)t.hasOwnProperty(i)&&(n.length&&(n+="&"),n+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return n}function e(t){let n={},i=t.split("&");for(let o=0,a=i.length;o<a;o++){let u=i[o].split("=");n[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return n}return ze}var it={exports:{}},It,yn;function Ut(){if(yn)return It;yn=1;var r=1e3,e=r*60,t=e*60,n=t*24,i=n*7,o=n*365.25;It=function(c,l){l=l||{};var h=typeof c;if(h==="string"&&c.length>0)return a(c);if(h==="number"&&isFinite(c))return l.long?d(c):u(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function a(c){if(c=String(c),!(c.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(l){var h=parseFloat(l[1]),f=(l[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return h*o;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*t;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function u(c){var l=Math.abs(c);return l>=n?Math.round(c/n)+"d":l>=t?Math.round(c/t)+"h":l>=e?Math.round(c/e)+"m":l>=r?Math.round(c/r)+"s":c+"ms"}function d(c){var l=Math.abs(c);return l>=n?s(c,l,n,"day"):l>=t?s(c,l,t,"hour"):l>=e?s(c,l,e,"minute"):l>=r?s(c,l,r,"second"):c+" ms"}function s(c,l,h,f){var p=l>=h*1.5;return Math.round(c/h)+" "+f+(p?"s":"")}return It}var Ft,bn;function qo(){if(bn)return Ft;bn=1;function r(e){n.debug=n,n.default=n,n.coerce=s,n.disable=a,n.enable=o,n.enabled=u,n.humanize=Ut(),n.destroy=c,Object.keys(e).forEach(l=>{n[l]=e[l]}),n.names=[],n.skips=[],n.formatters={};function t(l){let h=0;for(let f=0;f<l.length;f++)h=(h<<5)-h+l.charCodeAt(f),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=t;function n(l){let h,f=null,p,g;function _(...v){if(!_.enabled)return;const m=_,b=Number(new Date),C=b-(h||b);m.diff=C,m.prev=h,m.curr=b,h=b,v[0]=n.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let w=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(E,D)=>{if(E==="%%")return"%";w++;const P=n.formatters[D];if(typeof P=="function"){const k=v[w];E=P.call(m,k),v.splice(w,1),w--}return E}),n.formatArgs.call(m,v),(m.log||n.log).apply(m,v)}return _.namespace=l,_.useColors=n.useColors(),_.color=n.selectColor(l),_.extend=i,_.destroy=n.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==n.namespaces&&(p=n.namespaces,g=n.enabled(l)),g),set:v=>{f=v}}),typeof n.init=="function"&&n.init(_),_}function i(l,h){const f=n(this.namespace+(typeof h>"u"?":":h)+l);return f.log=this.log,f}function o(l){n.save(l),n.namespaces=l,n.names=[],n.skips=[];let h;const f=(typeof l=="string"?l:"").split(/[\s,]+/),p=f.length;for(h=0;h<p;h++)f[h]&&(l=f[h].replace(/\*/g,".*?"),l[0]==="-"?n.skips.push(new RegExp("^"+l.slice(1)+"$")):n.names.push(new RegExp("^"+l+"$")))}function a(){const l=[...n.names.map(d),...n.skips.map(d).map(h=>"-"+h)].join(",");return n.enable(""),l}function u(l){if(l[l.length-1]==="*")return!0;let h,f;for(h=0,f=n.skips.length;h<f;h++)if(n.skips[h].test(l))return!1;for(h=0,f=n.names.length;h<f;h++)if(n.names[h].test(l))return!0;return!1}function d(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function s(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return Ft=r,Ft}var Cn;function He(){return Cn||(Cn=1,function(r,e){var t={};e.formatArgs=i,e.save=o,e.load=a,e.useColors=n,e.storage=u(),e.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let s;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(s=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(s[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;s.splice(1,0,c,"color: inherit");let l=0,h=0;s[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(l++,f==="%c"&&(h=l))}),s.splice(h,0,c)}e.log=console.debug||console.log||(()=>{});function o(s){try{s?e.storage.setItem("debug",s):e.storage.removeItem("debug")}catch{}}function a(){let s;try{s=e.storage.getItem("debug")}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=t.DEBUG),s}function u(){try{return localStorage}catch{}}r.exports=qo()(e);const{formatters:d}=r.exports;d.j=function(s){try{return JSON.stringify(s)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}(it,it.exports)),it.exports}var wn;function vt(){if(wn)return se;wn=1;var r=se&&se.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(se,"__esModule",{value:!0}),se.Transport=se.TransportError=void 0;const e=tt(),t=xe,n=Ue(),i=mr(),a=(0,r(He()).default)("engine.io-client:transport");class u extends Error{constructor(c,l,h){super(c),this.description=l,this.context=h,this.type="TransportError"}}se.TransportError=u;class d extends t.Emitter{constructor(c){super(),this.writable=!1,(0,n.installTimerFunctions)(this,c),this.opts=c,this.query=c.query,this.socket=c.socket,this.supportsBinary=!c.forceBase64}onError(c,l,h){return super.emitReserved("error",new u(c,l,h)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(c){this.readyState==="open"?this.write(c):a("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(c){const l=(0,e.decodePacket)(c,this.socket.binaryType);this.onPacket(l)}onPacket(c){super.emitReserved("packet",c)}onClose(c){this.readyState="closed",super.emitReserved("close",c)}pause(c){}createUri(c,l={}){return c+"://"+this._hostname()+this._port()+this.opts.path+this._query(l)}_hostname(){const c=this.opts.hostname;return c.indexOf(":")===-1?c:"["+c+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(c){const l=(0,i.encode)(c);return l.length?"?"+l:""}}return se.Transport=d,se}var Sn;function yr(){if(Sn)return Se;Sn=1;var r=Se&&Se.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Se,"__esModule",{value:!0}),Se.Polling=void 0;const e=vt(),t=Ue(),n=tt(),o=(0,r(He()).default)("engine.io-client:polling");class a extends e.Transport{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(d){this.readyState="pausing";const s=()=>{o("paused"),this.readyState="paused",d()};if(this._polling||!this.writable){let c=0;this._polling&&(o("we are currently polling - waiting to pause"),c++,this.once("pollComplete",function(){o("pre-pause polling complete"),--c||s()})),this.writable||(o("we are currently writing - waiting to pause"),c++,this.once("drain",function(){o("pre-pause writing complete"),--c||s()}))}else s()}_poll(){o("polling"),this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(d){o("polling got data %s",d);const s=c=>{if(this.readyState==="opening"&&c.type==="open"&&this.onOpen(),c.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(c)};(0,n.decodePayload)(d,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this._poll():o('ignoring poll - transport state "%s"',this.readyState))}doClose(){const d=()=>{o("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(o("transport open - closing"),d()):(o("transport not open - deferring close"),this.once("open",d))}write(d){this.writable=!1,(0,n.encodePayload)(d,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const d=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=(0,t.randomString)()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(d,s)}}return Se.Polling=a,Se}var Xe={},kn;function xo(){if(kn)return Xe;kn=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.hasCORS=void 0;let r=!1;try{r=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}return Xe.hasCORS=r,Xe}var En;function jt(){if(En)return ee;En=1;var r=ee&&ee.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(ee,"__esModule",{value:!0}),ee.XHR=ee.Request=ee.BaseXHR=void 0;const e=yr(),t=xe,n=Ue(),i=Le(),o=xo(),u=(0,r(He()).default)("engine.io-client:polling");function d(){}class s extends e.Polling{constructor(_){if(super(_),typeof location<"u"){const v=location.protocol==="https:";let m=location.port;m||(m=v?"443":"80"),this.xd=typeof location<"u"&&_.hostname!==location.hostname||m!==_.port}}doWrite(_,v){const m=this.request({method:"POST",data:_});m.on("success",v),m.on("error",(b,C)=>{this.onError("xhr post error",b,C)})}doPoll(){u("xhr poll");const _=this.request();_.on("data",this.onData.bind(this)),_.on("error",(v,m)=>{this.onError("xhr poll error",v,m)}),this.pollXhr=_}}ee.BaseXHR=s;class c extends t.Emitter{constructor(_,v,m){super(),this.createRequest=_,(0,n.installTimerFunctions)(this,m),this._opts=m,this._method=m.method||"GET",this._uri=v,this._data=m.data!==void 0?m.data:null,this._create()}_create(){var _;const v=(0,n.pick)(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");v.xdomain=!!this._opts.xd;const m=this._xhr=this.createRequest(v);try{u("xhr open %s: %s",this._method,this._uri),m.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){m.setDisableHeaderCheck&&m.setDisableHeaderCheck(!0);for(let b in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(b)&&m.setRequestHeader(b,this._opts.extraHeaders[b])}}catch{}if(this._method==="POST")try{m.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{m.setRequestHeader("Accept","*/*")}catch{}(_=this._opts.cookieJar)===null||_===void 0||_.addCookies(m),"withCredentials"in m&&(m.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(m.timeout=this._opts.requestTimeout),m.onreadystatechange=()=>{var b;m.readyState===3&&((b=this._opts.cookieJar)===null||b===void 0||b.parseCookies(m.getResponseHeader("set-cookie"))),m.readyState===4&&(m.status===200||m.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof m.status=="number"?m.status:0)},0))},u("xhr data %s",this._data),m.send(this._data)}catch(b){this.setTimeoutFn(()=>{this._onError(b)},0);return}typeof document<"u"&&(this._index=c.requestsCount++,c.requests[this._index]=this)}_onError(_){this.emitReserved("error",_,this._xhr),this._cleanup(!0)}_cleanup(_){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=d,_)try{this._xhr.abort()}catch{}typeof document<"u"&&delete c.requests[this._index],this._xhr=null}}_onLoad(){const _=this._xhr.responseText;_!==null&&(this.emitReserved("data",_),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(ee.Request=c,c.requestsCount=0,c.requests={},typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",l);else if(typeof addEventListener=="function"){const g="onpagehide"in i.globalThisShim?"pagehide":"unload";addEventListener(g,l,!1)}}function l(){for(let g in c.requests)c.requests.hasOwnProperty(g)&&c.requests[g].abort()}const h=function(){const g=p({xdomain:!1});return g&&g.responseType!==null}();class f extends s{constructor(_){super(_);const v=_&&_.forceBase64;this.supportsBinary=h&&!v}request(_={}){return Object.assign(_,{xd:this.xd},this.opts),new c(p,this.uri(),_)}}ee.XHR=f;function p(g){const _=g.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!_||o.hasCORS))return new XMLHttpRequest}catch{}if(!_)try{return new i.globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}return ee}var ae={},Tn;function Bt(){if(Tn)return ae;Tn=1;var r=ae&&ae.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ae,"__esModule",{value:!0}),ae.WS=ae.BaseWS=void 0;const e=vt(),t=Ue(),n=tt(),i=Le(),a=(0,r(He()).default)("engine.io-client:websocket"),u=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class d extends e.Transport{get name(){return"websocket"}doOpen(){const h=this.uri(),f=this.opts.protocols,p=u?{}:(0,t.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(p.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(h,f,p)}catch(g){return this.emitReserved("error",g)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=h=>this.onClose({description:"websocket connection closed",context:h}),this.ws.onmessage=h=>this.onData(h.data),this.ws.onerror=h=>this.onError("websocket error",h)}write(h){this.writable=!1;for(let f=0;f<h.length;f++){const p=h[f],g=f===h.length-1;(0,n.encodePacket)(p,this.supportsBinary,_=>{try{this.doWrite(p,_)}catch{a("websocket closed before onclose event")}g&&(0,i.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const h=this.opts.secure?"wss":"ws",f=this.query||{};return this.opts.timestampRequests&&(f[this.opts.timestampParam]=(0,t.randomString)()),this.supportsBinary||(f.b64=1),this.createUri(h,f)}}ae.BaseWS=d;const s=i.globalThisShim.WebSocket||i.globalThisShim.MozWebSocket;class c extends d{createSocket(h,f,p){return u?new s(h,f,p):f?new s(h,f):new s(h)}doWrite(h,f){this.ws.send(f)}}return ae.WS=c,ae}var Te={},Pn;function br(){if(Pn)return Te;Pn=1;var r=Te&&Te.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Te,"__esModule",{value:!0}),Te.WT=void 0;const e=vt(),t=Le(),n=tt(),o=(0,r(He()).default)("engine.io-client:webtransport");class a extends e.Transport{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(d){return this.emitReserved("error",d)}this._transport.closed.then(()=>{o("transport closed gracefully"),this.onClose()}).catch(d=>{o("transport closed due to %s",d),this.onError("webtransport error",d)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(d=>{const s=(0,n.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,this.socket.binaryType),c=d.readable.pipeThrough(s).getReader(),l=(0,n.createPacketEncoderStream)();l.readable.pipeTo(d.writable),this._writer=l.writable.getWriter();const h=()=>{c.read().then(({done:p,value:g})=>{if(p){o("session is closed");return}o("received chunk: %o",g),this.onPacket(g),h()}).catch(p=>{o("an error occurred while reading: %s",p)})};h();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(d){this.writable=!1;for(let s=0;s<d.length;s++){const c=d[s],l=s===d.length-1;this._writer.write(c).then(()=>{l&&(0,t.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var d;(d=this._transport)===null||d===void 0||d.close()}}return Te.WT=a,Te}var Rn;function Cr(){if(Rn)return Ve;Rn=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.transports=void 0;const r=jt(),e=Bt(),t=br();return Ve.transports={websocket:e.WS,webtransport:t.WT,polling:r.XHR},Ve}var st={},In;function wr(){if(In)return st;In=1,Object.defineProperty(st,"__esModule",{value:!0}),st.parse=t;const r=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function t(o){if(o.length>8e3)throw"URI too long";const a=o,u=o.indexOf("["),d=o.indexOf("]");u!=-1&&d!=-1&&(o=o.substring(0,u)+o.substring(u,d).replace(/:/g,";")+o.substring(d,o.length));let s=r.exec(o||""),c={},l=14;for(;l--;)c[e[l]]=s[l]||"";return u!=-1&&d!=-1&&(c.source=a,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=n(c,c.path),c.queryKey=i(c,c.query),c}function n(o,a){const u=/\/{2,9}/g,d=a.replace(u,"/").split("/");return(a.slice(0,1)=="/"||a.length===0)&&d.splice(0,1),a.slice(-1)=="/"&&d.splice(d.length-1,1),d}function i(o,a){const u={};return a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(d,s,c){s&&(u[s]=c)}),u}return st}var Fn;function On(){if(Fn)return Z;Fn=1;var r=Z&&Z.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Z,"__esModule",{value:!0}),Z.Socket=Z.SocketWithUpgrade=Z.SocketWithoutUpgrade=void 0;const e=Cr(),t=Ue(),n=mr(),i=wr(),o=xe,a=tt(),u=Le(),s=(0,r(He()).default)("engine.io-client:socket"),c=typeof addEventListener=="function"&&typeof removeEventListener=="function",l=[];c&&addEventListener("offline",()=>{s("closing %d connection(s) because the network was lost",l.length),l.forEach(g=>g())},!1);class h extends o.Emitter{constructor(_,v){if(super(),this.binaryType=u.defaultBinaryType,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,_&&typeof _=="object"&&(v=_,_=null),_){const m=(0,i.parse)(_);v.hostname=m.host,v.secure=m.protocol==="https"||m.protocol==="wss",v.port=m.port,m.query&&(v.query=m.query)}else v.host&&(v.hostname=(0,i.parse)(v.host).host);(0,t.installTimerFunctions)(this,v),this.secure=v.secure!=null?v.secure:typeof location<"u"&&location.protocol==="https:",v.hostname&&!v.port&&(v.port=this.secure?"443":"80"),this.hostname=v.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=v.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},v.transports.forEach(m=>{const b=m.prototype.name;this.transports.push(b),this._transportsByName[b]=m}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},v),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=(0,n.decode)(this.opts.query)),c&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(s("adding listener for the 'offline' event"),this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},l.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=(0,u.createCookieJar)()),this._open()}createTransport(_){s('creating transport "%s"',_);const v=Object.assign({},this.opts.query);v.EIO=a.protocol,v.transport=_,this.id&&(v.sid=this.id);const m=Object.assign({},this.opts,{query:v,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[_]);return s("options: %j",m),new this._transportsByName[_](m)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const _=this.opts.rememberUpgrade&&h.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const v=this.createTransport(_);v.open(),this.setTransport(v)}setTransport(_){s("setting transport %s",_.name),this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=_,_.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",v=>this._onClose("transport close",v))}onOpen(){s("socket open"),this.readyState="open",h.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(_){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(s('socket receive: type "%s", data "%s"',_.type,_.data),this.emitReserved("packet",_),this.emitReserved("heartbeat"),_.type){case"open":this.onHandshake(JSON.parse(_.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const v=new Error("server error");v.code=_.data,this._onError(v);break;case"message":this.emitReserved("data",_.data),this.emitReserved("message",_.data);break}else s('packet received with socket readyState "%s"',this.readyState)}onHandshake(_){this.emitReserved("handshake",_),this.id=_.sid,this.transport.query.sid=_.sid,this._pingInterval=_.pingInterval,this._pingTimeout=_.pingTimeout,this._maxPayload=_.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const _=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+_,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},_),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const _=this._getWritablePackets();s("flushing %d packets in socket",_.length),this.transport.send(_),this._prevBufferLen=_.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let v=1;for(let m=0;m<this.writeBuffer.length;m++){const b=this.writeBuffer[m].data;if(b&&(v+=(0,t.byteLength)(b)),m>0&&v>this._maxPayload)return s("only send %d out of %d packets",m,this.writeBuffer.length),this.writeBuffer.slice(0,m);v+=2}return s("payload size is %d (max: %d)",v,this._maxPayload),this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const _=Date.now()>this._pingTimeoutTime;return _&&(s("throttled timer detected, scheduling connection close"),this._pingTimeoutTime=0,(0,u.nextTick)(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),_}write(_,v,m){return this._sendPacket("message",_,v,m),this}send(_,v,m){return this._sendPacket("message",_,v,m),this}_sendPacket(_,v,m,b){if(typeof v=="function"&&(b=v,v=void 0),typeof m=="function"&&(b=m,m=null),this.readyState==="closing"||this.readyState==="closed")return;m=m||{},m.compress=m.compress!==!1;const C={type:_,data:v,options:m};this.emitReserved("packetCreate",C),this.writeBuffer.push(C),b&&this.once("flush",b),this.flush()}close(){const _=()=>{this._onClose("forced close"),s("socket closing - telling transport to close"),this.transport.close()},v=()=>{this.off("upgrade",v),this.off("upgradeError",v),_()},m=()=>{this.once("upgrade",v),this.once("upgradeError",v)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?m():_()}):this.upgrading?m():_()),this}_onError(_){if(s("socket error %j",_),h.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return s("trying next transport"),this.transports.shift(),this._open();this.emitReserved("error",_),this._onClose("transport error",_)}_onClose(_,v){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(s('socket close with reason: "%s"',_),this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),c&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const m=l.indexOf(this._offlineEventListener);m!==-1&&(s("removing listener for the 'offline' event"),l.splice(m,1))}this.readyState="closed",this.id=null,this.emitReserved("close",_,v),this.writeBuffer=[],this._prevBufferLen=0}}}Z.SocketWithoutUpgrade=h,h.protocol=a.protocol;class f extends h{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade){s("starting upgrade probes");for(let _=0;_<this._upgrades.length;_++)this._probe(this._upgrades[_])}}_probe(_){s('probing transport "%s"',_);let v=this.createTransport(_),m=!1;h.priorWebsocketSuccess=!1;const b=()=>{m||(s('probe transport "%s" opened',_),v.send([{type:"ping",data:"probe"}]),v.once("packet",k=>{if(!m)if(k.type==="pong"&&k.data==="probe"){if(s('probe transport "%s" pong',_),this.upgrading=!0,this.emitReserved("upgrading",v),!v)return;h.priorWebsocketSuccess=v.name==="websocket",s('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{m||this.readyState!=="closed"&&(s("changing transport and sending upgrade packet"),P(),this.setTransport(v),v.send([{type:"upgrade"}]),this.emitReserved("upgrade",v),v=null,this.upgrading=!1,this.flush())})}else{s('probe transport "%s" failed',_);const F=new Error("probe error");F.transport=v.name,this.emitReserved("upgradeError",F)}}))};function C(){m||(m=!0,P(),v.close(),v=null)}const w=k=>{const F=new Error("probe error: "+k);F.transport=v.name,C(),s('probe transport "%s" failed because of error: %s',_,k),this.emitReserved("upgradeError",F)};function R(){w("transport closed")}function E(){w("socket closed")}function D(k){v&&k.name!==v.name&&(s('"%s" works - aborting "%s"',k.name,v.name),C())}const P=()=>{v.removeListener("open",b),v.removeListener("error",w),v.removeListener("close",R),this.off("close",E),this.off("upgrading",D)};v.once("open",b),v.once("error",w),v.once("close",R),this.once("close",E),this.once("upgrading",D),this._upgrades.indexOf("webtransport")!==-1&&_!=="webtransport"?this.setTimeoutFn(()=>{m||v.open()},200):v.open()}onHandshake(_){this._upgrades=this._filterUpgrades(_.upgrades),super.onHandshake(_)}_filterUpgrades(_){const v=[];for(let m=0;m<_.length;m++)~this.transports.indexOf(_[m])&&v.push(_[m]);return v}}Z.SocketWithUpgrade=f;class p extends f{constructor(_,v={}){const m=typeof _=="object"?_:v;(!m.transports||m.transports&&typeof m.transports[0]=="string")&&(m.transports=(m.transports||["polling","websocket","webtransport"]).map(b=>e.transports[b]).filter(b=>!!b)),super(_,m)}}return Z.Socket=p,Z}var Je={},An;function Lo(){if(An)return Je;An=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.Fetch=void 0;const r=yr();class e extends r.Polling{doPoll(){this._fetch().then(n=>{if(!n.ok)return this.onError("fetch read error",n.status,n);n.text().then(i=>this.onData(i))}).catch(n=>{this.onError("fetch read error",n)})}doWrite(n,i){this._fetch(n).then(o=>{if(!o.ok)return this.onError("fetch write error",o.status,o);i()}).catch(o=>{this.onError("fetch write error",o)})}_fetch(n){var i;const o=n!==void 0,a=new Headers(this.opts.extraHeaders);return o&&a.set("content-type","text/plain;charset=UTF-8"),(i=this.socket._cookieJar)===null||i===void 0||i.appendCookies(a),fetch(this.uri(),{method:o?"POST":"GET",body:o?n:null,headers:a,credentials:this.opts.withCredentials?"include":"omit"}).then(u=>{var d;return(d=this.socket._cookieJar)===null||d===void 0||d.parseCookies(u.headers.getSetCookie()),u})}}return Je.Fetch=e,Je}var Dn;function Ht(){return Dn||(Dn=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebTransport=r.WebSocket=r.NodeWebSocket=r.XHR=r.NodeXHR=r.Fetch=r.nextTick=r.parse=r.installTimerFunctions=r.transports=r.TransportError=r.Transport=r.protocol=r.SocketWithUpgrade=r.SocketWithoutUpgrade=r.Socket=void 0;const e=On();Object.defineProperty(r,"Socket",{enumerable:!0,get:function(){return e.Socket}});var t=On();Object.defineProperty(r,"SocketWithoutUpgrade",{enumerable:!0,get:function(){return t.SocketWithoutUpgrade}}),Object.defineProperty(r,"SocketWithUpgrade",{enumerable:!0,get:function(){return t.SocketWithUpgrade}}),r.protocol=e.Socket.protocol;var n=vt();Object.defineProperty(r,"Transport",{enumerable:!0,get:function(){return n.Transport}}),Object.defineProperty(r,"TransportError",{enumerable:!0,get:function(){return n.TransportError}});var i=Cr();Object.defineProperty(r,"transports",{enumerable:!0,get:function(){return i.transports}});var o=Ue();Object.defineProperty(r,"installTimerFunctions",{enumerable:!0,get:function(){return o.installTimerFunctions}});var a=wr();Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return a.parse}});var u=Le();Object.defineProperty(r,"nextTick",{enumerable:!0,get:function(){return u.nextTick}});var d=Lo();Object.defineProperty(r,"Fetch",{enumerable:!0,get:function(){return d.Fetch}});var s=jt();Object.defineProperty(r,"NodeXHR",{enumerable:!0,get:function(){return s.XHR}});var c=jt();Object.defineProperty(r,"XHR",{enumerable:!0,get:function(){return c.XHR}});var l=Bt();Object.defineProperty(r,"NodeWebSocket",{enumerable:!0,get:function(){return l.WS}});var h=Bt();Object.defineProperty(r,"WebSocket",{enumerable:!0,get:function(){return h.WS}});var f=br();Object.defineProperty(r,"WebTransport",{enumerable:!0,get:function(){return f.WT}})}(Pt)),Pt}var ct={exports:{}},Ot,Nn;function Uo(){if(Nn)return Ot;Nn=1;function r(e){n.debug=n,n.default=n,n.coerce=s,n.disable=a,n.enable=o,n.enabled=u,n.humanize=Ut(),n.destroy=c,Object.keys(e).forEach(l=>{n[l]=e[l]}),n.names=[],n.skips=[],n.formatters={};function t(l){let h=0;for(let f=0;f<l.length;f++)h=(h<<5)-h+l.charCodeAt(f),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=t;function n(l){let h,f=null,p,g;function _(...v){if(!_.enabled)return;const m=_,b=Number(new Date),C=b-(h||b);m.diff=C,m.prev=h,m.curr=b,h=b,v[0]=n.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let w=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(E,D)=>{if(E==="%%")return"%";w++;const P=n.formatters[D];if(typeof P=="function"){const k=v[w];E=P.call(m,k),v.splice(w,1),w--}return E}),n.formatArgs.call(m,v),(m.log||n.log).apply(m,v)}return _.namespace=l,_.useColors=n.useColors(),_.color=n.selectColor(l),_.extend=i,_.destroy=n.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==n.namespaces&&(p=n.namespaces,g=n.enabled(l)),g),set:v=>{f=v}}),typeof n.init=="function"&&n.init(_),_}function i(l,h){const f=n(this.namespace+(typeof h>"u"?":":h)+l);return f.log=this.log,f}function o(l){n.save(l),n.namespaces=l,n.names=[],n.skips=[];let h;const f=(typeof l=="string"?l:"").split(/[\s,]+/),p=f.length;for(h=0;h<p;h++)f[h]&&(l=f[h].replace(/\*/g,".*?"),l[0]==="-"?n.skips.push(new RegExp("^"+l.slice(1)+"$")):n.names.push(new RegExp("^"+l+"$")))}function a(){const l=[...n.names.map(d),...n.skips.map(d).map(h=>"-"+h)].join(",");return n.enable(""),l}function u(l){if(l[l.length-1]==="*")return!0;let h,f;for(h=0,f=n.skips.length;h<f;h++)if(n.skips[h].test(l))return!1;for(h=0,f=n.names.length;h<f;h++)if(n.names[h].test(l))return!0;return!1}function d(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function s(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return Ot=r,Ot}var jn;function mt(){return jn||(jn=1,function(r,e){var t={};e.formatArgs=i,e.save=o,e.load=a,e.useColors=n,e.storage=u(),e.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let s;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(s=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(s[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;s.splice(1,0,c,"color: inherit");let l=0,h=0;s[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(l++,f==="%c"&&(h=l))}),s.splice(h,0,c)}e.log=console.debug||console.log||(()=>{});function o(s){try{s?e.storage.setItem("debug",s):e.storage.removeItem("debug")}catch{}}function a(){let s;try{s=e.storage.getItem("debug")}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=t.DEBUG),s}function u(){try{return localStorage}catch{}}r.exports=Uo()(e);const{formatters:d}=r.exports;d.j=function(s){try{return JSON.stringify(s)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}(ct,ct.exports)),ct.exports}var Bn;function Ho(){if(Bn)return Be;Bn=1;var r=Be&&Be.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Be,"__esModule",{value:!0}),Be.url=i;const e=Ht(),n=(0,r(mt()).default)("socket.io-client:url");function i(o,a="",u){let d=o;u=u||typeof location<"u"&&location,o==null&&(o=u.protocol+"//"+u.host),typeof o=="string"&&(o.charAt(0)==="/"&&(o.charAt(1)==="/"?o=u.protocol+o:o=u.host+o),/^(https?|wss?):\/\//.test(o)||(n("protocol-less url %s",o),typeof u<"u"?o=u.protocol+"//"+o:o="https://"+o),n("parse %s",o),d=(0,e.parse)(o)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/";const c=d.host.indexOf(":")!==-1?"["+d.host+"]":d.host;return d.id=d.protocol+"://"+c+":"+d.port+a,d.href=d.protocol+"://"+c+(u&&u.port===d.port?"":":"+d.port),d}return Be}var X={},Pe={},At={},Re={},Ie={},Mn;function Sr(){if(Mn)return Ie;Mn=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.hasBinary=Ie.isBinary=void 0;const r=typeof ArrayBuffer=="function",e=u=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(u):u.buffer instanceof ArrayBuffer,t=Object.prototype.toString,n=typeof Blob=="function"||typeof Blob<"u"&&t.call(Blob)==="[object BlobConstructor]",i=typeof File=="function"||typeof File<"u"&&t.call(File)==="[object FileConstructor]";function o(u){return r&&(u instanceof ArrayBuffer||e(u))||n&&u instanceof Blob||i&&u instanceof File}Ie.isBinary=o;function a(u,d){if(!u||typeof u!="object")return!1;if(Array.isArray(u)){for(let s=0,c=u.length;s<c;s++)if(a(u[s]))return!0;return!1}if(o(u))return!0;if(u.toJSON&&typeof u.toJSON=="function"&&arguments.length===1)return a(u.toJSON(),!0);for(const s in u)if(Object.prototype.hasOwnProperty.call(u,s)&&a(u[s]))return!0;return!1}return Ie.hasBinary=a,Ie}var $n;function Wo(){if($n)return Re;$n=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.reconstructPacket=Re.deconstructPacket=void 0;const r=Sr();function e(o){const a=[],u=o.data,d=o;return d.data=t(u,a),d.attachments=a.length,{packet:d,buffers:a}}Re.deconstructPacket=e;function t(o,a){if(!o)return o;if((0,r.isBinary)(o)){const u={_placeholder:!0,num:a.length};return a.push(o),u}else if(Array.isArray(o)){const u=new Array(o.length);for(let d=0;d<o.length;d++)u[d]=t(o[d],a);return u}else if(typeof o=="object"&&!(o instanceof Date)){const u={};for(const d in o)Object.prototype.hasOwnProperty.call(o,d)&&(u[d]=t(o[d],a));return u}return o}function n(o,a){return o.data=i(o.data,a),delete o.attachments,o}Re.reconstructPacket=n;function i(o,a){if(!o)return o;if(o&&o._placeholder===!0){if(typeof o.num=="number"&&o.num>=0&&o.num<a.length)return a[o.num];throw new Error("illegal attachments")}else if(Array.isArray(o))for(let u=0;u<o.length;u++)o[u]=i(o[u],a);else if(typeof o=="object")for(const u in o)Object.prototype.hasOwnProperty.call(o,u)&&(o[u]=i(o[u],a));return o}return Re}var at={exports:{}},Dt,qn;function Vo(){if(qn)return Dt;qn=1;function r(e){n.debug=n,n.default=n,n.coerce=s,n.disable=a,n.enable=o,n.enabled=u,n.humanize=Ut(),n.destroy=c,Object.keys(e).forEach(l=>{n[l]=e[l]}),n.names=[],n.skips=[],n.formatters={};function t(l){let h=0;for(let f=0;f<l.length;f++)h=(h<<5)-h+l.charCodeAt(f),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=t;function n(l){let h,f=null,p,g;function _(...v){if(!_.enabled)return;const m=_,b=Number(new Date),C=b-(h||b);m.diff=C,m.prev=h,m.curr=b,h=b,v[0]=n.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let w=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(E,D)=>{if(E==="%%")return"%";w++;const P=n.formatters[D];if(typeof P=="function"){const k=v[w];E=P.call(m,k),v.splice(w,1),w--}return E}),n.formatArgs.call(m,v),(m.log||n.log).apply(m,v)}return _.namespace=l,_.useColors=n.useColors(),_.color=n.selectColor(l),_.extend=i,_.destroy=n.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==n.namespaces&&(p=n.namespaces,g=n.enabled(l)),g),set:v=>{f=v}}),typeof n.init=="function"&&n.init(_),_}function i(l,h){const f=n(this.namespace+(typeof h>"u"?":":h)+l);return f.log=this.log,f}function o(l){n.save(l),n.namespaces=l,n.names=[],n.skips=[];let h;const f=(typeof l=="string"?l:"").split(/[\s,]+/),p=f.length;for(h=0;h<p;h++)f[h]&&(l=f[h].replace(/\*/g,".*?"),l[0]==="-"?n.skips.push(new RegExp("^"+l.slice(1)+"$")):n.names.push(new RegExp("^"+l+"$")))}function a(){const l=[...n.names.map(d),...n.skips.map(d).map(h=>"-"+h)].join(",");return n.enable(""),l}function u(l){if(l[l.length-1]==="*")return!0;let h,f;for(h=0,f=n.skips.length;h<f;h++)if(n.skips[h].test(l))return!1;for(h=0,f=n.names.length;h<f;h++)if(n.names[h].test(l))return!0;return!1}function d(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function s(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return Dt=r,Dt}var xn;function Ko(){return xn||(xn=1,function(r,e){var t={};e.formatArgs=i,e.save=o,e.load=a,e.useColors=n,e.storage=u(),e.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let s;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(s=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(s[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;s.splice(1,0,c,"color: inherit");let l=0,h=0;s[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(l++,f==="%c"&&(h=l))}),s.splice(h,0,c)}e.log=console.debug||console.log||(()=>{});function o(s){try{s?e.storage.setItem("debug",s):e.storage.removeItem("debug")}catch{}}function a(){let s;try{s=e.storage.getItem("debug")}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=t.DEBUG),s}function u(){try{return localStorage}catch{}}r.exports=Vo()(e);const{formatters:d}=r.exports;d.j=function(s){try{return JSON.stringify(s)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}(at,at.exports)),at.exports}var Ln;function Wt(){return Ln||(Ln=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Decoder=r.Encoder=r.PacketType=r.protocol=void 0;const e=xe,t=Wo(),n=Sr(),o=(0,Ko().default)("socket.io-parser"),a=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];r.protocol=5;var u;(function(h){h[h.CONNECT=0]="CONNECT",h[h.DISCONNECT=1]="DISCONNECT",h[h.EVENT=2]="EVENT",h[h.ACK=3]="ACK",h[h.CONNECT_ERROR=4]="CONNECT_ERROR",h[h.BINARY_EVENT=5]="BINARY_EVENT",h[h.BINARY_ACK=6]="BINARY_ACK"})(u=r.PacketType||(r.PacketType={}));class d{constructor(f){this.replacer=f}encode(f){return o("encoding packet %j",f),(f.type===u.EVENT||f.type===u.ACK)&&(0,n.hasBinary)(f)?this.encodeAsBinary({type:f.type===u.EVENT?u.BINARY_EVENT:u.BINARY_ACK,nsp:f.nsp,data:f.data,id:f.id}):[this.encodeAsString(f)]}encodeAsString(f){let p=""+f.type;return(f.type===u.BINARY_EVENT||f.type===u.BINARY_ACK)&&(p+=f.attachments+"-"),f.nsp&&f.nsp!=="/"&&(p+=f.nsp+","),f.id!=null&&(p+=f.id),f.data!=null&&(p+=JSON.stringify(f.data,this.replacer)),o("encoded %j as %s",f,p),p}encodeAsBinary(f){const p=(0,t.deconstructPacket)(f),g=this.encodeAsString(p.packet),_=p.buffers;return _.unshift(g),_}}r.Encoder=d;function s(h){return Object.prototype.toString.call(h)==="[object Object]"}class c extends e.Emitter{constructor(f){super(),this.reviver=f}add(f){let p;if(typeof f=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");p=this.decodeString(f);const g=p.type===u.BINARY_EVENT;g||p.type===u.BINARY_ACK?(p.type=g?u.EVENT:u.ACK,this.reconstructor=new l(p),p.attachments===0&&super.emitReserved("decoded",p)):super.emitReserved("decoded",p)}else if((0,n.isBinary)(f)||f.base64)if(this.reconstructor)p=this.reconstructor.takeBinaryData(f),p&&(this.reconstructor=null,super.emitReserved("decoded",p));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+f)}decodeString(f){let p=0;const g={type:Number(f.charAt(0))};if(u[g.type]===void 0)throw new Error("unknown packet type "+g.type);if(g.type===u.BINARY_EVENT||g.type===u.BINARY_ACK){const v=p+1;for(;f.charAt(++p)!=="-"&&p!=f.length;);const m=f.substring(v,p);if(m!=Number(m)||f.charAt(p)!=="-")throw new Error("Illegal attachments");g.attachments=Number(m)}if(f.charAt(p+1)==="/"){const v=p+1;for(;++p&&!(f.charAt(p)===","||p===f.length););g.nsp=f.substring(v,p)}else g.nsp="/";const _=f.charAt(p+1);if(_!==""&&Number(_)==_){const v=p+1;for(;++p;){const m=f.charAt(p);if(m==null||Number(m)!=m){--p;break}if(p===f.length)break}g.id=Number(f.substring(v,p+1))}if(f.charAt(++p)){const v=this.tryParse(f.substr(p));if(c.isPayloadValid(g.type,v))g.data=v;else throw new Error("invalid payload")}return o("decoded %s as %j",f,g),g}tryParse(f){try{return JSON.parse(f,this.reviver)}catch{return!1}}static isPayloadValid(f,p){switch(f){case u.CONNECT:return s(p);case u.DISCONNECT:return p===void 0;case u.CONNECT_ERROR:return typeof p=="string"||s(p);case u.EVENT:case u.BINARY_EVENT:return Array.isArray(p)&&(typeof p[0]=="number"||typeof p[0]=="string"&&a.indexOf(p[0])===-1);case u.ACK:case u.BINARY_ACK:return Array.isArray(p)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}r.Decoder=c;class l{constructor(f){this.packet=f,this.buffers=[],this.reconPack=f}takeBinaryData(f){if(this.buffers.push(f),this.buffers.length===this.reconPack.attachments){const p=(0,t.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),p}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}}(At)),At}var lt={},Un;function kr(){if(Un)return lt;Un=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.on=r;function r(e,t,n){return e.on(t,n),function(){e.off(t,n)}}return lt}var Hn;function Er(){if(Hn)return Pe;Hn=1;var r=Pe&&Pe.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.Socket=void 0;const e=Wt(),t=kr(),n=xe,o=(0,r(mt()).default)("socket.io-client:socket"),a=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class u extends n.Emitter{constructor(s,c,l){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=c,l&&l.auth&&(this.auth=l.auth),this._opts=Object.assign({},l),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[(0,t.on)(s,"open",this.onopen.bind(this)),(0,t.on)(s,"packet",this.onpacket.bind(this)),(0,t.on)(s,"error",this.onerror.bind(this)),(0,t.on)(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...c){var l,h,f;if(a.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(c.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(c),this;const p={type:e.PacketType.EVENT,data:c};if(p.options={},p.options.compress=this.flags.compress!==!1,typeof c[c.length-1]=="function"){const m=this.ids++;o("emitting packet with ack id %d",m);const b=c.pop();this._registerAckCallback(m,b),p.id=m}const g=(h=(l=this.io.engine)===null||l===void 0?void 0:l.transport)===null||h===void 0?void 0:h.writable,_=this.connected&&!(!((f=this.io.engine)===null||f===void 0)&&f._hasPingExpired());return this.flags.volatile&&!g?o("discard packet as the transport is not currently writable"):_?(this.notifyOutgoingListeners(p),this.packet(p)):this.sendBuffer.push(p),this.flags={},this}_registerAckCallback(s,c){var l;const h=(l=this.flags.timeout)!==null&&l!==void 0?l:this._opts.ackTimeout;if(h===void 0){this.acks[s]=c;return}const f=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let g=0;g<this.sendBuffer.length;g++)this.sendBuffer[g].id===s&&(o("removing packet with ack id %d from the buffer",s),this.sendBuffer.splice(g,1));o("event with ack id %d has timed out after %d ms",s,h),c.call(this,new Error("operation has timed out"))},h),p=(...g)=>{this.io.clearTimeoutFn(f),c.apply(this,g)};p.withError=!0,this.acks[s]=p}emitWithAck(s,...c){return new Promise((l,h)=>{const f=(p,g)=>p?h(p):l(g);f.withError=!0,c.push(f),this.emit(s,...c)})}_addToQueue(s){let c;typeof s[s.length-1]=="function"&&(c=s.pop());const l={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((h,...f)=>l!==this._queue[0]?void 0:(h!==null?l.tryCount>this._opts.retries&&(o("packet [%d] is discarded after %d tries",l.id,l.tryCount),this._queue.shift(),c&&c(h)):(o("packet [%d] was successfully sent",l.id),this._queue.shift(),c&&c(null,...f)),l.pending=!1,this._drainQueue())),this._queue.push(l),this._drainQueue()}_drainQueue(s=!1){if(o("draining queue"),!this.connected||this._queue.length===0)return;const c=this._queue[0];if(c.pending&&!s){o("packet [%d] has already been sent and is waiting for an ack",c.id);return}c.pending=!0,c.tryCount++,o("sending packet [%d] (try n%d)",c.id,c.tryCount),this.flags=c.flags,this.emit.apply(this,c.args)}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){o("transport is open - connecting"),typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:e.PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,c){o("close (%s)",s),this.connected=!1,delete this.id,this.emitReserved("disconnect",s,c),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(l=>String(l.id)===s)){const l=this.acks[s];delete this.acks[s],l.withError&&l.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case e.PacketType.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case e.PacketType.EVENT:case e.PacketType.BINARY_EVENT:this.onevent(s);break;case e.PacketType.ACK:case e.PacketType.BINARY_ACK:this.onack(s);break;case e.PacketType.DISCONNECT:this.ondisconnect();break;case e.PacketType.CONNECT_ERROR:this.destroy();const l=new Error(s.data.message);l.data=s.data.data,this.emitReserved("connect_error",l);break}}onevent(s){const c=s.data||[];o("emitting event %j",c),s.id!=null&&(o("attaching ack callback to event"),c.push(this.ack(s.id))),this.connected?this.emitEvent(c):this.receiveBuffer.push(Object.freeze(c))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const c=this._anyListeners.slice();for(const l of c)l.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const c=this;let l=!1;return function(...h){l||(l=!0,o("sending ack %j",h),c.packet({type:e.PacketType.ACK,id:s,data:h}))}}onack(s){const c=this.acks[s.id];if(typeof c!="function"){o("bad ack %s",s.id);return}delete this.acks[s.id],o("calling ack %s with %j",s.id,s.data),c.withError&&s.data.unshift(null),c.apply(this,s.data)}onconnect(s,c){o("socket connected with id %s",s),this.id=s,this.recovered=c&&this._pid===c,this._pid=c,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){o("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(o("performing disconnect (%s)",this.nsp),this.packet({type:e.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const c=this._anyListeners;for(let l=0;l<c.length;l++)if(s===c[l])return c.splice(l,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const c=this._anyOutgoingListeners;for(let l=0;l<c.length;l++)if(s===c[l])return c.splice(l,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const c=this._anyOutgoingListeners.slice();for(const l of c)l.apply(this,s.data)}}}return Pe.Socket=u,Pe}var ut={},Wn;function zo(){if(Wn)return ut;Wn=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.Backoff=r;function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}return r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e},ut}var Vn;function Xo(){if(Vn)return X;Vn=1;var r=X&&X.__createBinding||(Object.create?function(f,p,g,_){_===void 0&&(_=g);var v=Object.getOwnPropertyDescriptor(p,g);(!v||("get"in v?!p.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return p[g]}}),Object.defineProperty(f,_,v)}:function(f,p,g,_){_===void 0&&(_=g),f[_]=p[g]}),e=X&&X.__setModuleDefault||(Object.create?function(f,p){Object.defineProperty(f,"default",{enumerable:!0,value:p})}:function(f,p){f.default=p}),t=X&&X.__importStar||function(f){if(f&&f.__esModule)return f;var p={};if(f!=null)for(var g in f)g!=="default"&&Object.prototype.hasOwnProperty.call(f,g)&&r(p,f,g);return e(p,f),p},n=X&&X.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(X,"__esModule",{value:!0}),X.Manager=void 0;const i=Ht(),o=Er(),a=t(Wt()),u=kr(),d=zo(),s=xe,l=(0,n(mt()).default)("socket.io-client:manager");class h extends s.Emitter{constructor(p,g){var _;super(),this.nsps={},this.subs=[],p&&typeof p=="object"&&(g=p,p=void 0),g=g||{},g.path=g.path||"/socket.io",this.opts=g,(0,i.installTimerFunctions)(this,g),this.reconnection(g.reconnection!==!1),this.reconnectionAttempts(g.reconnectionAttempts||1/0),this.reconnectionDelay(g.reconnectionDelay||1e3),this.reconnectionDelayMax(g.reconnectionDelayMax||5e3),this.randomizationFactor((_=g.randomizationFactor)!==null&&_!==void 0?_:.5),this.backoff=new d.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(g.timeout==null?2e4:g.timeout),this._readyState="closed",this.uri=p;const v=g.parser||a;this.encoder=new v.Encoder,this.decoder=new v.Decoder,this._autoConnect=g.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(p){return arguments.length?(this._reconnection=!!p,p||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(p){return p===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=p,this)}reconnectionDelay(p){var g;return p===void 0?this._reconnectionDelay:(this._reconnectionDelay=p,(g=this.backoff)===null||g===void 0||g.setMin(p),this)}randomizationFactor(p){var g;return p===void 0?this._randomizationFactor:(this._randomizationFactor=p,(g=this.backoff)===null||g===void 0||g.setJitter(p),this)}reconnectionDelayMax(p){var g;return p===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=p,(g=this.backoff)===null||g===void 0||g.setMax(p),this)}timeout(p){return arguments.length?(this._timeout=p,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(p){if(l("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=new i.Socket(this.uri,this.opts);const g=this.engine,_=this;this._readyState="opening",this.skipReconnect=!1;const v=(0,u.on)(g,"open",function(){_.onopen(),p&&p()}),m=C=>{l("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",C),p?p(C):this.maybeReconnectOnOpen()},b=(0,u.on)(g,"error",m);if(this._timeout!==!1){const C=this._timeout;l("connect attempt will timeout after %d",C);const w=this.setTimeoutFn(()=>{l("connect attempt timed out after %d",C),v(),m(new Error("timeout")),g.close()},C);this.opts.autoUnref&&w.unref(),this.subs.push(()=>{this.clearTimeoutFn(w)})}return this.subs.push(v),this.subs.push(b),this}connect(p){return this.open(p)}onopen(){l("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const p=this.engine;this.subs.push((0,u.on)(p,"ping",this.onping.bind(this)),(0,u.on)(p,"data",this.ondata.bind(this)),(0,u.on)(p,"error",this.onerror.bind(this)),(0,u.on)(p,"close",this.onclose.bind(this)),(0,u.on)(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(p){try{this.decoder.add(p)}catch(g){this.onclose("parse error",g)}}ondecoded(p){(0,i.nextTick)(()=>{this.emitReserved("packet",p)},this.setTimeoutFn)}onerror(p){l("error",p),this.emitReserved("error",p)}socket(p,g){let _=this.nsps[p];return _?this._autoConnect&&!_.active&&_.connect():(_=new o.Socket(this,p,g),this.nsps[p]=_),_}_destroy(p){const g=Object.keys(this.nsps);for(const _ of g)if(this.nsps[_].active){l("socket %s is still active, skipping close",_);return}this._close()}_packet(p){l("writing packet %j",p);const g=this.encoder.encode(p);for(let _=0;_<g.length;_++)this.engine.write(g[_],p.options)}cleanup(){l("cleanup"),this.subs.forEach(p=>p()),this.subs.length=0,this.decoder.destroy()}_close(){l("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(p,g){var _;l("closed due to %s",p),this.cleanup(),(_=this.engine)===null||_===void 0||_.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",p,g),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const p=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const g=this.backoff.duration();l("will wait %dms before reconnect attempt",g),this._reconnecting=!0;const _=this.setTimeoutFn(()=>{p.skipReconnect||(l("attempting reconnect"),this.emitReserved("reconnect_attempt",p.backoff.attempts),!p.skipReconnect&&p.open(v=>{v?(l("reconnect attempt error"),p._reconnecting=!1,p.reconnect(),this.emitReserved("reconnect_error",v)):(l("reconnect success"),p.onreconnect())}))},g);this.opts.autoUnref&&_.unref(),this.subs.push(()=>{this.clearTimeoutFn(_)})}}onreconnect(){const p=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",p)}}return X.Manager=h,X}var Kn=Qe.exports,zn;function Jo(){return zn||(zn=1,function(r,e){var t=Kn&&Kn.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.WebTransport=e.WebSocket=e.NodeWebSocket=e.XHR=e.NodeXHR=e.Fetch=e.Socket=e.Manager=e.protocol=void 0,e.io=s,e.connect=s,e.default=s;const n=Ho(),i=Xo();Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return i.Manager}});const o=Er();Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return o.Socket}});const u=(0,t(mt()).default)("socket.io-client"),d={};function s(h,f){typeof h=="object"&&(f=h,h=void 0),f=f||{};const p=(0,n.url)(h,f.path||"/socket.io"),g=p.source,_=p.id,v=p.path,m=d[_]&&v in d[_].nsps,b=f.forceNew||f["force new connection"]||f.multiplex===!1||m;let C;return b?(u("ignoring socket cache for %s",g),C=new i.Manager(g,f)):(d[_]||(u("new io instance for %s",g),d[_]=new i.Manager(g,f)),C=d[_]),p.query&&!f.query&&(f.query=p.queryKey),C.socket(p.path,f)}Object.assign(s,{Manager:i.Manager,Socket:o.Socket,io:s,connect:s});var c=Wt();Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return c.protocol}});var l=Ht();Object.defineProperty(e,"Fetch",{enumerable:!0,get:function(){return l.Fetch}}),Object.defineProperty(e,"NodeXHR",{enumerable:!0,get:function(){return l.NodeXHR}}),Object.defineProperty(e,"XHR",{enumerable:!0,get:function(){return l.XHR}}),Object.defineProperty(e,"NodeWebSocket",{enumerable:!0,get:function(){return l.NodeWebSocket}}),Object.defineProperty(e,"WebSocket",{enumerable:!0,get:function(){return l.WebSocket}}),Object.defineProperty(e,"WebTransport",{enumerable:!0,get:function(){return l.WebTransport}}),r.exports=s}(Qe,Qe.exports)),Qe.exports}var Xn;function Tr(){if(Xn)return we;Xn=1,Object.defineProperty(we,"__esModule",{value:!0}),we.createConnection=we.isConnectionConnecting=void 0;const r=Jo();function e(n){return n.connected}we.isConnectionConnecting=e;function t(n,i){return(0,r.io)(n,i)}return we.createConnection=t,we}var Jn;function Yo(){if(Jn)return Ce;Jn=1;var r=Ce&&Ce.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.providerFactory=void 0;const e=r(ie()),t=oe(),n=r(xt()),i=Tr(),o=Y(),a="IS_SOCKET_CONNECTED",u="KEY_LAST_CONNECTION_TIME";function d(c){return({url:h,connectEnabled:f=!0,automaticReconnect:p=!0,children:g,dependencies:_=[],accessTokenFactory:v,onError:m,...b})=>{const C=(0,o.useEvent)(m),w=(0,o.useEvent)(v),R=(0,t.useRef)(()=>{});function E(){var P;if(!f)return;const k=(0,i.createConnection)(h,{autoConnect:!0,reconnection:p,transportOptions:{polling:{extraHeaders:{Authorization:()=>w?.()||""}}},...b});c.connection=k,c.reOn();let F=Number(n.default.get(u))||null,te=null;e.default.on(a,V=>{if(!V){F=null,te=null,ne();return}o.__DEV__&&console.log("Another tab connected"),te=V,F=Date.now(),(0,i.isConnectionConnecting)(k)||(W&&clearInterval(W),k.close())});let W;async function ne(){function V(){if(te){clearInterval(W),k.close();return}s(k.id)}if((!F||F<Date.now()-5e3)&&!(0,i.isConnectionConnecting)(k))try{s(k.id),k.open(),W=setInterval(V,4e3),V()}catch(G){console.log(G),W&&clearInterval(W),C?.(G)}}ne();const T=setInterval(ne,6e3);function A(){if((0,i.isConnectionConnecting)(k)){s(null),clearInterval(W),k.disconnect();return}}(P=window?.addEventListener)===null||P===void 0||P.call(window,"beforeunload",A),R.current=()=>{var V;clearInterval(T),W&&clearInterval(W),k.disconnect(),e.default.off(a),(V=window?.removeEventListener)===null||V===void 0||V.call(window,"beforeunload",A)}}(0,t.useState)(()=>{E()});const D=(0,t.useRef)(!1);return(0,t.useEffect)(()=>(D.current&&E(),D.current=!0,()=>{R.current()}),[f,h,..._]),g}}Ce.providerFactory=d;function s(c){if(!c){e.default.send(a,""),n.default.set(u,"");return}e.default.send(a,c);const l=new Date;l.setSeconds(l.getSeconds()+10),n.default.set(u,Date.now().toString(),{expires:l,path:"/"})}return Ce}var Ye={},Yn;function Go(){if(Yn)return Ye;Yn=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.providerNativeFactory=void 0;const r=oe(),e=Y(),t=Tr();function n(i){return({url:a,connectEnabled:u=!0,automaticReconnect:d=!0,children:s,dependencies:c=[],accessTokenFactory:l,onError:h,...f})=>{const p=(0,e.useEvent)(h),g=(0,e.useEvent)(l),_=(0,r.useRef)(()=>{});async function v(){if(!u)return;const b=(0,t.createConnection)(a,{extraHeaders:{Authorization:await g?.()||""},reconnection:d,...f});i.connection=b,i.reOn();async function C(){if(!(0,t.isConnectionConnecting)(b))try{await b.open()}catch(R){console.log(R),p?.(R)}}C();const w=setInterval(C,6e3);_.current=()=>{clearInterval(w),b.disconnect()}}(0,r.useState)(()=>{v()});const m=(0,r.useRef)(!1);return(0,r.useEffect)(()=>(m.current&&v(),m.current=!0,()=>{_.current()}),[u,a,...c]),s}}return Ye.providerNativeFactory=n,Ye}var Gn;function Qo(){if(Gn)return ye;Gn=1;var r=ye&&ye.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(ye,"__esModule",{value:!0}),ye.createSocketIoContext=void 0;const e=r(ie()),t=Y(),n=Do(),i=Yo(),o=Go(),a="SOCEKT_IO_SEND";function u(d){const s=[],c={connection:null,useSocketEffect:null,shareConnectionBetweenTab:d?.shareConnectionBetweenTab||!1,invoke:(l,...h)=>{var f;if(!c.shareConnectionBetweenTab){(f=c.connection)===null||f===void 0||f.emit(l,...h);return}(0,t.sendWithHermes)(a,{methodName:l,args:h},c.shareConnectionBetweenTab)},Provider:null,on:l=>{var h;s.includes(l)||(h=c.connection)===null||h===void 0||h.on(l,f=>{(0,t.sendWithHermes)(l,f,c.shareConnectionBetweenTab)}),s.push(l)},off:l=>{var h;s.includes(l)&&s.splice(s.indexOf(l),1),s.includes(l)||(h=c.connection)===null||h===void 0||h.off(l)},reOn:()=>{(0,t.removeDuplicates)(s).forEach(h=>{var f;(f=c.connection)===null||f===void 0||f.on(h,p=>{(0,t.sendWithHermes)(h,p,c.shareConnectionBetweenTab)})})}};return c.Provider=c.shareConnectionBetweenTab?(0,i.providerFactory)(c):(0,o.providerNativeFactory)(c),c.useSocketEffect=(0,n.createUseSocketEffect)(c),e.default.on(a,l=>{var h;!((h=c.connection)===null||h===void 0)&&h.connected&&c.connection.emit(l.methodName,...l.args)}),c}return ye.createSocketIoContext=u,ye}var Qn;function Zo(){return Qn||(Qn=1,function(r){var e=me&&me.__createBinding||(Object.create?function(n,i,o,a){a===void 0&&(a=o);var u=Object.getOwnPropertyDescriptor(i,o);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,a,u)}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]}),t=me&&me.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(r,"__esModule",{value:!0}),t(Qo(),r)}(me)),me}var Fe={},Oe={},Ae={},le={},Zn;function Vt(){if(Zn)return le;Zn=1,Object.defineProperty(le,"__esModule",{value:!0}),le.getMessageEvent=le.createConnection=le.isConnectionConnecting=void 0;const r=Y();function e(i){return i&&(i.readyState===WebSocket.CONNECTING||i.readyState===WebSocket.OPEN)}le.isConnectionConnecting=e;function t(i,{url:o,onOpen:a,onClose:u,onErrorRef:d,logger:s,headers:c}){let l;return c?l=new WebSocket(o,null,{headers:c}):l=new WebSocket(o),l.onopen=()=>{a?.(l),s?.log("webSocket connected")},l.onmessage=h=>{const f=h.data?JSON.parse(h.data.toString()):{};(0,r.sendWithHermes)(n(i),f,i.shareConnectionBetweenTab)},l.onclose=h=>{u?.(h),s?.log("webSocket closed",h)},l.onerror=h=>{var f;return(f=d.current)===null||f===void 0?void 0:f.call(d,h)},i.connection=l,l}le.createConnection=t;function n(i){return i.key+"WEB_SOCKET_EVENT"}return le.getMessageEvent=n,le}var er;function ei(){if(er)return Ae;er=1;var r=Ae&&Ae.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.createUseSignalREffect=void 0;const e=r(ie()),t=oe(),n=Y(),i=Vt();function o(a){return d=>{const s=(0,n.useEvent)(d);(0,t.useEffect)(()=>{function c(l){s(l)}return e.default.on((0,i.getMessageEvent)(a),c),()=>{e.default.off((0,i.getMessageEvent)(a),c)}},[])}}return Ae.createUseSignalREffect=o,Ae}var De={},tr;function ti(){if(tr)return De;tr=1;var r=De&&De.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(De,"__esModule",{value:!0}),De.providerFactory=void 0;const e=r(ie()),t=oe(),n=r(xt()),i=Vt(),o=Y(),a="IS_SIGNAL_R_CONNECTED",u="KEY_LAST_CONNECTION_TIME";function d(c){return({url:h,connectEnabled:f=!0,children:p,dependencies:g=[],onError:_,onOpen:v,onClose:m,logger:b=o.__DEV__?console:null})=>{const C=(0,o.useEvent)(_),w=(0,t.useRef)(()=>{});function R(){var D;if(!f)return;let P=Number(n.default.get(u))||null,k=null;e.default.on(a,T=>{var A;if(!T){P=null,k=null,te();return}b?.log("_anotherTabConnectionId"),k=T,P=Date.now(),(0,i.isConnectionConnecting)(c.connection)||(F&&clearInterval(F),(A=c.connection)===null||A===void 0||A.close())});let F;async function te(){function T(){var A;if(k){clearInterval(F),(A=c.connection)===null||A===void 0||A.close();return}s(String(c.key))}if(b?.log({lastConnectionSentState:P,isConnectionConnecting:(0,i.isConnectionConnecting)(c.connection)}),(!P||P<Date.now()-5e3)&&!(0,i.isConnectionConnecting)(c.connection))try{(0,i.createConnection)(c,{onClose:m,onOpen:v,logger:b,url:h,onErrorRef:C}),s(String(c.key)),F=setInterval(T,4e3),T()}catch(A){b?.error(A.message),F&&clearInterval(F),C?.(A)}}te();const W=setInterval(te,6e3);function ne(){var T;(0,i.isConnectionConnecting)(c.connection)&&(s(null),clearInterval(F),(T=c.connection)===null||T===void 0||T.close())}(D=window?.addEventListener)===null||D===void 0||D.call(window,"beforeunload",ne),w.current=()=>{var T,A;clearInterval(W),F&&clearInterval(F),(T=c.connection)===null||T===void 0||T.close(),e.default.off(a),(A=window?.removeEventListener)===null||A===void 0||A.call(window,"beforeunload",ne)}}(0,t.useState)(()=>{R()});const E=(0,t.useRef)(!1);return(0,t.useEffect)(()=>(E.current&&R(),E.current=!0,()=>{w.current()}),[f,h,...g]),p}}De.providerFactory=d;function s(c){if(!c){e.default.send(a,""),n.default.set(u,"");return}e.default.send(a,c);const l=new Date;l.setSeconds(l.getSeconds()+10),n.default.set(u,Date.now().toString(),{expires:l,path:"/"})}return De}var Ge={},nr;function ni(){if(nr)return Ge;nr=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.providerNativeFactory=void 0;const r=oe(),e=Y(),t=Vt();function n(i){return({url:a,connectEnabled:u=!0,children:d,dependencies:s=[],onError:c,onOpen:l,onClose:h,logger:f=console,headers:p})=>{const g=(0,e.useEvent)(c),_=(0,r.useRef)(()=>{});function v(){if(!u)return;async function b(){if(!(0,t.isConnectionConnecting)(i.connection))try{(0,t.createConnection)(i,{onClose:h,onOpen:l,logger:f,url:a,onErrorRef:g,headers:p})}catch(w){console.log(w),g?.(w)}}b();const C=setInterval(b,6e3);_.current=()=>{var w;clearInterval(C),(w=i.connection)===null||w===void 0||w.close()}}(0,r.useState)(()=>{v()});const m=(0,r.useRef)(!1);return(0,r.useEffect)(()=>(m.current&&v(),m.current=!0,()=>{_.current()}),[u,a,...s]),d}}return Ge.providerNativeFactory=n,Ge}var rr;function ri(){if(rr)return Oe;rr=1;var r=Oe&&Oe.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.createWebSocketContext=void 0;const e=r(ie()),t=Y(),n=ei(),i=ti(),o=ni();function a(u){const d=u.key+"SOCKET_INVOKE",s={key:u.key,connection:null,useWebSocketEffect:null,shareConnectionBetweenTab:u?.shareConnectionBetweenTab||!1,invoke:l=>{var h;if(!s.shareConnectionBetweenTab){(h=s.connection)===null||h===void 0||h.send(JSON.stringify(l));return}(0,t.sendWithHermes)(d,l,s.shareConnectionBetweenTab)},Provider:null};s.Provider=s.shareConnectionBetweenTab?(0,i.providerFactory)(s):(0,o.providerNativeFactory)(s);async function c(l){var h;(h=s.connection)===null||h===void 0||h.send(JSON.stringify(l.data))}return s.useWebSocketEffect=(0,n.createUseSignalREffect)(s),e.default.on(d,l=>{var h;((h=s.connection)===null||h===void 0?void 0:h.readyState)===WebSocket.OPEN&&c(l)}),s}return Oe.createWebSocketContext=a,Oe}var or;function oi(){return or||(or=1,function(r){var e=Fe&&Fe.__createBinding||(Object.create?function(n,i,o,a){a===void 0&&(a=o);var u=Object.getOwnPropertyDescriptor(i,o);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,a,u)}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]}),t=Fe&&Fe.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(r,"__esModule",{value:!0}),t(ri(),r)}(Fe)),Fe}var ir;function ii(){return ir||(ir=1,function(r){var e=fe&&fe.__createBinding||(Object.create?function(n,i,o,a){a===void 0&&(a=o);var u=Object.getOwnPropertyDescriptor(i,o);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,a,u)}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]}),t=fe&&fe.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ao(),r),t(Zo(),r),t(oi(),r)}(fe)),fe}var si=ii();const di=si.createSignalRContext({}),M=[];for(let r=0;r<256;++r)M.push((r+256).toString(16).slice(1));function ci(r,e=0){return(M[r[e+0]]+M[r[e+1]]+M[r[e+2]]+M[r[e+3]]+"-"+M[r[e+4]]+M[r[e+5]]+"-"+M[r[e+6]]+M[r[e+7]]+"-"+M[r[e+8]]+M[r[e+9]]+"-"+M[r[e+10]]+M[r[e+11]]+M[r[e+12]]+M[r[e+13]]+M[r[e+14]]+M[r[e+15]]).toLowerCase()}let Nt;const ai=new Uint8Array(16);function li(){if(!Nt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Nt=crypto.getRandomValues.bind(crypto)}return Nt(ai)}const ui=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),sr={randomUUID:ui};function pi(r,e,t){if(sr.randomUUID&&!r)return sr.randomUUID();r=r||{};const n=r.random??r.rng?.()??li();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ci(n)}export{di as S,pi as v};
