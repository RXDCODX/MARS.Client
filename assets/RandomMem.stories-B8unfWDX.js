import{r as n,j as a}from"./iframe-DfjFra_E.js";import"./SignalRHubWrapper-BMh2Frid.js";import{M as d}from"./data-contracts-97ndRDDy.js";import{A as v}from"./Announce-BQQtQ4hh.js";import{v as g,S}from"./index-oSaGBWdX.js";import{H as w,A}from"./HighPriorityAlert-dBIFZF-q.js";import"./index-eIvpPVhI.js";import"./index-73zqftOg.js";import"./index-Chjiymov.js";import"./index-DDUjKJzf.js";import"./react-dRZq-Y5g.js";import"./KeyWordedText-CJzFLZgt.js";function p(){const[s,l]=n.useState([]),[r,c]=n.useState([]),[i,m]=n.useState(null),[I,h]=n.useState(!1),u=n.useCallback(e=>{switch(e.mediaInfo.id=g(),e.mediaInfo.metaInfo.priority){case d.High:{const t={...e,mediaInfo:{...e.mediaInfo,fileInfo:{...e.mediaInfo.fileInfo,filePath:e.mediaInfo.fileInfo.isLocalFile?"http://localhost:9155/"+e.mediaInfo.fileInfo.filePath:e.mediaInfo.fileInfo.filePath}}};c(o=>[...o,t]),l([]);break}case d.Low:case d.Normal:{const t={...e,mediaInfo:{...e.mediaInfo,fileInfo:{...e.mediaInfo.fileInfo,filePath:e.mediaInfo.fileInfo.isLocalFile?"http://localhost:9155/"+e.mediaInfo.fileInfo.filePath:e.mediaInfo.fileInfo.filePath}}};l(o=>[...o,t]);break}}},[]),y=n.useCallback(e=>{l(t=>t.filter(o=>o.mediaInfo.id!==e.mediaInfo.id))},[]),P=n.useCallback(e=>{c(o=>o.filter(x=>x.mediaInfo.id!==e.mediaInfo.id));const t=r.some(o=>o)?r[0]:null;m(t)},[r]);return n.useEffect(()=>{if(r.length>0&&!i){const e=r[0];m(e);const t=setTimeout(()=>{c(o=>o.slice(1)),m(null)},2e3);return()=>clearTimeout(t)}},[r,i]),S.useSignalREffect("RandomMem",u,[u]),a.jsxs(a.Fragment,{children:[!I&&a.jsx(v,{title:"RandomMem",callback:()=>h(!0)}),i&&a.jsx(w,{message:i,type:i.mediaInfo.fileInfo.type,callback:()=>P(i)},i.mediaInfo.id),!i&&s.map(e=>a.jsx(A,{message:e,remove:y},e.mediaInfo.id))]})}p.__docgenInfo={description:"",methods:[],displayName:"PyroAlerts"};const{expect:E}=__STORYBOOK_MODULE_TEST__,L={title:"Stream Components/RandomMem",component:p,parameters:{layout:"fullscreen",docs:{description:{component:"Компонент для отображения случайных мемов в OBS."}}},tags:["autodocs"],decorators:[s=>a.jsx("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",position:"relative",overflow:"hidden"},children:a.jsx(s,{})})]},f={args:{},play:async({canvasElement:s})=>{await new Promise(l=>setTimeout(l,100)),E(s).toBeInTheDocument()}};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`{
  args: {},
  play: async ({
    canvasElement
  }) => {
    // Ждем появления компонента
    await new Promise(resolve => setTimeout(resolve, 100));

    // Проверяем, что компонент отрендерился
    expect(canvasElement).toBeInTheDocument();
  }
}`,...f.parameters?.docs?.source}}};const F=["Default"];export{f as Default,F as __namedExportsOrder,L as default};
