import{c as Px,b as Dx,g as ir,a as _l,e as Bx,r as ki,j as lt}from"./iframe-D1A6zj-g.js";import{l as rh}from"./index-7MjqgO3W.js";import{S as Ox,v as Ki}from"./v4-DueItj6Y.js";var _u,nh;function Zs(){if(nh)return _u;nh=1;class n{constructor(t,r,i){if(new.target.name===n.name)throw new Error("Base Emote class cannot be used");this.fetcher=t.fetcher,this.channel=t,this.id=r,this.type=null,this._setup(i)}_setup(t){this.code=t.code}toLink(){return null}toString(){return this.code}toObject(){return{code:this.code,id:this.id,channel_id:this.channel.channel_id}}}return _u=n,_u}var gu,ih;function ar(){return ih||(ih=1,gu={Twitch:{CDN:(n,e)=>`https://static-cdn.jtvnw.net/emoticons/v2/${n}/default/dark/${e+1}.0`},BTTV:{Global:"https://api.betterttv.net/3/cached/emotes/global",Channel:n=>`https://api.betterttv.net/3/cached/users/twitch/${n}`,CDN:(n,e)=>`https://cdn.betterttv.net/emote/${n}/${e+1}x.webp`},SevenTV:{Global:"https://7tv.io/v3/emote-sets/global",Channel:n=>`https://7tv.io/v3/users/twitch/${n}`,CDN:(n,e)=>`https://cdn.7tv.app/emote/${n}/${e}`},FFZ:{sets:{Global:3,Modifiers:1532818},Set:n=>`https://api.frankerfacez.com/v1/set/${n}`,Channel:n=>`https://api.frankerfacez.com/v1/room/id/${n}`,CDN:(n,e)=>`https://cdn.frankerfacez.com/emote/${n}/${e}`,CDNAnimated:(n,e)=>`https://cdn.frankerfacez.com/emote/${n}/animated/${e}.webp`},Templates:{html:'<img alt="{name}" title="{name}" class="twitch-emote twitch-emote-{size}" src="{link}">',markdown:'![{name}]({link} "{name}")',bbcode:"[img]{link}[/img]",plain:"{link}"}}),gu}var fu,ah;function Pf(){if(ah)return fu;ah=1;const n=Zs(),e=ar();class t extends n{constructor(i,a,s){super(i,a,s),this.type="bttv"}get owner(){return this.fetcher.channels.get(this.ownerName)}_setup(i){super._setup(i),this.ownerName="user"in i?i.user.name:null,this.animated=i.animated,this.imageType="webp"}toLink(i=0){return e.BTTV.CDN(this.id,i)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,ownerName:this.ownerName,type:this.type})}static fromObject(i,a=null){return new t(a,i.id,{code:i.code,animated:i.animated,user:{name:i.ownerName}})}}return fu=t,fu}var yu,sh;function Yc(){if(sh)return yu;sh=1;class n extends Map{find(t,r){if(typeof t=="string"){if(typeof r>"u")return null;for(const i of this.values())if(i[t]===r)return i;return null}if(typeof t=="function"){let i=0;for(const a of this.values()){if(t(a,i,this))return a;i++}return null}return null}filter(t,r){r&&(t=t.bind(r));const i=new this.constructor;let a=0;for(const[s,o]of this)t(o,a,this)&&i.set(s,o),a++;return i}map(t,r){r&&(t=t.bind(r));const i=new Array(this.size);let a=0;for(const s of this.values())i[a]=t(s,a,this),a++;return i}}return yu=n,yu}var bu,oh;function Df(){if(oh)return bu;oh=1;const n=Yc();class e{constructor(r,i){this.fetcher=r,this.channel_id=i,this.emotes=new n}fetchBTTVEmotes(){return this.fetcher.fetchBTTVEmotes(this.id)}fetchFFZEmotes(){return this.fetcher.fetchFFZEmotes(this.id)}fetchSevenTVEmotes(){return this.fetcher.fetchSevenTVEmotes(this.id)}}return bu=e,bu}var vu,lh;function Bf(){if(lh)return vu;lh=1;const n=Zs(),e=ar();class t extends n{constructor(i,a,s){super(i,a,s),this.type="ffz"}get owner(){return this.fetcher.channels.get(this.ownerName)}_setup(i){super._setup(i),this.code=i.name,this.ownerName="owner"in i?i.owner.name:null,this.sizes="animated"in i?Object.keys(i.animated):Object.keys(i.urls),this.animated="animated"in i,this.imageType="animated"in i?"webp":"png",this.modifier=i.modifier&&(i.modifier_flags&1)!==0}toLink(i=0){return i=this.sizes[i],this.animated?e.FFZ.CDNAnimated(this.id,i):e.FFZ.CDN(this.id,i)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,sizes:this.sizes,ownerName:this.ownerName,type:this.type,modifier:this.modifier})}static fromObject(i,a=null){const s=i.sizes.reduce((o,u)=>(o[u]=u,o),{});return new t(a,i.id,{code:i.code,name:i.code,urls:s,...i.animated?{animated:s}:{},owner:{name:i.ownerName},modifier:i.modifier,modifier_flags:i.modifier})}}return vu=t,vu}var wu,uh;function Of(){if(uh)return wu;uh=1;const n=Zs(),e=ar();class t extends n{constructor(i,a,s){super(i,a,s),this.type="7tv"}get owner(){return this.fetcher.channels.get(this.ownerName)}_setup(i){super._setup(i),this.code=i.name,this.ownerName="owner"in i.data?i.data.owner.display_name:null,this.sizes=i.data.host.files.filter(a=>a.format===this.channel.format.toUpperCase()).map(a=>a.name),this.animated=i.data.animated,this.imageType=this.channel.format}toLink(i=0){return i=this.sizes[i],e.SevenTV.CDN(this.id,i)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,sizes:this.sizes,ownerName:this.ownerName,type:this.type,imageType:this.imageType})}static fromObject(i,a){const s=i.sizes.map(o=>({format:a.format.toUpperCase(),name:o}));return new t(a,i.id,{code:i.code,name:i.code,data:{animated:i.animated,owner:{display_name:i.ownerName},host:{files:s}}})}}return wu=t,wu}var xu,ch;function Uf(){if(ch)return xu;ch=1;const n=Zs(),e=ar();class t extends n{constructor(i,a,s){super(i,a,s),this.type="twitch"}get owner(){return this.channel}_setup(i){super._setup(i),this.set=i.emoticon_set,this.animated="animated"in i.formats,this.imageType="animated"in i.formats?"gif":"png"}toLink(i=0){return e.Twitch.CDN(this.id,i)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,set:this.set,type:this.type})}static fromObject(i,a=null){return new t(a,i.id,{code:i.code,animated:i.animated,emoticon_set:i.set,formats:i.animated?{animated:i.animated}:{}})}}return xu=t,xu}/*! Axios v1.10.0 Copyright (c) 2025 Matt Zabriskie and contributors */var Su,dh;function Ux(){if(dh)return Su;dh=1;function n(f,v){return function(){return f.apply(v,arguments)}}const{toString:e}=Object.prototype,{getPrototypeOf:t}=Object,{iterator:r,toStringTag:i}=Symbol,a=(f=>v=>{const S=e.call(v);return f[S]||(f[S]=S.slice(8,-1).toLowerCase())})(Object.create(null)),s=f=>(f=f.toLowerCase(),v=>a(v)===f),o=f=>v=>typeof v===f,{isArray:u}=Array,h=o("undefined");function m(f){return f!==null&&!h(f)&&f.constructor!==null&&!h(f.constructor)&&p(f.constructor.isBuffer)&&f.constructor.isBuffer(f)}const w=s("ArrayBuffer");function g(f){let v;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?v=ArrayBuffer.isView(f):v=f&&f.buffer&&w(f.buffer),v}const _=o("string"),p=o("function"),l=o("number"),d=f=>f!==null&&typeof f=="object",b=f=>f===!0||f===!1,x=f=>{if(a(f)!=="object")return!1;const v=t(f);return(v===null||v===Object.prototype||Object.getPrototypeOf(v)===null)&&!(i in f)&&!(r in f)},A=s("Date"),I=s("File"),y=s("Blob"),H=s("FileList"),E=f=>d(f)&&p(f.pipe),B=f=>{let v;return f&&(typeof FormData=="function"&&f instanceof FormData||p(f.append)&&((v=a(f))==="formdata"||v==="object"&&p(f.toString)&&f.toString()==="[object FormData]"))},j=s("URLSearchParams"),[Z,z,Te,se]=["ReadableStream","Request","Response","Headers"].map(s),D=f=>f.trim?f.trim():f.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function N(f,v,{allOwnKeys:S=!1}={}){if(f===null||typeof f>"u")return;let C,T;if(typeof f!="object"&&(f=[f]),u(f))for(C=0,T=f.length;C<T;C++)v.call(null,f[C],C,f);else{const O=S?Object.getOwnPropertyNames(f):Object.keys(f),U=O.length;let $;for(C=0;C<U;C++)$=O[C],v.call(null,f[$],$,f)}}function ae(f,v){v=v.toLowerCase();const S=Object.keys(f);let C=S.length,T;for(;C-- >0;)if(T=S[C],v===T.toLowerCase())return T;return null}const he=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Px,we=f=>!h(f)&&f!==he;function X(){const{caseless:f}=we(this)&&this||{},v={},S=(C,T)=>{const O=f&&ae(v,T)||T;x(v[O])&&x(C)?v[O]=X(v[O],C):x(C)?v[O]=X({},C):u(C)?v[O]=C.slice():v[O]=C};for(let C=0,T=arguments.length;C<T;C++)arguments[C]&&N(arguments[C],S);return v}const ht=(f,v,S,{allOwnKeys:C}={})=>(N(v,(T,O)=>{S&&p(T)?f[O]=n(T,S):f[O]=T},{allOwnKeys:C}),f),J=f=>(f.charCodeAt(0)===65279&&(f=f.slice(1)),f),Se=(f,v,S,C)=>{f.prototype=Object.create(v.prototype,C),f.prototype.constructor=f,Object.defineProperty(f,"super",{value:v.prototype}),S&&Object.assign(f.prototype,S)},Ce=(f,v,S,C)=>{let T,O,U;const $={};if(v=v||{},f==null)return v;do{for(T=Object.getOwnPropertyNames(f),O=T.length;O-- >0;)U=T[O],(!C||C(U,f,v))&&!$[U]&&(v[U]=f[U],$[U]=!0);f=S!==!1&&t(f)}while(f&&(!S||S(f,v))&&f!==Object.prototype);return v},tt=(f,v,S)=>{f=String(f),(S===void 0||S>f.length)&&(S=f.length),S-=v.length;const C=f.indexOf(v,S);return C!==-1&&C===S},Ie=f=>{if(!f)return null;if(u(f))return f;let v=f.length;if(!l(v))return null;const S=new Array(v);for(;v-- >0;)S[v]=f[v];return S},$e=(f=>v=>f&&v instanceof f)(typeof Uint8Array<"u"&&t(Uint8Array)),De=(f,v)=>{const C=(f&&f[r]).call(f);let T;for(;(T=C.next())&&!T.done;){const O=T.value;v.call(f,O[0],O[1])}},Be=(f,v)=>{let S;const C=[];for(;(S=f.exec(v))!==null;)C.push(S);return C},st=s("HTMLFormElement"),pt=f=>f.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(S,C,T){return C.toUpperCase()+T}),wt=(({hasOwnProperty:f})=>(v,S)=>f.call(v,S))(Object.prototype),Li=s("RegExp"),or=(f,v)=>{const S=Object.getOwnPropertyDescriptors(f),C={};N(S,(T,O)=>{let U;(U=v(T,O,f))!==!1&&(C[O]=U||T)}),Object.defineProperties(f,C)},Ni=f=>{or(f,(v,S)=>{if(p(f)&&["arguments","caller","callee"].indexOf(S)!==-1)return!1;const C=f[S];if(p(C)){if(v.enumerable=!1,"writable"in v){v.writable=!1;return}v.set||(v.set=()=>{throw Error("Can not rewrite read-only method '"+S+"'")})}})},lr=(f,v)=>{const S={},C=T=>{T.forEach(O=>{S[O]=!0})};return u(f)?C(f):C(String(f).split(v)),S},rt=()=>{},Ul=(f,v)=>f!=null&&Number.isFinite(f=+f)?f:v;function ql(f){return!!(f&&p(f.append)&&f[i]==="FormData"&&f[r])}const kl=f=>{const v=new Array(10),S=(C,T)=>{if(d(C)){if(v.indexOf(C)>=0)return;if(!("toJSON"in C)){v[T]=C;const O=u(C)?[]:{};return N(C,(U,$)=>{const Y=S(U,T+1);!h(Y)&&(O[$]=Y)}),v[T]=void 0,O}}return C};return S(f,0)},Ml=s("AsyncFunction"),jl=f=>f&&(d(f)||p(f))&&p(f.then)&&p(f.catch),no=((f,v)=>f?setImmediate:v?((S,C)=>(he.addEventListener("message",({source:T,data:O})=>{T===he&&O===S&&C.length&&C.shift()()},!1),T=>{C.push(T),he.postMessage(S,"*")}))(`axios@${Math.random()}`,[]):S=>setTimeout(S))(typeof setImmediate=="function",p(he.postMessage)),Ll=typeof queueMicrotask<"u"?queueMicrotask.bind(he):typeof process<"u"&&process.nextTick||no;var k={isArray:u,isArrayBuffer:w,isBuffer:m,isFormData:B,isArrayBufferView:g,isString:_,isNumber:l,isBoolean:b,isObject:d,isPlainObject:x,isReadableStream:Z,isRequest:z,isResponse:Te,isHeaders:se,isUndefined:h,isDate:A,isFile:I,isBlob:y,isRegExp:Li,isFunction:p,isStream:E,isURLSearchParams:j,isTypedArray:$e,isFileList:H,forEach:N,merge:X,extend:ht,trim:D,stripBOM:J,inherits:Se,toFlatObject:Ce,kindOf:a,kindOfTest:s,endsWith:tt,toArray:Ie,forEachEntry:De,matchAll:Be,isHTMLForm:st,hasOwnProperty:wt,hasOwnProp:wt,reduceDescriptors:or,freezeMethods:Ni,toObjectSet:lr,toCamelCase:pt,noop:rt,toFiniteNumber:Ul,findKey:ae,global:he,isContextDefined:we,isSpecCompliantForm:ql,toJSONObject:kl,isAsyncFn:Ml,isThenable:jl,setImmediate:no,asap:Ll,isIterable:f=>f!=null&&p(f[r])};function oe(f,v,S,C,T){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=f,this.name="AxiosError",v&&(this.code=v),S&&(this.config=S),C&&(this.request=C),T&&(this.response=T,this.status=T.status?T.status:null)}k.inherits(oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.status}}});const io=oe.prototype,ao={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(f=>{ao[f]={value:f}}),Object.defineProperties(oe,ao),Object.defineProperty(io,"isAxiosError",{value:!0}),oe.from=(f,v,S,C,T,O)=>{const U=Object.create(io);return k.toFlatObject(f,U,function(Y){return Y!==Error.prototype},$=>$!=="isAxiosError"),oe.call(U,f.message,v,S,C,T),U.cause=f,U.name=f.name,O&&Object.assign(U,O),U};var Nl=null;function Fi(f){return k.isPlainObject(f)||k.isArray(f)}function so(f){return k.endsWith(f,"[]")?f.slice(0,-2):f}function oo(f,v,S){return f?f.concat(v).map(function(T,O){return T=so(T),!S&&O?"["+T+"]":T}).join(S?".":""):v}function Fl(f){return k.isArray(f)&&!f.some(Fi)}const $l=k.toFlatObject(k,{},null,function(v){return/^is[A-Z]/.test(v)});function ur(f,v,S){if(!k.isObject(f))throw new TypeError("target must be an object");v=v||new FormData,S=k.toFlatObject(S,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ce,ne){return!k.isUndefined(ne[ce])});const C=S.metaTokens,T=S.visitor||Q,O=S.dots,U=S.indexes,Y=(S.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(v);if(!k.isFunction(T))throw new TypeError("visitor must be a function");function G(ee){if(ee===null)return"";if(k.isDate(ee))return ee.toISOString();if(k.isBoolean(ee))return ee.toString();if(!Y&&k.isBlob(ee))throw new oe("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(ee)||k.isTypedArray(ee)?Y&&typeof Blob=="function"?new Blob([ee]):Buffer.from(ee):ee}function Q(ee,ce,ne){let He=ee;if(ee&&!ne&&typeof ee=="object"){if(k.endsWith(ce,"{}"))ce=C?ce:ce.slice(0,-2),ee=JSON.stringify(ee);else if(k.isArray(ee)&&Fl(ee)||(k.isFileList(ee)||k.endsWith(ce,"[]"))&&(He=k.toArray(ee)))return ce=so(ce),He.forEach(function(Le,mt){!(k.isUndefined(Le)||Le===null)&&v.append(U===!0?oo([ce],mt,O):U===null?ce:ce+"[]",G(Le))}),!1}return Fi(ee)?!0:(v.append(oo(ne,ce,O),G(ee)),!1)}const re=[],ye=Object.assign($l,{defaultVisitor:Q,convertValue:G,isVisitable:Fi});function Oe(ee,ce){if(!k.isUndefined(ee)){if(re.indexOf(ee)!==-1)throw Error("Circular reference detected in "+ce.join("."));re.push(ee),k.forEach(ee,function(He,Ue){(!(k.isUndefined(He)||He===null)&&T.call(v,He,k.isString(Ue)?Ue.trim():Ue,ce,ye))===!0&&Oe(He,ce?ce.concat(Ue):[Ue])}),re.pop()}}if(!k.isObject(f))throw new TypeError("data must be an object");return Oe(f),v}function lo(f){const v={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(f).replace(/[!'()~]|%20|%00/g,function(C){return v[C]})}function $i(f,v){this._pairs=[],f&&ur(f,this,v)}const uo=$i.prototype;uo.append=function(v,S){this._pairs.push([v,S])},uo.toString=function(v){const S=v?function(C){return v.call(this,C,lo)}:lo;return this._pairs.map(function(T){return S(T[0])+"="+S(T[1])},"").join("&")};function Gl(f){return encodeURIComponent(f).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function co(f,v,S){if(!v)return f;const C=S&&S.encode||Gl;k.isFunction(S)&&(S={serialize:S});const T=S&&S.serialize;let O;if(T?O=T(v,S):O=k.isURLSearchParams(v)?v.toString():new $i(v,S).toString(C),O){const U=f.indexOf("#");U!==-1&&(f=f.slice(0,U)),f+=(f.indexOf("?")===-1?"?":"&")+O}return f}class Ql{constructor(){this.handlers=[]}use(v,S,C){return this.handlers.push({fulfilled:v,rejected:S,synchronous:C?C.synchronous:!1,runWhen:C?C.runWhen:null}),this.handlers.length-1}eject(v){this.handlers[v]&&(this.handlers[v]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(v){k.forEach(this.handlers,function(C){C!==null&&v(C)})}}var ho=Ql,po={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wl=typeof URLSearchParams<"u"?URLSearchParams:$i,Vl=typeof FormData<"u"?FormData:null,zl=typeof Blob<"u"?Blob:null,Kl={isBrowser:!0,classes:{URLSearchParams:Wl,FormData:Vl,Blob:zl},protocols:["http","https","file","blob","url","data"]};const Gi=typeof window<"u"&&typeof document<"u",Qi=typeof navigator=="object"&&navigator||void 0,Xl=Gi&&(!Qi||["ReactNative","NativeScript","NS"].indexOf(Qi.product)<0),Jl=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Yl=Gi&&window.location.href||"http://localhost";var Zl=Object.freeze({__proto__:null,hasBrowserEnv:Gi,hasStandardBrowserWebWorkerEnv:Jl,hasStandardBrowserEnv:Xl,navigator:Qi,origin:Yl}),je={...Zl,...Kl};function eu(f,v){return ur(f,new je.classes.URLSearchParams,Object.assign({visitor:function(S,C,T,O){return je.isNode&&k.isBuffer(S)?(this.append(C,S.toString("base64")),!1):O.defaultVisitor.apply(this,arguments)}},v))}function tu(f){return k.matchAll(/\w+|\[(\w*)]/g,f).map(v=>v[0]==="[]"?"":v[1]||v[0])}function ru(f){const v={},S=Object.keys(f);let C;const T=S.length;let O;for(C=0;C<T;C++)O=S[C],v[O]=f[O];return v}function mo(f){function v(S,C,T,O){let U=S[O++];if(U==="__proto__")return!0;const $=Number.isFinite(+U),Y=O>=S.length;return U=!U&&k.isArray(T)?T.length:U,Y?(k.hasOwnProp(T,U)?T[U]=[T[U],C]:T[U]=C,!$):((!T[U]||!k.isObject(T[U]))&&(T[U]=[]),v(S,C,T[U],O)&&k.isArray(T[U])&&(T[U]=ru(T[U])),!$)}if(k.isFormData(f)&&k.isFunction(f.entries)){const S={};return k.forEachEntry(f,(C,T)=>{v(tu(C),T,S,0)}),S}return null}function nu(f,v,S){if(k.isString(f))try{return(v||JSON.parse)(f),k.trim(f)}catch(C){if(C.name!=="SyntaxError")throw C}return(S||JSON.stringify)(f)}const Wi={transitional:po,adapter:["xhr","http","fetch"],transformRequest:[function(v,S){const C=S.getContentType()||"",T=C.indexOf("application/json")>-1,O=k.isObject(v);if(O&&k.isHTMLForm(v)&&(v=new FormData(v)),k.isFormData(v))return T?JSON.stringify(mo(v)):v;if(k.isArrayBuffer(v)||k.isBuffer(v)||k.isStream(v)||k.isFile(v)||k.isBlob(v)||k.isReadableStream(v))return v;if(k.isArrayBufferView(v))return v.buffer;if(k.isURLSearchParams(v))return S.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),v.toString();let $;if(O){if(C.indexOf("application/x-www-form-urlencoded")>-1)return eu(v,this.formSerializer).toString();if(($=k.isFileList(v))||C.indexOf("multipart/form-data")>-1){const Y=this.env&&this.env.FormData;return ur($?{"files[]":v}:v,Y&&new Y,this.formSerializer)}}return O||T?(S.setContentType("application/json",!1),nu(v)):v}],transformResponse:[function(v){const S=this.transitional||Wi.transitional,C=S&&S.forcedJSONParsing,T=this.responseType==="json";if(k.isResponse(v)||k.isReadableStream(v))return v;if(v&&k.isString(v)&&(C&&!this.responseType||T)){const U=!(S&&S.silentJSONParsing)&&T;try{return JSON.parse(v)}catch($){if(U)throw $.name==="SyntaxError"?oe.from($,oe.ERR_BAD_RESPONSE,this,null,this.response):$}}return v}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:je.classes.FormData,Blob:je.classes.Blob},validateStatus:function(v){return v>=200&&v<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],f=>{Wi.headers[f]={}});var Vi=Wi;const iu=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var au=f=>{const v={};let S,C,T;return f&&f.split(`
`).forEach(function(U){T=U.indexOf(":"),S=U.substring(0,T).trim().toLowerCase(),C=U.substring(T+1).trim(),!(!S||v[S]&&iu[S])&&(S==="set-cookie"?v[S]?v[S].push(C):v[S]=[C]:v[S]=v[S]?v[S]+", "+C:C)}),v};const _o=Symbol("internals");function Ot(f){return f&&String(f).trim().toLowerCase()}function cr(f){return f===!1||f==null?f:k.isArray(f)?f.map(cr):String(f)}function su(f){const v=Object.create(null),S=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let C;for(;C=S.exec(f);)v[C[1]]=C[2];return v}const ou=f=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(f.trim());function zi(f,v,S,C,T){if(k.isFunction(C))return C.call(this,v,S);if(T&&(v=S),!!k.isString(v)){if(k.isString(C))return v.indexOf(C)!==-1;if(k.isRegExp(C))return C.test(v)}}function lu(f){return f.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(v,S,C)=>S.toUpperCase()+C)}function dr(f,v){const S=k.toCamelCase(" "+v);["get","set","has"].forEach(C=>{Object.defineProperty(f,C+S,{value:function(T,O,U){return this[C].call(this,v,T,O,U)},configurable:!0})})}class go{constructor(v){v&&this.set(v)}set(v,S,C){const T=this;function O($,Y,G){const Q=Ot(Y);if(!Q)throw new Error("header name must be a non-empty string");const re=k.findKey(T,Q);(!re||T[re]===void 0||G===!0||G===void 0&&T[re]!==!1)&&(T[re||Y]=cr($))}const U=($,Y)=>k.forEach($,(G,Q)=>O(G,Q,Y));if(k.isPlainObject(v)||v instanceof this.constructor)U(v,S);else if(k.isString(v)&&(v=v.trim())&&!ou(v))U(au(v),S);else if(k.isObject(v)&&k.isIterable(v)){let $={},Y,G;for(const Q of v){if(!k.isArray(Q))throw TypeError("Object iterator must return a key-value pair");$[G=Q[0]]=(Y=$[G])?k.isArray(Y)?[...Y,Q[1]]:[Y,Q[1]]:Q[1]}U($,S)}else v!=null&&O(S,v,C);return this}get(v,S){if(v=Ot(v),v){const C=k.findKey(this,v);if(C){const T=this[C];if(!S)return T;if(S===!0)return su(T);if(k.isFunction(S))return S.call(this,T,C);if(k.isRegExp(S))return S.exec(T);throw new TypeError("parser must be boolean|regexp|function")}}}has(v,S){if(v=Ot(v),v){const C=k.findKey(this,v);return!!(C&&this[C]!==void 0&&(!S||zi(this,this[C],C,S)))}return!1}delete(v,S){const C=this;let T=!1;function O(U){if(U=Ot(U),U){const $=k.findKey(C,U);$&&(!S||zi(C,C[$],$,S))&&(delete C[$],T=!0)}}return k.isArray(v)?v.forEach(O):O(v),T}clear(v){const S=Object.keys(this);let C=S.length,T=!1;for(;C--;){const O=S[C];(!v||zi(this,this[O],O,v,!0))&&(delete this[O],T=!0)}return T}normalize(v){const S=this,C={};return k.forEach(this,(T,O)=>{const U=k.findKey(C,O);if(U){S[U]=cr(T),delete S[O];return}const $=v?lu(O):String(O).trim();$!==O&&delete S[O],S[$]=cr(T),C[$]=!0}),this}concat(...v){return this.constructor.concat(this,...v)}toJSON(v){const S=Object.create(null);return k.forEach(this,(C,T)=>{C!=null&&C!==!1&&(S[T]=v&&k.isArray(C)?C.join(", "):C)}),S}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([v,S])=>v+": "+S).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(v){return v instanceof this?v:new this(v)}static concat(v,...S){const C=new this(v);return S.forEach(T=>C.set(T)),C}static accessor(v){const C=(this[_o]=this[_o]={accessors:{}}).accessors,T=this.prototype;function O(U){const $=Ot(U);C[$]||(dr(T,U),C[$]=!0)}return k.isArray(v)?v.forEach(O):O(v),this}}go.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),k.reduceDescriptors(go.prototype,({value:f},v)=>{let S=v[0].toUpperCase()+v.slice(1);return{get:()=>f,set(C){this[S]=C}}}),k.freezeMethods(go);var nt=go;function uu(f,v){const S=this||Vi,C=v||S,T=nt.from(C.headers);let O=C.data;return k.forEach(f,function($){O=$.call(S,O,T.normalize(),v?v.status:void 0)}),T.normalize(),O}function Md(f){return!!(f&&f.__CANCEL__)}function hr(f,v,S){oe.call(this,f??"canceled",oe.ERR_CANCELED,v,S),this.name="CanceledError"}k.inherits(hr,oe,{__CANCEL__:!0});function jd(f,v,S){const C=S.config.validateStatus;!S.status||!C||C(S.status)?f(S):v(new oe("Request failed with status code "+S.status,[oe.ERR_BAD_REQUEST,oe.ERR_BAD_RESPONSE][Math.floor(S.status/100)-4],S.config,S.request,S))}function lx(f){const v=/^([-+\w]{1,25})(:?\/\/|:)/.exec(f);return v&&v[1]||""}function ux(f,v){f=f||10;const S=new Array(f),C=new Array(f);let T=0,O=0,U;return v=v!==void 0?v:1e3,function(Y){const G=Date.now(),Q=C[O];U||(U=G),S[T]=Y,C[T]=G;let re=O,ye=0;for(;re!==T;)ye+=S[re++],re=re%f;if(T=(T+1)%f,T===O&&(O=(O+1)%f),G-U<v)return;const Oe=Q&&G-Q;return Oe?Math.round(ye*1e3/Oe):void 0}}function cx(f,v){let S=0,C=1e3/v,T,O;const U=(G,Q=Date.now())=>{S=Q,T=null,O&&(clearTimeout(O),O=null),f.apply(null,G)};return[(...G)=>{const Q=Date.now(),re=Q-S;re>=C?U(G,Q):(T=G,O||(O=setTimeout(()=>{O=null,U(T)},C-re)))},()=>T&&U(T)]}const fo=(f,v,S=3)=>{let C=0;const T=ux(50,250);return cx(O=>{const U=O.loaded,$=O.lengthComputable?O.total:void 0,Y=U-C,G=T(Y),Q=U<=$;C=U;const re={loaded:U,total:$,progress:$?U/$:void 0,bytes:Y,rate:G||void 0,estimated:G&&$&&Q?($-U)/G:void 0,event:O,lengthComputable:$!=null,[v?"download":"upload"]:!0};f(re)},S)},Ld=(f,v)=>{const S=f!=null;return[C=>v[0]({lengthComputable:S,total:f,loaded:C}),v[1]]},Nd=f=>(...v)=>k.asap(()=>f(...v));var dx=je.hasStandardBrowserEnv?((f,v)=>S=>(S=new URL(S,je.origin),f.protocol===S.protocol&&f.host===S.host&&(v||f.port===S.port)))(new URL(je.origin),je.navigator&&/(msie|trident)/i.test(je.navigator.userAgent)):()=>!0,hx=je.hasStandardBrowserEnv?{write(f,v,S,C,T,O){const U=[f+"="+encodeURIComponent(v)];k.isNumber(S)&&U.push("expires="+new Date(S).toGMTString()),k.isString(C)&&U.push("path="+C),k.isString(T)&&U.push("domain="+T),O===!0&&U.push("secure"),document.cookie=U.join("; ")},read(f){const v=document.cookie.match(new RegExp("(^|;\\s*)("+f+")=([^;]*)"));return v?decodeURIComponent(v[3]):null},remove(f){this.write(f,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function px(f){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(f)}function mx(f,v){return v?f.replace(/\/?\/$/,"")+"/"+v.replace(/^\/+/,""):f}function Fd(f,v,S){let C=!px(v);return f&&(C||S==!1)?mx(f,v):v}const $d=f=>f instanceof nt?{...f}:f;function Ut(f,v){v=v||{};const S={};function C(G,Q,re,ye){return k.isPlainObject(G)&&k.isPlainObject(Q)?k.merge.call({caseless:ye},G,Q):k.isPlainObject(Q)?k.merge({},Q):k.isArray(Q)?Q.slice():Q}function T(G,Q,re,ye){if(k.isUndefined(Q)){if(!k.isUndefined(G))return C(void 0,G,re,ye)}else return C(G,Q,re,ye)}function O(G,Q){if(!k.isUndefined(Q))return C(void 0,Q)}function U(G,Q){if(k.isUndefined(Q)){if(!k.isUndefined(G))return C(void 0,G)}else return C(void 0,Q)}function $(G,Q,re){if(re in v)return C(G,Q);if(re in f)return C(void 0,G)}const Y={url:O,method:O,data:O,baseURL:U,transformRequest:U,transformResponse:U,paramsSerializer:U,timeout:U,timeoutMessage:U,withCredentials:U,withXSRFToken:U,adapter:U,responseType:U,xsrfCookieName:U,xsrfHeaderName:U,onUploadProgress:U,onDownloadProgress:U,decompress:U,maxContentLength:U,maxBodyLength:U,beforeRedirect:U,transport:U,httpAgent:U,httpsAgent:U,cancelToken:U,socketPath:U,responseEncoding:U,validateStatus:$,headers:(G,Q,re)=>T($d(G),$d(Q),re,!0)};return k.forEach(Object.keys(Object.assign({},f,v)),function(Q){const re=Y[Q]||T,ye=re(f[Q],v[Q],Q);k.isUndefined(ye)&&re!==$||(S[Q]=ye)}),S}var Gd=f=>{const v=Ut({},f);let{data:S,withXSRFToken:C,xsrfHeaderName:T,xsrfCookieName:O,headers:U,auth:$}=v;v.headers=U=nt.from(U),v.url=co(Fd(v.baseURL,v.url,v.allowAbsoluteUrls),f.params,f.paramsSerializer),$&&U.set("Authorization","Basic "+btoa(($.username||"")+":"+($.password?unescape(encodeURIComponent($.password)):"")));let Y;if(k.isFormData(S)){if(je.hasStandardBrowserEnv||je.hasStandardBrowserWebWorkerEnv)U.setContentType(void 0);else if((Y=U.getContentType())!==!1){const[G,...Q]=Y?Y.split(";").map(re=>re.trim()).filter(Boolean):[];U.setContentType([G||"multipart/form-data",...Q].join("; "))}}if(je.hasStandardBrowserEnv&&(C&&k.isFunction(C)&&(C=C(v)),C||C!==!1&&dx(v.url))){const G=T&&O&&hx.read(O);G&&U.set(T,G)}return v},_x=typeof XMLHttpRequest<"u"&&function(f){return new Promise(function(S,C){const T=Gd(f);let O=T.data;const U=nt.from(T.headers).normalize();let{responseType:$,onUploadProgress:Y,onDownloadProgress:G}=T,Q,re,ye,Oe,ee;function ce(){Oe&&Oe(),ee&&ee(),T.cancelToken&&T.cancelToken.unsubscribe(Q),T.signal&&T.signal.removeEventListener("abort",Q)}let ne=new XMLHttpRequest;ne.open(T.method.toUpperCase(),T.url,!0),ne.timeout=T.timeout;function He(){if(!ne)return;const Le=nt.from("getAllResponseHeaders"in ne&&ne.getAllResponseHeaders()),Ge={data:!$||$==="text"||$==="json"?ne.responseText:ne.response,status:ne.status,statusText:ne.statusText,headers:Le,config:f,request:ne};jd(function(qt){S(qt),ce()},function(qt){C(qt),ce()},Ge),ne=null}"onloadend"in ne?ne.onloadend=He:ne.onreadystatechange=function(){!ne||ne.readyState!==4||ne.status===0&&!(ne.responseURL&&ne.responseURL.indexOf("file:")===0)||setTimeout(He)},ne.onabort=function(){ne&&(C(new oe("Request aborted",oe.ECONNABORTED,f,ne)),ne=null)},ne.onerror=function(){C(new oe("Network Error",oe.ERR_NETWORK,f,ne)),ne=null},ne.ontimeout=function(){let mt=T.timeout?"timeout of "+T.timeout+"ms exceeded":"timeout exceeded";const Ge=T.transitional||po;T.timeoutErrorMessage&&(mt=T.timeoutErrorMessage),C(new oe(mt,Ge.clarifyTimeoutError?oe.ETIMEDOUT:oe.ECONNABORTED,f,ne)),ne=null},O===void 0&&U.setContentType(null),"setRequestHeader"in ne&&k.forEach(U.toJSON(),function(mt,Ge){ne.setRequestHeader(Ge,mt)}),k.isUndefined(T.withCredentials)||(ne.withCredentials=!!T.withCredentials),$&&$!=="json"&&(ne.responseType=T.responseType),G&&([ye,ee]=fo(G,!0),ne.addEventListener("progress",ye)),Y&&ne.upload&&([re,Oe]=fo(Y),ne.upload.addEventListener("progress",re),ne.upload.addEventListener("loadend",Oe)),(T.cancelToken||T.signal)&&(Q=Le=>{ne&&(C(!Le||Le.type?new hr(null,f,ne):Le),ne.abort(),ne=null)},T.cancelToken&&T.cancelToken.subscribe(Q),T.signal&&(T.signal.aborted?Q():T.signal.addEventListener("abort",Q)));const Ue=lx(T.url);if(Ue&&je.protocols.indexOf(Ue)===-1){C(new oe("Unsupported protocol "+Ue+":",oe.ERR_BAD_REQUEST,f));return}ne.send(O||null)})},gx=(f,v)=>{const{length:S}=f=f?f.filter(Boolean):[];if(v||S){let C=new AbortController,T;const O=function(G){if(!T){T=!0,$();const Q=G instanceof Error?G:this.reason;C.abort(Q instanceof oe?Q:new hr(Q instanceof Error?Q.message:Q))}};let U=v&&setTimeout(()=>{U=null,O(new oe(`timeout ${v} of ms exceeded`,oe.ETIMEDOUT))},v);const $=()=>{f&&(U&&clearTimeout(U),U=null,f.forEach(G=>{G.unsubscribe?G.unsubscribe(O):G.removeEventListener("abort",O)}),f=null)};f.forEach(G=>G.addEventListener("abort",O));const{signal:Y}=C;return Y.unsubscribe=()=>k.asap($),Y}};const fx=function*(f,v){let S=f.byteLength;if(S<v){yield f;return}let C=0,T;for(;C<S;)T=C+v,yield f.slice(C,T),C=T},yx=async function*(f,v){for await(const S of bx(f))yield*fx(S,v)},bx=async function*(f){if(f[Symbol.asyncIterator]){yield*f;return}const v=f.getReader();try{for(;;){const{done:S,value:C}=await v.read();if(S)break;yield C}}finally{await v.cancel()}},Qd=(f,v,S,C)=>{const T=yx(f,v);let O=0,U,$=Y=>{U||(U=!0,C&&C(Y))};return new ReadableStream({async pull(Y){try{const{done:G,value:Q}=await T.next();if(G){$(),Y.close();return}let re=Q.byteLength;if(S){let ye=O+=re;S(ye)}Y.enqueue(new Uint8Array(Q))}catch(G){throw $(G),G}},cancel(Y){return $(Y),T.return()}},{highWaterMark:2})},yo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Wd=yo&&typeof ReadableStream=="function",vx=yo&&(typeof TextEncoder=="function"?(f=>v=>f.encode(v))(new TextEncoder):async f=>new Uint8Array(await new Response(f).arrayBuffer())),Vd=(f,...v)=>{try{return!!f(...v)}catch{return!1}},wx=Wd&&Vd(()=>{let f=!1;const v=new Request(je.origin,{body:new ReadableStream,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!v}),zd=64*1024,cu=Wd&&Vd(()=>k.isReadableStream(new Response("").body)),bo={stream:cu&&(f=>f.body)};yo&&(f=>{["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!bo[v]&&(bo[v]=k.isFunction(f[v])?S=>S[v]():(S,C)=>{throw new oe(`Response type '${v}' is not supported`,oe.ERR_NOT_SUPPORT,C)})})})(new Response);const xx=async f=>{if(f==null)return 0;if(k.isBlob(f))return f.size;if(k.isSpecCompliantForm(f))return(await new Request(je.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(k.isArrayBufferView(f)||k.isArrayBuffer(f))return f.byteLength;if(k.isURLSearchParams(f)&&(f=f+""),k.isString(f))return(await vx(f)).byteLength},Sx=async(f,v)=>{const S=k.toFiniteNumber(f.getContentLength());return S??xx(v)};var Cx=yo&&(async f=>{let{url:v,method:S,data:C,signal:T,cancelToken:O,timeout:U,onDownloadProgress:$,onUploadProgress:Y,responseType:G,headers:Q,withCredentials:re="same-origin",fetchOptions:ye}=Gd(f);G=G?(G+"").toLowerCase():"text";let Oe=gx([T,O&&O.toAbortSignal()],U),ee;const ce=Oe&&Oe.unsubscribe&&(()=>{Oe.unsubscribe()});let ne;try{if(Y&&wx&&S!=="get"&&S!=="head"&&(ne=await Sx(Q,C))!==0){let Ge=new Request(v,{method:"POST",body:C,duplex:"half"}),xt;if(k.isFormData(C)&&(xt=Ge.headers.get("content-type"))&&Q.setContentType(xt),Ge.body){const[qt,Co]=Ld(ne,fo(Nd(Y)));C=Qd(Ge.body,zd,qt,Co)}}k.isString(re)||(re=re?"include":"omit");const He="credentials"in Request.prototype;ee=new Request(v,{...ye,signal:Oe,method:S.toUpperCase(),headers:Q.normalize().toJSON(),body:C,duplex:"half",credentials:He?re:void 0});let Ue=await fetch(ee,ye);const Le=cu&&(G==="stream"||G==="response");if(cu&&($||Le&&ce)){const Ge={};["status","statusText","headers"].forEach(th=>{Ge[th]=Ue[th]});const xt=k.toFiniteNumber(Ue.headers.get("content-length")),[qt,Co]=$&&Ld(xt,fo(Nd($),!0))||[];Ue=new Response(Qd(Ue.body,zd,qt,()=>{Co&&Co(),ce&&ce()}),Ge)}G=G||"text";let mt=await bo[k.findKey(bo,G)||"text"](Ue,f);return!Le&&ce&&ce(),await new Promise((Ge,xt)=>{jd(Ge,xt,{data:mt,headers:nt.from(Ue.headers),status:Ue.status,statusText:Ue.statusText,config:f,request:ee})})}catch(He){throw ce&&ce(),He&&He.name==="TypeError"&&/Load failed|fetch/i.test(He.message)?Object.assign(new oe("Network Error",oe.ERR_NETWORK,f,ee),{cause:He.cause||He}):oe.from(He,He&&He.code,f,ee)}});const du={http:Nl,xhr:_x,fetch:Cx};k.forEach(du,(f,v)=>{if(f){try{Object.defineProperty(f,"name",{value:v})}catch{}Object.defineProperty(f,"adapterName",{value:v})}});const Kd=f=>`- ${f}`,Ex=f=>k.isFunction(f)||f===null||f===!1;var Xd={getAdapter:f=>{f=k.isArray(f)?f:[f];const{length:v}=f;let S,C;const T={};for(let O=0;O<v;O++){S=f[O];let U;if(C=S,!Ex(S)&&(C=du[(U=String(S)).toLowerCase()],C===void 0))throw new oe(`Unknown adapter '${U}'`);if(C)break;T[U||"#"+O]=C}if(!C){const O=Object.entries(T).map(([$,Y])=>`adapter ${$} `+(Y===!1?"is not supported by the environment":"is not available in the build"));let U=v?O.length>1?`since :
`+O.map(Kd).join(`
`):" "+Kd(O[0]):"as no adapter specified";throw new oe("There is no suitable adapter to dispatch the request "+U,"ERR_NOT_SUPPORT")}return C},adapters:du};function hu(f){if(f.cancelToken&&f.cancelToken.throwIfRequested(),f.signal&&f.signal.aborted)throw new hr(null,f)}function Jd(f){return hu(f),f.headers=nt.from(f.headers),f.data=uu.call(f,f.transformRequest),["post","put","patch"].indexOf(f.method)!==-1&&f.headers.setContentType("application/x-www-form-urlencoded",!1),Xd.getAdapter(f.adapter||Vi.adapter)(f).then(function(C){return hu(f),C.data=uu.call(f,f.transformResponse,C),C.headers=nt.from(C.headers),C},function(C){return Md(C)||(hu(f),C&&C.response&&(C.response.data=uu.call(f,f.transformResponse,C.response),C.response.headers=nt.from(C.response.headers))),Promise.reject(C)})}const Yd="1.10.0",vo={};["object","boolean","number","function","string","symbol"].forEach((f,v)=>{vo[f]=function(C){return typeof C===f||"a"+(v<1?"n ":" ")+f}});const Zd={};vo.transitional=function(v,S,C){function T(O,U){return"[Axios v"+Yd+"] Transitional option '"+O+"'"+U+(C?". "+C:"")}return(O,U,$)=>{if(v===!1)throw new oe(T(U," has been removed"+(S?" in "+S:"")),oe.ERR_DEPRECATED);return S&&!Zd[U]&&(Zd[U]=!0,console.warn(T(U," has been deprecated since v"+S+" and will be removed in the near future"))),v?v(O,U,$):!0}},vo.spelling=function(v){return(S,C)=>(console.warn(`${C} is likely a misspelling of ${v}`),!0)};function Hx(f,v,S){if(typeof f!="object")throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);const C=Object.keys(f);let T=C.length;for(;T-- >0;){const O=C[T],U=v[O];if(U){const $=f[O],Y=$===void 0||U($,O,f);if(Y!==!0)throw new oe("option "+O+" must be "+Y,oe.ERR_BAD_OPTION_VALUE);continue}if(S!==!0)throw new oe("Unknown option "+O,oe.ERR_BAD_OPTION)}}var wo={assertOptions:Hx,validators:vo};const ot=wo.validators;class xo{constructor(v){this.defaults=v||{},this.interceptors={request:new ho,response:new ho}}async request(v,S){try{return await this._request(v,S)}catch(C){if(C instanceof Error){let T={};Error.captureStackTrace?Error.captureStackTrace(T):T=new Error;const O=T.stack?T.stack.replace(/^.+\n/,""):"";try{C.stack?O&&!String(C.stack).endsWith(O.replace(/^.+\n.+\n/,""))&&(C.stack+=`
`+O):C.stack=O}catch{}}throw C}}_request(v,S){typeof v=="string"?(S=S||{},S.url=v):S=v||{},S=Ut(this.defaults,S);const{transitional:C,paramsSerializer:T,headers:O}=S;C!==void 0&&wo.assertOptions(C,{silentJSONParsing:ot.transitional(ot.boolean),forcedJSONParsing:ot.transitional(ot.boolean),clarifyTimeoutError:ot.transitional(ot.boolean)},!1),T!=null&&(k.isFunction(T)?S.paramsSerializer={serialize:T}:wo.assertOptions(T,{encode:ot.function,serialize:ot.function},!0)),S.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?S.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:S.allowAbsoluteUrls=!0),wo.assertOptions(S,{baseUrl:ot.spelling("baseURL"),withXsrfToken:ot.spelling("withXSRFToken")},!0),S.method=(S.method||this.defaults.method||"get").toLowerCase();let U=O&&k.merge(O.common,O[S.method]);O&&k.forEach(["delete","get","head","post","put","patch","common"],ee=>{delete O[ee]}),S.headers=nt.concat(U,O);const $=[];let Y=!0;this.interceptors.request.forEach(function(ce){typeof ce.runWhen=="function"&&ce.runWhen(S)===!1||(Y=Y&&ce.synchronous,$.unshift(ce.fulfilled,ce.rejected))});const G=[];this.interceptors.response.forEach(function(ce){G.push(ce.fulfilled,ce.rejected)});let Q,re=0,ye;if(!Y){const ee=[Jd.bind(this),void 0];for(ee.unshift.apply(ee,$),ee.push.apply(ee,G),ye=ee.length,Q=Promise.resolve(S);re<ye;)Q=Q.then(ee[re++],ee[re++]);return Q}ye=$.length;let Oe=S;for(re=0;re<ye;){const ee=$[re++],ce=$[re++];try{Oe=ee(Oe)}catch(ne){ce.call(this,ne);break}}try{Q=Jd.call(this,Oe)}catch(ee){return Promise.reject(ee)}for(re=0,ye=G.length;re<ye;)Q=Q.then(G[re++],G[re++]);return Q}getUri(v){v=Ut(this.defaults,v);const S=Fd(v.baseURL,v.url,v.allowAbsoluteUrls);return co(S,v.params,v.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(v){xo.prototype[v]=function(S,C){return this.request(Ut(C||{},{method:v,url:S,data:(C||{}).data}))}}),k.forEach(["post","put","patch"],function(v){function S(C){return function(O,U,$){return this.request(Ut($||{},{method:v,headers:C?{"Content-Type":"multipart/form-data"}:{},url:O,data:U}))}}xo.prototype[v]=S(),xo.prototype[v+"Form"]=S(!0)});var So=xo;class pu{constructor(v){if(typeof v!="function")throw new TypeError("executor must be a function.");let S;this.promise=new Promise(function(O){S=O});const C=this;this.promise.then(T=>{if(!C._listeners)return;let O=C._listeners.length;for(;O-- >0;)C._listeners[O](T);C._listeners=null}),this.promise.then=T=>{let O;const U=new Promise($=>{C.subscribe($),O=$}).then(T);return U.cancel=function(){C.unsubscribe(O)},U},v(function(O,U,$){C.reason||(C.reason=new hr(O,U,$),S(C.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(v){if(this.reason){v(this.reason);return}this._listeners?this._listeners.push(v):this._listeners=[v]}unsubscribe(v){if(!this._listeners)return;const S=this._listeners.indexOf(v);S!==-1&&this._listeners.splice(S,1)}toAbortSignal(){const v=new AbortController,S=C=>{v.abort(C)};return this.subscribe(S),v.signal.unsubscribe=()=>this.unsubscribe(S),v.signal}static source(){let v;return{token:new pu(function(T){v=T}),cancel:v}}}var Rx=pu;function Ax(f){return function(S){return f.apply(null,S)}}function Tx(f){return k.isObject(f)&&f.isAxiosError===!0}const mu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mu).forEach(([f,v])=>{mu[v]=f});var Ix=mu;function eh(f){const v=new So(f),S=n(So.prototype.request,v);return k.extend(S,So.prototype,v,{allOwnKeys:!0}),k.extend(S,v,null,{allOwnKeys:!0}),S.create=function(T){return eh(Ut(f,T))},S}const Pe=eh(Vi);return Pe.Axios=So,Pe.CanceledError=hr,Pe.CancelToken=Rx,Pe.isCancel=Md,Pe.VERSION=Yd,Pe.toFormData=ur,Pe.AxiosError=oe,Pe.Cancel=Pe.CanceledError,Pe.all=function(v){return Promise.all(v)},Pe.spread=Ax,Pe.isAxiosError=Tx,Pe.mergeConfig=Ut,Pe.AxiosHeaders=nt,Pe.formToJSON=f=>mo(k.isHTMLForm(f)?new FormData(f):f),Pe.getAdapter=Xd.getAdapter,Pe.HttpStatusCode=Ix,Pe.default=Pe,Su=Pe,Su}var Cu={},pr={},pc=function(n,e){return pc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},pc(n,e)};function gl(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");pc(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Po=function(){return Po=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Po.apply(this,arguments)};function qf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function P(n,e,t,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var o=n.length-1;o>=0;o--)(s=n[o])&&(a=(i<3?s(a):i>3?s(e,t,a):s(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function kf(n,e){return function(t,r){e(t,r,n)}}function Mf(n,e,t,r,i,a){function s(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var o=r.kind,u=o==="getter"?"get":o==="setter"?"set":"value",h=!e&&n?r.static?n:n.prototype:null,m=e||(h?Object.getOwnPropertyDescriptor(h,r.name):{}),w,g=!1,_=t.length-1;_>=0;_--){var p={};for(var l in r)p[l]=l==="access"?{}:r[l];for(var l in r.access)p.access[l]=r.access[l];p.addInitializer=function(b){if(g)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(b||null))};var d=(0,t[_])(o==="accessor"?{get:m.get,set:m.set}:m[u],p);if(o==="accessor"){if(d===void 0)continue;if(d===null||typeof d!="object")throw new TypeError("Object expected");(w=s(d.get))&&(m.get=w),(w=s(d.set))&&(m.set=w),(w=s(d.init))&&i.unshift(w)}else(w=s(d))&&(o==="field"?i.unshift(w):m[u]=w)}h&&Object.defineProperty(h,r.name,m),g=!0}function jf(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function Lf(n){return typeof n=="symbol"?n:"".concat(n)}function Nf(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function Ff(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Zc(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(m){try{h(r.next(m))}catch(w){s(w)}}function u(m){try{h(r.throw(m))}catch(w){s(w)}}function h(m){m.done?a(m.value):i(m.value).then(o,u)}h((r=r.apply(n,e||[])).next())})}function fl(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(h){return function(m){return u([h,m])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(t=0)),t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(m){h=[6,m],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var yl=Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]};function $f(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&yl(e,n,t)}function Do(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bt(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a}function Gf(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Bt(arguments[e]));return n}function Qf(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Ti(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function Ii(n){return this instanceof Ii?(this.v=n,this):new Ii(n)}function Wf(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(p){return Promise.resolve(p).then(_,w)}}function o(_,p){r[_]&&(i[_]=function(l){return new Promise(function(d,b){a.push([_,l,d,b])>1||u(_,l)})},p&&(i[_]=p(i[_])))}function u(_,p){try{h(r[_](p))}catch(l){g(a[0][3],l)}}function h(_){_.value instanceof Ii?Promise.resolve(_.value.v).then(m,w):g(a[0][2],_)}function m(_){u("next",_)}function w(_){u("throw",_)}function g(_,p){_(p),a.shift(),a.length&&u(a[0][0],a[0][1])}}function Vf(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=n[i]?function(s){return(t=!t)?{value:Ii(n[i](s)),done:!1}:a?a(s):s}:a}}function zf(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Do=="function"?Do(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(s){return new Promise(function(o,u){s=n[a](s),i(o,u,s.done,s.value)})}}function i(a,s,o,u){Promise.resolve(u).then(function(h){a({value:h,done:o})},s)}}function Kf(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var qx=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},mc=function(n){return mc=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},mc(n)};function Xf(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=mc(n),r=0;r<t.length;r++)t[r]!=="default"&&yl(e,n,t[r]);return qx(e,n),e}function Jf(n){return n&&n.__esModule?n:{default:n}}function Yf(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function Zf(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function ey(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function ty(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var kx=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function ry(n){function e(a){n.error=n.hasError?new kx(a,n.error,"An error was suppressed during disposal."):a,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var a=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(a).then(i,function(s){return e(s),i()})}else r|=1}catch(s){e(s)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function ny(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,a,s){return r?e?".jsx":".js":i&&(!a||!s)?t:i+a+"."+s.toLowerCase()+"js"}):n}const Mx={__extends:gl,__assign:Po,__rest:qf,__decorate:P,__param:kf,__esDecorate:Mf,__runInitializers:jf,__propKey:Lf,__setFunctionName:Nf,__metadata:Ff,__awaiter:Zc,__generator:fl,__createBinding:yl,__exportStar:$f,__values:Do,__read:Bt,__spread:Gf,__spreadArrays:Qf,__spreadArray:Ti,__await:Ii,__asyncGenerator:Wf,__asyncDelegator:Vf,__asyncValues:zf,__makeTemplateObject:Kf,__importStar:Xf,__importDefault:Jf,__classPrivateFieldGet:Yf,__classPrivateFieldSet:Zf,__classPrivateFieldIn:ey,__addDisposableResource:ty,__disposeResources:ry,__rewriteRelativeImportExtension:ny},jx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:ty,get __assign(){return Po},__asyncDelegator:Vf,__asyncGenerator:Wf,__asyncValues:zf,__await:Ii,__awaiter:Zc,__classPrivateFieldGet:Yf,__classPrivateFieldIn:ey,__classPrivateFieldSet:Zf,__createBinding:yl,__decorate:P,__disposeResources:ry,__esDecorate:Mf,__exportStar:$f,__extends:gl,__generator:fl,__importDefault:Jf,__importStar:Xf,__makeTemplateObject:Kf,__metadata:Ff,__param:kf,__propKey:Lf,__read:Bt,__rest:qf,__rewriteRelativeImportExtension:ny,__runInitializers:jf,__setFunctionName:Nf,__spread:Gf,__spreadArray:Ti,__spreadArrays:Qf,__values:Do,default:Mx},Symbol.toStringTag,{value:"Module"})),M=Dx(jx);var Eu={},hh;function bl(){return hh||(hh=1,Eu.isNode=!1),Eu}var Hu={},Xi={},Ji={},_t={},ph;function Mi(){if(ph)return _t;ph=1;var n;Object.defineProperty(_t,"__esModule",{value:!0}),_t.LogLevelToConsoleFunction=_t.resolveLogLevel=_t.LogLevel=void 0;var e=bl(),t;(function(a){a[a.CRITICAL=0]="CRITICAL",a[a.ERROR=1]="ERROR",a[a.WARNING=2]="WARNING",a[a.INFO=3]="INFO",a[a.DEBUG=4]="DEBUG",a[a.TRACE=7]="TRACE"})(t||(t={})),_t.LogLevel=t;function r(a){if(typeof a=="number"){if(Object.prototype.hasOwnProperty.call(t,a))return a;var s=Object.keys(t).map(function(u){return parseInt(u,10)}).filter(function(u){return!isNaN(u)&&u<a});return s.length?Math.max.apply(Math,s):t.WARNING}var o=a.replace(/\d+$/,"").toUpperCase();if(!Object.prototype.hasOwnProperty.call(t,o))throw new Error("Unknown log level string: ".concat(a));return t[o]}_t.resolveLogLevel=r;var i=e.isNode?console.log.bind(console):console.debug.bind(console);return _t.LogLevelToConsoleFunction=(n={},n[t.CRITICAL]=console.error.bind(console),n[t.ERROR]=console.error.bind(console),n[t.WARNING]=console.warn.bind(console),n[t.INFO]=console.info.bind(console),n[t.DEBUG]=i.bind(console),n[t.TRACE]=console.trace.bind(console),n),_t}var Yi={},Ru={},Zi={},mh;function Lx(){if(mh)return Zi;mh=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.Enumerable=void 0;function n(e){return e===void 0&&(e=!0),function(t,r){Object.defineProperty(t,r,{get:function(){},set:function(i){Object.defineProperty(this,r,{value:i,writable:!0,enumerable:e})},enumerable:e})}}return Zi.Enumerable=n,Zi}var ea={},_h;function Nx(){if(_h)return ea;_h=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.flatten=void 0;var n=M;function e(t){var r;return(r=[]).concat.apply(r,n.__spreadArray([],n.__read(t),!1))}return ea.flatten=e,ea}var ta={},gh;function Fx(){if(gh)return ta;gh=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.immutableSplice=void 0;var n=M;function e(t,r,i){for(var a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];return n.__spreadArray(n.__spreadArray(n.__spreadArray([],n.__read(t.slice(0,r)),!1),n.__read(a),!1),n.__read(t.slice(r+i)),!1)}return ta.immutableSplice=e,ta}var ra={},fh;function $x(){if(fh)return ra;fh=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.partitionedFlatMap=void 0;var n=M;function e(t,r,i){var a,s,o,u={};try{for(var h=n.__values(t),m=h.next();!m.done;m=h.next()){var w=m.value,g=r(w),_=i(w);Array.isArray(_)||(_=[_]),Object.prototype.hasOwnProperty.call(u,g)?(o=u[g]).push.apply(o,n.__spreadArray([],n.__read(_),!1)):u[g]=_}}catch(p){a={error:p}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return u}return ra.partitionedFlatMap=e,ra}var kt={},yh;function Gx(){if(yh)return kt;yh=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.resolveConfigValueSync=kt.resolveConfigValue=void 0;var n=M;function e(r){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(i){switch(i.label){case 0:return typeof r!="function"?[3,2]:[4,r()];case 1:return[2,i.sent()];case 2:return[2,r]}})})}kt.resolveConfigValue=e;function t(r){return typeof r=="function"?r():r}return kt.resolveConfigValueSync=t,kt}var na={},bh;function Qx(){if(bh)return na;bh=1,Object.defineProperty(na,"__esModule",{value:!0}),na.deprecateClass=void 0;var n=M;function e(t,r){var i=!1;return function(a){n.__extends(s,a);function s(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return i||(console.warn(r),i=!0),a.apply(this,n.__spreadArray([],n.__read(o),!1))||this}return s}(t)}return na.deprecateClass=e,na}var Au={},vh;function Wx(){return vh||(vh=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.match=n.eq=void 0;var e=function(i){return{otherwise:function(){return i},on:function(){return e(i)}}},t=function(i){return{on:function(a,s){return a(i)?e(s(i)):t(i)},otherwise:function(a){return a(i)}}};n.match=t;var r=function(i){return function(a){return i===a}};n.eq=r,t.eq=n.eq}(Au)),Au}var ia={},wh;function Vx(){if(wh)return ia;wh=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.fibWithLimit=void 0;var n=M;function e(t){var r,i,a;return n.__generator(this,function(s){switch(s.label){case 0:r=0,i=1,s.label=1;case 1:return r<t?[4,r]:[3,3];case 2:return s.sent(),a=n.__read([i,r+i],2),r=a[0],i=a[1],[3,1];case 3:return[4,t];case 4:return s.sent(),[3,3];case 5:return[2]}})}return ia.fibWithLimit=e,ia}var aa={},xh;function ed(){if(xh)return aa;xh=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.arrayToObject=void 0;var n=M;function e(t,r){return Object.assign.apply(Object,n.__spreadArray([{}],n.__read(t.map(r)),!1))}return aa.arrayToObject=e,aa}var sa={},Sh;function zx(){if(Sh)return sa;Sh=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.entriesToObject=void 0;var n=M,e=ed();function t(r){return(0,e.arrayToObject)(r,function(i){var a,s=n.__read(i,2),o=s[0],u=s[1];return a={},a[o]=u,a})}return sa.entriesToObject=t,sa}var oa={},Ch;function Kx(){if(Ch)return oa;Ch=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.forEachObjectEntry=void 0;var n=M;function e(t,r){Object.entries(t).forEach(function(i){var a=n.__read(i,2),s=a[0],o=a[1];return r(o,s)})}return oa.forEachObjectEntry=e,oa}var la={},Eh;function Xx(){if(Eh)return la;Eh=1,Object.defineProperty(la,"__esModule",{value:!0}),la.groupBy=void 0;var n=M;function e(t,r){var i,a,s;if(typeof r!="function"){var o=r;r=function(_){return _[o].toString()}}var u={};try{for(var h=n.__values(t),m=h.next();!m.done;m=h.next()){var w=m.value,g=r(w);((s=u[g])!==null&&s!==void 0?s:u[g]=[]).push(w)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return u}return la.groupBy=e,la}var ua={},Hh;function Jx(){if(Hh)return ua;Hh=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.indexBy=void 0;var n=ed();function e(t,r){if(typeof r!="function"){var i=r;r=function(a){return a[i].toString()}}return(0,n.arrayToObject)(t,function(a){var s;return s={},s[r(a)]=a,s})}return ua.indexBy=e,ua}var ca={},Rh;function Yx(){if(Rh)return ca;Rh=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.mapObject=void 0;var n=M;function e(t,r){var i=Object.entries(t).map(function(a){var s,o=n.__read(a,2),u=o[0],h=o[1];return s={},s[u]=r(h,u),s});return Object.assign.apply(Object,n.__spreadArray([{}],n.__read(i),!1))}return ca.mapObject=e,ca}var da={},ha={},Ah;function iy(){if(Ah)return ha;Ah=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.pick=void 0;var n=M;function e(t,r){return Object.assign.apply(Object,n.__spreadArray([{}],n.__read(Object.entries(t).filter(function(i){var a=n.__read(i,1),s=a[0];return r.includes(s)}).map(function(i){var a,s=n.__read(i,2),o=s[0],u=s[1];return a={},a[o]=u,a})),!1))}return ha.pick=e,ha}var Th;function Zx(){if(Th)return da;Th=1,Object.defineProperty(da,"__esModule",{value:!0}),da.omit=void 0;var n=iy();function e(t,r){return(0,n.pick)(t,Object.keys(t).filter(function(i){return!r.includes(i)}))}return da.omit=e,da}var gt={},Ih;function eS(){if(Ih)return gt;Ih=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.mapOptional=gt.mapNullable=gt.isNullish=void 0;function n(r){return r==null}gt.isNullish=n;function e(r,i){return n(r)?null:i(r)}gt.mapNullable=e;function t(r,i){return n(r)?void 0:i(r)}return gt.mapOptional=t,gt}var pa={},Ph;function tS(){if(Ph)return pa;Ph=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.delay=void 0;var n=M;function e(t){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(r){switch(r.label){case 0:return[4,new Promise(function(i){return setTimeout(i,t)})];case 1:return r.sent(),[2]}})})}return pa.delay=e,pa}var ma={},Dh;function rS(){if(Dh)return ma;Dh=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.promiseWithResolvers=void 0;function n(){var e,t,r=new Promise(function(i,a){e=i,t=a});return{promise:r,resolve:e,reject:t}}return ma.promiseWithResolvers=n,ma}var _a={},Bh;function nS(){if(Bh)return _a;Bh=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.padLeft=void 0;function n(e,t,r){if(typeof e=="number"&&(e=e.toString()),t=t-e.length,t<=0)return e;r===void 0&&(r=" ");var i="";do(t&1)===1&&(i+=r),t>>=1,t&&(r+=r);while(t);return i+e}return _a.padLeft=n,_a}var ga={},Oh;function iS(){if(Oh)return ga;Oh=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.splitWithLimit=void 0;var n=M;function e(t,r,i){var a=t.split(r);return a.length<=i?a:n.__spreadArray(n.__spreadArray([],n.__read(a.slice(0,i-1)),!1),[a.slice(i-1).join(r)],!1)}return ga.splitWithLimit=e,ga}var Mt={},Uh;function aS(){if(Uh)return Mt;Uh=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.utf8Substring=Mt.utf8Length=void 0;var n=M;function e(r){return n.__spreadArray([],n.__read(r),!1).length}Mt.utf8Length=e;function t(r,i,a){return n.__spreadArray([],n.__read(r),!1).slice(i,a).join("")}return Mt.utf8Substring=t,Mt}var qh;function W(){return qh||(qh=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.utf8Substring=n.utf8Length=n.splitWithLimit=n.padLeft=n.promiseWithResolvers=n.delay=n.mapOptional=n.mapNullable=n.isNullish=n.pick=n.omit=n.mapObject=n.indexBy=n.groupBy=n.forEachObjectEntry=n.entriesToObject=n.arrayToObject=n.fibWithLimit=n.eq=n.match=n.deprecateClass=n.resolveConfigValueSync=n.resolveConfigValue=n.partitionedFlatMap=n.immutableSplice=n.flatten=n.Enumerable=void 0;var e=Lx();Object.defineProperty(n,"Enumerable",{enumerable:!0,get:function(){return e.Enumerable}});var t=Nx();Object.defineProperty(n,"flatten",{enumerable:!0,get:function(){return t.flatten}});var r=Fx();Object.defineProperty(n,"immutableSplice",{enumerable:!0,get:function(){return r.immutableSplice}});var i=$x();Object.defineProperty(n,"partitionedFlatMap",{enumerable:!0,get:function(){return i.partitionedFlatMap}});var a=Gx();Object.defineProperty(n,"resolveConfigValue",{enumerable:!0,get:function(){return a.resolveConfigValue}}),Object.defineProperty(n,"resolveConfigValueSync",{enumerable:!0,get:function(){return a.resolveConfigValueSync}});var s=Qx();Object.defineProperty(n,"deprecateClass",{enumerable:!0,get:function(){return s.deprecateClass}});var o=Wx();Object.defineProperty(n,"match",{enumerable:!0,get:function(){return o.match}}),Object.defineProperty(n,"eq",{enumerable:!0,get:function(){return o.eq}});var u=Vx();Object.defineProperty(n,"fibWithLimit",{enumerable:!0,get:function(){return u.fibWithLimit}});var h=ed();Object.defineProperty(n,"arrayToObject",{enumerable:!0,get:function(){return h.arrayToObject}});var m=zx();Object.defineProperty(n,"entriesToObject",{enumerable:!0,get:function(){return m.entriesToObject}});var w=Kx();Object.defineProperty(n,"forEachObjectEntry",{enumerable:!0,get:function(){return w.forEachObjectEntry}});var g=Xx();Object.defineProperty(n,"groupBy",{enumerable:!0,get:function(){return g.groupBy}});var _=Jx();Object.defineProperty(n,"indexBy",{enumerable:!0,get:function(){return _.indexBy}});var p=Yx();Object.defineProperty(n,"mapObject",{enumerable:!0,get:function(){return p.mapObject}});var l=Zx();Object.defineProperty(n,"omit",{enumerable:!0,get:function(){return l.omit}});var d=iy();Object.defineProperty(n,"pick",{enumerable:!0,get:function(){return d.pick}});var b=eS();Object.defineProperty(n,"isNullish",{enumerable:!0,get:function(){return b.isNullish}}),Object.defineProperty(n,"mapNullable",{enumerable:!0,get:function(){return b.mapNullable}}),Object.defineProperty(n,"mapOptional",{enumerable:!0,get:function(){return b.mapOptional}});var x=tS();Object.defineProperty(n,"delay",{enumerable:!0,get:function(){return x.delay}});var A=rS();Object.defineProperty(n,"promiseWithResolvers",{enumerable:!0,get:function(){return A.promiseWithResolvers}});var I=nS();Object.defineProperty(n,"padLeft",{enumerable:!0,get:function(){return I.padLeft}});var y=iS();Object.defineProperty(n,"splitWithLimit",{enumerable:!0,get:function(){return y.splitWithLimit}});var H=aS();Object.defineProperty(n,"utf8Length",{enumerable:!0,get:function(){return H.utf8Length}}),Object.defineProperty(n,"utf8Substring",{enumerable:!0,get:function(){return H.utf8Substring}})}(Ru)),Ru}var fa={},kh;function ay(){if(kh)return fa;kh=1;var n={},e,t;Object.defineProperty(fa,"__esModule",{value:!0}),fa.getMinLogLevelFromEnv=void 0;var r=Mi(),i=typeof process>"u"?[]:(t=(e=n.LOGGING)===null||e===void 0?void 0:e.split(";").map(function(h){var m=h.split("=",2),w=m[0],g=m[1];return g?[w==="default"?void 0:w.split(":"),(0,r.resolveLogLevel)(g)]:null}).filter(function(h){return!!h}).sort(function(h,m){var w,g,_=h[0],p=m[0];return((w=p==null?void 0:p.length)!==null&&w!==void 0?w:0)-((g=_==null?void 0:_.length)!==null&&g!==void 0?g:0)}))!==null&&t!==void 0?t:[],a=i.findIndex(function(h){var m=h[0];return!m}),s=void 0;a!==-1&&(s=i[a][1],i.splice(a));function o(h,m){return m.length<=h.length&&m.every(function(w,g){return w===h[g]})}function u(h){for(var m=h.split(":"),w=0,g=i;w<g.length;w++){var _=g[w],p=_[0],l=_[1];if(o(m,p))return l}return s}return fa.getMinLogLevelFromEnv=u,fa}var Mh;function sy(){if(Mh)return Yi;Mh=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.BaseLogger=void 0;var n=W(),e=bl(),t=ay(),r=Mi(),i=function(){function a(s){var o=s.name,u=s.minLevel,h=s.emoji,m=h===void 0?!1:h,w=s.colors,g=s.timestamps,_=g===void 0?e.isNode:g,p,l;this._name=o,this._minLevel=(l=(p=(0,n.mapOptional)(u,function(d){return(0,r.resolveLogLevel)(d)}))!==null&&p!==void 0?p:(0,t.getMinLogLevelFromEnv)(o))!==null&&l!==void 0?l:r.LogLevel.WARNING,this._emoji=m,this._colors=w,this._timestamps=_}return a.prototype.crit=function(s){this.log(r.LogLevel.CRITICAL,s)},a.prototype.error=function(s){this.log(r.LogLevel.ERROR,s)},a.prototype.warn=function(s){this.log(r.LogLevel.WARNING,s)},a.prototype.info=function(s){this.log(r.LogLevel.INFO,s)},a.prototype.debug=function(s){this.log(r.LogLevel.DEBUG,s)},a.prototype.trace=function(s){this.log(r.LogLevel.TRACE,s)},a}();return Yi.BaseLogger=i,Yi}var jh;function sS(){if(jh)return Ji;jh=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.BrowserLogger=void 0;var n=M,e=Mi(),t=sy(),r=function(i){n.__extends(a,i);function a(){return i!==null&&i.apply(this,arguments)||this}return a.prototype.log=function(s,o){if(!(s>this._minLevel)){var u=e.LogLevelToConsoleFunction[s],h="[".concat(this._name,"] ").concat(o);this._timestamps&&(h="[".concat(new Date().toISOString(),"] ").concat(o)),u(h)}},a}(t.BaseLogger);return Ji.BrowserLogger=r,Ji}var ya={},Lh;function oS(){if(Lh)return ya;Lh=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.CustomLoggerWrapper=void 0;var n=W(),e=ay(),t=Mi(),r=function(){function i(a){var s=a.name,o=a.minLevel,u=a.custom,h;this._minLevel=(h=(0,n.mapOptional)(o,function(m){return(0,t.resolveLogLevel)(m)}))!==null&&h!==void 0?h:(0,e.getMinLogLevelFromEnv)(s),this._override=typeof u=="function"?{log:u}:u}return i.prototype.log=function(a,s){this._shouldLog(a)&&this._override.log(a,s)},i.prototype.crit=function(a){this._override.crit?this._shouldLog(t.LogLevel.CRITICAL)&&this._override.crit(a):this.log(t.LogLevel.CRITICAL,a)},i.prototype.error=function(a){this._override.error?this._shouldLog(t.LogLevel.ERROR)&&this._override.error(a):this.log(t.LogLevel.ERROR,a)},i.prototype.warn=function(a){this._override.warn?this._shouldLog(t.LogLevel.WARNING)&&this._override.warn(a):this.log(t.LogLevel.WARNING,a)},i.prototype.info=function(a){this._override.info?this._shouldLog(t.LogLevel.INFO)&&this._override.info(a):this.log(t.LogLevel.INFO,a)},i.prototype.debug=function(a){this._override.debug?this._shouldLog(t.LogLevel.DEBUG)&&this._override.debug(a):this.log(t.LogLevel.DEBUG,a)},i.prototype.trace=function(a){this._override.trace?this._shouldLog(t.LogLevel.TRACE)&&this._override.trace(a):this.log(t.LogLevel.TRACE,a)},i.prototype._shouldLog=function(a){return this._minLevel===void 0||this._minLevel>=a},i}();return ya.CustomLoggerWrapper=r,ya}var Tu={},Nh;function lS(){return Nh||(Nh=1,function(n){var e,t,r;Object.defineProperty(n,"__esModule",{value:!0}),n.NodeLogger=n.LogLevelToBackgroundColor=n.LogLevelToColor=n.LogLevelToEmoji=void 0;var i=M,a=Mi(),s=sy();n.LogLevelToEmoji=(e={},e[a.LogLevel.CRITICAL]="",e[a.LogLevel.ERROR]="",e[a.LogLevel.WARNING]=" ",e[a.LogLevel.INFO]=" ",e[a.LogLevel.DEBUG]="",e[a.LogLevel.TRACE]="",e);var o={black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,blackBright:90,redBright:91,greenBright:92,yellowBright:93,blueBright:94,magentaBright:95,cyanBright:96,whiteBright:97},u={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBlackBright:100,bgRedBright:101,bgGreenBright:102,bgYellowBright:103,bgBlueBright:104,bgMagentaBright:105,bgCyanBright:106,bgWhiteBright:107};function h(_,p,l){return function(d){return"\x1B[".concat(_,"m").concat(l?l(d):d,"\x1B[").concat(p,"m")}}function m(_){return h(o[_],39)}function w(_,p){return h(u[_],49,p)}n.LogLevelToColor=(t={},t[a.LogLevel.CRITICAL]=m("red"),t[a.LogLevel.ERROR]=m("redBright"),t[a.LogLevel.WARNING]=m("yellow"),t[a.LogLevel.INFO]=m("blue"),t[a.LogLevel.DEBUG]=m("magenta"),t[a.LogLevel.TRACE]=h(0,0),t),n.LogLevelToBackgroundColor=(r={},r[a.LogLevel.CRITICAL]=w("bgRed",m("white")),r[a.LogLevel.ERROR]=w("bgRedBright",m("white")),r[a.LogLevel.WARNING]=w("bgYellow",m("black")),r[a.LogLevel.INFO]=w("bgBlue",m("white")),r[a.LogLevel.DEBUG]=w("bgMagenta",m("black")),r[a.LogLevel.TRACE]=h(7,27),r);var g=function(_){i.__extends(p,_);function p(){return _!==null&&_.apply(this,arguments)||this}return p.prototype.log=function(l,d){var b,x,A;if(!(l>this._minLevel)){var I=a.LogLevelToConsoleFunction[l],y="";if(this._timestamps&&(y+="[".concat(new Date().toISOString(),"] ")),this._emoji){var H=n.LogLevelToEmoji[l];y+="".concat(H," ")}var E=(A=(b=this._colors)!==null&&b!==void 0?b:(x=process.stdout)===null||x===void 0?void 0:x.isTTY)!==null&&A!==void 0?A:!0;E?y+="".concat(n.LogLevelToBackgroundColor[l](this._name)," ").concat(n.LogLevelToBackgroundColor[l](a.LogLevel[l])," ").concat(n.LogLevelToColor[l](d)):y+="[".concat(this._name,":").concat(a.LogLevel[l].toLowerCase(),"] ").concat(d),I(y)}},p}(s.BaseLogger);n.NodeLogger=g}(Tu)),Tu}var Fh;function uS(){if(Fh)return Xi;Fh=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.createLogger=void 0;var n=bl(),e=sS(),t=oS(),r=lS();function i(a){return a.custom?new t.CustomLoggerWrapper(a):n.isNode?new r.NodeLogger(a):new e.BrowserLogger(a)}return Xi.createLogger=i,Xi}var $h;function vl(){return $h||($h=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.LogLevel=n.createLogger=void 0;var e=uS();Object.defineProperty(n,"createLogger",{enumerable:!0,get:function(){return e.createLogger}});var t=Mi();Object.defineProperty(n,"LogLevel",{enumerable:!0,get:function(){return t.LogLevel}})}(Hu)),Hu}var Iu={},ba={},va={},Gh;function td(){if(Gh)return va;Gh=1,Object.defineProperty(va,"__esModule",{value:!0}),va.CustomError=void 0;class n extends Error{constructor(...t){var r;super(...t),Object.setPrototypeOf(this,new.target.prototype),(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}}return va.CustomError=n,va}var Qh;function rd(){if(Qh)return ba;Qh=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.RateLimiterDestroyedError=void 0;const n=td();class e extends n.CustomError{}return ba.RateLimiterDestroyedError=e,ba}var wa={},Wh;function wl(){if(Wh)return wa;Wh=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.RateLimitReachedError=void 0;const n=td();class e extends n.CustomError{}return wa.RateLimitReachedError=e,wa}var xa={},Vh;function oy(){if(Vh)return xa;Vh=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.RetryAfterError=void 0;const n=td();class e extends n.CustomError{constructor(r){super(`Need to retry after ${r} ms`),this._retryAt=Date.now()+r}get retryAt(){return this._retryAt}}return xa.RetryAfterError=e,xa}var Sa={},zh;function cS(){if(zh)return Sa;zh=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.NullRateLimiter=void 0;let n=class{constructor(t){this._callback=t}async request(t){return await this._callback(t)}clear(){}pause(){}resume(){}};return Sa.NullRateLimiter=n,Sa}var Ca={},Ea={},Kh;function ly(){if(Kh)return Ea;Kh=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.ResponseBasedRateLimiter=void 0;const n=vl(),e=W(),t=wl(),r=oy();class i{constructor({logger:s}){this._queue=[],this._batchRunning=!1,this._paused=!1,this._logger=(0,n.createLogger)({name:"rate-limiter",emoji:!0,...s})}async request(s,o){return this._logger.trace("request start"),await new Promise((u,h)=>{var m;const w={req:s,resolve:u,reject:h,limitReachedBehavior:(m=o==null?void 0:o.limitReachedBehavior)!==null&&m!==void 0?m:"enqueue"};this._batchRunning||this._nextBatchTimer||this._paused?(this._logger.trace(`request queued batchRunning:${this._batchRunning.toString()} hasNextBatchTimer:${(!!this._nextBatchTimer).toString()} paused:${this._paused.toString()}`),this._queue.push(w)):this._runRequestBatch([w])})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextBatch()}get stats(){var s,o,u,h,m;return{lastKnownLimit:(o=(s=this._parameters)===null||s===void 0?void 0:s.limit)!==null&&o!==void 0?o:null,lastKnownRemainingRequests:(h=(u=this._parameters)===null||u===void 0?void 0:u.remaining)!==null&&h!==void 0?h:null,lastKnownResetDate:(0,e.mapNullable)((m=this._parameters)===null||m===void 0?void 0:m.resetsAt,w=>new Date(w))}}async _runRequestBatch(s){this._logger.trace(`runRequestBatch start specs:${s.length}`),this._batchRunning=!0,this._parameters&&this._logger.debug(`Remaining requests: ${this._parameters.remaining}`),this._logger.debug(`Doing ${s.length} requests, new queue length is ${this._queue.length}`);const o=s.map(async w=>{const{req:g,resolve:_,reject:p}=w;try{const l=await this.doRequest(g),d=this.needsToRetryAfter(l);if(d!==null)throw this._queue.unshift(w),this._logger.info(`Retrying after ${d} ms`),new r.RetryAfterError(d);const b=this.getParametersFromResponse(l);return _(l),b}catch(l){if(l instanceof r.RetryAfterError)throw l;p(l);return}}),u=await Promise.allSettled(o),h=u.filter(w=>w.status==="rejected"),m=Date.now();if(h.length){this._logger.trace("runRequestBatch some rejected");const g=Math.max(m,...h.map(_=>_.reason.retryAt))-m;this._logger.warn(`Waiting for ${g} ms because the rate limit was exceeded`),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},g)}else{this._logger.trace("runRequestBatch none rejected");const w=u.filter(g=>g.status==="fulfilled"&&g.value!==void 0).map(g=>g.value).reduce((g,_)=>g?_.remaining<g.remaining?_:g:_,void 0);if(this._batchRunning=!1,w)if(this._parameters=w,w.resetsAt<m||w.remaining>0)this._logger.trace("runRequestBatch canRunMore"),this._runNextBatch();else{const g=w.resetsAt-m;this._logger.trace(`runRequestBatch delay:${g}`),this._logger.warn(`Waiting for ${g} ms because the rate limit was reached`),this._queue=this._queue.filter(_=>{switch(_.limitReachedBehavior){case"enqueue":return!0;case"null":return _.resolve(null),!1;case"throw":return _.reject(new t.RateLimitReachedError("Request removed from queue because the rate limit was reached")),!1;default:throw new Error("this should never happen")}}),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},g)}}this._logger.trace("runRequestBatch end")}_runNextBatch(){if(this._paused)return;this._logger.trace("runNextBatch start"),this._nextBatchTimer&&(clearTimeout(this._nextBatchTimer),this._nextBatchTimer=void 0);const s=this._parameters?Math.min(this._parameters.remaining,this._parameters.limit/10):1,o=this._queue.splice(0,s);o.length&&this._runRequestBatch(o),this._logger.trace("runNextBatch end")}}return Ea.ResponseBasedRateLimiter=i,Ea}var Xh;function dS(){if(Xh)return Ca;Xh=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.PartitionedRateLimiter=void 0;const n=ly();class e{constructor(r){this._children=new Map,this._paused=!1,this._partitionKeyCallback=r.getPartitionKey,this._createChildCallback=r.createChild}async request(r,i){const a=this._partitionKeyCallback(r);return await this._getChild(a).request(r,i)}clear(){for(const r of this._children.values())r.clear()}pause(){this._paused=!0;for(const r of this._children.values())r.pause()}resume(){this._paused=!1;for(const r of this._children.values())r.resume()}getChildStats(r){if(!this._children.has(r))return null;const i=this._children.get(r);return i instanceof n.ResponseBasedRateLimiter?i.stats:null}_getChild(r){if(this._children.has(r))return this._children.get(r);const i=this._createChildCallback(r);return this._paused&&i.pause(),this._children.set(r,i),i}}return Ca.PartitionedRateLimiter=e,Ca}var Ha={},Jh;function hS(){if(Jh)return Ha;Jh=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.PartitionedTimeBasedRateLimiter=void 0;const n=vl(),e=wl(),t=rd();class r{constructor({logger:a,bucketSize:s,timeFrame:o,doRequest:u,getPartitionKey:h}){this._partitionedQueue=new Map,this._usedFromBucket=new Map,this._counterTimers=new Set,this._paused=!1,this._destroyed=!1,this._logger=(0,n.createLogger)({name:"rate-limiter",emoji:!0,...a}),this._bucketSize=s,this._timeFrame=o,this._callback=u,this._partitionKeyCallback=h}async request(a,s){return await new Promise((o,u)=>{var h,m;if(this._destroyed){u(new t.RateLimiterDestroyedError("Rate limiter was destroyed"));return}const w={req:a,resolve:o,reject:u,limitReachedBehavior:(h=s==null?void 0:s.limitReachedBehavior)!==null&&h!==void 0?h:"enqueue"},g=this._partitionKeyCallback(a),_=(m=this._usedFromBucket.get(g))!==null&&m!==void 0?m:0;if(_>=this._bucketSize||this._paused)switch(w.limitReachedBehavior){case"enqueue":{const p=this._getPartitionedQueue(g);p.push(w),_+p.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} for ${g?`partition ${g}`:"default partition"} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${p.length}`):this._logger.info(`Enqueueing request for ${g?`partition ${g}`:"default partition"} because the rate limiter is paused; queue size is ${p.length}`);break}case"null":{w.resolve(null),this._paused?this._logger.info(`Returning null for request for ${g?`partition ${g}`:"default partition"} because the rate limiter is paused`):this._logger.warn(`Rate limit of ${this._bucketSize} for ${g?`partition ${g}`:"default partition"} was reached, dropping request and returning null`);break}case"throw":{w.reject(new e.RateLimitReachedError(`Request dropped because ${this._paused?"the rate limiter is paused":`the rate limit for ${g?`partition ${g}`:"default partition"} was reached`}`));break}default:throw new Error("this should never happen")}else this._runRequest(w,g)})}clear(){this._partitionedQueue.clear()}pause(){this._paused=!0}resume(){this._paused=!1;for(const a of this._partitionedQueue.keys())this._runNextRequest(a)}destroy(){this._paused=!1,this._destroyed=!0,this._counterTimers.forEach(a=>{clearTimeout(a)});for(const a of this._partitionedQueue.values())for(const s of a)s.reject(new t.RateLimiterDestroyedError("Rate limiter was destroyed"));this._partitionedQueue.clear()}_getPartitionedQueue(a){if(this._partitionedQueue.has(a))return this._partitionedQueue.get(a);const s=[];return this._partitionedQueue.set(a,s),s}async _runRequest(a,s){var o;const u=this._getPartitionedQueue(s);this._logger.debug(`doing a request for ${s?`partition ${s}`:"default partition"}, new queue length is ${u.length}`),this._usedFromBucket.set(s,((o=this._usedFromBucket.get(s))!==null&&o!==void 0?o:0)+1);const{req:h,resolve:m,reject:w}=a;try{m(await this._callback(h))}catch(g){w(g)}finally{const g=setTimeout(()=>{this._counterTimers.delete(g);const _=this._usedFromBucket.get(s)-1;this._usedFromBucket.set(s,_),u.length&&_<this._bucketSize&&this._runNextRequest(s)},this._timeFrame);this._counterTimers.add(g)}}_runNextRequest(a){if(this._paused)return;const o=this._getPartitionedQueue(a).shift();o&&this._runRequest(o,a)}}return Ha.PartitionedTimeBasedRateLimiter=r,Ha}var Ra={},Yh;function uy(){if(Yh)return Ra;Yh=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.TimeBasedRateLimiter=void 0;const n=vl(),e=wl(),t=rd();let r=class{constructor({logger:a,bucketSize:s,timeFrame:o,doRequest:u}){this._queue=[],this._usedFromBucket=0,this._counterTimers=new Set,this._paused=!1,this._destroyed=!1,this._logger=(0,n.createLogger)({name:"rate-limiter",emoji:!0,...a}),this._bucketSize=s,this._timeFrame=o,this._callback=u}async request(a,s){return await new Promise((o,u)=>{var h;if(this._destroyed){u(new t.RateLimiterDestroyedError("Rate limiter was destroyed"));return}const m={req:a,resolve:o,reject:u,limitReachedBehavior:(h=s==null?void 0:s.limitReachedBehavior)!==null&&h!==void 0?h:"enqueue"};if(this._usedFromBucket>=this._bucketSize||this._paused)switch(m.limitReachedBehavior){case"enqueue":{this._queue.push(m),this._usedFromBucket+this._queue.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${this._queue.length}`):this._logger.info(`Enqueueing request because the rate limiter is paused; queue size is ${this._queue.length}`);break}case"null":{m.resolve(null),this._logger.warn(`Rate limit of ${this._bucketSize} was reached, dropping request and returning null`),this._paused?this._logger.info("Returning null for request because the rate limiter is paused"):this._logger.warn(`Rate limit of ${this._bucketSize} was reached, dropping request and returning null`);break}case"throw":{m.reject(new e.RateLimitReachedError(`Request dropped because ${this._paused?"the rate limiter is paused":"the rate limit was reached"}`));break}default:throw new Error("this should never happen")}else this._runRequest(m)})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextRequest()}destroy(){this._paused=!1,this._destroyed=!0,this._counterTimers.forEach(a=>{clearTimeout(a)});for(const a of this._queue)a.reject(new t.RateLimiterDestroyedError("Rate limiter was destroyed"));this._queue=[]}async _runRequest(a){this._logger.debug(`doing a request, new queue length is ${this._queue.length}`),this._usedFromBucket+=1;const{req:s,resolve:o,reject:u}=a;try{o(await this._callback(s))}catch(h){u(h)}finally{const h=setTimeout(()=>{this._counterTimers.delete(h),this._usedFromBucket-=1,this._queue.length&&this._usedFromBucket<this._bucketSize&&this._runNextRequest()},this._timeFrame);this._counterTimers.add(h)}}_runNextRequest(){if(this._paused)return;const a=this._queue.shift();a&&this._runRequest(a)}};return Ra.TimeBasedRateLimiter=r,Ra}var Aa={},Zh;function pS(){if(Zh)return Aa;Zh=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.TimedPassthruRateLimiter=void 0;const n=uy();let e=class extends n.TimeBasedRateLimiter{constructor(r,i){super({...i,async doRequest(a,s){return await r.request(a,s)}})}};return Aa.TimedPassthruRateLimiter=e,Aa}var ep;function nd(){return ep||(ep=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.TimedPassthruRateLimiter=n.TimeBasedRateLimiter=n.ResponseBasedRateLimiter=n.PartitionedTimeBasedRateLimiter=n.PartitionedRateLimiter=n.NullRateLimiter=n.RetryAfterError=n.RateLimitReachedError=n.RateLimiterDestroyedError=void 0;var e=rd();Object.defineProperty(n,"RateLimiterDestroyedError",{enumerable:!0,get:function(){return e.RateLimiterDestroyedError}});var t=wl();Object.defineProperty(n,"RateLimitReachedError",{enumerable:!0,get:function(){return t.RateLimitReachedError}});var r=oy();Object.defineProperty(n,"RetryAfterError",{enumerable:!0,get:function(){return r.RetryAfterError}});var i=cS();Object.defineProperty(n,"NullRateLimiter",{enumerable:!0,get:function(){return i.NullRateLimiter}});var a=dS();Object.defineProperty(n,"PartitionedRateLimiter",{enumerable:!0,get:function(){return a.PartitionedRateLimiter}});var s=hS();Object.defineProperty(n,"PartitionedTimeBasedRateLimiter",{enumerable:!0,get:function(){return s.PartitionedTimeBasedRateLimiter}});var o=ly();Object.defineProperty(n,"ResponseBasedRateLimiter",{enumerable:!0,get:function(){return o.ResponseBasedRateLimiter}});var u=uy();Object.defineProperty(n,"TimeBasedRateLimiter",{enumerable:!0,get:function(){return u.TimeBasedRateLimiter}});var h=pS();Object.defineProperty(n,"TimedPassthruRateLimiter",{enumerable:!0,get:function(){return h.TimedPassthruRateLimiter}})}(Iu)),Iu}var Pu={},jt={},vs={exports:{}},mS=vs.exports,tp;function cy(){return tp||(tp=1,function(n,e){var t=typeof self<"u"?self:mS,r=function(){function a(){this.fetch=!1,this.DOMException=t.DOMException}return a.prototype=t,new a}();(function(a){(function(s){var o={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(D){return D&&DataView.prototype.isPrototypeOf(D)}if(o.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(D){return D&&h.indexOf(Object.prototype.toString.call(D))>-1};function w(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function g(D){return typeof D!="string"&&(D=String(D)),D}function _(D){var N={next:function(){var ae=D.shift();return{done:ae===void 0,value:ae}}};return o.iterable&&(N[Symbol.iterator]=function(){return N}),N}function p(D){this.map={},D instanceof p?D.forEach(function(N,ae){this.append(ae,N)},this):Array.isArray(D)?D.forEach(function(N){this.append(N[0],N[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(N){this.append(N,D[N])},this)}p.prototype.append=function(D,N){D=w(D),N=g(N);var ae=this.map[D];this.map[D]=ae?ae+", "+N:N},p.prototype.delete=function(D){delete this.map[w(D)]},p.prototype.get=function(D){return D=w(D),this.has(D)?this.map[D]:null},p.prototype.has=function(D){return this.map.hasOwnProperty(w(D))},p.prototype.set=function(D,N){this.map[w(D)]=g(N)},p.prototype.forEach=function(D,N){for(var ae in this.map)this.map.hasOwnProperty(ae)&&D.call(N,this.map[ae],ae,this)},p.prototype.keys=function(){var D=[];return this.forEach(function(N,ae){D.push(ae)}),_(D)},p.prototype.values=function(){var D=[];return this.forEach(function(N){D.push(N)}),_(D)},p.prototype.entries=function(){var D=[];return this.forEach(function(N,ae){D.push([ae,N])}),_(D)},o.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function l(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function d(D){return new Promise(function(N,ae){D.onload=function(){N(D.result)},D.onerror=function(){ae(D.error)}})}function b(D){var N=new FileReader,ae=d(N);return N.readAsArrayBuffer(D),ae}function x(D){var N=new FileReader,ae=d(N);return N.readAsText(D),ae}function A(D){for(var N=new Uint8Array(D),ae=new Array(N.length),he=0;he<N.length;he++)ae[he]=String.fromCharCode(N[he]);return ae.join("")}function I(D){if(D.slice)return D.slice(0);var N=new Uint8Array(D.byteLength);return N.set(new Uint8Array(D)),N.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(D){this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:o.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:o.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():o.arrayBuffer&&o.blob&&u(D)?(this._bodyArrayBuffer=I(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||m(D))?this._bodyArrayBuffer=I(D):this._bodyText=D=Object.prototype.toString.call(D):this._bodyText="",this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var D=l(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var D=l(this);if(D)return D;if(this._bodyBlob)return x(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var H=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(D){var N=D.toUpperCase();return H.indexOf(N)>-1?N:D}function B(D,N){N=N||{};var ae=N.body;if(D instanceof B){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,N.headers||(this.headers=new p(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!ae&&D._bodyInit!=null&&(ae=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new p(N.headers)),this.method=E(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ae)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ae)}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function j(D){var N=new FormData;return D.trim().split("&").forEach(function(ae){if(ae){var he=ae.split("="),we=he.shift().replace(/\+/g," "),X=he.join("=").replace(/\+/g," ");N.append(decodeURIComponent(we),decodeURIComponent(X))}}),N}function Z(D){var N=new p,ae=D.replace(/\r?\n[\t ]+/g," ");return ae.split(/\r?\n/).forEach(function(he){var we=he.split(":"),X=we.shift().trim();if(X){var ht=we.join(":").trim();N.append(X,ht)}}),N}y.call(B.prototype);function z(D,N){N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in N?N.statusText:"OK",this.headers=new p(N.headers),this.url=N.url||"",this._initBody(D)}y.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},z.error=function(){var D=new z(null,{status:0,statusText:""});return D.type="error",D};var Te=[301,302,303,307,308];z.redirect=function(D,N){if(Te.indexOf(N)===-1)throw new RangeError("Invalid status code");return new z(null,{status:N,headers:{location:D}})},s.DOMException=a.DOMException;try{new s.DOMException}catch{s.DOMException=function(N,ae){this.message=N,this.name=ae;var he=Error(N);this.stack=he.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function se(D,N){return new Promise(function(ae,he){var we=new B(D,N);if(we.signal&&we.signal.aborted)return he(new s.DOMException("Aborted","AbortError"));var X=new XMLHttpRequest;function ht(){X.abort()}X.onload=function(){var J={status:X.status,statusText:X.statusText,headers:Z(X.getAllResponseHeaders()||"")};J.url="responseURL"in X?X.responseURL:J.headers.get("X-Request-URL");var Se="response"in X?X.response:X.responseText;ae(new z(Se,J))},X.onerror=function(){he(new TypeError("Network request failed"))},X.ontimeout=function(){he(new TypeError("Network request failed"))},X.onabort=function(){he(new s.DOMException("Aborted","AbortError"))},X.open(we.method,we.url,!0),we.credentials==="include"?X.withCredentials=!0:we.credentials==="omit"&&(X.withCredentials=!1),"responseType"in X&&o.blob&&(X.responseType="blob"),we.headers.forEach(function(J,Se){X.setRequestHeader(Se,J)}),we.signal&&(we.signal.addEventListener("abort",ht),X.onreadystatechange=function(){X.readyState===4&&we.signal.removeEventListener("abort",ht)}),X.send(typeof we._bodyInit>"u"?null:we._bodyInit)})}return se.polyfill=!0,a.fetch||(a.fetch=se,a.Headers=p,a.Request=B,a.Response=z),s.Headers=p,s.Request=B,s.Response=z,s.fetch=se,Object.defineProperty(s,"__esModule",{value:!0}),s})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e}(vs,vs.exports)),vs.exports}var Du,rp;function id(){if(rp)return Du;rp=1;var n=Object.prototype.hasOwnProperty,e=Array.isArray,t=function(){for(var _=[],p=0;p<256;++p)_.push("%"+((p<16?"0":"")+p.toString(16)).toUpperCase());return _}(),r=function(p){for(;p.length>1;){var l=p.pop(),d=l.obj[l.prop];if(e(d)){for(var b=[],x=0;x<d.length;++x)typeof d[x]<"u"&&b.push(d[x]);l.obj[l.prop]=b}}},i=function(p,l){for(var d=l&&l.plainObjects?Object.create(null):{},b=0;b<p.length;++b)typeof p[b]<"u"&&(d[b]=p[b]);return d},a=function _(p,l,d){if(!l)return p;if(typeof l!="object"){if(e(p))p.push(l);else if(p&&typeof p=="object")(d&&(d.plainObjects||d.allowPrototypes)||!n.call(Object.prototype,l))&&(p[l]=!0);else return[p,l];return p}if(!p||typeof p!="object")return[p].concat(l);var b=p;return e(p)&&!e(l)&&(b=i(p,d)),e(p)&&e(l)?(l.forEach(function(x,A){if(n.call(p,A)){var I=p[A];I&&typeof I=="object"&&x&&typeof x=="object"?p[A]=_(I,x,d):p.push(x)}else p[A]=x}),p):Object.keys(l).reduce(function(x,A){var I=l[A];return n.call(x,A)?x[A]=_(x[A],I,d):x[A]=I,x},b)},s=function(p,l){return Object.keys(l).reduce(function(d,b){return d[b]=l[b],d},p)},o=function(_,p,l){var d=_.replace(/\+/g," ");if(l==="iso-8859-1")return d.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(d)}catch{return d}},u=function(p,l,d){if(p.length===0)return p;var b=p;if(typeof p=="symbol"?b=Symbol.prototype.toString.call(p):typeof p!="string"&&(b=String(p)),d==="iso-8859-1")return escape(b).replace(/%u[0-9a-f]{4}/gi,function(y){return"%26%23"+parseInt(y.slice(2),16)+"%3B"});for(var x="",A=0;A<b.length;++A){var I=b.charCodeAt(A);if(I===45||I===46||I===95||I===126||I>=48&&I<=57||I>=65&&I<=90||I>=97&&I<=122){x+=b.charAt(A);continue}if(I<128){x=x+t[I];continue}if(I<2048){x=x+(t[192|I>>6]+t[128|I&63]);continue}if(I<55296||I>=57344){x=x+(t[224|I>>12]+t[128|I>>6&63]+t[128|I&63]);continue}A+=1,I=65536+((I&1023)<<10|b.charCodeAt(A)&1023),x+=t[240|I>>18]+t[128|I>>12&63]+t[128|I>>6&63]+t[128|I&63]}return x},h=function(p){for(var l=[{obj:{o:p},prop:"o"}],d=[],b=0;b<l.length;++b)for(var x=l[b],A=x.obj[x.prop],I=Object.keys(A),y=0;y<I.length;++y){var H=I[y],E=A[H];typeof E=="object"&&E!==null&&d.indexOf(E)===-1&&(l.push({obj:A,prop:H}),d.push(E))}return r(l),p},m=function(p){return Object.prototype.toString.call(p)==="[object RegExp]"},w=function(p){return!p||typeof p!="object"?!1:!!(p.constructor&&p.constructor.isBuffer&&p.constructor.isBuffer(p))},g=function(p,l){return[].concat(p,l)};return Du={arrayToObject:i,assign:s,combine:g,compact:h,decode:o,encode:u,isBuffer:w,isRegExp:m,merge:a},Du}var Bu,np;function ad(){if(np)return Bu;np=1;var n=String.prototype.replace,e=/%20/g,t=id(),r={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Bu=t.assign({default:r.RFC3986,formatters:{RFC1738:function(i){return n.call(i,e,"+")},RFC3986:function(i){return String(i)}}},r),Bu}var Ou,ip;function dy(){if(ip)return Ou;ip=1;var n=id(),e=ad(),t=Object.prototype.hasOwnProperty,r={brackets:function(p){return p+"[]"},comma:"comma",indices:function(p,l){return p+"["+l+"]"},repeat:function(p){return p}},i=Array.isArray,a=Array.prototype.push,s=function(_,p){a.apply(_,i(p)?p:[p])},o=Date.prototype.toISOString,u=e.default,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:u,formatter:e.formatters[u],indices:!1,serializeDate:function(p){return o.call(p)},skipNulls:!1,strictNullHandling:!1},m=function(p){return typeof p=="string"||typeof p=="number"||typeof p=="boolean"||typeof p=="symbol"||typeof p=="bigint"},w=function _(p,l,d,b,x,A,I,y,H,E,B,j,Z){var z=p;if(typeof I=="function"?z=I(l,z):z instanceof Date?z=E(z):d==="comma"&&i(z)&&(z=z.join(",")),z===null){if(b)return A&&!j?A(l,h.encoder,Z,"key"):l;z=""}if(m(z)||n.isBuffer(z)){if(A){var Te=j?l:A(l,h.encoder,Z,"key");return[B(Te)+"="+B(A(z,h.encoder,Z,"value"))]}return[B(l)+"="+B(String(z))]}var se=[];if(typeof z>"u")return se;var D;if(i(I))D=I;else{var N=Object.keys(z);D=y?N.sort(y):N}for(var ae=0;ae<D.length;++ae){var he=D[ae];x&&z[he]===null||(i(z)?s(se,_(z[he],typeof d=="function"?d(l,he):l,d,b,x,A,I,y,H,E,B,j,Z)):s(se,_(z[he],l+(H?"."+he:"["+he+"]"),d,b,x,A,I,y,H,E,B,j,Z)))}return se},g=function(p){if(!p)return h;if(p.encoder!==null&&p.encoder!==void 0&&typeof p.encoder!="function")throw new TypeError("Encoder has to be a function.");var l=p.charset||h.charset;if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var d=e.default;if(typeof p.format<"u"){if(!t.call(e.formatters,p.format))throw new TypeError("Unknown format option provided.");d=p.format}var b=e.formatters[d],x=h.filter;return(typeof p.filter=="function"||i(p.filter))&&(x=p.filter),{addQueryPrefix:typeof p.addQueryPrefix=="boolean"?p.addQueryPrefix:h.addQueryPrefix,allowDots:typeof p.allowDots>"u"?h.allowDots:!!p.allowDots,charset:l,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:h.charsetSentinel,delimiter:typeof p.delimiter>"u"?h.delimiter:p.delimiter,encode:typeof p.encode=="boolean"?p.encode:h.encode,encoder:typeof p.encoder=="function"?p.encoder:h.encoder,encodeValuesOnly:typeof p.encodeValuesOnly=="boolean"?p.encodeValuesOnly:h.encodeValuesOnly,filter:x,formatter:b,serializeDate:typeof p.serializeDate=="function"?p.serializeDate:h.serializeDate,skipNulls:typeof p.skipNulls=="boolean"?p.skipNulls:h.skipNulls,sort:typeof p.sort=="function"?p.sort:null,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:h.strictNullHandling}};return Ou=function(_,p){var l=_,d=g(p),b,x;typeof d.filter=="function"?(x=d.filter,l=x("",l)):i(d.filter)&&(x=d.filter,b=x);var A=[];if(typeof l!="object"||l===null)return"";var I;p&&p.arrayFormat in r?I=p.arrayFormat:p&&"indices"in p?I=p.indices?"indices":"repeat":I="indices";var y=r[I];b||(b=Object.keys(l)),d.sort&&b.sort(d.sort);for(var H=0;H<b.length;++H){var E=b[H];d.skipNulls&&l[E]===null||s(A,w(l[E],E,y,d.strictNullHandling,d.skipNulls,d.encode?d.encoder:null,d.filter,d.sort,d.allowDots,d.serializeDate,d.formatter,d.encodeValuesOnly,d.charset))}var B=A.join(d.delimiter),j=d.addQueryPrefix===!0?"?":"";return d.charsetSentinel&&(d.charset==="iso-8859-1"?j+="utf8=%26%2310003%3B&":j+="utf8=%E2%9C%93&"),B.length>0?j+B:""},Ou}var Uu,ap;function hy(){if(ap)return Uu;ap=1;var n=id(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},i=function(_){return _.replace(/&#(\d+);/g,function(p,l){return String.fromCharCode(parseInt(l,10))})},a=function(_,p){return _&&typeof _=="string"&&p.comma&&_.indexOf(",")>-1?_.split(","):_},s=function(p,l){if(t(p)){for(var d=[],b=0;b<p.length;b+=1)d.push(l(p[b]));return d}return l(p)},o="utf8=%26%2310003%3B",u="utf8=%E2%9C%93",h=function(p,l){var d={},b=l.ignoreQueryPrefix?p.replace(/^\?/,""):p,x=l.parameterLimit===1/0?void 0:l.parameterLimit,A=b.split(l.delimiter,x),I=-1,y,H=l.charset;if(l.charsetSentinel)for(y=0;y<A.length;++y)A[y].indexOf("utf8=")===0&&(A[y]===u?H="utf-8":A[y]===o&&(H="iso-8859-1"),I=y,y=A.length);for(y=0;y<A.length;++y)if(y!==I){var E=A[y],B=E.indexOf("]="),j=B===-1?E.indexOf("="):B+1,Z,z;j===-1?(Z=l.decoder(E,r.decoder,H,"key"),z=l.strictNullHandling?null:""):(Z=l.decoder(E.slice(0,j),r.decoder,H,"key"),z=s(a(E.slice(j+1),l),function(Te){return l.decoder(Te,r.decoder,H,"value")})),z&&l.interpretNumericEntities&&H==="iso-8859-1"&&(z=i(z)),E.indexOf("[]=")>-1&&(z=t(z)?[z]:z),e.call(d,Z)?d[Z]=n.combine(d[Z],z):d[Z]=z}return d},m=function(_,p,l,d){for(var b=d?p:a(p,l),x=_.length-1;x>=0;--x){var A,I=_[x];if(I==="[]"&&l.parseArrays)A=[].concat(b);else{A=l.plainObjects?Object.create(null):{};var y=I.charAt(0)==="["&&I.charAt(I.length-1)==="]"?I.slice(1,-1):I,H=parseInt(y,10);!l.parseArrays&&y===""?A={0:b}:!isNaN(H)&&I!==y&&String(H)===y&&H>=0&&l.parseArrays&&H<=l.arrayLimit?(A=[],A[H]=b):A[y]=b}b=A}return b},w=function(p,l,d,b){if(p){var x=d.allowDots?p.replace(/\.([^.[]+)/g,"[$1]"):p,A=/(\[[^[\]]*])/,I=/(\[[^[\]]*])/g,y=d.depth>0&&A.exec(x),H=y?x.slice(0,y.index):x,E=[];if(H){if(!d.plainObjects&&e.call(Object.prototype,H)&&!d.allowPrototypes)return;E.push(H)}for(var B=0;d.depth>0&&(y=I.exec(x))!==null&&B<d.depth;){if(B+=1,!d.plainObjects&&e.call(Object.prototype,y[1].slice(1,-1))&&!d.allowPrototypes)return;E.push(y[1])}return y&&E.push("["+x.slice(y.index)+"]"),m(E,l,d,b)}},g=function(p){if(!p)return r;if(p.decoder!==null&&p.decoder!==void 0&&typeof p.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var l=typeof p.charset>"u"?r.charset:p.charset;return{allowDots:typeof p.allowDots>"u"?r.allowDots:!!p.allowDots,allowPrototypes:typeof p.allowPrototypes=="boolean"?p.allowPrototypes:r.allowPrototypes,arrayLimit:typeof p.arrayLimit=="number"?p.arrayLimit:r.arrayLimit,charset:l,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:r.charsetSentinel,comma:typeof p.comma=="boolean"?p.comma:r.comma,decoder:typeof p.decoder=="function"?p.decoder:r.decoder,delimiter:typeof p.delimiter=="string"||n.isRegExp(p.delimiter)?p.delimiter:r.delimiter,depth:typeof p.depth=="number"||p.depth===!1?+p.depth:r.depth,ignoreQueryPrefix:p.ignoreQueryPrefix===!0,interpretNumericEntities:typeof p.interpretNumericEntities=="boolean"?p.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof p.parameterLimit=="number"?p.parameterLimit:r.parameterLimit,parseArrays:p.parseArrays!==!1,plainObjects:typeof p.plainObjects=="boolean"?p.plainObjects:r.plainObjects,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:r.strictNullHandling}};return Uu=function(_,p){var l=g(p);if(_===""||_===null||typeof _>"u")return l.plainObjects?Object.create(null):{};for(var d=typeof _=="string"?h(_,l):_,b=l.plainObjects?Object.create(null):{},x=Object.keys(d),A=0;A<x.length;++A){var I=x[A],y=w(I,d[I],l,typeof _=="string");b=n.merge(b,y,l)}return n.compact(b)},Uu}var qu,sp;function py(){if(sp)return qu;sp=1;var n=dy(),e=hy(),t=ad();return qu={formats:t,parse:e,stringify:n},qu}var Lt={},Ta={},ku={},Mu={},ju={},op;function _S(){if(op)return ju;op=1;function n(e){if(typeof e!="object")return e;var t,r,i=Object.prototype.toString.call(e);if(i==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){r=new e.constructor;for(t in e)e.hasOwnProperty(t)&&r[t]!==e[t]&&(r[t]=n(e[t]))}else{r={};for(t in e)t==="__proto__"?Object.defineProperty(r,t,{value:n(e[t]),configurable:!0,enumerable:!0,writable:!0}):r[t]=n(e[t])}return r}if(i==="[object Array]"){for(t=e.length,r=Array(t);t--;)r[t]=n(e[t]);return r}return i==="[object Set]"?(r=new Set,e.forEach(function(a){r.add(n(a))}),r):i==="[object Map]"?(r=new Map,e.forEach(function(a,s){r.set(n(s),n(a))}),r):i==="[object Date]"?new Date(+e):i==="[object RegExp]"?(r=new RegExp(e.source,e.flags),r.lastIndex=e.lastIndex,r):i==="[object DataView]"?new e.constructor(n(e.buffer)):i==="[object ArrayBuffer]"?e.slice(0):i.slice(-6)==="Array]"?new e.constructor(e):e}return ju.klona=n,ju}var lp;function my(){return lp||(lp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataObject=n.getRawData=n.rawDataSymbol=void 0;const e=_S();n.rawDataSymbol=Symbol("twurpleRawData");function t(i){return(0,e.klona)(i[n.rawDataSymbol])}n.getRawData=t;class r{constructor(a){this[n.rawDataSymbol]=a}}n.DataObject=r}(Mu)),Mu}var Ia={},Pa={},Da={},up;function sd(){if(up)return Da;up=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.CustomError=void 0;class n extends Error{constructor(t,r){var i;super(t,r),Object.setPrototypeOf(this,new.target.prototype),(i=Error.captureStackTrace)===null||i===void 0||i.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}}return Da.CustomError=n,Da}var cp;function _y(){if(cp)return Pa;cp=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.RelationAssertionError=void 0;const n=sd();class e extends n.CustomError{constructor(){super("Relation returned null - this may be a library bug or a race condition in your own code")}}return Pa.RelationAssertionError=e,Pa}var dp;function gS(){if(dp)return Ia;dp=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.checkRelationAssertion=void 0;const n=_y();function e(t){if(t==null)throw new n.RelationAssertionError;return t}return Ia.checkRelationAssertion=e,Ia}var Ba={},hp;function gy(){if(hp)return Ba;hp=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.rtfm=void 0;function n(e,t,r){return i=>{const a=r?function(){return`[${t}#${this[r]} - please check https://twurple.js.org/reference/${e}/classes/${t}.html for available properties]`}:function(){return`[${t} - please check https://twurple.js.org/reference/${e}/classes/${t}.html for available properties]`};Object.defineProperty(i.prototype,Symbol.for("nodejs.util.inspect.custom"),{value:a,enumerable:!1})}}return Ba.rtfm=n,Ba}var mr={},pp;function fS(){if(pp)return mr;pp=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.HelixExtension=void 0;const n=M,e=my(),t=gy();let r=class extends e.DataObject{get authorName(){return this[e.rawDataSymbol].author_name}get bitsEnabled(){return this[e.rawDataSymbol].bits_enabled}get installable(){return this[e.rawDataSymbol].can_install}get configurationLocation(){return this[e.rawDataSymbol].configuration_location}get description(){return this[e.rawDataSymbol].description}get tosUrl(){return this[e.rawDataSymbol].eula_tos_url}get hasChatSupport(){return this[e.rawDataSymbol].has_chat_support}get iconUrl(){return this[e.rawDataSymbol].icon_url}getIconUrl(a){return this[e.rawDataSymbol].icon_urls[a]}get id(){return this[e.rawDataSymbol].id}get name(){return this[e.rawDataSymbol].name}get privacyPolicyUrl(){return this[e.rawDataSymbol].privacy_policy_url}get requestsIdentityLink(){return this[e.rawDataSymbol].request_identity_link}get screenshotUrls(){return this[e.rawDataSymbol].screenshot_urls}get state(){return this[e.rawDataSymbol].state}get subscriptionsSupportLevel(){return this[e.rawDataSymbol].subscriptions_support_level}get summary(){return this[e.rawDataSymbol].summary}get supportEmail(){return this[e.rawDataSymbol].support_email}get version(){return this[e.rawDataSymbol].version}get viewerSummary(){return this[e.rawDataSymbol].viewer_summary}get viewerSummery(){return this[e.rawDataSymbol].viewer_summary}get allowedConfigUrls(){return this[e.rawDataSymbol].allowlisted_config_urls}get allowedPanelUrls(){return this[e.rawDataSymbol].allowlisted_panel_urls}get mobileViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.mobile)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get panelViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.panel)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get panelHeight(){var a,s;return(s=(a=this[e.rawDataSymbol].views.panel)===null||a===void 0?void 0:a.height)!==null&&s!==void 0?s:null}get panelCanLinkExternalContent(){var a,s;return(s=(a=this[e.rawDataSymbol].views.panel)===null||a===void 0?void 0:a.can_link_external_content)!==null&&s!==void 0?s:null}get overlayViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.video_overlay)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get overlayCanLinkExternalContent(){var a,s;return(s=(a=this[e.rawDataSymbol].views.video_overlay)===null||a===void 0?void 0:a.can_link_external_content)!==null&&s!==void 0?s:null}get componentViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get componentAspectWidth(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.aspect_width)!==null&&s!==void 0?s:null}get componentAspectHeight(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.aspect_height)!==null&&s!==void 0?s:null}get componentAspectRatioX(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.aspect_ratio_x)!==null&&s!==void 0?s:null}get componentAspectRatioY(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.aspect_ratio_y)!==null&&s!==void 0?s:null}get componentAutoScales(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.autoscale)!==null&&s!==void 0?s:null}get componentScalePixels(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.scale_pixels)!==null&&s!==void 0?s:null}get componentTargetHeight(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.target_height)!==null&&s!==void 0?s:null}get componentSize(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.size)!==null&&s!==void 0?s:null}get componentZoom(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.zoom)!==null&&s!==void 0?s:null}get componentZoomPixels(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.zoom_pixels)!==null&&s!==void 0?s:null}get componentCanLinkExternalContent(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.can_link_external_content)!==null&&s!==void 0?s:null}get configViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.config)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get configCanLinkExternalContent(){var a,s;return(s=(a=this[e.rawDataSymbol].views.config)===null||a===void 0?void 0:a.can_link_external_content)!==null&&s!==void 0?s:null}};return mr.HelixExtension=r,mr.HelixExtension=r=n.__decorate([(0,t.rtfm)("api","HelixExtension","id")],r),mr}var Oa={},mp;function yS(){if(mp)return Oa;mp=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.HellFreezesOverError=void 0;const n=sd();class e extends n.CustomError{constructor(r){super(`${r} - this should never happen, please file a bug in the GitHub issue tracker`)}}return Oa.HellFreezesOverError=e,Oa}var Nt={},_p;function bS(){if(_p)return Nt;_p=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.extractUserName=Nt.extractUserId=void 0;function n(t){return typeof t=="string"?t:typeof t=="number"?t.toString(10):t.id}Nt.extractUserId=n;function e(t){return typeof t=="string"?t:t.name}return Nt.extractUserName=e,Nt}var gp;function q(){return gp||(gp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.extractUserName=n.extractUserId=n.RelationAssertionError=n.HellFreezesOverError=n.CustomError=n.HelixExtension=n.rtfm=n.checkRelationAssertion=n.rawDataSymbol=n.getRawData=n.DataObject=void 0;var e=my();Object.defineProperty(n,"DataObject",{enumerable:!0,get:function(){return e.DataObject}}),Object.defineProperty(n,"getRawData",{enumerable:!0,get:function(){return e.getRawData}}),Object.defineProperty(n,"rawDataSymbol",{enumerable:!0,get:function(){return e.rawDataSymbol}});var t=gS();Object.defineProperty(n,"checkRelationAssertion",{enumerable:!0,get:function(){return t.checkRelationAssertion}});var r=gy();Object.defineProperty(n,"rtfm",{enumerable:!0,get:function(){return r.rtfm}});var i=fS();Object.defineProperty(n,"HelixExtension",{enumerable:!0,get:function(){return i.HelixExtension}});var a=sd();Object.defineProperty(n,"CustomError",{enumerable:!0,get:function(){return a.CustomError}});var s=yS();Object.defineProperty(n,"HellFreezesOverError",{enumerable:!0,get:function(){return s.HellFreezesOverError}});var o=_y();Object.defineProperty(n,"RelationAssertionError",{enumerable:!0,get:function(){return o.RelationAssertionError}});var u=bS();Object.defineProperty(n,"extractUserId",{enumerable:!0,get:function(){return u.extractUserId}}),Object.defineProperty(n,"extractUserName",{enumerable:!0,get:function(){return u.extractUserName}})}(ku)),ku}var fp;function fy(){if(fp)return Ta;fp=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.HttpStatusCodeError=void 0;const n=q();class e extends n.CustomError{constructor(r,i,a,s,o,u){super(`Encountered HTTP status code ${r}: ${i}

URL: ${a}
Method: ${s}
Body:
${!u&&o.length>150?`${o.slice(0,147)}...`:o}`),this._statusCode=r,this._url=a,this._method=s,this._body=o}get statusCode(){return this._statusCode}get url(){return this._url}get method(){return this._method}get body(){return this._body}}return Ta.HttpStatusCodeError=e,Ta}var yp;function yy(){if(yp)return Lt;yp=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.transformTwitchApiResponse=Lt.handleTwitchApiResponseError=void 0;const n=py(),e=fy();async function t(i,a){var s;if(!i.ok){const o=i.headers.get("Content-Type")==="application/json",u=o?JSON.stringify(await i.json(),null,2):await i.text(),h=(0,n.stringify)(a.query,{arrayFormat:"repeat",addQueryPrefix:!0}),m=`${a.url}${h}`;throw new e.HttpStatusCodeError(i.status,i.statusText,m,(s=a.method)!==null&&s!==void 0?s:"GET",u,o)}}Lt.handleTwitchApiResponseError=t;async function r(i){if(i.status===204)return;const a=await i.text();if(a)return JSON.parse(a)}return Lt.transformTwitchApiResponse=r,Lt}var Ua={},bp;function vS(){if(bp)return Ua;bp=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.getTwitchApiUrl=void 0;function n(e,t,r){switch(t){case"helix":{const i=e.replace(/^\//,"");return r?i==="eventsub/subscriptions"?`http://localhost:${r}/${i}`:`http://localhost:${r}/mock/${i}`:`https://api.twitch.tv/helix/${i}`}case"auth":return`https://id.twitch.tv/oauth2/${e.replace(/^\//,"")}`;case"custom":return e;default:return e}}return Ua.getTwitchApiUrl=n,Ua}var vp;function wS(){if(vp)return jt;vp=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.callTwitchApi=jt.callTwitchApiRaw=void 0;const n=cy(),e=py(),t=yy(),r=vS();async function i(s,o,u,h,m={},w){var g,_;const p=(g=s.type)!==null&&g!==void 0?g:"helix",l=(0,r.getTwitchApiUrl)(s.url,p,w),d=(0,e.stringify)(s.query,{arrayFormat:"repeat",addQueryPrefix:!0}),b=new n.Headers({Accept:"application/json"});let x;s.jsonBody&&(x=JSON.stringify(s.jsonBody),b.append("Content-Type","application/json")),o&&p!=="auth"&&b.append("Client-ID",o),u&&b.append("Authorization",`${p==="helix"?h??"Bearer":"OAuth"} ${u}`);const A={...m,method:(_=s.method)!==null&&_!==void 0?_:"GET",headers:b,body:x};return await(0,n.default)(`${l}${d}`,A)}jt.callTwitchApiRaw=i;async function a(s,o,u,h,m={}){const w=await i(s,o,u,h,m);return await(0,t.handleTwitchApiResponseError)(w,s),await(0,t.transformTwitchApiResponse)(w)}return jt.callTwitchApi=a,jt}var qa={},wp;function xS(){if(wp)return qa;wp=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.createBroadcasterQuery=void 0;const n=q();function e(t){return{broadcaster_id:(0,n.extractUserId)(t)}}return qa.createBroadcasterQuery=e,qa}var xp;function Ae(){return xp||(xp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.HttpStatusCodeError=n.transformTwitchApiResponse=n.handleTwitchApiResponseError=n.createBroadcasterQuery=n.callTwitchApiRaw=n.callTwitchApi=void 0;var e=wS();Object.defineProperty(n,"callTwitchApi",{enumerable:!0,get:function(){return e.callTwitchApi}}),Object.defineProperty(n,"callTwitchApiRaw",{enumerable:!0,get:function(){return e.callTwitchApiRaw}});var t=xS();Object.defineProperty(n,"createBroadcasterQuery",{enumerable:!0,get:function(){return t.createBroadcasterQuery}});var r=yy();Object.defineProperty(n,"handleTwitchApiResponseError",{enumerable:!0,get:function(){return r.handleTwitchApiResponseError}}),Object.defineProperty(n,"transformTwitchApiResponse",{enumerable:!0,get:function(){return r.transformTwitchApiResponse}});var i=fy();Object.defineProperty(n,"HttpStatusCodeError",{enumerable:!0,get:function(){return i.HttpStatusCodeError}})}(Pu)),Pu}var ka={},Sp;function by(){if(Sp)return ka;Sp=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.ConfigError=void 0;const n=q();class e extends n.CustomError{}return ka.ConfigError=e,ka}var Ma={},Cp;function SS(){if(Cp)return Ma;Cp=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.HelixRateLimiter=void 0;const n=nd(),e=Ae();class t extends n.ResponseBasedRateLimiter{async doRequest({options:i,clientId:a,accessToken:s,authorizationType:o,fetchOptions:u,mockServerPort:h}){return await(0,e.callTwitchApiRaw)(i,a,s,o,u,h)}needsToRetryAfter(i){return i.status===429&&(!i.headers.has("ratelimit-remaining")||Number(i.headers.get("ratelimit-remaining"))===0)?+i.headers.get("ratelimit-reset")*1e3-Date.now():null}getParametersFromResponse(i){const{headers:a}=i;return{limit:+a.get("ratelimit-limit"),remaining:+a.get("ratelimit-remaining"),resetsAt:+a.get("ratelimit-reset")*1e3}}}return Ma.HelixRateLimiter=t,Ma}var _r={},Lu={},ja={},La={},Ep;function xl(){if(Ep)return La;Ep=1,Object.defineProperty(La,"__esModule",{value:!0}),La.createCacheKey=void 0;function n(t){switch(typeof t){case"undefined":return"";case"object":{if(t===null)return"";if("cacheKey"in t)return t.cacheKey;const r=JSON.stringify(t);if(r!=="{}")return r}default:return t.toString()}}function e(t,r,i){return[t,...r.map(n)].join("/")+(i?"/":"")}return La.createCacheKey=e,La}var Hp;function CS(){if(Hp)return ja;Hp=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.Cacheable=void 0;const n=xl(),e=Symbol("cache");function t(r){var i,a;return a=class extends r{constructor(){super(...arguments),this[i]=new Map}getFromCache(s){if(this._cleanCache(),this[e].has(s)){const o=this[e].get(s);if(o)return o.value}}setCache(s,o,u){this[e].set(s,{value:o,expires:Date.now()+u*1e3})}removeFromCache(s,o){const u=this._getInternalCacheKey(s,o);o?this[e].forEach((h,m)=>{m.startsWith(u)&&this[e].delete(m)}):this[e].delete(u)}_cleanCache(){const s=Date.now();this[e].forEach((o,u)=>{o.expires<s&&this[e].delete(u)})}_getInternalCacheKey(s,o){if(typeof s=="string"){let u=s;return u.endsWith("/")||(u+="/"),u}else{const u=s.shift();return(0,n.createCacheKey)(u,s,o)}}},i=e,a}return ja.Cacheable=t,ja}var Na={},Rp;function ES(){if(Rp)return Na;Rp=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.Cached=void 0;const n=xl();function e(t=1/0,r=!1){return function(i,a,s){const o=s.value;return s.value=async function(...u){const h=(0,n.createCacheKey)(a,u),m=this.getFromCache(h);if(m)return m;const w=await o.apply(this,u);return(w!=null||r)&&this.setCache(h,w,t),w},s}}return Na.Cached=e,Na}var Fa={},Ap;function HS(){if(Ap)return Fa;Ap=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.CachedGetter=void 0;const n=xl();function e(t=1/0){return function(r,i,a){if(a.get){const s=a.get;a.get=function(){const o=(0,n.createCacheKey)(i,[]),u=this.getFromCache(o);if(u)return u;const h=s.call(this);return this.setCache(o,h,t),h}}return a}}return Fa.CachedGetter=e,Fa}var $a={},Tp;function RS(){if(Tp)return $a;Tp=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.ClearsCache=void 0;function n(e,t){return function(r,i,a){const s=a.value;return a.value=async function(...o){const u=await s.apply(this,o),h=t===void 0?o.slice():o.slice(0,t);return this.removeFromCache([e,...h],!0),u},a}}return $a.ClearsCache=n,$a}var Ip;function Sl(){return Ip||(Ip=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.createCacheKey=n.ClearsCache=n.CachedGetter=n.Cached=n.Cacheable=void 0;var e=CS();Object.defineProperty(n,"Cacheable",{enumerable:!0,get:function(){return e.Cacheable}});var t=ES();Object.defineProperty(n,"Cached",{enumerable:!0,get:function(){return t.Cached}});var r=HS();Object.defineProperty(n,"CachedGetter",{enumerable:!0,get:function(){return r.CachedGetter}});var i=RS();Object.defineProperty(n,"ClearsCache",{enumerable:!0,get:function(){return i.ClearsCache}});var a=xl();Object.defineProperty(n,"createCacheKey",{enumerable:!0,get:function(){return a.createCacheKey}})}(Lu)),Lu}var Nu={},Ga={},Qa={},Pp;function vy(){if(Pp)return Qa;Pp=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.Listener=void 0;class n{constructor(t,r,i,a=!1){this.owner=t,this.event=r,this.listener=i,this._internal=a}unbind(){this.owner.removeListener(this)}}return Qa.Listener=n,Qa}var Dp;function AS(){if(Dp)return Ga;Dp=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.EventEmitter=void 0;const n=vy();class e{constructor(){this._eventListeners=new Map,this._internalEventListeners=new Map}on(r,i){return this._addListener(!1,r,i)}addListener(r,i){return this._addListener(!1,r,i)}removeListener(r,i){this._removeListener(!1,r,i)}registerEvent(){const r=i=>this.addListener(r,i);return r}emit(r,...i){if(this._eventListeners.has(r))for(const a of this._eventListeners.get(r))a(...i);if(this._internalEventListeners.has(r))for(const a of this._internalEventListeners.get(r))a(...i)}registerInternalEvent(){const r=i=>this.addInternalListener(r,i);return r}addInternalListener(r,i){return this._addListener(!0,r,i)}removeInternalListener(r,i){this._removeListener(!0,r,i)}_addListener(r,i,a){const s=r?this._eventListeners:this._internalEventListeners;return s.has(i)?s.get(i).push(a):s.set(i,[a]),new n.Listener(this,i,a,r)}_removeListener(r,i,a){const s=r?this._eventListeners:this._internalEventListeners;if(!i)s.clear();else if(typeof i=="object"){const o=i;this._removeListener(o._internal,o.event,o.listener)}else{const o=i;if(s.has(o))if(a){const u=s.get(o);let h=0;for(;(h=u.indexOf(a))!==-1;)u.splice(h,1)}else s.delete(o)}}}return Ga.EventEmitter=e,Ga}var Bp;function wy(){return Bp||(Bp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Listener=n.EventEmitter=void 0;var e=AS();Object.defineProperty(n,"EventEmitter",{enumerable:!0,get:function(){return e.EventEmitter}});var t=vy();Object.defineProperty(n,"Listener",{enumerable:!0,get:function(){return t.Listener}})}(Nu)),Nu}var Fu={},Ft={},Op;function od(){if(Op)return Ft;Op=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.accessTokenIsExpired=Ft.getExpiryDateOfAccessToken=void 0;const n=W(),e=6e4;function t(a){return(0,n.mapNullable)(a.expiresIn,s=>a.obtainmentTimestamp+s*1e3-e)}function r(a){return(0,n.mapNullable)(t(a),s=>new Date(s))}Ft.getExpiryDateOfAccessToken=r;function i(a){var s;return(s=(0,n.mapNullable)(t(a),o=>Date.now()>o))!==null&&s!==void 0?s:!1}return Ft.accessTokenIsExpired=i,Ft}var Ee={},Wa={},Up;function ld(){if(Up)return Wa;Up=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.InvalidTokenError=void 0;const n=q();class e extends n.CustomError{constructor(r){super("Invalid token supplied",r)}}return Wa.InvalidTokenError=e,Wa}var Va={},qp;function ud(){if(qp)return Va;qp=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.InvalidTokenTypeError=void 0;const n=q();let e=class extends n.CustomError{};return Va.InvalidTokenTypeError=e,Va}var it={},kp;function TS(){if(kp)return it;kp=1,Object.defineProperty(it,"__esModule",{value:!0}),it.createRevokeTokenQuery=it.createRefreshTokenQuery=it.createGetAppTokenQuery=it.createExchangeCodeQuery=void 0;function n(i,a,s,o){return{grant_type:"authorization_code",client_id:i,client_secret:a,code:s,redirect_uri:o}}it.createExchangeCodeQuery=n;function e(i,a){return{grant_type:"client_credentials",client_id:i,client_secret:a}}it.createGetAppTokenQuery=e;function t(i,a,s){return{grant_type:"refresh_token",client_id:i,client_secret:a,refresh_token:s}}it.createRefreshTokenQuery=t;function r(i,a){return{client_id:i,token:a}}return it.createRevokeTokenQuery=r,it}var gr={},Mp;function xy(){if(Mp)return gr;Mp=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.TokenInfo=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a){super(a),this._obtainmentDate=new Date}get clientId(){return this[t.rawDataSymbol].client_id}get userId(){var a;return(a=this[t.rawDataSymbol].user_id)!==null&&a!==void 0?a:null}get userName(){var a;return(a=this[t.rawDataSymbol].login)!==null&&a!==void 0?a:null}get scopes(){return this[t.rawDataSymbol].scopes}get expiryDate(){return(0,e.mapNullable)(this[t.rawDataSymbol].expires_in,a=>new Date(this._obtainmentDate.getTime()+a*1e3))}};return gr.TokenInfo=r,gr.TokenInfo=r=n.__decorate([(0,t.rtfm)("auth","TokenInfo","clientId")],r),gr}var jp;function Cl(){if(jp)return Ee;jp=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.loadAndCompareTokenInfo=Ee.compareScopeSets=Ee.compareScopes=Ee.getValidTokenFromProviderForIntent=Ee.getValidTokenFromProviderForUser=Ee.getTokenInfo=Ee.revokeToken=Ee.refreshUserToken=Ee.getAppToken=Ee.exchangeCode=void 0;const n=Ae(),e=ld(),t=ud(),r=TS(),i=xy();function a(b){var x,A;return{accessToken:b.access_token,refreshToken:b.refresh_token||null,scope:(x=b.scope)!==null&&x!==void 0?x:[],expiresIn:(A=b.expires_in)!==null&&A!==void 0?A:null,obtainmentTimestamp:Date.now()}}async function s(b,x,A,I){return a(await(0,n.callTwitchApi)({type:"auth",url:"token",method:"POST",query:(0,r.createExchangeCodeQuery)(b,x,A,I)}))}Ee.exchangeCode=s;async function o(b,x){return a(await(0,n.callTwitchApi)({type:"auth",url:"token",method:"POST",query:(0,r.createGetAppTokenQuery)(b,x)}))}Ee.getAppToken=o;async function u(b,x,A){return a(await(0,n.callTwitchApi)({type:"auth",url:"token",method:"POST",query:(0,r.createRefreshTokenQuery)(b,x,A)}))}Ee.refreshUserToken=u;async function h(b,x){await(0,n.callTwitchApi)({type:"auth",url:"revoke",method:"POST",query:(0,r.createRevokeTokenQuery)(b,x)})}Ee.revokeToken=h;async function m(b,x){try{const A=await(0,n.callTwitchApi)({type:"auth",url:"validate"},x,b);return new i.TokenInfo(A)}catch(A){throw A instanceof n.HttpStatusCodeError&&A.statusCode===401?new e.InvalidTokenError({cause:A}):A}}Ee.getTokenInfo=m;async function w(b,x,A,I){let y=null,H=!1;try{const E=await b.getAccessTokenForUser(x,A);if(E){H=!0;const B=await m(E.accessToken);return{accessToken:E,tokenInfo:B}}}catch(E){E instanceof e.InvalidTokenError?y=E:I==null||I.error(`Retrieving an access token failed: ${E.message}`)}if(H&&(I==null||I.warn("No valid token available; trying to refresh"),b.refreshAccessTokenForUser))try{const E=await b.refreshAccessTokenForUser(x),B=await m(E.accessToken);return{accessToken:E,tokenInfo:B}}catch(E){E instanceof e.InvalidTokenError?y=E:I==null||I.error(`Refreshing the access token failed: ${E.message}`)}throw y??new Error("Could not retrieve a valid token")}Ee.getValidTokenFromProviderForUser=w;async function g(b,x,A,I){let y=null,H=!1;if(!b.getAccessTokenForIntent)throw new t.InvalidTokenTypeError("This call requires an AuthProvider that supports intents.\nPlease use an auth provider that does, such as `RefreshingAuthProvider`.");try{const E=await b.getAccessTokenForIntent(x,A);if(E){H=!0;const B=await m(E.accessToken);return{accessToken:E,tokenInfo:B}}}catch(E){E instanceof e.InvalidTokenError?y=E:I==null||I.error(`Retrieving an access token failed: ${E.message}`)}if(H&&(I==null||I.warn("No valid token available; trying to refresh"),b.refreshAccessTokenForIntent))try{const E=await b.refreshAccessTokenForIntent(x),B=await m(E.accessToken);return{accessToken:E,tokenInfo:B}}catch(E){E instanceof e.InvalidTokenError?y=E:I==null||I.error(`Refreshing the access token failed: ${E.message}`)}throw y??new Error("Could not retrieve a valid token")}Ee.getValidTokenFromProviderForIntent=g;const _=new Map([["channel_commercial",["channel:edit:commercial"]],["channel_editor",["channel:manage:broadcast"]],["channel_read",["channel:read:stream_key"]],["channel_subscriptions",["channel:read:subscriptions"]],["user_blocks_read",["user:read:blocked_users"]],["user_blocks_edit",["user:manage:blocked_users"]],["user_follows_edit",["user:edit:follows"]],["user_read",["user:read:email"]],["user_subscriptions",["user:read:subscriptions"]],["user:edit:broadcast",["channel:manage:broadcast","channel:manage:extensions"]]]);function p(b,x){if(x!=null&&x.length){const A=new Set(b.flatMap(I=>{var y;return[I,...(y=_.get(I))!==null&&y!==void 0?y:[]]}));if(x.every(I=>!A.has(I))){const I=x.join(", ");throw new Error(`This token does not have any of the requested scopes (${I}) and can not be upgraded.
If you need dynamically upgrading scopes, please implement the AuthProvider interface accordingly:

	https://twurple.js.org/reference/auth/interfaces/AuthProvider.html`)}}}Ee.compareScopes=p;function l(b,x){for(const A of x)p(b,A)}Ee.compareScopeSets=l;async function d(b,x,A,I,y){if(y!=null&&y.length||!A){const H=await m(x,b);if(!H.userId)throw new Error("Trying to use an app access token as a user access token");const E=I??H.scopes;return y&&l(E,y.filter(B=>!!B)),[E,H.userId]}return[I,A]}return Ee.loadAndCompareTokenInfo=d,Ee}var za={},Lp;function cd(){if(Lp)return za;Lp=1,Object.defineProperty(za,"__esModule",{value:!0}),za.TokenFetcher=void 0;const n=W();class e{constructor(r){this._newTokenScopeSets=[],this._newTokenPromise=null,this._queuedScopeSets=[],this._queueExecutor=null,this._queuePromise=null,this._executor=r}async fetch(...r){var i;const a=r.filter(h=>!!h);if(this._newTokenPromise){if(!a.length)return await this._newTokenPromise;if(this._queueExecutor?this._queuedScopeSets.push(...a):this._queuedScopeSets=[...a],!this._queuePromise){const{promise:h,resolve:m,reject:w}=(0,n.promiseWithResolvers)();this._queuePromise=h,this._queueExecutor=async()=>{var g;if(this._queuePromise){this._newTokenScopeSets=this._queuedScopeSets,this._queuedScopeSets=[],this._newTokenPromise=this._queuePromise,this._queuePromise=null,this._queueExecutor=null;try{m(await this._executor(this._newTokenScopeSets))}catch(_){w(_)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(g=this._queueExecutor)===null||g===void 0||g.call(this)}}}}return await this._queuePromise}this._newTokenScopeSets=[...a];const{promise:s,resolve:o,reject:u}=(0,n.promiseWithResolvers)();this._newTokenPromise=s;try{o(await this._executor(this._newTokenScopeSets))}catch(h){u(h)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(i=this._queueExecutor)===null||i===void 0||i.call(this)}return await s}}return za.TokenFetcher=e,za}var fr={},Np;function IS(){if(Np)return fr;Np=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.AppTokenAuthProvider=void 0;const n=M,e=W(),t=q(),r=od(),i=Cl(),a=cd();let s=class{constructor(u,h,m=[]){this._clientId=u,this._clientSecret=h,this._impliedScopes=m,this._fetcher=new a.TokenFetcher(async w=>await this._fetch(w))}get clientId(){return this._clientId}get currentScopes(){return this._impliedScopes}async getAccessTokenForUser(u,...h){if(h.every(m=>{var w;return(w=m==null?void 0:m.some(g=>this._impliedScopes.includes(g)))!==null&&w!==void 0?w:!0}))return{...await this.getAppAccessToken(),userId:(0,t.extractUserId)(u)};throw new Error("Can not get user access token for AppTokenAuthProvider")}getCurrentScopesForUser(){return this._impliedScopes}async getAnyAccessToken(){return await this._fetcher.fetch()}async getAppAccessToken(u=!1){return u&&(this._token=void 0),await this._fetcher.fetch()}async _fetch(u){if(u.length>0)for(const h of u)if(this._impliedScopes.length){if(h.every(m=>!this._impliedScopes.includes(m)))throw new Error(`One of the scopes ${h.join(", ")} requested but only the scope ${this._impliedScopes.join(", ")} is implied`)}else throw new Error(`One of the scopes ${h.join(", ")} requested but the client credentials flow does not support scopes`);return!this._token||(0,r.accessTokenIsExpired)(this._token)?this._token=await(0,i.getAppToken)(this._clientId,this._clientSecret):this._token}};return fr.AppTokenAuthProvider=s,n.__decorate([(0,e.Enumerable)(!1)],s.prototype,"_clientSecret",void 0),n.__decorate([(0,e.Enumerable)(!1)],s.prototype,"_token",void 0),n.__decorate([(0,e.Enumerable)(!1)],s.prototype,"_fetcher",void 0),fr.AppTokenAuthProvider=s=n.__decorate([(0,t.rtfm)("auth","AppTokenAuthProvider","clientId")],s),fr}var yr={},Ka={},Fp;function Sy(){if(Fp)return Ka;Fp=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.CachedRefreshFailureError=void 0;const n=q();let e=class extends n.CustomError{constructor(r){super(`The user context for the user ${r} has been disabled.
This happened because the access token became invalid (e.g. by expiry) and refreshing it failed (e.g. because the account's password was changed).

Use .addUser(), .addUserForToken() or .addUserForCode() for the same user context to re-enable the user with a new, valid token.`),this.userId=r}};return Ka.CachedRefreshFailureError=e,Ka}var Xa={},$p;function Cy(){if($p)return Xa;$p=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.IntermediateUserRemovalError=void 0;const n=q();let e=class extends n.CustomError{constructor(r){super(`User ${r} was removed while trying to fetch a token.

Make sure you're not executing any actions when you want to remove a user.`),this.userId=r}};return Xa.IntermediateUserRemovalError=e,Xa}var Ja={},Gp;function Ey(){if(Gp)return Ja;Gp=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.UnknownIntentError=void 0;const n=q();let e=class extends n.CustomError{constructor(r){super(`Unknown intent: ${r}`),this.intent=r}};return Ja.UnknownIntentError=e,Ja}var Qp;function PS(){if(Qp)return yr;Qp=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.RefreshingAuthProvider=void 0;const n=M,e=W(),t=wy(),r=q(),i=od(),a=Sy(),s=Cy(),o=ld(),u=ud(),h=Ey(),m=Cl(),w=cd();let g=class extends t.EventEmitter{constructor(p){var l;super(),this._userAccessTokens=new Map,this._userTokenFetchers=new Map,this._intentToUserId=new Map,this._userIdToIntents=new Map,this._cachedRefreshFailures=new Set,this.onRefresh=this.registerEvent(),this.onRefreshFailure=this.registerEvent(),this._clientId=p.clientId,this._clientSecret=p.clientSecret,this._redirectUri=p.redirectUri,this._appImpliedScopes=(l=p.appImpliedScopes)!==null&&l!==void 0?l:[],this._appTokenFetcher=new w.TokenFetcher(async d=>await this._fetchAppToken(d))}addUser(p,l,d){const b=(0,r.extractUserId)(p);if(!l.refreshToken)throw new Error(`Trying to add user ${b} without refresh token`);this._cachedRefreshFailures.delete(b),this._userAccessTokens.set(b,{...l,userId:b}),this._userTokenFetchers.has(b)||this._userTokenFetchers.set(b,new w.TokenFetcher(async x=>await this._fetchUserToken(b,x))),d&&this.addIntentsToUser(p,d)}async addUserForToken(p,l){let d=null;if(p.accessToken&&!(0,i.accessTokenIsExpired)(p))try{const I=await(0,m.getTokenInfo)(p.accessToken);d=[p,I]}catch(I){if(!(I instanceof o.InvalidTokenError))throw I}if(!d){if(!p.refreshToken)throw new o.InvalidTokenError;const I=await(0,m.refreshUserToken)(this._clientId,this._clientSecret,p.refreshToken),y=await(0,m.getTokenInfo)(I.accessToken);this.emit(this.onRefresh,y.userId,I),d=[I,y]}const[b,x]=d;if(!x.userId)throw new u.InvalidTokenTypeError("Could not determine a user ID for your token; you might be trying to disguise an app token as a user token.");const A=b.scope?b:{...b,scope:x.scopes};return this.addUser(x.userId,A,l),x.userId}async addUserForCode(p,l){if(!this._redirectUri)throw new Error("This method requires you to pass a `redirectUri` as a configuration property");const d=await(0,m.exchangeCode)(this._clientId,this._clientSecret,p,this._redirectUri);return await this.addUserForToken(d,l)}hasUser(p){return this._userTokenFetchers.has((0,r.extractUserId)(p))}removeUser(p){const l=(0,r.extractUserId)(p);if(this._userIdToIntents.has(l)){const d=this._userIdToIntents.get(l);for(const b of d)this._intentToUserId.delete(b);this._userIdToIntents.delete(l)}this._userAccessTokens.delete(l),this._userTokenFetchers.delete(l),this._cachedRefreshFailures.delete(l)}addIntentsToUser(p,l){const d=(0,r.extractUserId)(p);if(!this._userAccessTokens.has(d))throw new Error("Trying to add intents to a user that was not added to this provider");for(const b of l)this._intentToUserId.has(b)&&this._userIdToIntents.get(this._intentToUserId.get(b)).delete(b),this._intentToUserId.set(b,d),this._userIdToIntents.has(d)?this._userIdToIntents.get(d).add(b):this._userIdToIntents.set(d,new Set([b]))}getIntentsForUser(p){const l=(0,r.extractUserId)(p);return this._userIdToIntents.has(l)?Array.from(this._userIdToIntents.get(l)):[]}removeIntents(p){var l;for(const d of p)if(this._intentToUserId.has(d)){const b=this._intentToUserId.get(d);(l=this._userIdToIntents.get(b))===null||l===void 0||l.delete(d),this._intentToUserId.delete(d)}}async refreshAccessTokenForUser(p){const l=(0,r.extractUserId)(p);if(this._cachedRefreshFailures.has(l))throw new a.CachedRefreshFailureError(l);const d=this._userAccessTokens.get(l);if(!d)throw new Error("Trying to refresh token for user that was not added to the provider");const b=await this._refreshUserTokenWithCallback(l,d.refreshToken);return this._checkIntermediateUserRemoval(l),this._userAccessTokens.set(l,{...b,userId:l}),this.emit(this.onRefresh,l,b),{...b,userId:l}}async refreshAccessTokenForIntent(p){if(!this._intentToUserId.has(p))throw new h.UnknownIntentError(p);const l=this._intentToUserId.get(p);return await this.refreshAccessTokenForUser(l)}get clientId(){return this._clientId}getCurrentScopesForUser(p){var l;const d=this._userAccessTokens.get((0,r.extractUserId)(p));if(!d)throw new Error("Trying to get scopes for user that was not added to the provider");return(l=d.scope)!==null&&l!==void 0?l:[]}async getAccessTokenForUser(p,...l){const d=(0,r.extractUserId)(p),b=this._userTokenFetchers.get(d);if(!b)return null;if(this._cachedRefreshFailures.has(d))throw new a.CachedRefreshFailureError(d);return(0,m.compareScopeSets)(this.getCurrentScopesForUser(d),l.filter(Boolean)),await b.fetch(...l)}async getAccessTokenForIntent(p,...l){if(!this._intentToUserId.has(p))return null;const d=this._intentToUserId.get(p),b=await this.getAccessTokenForUser(d,...l);if(!b)throw new r.HellFreezesOverError(`Found intent ${p} corresponding to user ID ${d} but no token was found`);return{...b,userId:d}}async getAnyAccessToken(p){if(p){const l=(0,r.extractUserId)(p);if(this._userAccessTokens.has(l)){const d=await this.getAccessTokenForUser(l);if(!d)throw new r.HellFreezesOverError(`Token for user ID ${l} exists but nothing was returned by getAccessTokenForUser`);return{...d,userId:l}}}return await this.getAppAccessToken()}async getAppAccessToken(p=!1){return p&&(this._appAccessToken=void 0),await this._appTokenFetcher.fetch(...this._appImpliedScopes.map(l=>[l]))}_checkIntermediateUserRemoval(p){if(!this._userTokenFetchers.has(p))throw this._cachedRefreshFailures.delete(p),new s.IntermediateUserRemovalError(p)}async _fetchUserToken(p,l){const d=this._userAccessTokens.get(p);if(!d)throw new Error("Trying to get token for user that was not added to the provider");if(d.accessToken&&!(0,i.accessTokenIsExpired)(d))try{if(d.scope)return(0,m.compareScopeSets)(d.scope,l),d;const[x=[]]=await(0,m.loadAndCompareTokenInfo)(this._clientId,d.accessToken,p,d.scope,l),A={...d,scope:x};return this._checkIntermediateUserRemoval(p),this._userAccessTokens.set(p,A),A}catch(x){if(!(x instanceof o.InvalidTokenError))throw x}this._checkIntermediateUserRemoval(p);const b=await this.refreshAccessTokenForUser(p);return(0,m.compareScopeSets)(b.scope,l),b}async _refreshUserTokenWithCallback(p,l){try{return await(0,m.refreshUserToken)(this.clientId,this._clientSecret,l)}catch(d){throw this._cachedRefreshFailures.add(p),this.emit(this.onRefreshFailure,p,d),d}}async _fetchAppToken(p){if(p.length>0)for(const l of p)if(this._appImpliedScopes.length){if(l.every(d=>!this._appImpliedScopes.includes(d)))throw new Error(`One of the scopes ${l.join(", ")} requested but only the scope ${this._appImpliedScopes.join(", ")} is implied`)}else throw new Error(`One of the scopes ${l.join(", ")} requested but the client credentials flow does not support scopes`);return!this._appAccessToken||(0,i.accessTokenIsExpired)(this._appAccessToken)?await this._refreshAppToken():this._appAccessToken}async _refreshAppToken(){return this._appAccessToken=await(0,m.getAppToken)(this._clientId,this._clientSecret)}};return yr.RefreshingAuthProvider=g,n.__decorate([(0,e.Enumerable)(!1)],g.prototype,"_clientSecret",void 0),n.__decorate([(0,e.Enumerable)(!1)],g.prototype,"_userAccessTokens",void 0),n.__decorate([(0,e.Enumerable)(!1)],g.prototype,"_userTokenFetchers",void 0),n.__decorate([(0,e.Enumerable)(!1)],g.prototype,"_appAccessToken",void 0),n.__decorate([(0,e.Enumerable)(!1)],g.prototype,"_appTokenFetcher",void 0),yr.RefreshingAuthProvider=g=n.__decorate([(0,r.rtfm)("auth","RefreshingAuthProvider","clientId")],g),yr}var br={},Wp;function DS(){if(Wp)return br;Wp=1,Object.defineProperty(br,"__esModule",{value:!0}),br.StaticAuthProvider=void 0;const n=M,e=W(),t=q(),r=Cl();let i=class{constructor(s,o,u){this._clientId=s||"",this._accessToken=typeof o=="string"?{accessToken:o,refreshToken:null,scope:u??[],expiresIn:null,obtainmentTimestamp:Date.now()}:o,this._scopes=u}get clientId(){return this._clientId}async getAccessTokenForUser(s,...o){return await this._getAccessToken(o)}async getAccessTokenForIntent(s,...o){return await this._getAccessToken(o)}async getAnyAccessToken(){return await this._getAccessToken()}getCurrentScopesForUser(){var s;return(s=this._scopes)!==null&&s!==void 0?s:[]}async _getAccessToken(s){const[o,u]=await(0,r.loadAndCompareTokenInfo)(this._clientId,this._accessToken.accessToken,this._userId,this._scopes,s);return this._scopes=o,this._userId=u,{...this._accessToken,userId:u}}};return br.StaticAuthProvider=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_clientId",void 0),n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_accessToken",void 0),br.StaticAuthProvider=i=n.__decorate([(0,t.rtfm)("auth","StaticAuthProvider","clientId")],i),br}var Vp;function Hy(){return Vp||(Vp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.UnknownIntentError=n.InvalidTokenTypeError=n.InvalidTokenError=n.IntermediateUserRemovalError=n.CachedRefreshFailureError=n.StaticAuthProvider=n.RefreshingAuthProvider=n.AppTokenAuthProvider=n.TokenInfo=n.TokenFetcher=n.revokeToken=n.refreshUserToken=n.getValidTokenFromProviderForIntent=n.getValidTokenFromProviderForUser=n.getTokenInfo=n.getAppToken=n.exchangeCode=n.getExpiryDateOfAccessToken=n.accessTokenIsExpired=void 0;var e=od();Object.defineProperty(n,"accessTokenIsExpired",{enumerable:!0,get:function(){return e.accessTokenIsExpired}}),Object.defineProperty(n,"getExpiryDateOfAccessToken",{enumerable:!0,get:function(){return e.getExpiryDateOfAccessToken}});var t=Cl();Object.defineProperty(n,"exchangeCode",{enumerable:!0,get:function(){return t.exchangeCode}}),Object.defineProperty(n,"getAppToken",{enumerable:!0,get:function(){return t.getAppToken}}),Object.defineProperty(n,"getTokenInfo",{enumerable:!0,get:function(){return t.getTokenInfo}}),Object.defineProperty(n,"getValidTokenFromProviderForUser",{enumerable:!0,get:function(){return t.getValidTokenFromProviderForUser}}),Object.defineProperty(n,"getValidTokenFromProviderForIntent",{enumerable:!0,get:function(){return t.getValidTokenFromProviderForIntent}}),Object.defineProperty(n,"refreshUserToken",{enumerable:!0,get:function(){return t.refreshUserToken}}),Object.defineProperty(n,"revokeToken",{enumerable:!0,get:function(){return t.revokeToken}});var r=cd();Object.defineProperty(n,"TokenFetcher",{enumerable:!0,get:function(){return r.TokenFetcher}});var i=xy();Object.defineProperty(n,"TokenInfo",{enumerable:!0,get:function(){return i.TokenInfo}});var a=IS();Object.defineProperty(n,"AppTokenAuthProvider",{enumerable:!0,get:function(){return a.AppTokenAuthProvider}});var s=PS();Object.defineProperty(n,"RefreshingAuthProvider",{enumerable:!0,get:function(){return s.RefreshingAuthProvider}});var o=DS();Object.defineProperty(n,"StaticAuthProvider",{enumerable:!0,get:function(){return o.StaticAuthProvider}});var u=Sy();Object.defineProperty(n,"CachedRefreshFailureError",{enumerable:!0,get:function(){return u.CachedRefreshFailureError}});var h=Cy();Object.defineProperty(n,"IntermediateUserRemovalError",{enumerable:!0,get:function(){return h.IntermediateUserRemovalError}});var m=ld();Object.defineProperty(n,"InvalidTokenError",{enumerable:!0,get:function(){return m.InvalidTokenError}});var w=ud();Object.defineProperty(n,"InvalidTokenTypeError",{enumerable:!0,get:function(){return w.InvalidTokenTypeError}});var g=Ey();Object.defineProperty(n,"UnknownIntentError",{enumerable:!0,get:function(){return g.UnknownIntentError}})}(Fu)),Fu}var $u={},Gu,zp;function BS(){if(zp)return Gu;zp=1;function n(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return Gu=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},r),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,r=0,i=0;i<this._errors.length;i++){var a=this._errors[i],s=a.message,o=(e[s]||0)+1;e[s]=o,o>=r&&(t=a,r=o)}return t},Gu}var Kp;function OS(){return Kp||(Kp=1,function(n){var e=BS();n.operation=function(t){var r=n.timeouts(t);return new e(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in t)r[i]=t[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],s=0;s<r.retries;s++)a.push(this.createTimeout(s,r));return t&&t.forever&&!a.length&&a.push(this.createTimeout(s,r)),a.sort(function(o,u){return o-u}),a},n.createTimeout=function(t,r){var i=r.randomize?Math.random()+1:1,a=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,t));return a=Math.min(a,r.maxTimeout),a},n.wrap=function(t,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var a in t)typeof t[a]=="function"&&i.push(a)}for(var s=0;s<i.length;s++){var o=i[s],u=t[o];t[o]=(function(m){var w=n.operation(r),g=Array.prototype.slice.call(arguments,1),_=g.pop();g.push(function(p){w.retry(p)||(p&&(arguments[0]=w.mainError()),_.apply(this,arguments))}),w.attempt(function(){m.apply(t,g)})}).bind(t,u),t[o].options=r}}}($u)),$u}var Qu,Xp;function Ry(){return Xp||(Xp=1,Qu=OS()),Qu}var vr={},Ya={},Jp;function US(){if(Jp)return Ya;Jp=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.createBitsLeaderboardQuery=void 0;function n(e={}){const{count:t=10,period:r="all",startDate:i,contextUserId:a}=e;return{count:t.toString(),period:r,started_at:i==null?void 0:i.toISOString(),user_id:a}}return Ya.createBitsLeaderboardQuery=n,Ya}var Za={},Yp;function ve(){if(Yp)return Za;Yp=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.BaseApi=void 0;const n=M,e=W();class t{constructor(i){this._client=i}_getUserContextIdWithDefault(i){var a;return(a=this._client._getUserIdFromRequestContext(i))!==null&&a!==void 0?a:i}}return Za.BaseApi=t,n.__decorate([(0,e.Enumerable)(!1)],t.prototype,"_client",void 0),Za}var wr={},xr={},Zp;function Ay(){if(Zp)return xr;Zp=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.HelixBitsLeaderboardEntry=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}get rank(){return this[t.rawDataSymbol].rank}get amount(){return this[t.rawDataSymbol].score}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return xr.HelixBitsLeaderboardEntry=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),xr.HelixBitsLeaderboardEntry=r=n.__decorate([(0,t.rtfm)("api","HelixBitsLeaderboardEntry","userId")],r),xr}var em;function Ty(){if(em)return wr;em=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.HelixBitsLeaderboard=void 0;const n=M,e=Sl(),t=W(),r=q(),i=Ay();let a=class extends r.DataObject{constructor(o,u){super(o),this._client=u}get entries(){return this[r.rawDataSymbol].data.map(o=>new i.HelixBitsLeaderboardEntry(o,this._client))}get totalCount(){return this[r.rawDataSymbol].total}};return wr.HelixBitsLeaderboard=a,n.__decorate([(0,t.Enumerable)(!1)],a.prototype,"_client",void 0),n.__decorate([(0,e.CachedGetter)()],a.prototype,"entries",null),wr.HelixBitsLeaderboard=a=n.__decorate([e.Cacheable,(0,r.rtfm)("api","HelixBitsLeaderboard")],a),wr}var Sr={},tm;function Iy(){if(tm)return Sr;tm=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.HelixCheermoteList=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a){super((0,e.indexBy)(a,s=>s.prefix.toLowerCase()))}getCheermoteDisplayInfo(a,s,o){a=a.toLowerCase();const{background:u,state:h,scale:m}=o,{tiers:w}=this[t.rawDataSymbol][a],g=w.sort((_,p)=>p.min_bits-_.min_bits).find(_=>_.min_bits<=s);if(!g)throw new t.HellFreezesOverError(`Cheermote "${a}" does not have an applicable tier for ${s} bits`);return{url:g.images[u][h][m],color:g.color}}getPossibleNames(){return Object.keys(this[t.rawDataSymbol])}};return Sr.HelixCheermoteList=r,Sr.HelixCheermoteList=r=n.__decorate([(0,t.rtfm)("api","HelixCheermoteList")],r),Sr}var rm;function Py(){if(rm)return vr;rm=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.HelixBitsApi=void 0;const n=M,e=W(),t=Ae(),r=q(),i=US(),a=ve(),s=Ty(),o=Iy();let u=class extends a.BaseApi{async getLeaderboard(m,w={}){const g=await this._client.callApi({type:"helix",url:"bits/leaderboard",userId:(0,r.extractUserId)(m),scopes:["bits:read"],query:(0,i.createBitsLeaderboardQuery)(w)});return new s.HelixBitsLeaderboard(g,this._client)}async getCheermotes(m){const w=await this._client.callApi({type:"helix",url:"bits/cheermotes",userId:(0,e.mapOptional)(m,r.extractUserId),query:(0,e.mapOptional)(m,t.createBroadcasterQuery)});return new o.HelixCheermoteList(w.data)}};return vr.HelixBitsApi=u,vr.HelixBitsApi=u=n.__decorate([(0,r.rtfm)("api","HelixBitsApi")],u),vr}var Cr={},Qe={},nm;function qS(){if(nm)return Qe;nm=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.createFollowedChannelQuery=Qe.createChannelFollowerQuery=Qe.createChannelVipUpdateQuery=Qe.createChannelCommercialBody=Qe.createChannelUpdateBody=void 0;const n=W(),e=q();function t(o){var u;return{game_id:o.gameId,broadcaster_language:o.language,title:o.title,delay:(u=o.delay)===null||u===void 0?void 0:u.toString(),tags:o.tags,content_classification_labels:o.contentClassificationLabels,is_branded_content:o.isBrandedContent}}Qe.createChannelUpdateBody=t;function r(o,u){return{broadcaster_id:(0,e.extractUserId)(o),length:u}}Qe.createChannelCommercialBody=r;function i(o,u){return{broadcaster_id:(0,e.extractUserId)(o),user_id:(0,e.extractUserId)(u)}}Qe.createChannelVipUpdateQuery=i;function a(o,u){return{broadcaster_id:(0,e.extractUserId)(o),user_id:(0,n.mapOptional)(u,e.extractUserId)}}Qe.createChannelFollowerQuery=a;function s(o,u){return{broadcaster_id:(0,n.mapOptional)(u,e.extractUserId),user_id:(0,e.extractUserId)(o)}}return Qe.createFollowedChannelQuery=s,Qe}var We={},im;function et(){if(im)return We;im=1,Object.defineProperty(We,"__esModule",{value:!0}),We.createChannelUsersCheckQuery=We.createGetByIdsQuery=We.createModeratorActionQuery=We.createUserQuery=We.createSingleKeyQuery=void 0;const n=q();function e(s,o){return{[s]:o}}We.createSingleKeyQuery=e;function t(s){return{user_id:(0,n.extractUserId)(s)}}We.createUserQuery=t;function r(s,o){return{broadcaster_id:s,moderator_id:o}}We.createModeratorActionQuery=r;function i(s,o){return{broadcaster_id:(0,n.extractUserId)(s),id:o}}We.createGetByIdsQuery=i;function a(s,o){return{broadcaster_id:(0,n.extractUserId)(s),user_id:o.map(n.extractUserId)}}return We.createChannelUsersCheckQuery=a,We}var Er={},am;function dd(){if(am)return Er;am=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.HelixUserRelation=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].user_id}get name(){return this[t.rawDataSymbol].user_login}get displayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return Er.HelixUserRelation=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Er.HelixUserRelation=r=n.__decorate([(0,t.rtfm)("api","HelixUserRelation","id")],r),Er}var es={},sm;function sr(){if(sm)return es;sm=1,Object.defineProperty(es,"__esModule",{value:!0}),es.HelixRequestBatcher=void 0;const n=M,e=W();class t{constructor(i,a,s,o,u,h=100){this._callOptions=i,this._queryParamName=a,this._matchKey=s,this._mapper=u,this._limitPerRequest=h,this._requestedIds=[],this._requestResolversById=new Map,this._waitTimer=null,this._client=o,this._delay=o._batchDelay}async request(i){const{promise:a,resolve:s,reject:o}=(0,e.promiseWithResolvers)();return this._requestedIds.includes(i)||this._requestedIds.push(i),this._requestResolversById.has(i)?this._requestResolversById.get(i).push({resolve:s,reject:o}):this._requestResolversById.set(i,[{resolve:s,reject:o}]),this._waitTimer&&(clearTimeout(this._waitTimer),this._waitTimer=null),this._requestedIds.length>=this._limitPerRequest?this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest)):this._waitTimer=setTimeout(()=>{this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest))},this._delay),await a}async _handleBatch(i){var a;try{const{data:s}=await this._doRequest(i),o=(0,e.indexBy)(s,this._matchKey);for(const u of i){for(const h of(a=this._requestResolversById.get(u))!==null&&a!==void 0?a:[])Object.prototype.hasOwnProperty.call(o,u)?h.resolve(this._mapper(o[u])):h.resolve(null);this._requestResolversById.delete(u)}}catch{await Promise.all(i.map(async o=>{var u,h;try{const m=await this._doRequest([o]);for(const w of(u=this._requestResolversById.get(o))!==null&&u!==void 0?u:[])w.resolve(m.data.length?this._mapper(m.data[0]):null)}catch(m){for(const w of(h=this._requestResolversById.get(o))!==null&&h!==void 0?h:[])w.reject(m)}this._requestResolversById.delete(o)}))}}async _doRequest(i){return await this._client.callApi({type:"helix",...this._callOptions,query:{...this._callOptions.query,[this._queryParamName]:i}})}}return es.HelixRequestBatcher=t,n.__decorate([(0,e.Enumerable)(!1)],t.prototype,"_client",void 0),es}var Hr={},om;function ke(){if(om)return Hr;om=1;var n;Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.HelixPaginatedRequest=void 0;const e=M,t=W(),r=q();Object.prototype.hasOwnProperty.call(Symbol,"asyncIterator")||(Symbol.asyncIterator=(n=Symbol.asyncIterator)!==null&&n!==void 0?n:Symbol.for("Symbol.asyncIterator"));let i=class{constructor(s,o,u,h=100){this._callOptions=s,this._mapper=u,this._limitPerPage=h,this._isFinished=!1,this._client=o}get current(){var s;return(s=this._currentData)===null||s===void 0?void 0:s.data}async getNext(){var s;if(this._isFinished)return[];const o=await this._fetchData();return!((s=o.data)===null||s===void 0)&&s.length?this._processResult(o):(this._isFinished=!0,[])}async getAll(){this.reset();const s=[];do{const o=await this.getNext();if(!o.length)break;s.push(...o)}while(this._currentCursor);return this.reset(),s}get currentCursor(){return this._currentCursor}reset(){this._currentCursor=void 0,this._isFinished=!1,this._currentData=void 0}async*[Symbol.asyncIterator](){for(this.reset();;){const s=await this.getNext();if(!s.length)break;yield*s[Symbol.iterator]()}}async _fetchData(s={}){return await this._client.callApi({type:"helix",...this._callOptions,...s,query:{...this._callOptions.query,after:this._currentCursor,first:this._limitPerPage.toString(),...s.query}})}_processResult(s){var o;return this._currentCursor=typeof s.pagination=="string"?s.pagination:(o=s.pagination)===null||o===void 0?void 0:o.cursor,this._currentCursor===void 0&&(this._isFinished=!0),this._currentData=s,s.data.reduce((u,h)=>{const m=this._mapper(h);return Array.isArray(m)?[...u,...m]:[...u,m]},[])}};return Hr.HelixPaginatedRequest=i,e.__decorate([(0,t.Enumerable)(!1)],i.prototype,"_client",void 0),Hr.HelixPaginatedRequest=i=e.__decorate([(0,r.rtfm)("api","HelixPaginatedRequest")],i),Hr}var Rr={},lm;function eo(){if(lm)return Rr;lm=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.HelixPaginatedRequestWithTotal=void 0;const n=M,e=q(),t=ke();let r=class extends t.HelixPaginatedRequest{async getTotalCount(){var a;return((a=this._currentData)!==null&&a!==void 0?a:await this._fetchData({query:{after:void 0}})).total}};return Rr.HelixPaginatedRequestWithTotal=r,Rr.HelixPaginatedRequestWithTotal=r=n.__decorate([(0,e.rtfm)("api","HelixPaginatedRequestWithTotal")],r),Rr}var $t={},um;function Fe(){if(um)return $t;um=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.createPaginatedResultWithTotal=$t.createPaginatedResult=void 0;function n(t,r,i){var a;let s;return{get data(){var o,u;return s??(s=(u=(o=t.data)===null||o===void 0?void 0:o.map(h=>new r(h,i)))!==null&&u!==void 0?u:[])},cursor:typeof t.pagination=="string"?t.pagination:(a=t.pagination)===null||a===void 0?void 0:a.cursor}}$t.createPaginatedResult=n;function e(t,r,i){let a;return{get data(){var s,o;return a??(a=(o=(s=t.data)===null||s===void 0?void 0:s.map(u=>new r(u,i)))!==null&&o!==void 0?o:[])},cursor:t.pagination.cursor,total:t.total}}return $t.createPaginatedResultWithTotal=e,$t}var ts={},cm;function Me(){if(cm)return ts;cm=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.createPaginationQuery=void 0;function n({after:e,before:t,limit:r}={}){return{after:e,before:t,first:r==null?void 0:r.toString()}}return ts.createPaginationQuery=n,ts}var Ar={},dm;function Dy(){if(dm)return Ar;dm=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.HelixChannel=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].broadcaster_id}get name(){return this[t.rawDataSymbol].broadcaster_login}get displayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get language(){return this[t.rawDataSymbol].broadcaster_language}get gameId(){return this[t.rawDataSymbol].game_id}get gameName(){return this[t.rawDataSymbol].game_name}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get title(){return this[t.rawDataSymbol].title}get delay(){return this[t.rawDataSymbol].delay}get tags(){return this[t.rawDataSymbol].tags}get contentClassificationLabels(){return this[t.rawDataSymbol].content_classification_labels}get isBrandedContent(){return this[t.rawDataSymbol].is_branded_content}};return Ar.HelixChannel=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Ar.HelixChannel=r=n.__decorate([(0,t.rtfm)("api","HelixChannel","id")],r),Ar}var Tr={},hm;function By(){if(hm)return Tr;hm=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.HelixChannelEditor=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}};return Tr.HelixChannelEditor=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Tr.HelixChannelEditor=r=n.__decorate([(0,t.rtfm)("api","HelixChannelEditor","userId")],r),Tr}var Ir={},pm;function Oy(){if(pm)return Ir;pm=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.HelixChannelFollower=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get followDate(){return new Date(this[t.rawDataSymbol].followed_at)}};return Ir.HelixChannelFollower=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Ir.HelixChannelFollower=r=n.__decorate([(0,t.rtfm)("api","HelixChannelFollower","userId")],r),Ir}var Pr={},mm;function Uy(){if(mm)return Pr;mm=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.HelixFollowedChannel=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get followDate(){return new Date(this[t.rawDataSymbol].followed_at)}};return Pr.HelixFollowedChannel=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Pr.HelixFollowedChannel=r=n.__decorate([(0,t.rtfm)("api","HelixFollowedChannel","broadcasterId")],r),Pr}var Dr={},_m;function qy(){if(_m)return Dr;_m=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.HelixAdSchedule=void 0;const n=M,e=q();let t=class extends e.DataObject{get snoozeCount(){return this[e.rawDataSymbol].snooze_count}get snoozeRefreshDate(){return this[e.rawDataSymbol].snooze_refresh_at?new Date(this[e.rawDataSymbol].snooze_refresh_at*1e3):null}get nextAdDate(){return this[e.rawDataSymbol].next_ad_at?new Date(this[e.rawDataSymbol].next_ad_at*1e3):null}get duration(){return this[e.rawDataSymbol].duration}get lastAdDate(){return this[e.rawDataSymbol].last_ad_at?new Date(this[e.rawDataSymbol].last_ad_at*1e3):null}get prerollFreeTime(){return this[e.rawDataSymbol].preroll_free_time}};return Dr.HelixAdSchedule=t,Dr.HelixAdSchedule=t=n.__decorate([(0,e.rtfm)("api","HelixAdSchedule")],t),Dr}var Br={},gm;function kS(){if(gm)return Br;gm=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.HelixSnoozeNextAdResult=void 0;const n=M,e=q();let t=class extends e.DataObject{get snoozeCount(){return this[e.rawDataSymbol].snooze_count}get snoozeRefreshDate(){return new Date(this[e.rawDataSymbol].snooze_refresh_at*1e3)}get nextAdDate(){return new Date(this[e.rawDataSymbol].next_ad_at*1e3)}};return Br.HelixSnoozeNextAdResult=t,Br.HelixSnoozeNextAdResult=t=n.__decorate([(0,e.rtfm)("api","HelixSnoozeNextAdResult")],t),Br}var fm;function ky(){if(fm)return Cr;fm=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.HelixChannelApi=void 0;const n=M,e=W(),t=Ae(),r=q(),i=qS(),a=et(),s=dd(),o=sr(),u=ke(),h=eo(),m=Fe(),w=Me(),g=ve(),_=Dy(),p=By(),l=Oy(),d=Uy(),b=qy(),x=kS();let A=class extends g.BaseApi{constructor(){super(...arguments),this._getChannelByIdBatcher=new o.HelixRequestBatcher({url:"channels"},"broadcaster_id","broadcaster_id",this._client,y=>new _.HelixChannel(y,this._client))}async getChannelInfoById(y){const H=(0,r.extractUserId)(y),E=await this._client.callApi({type:"helix",url:"channels",userId:H,query:(0,t.createBroadcasterQuery)(H)});return(0,e.mapNullable)(E.data[0],B=>new _.HelixChannel(B,this._client))}async getChannelInfoByIdBatched(y){return await this._getChannelByIdBatcher.request((0,r.extractUserId)(y))}async getChannelInfoByIds(y){const H=y.map(r.extractUserId);return(await this._client.callApi({type:"helix",url:"channels",query:(0,a.createSingleKeyQuery)("broadcaster_id",H)})).data.map(B=>new _.HelixChannel(B,this._client))}async updateChannelInfo(y,H){await this._client.callApi({type:"helix",url:"channels",method:"PATCH",userId:(0,r.extractUserId)(y),scopes:["channel:manage:broadcast"],query:(0,t.createBroadcasterQuery)(y),jsonBody:(0,i.createChannelUpdateBody)(H)})}async startChannelCommercial(y,H){await this._client.callApi({type:"helix",url:"channels/commercial",method:"POST",userId:(0,r.extractUserId)(y),scopes:["channel:edit:commercial"],jsonBody:(0,i.createChannelCommercialBody)(y,H)})}async getChannelEditors(y){return(await this._client.callApi({type:"helix",url:"channels/editors",userId:(0,r.extractUserId)(y),scopes:["channel:read:editors"],query:(0,t.createBroadcasterQuery)(y)})).data.map(E=>new p.HelixChannelEditor(E,this._client))}async getVips(y,H){const E=await this._client.callApi({type:"helix",url:"channels/vips",userId:(0,r.extractUserId)(y),scopes:["channel:read:vips","channel:manage:vips"],query:{...(0,t.createBroadcasterQuery)(y),...(0,w.createPaginationQuery)(H)}});return(0,m.createPaginatedResult)(E,s.HelixUserRelation,this._client)}getVipsPaginated(y){return new u.HelixPaginatedRequest({url:"channels/vips",userId:(0,r.extractUserId)(y),scopes:["channel:read:vips","channel:manage:vips"],query:(0,t.createBroadcasterQuery)(y)},this._client,H=>new s.HelixUserRelation(H,this._client))}async checkVipForUsers(y,H){return(await this._client.callApi({type:"helix",url:"channels/vips",userId:(0,r.extractUserId)(y),scopes:["channel:read:vips","channel:manage:vips"],query:(0,a.createChannelUsersCheckQuery)(y,H)})).data.map(B=>new s.HelixUserRelation(B,this._client))}async checkVipForUser(y,H){const E=(0,r.extractUserId)(H);return(await this.checkVipForUsers(y,[E])).some(j=>j.id===E)}async addVip(y,H){await this._client.callApi({type:"helix",url:"channels/vips",method:"POST",userId:(0,r.extractUserId)(y),scopes:["channel:manage:vips"],query:(0,i.createChannelVipUpdateQuery)(y,H)})}async removeVip(y,H){await this._client.callApi({type:"helix",url:"channels/vips",method:"DELETE",userId:(0,r.extractUserId)(y),scopes:["channel:manage:vips"],query:(0,i.createChannelVipUpdateQuery)(y,H)})}async getChannelFollowerCount(y){return(await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:(0,r.extractUserId)(y),query:{...(0,i.createChannelFollowerQuery)(y),...(0,w.createPaginationQuery)({limit:1})}})).total}async getChannelFollowers(y,H,E){const B=await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:(0,r.extractUserId)(y),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:{...(0,i.createChannelFollowerQuery)(y,H),...(0,w.createPaginationQuery)(E)}});return(0,m.createPaginatedResultWithTotal)(B,l.HelixChannelFollower,this._client)}getChannelFollowersPaginated(y){return new h.HelixPaginatedRequestWithTotal({url:"channels/followers",method:"GET",userId:(0,r.extractUserId)(y),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:(0,i.createChannelFollowerQuery)(y)},this._client,H=>new l.HelixChannelFollower(H,this._client))}async getFollowedChannels(y,H,E){const B=await this._client.callApi({type:"helix",url:"channels/followed",method:"GET",userId:(0,r.extractUserId)(y),scopes:["user:read:follows"],query:{...(0,i.createFollowedChannelQuery)(y,H),...(0,w.createPaginationQuery)(E)}});return(0,m.createPaginatedResultWithTotal)(B,d.HelixFollowedChannel,this._client)}getFollowedChannelsPaginated(y,H){return new h.HelixPaginatedRequestWithTotal({url:"channels/followed",method:"GET",userId:(0,r.extractUserId)(y),scopes:["user:read:follows"],query:(0,i.createFollowedChannelQuery)(y,H)},this._client,E=>new d.HelixFollowedChannel(E,this._client))}async getAdSchedule(y){const H=await this._client.callApi({type:"helix",url:"channels/ads",method:"GET",userId:(0,r.extractUserId)(y),scopes:["channel:read:ads"],query:(0,t.createBroadcasterQuery)(y)});return new b.HelixAdSchedule(H.data[0])}async snoozeNextAd(y){const H=await this._client.callApi({type:"helix",url:"channels/ads/schedule/snooze",method:"POST",userId:(0,r.extractUserId)(y),scopes:["channel:manage:ads"],query:(0,t.createBroadcasterQuery)(y)});return new x.HelixSnoozeNextAdResult(H.data[0])}};return Cr.HelixChannelApi=A,n.__decorate([(0,e.Enumerable)(!1)],A.prototype,"_getChannelByIdBatcher",void 0),Cr.HelixChannelApi=A=n.__decorate([(0,r.rtfm)("api","HelixChannelApi")],A),Cr}var Or={},Ve={},ym;function MS(){if(ym)return Ve;ym=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.createRedemptionsForBroadcasterQuery=Ve.createRewardRedemptionsByIdsQuery=Ve.createCustomRewardBody=Ve.createCustomRewardChangeQuery=Ve.createCustomRewardsQuery=void 0;const n=q();function e(s,o){return{broadcaster_id:(0,n.extractUserId)(s),only_manageable_rewards:o==null?void 0:o.toString()}}Ve.createCustomRewardsQuery=e;function t(s,o){return{broadcaster_id:(0,n.extractUserId)(s),id:o}}Ve.createCustomRewardChangeQuery=t;function r(s){var o,u,h;const m={title:s.title,cost:s.cost,prompt:s.prompt,background_color:s.backgroundColor,is_enabled:s.isEnabled,is_user_input_required:s.userInputRequired,should_redemptions_skip_request_queue:s.autoFulfill};return s.maxRedemptionsPerStream!==void 0&&(m.is_max_per_stream_enabled=!!s.maxRedemptionsPerStream,m.max_per_stream=(o=s.maxRedemptionsPerStream)!==null&&o!==void 0?o:0),s.maxRedemptionsPerUserPerStream!==void 0&&(m.is_max_per_user_per_stream_enabled=!!s.maxRedemptionsPerUserPerStream,m.max_per_user_per_stream=(u=s.maxRedemptionsPerUserPerStream)!==null&&u!==void 0?u:0),s.globalCooldown!==void 0&&(m.is_global_cooldown_enabled=!!s.globalCooldown,m.global_cooldown_seconds=(h=s.globalCooldown)!==null&&h!==void 0?h:0),"isPaused"in s&&(m.is_paused=s.isPaused),m}Ve.createCustomRewardBody=r;function i(s,o,u){return{broadcaster_id:(0,n.extractUserId)(s),reward_id:o,id:u}}Ve.createRewardRedemptionsByIdsQuery=i;function a(s,o,u,h){return{broadcaster_id:(0,n.extractUserId)(s),reward_id:o,status:u,sort:h.newestFirst?"NEWEST":"OLDEST"}}return Ve.createRedemptionsForBroadcasterQuery=a,Ve}var Ur={},bm;function My(){if(bm)return Ur;bm=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.HelixCustomReward=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}getImageUrl(a){var s,o;const u=`url_${a}x`;return(o=(s=this[t.rawDataSymbol].image)===null||s===void 0?void 0:s[u])!==null&&o!==void 0?o:this[t.rawDataSymbol].default_image[u]}get backgroundColor(){return this[t.rawDataSymbol].background_color}get isEnabled(){return this[t.rawDataSymbol].is_enabled}get cost(){return this[t.rawDataSymbol].cost}get title(){return this[t.rawDataSymbol].title}get prompt(){return this[t.rawDataSymbol].prompt}get userInputRequired(){return this[t.rawDataSymbol].is_user_input_required}get maxRedemptionsPerStream(){return this[t.rawDataSymbol].max_per_stream_setting.is_enabled?this[t.rawDataSymbol].max_per_stream_setting.max_per_stream:null}get maxRedemptionsPerUserPerStream(){return this[t.rawDataSymbol].max_per_user_per_stream_setting.is_enabled?this[t.rawDataSymbol].max_per_user_per_stream_setting.max_per_user_per_stream:null}get globalCooldown(){return this[t.rawDataSymbol].global_cooldown_setting.is_enabled?this[t.rawDataSymbol].global_cooldown_setting.global_cooldown_seconds:null}get isPaused(){return this[t.rawDataSymbol].is_paused}get isInStock(){return this[t.rawDataSymbol].is_in_stock}get redemptionsThisStream(){return this[t.rawDataSymbol].redemptions_redeemed_current_stream}get autoFulfill(){return this[t.rawDataSymbol].should_redemptions_skip_request_queue}get cooldownExpiryDate(){return this[t.rawDataSymbol].cooldown_expires_at?new Date(this[t.rawDataSymbol].cooldown_expires_at):null}};return Ur.HelixCustomReward=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Ur.HelixCustomReward=r=n.__decorate([(0,t.rtfm)("api","HelixCustomReward","id")],r),Ur}var qr={},vm;function jy(){if(vm)return qr;vm=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.HelixCustomRewardRedemption=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get userInput(){return this[t.rawDataSymbol].user_input}get isFulfilled(){return this[t.rawDataSymbol].status==="FULFILLED"}get isCanceled(){return this[t.rawDataSymbol].status==="CANCELED"}get redemptionDate(){return new Date(this[t.rawDataSymbol].redeemed_at)}get rewardId(){return this[t.rawDataSymbol].reward.id}get rewardTitle(){return this[t.rawDataSymbol].reward.title}get rewardPrompt(){return this[t.rawDataSymbol].reward.prompt}get rewardCost(){return this[t.rawDataSymbol].reward.cost}async getReward(){return(0,t.checkRelationAssertion)(await this._client.channelPoints.getCustomRewardById(this[t.rawDataSymbol].broadcaster_id,this[t.rawDataSymbol].reward.id))}async updateStatus(a){return(await this._client.channelPoints.updateRedemptionStatusByIds(this[t.rawDataSymbol].broadcaster_id,this[t.rawDataSymbol].reward.id,[this[t.rawDataSymbol].id],a))[0]}};return qr.HelixCustomRewardRedemption=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),qr.HelixCustomRewardRedemption=r=n.__decorate([(0,t.rtfm)("api","HelixCustomRewardRedemption","id")],r),qr}var wm;function Ly(){if(wm)return Or;wm=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.HelixChannelPointsApi=void 0;const n=M,e=Ae(),t=q(),r=MS(),i=et(),a=ke(),s=Fe(),o=Me(),u=ve(),h=My(),m=jy();let w=class extends u.BaseApi{async getCustomRewards(_,p){return(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:(0,t.extractUserId)(_),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,r.createCustomRewardsQuery)(_,p)})).data.map(d=>new h.HelixCustomReward(d,this._client))}async getCustomRewardsByIds(_,p){return p.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:(0,t.extractUserId)(_),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,i.createGetByIdsQuery)(_,p)})).data.map(d=>new h.HelixCustomReward(d,this._client)):[]}async getCustomRewardById(_,p){const l=await this.getCustomRewardsByIds(_,[p]);return l.length?l[0]:null}async createCustomReward(_,p){const l=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"POST",userId:(0,t.extractUserId)(_),scopes:["channel:manage:redemptions"],query:(0,e.createBroadcasterQuery)(_),jsonBody:(0,r.createCustomRewardBody)(p)});return new h.HelixCustomReward(l.data[0],this._client)}async updateCustomReward(_,p,l){const d=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"PATCH",userId:(0,t.extractUserId)(_),scopes:["channel:manage:redemptions"],query:(0,r.createCustomRewardChangeQuery)(_,p),jsonBody:(0,r.createCustomRewardBody)(l)});return new h.HelixCustomReward(d.data[0],this._client)}async deleteCustomReward(_,p){await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"DELETE",userId:(0,t.extractUserId)(_),scopes:["channel:manage:redemptions"],query:(0,r.createCustomRewardChangeQuery)(_,p)})}async getRedemptionsByIds(_,p,l){return l.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:(0,t.extractUserId)(_),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,r.createRewardRedemptionsByIdsQuery)(_,p,l)})).data.map(b=>new m.HelixCustomRewardRedemption(b,this._client)):[]}async getRedemptionById(_,p,l){const d=await this.getRedemptionsByIds(_,p,[l]);return d.length?d[0]:null}async getRedemptionsForBroadcaster(_,p,l,d){const b=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:(0,t.extractUserId)(_),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:{...(0,r.createRedemptionsForBroadcasterQuery)(_,p,l,d),...(0,o.createPaginationQuery)(d)}});return(0,s.createPaginatedResult)(b,m.HelixCustomRewardRedemption,this._client)}getRedemptionsForBroadcasterPaginated(_,p,l,d){return new a.HelixPaginatedRequest({url:"channel_points/custom_rewards/redemptions",userId:(0,t.extractUserId)(_),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,r.createRedemptionsForBroadcasterQuery)(_,p,l,d)},this._client,b=>new m.HelixCustomRewardRedemption(b,this._client),50)}async updateRedemptionStatusByIds(_,p,l,d){return l.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",method:"PATCH",userId:(0,t.extractUserId)(_),scopes:["channel:manage:redemptions"],query:(0,r.createRewardRedemptionsByIdsQuery)(_,p,l),jsonBody:{status:d}})).data.map(x=>new m.HelixCustomRewardRedemption(x,this._client)):[]}};return Or.HelixChannelPointsApi=w,Or.HelixChannelPointsApi=w=n.__decorate([(0,t.rtfm)("api","HelixChannelPointsApi")],w),Or}var kr={},Mr={},jr={},xm;function hd(){if(xm)return jr;xm=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.HelixCharityCampaignAmount=void 0;const n=M,e=q();let t=class extends e.DataObject{get value(){return this[e.rawDataSymbol].value}get decimalPlaces(){return this[e.rawDataSymbol].decimal_places}get localizedValue(){return this.value/10**this.decimalPlaces}get currency(){return this[e.rawDataSymbol].currency}};return jr.HelixCharityCampaignAmount=t,jr.HelixCharityCampaignAmount=t=n.__decorate([(0,e.rtfm)("api","HelixCharityCampaignAmount")],t),jr}var Sm;function Ny(){if(Sm)return Mr;Sm=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.HelixCharityCampaign=void 0;const n=M,e=W(),t=q(),r=hd();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get charityName(){return this[t.rawDataSymbol].charity_name}get charityDescription(){return this[t.rawDataSymbol].charity_description}get charityLogo(){return this[t.rawDataSymbol].charity_logo}get charityWebsite(){return this[t.rawDataSymbol].charity_website}get currentAmount(){return new r.HelixCharityCampaignAmount(this[t.rawDataSymbol].current_amount)}get targetAmount(){return new r.HelixCharityCampaignAmount(this[t.rawDataSymbol].target_amount)}};return Mr.HelixCharityCampaign=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Mr.HelixCharityCampaign=i=n.__decorate([(0,t.rtfm)("api","HelixCharityCampaign","id")],i),Mr}var Lr={},Cm;function Fy(){if(Cm)return Lr;Cm=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.HelixCharityCampaignDonation=void 0;const n=M,e=W(),t=q(),r=hd();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get campaignId(){return this[t.rawDataSymbol].campaign_id}get donorId(){return this[t.rawDataSymbol].user_id}get donorName(){return this[t.rawDataSymbol].user_login}get donorDisplayName(){return this[t.rawDataSymbol].user_name}async getDonor(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get amount(){return new r.HelixCharityCampaignAmount(this[t.rawDataSymbol].amount)}};return Lr.HelixCharityCampaignDonation=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Lr.HelixCharityCampaignDonation=i=n.__decorate([(0,t.rtfm)("api","HelixCharityCampaignDonation")],i),Lr}var Em;function $y(){if(Em)return kr;Em=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.HelixCharityApi=void 0;const n=M,e=Ae(),t=q(),r=Fe(),i=Me(),a=ve(),s=Ny(),o=Fy();let u=class extends a.BaseApi{async getCharityCampaign(m){const w=await this._client.callApi({type:"helix",url:"charity/campaigns",method:"GET",userId:(0,t.extractUserId)(m),scopes:["channel:read:charity"],query:(0,e.createBroadcasterQuery)(m)});return new s.HelixCharityCampaign(w.data[0],this._client)}async getCharityCampaignDonations(m,w){const g=await this._client.callApi({type:"helix",url:"charity/donations",userId:(0,t.extractUserId)(m),scopes:["channel:read:charity"],query:{...(0,e.createBroadcasterQuery)(m),...(0,i.createPaginationQuery)(w)}});return(0,r.createPaginatedResult)(g,o.HelixCharityCampaignDonation,this._client)}};return kr.HelixCharityApi=u,kr.HelixCharityApi=u=n.__decorate([(0,t.rtfm)("api","HelixCharityApi")],u),kr}var Nr={},ze={},Hm;function jS(){if(Hm)return ze;Hm=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.createSendChatMessageBody=ze.createSendChatMessageQuery=ze.createShoutoutQuery=ze.createChatColorUpdateQuery=ze.createChatSettingsUpdateBody=void 0;const n=q();function e(s){return{slow_mode:s.slowModeEnabled,slow_mode_wait_time:s.slowModeDelay,follower_mode:s.followerOnlyModeEnabled,follower_mode_duration:s.followerOnlyModeDelay,subscriber_mode:s.subscriberOnlyModeEnabled,emote_mode:s.emoteOnlyModeEnabled,unique_chat_mode:s.uniqueChatModeEnabled,non_moderator_chat_delay:s.nonModeratorChatDelayEnabled,non_moderator_chat_delay_duration:s.nonModeratorChatDelay}}ze.createChatSettingsUpdateBody=e;function t(s,o){return{user_id:(0,n.extractUserId)(s),color:o}}ze.createChatColorUpdateQuery=t;function r(s,o,u){return{from_broadcaster_id:(0,n.extractUserId)(s),to_broadcaster_id:(0,n.extractUserId)(o),moderator_id:u}}ze.createShoutoutQuery=r;function i(s,o){return{broadcaster_id:s,sender_id:o}}ze.createSendChatMessageQuery=i;function a(s,o){return{message:s,reply_parent_message_id:o==null?void 0:o.replyParentMessageId}}return ze.createSendChatMessageBody=a,ze}var Fr={},$r={},rs={},Rm;function Gy(){if(Rm)return rs;Rm=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.HelixEmoteBase=void 0;const n=q();class e extends n.DataObject{get id(){return this[n.rawDataSymbol].id}get name(){return this[n.rawDataSymbol].name}get formats(){return this[n.rawDataSymbol].format}get scales(){return this[n.rawDataSymbol].scale}get themeModes(){return this[n.rawDataSymbol].theme_mode}getStaticImageUrl(r="1.0",i="light"){return this[n.rawDataSymbol].format.includes("static")&&this[n.rawDataSymbol].scale.includes(r)?this.getFormattedImageUrl(r,"static",i):null}getAnimatedImageUrl(r="1.0",i="light"){return this[n.rawDataSymbol].format.includes("animated")&&this[n.rawDataSymbol].scale.includes(r)?this.getFormattedImageUrl(r,"animated",i):null}getFormattedImageUrl(r="1.0",i="static",a="light"){return`https://static-cdn.jtvnw.net/emoticons/v2/${this[n.rawDataSymbol].id}/${i}/${a}/${r}`}}return rs.HelixEmoteBase=e,rs}var Am;function El(){if(Am)return $r;Am=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.HelixEmote=void 0;const n=M,e=q(),t=Gy();let r=class extends t.HelixEmoteBase{getImageUrl(a){return this[e.rawDataSymbol].images[`url_${a}x`]}};return $r.HelixEmote=r,$r.HelixEmote=r=n.__decorate([(0,e.rtfm)("api","HelixEmote","id")],r),$r}var Tm;function Qy(){if(Tm)return Fr;Tm=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.HelixChannelEmote=void 0;const n=M,e=W(),t=q(),r=El();let i=class extends r.HelixEmote{constructor(s,o){super(s),this._client=o}get tier(){return this[t.rawDataSymbol].tier||null}get type(){return this[t.rawDataSymbol].emote_type}get emoteSetId(){return this[t.rawDataSymbol].emote_set_id}async getAllEmotesFromSet(){return await this._client.chat.getEmotesFromSets([this[t.rawDataSymbol].emote_set_id])}};return Fr.HelixChannelEmote=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Fr.HelixChannelEmote=i=n.__decorate([(0,t.rtfm)("api","HelixChannelEmote","id")],i),Fr}var Gr={},Qr={},Im;function Wy(){if(Im)return Qr;Im=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.HelixChatBadgeVersion=void 0;const n=M,e=q();let t=class extends e.DataObject{get id(){return this[e.rawDataSymbol].id}getImageUrl(i){return this[e.rawDataSymbol][`image_url_${i}x`]}get title(){return this[e.rawDataSymbol].title}get description(){return this[e.rawDataSymbol].description}get clickAction(){return this[e.rawDataSymbol].click_action}get clickUrl(){return this[e.rawDataSymbol].click_url}};return Qr.HelixChatBadgeVersion=t,Qr.HelixChatBadgeVersion=t=n.__decorate([(0,e.rtfm)("api","HelixChatBadgeVersion","id")],t),Qr}var Pm;function Vy(){if(Pm)return Gr;Pm=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.HelixChatBadgeSet=void 0;const n=M,e=Sl(),t=q(),r=Wy();let i=class extends t.DataObject{get id(){return this[t.rawDataSymbol].set_id}get versions(){return this[t.rawDataSymbol].versions.map(s=>new r.HelixChatBadgeVersion(s))}getVersion(s){var o;return(o=this.versions.find(u=>u.id===s))!==null&&o!==void 0?o:null}};return Gr.HelixChatBadgeSet=i,n.__decorate([(0,e.CachedGetter)()],i.prototype,"versions",null),Gr.HelixChatBadgeSet=i=n.__decorate([e.Cacheable,(0,t.rtfm)("api","HelixChatBadgeSet","id")],i),Gr}var Wr={},Dm;function zy(){if(Dm)return Wr;Dm=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.HelixChatChatter=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return Wr.HelixChatChatter=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Wr.HelixChatChatter=r=n.__decorate([(0,t.rtfm)("api","HelixChatChatter")],r),Wr}var Vr={},Bm;function pd(){if(Bm)return Vr;Bm=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.HelixChatSettings=void 0;const n=M,e=q();let t=class extends e.DataObject{get broadcasterId(){return this[e.rawDataSymbol].broadcaster_id}get slowModeEnabled(){return this[e.rawDataSymbol].slow_mode}get slowModeDelay(){return this[e.rawDataSymbol].slow_mode_wait_time}get followerOnlyModeEnabled(){return this[e.rawDataSymbol].follower_mode}get followerOnlyModeDelay(){return this[e.rawDataSymbol].follower_mode_duration}get subscriberOnlyModeEnabled(){return this[e.rawDataSymbol].subscriber_mode}get emoteOnlyModeEnabled(){return this[e.rawDataSymbol].emote_mode}get uniqueChatModeEnabled(){return this[e.rawDataSymbol].unique_chat_mode}};return Vr.HelixChatSettings=t,Vr.HelixChatSettings=t=n.__decorate([(0,e.rtfm)("api","HelixChatSettings","broadcasterId")],t),Vr}var zr={},Om;function Ky(){if(Om)return zr;Om=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.HelixEmoteFromSet=void 0;const n=M,e=W(),t=q(),r=El();let i=class extends r.HelixEmote{constructor(s,o){super(s),this._client=o}get type(){return this[t.rawDataSymbol].emote_type}get emoteSetId(){return this[t.rawDataSymbol].emote_set_id}get ownerId(){switch(this[t.rawDataSymbol].owner_id){case"0":case"twitch":return null;default:return this[t.rawDataSymbol].owner_id}}async getOwner(){switch(this[t.rawDataSymbol].owner_id){case"0":case"twitch":return null;default:return await this._client.users.getUserById(this[t.rawDataSymbol].owner_id)}}};return zr.HelixEmoteFromSet=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),zr.HelixEmoteFromSet=i=n.__decorate([(0,t.rtfm)("api","HelixEmoteFromSet","id")],i),zr}var Kr={},Um;function Xy(){if(Um)return Kr;Um=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.HelixUserEmote=void 0;const n=M,e=q(),t=Gy(),r=W();let i=class extends t.HelixEmoteBase{constructor(s,o){super(s),this._client=o}get type(){return this[e.rawDataSymbol].emote_type}get emoteSetId(){return this[e.rawDataSymbol].emote_set_id||null}get ownerId(){return this[e.rawDataSymbol].owner_id||null}async getAllEmotesFromSet(){return this[e.rawDataSymbol].emote_set_id?await this._client.chat.getEmotesFromSets([this[e.rawDataSymbol].emote_set_id]):null}async getOwner(){return this[e.rawDataSymbol].owner_id?await this._client.users.getUserById(this[e.rawDataSymbol].owner_id):null}};return Kr.HelixUserEmote=i,n.__decorate([(0,r.Enumerable)(!1)],i.prototype,"_client",void 0),Kr.HelixUserEmote=i=n.__decorate([(0,e.rtfm)("api","HelixUserEmote","id")],i),Kr}var Xr={},qm;function Jy(){if(qm)return Xr;qm=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.HelixPrivilegedChatSettings=void 0;const n=M,e=q(),t=pd();let r=class extends t.HelixChatSettings{get nonModeratorChatDelayEnabled(){return this[e.rawDataSymbol].non_moderator_chat_delay}get nonModeratorChatDelay(){return this[e.rawDataSymbol].non_moderator_chat_delay_duration}};return Xr.HelixPrivilegedChatSettings=r,Xr.HelixPrivilegedChatSettings=r=n.__decorate([(0,e.rtfm)("api","HelixPrivilegedChatSettings","broadcasterId")],r),Xr}var Jr={},km;function Yy(){if(km)return Jr;km=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.HelixSentChatMessage=void 0;const n=M,e=q();let t=class extends e.DataObject{get id(){return this[e.rawDataSymbol].message_id}get isSent(){return this[e.rawDataSymbol].is_sent}get dropReasonCode(){var i;return(i=this[e.rawDataSymbol].drop_reason)===null||i===void 0?void 0:i.code}get dropReasonMessage(){var i;return(i=this[e.rawDataSymbol].drop_reason)===null||i===void 0?void 0:i.message}};return Jr.HelixSentChatMessage=t,Jr.HelixSentChatMessage=t=n.__decorate([(0,e.rtfm)("api","HelixSentChatMessage","id")],t),Jr}var ns={},Mm;function LS(){if(Mm)return ns;Mm=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.createSharedChatSessionQuery=void 0;const n=q();function e(t){return{broadcaster_id:(0,n.extractUserId)(t)}}return ns.createSharedChatSessionQuery=e,ns}var Yr={},Zr={},jm;function Zy(){if(jm)return Zr;jm=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.HelixSharedChatSessionParticipant=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}};return Zr.HelixSharedChatSessionParticipant=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Zr.HelixSharedChatSessionParticipant=r=n.__decorate([(0,t.rtfm)("api","HelixSharedChatSessionParticipant","broadcasterId")],r),Zr}var Lm;function eb(){if(Lm)return Yr;Lm=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.HelixSharedChatSession=void 0;const n=M,e=W(),t=q(),r=Zy();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get sessionId(){return this[t.rawDataSymbol].session_id}get hostBroadcasterId(){return this[t.rawDataSymbol].host_broadcaster_id}async getHostBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].host_broadcaster_id))}get participants(){return this[t.rawDataSymbol].participants.map(s=>new r.HelixSharedChatSessionParticipant(s,this._client))}get createdDate(){return new Date(this[t.rawDataSymbol].created_at)}get updatedDate(){return new Date(this[t.rawDataSymbol].updated_at)}};return Yr.HelixSharedChatSession=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Yr.HelixSharedChatSession=i=n.__decorate([(0,t.rtfm)("api","HelixSharedChatSession","sessionId")],i),Yr}var Nm;function tb(){if(Nm)return Nr;Nm=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.HelixChatApi=void 0;const n=M,e=Ae(),t=q(),r=jS(),i=et(),a=ke(),s=eo(),o=Fe(),u=Me(),h=ve(),m=Qy(),w=Vy(),g=zy(),_=pd(),p=El(),l=Ky(),d=Xy(),b=Jy(),x=Yy(),A=LS(),I=eb();let y=class extends h.BaseApi{async getChatters(E,B){const j=(0,t.extractUserId)(E),Z=await this._client.callApi({type:"helix",url:"chat/chatters",userId:j,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:{...this._createModeratorActionQuery(j),...(0,u.createPaginationQuery)(B)}});return(0,o.createPaginatedResultWithTotal)(Z,g.HelixChatChatter,this._client)}getChattersPaginated(E){const B=(0,t.extractUserId)(E);return new s.HelixPaginatedRequestWithTotal({url:"chat/chatters",userId:B,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:this._createModeratorActionQuery(B)},this._client,j=>new g.HelixChatChatter(j,this._client),1e3)}async getGlobalBadges(){return(await this._client.callApi({type:"helix",url:"chat/badges/global"})).data.map(B=>new w.HelixChatBadgeSet(B))}async getChannelBadges(E){return(await this._client.callApi({type:"helix",url:"chat/badges",userId:(0,t.extractUserId)(E),query:(0,e.createBroadcasterQuery)(E)})).data.map(j=>new w.HelixChatBadgeSet(j))}async getGlobalEmotes(){return(await this._client.callApi({type:"helix",url:"chat/emotes/global"})).data.map(B=>new p.HelixEmote(B))}async getChannelEmotes(E){return(await this._client.callApi({type:"helix",url:"chat/emotes",userId:(0,t.extractUserId)(E),query:(0,e.createBroadcasterQuery)(E)})).data.map(j=>new m.HelixChannelEmote(j,this._client))}async getEmotesFromSets(E){return(await this._client.callApi({type:"helix",url:"chat/emotes/set",query:(0,i.createSingleKeyQuery)("emote_set_id",E)})).data.map(j=>new l.HelixEmoteFromSet(j,this._client))}async getUserEmotes(E,B){const j=(0,t.extractUserId)(E),Z=await this._client.callApi({type:"helix",url:"chat/emotes/user",userId:(0,t.extractUserId)(E),scopes:["user:read:emotes"],query:{...(0,i.createSingleKeyQuery)("user_id",j),...(0,i.createSingleKeyQuery)("broadcasterId",B!=null&&B.broadcaster?(0,t.extractUserId)(B.broadcaster):void 0),...(0,u.createPaginationQuery)(B)}});return(0,o.createPaginatedResult)(Z,d.HelixUserEmote,this._client)}getUserEmotesPaginated(E,B){const j=(0,t.extractUserId)(E);return new a.HelixPaginatedRequest({url:"chat/emotes/user",userId:j,scopes:["user:read:emotes"],query:{...(0,i.createSingleKeyQuery)("user_id",j),...(0,i.createSingleKeyQuery)("broadcasterId",B?(0,t.extractUserId)(B):void 0)}},this._client,Z=>new d.HelixUserEmote(Z,this._client))}async getSettings(E){const B=await this._client.callApi({type:"helix",url:"chat/settings",userId:(0,t.extractUserId)(E),query:(0,e.createBroadcasterQuery)(E)});return new _.HelixChatSettings(B.data[0])}async getSettingsPrivileged(E){const B=(0,t.extractUserId)(E),j=await this._client.callApi({type:"helix",url:"chat/settings",userId:B,canOverrideScopedUserContext:!0,scopes:["moderator:read:chat_settings"],query:this._createModeratorActionQuery(B)});return new b.HelixPrivilegedChatSettings(j.data[0])}async updateSettings(E,B){const j=(0,t.extractUserId)(E),Z=await this._client.callApi({type:"helix",url:"chat/settings",method:"PATCH",userId:j,canOverrideScopedUserContext:!0,scopes:["moderator:manage:chat_settings"],query:this._createModeratorActionQuery(j),jsonBody:(0,r.createChatSettingsUpdateBody)(B)});return new b.HelixPrivilegedChatSettings(Z.data[0])}async sendChatMessage(E,B,j){const Z=(0,t.extractUserId)(E),z=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",userId:Z,canOverrideScopedUserContext:!0,scopes:["user:write:chat"],query:(0,r.createSendChatMessageQuery)(Z,this._getUserContextIdWithDefault(Z)),jsonBody:(0,r.createSendChatMessageBody)(B,j)});return new x.HelixSentChatMessage(z.data[0])}async sendChatMessageAsApp(E,B,j,Z){const z=(0,t.extractUserId)(E),Te=(0,t.extractUserId)(B),se=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",forceType:"app",query:(0,r.createSendChatMessageQuery)(Te,z),jsonBody:(0,r.createSendChatMessageBody)(j,Z)});return new x.HelixSentChatMessage(se.data[0])}async sendAnnouncement(E,B){const j=(0,t.extractUserId)(E);await this._client.callApi({type:"helix",url:"chat/announcements",method:"POST",userId:j,canOverrideScopedUserContext:!0,scopes:["moderator:manage:announcements"],query:this._createModeratorActionQuery(j),jsonBody:{message:B.message,color:B.color}})}async getColorsForUsers(E){const B=await this._client.callApi({type:"helix",url:"chat/color",query:(0,i.createSingleKeyQuery)("user_id",E.map(t.extractUserId))});return new Map(B.data.map(j=>[j.user_id,j.color||null]))}async getColorForUser(E){const B=await this._client.callApi({type:"helix",url:"chat/color",userId:(0,t.extractUserId)(E),query:(0,i.createSingleKeyQuery)("user_id",(0,t.extractUserId)(E))});if(B.data.length)return B.data[0].color||null}async setColorForUser(E,B){await this._client.callApi({type:"helix",url:"chat/color",method:"PUT",userId:(0,t.extractUserId)(E),scopes:["user:manage:chat_color"],query:(0,r.createChatColorUpdateQuery)(E,B)})}async shoutoutUser(E,B){const j=(0,t.extractUserId)(E);await this._client.callApi({type:"helix",url:"chat/shoutouts",method:"POST",userId:j,canOverrideScopedUserContext:!0,scopes:["moderator:manage:shoutouts"],query:(0,r.createShoutoutQuery)(E,B,this._getUserContextIdWithDefault(j))})}async getSharedChatSession(E){const B=(0,t.extractUserId)(E),j=await this._client.callApi({type:"helix",url:"shared_chat/session",userId:B,query:(0,A.createSharedChatSessionQuery)(B)});return j.data.length===0?null:new I.HelixSharedChatSession(j.data[0],this._client)}_createModeratorActionQuery(E){return(0,i.createModeratorActionQuery)(E,this._getUserContextIdWithDefault(E))}};return Nr.HelixChatApi=y,Nr.HelixChatApi=y=n.__decorate([(0,t.rtfm)("api","HelixChatApi")],y),Nr}var en={},Gt={},Fm;function NS(){if(Fm)return Gt;Fm=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.createClipQuery=Gt.createClipCreateQuery=void 0;const n=q();function e(r,i){return{broadcaster_id:(0,n.extractUserId)(r),has_delay:i.toString()}}Gt.createClipCreateQuery=e;function t(r){const{filterType:i,ids:a,startDate:s,endDate:o,isFeatured:u}=r;return{[i]:a,started_at:s,ended_at:o,is_featured:u==null?void 0:u.toString()}}return Gt.createClipQuery=t,Gt}var tn={},$m;function rb(){if($m)return tn;$m=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.HelixClip=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get url(){return this[t.rawDataSymbol].url}get embedUrl(){return this[t.rawDataSymbol].embed_url}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get creatorId(){return this[t.rawDataSymbol].creator_id}get creatorDisplayName(){return this[t.rawDataSymbol].creator_name}async getCreator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].creator_id))}get videoId(){return this[t.rawDataSymbol].video_id}async getVideo(){return(0,t.checkRelationAssertion)(await this._client.videos.getVideoById(this[t.rawDataSymbol].video_id))}get gameId(){return this[t.rawDataSymbol].game_id}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get language(){return this[t.rawDataSymbol].language}get title(){return this[t.rawDataSymbol].title}get views(){return this[t.rawDataSymbol].view_count}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get thumbnailUrl(){return this[t.rawDataSymbol].thumbnail_url}get duration(){return this[t.rawDataSymbol].duration}get vodOffset(){return this[t.rawDataSymbol].vod_offset}get isFeatured(){return this[t.rawDataSymbol].is_featured}};return tn.HelixClip=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),tn.HelixClip=r=n.__decorate([(0,t.rtfm)("api","HelixClip","id")],r),tn}var Gm;function nb(){if(Gm)return en;Gm=1,Object.defineProperty(en,"__esModule",{value:!0}),en.HelixClipApi=void 0;const n=M,e=W(),t=q(),r=NS(),i=sr(),a=ke(),s=Fe(),o=Me(),u=ve(),h=rb();let m=class extends u.BaseApi{constructor(){super(...arguments),this._getClipByIdBatcher=new i.HelixRequestBatcher({url:"clips"},"id","id",this._client,g=>new h.HelixClip(g,this._client))}async getClipsForBroadcaster(g,_={}){return await this._getClips({..._,filterType:"broadcaster_id",ids:(0,t.extractUserId)(g),userId:(0,t.extractUserId)(g)})}getClipsForBroadcasterPaginated(g,_={}){return this._getClipsPaginated({..._,filterType:"broadcaster_id",ids:(0,t.extractUserId)(g),userId:(0,t.extractUserId)(g)})}async getClipsForGame(g,_={}){return await this._getClips({..._,filterType:"game_id",ids:g})}getClipsForGamePaginated(g,_={}){return this._getClipsPaginated({..._,filterType:"game_id",ids:g})}async getClipsByIds(g){return(await this._getClips({filterType:"id",ids:g})).data}async getClipById(g){const _=await this.getClipsByIds([g]);return _.length?_[0]:null}async getClipByIdBatched(g){return await this._getClipByIdBatcher.request(g)}async createClip(g){const{channel:_,createAfterDelay:p=!1}=g;return(await this._client.callApi({type:"helix",url:"clips",method:"POST",userId:(0,t.extractUserId)(_),scopes:["clips:edit"],canOverrideScopedUserContext:!0,query:(0,r.createClipCreateQuery)(_,p)})).data[0].id}async _getClips(g){if(!g.ids.length)return{data:[]};const _=await this._client.callApi({type:"helix",url:"clips",userId:g.userId,query:{...(0,r.createClipQuery)(g),...(0,o.createPaginationQuery)(g)}});return(0,s.createPaginatedResult)(_,h.HelixClip,this._client)}_getClipsPaginated(g){return new a.HelixPaginatedRequest({url:"clips",userId:g.userId,query:(0,r.createClipQuery)(g)},this._client,_=>new h.HelixClip(_,this._client))}};return en.HelixClipApi=m,n.__decorate([(0,e.Enumerable)(!1)],m.prototype,"_getClipByIdBatcher",void 0),en.HelixClipApi=m=n.__decorate([(0,t.rtfm)("api","HelixClipApi")],m),en}var rn={},is={},Qm;function ib(){if(Qm)return is;Qm=1,Object.defineProperty(is,"__esModule",{value:!0}),is.HelixContentClassificationLabel=void 0;const n=q();class e extends n.DataObject{get id(){return this[n.rawDataSymbol].id}get name(){return this[n.rawDataSymbol].name}get description(){return this[n.rawDataSymbol].description}}return is.HelixContentClassificationLabel=e,is}var Wm;function ab(){if(Wm)return rn;Wm=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.HelixContentClassificationLabelApi=void 0;const n=M,e=q(),t=ve(),r=ib();let i=class extends t.BaseApi{async getAll(s){return(await this._client.callApi({url:"content_classification_labels",query:{locale:s}})).data.map(u=>new r.HelixContentClassificationLabel(u))}};return rn.HelixContentClassificationLabelApi=i,rn.HelixContentClassificationLabelApi=i=n.__decorate([(0,e.rtfm)("api","HelixContentClassificationLabelApi")],i),rn}var nn={},Qt={},Vm;function FS(){if(Vm)return Qt;Vm=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.createDropsEntitlementUpdateBody=Qt.createDropsEntitlementQuery=void 0;const n=W(),e=q();function t(i,a){return{user_id:a?(0,n.mapOptional)(i.user,e.extractUserId):void 0,game_id:i.gameId,fulfillment_status:i.fulfillmentStatus}}Qt.createDropsEntitlementQuery=t;function r(i,a){return{fulfillment_status:a,entitlement_ids:i}}return Qt.createDropsEntitlementUpdateBody=r,Qt}var an={},zm;function sb(){if(zm)return an;zm=1,Object.defineProperty(an,"__esModule",{value:!0}),an.HelixDropsEntitlement=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get rewardId(){return this[t.rawDataSymbol].benefit_id}get grantDate(){return new Date(this[t.rawDataSymbol].timestamp)}get userId(){return this[t.rawDataSymbol].user_id}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get gameId(){return this[t.rawDataSymbol].game_id}async getGame(){return(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id))}get fulfillmentStatus(){return this[t.rawDataSymbol].fulfillment_status}get updateDate(){return new Date(this[t.rawDataSymbol].last_updated)}};return an.HelixDropsEntitlement=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),an.HelixDropsEntitlement=r=n.__decorate([(0,t.rtfm)("api","HelixDropsEntitlement")],r),an}var Km;function ob(){if(Km)return nn;Km=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.HelixEntitlementApi=void 0;const n=M,e=W(),t=q(),r=FS(),i=sr(),a=ke(),s=Fe(),o=Me(),u=ve(),h=sb();let m=class extends u.BaseApi{constructor(){super(...arguments),this._getDropsEntitlementByIdBatcher=new i.HelixRequestBatcher({url:"entitlements/drops"},"id","id",this._client,g=>new h.HelixDropsEntitlement(g,this._client))}async getDropsEntitlements(g,_=!1){const p=await this._client.callApi({type:"helix",url:"entitlements/drops",userId:(0,e.mapOptional)(g.user,t.extractUserId),forceType:g.user&&_?"app":void 0,query:{...(0,r.createDropsEntitlementQuery)(g,_),...(0,o.createPaginationQuery)(g)}});return(0,s.createPaginatedResult)(p,h.HelixDropsEntitlement,this._client)}getDropsEntitlementsPaginated(g,_=!1){return new a.HelixPaginatedRequest({url:"entitlements/drops",userId:(0,e.mapOptional)(g.user,t.extractUserId),forceType:g.user&&_?"app":void 0,query:(0,r.createDropsEntitlementQuery)(g,_)},this._client,p=>new h.HelixDropsEntitlement(p,this._client))}async getDropsEntitlementsByIds(g){return(await this._client.callApi({type:"helix",url:"entitlements/drops",query:{id:g}})).data.map(p=>new h.HelixDropsEntitlement(p,this._client))}async getDropsEntitlementById(g){var _;return(_=(await this.getDropsEntitlementsByIds([g]))[0])!==null&&_!==void 0?_:null}async getDropsEntitlementByIdBatched(g){return await this._getDropsEntitlementByIdBatcher.request(g)}async updateDropsEntitlements(g,_){const p=await this._client.callApi({type:"helix",url:"entitlements/drops",method:"PATCH",jsonBody:(0,r.createDropsEntitlementUpdateBody)(g,_)});return new Map(p.data.flatMap(l=>l.ids.map(d=>[d,l.status])))}};return nn.HelixEntitlementApi=m,n.__decorate([(0,e.Enumerable)(!1)],m.prototype,"_getDropsEntitlementByIdBatcher",void 0),nn.HelixEntitlementApi=m=n.__decorate([(0,t.rtfm)("api","HelixEntitlementApi")],m),nn}var sn={},qe={},Xm;function $S(){if(Xm)return qe;Xm=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.createEventSubConduitShardsUpdateCondition=qe.createEventSubConduitUpdateCondition=qe.createEventSubConduitCondition=qe.createEventSubDropEntitlementGrantCondition=qe.createEventSubUserCondition=qe.createEventSubModeratorCondition=qe.createEventSubRewardCondition=qe.createEventSubBroadcasterCondition=void 0;const n=q();function e(h){return{broadcaster_user_id:(0,n.extractUserId)(h)}}qe.createEventSubBroadcasterCondition=e;function t(h,m){return{broadcaster_user_id:(0,n.extractUserId)(h),reward_id:m}}qe.createEventSubRewardCondition=t;function r(h,m){return{broadcaster_user_id:h,moderator_user_id:m}}qe.createEventSubModeratorCondition=r;function i(h,m){return{broadcaster_user_id:h,user_id:m}}qe.createEventSubUserCondition=i;function a(h){return{organization_id:h.organizationId,category_id:h.categoryId,campaign_id:h.campaignId}}qe.createEventSubDropEntitlementGrantCondition=a;function s(h,m){return{conduit_id:h,status:m}}qe.createEventSubConduitCondition=s;function o(h,m){return{id:h,shard_count:m.toString()}}qe.createEventSubConduitUpdateCondition=o;function u(h,m){return{conduit_id:h,shards:m}}return qe.createEventSubConduitShardsUpdateCondition=u,qe}var on={},Jm;function md(){if(Jm)return on;Jm=1,Object.defineProperty(on,"__esModule",{value:!0}),on.HelixEventSubSubscription=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get status(){return this[t.rawDataSymbol].status}get type(){return this[t.rawDataSymbol].type}get cost(){return this[t.rawDataSymbol].cost}get condition(){return this[t.rawDataSymbol].condition}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get transportMethod(){return this[t.rawDataSymbol].transport.method}async unsubscribe(){await this._client.eventSub.deleteSubscription(this[t.rawDataSymbol].id)}get _transport(){return this[t.rawDataSymbol].transport}set _status(a){this[t.rawDataSymbol].status=a}};return on.HelixEventSubSubscription=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),on.HelixEventSubSubscription=r=n.__decorate([(0,t.rtfm)("api","HelixEventSubSubscription","id")],r),on}var ln={},Ym;function lb(){if(Ym)return ln;Ym=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.HelixPaginatedEventSubSubscriptionsRequest=void 0;const n=M,e=q(),t=eo(),r=md();let i=class extends t.HelixPaginatedRequestWithTotal{constructor(s,o,u){super({url:"eventsub/subscriptions",userId:o,query:s},u,h=>new r.HelixEventSubSubscription(h,u))}async getTotalCost(){var s;return((s=this._currentData)!==null&&s!==void 0?s:await this._fetchData({query:{after:void 0}})).total_cost}async getMaxTotalCost(){var s;return((s=this._currentData)!==null&&s!==void 0?s:await this._fetchData({query:{after:void 0}})).max_total_cost}};return ln.HelixPaginatedEventSubSubscriptionsRequest=i,ln.HelixPaginatedEventSubSubscriptionsRequest=i=n.__decorate([(0,e.rtfm)("api","HelixPaginatedEventSubSubscriptionsRequest")],i),ln}var un={},Zm;function ub(){if(Zm)return un;Zm=1,Object.defineProperty(un,"__esModule",{value:!0}),un.HelixEventSubConduit=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get shardCount(){return this[t.rawDataSymbol].shard_count}async update(a){return await this._client.eventSub.updateConduit(this[t.rawDataSymbol].id,a)}async delete(){await this._client.eventSub.deleteConduit(this[t.rawDataSymbol].id)}async getShards(){return await this._client.eventSub.getConduitShards(this[t.rawDataSymbol].id)}};return un.HelixEventSubConduit=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),un.HelixEventSubConduit=r=n.__decorate([(0,t.rtfm)("api","HelixEventSubConduit")],r),un}var cn={},e_;function cb(){if(e_)return cn;e_=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.HelixEventSubConduitShard=void 0;const n=M,e=q();let t=class extends e.DataObject{get id(){return this[e.rawDataSymbol].id}get status(){return this[e.rawDataSymbol].status}get transportMethod(){return this[e.rawDataSymbol].transport.method}};return cn.HelixEventSubConduitShard=t,cn.HelixEventSubConduitShard=t=n.__decorate([(0,e.rtfm)("api","HelixEventSubConduitShard")],t),cn}var t_;function db(){if(t_)return sn;t_=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.HelixEventSubApi=void 0;const n=M,e=W(),t=q(),r=$S(),i=et(),a=ke(),s=Fe(),o=Me(),u=ve(),h=md(),m=lb(),w=ub(),g=cb();let _=class extends u.BaseApi{async getSubscriptions(l){const d=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:(0,o.createPaginationQuery)(l)});return{...(0,s.createPaginatedResultWithTotal)(d,h.HelixEventSubSubscription,this._client),totalCost:d.total_cost,maxTotalCost:d.max_total_cost}}getSubscriptionsPaginated(){return new m.HelixPaginatedEventSubSubscriptionsRequest({},void 0,this._client)}async getSubscriptionsForStatus(l,d){const b=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...(0,o.createPaginationQuery)(d),status:l}});return{...(0,s.createPaginatedResultWithTotal)(b,h.HelixEventSubSubscription,this._client),totalCost:b.total_cost,maxTotalCost:b.max_total_cost}}getSubscriptionsForStatusPaginated(l){return new m.HelixPaginatedEventSubSubscriptionsRequest({status:l},void 0,this._client)}async getSubscriptionsForType(l,d){const b=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...(0,o.createPaginationQuery)(d),type:l}});return{...(0,s.createPaginatedResultWithTotal)(b,h.HelixEventSubSubscription,this._client),totalCost:b.total_cost,maxTotalCost:b.max_total_cost}}getSubscriptionsForTypePaginated(l){return new m.HelixPaginatedEventSubSubscriptionsRequest({type:l},void 0,this._client)}async getSubscriptionsForUser(l,d){const b=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",userId:(0,t.extractUserId)(l),query:{...(0,i.createSingleKeyQuery)("user_id",(0,t.extractUserId)(l)),...(0,o.createPaginationQuery)(d)}});return{...(0,s.createPaginatedResultWithTotal)(b,h.HelixEventSubSubscription,this._client),totalCost:b.total_cost,maxTotalCost:b.max_total_cost}}getSubscriptionsForUserPaginated(l){const d=(0,t.extractUserId)(l);return new m.HelixPaginatedEventSubSubscriptionsRequest((0,i.createSingleKeyQuery)("user_id",d),d,this._client)}async createSubscription(l,d,b,x,A,I,y,H){const E=x.method==="webhook"||x.method==="conduit",B=E?void 0:I;if(!E&&!A)throw new Error(`Transport ${x.method} can only handle subscriptions with user context`);const j={type:l,version:d,condition:b,transport:x};H&&(j.is_batching_enabled=!0);const Z=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"POST",scopes:B,userId:(0,e.mapOptional)(A,t.extractUserId),canOverrideScopedUserContext:y,forceType:E?"app":"user",jsonBody:j});return new h.HelixEventSubSubscription(Z.data[0],this._client)}async deleteSubscription(l){await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"DELETE",query:{id:l}})}async deleteAllSubscriptions(){await this._deleteSubscriptionsWithCondition()}async deleteBrokenSubscriptions(){await this._deleteSubscriptionsWithCondition(l=>l.status!=="enabled"&&l.status!=="webhook_callback_verification_pending")}async subscribeToStreamOnlineEvents(l,d){return await this.createSubscription("stream.online","1",(0,r.createEventSubBroadcasterCondition)(l),d,l)}async subscribeToStreamOfflineEvents(l,d){return await this.createSubscription("stream.offline","1",(0,r.createEventSubBroadcasterCondition)(l),d,l)}async subscribeToChannelUpdateEvents(l,d){return await this.createSubscription("channel.update","2",(0,r.createEventSubBroadcasterCondition)(l),d,l)}async subscribeToChannelFollowEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.follow","2",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,b,["moderator:read:followers"],!0)}async subscribeToChannelSubscriptionEvents(l,d){return await this.createSubscription("channel.subscribe","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionGiftEvents(l,d){return await this.createSubscription("channel.subscription.gift","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionMessageEvents(l,d){return await this.createSubscription("channel.subscription.message","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionEndEvents(l,d){return await this.createSubscription("channel.subscription.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:subscriptions"])}async subscribeToChannelCheerEvents(l,d){return await this.createSubscription("channel.cheer","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["bits:read"])}async subscribeToChannelCharityCampaignStartEvents(l,d){return await this.createSubscription("channel.charity_campaign.start","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:charity"])}async subscribeToChannelCharityCampaignStopEvents(l,d){return await this.createSubscription("channel.charity_campaign.stop","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:charity"])}async subscribeToChannelCharityDonationEvents(l,d){return await this.createSubscription("channel.charity_campaign.donate","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:charity"])}async subscribeToChannelCharityCampaignProgressEvents(l,d){return await this.createSubscription("channel.charity_campaign.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:charity"])}async subscribeToChannelBanEvents(l,d){return await this.createSubscription("channel.ban","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:moderate"])}async subscribeToChannelUnbanEvents(l,d){return await this.createSubscription("channel.unban","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:moderate"])}async subscribeToChannelShieldModeBeginEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shield_mode.begin","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,b,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelShieldModeEndEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shield_mode.end","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,b,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelModeratorAddEvents(l,d){return await this.createSubscription("channel.moderator.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["moderation:read"])}async subscribeToChannelModeratorRemoveEvents(l,d){return await this.createSubscription("channel.moderator.remove","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["moderation:read"])}async subscribeToChannelRaidEventsFrom(l,d){return await this.createSubscription("channel.raid","1",(0,i.createSingleKeyQuery)("from_broadcaster_user_id",(0,t.extractUserId)(l)),d,l)}async subscribeToChannelRaidEventsTo(l,d){return await this.createSubscription("channel.raid","1",(0,i.createSingleKeyQuery)("to_broadcaster_user_id",(0,t.extractUserId)(l)),d,l)}async subscribeToChannelRewardAddEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward.update","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEventsForReward(l,d,b){return await this.createSubscription("channel.channel_points_custom_reward.update","1",(0,r.createEventSubRewardCondition)(l,d),b,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEventsForReward(l,d,b){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",(0,r.createEventSubRewardCondition)(l,d),b,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEventsForReward(l,d,b){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",(0,r.createEventSubRewardCondition)(l,d),b,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEventsForReward(l,d,b){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",(0,r.createEventSubRewardCondition)(l,d),b,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelAutomaticRewardRedemptionAddEvents(l,d){return await this.createSubscription("channel.channel_points_automatic_reward_redemption.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelPollBeginEvents(l,d){return await this.createSubscription("channel.poll.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollProgressEvents(l,d){return await this.createSubscription("channel.poll.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollEndEvents(l,d){return await this.createSubscription("channel.poll.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPredictionBeginEvents(l,d){return await this.createSubscription("channel.prediction.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionProgressEvents(l,d){return await this.createSubscription("channel.prediction.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionLockEvents(l,d){return await this.createSubscription("channel.prediction.lock","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionEndEvents(l,d){return await this.createSubscription("channel.prediction.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelGoalBeginEvents(l,d){return await this.createSubscription("channel.goal.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:goals"])}async subscribeToChannelGoalProgressEvents(l,d){return await this.createSubscription("channel.goal.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:goals"])}async subscribeToChannelGoalEndEvents(l,d){return await this.createSubscription("channel.goal.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:goals"])}async subscribeToChannelHypeTrainBeginEvents(l,d){return await this.createSubscription("channel.hype_train.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:hype_train"])}async subscribeToChannelHypeTrainProgressEvents(l,d){return await this.createSubscription("channel.hype_train.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:hype_train"])}async subscribeToChannelHypeTrainEndEvents(l,d){return await this.createSubscription("channel.hype_train.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:hype_train"])}async subscribeToChannelShoutoutCreateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shoutout.create","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,b,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelShoutoutReceiveEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shoutout.receive","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,b,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelAdBreakBeginEvents(l,d){return await this.createSubscription("channel.ad_break.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:ads"])}async subscribeToChannelChatClearEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.clear","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatClearUserMessagesEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.clear_user_messages","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatMessageDeleteEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.message_delete","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatNotificationEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.notification","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatMessageEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.message","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatSettingsUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat_settings.update","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelUnbanRequestCreateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.unban_request.create","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelUnbanRequestResolveEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.unban_request.resolve","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelModerateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.moderate","2",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,[],!0)}async subscribeToChannelWarningAcknowledgeEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.warning.acknowledge","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelWarningSendEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.warning.send","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelVipAddEvents(l,d){return await this.createSubscription("channel.vip.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:vips","channel:manage:vips"])}async subscribeToChannelVipRemoveEvents(l,d){return await this.createSubscription("channel.vip.remove","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:vips","channel:manage:vips"])}async subscribeToExtensionBitsTransactionCreateEvents(l,d){return await this.createSubscription("extension.bits_transaction.create","1",(0,i.createSingleKeyQuery)("extension_client_id",l),d)}async subscribeToUserAuthorizationGrantEvents(l,d){return await this.createSubscription("user.authorization.grant","1",(0,i.createSingleKeyQuery)("client_id",l),d)}async subscribeToUserAuthorizationRevokeEvents(l,d){return await this.createSubscription("user.authorization.revoke","1",(0,i.createSingleKeyQuery)("client_id",l),d)}async subscribeToUserUpdateEvents(l,d,b){return await this.createSubscription("user.update","1",(0,i.createSingleKeyQuery)("user_id",(0,t.extractUserId)(l)),d,l,b?["user:read:email"]:void 0)}async subscribeToUserWhisperMessageEvents(l,d){return await this.createSubscription("user.whisper.message","1",(0,i.createSingleKeyQuery)("user_id",(0,t.extractUserId)(l)),d,l,["user:read:whispers","user:manage:whispers"])}async subscribeToDropEntitlementGrantEvents(l,d){return await this.createSubscription("drop.entitlement.grant","1",(0,r.createEventSubDropEntitlementGrantCondition)(l),d,void 0,void 0,!1,!0)}async subscribeToAutoModMessageHoldEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("automod.message.hold","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("automod.message.update","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageHoldV2Events(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("automod.message.hold","2",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateV2Events(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("automod.message.update","2",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:manage:automod"],!0)}async subscribeToAutoModSettingsUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("automod.settings.update","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:automod_settings"],!0)}async subscribeToAutoModTermsUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("automod.terms.update","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:manage:automod"],!0)}async subscribeToChannelChatUserMessageHoldEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.user_message_hold","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatUserMessageUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.user_message_update","1",(0,r.createEventSubUserCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["user:read:chat"],!0)}async subscribeToChannelSuspiciousUserUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.suspicious_user.update","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSuspiciousUserMessageEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.suspicious_user.message","1",(0,r.createEventSubModeratorCondition)(b,this._getUserContextIdWithDefault(b)),d,l,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSharedChatSessionBeginEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shared_chat.begin","1",(0,r.createEventSubBroadcasterCondition)(b),d,b)}async subscribeToChannelSharedChatSessionUpdateEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shared_chat.update","1",(0,r.createEventSubBroadcasterCondition)(b),d,b)}async subscribeToChannelSharedChatSessionEndEvents(l,d){const b=(0,t.extractUserId)(l);return await this.createSubscription("channel.shared_chat.end","1",(0,r.createEventSubBroadcasterCondition)(b),d,b)}async getConduits(){return(await this._client.callApi({type:"helix",url:"eventsub/conduits"})).data.map(d=>new w.HelixEventSubConduit(d,this._client))}async createConduit(l){const d=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"POST",query:{...(0,i.createSingleKeyQuery)("shard_count",l.toString())}});return new w.HelixEventSubConduit(d.data[0],this._client)}async updateConduit(l,d){const b=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"PATCH",query:(0,r.createEventSubConduitUpdateCondition)(l,d)});return new w.HelixEventSubConduit(b.data[0],this._client)}async deleteConduit(l){await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"DELETE",query:{...(0,i.createSingleKeyQuery)("id",l)}})}async getConduitShards(l,d,b){const x=await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",query:{...(0,r.createEventSubConduitCondition)(l,d),...(0,o.createPaginationQuery)(b)}});return{...(0,s.createPaginatedResult)(x,g.HelixEventSubConduitShard,this._client)}}getConduitShardsPaginated(l,d){return new a.HelixPaginatedRequest({url:"eventsub/conduits/shards",query:(0,r.createEventSubConduitCondition)(l,d)},this._client,b=>new g.HelixEventSubConduitShard(b))}async updateConduitShards(l,d){return(await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",method:"PATCH",jsonBody:(0,r.createEventSubConduitShardsUpdateCondition)(l,d)})).data.map(x=>new g.HelixEventSubConduitShard(x))}async _deleteSubscriptionsWithCondition(l){const d=this.getSubscriptionsPaginated();for await(const b of d)(!l||l(b))&&await b.unsubscribe()}};return sn.HelixEventSubApi=_,sn.HelixEventSubApi=_=n.__decorate([(0,t.rtfm)("api","HelixEventSubApi")],_),sn}var dn={},ft={},r_;function GS(){if(r_)return ft;r_=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.createExtensionTransactionQuery=ft.createExtensionProductBody=ft.createReleasedExtensionFilter=void 0;function n(r,i){return{extension_id:r,extension_version:i}}ft.createReleasedExtensionFilter=n;function e(r){return{sku:r.sku,cost:{amount:r.cost,type:"bits"},display_name:r.displayName,in_development:r.inDevelopment,expiration:r.expirationDate,is_broadcast:r.broadcast}}ft.createExtensionProductBody=e;function t(r,i){return{extension_id:r,id:i.transactionIds}}return ft.createExtensionTransactionQuery=t,ft}var hn={},n_;function hb(){if(n_)return hn;n_=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.HelixChannelReference=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].broadcaster_id}get displayName(){return this[t.rawDataSymbol].broadcaster_name}async getChannel(){return(0,t.checkRelationAssertion)(await this._client.channels.getChannelInfoById(this[t.rawDataSymbol].broadcaster_id))}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get gameId(){return this[t.rawDataSymbol].game_id}get gameName(){return this[t.rawDataSymbol].game_name}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get title(){return this[t.rawDataSymbol].title}};return hn.HelixChannelReference=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),hn.HelixChannelReference=r=n.__decorate([(0,t.rtfm)("api","HelixChannelReference","id")],r),hn}var pn={},i_;function pb(){if(i_)return pn;i_=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.HelixExtensionBitsProduct=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{get sku(){return this[t.rawDataSymbol].sku}get cost(){return this[t.rawDataSymbol].cost.amount}get displayName(){return this[t.rawDataSymbol].display_name}get inDevelopment(){return this[t.rawDataSymbol].in_development}get isBroadcast(){return this[t.rawDataSymbol].is_broadcast}get expirationDate(){return(0,e.mapNullable)(this[t.rawDataSymbol].expiration,a=>new Date(a))}};return pn.HelixExtensionBitsProduct=r,pn.HelixExtensionBitsProduct=r=n.__decorate([(0,t.rtfm)("api","HelixExtensionBitsProduct","sku")],r),pn}var mn={},a_;function mb(){if(a_)return mn;a_=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.HelixExtensionTransaction=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get transactionDate(){return new Date(this[t.rawDataSymbol].timestamp)}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_name}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get productType(){return this[t.rawDataSymbol].product_type}get productSku(){return this[t.rawDataSymbol].product_data.sku}get productCost(){return this[t.rawDataSymbol].product_data.cost.amount}get productDisplayName(){return this[t.rawDataSymbol].product_data.displayName}get productInDevelopment(){return this[t.rawDataSymbol].product_data.inDevelopment}};return mn.HelixExtensionTransaction=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),mn.HelixExtensionTransaction=r=n.__decorate([(0,t.rtfm)("api","HelixExtensionTransaction","id")],r),mn}var s_;function _b(){if(s_)return dn;s_=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.HelixExtensionsApi=void 0;const n=M,e=q(),t=GS(),r=et(),i=ke(),a=Fe(),s=Me(),o=ve(),u=hb(),h=pb(),m=mb();let w=class extends o.BaseApi{async getReleasedExtension(_,p){const l=await this._client.callApi({type:"helix",url:"extensions/released",query:(0,t.createReleasedExtensionFilter)(_,p)});return new e.HelixExtension(l.data[0])}async getLiveChannelsWithExtension(_,p){const l=await this._client.callApi({type:"helix",url:"extensions/live",query:{...(0,r.createSingleKeyQuery)("extension_id",_),...(0,s.createPaginationQuery)(p)}});return(0,a.createPaginatedResult)(l,u.HelixChannelReference,this._client)}getLiveChannelsWithExtensionPaginated(_){return new i.HelixPaginatedRequest({url:"extensions/live",query:(0,r.createSingleKeyQuery)("extension_id",_)},this._client,p=>new u.HelixChannelReference(p,this._client))}async getExtensionBitsProducts(_){return(await this._client.callApi({type:"helix",url:"bits/extensions",forceType:"app",query:(0,r.createSingleKeyQuery)("should_include_all",_==null?void 0:_.toString())})).data.map(l=>new h.HelixExtensionBitsProduct(l))}async putExtensionBitsProduct(_){const p=await this._client.callApi({type:"helix",url:"bits/extensions",method:"PUT",forceType:"app",jsonBody:(0,t.createExtensionProductBody)(_)});return new h.HelixExtensionBitsProduct(p.data[0])}async getExtensionTransactions(_,p={}){const l=await this._client.callApi({type:"helix",url:"extensions/transactions",forceType:"app",query:{...(0,t.createExtensionTransactionQuery)(_,p),...(0,s.createPaginationQuery)(p)}});return(0,a.createPaginatedResult)(l,m.HelixExtensionTransaction,this._client)}getExtensionTransactionsPaginated(_,p={}){return new i.HelixPaginatedRequest({url:"extensions/transactions",forceType:"app",query:(0,t.createExtensionTransactionQuery)(_,p)},this._client,l=>new m.HelixExtensionTransaction(l,this._client))}};return dn.HelixExtensionsApi=w,dn.HelixExtensionsApi=w=n.__decorate([(0,e.rtfm)("api","HelixExtensionsApi")],w),dn}var _n={},gn={},o_;function _d(){if(o_)return gn;o_=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.HelixGame=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get name(){return this[t.rawDataSymbol].name}get boxArtUrl(){return this[t.rawDataSymbol].box_art_url}get igdbId(){return this[t.rawDataSymbol].igdb_id||null}getBoxArtUrl(a,s){return this[t.rawDataSymbol].box_art_url.replace("{width}",a.toString()).replace("{height}",s.toString())}async getStreams(a){return await this._client.streams.getStreams({...a,game:this[t.rawDataSymbol].id})}getStreamsPaginated(){return this._client.streams.getStreamsPaginated({game:this[t.rawDataSymbol].id})}};return gn.HelixGame=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),gn.HelixGame=r=n.__decorate([(0,t.rtfm)("api","HelixGame","id")],r),gn}var l_;function gb(){if(l_)return _n;l_=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.HelixGameApi=void 0;const n=M,e=W(),t=q(),r=sr(),i=ke(),a=Fe(),s=Me(),o=ve(),u=_d();let h=class extends o.BaseApi{constructor(){super(...arguments),this._getGameByIdBatcher=new r.HelixRequestBatcher({url:"games"},"id","id",this._client,w=>new u.HelixGame(w,this._client)),this._getGameByNameBatcher=new r.HelixRequestBatcher({url:"games"},"name","name",this._client,w=>new u.HelixGame(w,this._client)),this._getGameByIgdbIdBatcher=new r.HelixRequestBatcher({url:"games"},"igdb_id","igdb_id",this._client,w=>new u.HelixGame(w,this._client))}async getGamesByIds(w){return await this._getGames("id",w)}async getGamesByNames(w){return await this._getGames("name",w)}async getGamesByIgdbIds(w){return await this._getGames("igdb_id",w)}async getGameById(w){var g;return(g=(await this._getGames("id",[w]))[0])!==null&&g!==void 0?g:null}async getGameByName(w){var g;return(g=(await this._getGames("name",[w]))[0])!==null&&g!==void 0?g:null}async getGameByIgdbId(w){var g;return(g=(await this._getGames("igdb_id",[w]))[0])!==null&&g!==void 0?g:null}async getGameByIdBatched(w){return await this._getGameByIdBatcher.request(w)}async getGameByNameBatched(w){return await this._getGameByNameBatcher.request(w)}async getGameByIgdbIdBatched(w){return await this._getGameByIgdbIdBatcher.request(w)}async getTopGames(w){const g=await this._client.callApi({type:"helix",url:"games/top",query:(0,s.createPaginationQuery)(w)});return(0,a.createPaginatedResult)(g,u.HelixGame,this._client)}getTopGamesPaginated(){return new i.HelixPaginatedRequest({url:"games/top"},this._client,w=>new u.HelixGame(w,this._client))}async _getGames(w,g){return g.length?(await this._client.callApi({type:"helix",url:"games",query:{[w]:g}})).data.map(p=>new u.HelixGame(p,this._client)):[]}};return _n.HelixGameApi=h,n.__decorate([(0,e.Enumerable)(!1)],h.prototype,"_getGameByIdBatcher",void 0),n.__decorate([(0,e.Enumerable)(!1)],h.prototype,"_getGameByNameBatcher",void 0),n.__decorate([(0,e.Enumerable)(!1)],h.prototype,"_getGameByIgdbIdBatcher",void 0),_n.HelixGameApi=h=n.__decorate([(0,t.rtfm)("api","HelixGameApi")],h),_n}var fn={},yn={},u_;function fb(){if(u_)return yn;u_=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.HelixGoal=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get type(){return this[t.rawDataSymbol].type}get description(){return this[t.rawDataSymbol].description}get currentAmount(){return this[t.rawDataSymbol].current_amount}get targetAmount(){return this[t.rawDataSymbol].target_amount}get creationDate(){return this[t.rawDataSymbol].created_at}};return yn.HelixGoal=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),yn.HelixGoal=r=n.__decorate([(0,t.rtfm)("api","HelixGoal","id")],r),yn}var c_;function yb(){if(c_)return fn;c_=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.HelixGoalApi=void 0;const n=M,e=Ae(),t=q(),r=ve(),i=fb();let a=class extends r.BaseApi{async getGoals(o){return(await this._client.callApi({type:"helix",url:"goals",userId:(0,t.extractUserId)(o),scopes:["channel:read:goals"],query:(0,e.createBroadcasterQuery)(o)})).data.map(h=>new i.HelixGoal(h,this._client))}};return fn.HelixGoalApi=a,fn.HelixGoalApi=a=n.__decorate([(0,t.rtfm)("api","HelixGoalApi")],a),fn}var as={},bn={},vn={},d_;function bb(){if(d_)return vn;d_=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.HelixHypeTrainContribution=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user))}get type(){return this[t.rawDataSymbol].type}get total(){return this[t.rawDataSymbol].total}};return vn.HelixHypeTrainContribution=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),vn.HelixHypeTrainContribution=r=n.__decorate([(0,t.rtfm)("api","HelixHypeTrainContribution","userId")],r),vn}var h_;function vb(){if(h_)return bn;h_=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.HelixHypeTrainEvent=void 0;const n=M,e=W(),t=q(),r=bb();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get eventId(){return this[t.rawDataSymbol].id}get eventType(){return this[t.rawDataSymbol].event_type}get eventDate(){return new Date(this[t.rawDataSymbol].event_timestamp)}get eventVersion(){return this[t.rawDataSymbol].version}get id(){return this[t.rawDataSymbol].event_data.id}get broadcasterId(){return this[t.rawDataSymbol].event_data.broadcaster_id}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].event_data.broadcaster_id))}get level(){return this[t.rawDataSymbol].event_data.level}get startDate(){return new Date(this[t.rawDataSymbol].event_data.started_at)}get expiryDate(){return new Date(this[t.rawDataSymbol].event_data.expires_at)}get cooldownDate(){return new Date(this[t.rawDataSymbol].event_data.cooldown_end_time)}get total(){return this[t.rawDataSymbol].event_data.total}get goal(){return this[t.rawDataSymbol].event_data.goal}get lastContribution(){return new r.HelixHypeTrainContribution(this[t.rawDataSymbol].event_data.last_contribution,this._client)}get topContributions(){return this[t.rawDataSymbol].event_data.top_contributions.map(s=>new r.HelixHypeTrainContribution(s,this._client))}};return bn.HelixHypeTrainEvent=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),bn.HelixHypeTrainEvent=i=n.__decorate([(0,t.rtfm)("api","HelixHypeTrainEvent","id")],i),bn}var p_;function wb(){if(p_)return as;p_=1,Object.defineProperty(as,"__esModule",{value:!0}),as.HelixHypeTrainApi=void 0;const n=Ae(),e=q(),t=ke(),r=Fe(),i=Me(),a=ve(),s=vb();class o extends a.BaseApi{async getHypeTrainEventsForBroadcaster(h,m){const w=await this._client.callApi({type:"helix",url:"hypetrain/events",userId:(0,e.extractUserId)(h),scopes:["channel:read:hype_train"],query:{...(0,n.createBroadcasterQuery)(h),...(0,i.createPaginationQuery)(m)}});return(0,r.createPaginatedResult)(w,s.HelixHypeTrainEvent,this._client)}getHypeTrainEventsForBroadcasterPaginated(h){return new t.HelixPaginatedRequest({url:"hypetrain/events",userId:(0,e.extractUserId)(h),scopes:["channel:read:hype_train"],query:(0,n.createBroadcasterQuery)(h)},this._client,m=>new s.HelixHypeTrainEvent(m,this._client))}}return as.HelixHypeTrainApi=o,as}var wn={},Re={},m_;function QS(){if(m_)return Re;m_=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.createWarnUserBody=Re.createCheckAutoModStatusBody=Re.createUpdateShieldModeStatusBody=Re.createBanUserBody=Re.createAutoModSettingsBody=Re.createAutoModProcessBody=Re.createResolveUnbanRequestQuery=Re.createModeratorModifyQuery=Re.createModerationUserListQuery=void 0;const n=q();function e(m,w){return{broadcaster_id:(0,n.extractUserId)(m),user_id:w==null?void 0:w.userId}}Re.createModerationUserListQuery=e;function t(m,w){return{broadcaster_id:(0,n.extractUserId)(m),user_id:(0,n.extractUserId)(w)}}Re.createModeratorModifyQuery=t;function r(m,w,g,_,p){return{unban_request_id:g,broadcaster_id:(0,n.extractUserId)(m),moderator_id:(0,n.extractUserId)(w),status:_?"approved":"denied",resolution_text:p}}Re.createResolveUnbanRequestQuery=r;function i(m,w,g){return{user_id:(0,n.extractUserId)(m),msg_id:w,action:g?"ALLOW":"DENY"}}Re.createAutoModProcessBody=i;function a(m){return{overall_level:m.overallLevel,aggression:m.aggression,bullying:m.bullying,disability:m.disability,misogyny:m.misogyny,race_ethnicity_or_religion:m.raceEthnicityOrReligion,sex_based_terms:m.sexBasedTerms,sexuality_sex_or_gender:m.sexualitySexOrGender,swearing:m.swearing}}Re.createAutoModSettingsBody=a;function s(m){return{data:{duration:m.duration,reason:m.reason,user_id:(0,n.extractUserId)(m.user)}}}Re.createBanUserBody=s;function o(m){return{is_active:m}}Re.createUpdateShieldModeStatusBody=o;function u(m){return{data:m.map(w=>({msg_id:w.messageId,msg_text:w.messageText}))}}Re.createCheckAutoModStatusBody=u;function h(m,w){return{data:{user_id:(0,n.extractUserId)(m),reason:w}}}return Re.createWarnUserBody=h,Re}var xn={},__;function WS(){if(__)return xn;__=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.HelixAutoModSettings=void 0;const n=M,e=q();let t=class extends e.DataObject{get broadcasterId(){return this[e.rawDataSymbol].broadcaster_id}get moderatorId(){return this[e.rawDataSymbol].moderator_id}get overallLevel(){return this[e.rawDataSymbol].overall_level?this[e.rawDataSymbol].overall_level:null}get disability(){return this[e.rawDataSymbol].disability}get aggression(){return this[e.rawDataSymbol].aggression}get sexualitySexOrGender(){return this[e.rawDataSymbol].sexuality_sex_or_gender}get misogyny(){return this[e.rawDataSymbol].misogyny}get bullying(){return this[e.rawDataSymbol].bullying}get swearing(){return this[e.rawDataSymbol].swearing}get raceEthnicityOrReligion(){return this[e.rawDataSymbol].race_ethnicity_or_religion}get sexBasedTerms(){return this[e.rawDataSymbol].sex_based_terms}};return xn.HelixAutoModSettings=t,xn.HelixAutoModSettings=t=n.__decorate([(0,e.rtfm)("api","HelixAutoModSettings","broadcasterId")],t),xn}var Sn={},g_;function VS(){if(g_)return Sn;g_=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.HelixAutoModStatus=void 0;const n=M,e=q();let t=class extends e.DataObject{get messageId(){return this[e.rawDataSymbol].msg_id}get isPermitted(){return this[e.rawDataSymbol].is_permitted}};return Sn.HelixAutoModStatus=t,Sn.HelixAutoModStatus=t=n.__decorate([(0,e.rtfm)("api","HelixAutoModStatus","messageId")],t),Sn}var Cn={},En={},f_;function gd(){if(f_)return En;f_=1,Object.defineProperty(En,"__esModule",{value:!0}),En.HelixBanUser=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s,o){super(a),this._expiryTimestamp=s,this._client=o}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get expiryDate(){return(0,e.mapNullable)(this._expiryTimestamp,a=>new Date(a))}get moderatorId(){return this[t.rawDataSymbol].moderator_id}async getModerator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].moderator_id))}get userId(){return this[t.rawDataSymbol].user_id}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return En.HelixBanUser=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_expiryTimestamp",void 0),En.HelixBanUser=r=n.__decorate([(0,t.rtfm)("api","HelixBanUser","userId")],r),En}var y_;function xb(){if(y_)return Cn;y_=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.HelixBan=void 0;const n=M,e=q(),t=gd();let r=class extends t.HelixBanUser{constructor(a,s){super(a,a.expires_at||null,s)}get userName(){return this[e.rawDataSymbol].user_login}get userDisplayName(){return this[e.rawDataSymbol].user_name}get moderatorName(){return this[e.rawDataSymbol].moderator_login}get moderatorDisplayName(){return this[e.rawDataSymbol].moderator_name}get reason(){return this[e.rawDataSymbol].reason||null}};return Cn.HelixBan=r,Cn.HelixBan=r=n.__decorate([(0,e.rtfm)("api","HelixBan","userId")],r),Cn}var Hn={},b_;function Sb(){if(b_)return Hn;b_=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.HelixBlockedTerm=void 0;const n=M,e=q();let t=class extends e.DataObject{get broadcasterId(){return this[e.rawDataSymbol].broadcaster_id}get creationDate(){return new Date(this[e.rawDataSymbol].created_at)}get expirationDate(){return this[e.rawDataSymbol].expires_at?new Date(this[e.rawDataSymbol].expires_at):null}get id(){return this[e.rawDataSymbol].id}get moderatorId(){return this[e.rawDataSymbol].moderator_id}get text(){return this[e.rawDataSymbol].text}get updatedDate(){return new Date(this[e.rawDataSymbol].updated_at)}};return Hn.HelixBlockedTerm=t,Hn.HelixBlockedTerm=t=n.__decorate([(0,e.rtfm)("api","HelixBlockedTerm","id")],t),Hn}var Rn={},v_;function Cb(){if(v_)return Rn;v_=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.HelixModeratedChannel=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].broadcaster_id}get name(){return this[t.rawDataSymbol].broadcaster_login}get displayName(){return this[t.rawDataSymbol].broadcaster_name}async getChannel(){return(0,t.checkRelationAssertion)(await this._client.channels.getChannelInfoById(this[t.rawDataSymbol].broadcaster_id))}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}};return Rn.HelixModeratedChannel=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Rn.HelixModeratedChannel=r=n.__decorate([(0,t.rtfm)("api","HelixModeratedChannel","id")],r),Rn}var An={},w_;function Eb(){if(w_)return An;w_=1,Object.defineProperty(An,"__esModule",{value:!0}),An.HelixModerator=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return An.HelixModerator=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),An.HelixModerator=r=n.__decorate([(0,t.rtfm)("api","HelixModerator","userId")],r),An}var Tn={},x_;function Hb(){if(x_)return Tn;x_=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.HelixShieldModeStatus=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get isActive(){return this[t.rawDataSymbol].is_active}get moderatorId(){return this[t.rawDataSymbol].moderator_id}get moderatorName(){return this[t.rawDataSymbol].moderator_login}get moderatorDisplayName(){return this[t.rawDataSymbol].moderator_name}async getModerator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].moderator_id))}get lastActivationDate(){return this[t.rawDataSymbol].last_activated_at===""?null:new Date(this[t.rawDataSymbol].last_activated_at)}};return Tn.HelixShieldModeStatus=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Tn.HelixShieldModeStatus=r=n.__decorate([(0,t.rtfm)("api","HelixShieldModeStatus")],r),Tn}var In={},S_;function Rb(){if(S_)return In;S_=1,Object.defineProperty(In,"__esModule",{value:!0}),In.HelixUnbanRequest=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_id}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get moderatorId(){return this[t.rawDataSymbol].moderator_id}get moderatorName(){return this[t.rawDataSymbol].moderator_login}get moderatorDisplayName(){return this[t.rawDataSymbol].moderator_name}async getModerator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].moderator_id))}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get message(){return this[t.rawDataSymbol].text}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get resolutionMessage(){return this[t.rawDataSymbol].resolution_text||null}get resolutionDate(){return(0,e.mapNullable)(this[t.rawDataSymbol].resolved_at,a=>new Date(a))}};return In.HelixUnbanRequest=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),In.HelixUnbanRequest=r=n.__decorate([(0,t.rtfm)("api","HelixUnbanRequest","id")],r),In}var Pn={},C_;function Ab(){if(C_)return Pn;C_=1,Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.HelixWarning=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get broadcasterId(){return this[t.rawDataSymbol].user_id}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get moderatorId(){return this[t.rawDataSymbol].moderator_id}async getModerator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].moderator_id))}get userId(){return this[t.rawDataSymbol].user_id}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get reason(){return this[t.rawDataSymbol].reason}};return Pn.HelixWarning=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Pn.HelixWarning=r=n.__decorate([(0,t.rtfm)("api","HelixWarning","userId")],r),Pn}var E_;function Tb(){if(E_)return wn;E_=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.HelixModerationApi=void 0;const n=M,e=Ae(),t=q(),r=et(),i=QS(),a=ke(),s=Fe(),o=Me(),u=ve(),h=WS(),m=VS(),w=xb(),g=gd(),_=Sb(),p=Cb(),l=Eb(),d=Hb(),b=Rb(),x=Ab();let A=class extends u.BaseApi{async getBannedUsers(y,H){const E=await this._client.callApi({type:"helix",url:"moderation/banned",userId:(0,t.extractUserId)(y),scopes:["moderation:read"],query:{...(0,i.createModerationUserListQuery)(y,H),...(0,o.createPaginationQuery)(H)}});return(0,s.createPaginatedResult)(E,w.HelixBan,this._client)}getBannedUsersPaginated(y){return new a.HelixPaginatedRequest({url:"moderation/banned",userId:(0,t.extractUserId)(y),scopes:["moderation:read"],query:(0,e.createBroadcasterQuery)(y)},this._client,H=>new w.HelixBan(H,this._client),50)}async checkUserBan(y,H){const E=(0,t.extractUserId)(H);return(await this.getBannedUsers(y,{userId:E})).data.some(j=>j.userId===E)}async getModerators(y,H){const E=await this._client.callApi({type:"helix",url:"moderation/moderators",userId:(0,t.extractUserId)(y),scopes:["moderation:read","channel:manage:moderators"],query:{...(0,i.createModerationUserListQuery)(y,H),...(0,o.createPaginationQuery)(H)}});return(0,s.createPaginatedResult)(E,l.HelixModerator,this._client)}getModeratorsPaginated(y){return new a.HelixPaginatedRequest({url:"moderation/moderators",userId:(0,t.extractUserId)(y),scopes:["moderation:read","channel:manage:moderators"],query:(0,e.createBroadcasterQuery)(y)},this._client,H=>new l.HelixModerator(H,this._client))}async getModeratedChannels(y,H){const E=(0,t.extractUserId)(y),B=await this._client.callApi({type:"helix",url:"moderation/channels",userId:E,scopes:["user:read:moderated_channels"],query:{...(0,r.createSingleKeyQuery)("user_id",E),...(0,o.createPaginationQuery)(H)}});return(0,s.createPaginatedResult)(B,p.HelixModeratedChannel,this._client)}getModeratedChannelsPaginated(y){const H=(0,t.extractUserId)(y);return new a.HelixPaginatedRequest({url:"moderation/channels",userId:H,scopes:["user:read:moderated_channels"],query:(0,r.createSingleKeyQuery)("user_id",H)},this._client,E=>new p.HelixModeratedChannel(E,this._client))}async checkUserMod(y,H){const E=(0,t.extractUserId)(H);return(await this.getModerators(y,{userId:E})).data.some(j=>j.userId===E)}async addModerator(y,H){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"POST",userId:(0,t.extractUserId)(y),scopes:["channel:manage:moderators"],query:(0,i.createModeratorModifyQuery)(y,H)})}async removeModerator(y,H){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"DELETE",userId:(0,t.extractUserId)(y),scopes:["channel:manage:moderators"],query:(0,i.createModeratorModifyQuery)(y,H)})}async checkAutoModStatus(y,H){return(await this._client.callApi({type:"helix",url:"moderation/enforcements/status",method:"POST",userId:(0,t.extractUserId)(y),scopes:["moderation:read"],query:(0,e.createBroadcasterQuery)(y),jsonBody:(0,i.createCheckAutoModStatusBody)(H)})).data.map(B=>new m.HelixAutoModStatus(B))}async processHeldAutoModMessage(y,H,E){await this._client.callApi({type:"helix",url:"moderation/automod/message",method:"POST",userId:(0,t.extractUserId)(y),scopes:["moderator:manage:automod"],jsonBody:(0,i.createAutoModProcessBody)(y,H,E)})}async getAutoModSettings(y){const H=(0,t.extractUserId)(y);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",userId:H,scopes:["moderator:read:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(H)})).data.map(B=>new h.HelixAutoModSettings(B))}async updateAutoModSettings(y,H){const E=(0,t.extractUserId)(y);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",method:"PUT",userId:E,scopes:["moderator:manage:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(E),jsonBody:(0,i.createAutoModSettingsBody)(H)})).data.map(j=>new h.HelixAutoModSettings(j))}async banUser(y,H){const E=(0,t.extractUserId)(y);return(await this._client.callApi({type:"helix",url:"moderation/bans",method:"POST",userId:E,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(E),jsonBody:(0,i.createBanUserBody)(H)})).data.map(j=>new g.HelixBanUser(j,j.end_time,this._client))}async unbanUser(y,H){const E=(0,t.extractUserId)(y);await this._client.callApi({type:"helix",url:"moderation/bans",method:"DELETE",userId:E,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(E),...(0,r.createSingleKeyQuery)("user_id",(0,t.extractUserId)(H))}})}async getBlockedTerms(y,H){const E=(0,t.extractUserId)(y),B=await this._client.callApi({type:"helix",url:"moderation/blocked_terms",userId:E,scopes:["moderator:read:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(E),...(0,o.createPaginationQuery)(H)}});return(0,s.createPaginatedResult)(B,_.HelixBlockedTerm,this._client)}async addBlockedTerm(y,H){const E=(0,t.extractUserId)(y);return(await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"POST",userId:E,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(E),jsonBody:{text:H}})).data.map(j=>new _.HelixBlockedTerm(j))}async removeBlockedTerm(y,H,E){const B=(0,t.extractUserId)(y);await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"DELETE",userId:B,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(B),id:E}})}async deleteChatMessages(y,H){const E=(0,t.extractUserId)(y);await this._client.callApi({type:"helix",url:"moderation/chat",method:"DELETE",userId:E,scopes:["moderator:manage:chat_messages"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(E),...(0,r.createSingleKeyQuery)("message_id",H)}})}async getShieldModeStatus(y){const H=(0,t.extractUserId)(y),E=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"GET",userId:H,scopes:["moderator:read:shield_mode","moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(H)});return new d.HelixShieldModeStatus(E.data[0],this._client)}async updateShieldModeStatus(y,H){const E=(0,t.extractUserId)(y),B=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"PUT",userId:E,scopes:["moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(E),jsonBody:(0,i.createUpdateShieldModeStatusBody)(H)});return new d.HelixShieldModeStatus(B.data[0],this._client)}async getUnbanRequests(y,H,E){const B=(0,t.extractUserId)(y),j=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"GET",userId:B,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(B),...(0,r.createSingleKeyQuery)("status",H),...(0,o.createPaginationQuery)(E)}});return(0,s.createPaginatedResult)(j,b.HelixUnbanRequest,this._client)}getUnbanRequestsPaginated(y,H){const E=(0,t.extractUserId)(y);return new a.HelixPaginatedRequest({url:"moderation/unban_requests",method:"GET",userId:E,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(E),...(0,r.createSingleKeyQuery)("status",H)}},this._client,B=>new b.HelixUnbanRequest(B,this._client))}async resolveUnbanRequest(y,H,E,B){const j=(0,t.extractUserId)(y),Z=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"PATCH",userId:j,scopes:["moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:(0,i.createResolveUnbanRequestQuery)(j,this._getUserContextIdWithDefault(j),H,E,B==null?void 0:B.slice(0,500))});return new b.HelixUnbanRequest(Z.data[0],this._client)}async warnUser(y,H,E){const B=(0,t.extractUserId)(y),j=await this._client.callApi({type:"helix",url:"moderation/warnings",method:"POST",userId:B,scopes:["moderator:manage:warnings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(B),jsonBody:(0,i.createWarnUserBody)(H,E.slice(0,500))});return new x.HelixWarning(j.data[0],this._client)}_createModeratorActionQuery(y){return(0,r.createModeratorActionQuery)(y,this._getUserContextIdWithDefault(y))}};return wn.HelixModerationApi=A,wn.HelixModerationApi=A=n.__decorate([(0,t.rtfm)("api","HelixModerationApi")],A),wn}var Dn={},Wt={},H_;function zS(){if(H_)return Wt;H_=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.createPollEndBody=Wt.createPollBody=void 0;const n=q();function e(r,i){var a;return{broadcaster_id:(0,n.extractUserId)(r),title:i.title,choices:i.choices.map(s=>({title:s})),duration:i.duration,channel_points_voting_enabled:i.channelPointsPerVote!=null,channel_points_per_vote:(a=i.channelPointsPerVote)!==null&&a!==void 0?a:0}}Wt.createPollBody=e;function t(r,i,a){return{broadcaster_id:(0,n.extractUserId)(r),id:i,status:a?"TERMINATED":"ARCHIVED"}}return Wt.createPollEndBody=t,Wt}var Bn={},On={},R_;function Ib(){if(R_)return On;R_=1,Object.defineProperty(On,"__esModule",{value:!0}),On.HelixPollChoice=void 0;const n=M,e=q();let t=class extends e.DataObject{get id(){return this[e.rawDataSymbol].id}get title(){return this[e.rawDataSymbol].title}get totalVotes(){return this[e.rawDataSymbol].votes}get channelPointsVotes(){return this[e.rawDataSymbol].channel_points_votes}};return On.HelixPollChoice=t,On.HelixPollChoice=t=n.__decorate([(0,e.rtfm)("api","HelixPollChoice","id")],t),On}var A_;function Pb(){if(A_)return Bn;A_=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.HelixPoll=void 0;const n=M,e=W(),t=q(),r=Ib();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get title(){return this[t.rawDataSymbol].title}get isChannelPointsVotingEnabled(){return this[t.rawDataSymbol].channel_points_voting_enabled}get channelPointsPerVote(){return this[t.rawDataSymbol].channel_points_per_vote}get status(){return this[t.rawDataSymbol].status}get durationInSeconds(){return this[t.rawDataSymbol].duration}get startDate(){return new Date(this[t.rawDataSymbol].started_at)}get endDate(){return new Date(this.startDate.getTime()+this[t.rawDataSymbol].duration*1e3)}get choices(){return this[t.rawDataSymbol].choices.map(s=>new r.HelixPollChoice(s))}};return Bn.HelixPoll=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Bn.HelixPoll=i=n.__decorate([(0,t.rtfm)("api","HelixPoll","id")],i),Bn}var T_;function Db(){if(T_)return Dn;T_=1,Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.HelixPollApi=void 0;const n=M,e=Ae(),t=q(),r=et(),i=zS(),a=ke(),s=Fe(),o=Me(),u=ve(),h=Pb();let m=class extends u.BaseApi{async getPolls(g,_){const p=await this._client.callApi({type:"helix",url:"polls",userId:(0,t.extractUserId)(g),scopes:["channel:read:polls","channel:manage:polls"],query:{...(0,e.createBroadcasterQuery)(g),...(0,o.createPaginationQuery)(_)}});return(0,s.createPaginatedResult)(p,h.HelixPoll,this._client)}getPollsPaginated(g){return new a.HelixPaginatedRequest({url:"polls",userId:(0,t.extractUserId)(g),scopes:["channel:read:polls","channel:manage:polls"],query:(0,e.createBroadcasterQuery)(g)},this._client,_=>new h.HelixPoll(_,this._client),20)}async getPollsByIds(g,_){return _.length?(await this._client.callApi({type:"helix",url:"polls",userId:(0,t.extractUserId)(g),scopes:["channel:read:polls","channel:manage:polls"],query:(0,r.createGetByIdsQuery)(g,_)})).data.map(l=>new h.HelixPoll(l,this._client)):[]}async getPollById(g,_){const p=await this.getPollsByIds(g,[_]);return p.length?p[0]:null}async createPoll(g,_){const p=await this._client.callApi({type:"helix",url:"polls",method:"POST",userId:(0,t.extractUserId)(g),scopes:["channel:manage:polls"],jsonBody:(0,i.createPollBody)(g,_)});return new h.HelixPoll(p.data[0],this._client)}async endPoll(g,_,p=!0){const l=await this._client.callApi({type:"helix",url:"polls",method:"PATCH",userId:(0,t.extractUserId)(g),scopes:["channel:manage:polls"],jsonBody:(0,i.createPollEndBody)(g,_,p)});return new h.HelixPoll(l.data[0],this._client)}};return Dn.HelixPollApi=m,Dn.HelixPollApi=m=n.__decorate([(0,t.rtfm)("api","HelixPollApi")],m),Dn}var Un={},Vt={},I_;function KS(){if(I_)return Vt;I_=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.createEndPredictionBody=Vt.createPredictionBody=void 0;const n=q();function e(r,i){return{broadcaster_id:(0,n.extractUserId)(r),title:i.title,outcomes:i.outcomes.map(a=>({title:a})),prediction_window:i.autoLockAfter}}Vt.createPredictionBody=e;function t(r,i,a,s){return{broadcaster_id:(0,n.extractUserId)(r),id:i,status:a,winning_outcome_id:s}}return Vt.createEndPredictionBody=t,Vt}var qn={},kn={},Mn={},P_;function Bb(){if(P_)return Mn;P_=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.HelixPredictor=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return await this._client.users.getUserById(this[t.rawDataSymbol].user_id)}get channelPointsUsed(){return this[t.rawDataSymbol].channel_points_used}get channelPointsWon(){return this[t.rawDataSymbol].channel_points_won}};return Mn.HelixPredictor=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Mn.HelixPredictor=r=n.__decorate([(0,t.rtfm)("api","HelixPredictor","userId")],r),Mn}var D_;function Ob(){if(D_)return kn;D_=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.HelixPredictionOutcome=void 0;const n=M,e=W(),t=q(),r=Bb();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[t.rawDataSymbol].id}get title(){return this[t.rawDataSymbol].title}get users(){return this[t.rawDataSymbol].users}get totalChannelPoints(){return this[t.rawDataSymbol].channel_points}get color(){return this[t.rawDataSymbol].color}get topPredictors(){var s,o;return(o=(s=this[t.rawDataSymbol].top_predictors)===null||s===void 0?void 0:s.map(u=>new r.HelixPredictor(u,this._client)))!==null&&o!==void 0?o:[]}};return kn.HelixPredictionOutcome=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),kn.HelixPredictionOutcome=i=n.__decorate([(0,t.rtfm)("api","HelixPredictionOutcome","id")],i),kn}var B_;function Ub(){if(B_)return qn;B_=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.HelixPrediction=void 0;const n=M,e=W(),t=q(),r=Ob();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get title(){return this[t.rawDataSymbol].title}get status(){return this[t.rawDataSymbol].status}get autoLockAfter(){return this[t.rawDataSymbol].prediction_window}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get endDate(){return this[t.rawDataSymbol].ended_at?new Date(this[t.rawDataSymbol].ended_at):null}get lockDate(){return this[t.rawDataSymbol].locked_at?new Date(this[t.rawDataSymbol].locked_at):null}get outcomes(){return this[t.rawDataSymbol].outcomes.map(s=>new r.HelixPredictionOutcome(s,this._client))}get winningOutcomeId(){return this[t.rawDataSymbol].winning_outcome_id||null}get winningOutcome(){if(!this[t.rawDataSymbol].winning_outcome_id)return null;const s=this[t.rawDataSymbol].outcomes.find(o=>o.id===this[t.rawDataSymbol].winning_outcome_id);if(!s)throw new t.HellFreezesOverError("Winning outcome not found in outcomes array");return new r.HelixPredictionOutcome(s,this._client)}};return qn.HelixPrediction=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),qn.HelixPrediction=i=n.__decorate([(0,t.rtfm)("api","HelixPrediction","id")],i),qn}var O_;function qb(){if(O_)return Un;O_=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.HelixPredictionApi=void 0;const n=M,e=Ae(),t=q(),r=et(),i=KS(),a=ke(),s=Fe(),o=Me(),u=ve(),h=Ub();let m=class extends u.BaseApi{async getPredictions(g,_){const p=await this._client.callApi({type:"helix",url:"predictions",userId:(0,t.extractUserId)(g),scopes:["channel:read:predictions"],query:{...(0,e.createBroadcasterQuery)(g),...(0,o.createPaginationQuery)(_)}});return(0,s.createPaginatedResult)(p,h.HelixPrediction,this._client)}getPredictionsPaginated(g){return new a.HelixPaginatedRequest({url:"predictions",userId:(0,t.extractUserId)(g),scopes:["channel:read:predictions"],query:(0,e.createBroadcasterQuery)(g)},this._client,_=>new h.HelixPrediction(_,this._client),20)}async getPredictionsByIds(g,_){return _.length?(await this._client.callApi({type:"helix",url:"predictions",userId:(0,t.extractUserId)(g),scopes:["channel:read:predictions"],query:(0,r.createGetByIdsQuery)(g,_)})).data.map(l=>new h.HelixPrediction(l,this._client)):[]}async getPredictionById(g,_){const p=await this.getPredictionsByIds(g,[_]);return p.length?p[0]:null}async createPrediction(g,_){const p=await this._client.callApi({type:"helix",url:"predictions",method:"POST",userId:(0,t.extractUserId)(g),scopes:["channel:manage:predictions"],jsonBody:(0,i.createPredictionBody)(g,_)});return new h.HelixPrediction(p.data[0],this._client)}async lockPrediction(g,_){return await this._endPrediction(g,_,"LOCKED")}async resolvePrediction(g,_,p){return await this._endPrediction(g,_,"RESOLVED",p)}async cancelPrediction(g,_){return await this._endPrediction(g,_,"CANCELED")}async _endPrediction(g,_,p,l){const d=await this._client.callApi({type:"helix",url:"predictions",method:"PATCH",userId:(0,t.extractUserId)(g),scopes:["channel:manage:predictions"],jsonBody:(0,i.createEndPredictionBody)(g,_,p,l)});return new h.HelixPrediction(d.data[0],this._client)}};return Un.HelixPredictionApi=m,Un.HelixPredictionApi=m=n.__decorate([(0,t.rtfm)("api","HelixPredictionApi")],m),Un}var jn={},ss={},U_;function XS(){if(U_)return ss;U_=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.createRaidStartQuery=void 0;const n=q();function e(t,r){return{from_broadcaster_id:(0,n.extractUserId)(t),to_broadcaster_id:(0,n.extractUserId)(r)}}return ss.createRaidStartQuery=e,ss}var Ln={},q_;function kb(){if(q_)return Ln;q_=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.HelixRaid=void 0;const n=M,e=q();let t=class extends e.DataObject{get creationDate(){return new Date(this[e.rawDataSymbol].created_at)}get targetIsMature(){return this[e.rawDataSymbol].is_mature}};return Ln.HelixRaid=t,Ln.HelixRaid=t=n.__decorate([(0,e.rtfm)("api","HelixRaid")],t),Ln}var k_;function Mb(){if(k_)return jn;k_=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.HelixRaidApi=void 0;const n=M,e=Ae(),t=q(),r=XS(),i=ve(),a=kb();let s=class extends i.BaseApi{async startRaid(u,h){const m=await this._client.callApi({type:"helix",url:"raids",method:"POST",userId:(0,t.extractUserId)(u),scopes:["channel:manage:raids"],query:(0,r.createRaidStartQuery)(u,h)});return new a.HelixRaid(m.data[0])}async cancelRaid(u){await this._client.callApi({type:"helix",url:"raids",method:"DELETE",userId:(0,t.extractUserId)(u),scopes:["channel:manage:raids"],query:(0,e.createBroadcasterQuery)(u)})}};return jn.HelixRaidApi=s,jn.HelixRaidApi=s=n.__decorate([(0,t.rtfm)("api","HelixRaidApi")],s),jn}var os={},Ke={},M_;function jb(){if(M_)return Ke;M_=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.createScheduleSegmentUpdateBody=Ke.createScheduleSegmentModifyQuery=Ke.createScheduleSegmentBody=Ke.createScheduleSettingsUpdateQuery=Ke.createScheduleQuery=void 0;const n=q();function e(s,o){var u;return{broadcaster_id:(0,n.extractUserId)(s),start_time:o==null?void 0:o.startDate,utc_offset:(u=o==null?void 0:o.utcOffset)===null||u===void 0?void 0:u.toString()}}Ke.createScheduleQuery=e;function t(s,o){return o.vacation?{broadcaster_id:(0,n.extractUserId)(s),is_vacation_enabled:"true",vacation_start_time:o.vacation.startDate,vacation_end_time:o.vacation.endDate,timezone:o.vacation.timezone}:{broadcaster_id:(0,n.extractUserId)(s),is_vacation_enabled:"false"}}Ke.createScheduleSettingsUpdateQuery=t;function r(s){return{start_time:s.startDate,timezone:s.timezone,is_recurring:s.isRecurring,duration:s.duration,category_id:s.categoryId,title:s.title}}Ke.createScheduleSegmentBody=r;function i(s,o){return{broadcaster_id:(0,n.extractUserId)(s),id:o}}Ke.createScheduleSegmentModifyQuery=i;function a(s){return{start_time:s.startDate,timezone:s.timezone,is_canceled:s.isCanceled,duration:s.duration,category_id:s.categoryId,title:s.title}}return Ke.createScheduleSegmentUpdateBody=a,Ke}var Nn={},Fn={},j_;function Hl(){if(j_)return Fn;j_=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.HelixScheduleSegment=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get startDate(){return new Date(this[t.rawDataSymbol].start_time)}get endDate(){return new Date(this[t.rawDataSymbol].end_time)}get title(){return this[t.rawDataSymbol].title}get cancelEndDate(){return(0,e.mapNullable)(this[t.rawDataSymbol].canceled_until,a=>new Date(a))}get categoryId(){var a,s;return(s=(a=this[t.rawDataSymbol].category)===null||a===void 0?void 0:a.id)!==null&&s!==void 0?s:null}get categoryName(){var a,s;return(s=(a=this[t.rawDataSymbol].category)===null||a===void 0?void 0:a.name)!==null&&s!==void 0?s:null}async getCategory(){var a;const s=(a=this[t.rawDataSymbol].category)===null||a===void 0?void 0:a.id;return s?await this._client.games.getGameById(s):null}get isRecurring(){return this[t.rawDataSymbol].is_recurring}};return Fn.HelixScheduleSegment=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Fn.HelixScheduleSegment=r=n.__decorate([(0,t.rtfm)("api","HelixScheduleSegment","id")],r),Fn}var L_;function Lb(){if(L_)return Nn;L_=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.HelixPaginatedScheduleSegmentRequest=void 0;const n=M,e=q(),t=jb(),r=ke(),i=Hl();let a=class extends r.HelixPaginatedRequest{constructor(o,u,h){super({url:"schedule",query:(0,t.createScheduleQuery)(o,h)},u,m=>new i.HelixScheduleSegment(m,u),25)}async _fetchData(o={}){var u;const h=await super._fetchData(o);return{data:(u=h.data.segments)!==null&&u!==void 0?u:[],pagination:h.pagination}}};return Nn.HelixPaginatedScheduleSegmentRequest=a,Nn.HelixPaginatedScheduleSegmentRequest=a=n.__decorate([(0,e.rtfm)("api","HelixPaginatedScheduleSegmentRequest")],a),Nn}var $n={},N_;function Nb(){if(N_)return $n;N_=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.HelixSchedule=void 0;const n=M,e=W(),t=q(),r=Hl();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get segments(){var s,o;return(o=(s=this[t.rawDataSymbol].segments)===null||s===void 0?void 0:s.map(u=>new r.HelixScheduleSegment(u,this._client)))!==null&&o!==void 0?o:[]}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get vacationStartDate(){var s;const o=(s=this[t.rawDataSymbol].vacation)===null||s===void 0?void 0:s.start_time;return o?new Date(o):null}get vacationEndDate(){var s;const o=(s=this[t.rawDataSymbol].vacation)===null||s===void 0?void 0:s.end_time;return o?new Date(o):null}};return $n.HelixSchedule=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),$n.HelixSchedule=i=n.__decorate([(0,t.rtfm)("api","HelixSchedule","broadcasterId")],i),$n}var F_;function Fb(){if(F_)return os;F_=1,Object.defineProperty(os,"__esModule",{value:!0}),os.HelixScheduleApi=void 0;const n=Ae(),e=q(),t=et(),r=jb(),i=Me(),a=ve(),s=Lb(),o=Nb(),u=Hl();class h extends a.BaseApi{async getSchedule(w,g){const _=await this._client.callApi({type:"helix",url:"schedule",userId:(0,e.extractUserId)(w),query:{...(0,r.createScheduleQuery)(w,g),...(0,i.createPaginationQuery)(g)}});return{data:new o.HelixSchedule(_.data,this._client),cursor:_.pagination.cursor}}getScheduleSegmentsPaginated(w,g){return new s.HelixPaginatedScheduleSegmentRequest(w,this._client,g)}async getScheduleSegmentsByIds(w,g){var _,p;return(p=(_=(await this._client.callApi({type:"helix",url:"schedule",userId:(0,e.extractUserId)(w),query:(0,t.createGetByIdsQuery)(w,g)})).data.segments)===null||_===void 0?void 0:_.map(d=>new u.HelixScheduleSegment(d,this._client)))!==null&&p!==void 0?p:[]}async getScheduleSegmentById(w,g){const _=await this.getScheduleSegmentsByIds(w,[g]);return _.length?_[0]:null}async getScheduleAsIcal(w){return await this._client.callApi({type:"helix",url:"schedule/icalendar",query:(0,n.createBroadcasterQuery)(w)})}async updateScheduleSettings(w,g){await this._client.callApi({type:"helix",url:"schedule/settings",method:"PATCH",userId:(0,e.extractUserId)(w),scopes:["channel:manage:schedule"],query:(0,r.createScheduleSettingsUpdateQuery)(w,g)})}async createScheduleSegment(w,g){const _=await this._client.callApi({type:"helix",url:"schedule/segment",method:"POST",userId:(0,e.extractUserId)(w),scopes:["channel:manage:schedule"],query:(0,n.createBroadcasterQuery)(w),jsonBody:(0,r.createScheduleSegmentBody)(g)});return new u.HelixScheduleSegment(_.data.segments[0],this._client)}async updateScheduleSegment(w,g,_){const p=await this._client.callApi({type:"helix",url:"schedule/segment",method:"PATCH",userId:(0,e.extractUserId)(w),scopes:["channel:manage:schedule"],query:(0,r.createScheduleSegmentModifyQuery)(w,g),jsonBody:(0,r.createScheduleSegmentUpdateBody)(_)});return new u.HelixScheduleSegment(p.data.segments[0],this._client)}async deleteScheduleSegment(w,g){await this._client.callApi({type:"helix",url:"schedule/segment",method:"DELETE",userId:(0,e.extractUserId)(w),scopes:["channel:manage:schedule"],query:(0,r.createScheduleSegmentModifyQuery)(w,g)})}}return os.HelixScheduleApi=h,os}var Gn={},ls={},$_;function JS(){if($_)return ls;$_=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.createSearchChannelsQuery=void 0;function n(e,t){var r;return{query:e,live_only:(r=t.liveOnly)===null||r===void 0?void 0:r.toString()}}return ls.createSearchChannelsQuery=n,ls}var Qn={},G_;function $b(){if(G_)return Qn;G_=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.HelixChannelSearchResult=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get language(){return this[t.rawDataSymbol].broadcaster_language}get id(){return this[t.rawDataSymbol].id}get name(){return this[t.rawDataSymbol].broadcaster_login}get displayName(){return this[t.rawDataSymbol].display_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].id))}get gameId(){return this[t.rawDataSymbol].game_id}get gameName(){return this[t.rawDataSymbol].game_name}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get isLive(){return this[t.rawDataSymbol].is_live}get tags(){return this[t.rawDataSymbol].tags}get thumbnailUrl(){return this[t.rawDataSymbol].thumbnail_url}get startDate(){return this[t.rawDataSymbol].is_live?new Date(this[t.rawDataSymbol].started_at):null}};return Qn.HelixChannelSearchResult=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Qn.HelixChannelSearchResult=r=n.__decorate([(0,t.rtfm)("api","HelixChannelSearchResult","id")],r),Qn}var Q_;function Gb(){if(Q_)return Gn;Q_=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.HelixSearchApi=void 0;const n=M,e=q(),t=JS(),r=ke(),i=Fe(),a=Me(),s=ve(),o=_d(),u=$b();let h=class extends s.BaseApi{async searchCategories(w,g){const _=await this._client.callApi({type:"helix",url:"search/categories",query:{query:w,...(0,a.createPaginationQuery)(g)}});return(0,i.createPaginatedResult)(_,o.HelixGame,this._client)}searchCategoriesPaginated(w){return new r.HelixPaginatedRequest({url:"search/categories",query:{query:w}},this._client,g=>new o.HelixGame(g,this._client))}async searchChannels(w,g={}){const _=await this._client.callApi({type:"helix",url:"search/channels",query:{...(0,t.createSearchChannelsQuery)(w,g),...(0,a.createPaginationQuery)(g)}});return(0,i.createPaginatedResult)(_,u.HelixChannelSearchResult,this._client)}searchChannelsPaginated(w,g={}){return new r.HelixPaginatedRequest({url:"search/channels",query:(0,t.createSearchChannelsQuery)(w,g)},this._client,_=>new u.HelixChannelSearchResult(_,this._client))}};return Gn.HelixSearchApi=h,Gn.HelixSearchApi=h=n.__decorate([(0,e.rtfm)("api","HelixSearchApi")],h),Gn}var Wn={},us={},W_;function Qb(){if(W_)return us;W_=1,Object.defineProperty(us,"__esModule",{value:!0}),us.StreamNotLiveError=void 0;const n=q();class e extends n.CustomError{constructor(r){super("Your stream needs to be live to do this",r)}}return us.StreamNotLiveError=e,us}var yt={},V_;function YS(){if(V_)return yt;V_=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.createVideoQuery=yt.createStreamMarkerBody=yt.createStreamQuery=void 0;const n=q();function e(i){return{game_id:i.game,language:i.language,type:i.type,user_id:i.userId,user_login:i.userName}}yt.createStreamQuery=e;function t(i,a){return{user_id:(0,n.extractUserId)(i),description:a}}yt.createStreamMarkerBody=t;function r(i){return{video_id:i}}return yt.createVideoQuery=r,yt}var Vn={},z_;function Wb(){if(z_)return Vn;z_=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.HelixStream=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get gameId(){return this[t.rawDataSymbol].game_id}get gameName(){return this[t.rawDataSymbol].game_name}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get type(){return this[t.rawDataSymbol].type}get title(){return this[t.rawDataSymbol].title}get viewers(){return this[t.rawDataSymbol].viewer_count}get startDate(){return new Date(this[t.rawDataSymbol].started_at)}get language(){return this[t.rawDataSymbol].language}get thumbnailUrl(){return this[t.rawDataSymbol].thumbnail_url}getThumbnailUrl(a,s){return this[t.rawDataSymbol].thumbnail_url.replace("{width}",a.toString()).replace("{height}",s.toString())}get tags(){return this[t.rawDataSymbol].tags}get isMature(){return this[t.rawDataSymbol].is_mature}};return Vn.HelixStream=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Vn.HelixStream=r=n.__decorate([(0,t.rtfm)("api","HelixStream","id")],r),Vn}var zn={},K_;function fd(){if(K_)return zn;K_=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.HelixStreamMarker=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get description(){return this[t.rawDataSymbol].description}get positionInSeconds(){return this[t.rawDataSymbol].position_seconds}};return zn.HelixStreamMarker=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),zn.HelixStreamMarker=r=n.__decorate([(0,t.rtfm)("api","HelixStreamMarker","id")],r),zn}var Kn={},X_;function Vb(){if(X_)return Kn;X_=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.HelixStreamMarkerWithVideo=void 0;const n=M,e=q(),t=fd();let r=class extends t.HelixStreamMarker{constructor(a,s,o){super(a,o),this._videoId=s}get url(){return this[e.rawDataSymbol].URL}get videoId(){return this._videoId}async getVideo(){return(0,e.checkRelationAssertion)(await this._client.videos.getVideoById(this._videoId))}};return Kn.HelixStreamMarkerWithVideo=r,Kn.HelixStreamMarkerWithVideo=r=n.__decorate([(0,e.rtfm)("api","HelixStreamMarkerWithVideo","id")],r),Kn}var J_;function zb(){if(J_)return Wn;J_=1;var n;Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.HelixStreamApi=void 0;const e=M,t=W(),r=Ae(),i=q(),a=Qb(),s=et(),o=YS(),u=sr(),h=ke(),m=Fe(),w=Me(),g=ve(),_=Wb(),p=fd(),l=Vb();let d=n=class extends g.BaseApi{constructor(){super(...arguments),this._getStreamByUserIdBatcher=new u.HelixRequestBatcher({url:"streams"},"user_id","user_id",this._client,x=>new _.HelixStream(x,this._client)),this._getStreamByUserNameBatcher=new u.HelixRequestBatcher({url:"streams"},"user_login","user_login",this._client,x=>new _.HelixStream(x,this._client))}async getStreams(x={}){const A=await this._client.callApi({url:"streams",type:"helix",query:{...(0,o.createStreamQuery)(x),...(0,w.createPaginationQuery)(x)}});return(0,m.createPaginatedResult)(A,_.HelixStream,this._client)}getStreamsPaginated(x={}){return new h.HelixPaginatedRequest({url:"streams",query:(0,o.createStreamQuery)(x)},this._client,A=>new _.HelixStream(A,this._client))}async getStreamsByUserNames(x){return(await this.getStreams({userName:x.map(i.extractUserName)})).data}async getStreamByUserName(x){var A;return(A=(await this.getStreamsByUserNames([x]))[0])!==null&&A!==void 0?A:null}async getStreamByUserNameBatched(x){return await this._getStreamByUserNameBatcher.request((0,i.extractUserName)(x))}async getStreamsByUserIds(x){return(await this.getStreams({userId:x.map(i.extractUserId)})).data}async getStreamByUserId(x){const A=(0,i.extractUserId)(x),I=await this._client.callApi({url:"streams",type:"helix",userId:A,query:(0,o.createStreamQuery)({userId:A})});return(0,t.mapNullable)(I.data[0],y=>new _.HelixStream(y,this._client))}async getStreamByUserIdBatched(x){return await this._getStreamByUserIdBatcher.request((0,i.extractUserId)(x))}async getStreamMarkersForUser(x,A){var I;const y=await this._client.callApi({url:"streams/markers",type:"helix",query:{...(0,s.createUserQuery)(x),...(0,w.createPaginationQuery)(A)},userId:(0,i.extractUserId)(x),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:(0,t.flatten)(y.data.map(H=>n._mapGetStreamMarkersResult(H,this._client))),cursor:(I=y.pagination)===null||I===void 0?void 0:I.cursor}}getStreamMarkersForUserPaginated(x){return new h.HelixPaginatedRequest({url:"streams/markers",query:(0,s.createUserQuery)(x),userId:(0,i.extractUserId)(x),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,A=>n._mapGetStreamMarkersResult(A,this._client))}async getStreamMarkersForVideo(x,A,I){var y;const H=await this._client.callApi({url:"streams/markers",type:"helix",query:{...(0,o.createVideoQuery)(A),...(0,w.createPaginationQuery)(I)},userId:(0,i.extractUserId)(x),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:(0,t.flatten)(H.data.map(E=>n._mapGetStreamMarkersResult(E,this._client))),cursor:(y=H.pagination)===null||y===void 0?void 0:y.cursor}}getStreamMarkersForVideoPaginated(x,A){return new h.HelixPaginatedRequest({url:"streams/markers",query:(0,o.createVideoQuery)(A),userId:(0,i.extractUserId)(x),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,I=>n._mapGetStreamMarkersResult(I,this._client))}async createStreamMarker(x,A){try{const I=await this._client.callApi({url:"streams/markers",method:"POST",type:"helix",userId:(0,i.extractUserId)(x),scopes:["channel:manage:broadcast"],canOverrideScopedUserContext:!0,jsonBody:(0,o.createStreamMarkerBody)(x,A)});return new p.HelixStreamMarker(I.data[0],this._client)}catch(I){throw I instanceof r.HttpStatusCodeError&&I.statusCode===404?new a.StreamNotLiveError({cause:I}):I}}async getStreamKey(x){const A=(0,i.extractUserId)(x);return(await this._client.callApi({type:"helix",url:"streams/key",userId:A,scopes:["channel:read:stream_key"],query:(0,r.createBroadcasterQuery)(x)})).data[0].stream_key}async getFollowedStreams(x,A){const I=(0,i.extractUserId)(x),y=await this._client.callApi({type:"helix",url:"streams/followed",userId:I,scopes:["user:read:follows"],query:{...(0,s.createSingleKeyQuery)("user_id",I),...(0,w.createPaginationQuery)(A)}});return(0,m.createPaginatedResult)(y,_.HelixStream,this._client)}getFollowedStreamsPaginated(x){const A=(0,i.extractUserId)(x);return new h.HelixPaginatedRequest({url:"streams/followed",userId:A,scopes:["user:read:follows"],query:(0,s.createSingleKeyQuery)("user_id",A)},this._client,I=>new _.HelixStream(I,this._client))}static _mapGetStreamMarkersResult(x,A){return x.videos.reduce((I,y)=>[...I,...y.markers.map(H=>new l.HelixStreamMarkerWithVideo(H,y.video_id,A))],[])}};return Wn.HelixStreamApi=d,e.__decorate([(0,t.Enumerable)(!1)],d.prototype,"_getStreamByUserIdBatcher",void 0),e.__decorate([(0,t.Enumerable)(!1)],d.prototype,"_getStreamByUserNameBatcher",void 0),Wn.HelixStreamApi=d=n=e.__decorate([(0,i.rtfm)("api","HelixStreamApi")],d),Wn}var Xn={},cs={},Y_;function ZS(){if(Y_)return cs;Y_=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.createSubscriptionCheckQuery=void 0;const n=q();function e(t,r){return{broadcaster_id:(0,n.extractUserId)(t),user_id:(0,n.extractUserId)(r)}}return cs.createSubscriptionCheckQuery=e,cs}var Jn={},Yn={},Zn={},Z_;function yd(){if(Z_)return Zn;Z_=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.HelixUserSubscription=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id)}get isGift(){return this[t.rawDataSymbol].is_gift}get tier(){return this[t.rawDataSymbol].tier}};return Zn.HelixUserSubscription=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Zn.HelixUserSubscription=r=n.__decorate([(0,t.rtfm)("api","HelixUserSubscription","broadcasterId")],r),Zn}var eg;function bd(){if(eg)return Yn;eg=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.HelixSubscription=void 0;const n=M,e=q(),t=yd();let r=class extends t.HelixUserSubscription{get broadcasterId(){return this[e.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[e.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[e.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,e.checkRelationAssertion)(await this._client.users.getUserById(this[e.rawDataSymbol].broadcaster_id))}get gifterId(){return this[e.rawDataSymbol].is_gift?this[e.rawDataSymbol].gifter_id:null}get gifterName(){return this[e.rawDataSymbol].is_gift?this[e.rawDataSymbol].gifter_login:null}get gifterDisplayName(){return this[e.rawDataSymbol].is_gift?this[e.rawDataSymbol].gifter_name:null}async getGifter(){return this[e.rawDataSymbol].is_gift?(0,e.checkRelationAssertion)(await this._client.users.getUserById(this[e.rawDataSymbol].gifter_id)):null}get userId(){return this[e.rawDataSymbol].user_id}get userName(){return this[e.rawDataSymbol].user_login}get userDisplayName(){return this[e.rawDataSymbol].user_name}async getUser(){return(0,e.checkRelationAssertion)(await this._client.users.getUserById(this[e.rawDataSymbol].user_id))}};return Yn.HelixSubscription=r,Yn.HelixSubscription=r=n.__decorate([(0,e.rtfm)("api","HelixSubscription","userId")],r),Yn}var tg;function Kb(){if(tg)return Jn;tg=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.HelixPaginatedSubscriptionsRequest=void 0;const n=M,e=Ae(),t=q(),r=eo(),i=bd();let a=class extends r.HelixPaginatedRequestWithTotal{constructor(o,u){super({url:"subscriptions",scopes:["channel:read:subscriptions"],userId:(0,t.extractUserId)(o),query:(0,e.createBroadcasterQuery)(o)},u,h=>new i.HelixSubscription(h,u))}async getPoints(){var o;return((o=this._currentData)!==null&&o!==void 0?o:await this._fetchData({query:{after:void 0}})).points}};return Jn.HelixPaginatedSubscriptionsRequest=a,Jn.HelixPaginatedSubscriptionsRequest=a=n.__decorate([(0,t.rtfm)("api","HelixPaginatedSubscriptionsRequest")],a),Jn}var rg;function Xb(){if(rg)return Xn;rg=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.HelixSubscriptionApi=void 0;const n=M,e=Ae(),t=q(),r=et(),i=ZS(),a=Fe(),s=Me(),o=ve(),u=Kb(),h=bd(),m=yd();let w=class extends o.BaseApi{async getSubscriptions(_,p){const l=await this._client.callApi({url:"subscriptions",scopes:["channel:read:subscriptions"],type:"helix",userId:(0,t.extractUserId)(_),query:{...(0,e.createBroadcasterQuery)(_),...(0,s.createPaginationQuery)(p)}});return{...(0,a.createPaginatedResultWithTotal)(l,h.HelixSubscription,this._client),points:l.points}}getSubscriptionsPaginated(_){return new u.HelixPaginatedSubscriptionsRequest(_,this._client)}async getSubscriptionsForUsers(_,p){return(await this._client.callApi({type:"helix",url:"subscriptions",userId:(0,t.extractUserId)(_),scopes:["channel:read:subscriptions"],query:(0,r.createChannelUsersCheckQuery)(_,p)})).data.map(d=>new h.HelixSubscription(d,this._client))}async getSubscriptionForUser(_,p){const l=await this.getSubscriptionsForUsers(_,[p]);return l.length?l[0]:null}async checkUserSubscription(_,p){try{const l=await this._client.callApi({type:"helix",url:"subscriptions/user",userId:(0,t.extractUserId)(_),scopes:["user:read:subscriptions"],query:(0,i.createSubscriptionCheckQuery)(p,_)});return new m.HelixUserSubscription(l.data[0],this._client)}catch(l){if(l instanceof e.HttpStatusCodeError&&l.statusCode===404)return null;throw l}}};return Xn.HelixSubscriptionApi=w,Xn.HelixSubscriptionApi=w=n.__decorate([(0,t.rtfm)("api","HelixSubscriptionApi")],w),Xn}var ei={},ti={},ng;function vd(){if(ng)return ti;ng=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.HelixTeam=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get name(){return this[t.rawDataSymbol].team_name}get displayName(){return this[t.rawDataSymbol].team_display_name}get backgroundImageUrl(){return this[t.rawDataSymbol].background_image_url}get bannerUrl(){return this[t.rawDataSymbol].banner}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get updateDate(){return new Date(this[t.rawDataSymbol].updated_at)}get info(){return this[t.rawDataSymbol].info}get logoThumbnailUrl(){return this[t.rawDataSymbol].thumbnail_url}async getUserRelations(){return(await this._client.teams.getTeamById(this.id)).userRelations}};return ti.HelixTeam=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),ti.HelixTeam=r=n.__decorate([(0,t.rtfm)("api","HelixTeam","id")],r),ti}var ri={},ig;function Jb(){if(ig)return ri;ig=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.HelixTeamWithUsers=void 0;const n=M,e=q(),t=dd(),r=vd();let i=class extends r.HelixTeam{get userRelations(){return this[e.rawDataSymbol].users.map(s=>new t.HelixUserRelation(s,this._client))}};return ri.HelixTeamWithUsers=i,ri.HelixTeamWithUsers=i=n.__decorate([(0,e.rtfm)("api","HelixTeamWithUsers","id")],i),ri}var ag;function Yb(){if(ag)return ei;ag=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.HelixTeamApi=void 0;const n=M,e=Ae(),t=q(),r=ve(),i=vd(),a=Jb();let s=class extends r.BaseApi{async getTeamsForBroadcaster(u){var h,m;return(m=(h=(await this._client.callApi({type:"helix",url:"teams/channel",userId:(0,t.extractUserId)(u),query:(0,e.createBroadcasterQuery)(u)})).data)===null||h===void 0?void 0:h.map(g=>new i.HelixTeam(g,this._client)))!==null&&m!==void 0?m:[]}async getTeamById(u){try{const h=await this._client.callApi({type:"helix",url:"teams",query:{id:u}});return new a.HelixTeamWithUsers(h.data[0],this._client)}catch(h){if(h instanceof e.HttpStatusCodeError&&h.statusCode===500)return null;throw h}}async getTeamByName(u){try{const h=await this._client.callApi({type:"helix",url:"teams",query:{name:u}});return new a.HelixTeamWithUsers(h.data[0],this._client)}catch(h){if(h instanceof e.HttpStatusCodeError&&h.statusCode===404)return null;throw h}}};return ei.HelixTeamApi=s,ei.HelixTeamApi=s=n.__decorate([(0,t.rtfm)("api","HelixTeamApi")],s),ei}var ni={},zt={},sg;function e0(){if(sg)return zt;sg=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.createUserBlockDeleteQuery=zt.createUserBlockCreateQuery=void 0;const n=q();function e(r,i){return{target_user_id:(0,n.extractUserId)(r),source_context:i.sourceContext,reason:i.reason}}zt.createUserBlockCreateQuery=e;function t(r){return{target_user_id:(0,n.extractUserId)(r)}}return zt.createUserBlockDeleteQuery=t,zt}var ii={},ai={},ds={},og;function wd(){if(og)return ds;og=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.HelixBaseExtension=void 0;const n=q();class e extends n.DataObject{get id(){return this[n.rawDataSymbol].id}get version(){return this[n.rawDataSymbol].version}get name(){return this[n.rawDataSymbol].name}}return ds.HelixBaseExtension=e,ds}var lg;function Zb(){if(lg)return ai;lg=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.HelixInstalledExtension=void 0;const n=M,e=q(),t=wd();let r=class extends t.HelixBaseExtension{constructor(a,s,o){super(o),this._slotType=a,this._slotId=s}get slotType(){return this._slotType}get slotId(){return this._slotId}};return ai.HelixInstalledExtension=r,ai.HelixInstalledExtension=r=n.__decorate([(0,e.rtfm)("api","HelixInstalledExtension","id")],r),ai}var ug;function ev(){if(ug)return ii;ug=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.HelixInstalledExtensionList=void 0;const n=M,e=q(),t=Zb();let r=class extends e.DataObject{getExtensionAtSlot(a,s){const o=this[e.rawDataSymbol][a][s];return o.active?new t.HelixInstalledExtension(a,s,o):null}getExtensionsForSlotType(a){return[...Object.entries(this[e.rawDataSymbol][a])].filter(s=>s[1].active).map(([s,o])=>new t.HelixInstalledExtension(a,s,o))}getAllExtensions(){return[...Object.entries(this[e.rawDataSymbol])].flatMap(([a,s])=>[...Object.entries(s)].filter(o=>o[1].active).map(([o,u])=>new t.HelixInstalledExtension(a,o,u)))}};return ii.HelixInstalledExtensionList=r,ii.HelixInstalledExtensionList=r=n.__decorate([(0,e.rtfm)("api","HelixInstalledExtensionList")],r),ii}var si={},cg;function tv(){if(cg)return si;cg=1,Object.defineProperty(si,"__esModule",{value:!0}),si.HelixUserExtension=void 0;const n=M,e=q(),t=wd();let r=class extends t.HelixBaseExtension{get canActivate(){return this[e.rawDataSymbol].can_activate}get types(){return this[e.rawDataSymbol].type}};return si.HelixUserExtension=r,si.HelixUserExtension=r=n.__decorate([(0,e.rtfm)("api","HelixUserExtension","id")],r),si}var oi={},li={},dg;function xd(){if(dg)return li;dg=1,Object.defineProperty(li,"__esModule",{value:!0}),li.HelixUser=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get name(){return this[t.rawDataSymbol].login}get displayName(){return this[t.rawDataSymbol].display_name}get description(){return this[t.rawDataSymbol].description}get type(){return this[t.rawDataSymbol].type}get broadcasterType(){return this[t.rawDataSymbol].broadcaster_type}get profilePictureUrl(){return this[t.rawDataSymbol].profile_image_url}get offlinePlaceholderUrl(){return this[t.rawDataSymbol].offline_image_url}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}async getStream(){return await this._client.streams.getStreamByUserId(this)}async getFollowedChannels(){return await this._client.channels.getFollowedChannels(this)}async getFollowedChannel(a){var s;return(s=(await this._client.channels.getFollowedChannels(this,a)).data[0])!==null&&s!==void 0?s:null}async follows(a){return await this.getFollowedChannel(a)!==null}async getChannelFollowers(){return await this._client.channels.getChannelFollowers(this)}async getChannelFollower(a){var s;return(s=(await this._client.channels.getChannelFollowers(this,a)).data[0])!==null&&s!==void 0?s:null}async isFollowedBy(a){return await this.getChannelFollower(a)!==null}async getSubscriptionTo(a){return await this._client.subscriptions.checkUserSubscription(this,a)}async isSubscribedTo(a){return await this.getSubscriptionTo(a)!==null}async getSubscriber(a){return await this._client.subscriptions.getSubscriptionForUser(this,a)}async hasSubscriber(a){return await this.getSubscriber(a)!==null}};return li.HelixUser=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),li.HelixUser=r=n.__decorate([(0,t.rtfm)("api","HelixUser","id")],r),li}var hg;function rv(){if(hg)return oi;hg=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.HelixPrivilegedUser=void 0;const n=M,e=q(),t=xd();let r=class extends t.HelixUser{get email(){return this[e.rawDataSymbol].email}async setDescription(a){return await this._client.users.updateAuthenticatedUser(this,{description:a})}};return oi.HelixPrivilegedUser=r,oi.HelixPrivilegedUser=r=n.__decorate([(0,e.rtfm)("api","HelixPrivilegedUser","id")],r),oi}var ui={},pg;function nv(){if(pg)return ui;pg=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.HelixUserBlock=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].display_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return ui.HelixUserBlock=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),ui.HelixUserBlock=r=n.__decorate([(0,t.rtfm)("api","HelixUserBlock","userId")],r),ui}var mg;function iv(){if(mg)return ni;mg=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.HelixUserApi=void 0;const n=M,e=W(),t=Ae(),r=q(),i=et(),a=e0(),s=sr(),o=ke(),u=Fe(),h=Me(),m=ve(),w=ev(),g=tv(),_=rv(),p=xd(),l=nv();let d=class extends m.BaseApi{constructor(){super(...arguments),this._getUserByIdBatcher=new s.HelixRequestBatcher({url:"users"},"id","id",this._client,x=>new p.HelixUser(x,this._client)),this._getUserByNameBatcher=new s.HelixRequestBatcher({url:"users"},"login","login",this._client,x=>new p.HelixUser(x,this._client))}async getUsersByIds(x){return await this._getUsers("id",x.map(r.extractUserId))}async getUsersByNames(x){return await this._getUsers("login",x.map(r.extractUserName))}async getUserById(x){const A=(0,r.extractUserId)(x),I=await this._client.callApi({type:"helix",url:"users",userId:A,query:{id:A}});return(0,e.mapNullable)(I.data[0],y=>new p.HelixUser(y,this._client))}async getUserByIdBatched(x){return await this._getUserByIdBatcher.request((0,r.extractUserId)(x))}async getUserByName(x){const A=await this._getUsers("login",[(0,r.extractUserName)(x)]);return A.length?A[0]:null}async getUserByNameBatched(x){return await this._getUserByNameBatcher.request((0,r.extractUserName)(x))}async getAuthenticatedUser(x,A=!1){var I;const y=await this._client.callApi({type:"helix",url:"users",forceType:"user",userId:(0,r.extractUserId)(x),scopes:A?["user:read:email"]:void 0});if(!(!((I=y.data)===null||I===void 0)&&I.length))throw new r.HellFreezesOverError("Could not get authenticated user");return new _.HelixPrivilegedUser(y.data[0],this._client)}async updateAuthenticatedUser(x,A){const I=await this._client.callApi({type:"helix",url:"users",method:"PUT",userId:(0,r.extractUserId)(x),scopes:["user:edit"],query:{description:A.description}});return new _.HelixPrivilegedUser(I.data[0],this._client)}async getBlocks(x,A){const I=await this._client.callApi({type:"helix",url:"users/blocks",userId:(0,r.extractUserId)(x),scopes:["user:read:blocked_users"],query:{...(0,t.createBroadcasterQuery)(x),...(0,h.createPaginationQuery)(A)}});return(0,u.createPaginatedResult)(I,l.HelixUserBlock,this._client)}getBlocksPaginated(x){return new o.HelixPaginatedRequest({url:"users/blocks",userId:(0,r.extractUserId)(x),scopes:["user:read:blocked_users"],query:(0,t.createBroadcasterQuery)(x)},this._client,A=>new l.HelixUserBlock(A,this._client))}async createBlock(x,A,I={}){await this._client.callApi({type:"helix",url:"users/blocks",method:"PUT",userId:(0,r.extractUserId)(x),scopes:["user:manage:blocked_users"],query:(0,a.createUserBlockCreateQuery)(A,I)})}async deleteBlock(x,A){await this._client.callApi({type:"helix",url:"users/blocks",method:"DELETE",userId:(0,r.extractUserId)(x),scopes:["user:manage:blocked_users"],query:(0,a.createUserBlockDeleteQuery)(A)})}async getExtensionsForAuthenticatedUser(x,A=!1){return(await this._client.callApi({type:"helix",url:"users/extensions/list",userId:(0,r.extractUserId)(x),scopes:A?["channel:manage:extensions"]:["user:read:broadcast","channel:manage:extensions"]})).data.map(y=>new g.HelixUserExtension(y))}async getActiveExtensions(x,A=!1){const I=(0,r.extractUserId)(x),y=await this._client.callApi({type:"helix",url:"users/extensions",userId:I,scopes:A?["user:read:broadcast","channel:manage:extensions"]:void 0,query:(0,i.createSingleKeyQuery)("user_id",I)});return new w.HelixInstalledExtensionList(y.data)}async updateActiveExtensionsForAuthenticatedUser(x,A){const I=await this._client.callApi({type:"helix",url:"users/extensions",method:"PUT",userId:(0,r.extractUserId)(x),scopes:["channel:manage:extensions"],jsonBody:{data:A}});return new w.HelixInstalledExtensionList(I.data)}async _getUsers(x,A){if(A.length===0)return[];const I={[x]:A};return(await this._client.callApi({type:"helix",url:"users",query:I})).data.map(H=>new p.HelixUser(H,this._client))}};return ni.HelixUserApi=d,n.__decorate([(0,e.Enumerable)(!1)],d.prototype,"_getUserByIdBatcher",void 0),n.__decorate([(0,e.Enumerable)(!1)],d.prototype,"_getUserByNameBatcher",void 0),ni.HelixUserApi=d=n.__decorate([(0,r.rtfm)("api","HelixUserApi")],d),ni}var ci={},di={},_g;function av(){if(_g)return di;_g=1,Object.defineProperty(di,"__esModule",{value:!0}),di.HelixVideo=void 0;const n=M,e=Sl(),t=W(),r=q();let i=class extends r.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[r.rawDataSymbol].id}get userId(){return this[r.rawDataSymbol].user_id}get userName(){return this[r.rawDataSymbol].user_login}get userDisplayName(){return this[r.rawDataSymbol].user_name}async getUser(){return(0,r.checkRelationAssertion)(await this._client.users.getUserById(this[r.rawDataSymbol].user_id))}get title(){return this[r.rawDataSymbol].title}get description(){return this[r.rawDataSymbol].description}get creationDate(){return new Date(this[r.rawDataSymbol].created_at)}get publishDate(){return new Date(this[r.rawDataSymbol].published_at)}get url(){return this[r.rawDataSymbol].url}get thumbnailUrl(){return this[r.rawDataSymbol].thumbnail_url}getThumbnailUrl(s,o){return this[r.rawDataSymbol].thumbnail_url.replace("%{width}",s.toString()).replace("%{height}",o.toString())}get isPublic(){return this[r.rawDataSymbol].viewable==="public"}get views(){return this[r.rawDataSymbol].view_count}get language(){return this[r.rawDataSymbol].language}get type(){return this[r.rawDataSymbol].type}get duration(){return this[r.rawDataSymbol].duration}get durationInSeconds(){const s=this[r.rawDataSymbol].duration.match(/\d+[hms]/g);if(!s)throw new r.HellFreezesOverError(`Could not parse duration string: ${this[r.rawDataSymbol].duration}`);return s.map(o=>{const u=/(\d+)([hms])/.exec(o);if(!u)throw new r.HellFreezesOverError(`Could not parse partial duration string: ${o}`);const[,h,m]=u;return parseInt(h,10)*{h:3600,m:60,s:1}[m]}).reduce((o,u)=>o+u)}get streamId(){return this[r.rawDataSymbol].stream_id}get mutedSegmentData(){var s,o;return(o=(s=this[r.rawDataSymbol].muted_segments)===null||s===void 0?void 0:s.slice())!==null&&o!==void 0?o:[]}isMutedAt(s,o,u=!1){if(this[r.rawDataSymbol].muted_segments===null)return!1;if(o==null)return this[r.rawDataSymbol].muted_segments.some(m=>m.offset<=s&&s<=m.offset+m.duration);const h=s+o;return u?this[r.rawDataSymbol].muted_segments.some(m=>{const w=m.offset+m.duration;return s<w&&m.offset<h}):this[r.rawDataSymbol].muted_segments.some(m=>{const w=m.offset+m.duration;return m.offset<=s&&h<=w})}};return di.HelixVideo=i,n.__decorate([(0,t.Enumerable)(!1)],i.prototype,"_client",void 0),n.__decorate([(0,e.CachedGetter)()],i.prototype,"durationInSeconds",null),di.HelixVideo=i=n.__decorate([e.Cacheable,(0,r.rtfm)("api","HelixVideo","id")],i),di}var gg;function sv(){if(gg)return ci;gg=1;var n;Object.defineProperty(ci,"__esModule",{value:!0}),ci.HelixVideoApi=void 0;const e=M,t=W(),r=q(),i=sr(),a=ke(),s=Fe(),o=Me(),u=ve(),h=av();let m=n=class extends u.BaseApi{constructor(){super(...arguments),this._getVideoByIdBatcher=new i.HelixRequestBatcher({url:"videos"},"id","id",this._client,g=>new h.HelixVideo(g,this._client))}async getVideosByIds(g){return(await this._getVideos("id",g)).data}async getVideoById(g){const _=await this.getVideosByIds([g]);return _.length?_[0]:null}async getVideoByIdBatched(g){return await this._getVideoByIdBatcher.request(g)}async getVideosByUser(g,_={}){const p=(0,r.extractUserId)(g);return await this._getVideos("user_id",[p],_)}getVideosByUserPaginated(g,_={}){const p=(0,r.extractUserId)(g);return this._getVideosPaginated("user_id",[p],_)}async getVideosByGame(g,_={}){return await this._getVideos("game_id",[g],_)}getVideosByGamePaginated(g,_={}){return this._getVideosPaginated("game_id",[g],_)}async deleteVideosByIds(g,_){await this._client.callApi({type:"helix",url:"videos",method:"DELETE",scopes:["channel:manage:videos"],userId:(0,r.extractUserId)(g),query:{id:_}})}async _getVideos(g,_,p={}){if(!_.length)return{data:[]};const l=await this._client.callApi({type:"helix",url:"videos",userId:g==="user_id"?_[0]:void 0,query:{...n._makeVideosQuery(g,_,p),...(0,o.createPaginationQuery)(p)}});return(0,s.createPaginatedResult)(l,h.HelixVideo,this._client)}_getVideosPaginated(g,_,p={}){return new a.HelixPaginatedRequest({url:"videos",userId:g==="user_id"?_[0]:void 0,query:n._makeVideosQuery(g,_,p)},this._client,l=>new h.HelixVideo(l,this._client))}static _makeVideosQuery(g,_,p={}){const{language:l,period:d,orderBy:b,type:x}=p;return{[g]:_,language:l,period:d,sort:b,type:x}}};return ci.HelixVideoApi=m,e.__decorate([(0,t.Enumerable)(!1)],m.prototype,"_getVideoByIdBatcher",void 0),ci.HelixVideoApi=m=n=e.__decorate([(0,r.rtfm)("api","HelixVideoApi")],m),ci}var hi={},hs={},fg;function t0(){if(fg)return hs;fg=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.createWhisperQuery=void 0;const n=q();function e(t,r){return{from_user_id:(0,n.extractUserId)(t),to_user_id:(0,n.extractUserId)(r)}}return hs.createWhisperQuery=e,hs}var yg;function ov(){if(yg)return hi;yg=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.HelixWhisperApi=void 0;const n=M,e=q(),t=t0(),r=ve();let i=class extends r.BaseApi{async sendWhisper(s,o,u){await this._client.callApi({type:"helix",url:"whispers",method:"POST",userId:(0,e.extractUserId)(s),scopes:["user:manage:whispers"],query:(0,t.createWhisperQuery)(s,o),jsonBody:{message:u}})}};return hi.HelixWhisperApi=i,hi.HelixWhisperApi=i=n.__decorate([(0,e.rtfm)("api","HelixWhisperApi")],i),hi}var ps={},bg;function lv(){if(bg)return ps;bg=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.ApiReportedRequest=void 0;class n{constructor(t,r,i){this._options=t,this._httpStatus=r,this._resolvedUserId=i}get options(){return this._options}get httpStatus(){return this._httpStatus}get resolvedUserId(){return this._resolvedUserId}}return ps.ApiReportedRequest=n,ps}var vg;function Sd(){if(vg)return _r;vg=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.BaseApiClient=void 0;const n=M,e=Sl(),t=nd(),r=W(),i=wy(),a=Ae(),s=Hy(),o=q(),u=Ry(),h=Py(),m=ky(),w=Ly(),g=$y(),_=tb(),p=nb(),l=ab(),d=ob(),b=db(),x=_b(),A=gb(),I=yb(),y=wb(),H=Tb(),E=Db(),B=qb(),j=Mb(),Z=Fb(),z=Gb(),Te=zb(),se=Xb(),D=Yb(),N=iv(),ae=sv(),he=ov(),we=lv();let X=class extends i.EventEmitter{constructor(J,Se,Ce){super(),this.onRequest=this.registerEvent(),this._config=J,this._logger=Se,this._rateLimiter=Ce}async requestScopesForUser(J,Se){await this._config.authProvider.getAccessTokenForUser(J,...Se.map(Ce=>[Ce]))}async getTokenInfo(){try{const J=await this.callApi({type:"auth",url:"validate"});return new s.TokenInfo(J)}catch(J){throw J instanceof a.HttpStatusCodeError&&J.statusCode===401?new s.InvalidTokenError({cause:J}):J}}async callApi(J){var Se;const{authProvider:Ce}=this._config;if(!((Se=J.auth)!==null&&Se!==void 0?Se:!0))return await(0,a.callTwitchApi)(J,Ce.clientId,void 0,void 0,this._config.fetchOptions);let Ie=!1;if(J.forceType)switch(J.forceType){case"app":{if(!Ce.getAppAccessToken)throw new Error("Tried to make an API call that requires an app access token but your auth provider does not support that");const Be=await Ce.getAppAccessToken();return await this._callApiUsingInitialToken(J,Be)}case"user":{Ie=!0;break}default:throw new o.HellFreezesOverError(`Unknown forced token type: ${J.forceType}`)}if(J.scopes&&(Ie=!0),Ie){const Be=J.canOverrideScopedUserContext?this._getUserIdFromRequestContext(J.userId):J.userId;if(!Be)throw new Error("Tried to make an API call with a user context but no context user ID");const st=await Ce.getAccessTokenForUser(Be,J.scopes);if(!st)throw new Error(`Tried to make an API call with a user context for user ID ${Be} but no token was found`);if((0,s.accessTokenIsExpired)(st)&&Ce.refreshAccessTokenForUser){const pt=await Ce.refreshAccessTokenForUser(Be);return await this._callApiUsingInitialToken(J,pt,!0)}return await this._callApiUsingInitialToken(J,st)}const $e=this._getUserIdFromRequestContext(J.userId),De=$e===null?await Ce.getAnyAccessToken():await Ce.getAnyAccessToken($e??J.userId);if((0,s.accessTokenIsExpired)(De)&&De.userId&&Ce.refreshAccessTokenForUser){const Be=await Ce.refreshAccessTokenForUser(De.userId);return await this._callApiUsingInitialToken(J,Be,!0)}return await this._callApiUsingInitialToken(J,De)}get bits(){return new h.HelixBitsApi(this)}get channels(){return new m.HelixChannelApi(this)}get channelPoints(){return new w.HelixChannelPointsApi(this)}get charity(){return new g.HelixCharityApi(this)}get chat(){return new _.HelixChatApi(this)}get clips(){return new p.HelixClipApi(this)}get contentClassificationLabels(){return new l.HelixContentClassificationLabelApi(this)}get entitlements(){return new d.HelixEntitlementApi(this)}get eventSub(){return new b.HelixEventSubApi(this)}get extensions(){return new x.HelixExtensionsApi(this)}get games(){return new A.HelixGameApi(this)}get hypeTrain(){return new y.HelixHypeTrainApi(this)}get goals(){return new I.HelixGoalApi(this)}get moderation(){return new H.HelixModerationApi(this)}get polls(){return new E.HelixPollApi(this)}get predictions(){return new B.HelixPredictionApi(this)}get raids(){return new j.HelixRaidApi(this)}get schedule(){return new Z.HelixScheduleApi(this)}get search(){return new z.HelixSearchApi(this)}get streams(){return new Te.HelixStreamApi(this)}get subscriptions(){return new se.HelixSubscriptionApi(this)}get teams(){return new D.HelixTeamApi(this)}get users(){return new N.HelixUserApi(this)}get videos(){return new ae.HelixVideoApi(this)}get whispers(){return new he.HelixWhisperApi(this)}get rateLimiterStats(){return this._rateLimiter instanceof t.ResponseBasedRateLimiter?this._rateLimiter.stats:null}get _authProvider(){return this._config.authProvider}get _mockServerPort(){return this._config.mockServerPort}get _batchDelay(){var J;return(J=this._config.batchDelay)!==null&&J!==void 0?J:0}_getUserIdFromRequestContext(J){return J}async _callApiUsingInitialToken(J,Se,Ce=!1){var tt;const{authProvider:Ie}=this._config,{authorizationType:$e}=Ie;let De=await this._callApiInternal(J,Ie.clientId,Se.accessToken,$e);if(De.status===401&&!Ce){if(Se.userId){if(Ie.refreshAccessTokenForUser){const Be=await Ie.refreshAccessTokenForUser(Se.userId);De=await this._callApiInternal(J,Ie.clientId,Be.accessToken,$e)}}else if(Ie.getAppAccessToken){const Be=await Ie.getAppAccessToken(!0);De=await this._callApiInternal(J,Ie.clientId,Be.accessToken,$e)}}return this.emit(this.onRequest,new we.ApiReportedRequest(J,De.status,(tt=Se.userId)!==null&&tt!==void 0?tt:null)),await(0,a.handleTwitchApiResponseError)(De,J),await(0,a.transformTwitchApiResponse)(De)}async _callApiInternal(J,Se,Ce,tt){var Ie,$e,De;const{fetchOptions:Be,mockServerPort:st}=this._config,pt=(Ie=J.type)!==null&&Ie!==void 0?Ie:"helix";this._logger.debug(`Calling ${pt} API: ${($e=J.method)!==null&&$e!==void 0?$e:"GET"} ${J.url}`),this._logger.trace(`Query: ${JSON.stringify(J.query)}`),J.jsonBody&&this._logger.trace(`Request body: ${JSON.stringify(J.jsonBody)}`);const wt=u.operation({retries:3,minTimeout:500,factor:2}),{promise:Li,resolve:or,reject:Ni}=(0,r.promiseWithResolvers)();wt.attempt(async()=>{try{const rt=pt==="helix"?await this._rateLimiter.request({options:J,clientId:Se,accessToken:Ce,authorizationType:tt,fetchOptions:Be,mockServerPort:st}):await(0,a.callTwitchApiRaw)(J,Se,Ce,tt,Be,st);!rt.ok&&rt.status>=500&&rt.status<600&&await(0,a.handleTwitchApiResponseError)(rt,J),or(rt)}catch(rt){if(wt.retry(rt))return;Ni(wt.mainError())}});const lr=await Li;return this._logger.debug(`Called ${pt} API: ${(De=J.method)!==null&&De!==void 0?De:"GET"} ${J.url} - result: ${lr.status}`),lr}};return _r.BaseApiClient=X,n.__decorate([(0,e.CachedGetter)()],X.prototype,"bits",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"channels",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"channelPoints",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"charity",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"chat",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"clips",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"contentClassificationLabels",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"entitlements",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"eventSub",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"extensions",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"games",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"hypeTrain",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"goals",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"moderation",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"polls",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"predictions",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"raids",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"schedule",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"search",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"streams",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"subscriptions",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"teams",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"users",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"videos",null),n.__decorate([(0,e.CachedGetter)()],X.prototype,"whispers",null),_r.BaseApiClient=X=n.__decorate([e.Cacheable,(0,o.rtfm)("api","ApiClient")],X),_r}var pi={},wg;function r0(){if(wg)return pi;wg=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.NoContextApiClient=void 0;const n=M,e=q(),t=Sd();let r=class extends t.BaseApiClient{_getUserIdFromRequestContext(){return null}};return pi.NoContextApiClient=r,pi.NoContextApiClient=r=n.__decorate([(0,e.rtfm)("api","ApiClient")],r),pi}var mi={},xg;function n0(){if(xg)return mi;xg=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.UserContextApiClient=void 0;const n=M,e=q(),t=Sd();let r=class extends t.BaseApiClient{constructor(a,s,o,u){super(a,s,o),this._userId=u}_getUserIdFromRequestContext(){return this._userId}};return mi.UserContextApiClient=r,mi.UserContextApiClient=r=n.__decorate([(0,e.rtfm)("api","ApiClient")],r),mi}var Sg;function i0(){if(Sg)return pr;Sg=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.ApiClient=void 0;const n=M,e=bl(),t=vl(),r=nd(),i=Ae(),a=q(),s=by(),o=SS(),u=Sd(),h=r0(),m=n0();let w=class extends u.BaseApiClient{constructor(_){if(!_.authProvider)throw new s.ConfigError("No auth provider given. Please supply the `authProvider` option.");const p={name:"twurple:api:rate-limiter",..._.logger};super(_,(0,t.createLogger)({name:"twurple:api:client",..._.logger}),e.isNode?new r.PartitionedRateLimiter({getPartitionKey:l=>{var d;return(d=l.userId)!==null&&d!==void 0?d:null},createChild:()=>new o.HelixRateLimiter({logger:p})}):new r.PartitionedTimeBasedRateLimiter({logger:p,bucketSize:800,timeFrame:64e3,doRequest:async({options:l,clientId:d,accessToken:b,authorizationType:x,fetchOptions:A,mockServerPort:I})=>await(0,i.callTwitchApiRaw)(l,d,b,x,A,I),getPartitionKey:l=>{var d;return(d=l.userId)!==null&&d!==void 0?d:null}}))}async asUser(_,p){const l=new m.UserContextApiClient(this._config,this._logger,this._rateLimiter,(0,a.extractUserId)(_));return await p(l)}async asIntent(_,p){if(!this._authProvider.getAccessTokenForIntent)throw new Error("Trying to use intents with an auth provider that does not support them");for(const l of _){const d=await this._authProvider.getAccessTokenForIntent(l);if(d){const b=new m.UserContextApiClient(this._config,this._logger,this._rateLimiter,d.userId);return await p(b)}}throw new Error(`Intents [${_.join(", ")}] not found in auth provider`)}async withoutUser(_){const p=new h.NoContextApiClient(this._config,this._logger,this._rateLimiter);return await _(p)}};return pr.ApiClient=w,pr.ApiClient=w=n.__decorate([(0,a.rtfm)("api","ApiClient")],w),pr}var _i={},Cg;function a0(){if(Cg)return _i;Cg=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.HelixFollow=void 0;const n=M,e=W(),t=q();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].from_id}get userName(){return this[t.rawDataSymbol].from_login}get userDisplayName(){return this[t.rawDataSymbol].from_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].from_id))}get followedUserId(){return this[t.rawDataSymbol].to_id}get followedUserName(){return this[t.rawDataSymbol].to_login}get followedUserDisplayName(){return this[t.rawDataSymbol].to_name}async getFollowedUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].to_id))}get followDate(){return new Date(this[t.rawDataSymbol].followed_at)}};return _i.HelixFollow=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),_i.HelixFollow=r=n.__decorate([(0,t.rtfm)("api","HelixFollow")],r),_i}var Eg;function s0(){return Eg||(Eg=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.HelixGoal=n.HelixGoalApi=n.HelixGame=n.HelixGameApi=n.HelixExtensionTransaction=n.HelixExtensionBitsProduct=n.HelixExtensionsApi=n.HelixPaginatedEventSubSubscriptionsRequest=n.HelixEventSubSubscription=n.HelixEventSubConduitShard=n.HelixEventSubConduit=n.HelixEventSubApi=n.HelixDropsEntitlement=n.HelixEntitlementApi=n.HelixContentClassificationLabel=n.HelixContentClassificationLabelApi=n.HelixClip=n.HelixClipApi=n.HelixSharedChatSession=n.HelixSharedChatSessionParticipant=n.HelixSentChatMessage=n.HelixPrivilegedChatSettings=n.HelixUserEmote=n.HelixEmoteFromSet=n.HelixChannelEmote=n.HelixEmote=n.HelixChatChatter=n.HelixChatSettings=n.HelixChatBadgeVersion=n.HelixChatBadgeSet=n.HelixChatApi=n.HelixCharityCampaignAmount=n.HelixCharityCampaignDonation=n.HelixCharityCampaign=n.HelixCharityApi=n.HelixCustomRewardRedemption=n.HelixCustomReward=n.HelixChannelPointsApi=n.HelixChannelReference=n.HelixFollowedChannel=n.HelixChannelFollower=n.HelixChannelEditor=n.HelixChannel=n.HelixAdSchedule=n.HelixChannelApi=n.HelixCheermoteList=n.HelixBitsLeaderboardEntry=n.HelixBitsLeaderboard=n.HelixBitsApi=n.ApiClient=void 0,n.HelixVideo=n.HelixVideoApi=n.HelixUserExtension=n.HelixInstalledExtensionList=n.HelixInstalledExtension=n.HelixBaseExtension=n.HelixUser=n.HelixPrivilegedUser=n.HelixFollow=n.HelixUserBlock=n.HelixUserApi=n.HelixTeamWithUsers=n.HelixTeam=n.HelixTeamApi=n.HelixUserSubscription=n.HelixSubscription=n.HelixSubscriptionApi=n.HelixPaginatedSubscriptionsRequest=n.HelixStreamMarkerWithVideo=n.HelixStreamMarker=n.HelixStream=n.HelixStreamApi=n.HelixChannelSearchResult=n.HelixSearchApi=n.HelixPaginatedScheduleSegmentRequest=n.HelixScheduleSegment=n.HelixSchedule=n.HelixScheduleApi=n.HelixUserRelation=n.HelixRaid=n.HelixRaidApi=n.HelixPredictor=n.HelixPredictionOutcome=n.HelixPrediction=n.HelixPredictionApi=n.HelixPollChoice=n.HelixPoll=n.HelixPollApi=n.HelixWarning=n.HelixUnbanRequest=n.HelixShieldModeStatus=n.HelixBlockedTerm=n.HelixBanUser=n.HelixModeratedChannel=n.HelixModerator=n.HelixBan=n.HelixModerationApi=n.HelixHypeTrainEvent=n.HelixHypeTrainContribution=n.HelixHypeTrainApi=void 0,n.HellFreezesOverError=n.HelixExtension=n.extractUserName=n.extractUserId=n.HelixPaginatedRequestWithTotal=n.HelixPaginatedRequest=n.ApiReportedRequest=n.StreamNotLiveError=n.ConfigError=n.HelixWhisperApi=void 0;var e=i0();Object.defineProperty(n,"ApiClient",{enumerable:!0,get:function(){return e.ApiClient}});var t=Py();Object.defineProperty(n,"HelixBitsApi",{enumerable:!0,get:function(){return t.HelixBitsApi}});var r=Ty();Object.defineProperty(n,"HelixBitsLeaderboard",{enumerable:!0,get:function(){return r.HelixBitsLeaderboard}});var i=Ay();Object.defineProperty(n,"HelixBitsLeaderboardEntry",{enumerable:!0,get:function(){return i.HelixBitsLeaderboardEntry}});var a=Iy();Object.defineProperty(n,"HelixCheermoteList",{enumerable:!0,get:function(){return a.HelixCheermoteList}});var s=ky();Object.defineProperty(n,"HelixChannelApi",{enumerable:!0,get:function(){return s.HelixChannelApi}});var o=qy();Object.defineProperty(n,"HelixAdSchedule",{enumerable:!0,get:function(){return o.HelixAdSchedule}});var u=Dy();Object.defineProperty(n,"HelixChannel",{enumerable:!0,get:function(){return u.HelixChannel}});var h=By();Object.defineProperty(n,"HelixChannelEditor",{enumerable:!0,get:function(){return h.HelixChannelEditor}});var m=Oy();Object.defineProperty(n,"HelixChannelFollower",{enumerable:!0,get:function(){return m.HelixChannelFollower}});var w=Uy();Object.defineProperty(n,"HelixFollowedChannel",{enumerable:!0,get:function(){return w.HelixFollowedChannel}});var g=hb();Object.defineProperty(n,"HelixChannelReference",{enumerable:!0,get:function(){return g.HelixChannelReference}});var _=Ly();Object.defineProperty(n,"HelixChannelPointsApi",{enumerable:!0,get:function(){return _.HelixChannelPointsApi}});var p=My();Object.defineProperty(n,"HelixCustomReward",{enumerable:!0,get:function(){return p.HelixCustomReward}});var l=jy();Object.defineProperty(n,"HelixCustomRewardRedemption",{enumerable:!0,get:function(){return l.HelixCustomRewardRedemption}});var d=$y();Object.defineProperty(n,"HelixCharityApi",{enumerable:!0,get:function(){return d.HelixCharityApi}});var b=Ny();Object.defineProperty(n,"HelixCharityCampaign",{enumerable:!0,get:function(){return b.HelixCharityCampaign}});var x=Fy();Object.defineProperty(n,"HelixCharityCampaignDonation",{enumerable:!0,get:function(){return x.HelixCharityCampaignDonation}});var A=hd();Object.defineProperty(n,"HelixCharityCampaignAmount",{enumerable:!0,get:function(){return A.HelixCharityCampaignAmount}});var I=tb();Object.defineProperty(n,"HelixChatApi",{enumerable:!0,get:function(){return I.HelixChatApi}});var y=Vy();Object.defineProperty(n,"HelixChatBadgeSet",{enumerable:!0,get:function(){return y.HelixChatBadgeSet}});var H=Wy();Object.defineProperty(n,"HelixChatBadgeVersion",{enumerable:!0,get:function(){return H.HelixChatBadgeVersion}});var E=pd();Object.defineProperty(n,"HelixChatSettings",{enumerable:!0,get:function(){return E.HelixChatSettings}});var B=zy();Object.defineProperty(n,"HelixChatChatter",{enumerable:!0,get:function(){return B.HelixChatChatter}});var j=El();Object.defineProperty(n,"HelixEmote",{enumerable:!0,get:function(){return j.HelixEmote}});var Z=Qy();Object.defineProperty(n,"HelixChannelEmote",{enumerable:!0,get:function(){return Z.HelixChannelEmote}});var z=Ky();Object.defineProperty(n,"HelixEmoteFromSet",{enumerable:!0,get:function(){return z.HelixEmoteFromSet}});var Te=Xy();Object.defineProperty(n,"HelixUserEmote",{enumerable:!0,get:function(){return Te.HelixUserEmote}});var se=Jy();Object.defineProperty(n,"HelixPrivilegedChatSettings",{enumerable:!0,get:function(){return se.HelixPrivilegedChatSettings}});var D=Yy();Object.defineProperty(n,"HelixSentChatMessage",{enumerable:!0,get:function(){return D.HelixSentChatMessage}});var N=Zy();Object.defineProperty(n,"HelixSharedChatSessionParticipant",{enumerable:!0,get:function(){return N.HelixSharedChatSessionParticipant}});var ae=eb();Object.defineProperty(n,"HelixSharedChatSession",{enumerable:!0,get:function(){return ae.HelixSharedChatSession}});var he=nb();Object.defineProperty(n,"HelixClipApi",{enumerable:!0,get:function(){return he.HelixClipApi}});var we=rb();Object.defineProperty(n,"HelixClip",{enumerable:!0,get:function(){return we.HelixClip}});var X=ab();Object.defineProperty(n,"HelixContentClassificationLabelApi",{enumerable:!0,get:function(){return X.HelixContentClassificationLabelApi}});var ht=ib();Object.defineProperty(n,"HelixContentClassificationLabel",{enumerable:!0,get:function(){return ht.HelixContentClassificationLabel}});var J=ob();Object.defineProperty(n,"HelixEntitlementApi",{enumerable:!0,get:function(){return J.HelixEntitlementApi}});var Se=sb();Object.defineProperty(n,"HelixDropsEntitlement",{enumerable:!0,get:function(){return Se.HelixDropsEntitlement}});var Ce=db();Object.defineProperty(n,"HelixEventSubApi",{enumerable:!0,get:function(){return Ce.HelixEventSubApi}});var tt=ub();Object.defineProperty(n,"HelixEventSubConduit",{enumerable:!0,get:function(){return tt.HelixEventSubConduit}});var Ie=cb();Object.defineProperty(n,"HelixEventSubConduitShard",{enumerable:!0,get:function(){return Ie.HelixEventSubConduitShard}});var $e=md();Object.defineProperty(n,"HelixEventSubSubscription",{enumerable:!0,get:function(){return $e.HelixEventSubSubscription}});var De=lb();Object.defineProperty(n,"HelixPaginatedEventSubSubscriptionsRequest",{enumerable:!0,get:function(){return De.HelixPaginatedEventSubSubscriptionsRequest}});var Be=_b();Object.defineProperty(n,"HelixExtensionsApi",{enumerable:!0,get:function(){return Be.HelixExtensionsApi}});var st=pb();Object.defineProperty(n,"HelixExtensionBitsProduct",{enumerable:!0,get:function(){return st.HelixExtensionBitsProduct}});var pt=mb();Object.defineProperty(n,"HelixExtensionTransaction",{enumerable:!0,get:function(){return pt.HelixExtensionTransaction}});var wt=gb();Object.defineProperty(n,"HelixGameApi",{enumerable:!0,get:function(){return wt.HelixGameApi}});var Li=_d();Object.defineProperty(n,"HelixGame",{enumerable:!0,get:function(){return Li.HelixGame}});var or=yb();Object.defineProperty(n,"HelixGoalApi",{enumerable:!0,get:function(){return or.HelixGoalApi}});var Ni=fb();Object.defineProperty(n,"HelixGoal",{enumerable:!0,get:function(){return Ni.HelixGoal}});var lr=wb();Object.defineProperty(n,"HelixHypeTrainApi",{enumerable:!0,get:function(){return lr.HelixHypeTrainApi}});var rt=bb();Object.defineProperty(n,"HelixHypeTrainContribution",{enumerable:!0,get:function(){return rt.HelixHypeTrainContribution}});var Ul=vb();Object.defineProperty(n,"HelixHypeTrainEvent",{enumerable:!0,get:function(){return Ul.HelixHypeTrainEvent}});var ql=Tb();Object.defineProperty(n,"HelixModerationApi",{enumerable:!0,get:function(){return ql.HelixModerationApi}});var kl=xb();Object.defineProperty(n,"HelixBan",{enumerable:!0,get:function(){return kl.HelixBan}});var Ml=Eb();Object.defineProperty(n,"HelixModerator",{enumerable:!0,get:function(){return Ml.HelixModerator}});var jl=Cb();Object.defineProperty(n,"HelixModeratedChannel",{enumerable:!0,get:function(){return jl.HelixModeratedChannel}});var no=gd();Object.defineProperty(n,"HelixBanUser",{enumerable:!0,get:function(){return no.HelixBanUser}});var Ll=Sb();Object.defineProperty(n,"HelixBlockedTerm",{enumerable:!0,get:function(){return Ll.HelixBlockedTerm}});var kd=Hb();Object.defineProperty(n,"HelixShieldModeStatus",{enumerable:!0,get:function(){return kd.HelixShieldModeStatus}});var k=Rb();Object.defineProperty(n,"HelixUnbanRequest",{enumerable:!0,get:function(){return k.HelixUnbanRequest}});var oe=Ab();Object.defineProperty(n,"HelixWarning",{enumerable:!0,get:function(){return oe.HelixWarning}});var io=Db();Object.defineProperty(n,"HelixPollApi",{enumerable:!0,get:function(){return io.HelixPollApi}});var ao=Pb();Object.defineProperty(n,"HelixPoll",{enumerable:!0,get:function(){return ao.HelixPoll}});var Nl=Ib();Object.defineProperty(n,"HelixPollChoice",{enumerable:!0,get:function(){return Nl.HelixPollChoice}});var Fi=qb();Object.defineProperty(n,"HelixPredictionApi",{enumerable:!0,get:function(){return Fi.HelixPredictionApi}});var so=Ub();Object.defineProperty(n,"HelixPrediction",{enumerable:!0,get:function(){return so.HelixPrediction}});var oo=Ob();Object.defineProperty(n,"HelixPredictionOutcome",{enumerable:!0,get:function(){return oo.HelixPredictionOutcome}});var Fl=Bb();Object.defineProperty(n,"HelixPredictor",{enumerable:!0,get:function(){return Fl.HelixPredictor}});var $l=Mb();Object.defineProperty(n,"HelixRaidApi",{enumerable:!0,get:function(){return $l.HelixRaidApi}});var ur=kb();Object.defineProperty(n,"HelixRaid",{enumerable:!0,get:function(){return ur.HelixRaid}});var lo=dd();Object.defineProperty(n,"HelixUserRelation",{enumerable:!0,get:function(){return lo.HelixUserRelation}});var $i=Fb();Object.defineProperty(n,"HelixScheduleApi",{enumerable:!0,get:function(){return $i.HelixScheduleApi}});var uo=Nb();Object.defineProperty(n,"HelixSchedule",{enumerable:!0,get:function(){return uo.HelixSchedule}});var Gl=Hl();Object.defineProperty(n,"HelixScheduleSegment",{enumerable:!0,get:function(){return Gl.HelixScheduleSegment}});var co=Lb();Object.defineProperty(n,"HelixPaginatedScheduleSegmentRequest",{enumerable:!0,get:function(){return co.HelixPaginatedScheduleSegmentRequest}});var Ql=Gb();Object.defineProperty(n,"HelixSearchApi",{enumerable:!0,get:function(){return Ql.HelixSearchApi}});var ho=$b();Object.defineProperty(n,"HelixChannelSearchResult",{enumerable:!0,get:function(){return ho.HelixChannelSearchResult}});var po=zb();Object.defineProperty(n,"HelixStreamApi",{enumerable:!0,get:function(){return po.HelixStreamApi}});var Wl=Wb();Object.defineProperty(n,"HelixStream",{enumerable:!0,get:function(){return Wl.HelixStream}});var Vl=fd();Object.defineProperty(n,"HelixStreamMarker",{enumerable:!0,get:function(){return Vl.HelixStreamMarker}});var zl=Vb();Object.defineProperty(n,"HelixStreamMarkerWithVideo",{enumerable:!0,get:function(){return zl.HelixStreamMarkerWithVideo}});var Kl=Kb();Object.defineProperty(n,"HelixPaginatedSubscriptionsRequest",{enumerable:!0,get:function(){return Kl.HelixPaginatedSubscriptionsRequest}});var Gi=Xb();Object.defineProperty(n,"HelixSubscriptionApi",{enumerable:!0,get:function(){return Gi.HelixSubscriptionApi}});var Qi=bd();Object.defineProperty(n,"HelixSubscription",{enumerable:!0,get:function(){return Qi.HelixSubscription}});var Xl=yd();Object.defineProperty(n,"HelixUserSubscription",{enumerable:!0,get:function(){return Xl.HelixUserSubscription}});var Jl=Yb();Object.defineProperty(n,"HelixTeamApi",{enumerable:!0,get:function(){return Jl.HelixTeamApi}});var Yl=vd();Object.defineProperty(n,"HelixTeam",{enumerable:!0,get:function(){return Yl.HelixTeam}});var Zl=Jb();Object.defineProperty(n,"HelixTeamWithUsers",{enumerable:!0,get:function(){return Zl.HelixTeamWithUsers}});var je=iv();Object.defineProperty(n,"HelixUserApi",{enumerable:!0,get:function(){return je.HelixUserApi}});var eu=nv();Object.defineProperty(n,"HelixUserBlock",{enumerable:!0,get:function(){return eu.HelixUserBlock}});var tu=a0();Object.defineProperty(n,"HelixFollow",{enumerable:!0,get:function(){return tu.HelixFollow}});var ru=rv();Object.defineProperty(n,"HelixPrivilegedUser",{enumerable:!0,get:function(){return ru.HelixPrivilegedUser}});var mo=xd();Object.defineProperty(n,"HelixUser",{enumerable:!0,get:function(){return mo.HelixUser}});var nu=wd();Object.defineProperty(n,"HelixBaseExtension",{enumerable:!0,get:function(){return nu.HelixBaseExtension}});var Wi=Zb();Object.defineProperty(n,"HelixInstalledExtension",{enumerable:!0,get:function(){return Wi.HelixInstalledExtension}});var Vi=ev();Object.defineProperty(n,"HelixInstalledExtensionList",{enumerable:!0,get:function(){return Vi.HelixInstalledExtensionList}});var iu=tv();Object.defineProperty(n,"HelixUserExtension",{enumerable:!0,get:function(){return iu.HelixUserExtension}});var au=sv();Object.defineProperty(n,"HelixVideoApi",{enumerable:!0,get:function(){return au.HelixVideoApi}});var _o=av();Object.defineProperty(n,"HelixVideo",{enumerable:!0,get:function(){return _o.HelixVideo}});var Ot=ov();Object.defineProperty(n,"HelixWhisperApi",{enumerable:!0,get:function(){return Ot.HelixWhisperApi}});var cr=by();Object.defineProperty(n,"ConfigError",{enumerable:!0,get:function(){return cr.ConfigError}});var su=Qb();Object.defineProperty(n,"StreamNotLiveError",{enumerable:!0,get:function(){return su.StreamNotLiveError}});var ou=lv();Object.defineProperty(n,"ApiReportedRequest",{enumerable:!0,get:function(){return ou.ApiReportedRequest}});var zi=ke();Object.defineProperty(n,"HelixPaginatedRequest",{enumerable:!0,get:function(){return zi.HelixPaginatedRequest}});var lu=eo();Object.defineProperty(n,"HelixPaginatedRequestWithTotal",{enumerable:!0,get:function(){return lu.HelixPaginatedRequestWithTotal}});var dr=q();Object.defineProperty(n,"extractUserId",{enumerable:!0,get:function(){return dr.extractUserId}}),Object.defineProperty(n,"extractUserName",{enumerable:!0,get:function(){return dr.extractUserName}}),Object.defineProperty(n,"HelixExtension",{enumerable:!0,get:function(){return dr.HelixExtension}}),Object.defineProperty(n,"HellFreezesOverError",{enumerable:!0,get:function(){return dr.HellFreezesOverError}})}(Cu)),Cu}var Wu,Hg;function o0(){if(Hg)return Wu;Hg=1;const n=Pf(),e=Df(),t=Yc(),r=ar(),i=Bf(),a=Of(),s=Uf(),o=Ux(),{ApiClient:u}=s0(),{AppTokenAuthProvider:h}=Hy();class m{constructor(g,_,p){if(p&&p.apiClient)this.apiClient=p.apiClient;else if(g!==void 0&&_!==void 0){const l=new h(g,_);this.apiClient=new u({authProvider:l})}this.emotes=new t,this.channels=new t,this.ffzModifiersFetched=!1}get globalChannel(){return this.channels.get(null)}_setupChannel(g,_=null){let p=this.channels.get(g);return p||(p=new e(this,g),this.channels.set(g,p)),_&&(p.format=_),p}_getRawTwitchEmotes(g){if(!this.apiClient)throw new Error("Client id or client secret not provided.");return g?this.apiClient.chat.getChannelEmotes(g):this.apiClient.chat.getGlobalEmotes()}_cacheTwitchEmote(g,_,p=null){const l=this._setupChannel(g),d=p||new s(l,_.id,_);return this.emotes.set(d.code,d),l.emotes.set(d.code,d),d}_getRawBTTVEmotes(g){const _=g?r.BTTV.Channel(g):r.BTTV.Global;return o.get(_).then(p=>p.data instanceof Array?p.data:[...p.data.channelEmotes,...p.data.sharedEmotes])}_cacheBTTVEmote(g,_,p=null){const l=this._setupChannel(g),d=p||new n(l,_.id,_);return this.emotes.set(d.code,d),l.emotes.set(d.code,d),d}_getRawFFZEmoteSet(g){const _=r.FFZ.Set(g);return o.get(_).then(p=>p.data.set.emoticons)}_getRawFFZEmotes(g){const _=r.FFZ.Channel(g);return o.get(_).then(p=>{const l=[];for(const d of Object.keys(p.data.sets)){const b=p.data.sets[d];l.push(...b.emoticons)}return l})}_cacheFFZEmote(g,_,p=null){const l=this._setupChannel(g),d=p||new i(l,_.id,_);return this.emotes.set(d.code,d),l.emotes.set(d.code,d),d}_getRawSevenTVEmotes(g){const _=g?r.SevenTV.Channel(g):r.SevenTV.Global;return o.get(_).then(p=>p.data)}_cacheSevenTVEmote(g,_,p,l=null){const d=this._setupChannel(g,p),b=l||new a(d,_.id,_);return this.emotes.set(b.code,b),d.emotes.set(b.code,b),b}fetchTwitchEmotes(g=null){return this._getRawTwitchEmotes(g).then(_=>{for(const p of _)this._cacheTwitchEmote(g,{code:p.name,id:p.id,formats:p.formats});return this.channels.get(g).emotes.filter(p=>p.type==="twitch")})}fetchBTTVEmotes(g=null){return this._getRawBTTVEmotes(g).then(_=>{for(const p of _)this._cacheBTTVEmote(g,p);return this.channels.get(g).emotes.filter(p=>p.type==="bttv")})}async fetchFFZEmotes(g=null){return this.ffzModifiersFetched||(this.ffzModifiersFetched=!0,await this._getRawFFZEmoteSet(r.FFZ.sets.Modifiers).then(_=>{for(const p of _)this._cacheFFZEmote(null,p)})),g?this._getRawFFZEmotes(g).then(_=>{for(const p of _)this._cacheFFZEmote(g,p);return this.channels.get(g).emotes.filter(p=>p.type==="ffz")}):this._getRawFFZEmoteSet(r.FFZ.sets.Global).then(_=>{for(const p of _)this._cacheFFZEmote(g,p);return this.channels.get(g).emotes.filter(p=>p.type==="ffz")})}fetchSevenTVEmotes(g=null,_="webp"){return this._getRawSevenTVEmotes(g).then(p=>{if("emotes"in p)for(const l of p.emotes)this._cacheSevenTVEmote(g,l,_);else for(const l of p.emote_set.emotes)this._cacheSevenTVEmote(g,l,_);return this.channels.get(g).emotes.filter(l=>l.type==="7tv")})}fromObject(g){const _=[],p={bttv:{class:n,cache:(l,d,b)=>this._cacheBTTVEmote(d,null,b)},ffz:{class:i,cache:(l,d,b)=>this._cacheFFZEmote(d,null,b)},"7tv":{class:a,cache:(l,d,b)=>this._cacheSevenTVEmote(d,null,l.imageType,b)},twitch:{class:s,cache:(l,d,b)=>this._cacheTwitchEmote(d,null,b)}};for(const l of g){const{type:d}=l;if(!Object.keys(p).includes(d))throw new TypeError(`Unknown type: ${d}`);const b=p[d].class;this._setupChannel(l.channel_id,d==="7tv"?l.imageType:null);const x=b.fromObject(l,this.channels.get(l.channel_id));p[d].cache(l,l.channel_id,x),_.push(x)}return _}}return Wu=m,Wu}var Vu,Rg;function l0(){if(Rg)return Vu;Rg=1;const n=ar();class e{constructor(r,i={}){this.fetcher=r,this.options=Object.assign({template:"",type:"markdown",match:/:(.+?):/g},i),this._validateOptions(this.options)}_validateOptions(r){if(r.template&&typeof r.template!="string")throw new TypeError("Template must be a string");if(!["markdown","html","bbcode","plain"].includes(r.type))throw new TypeError("Parse type must be one of `markdown`, `html`, `bbcode`, or `plain`");if(!(r.match instanceof RegExp)||!r.match.global)throw new TypeError("Match must be a global RegExp.")}parse(r,i=0){return r.replace(this.options.match,(s,o)=>{const u=this.fetcher.emotes.get(o);if(!u)return s;if(u.modifier)return"";const h=this.options.template||n.Templates[this.options.type],m=u.toLink(i);return h.replace(/{link}/g,m).replace(/{name}/g,u.code).replace(/{size}/g,i).replace(/{creator}/g,u.ownerName||"global")})}}return Vu=e,Vu}var zu,Ag;function u0(){return Ag||(Ag=1,zu={BTTVEmote:Pf(),Channel:Df(),Collection:Yc(),Constants:ar(),Emote:Zs(),EmoteFetcher:o0(),EmoteParser:l0(),FFZEmote:Bf(),SevenTVEmote:Of(),TwitchEmote:Uf()}),zu}var c0=u0();const Ku=ir(c0),Rl=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";var St,ie;(function(n){n[n.CRITICAL=0]="CRITICAL",n[n.ERROR=1]="ERROR",n[n.WARNING=2]="WARNING",n[n.INFO=3]="INFO",n[n.DEBUG=4]="DEBUG",n[n.TRACE=7]="TRACE"})(ie||(ie={}));function Cd(n){if(typeof n=="number"){if(Object.prototype.hasOwnProperty.call(ie,n))return n;var e=Object.keys(ie).map(function(r){return parseInt(r,10)}).filter(function(r){return!isNaN(r)&&r<n});return e.length?Math.max.apply(Math,e):ie.WARNING}var t=n.replace(/\d+$/,"").toUpperCase();if(!Object.prototype.hasOwnProperty.call(ie,t))throw new Error("Unknown log level string: ".concat(n));return ie[t]}var d0=Rl?console.log.bind(console):console.debug.bind(console),uv=(St={},St[ie.CRITICAL]=console.error.bind(console),St[ie.ERROR]=console.error.bind(console),St[ie.WARNING]=console.warn.bind(console),St[ie.INFO]=console.info.bind(console),St[ie.DEBUG]=d0.bind(console),St[ie.TRACE]=console.trace.bind(console),St);function V(n){return function(e,t){Object.defineProperty(e,t,{get:function(){},set:function(r){Object.defineProperty(this,t,{value:r,writable:!0,enumerable:n})},enumerable:n})}}function Tg(n){var e;return(e=[]).concat.apply(e,Ti([],Bt(n),!1))}function Ig(n){return Zc(this,void 0,Promise,function(){return fl(this,function(e){switch(e.label){case 0:return typeof n!="function"?[3,2]:[4,n()];case 1:return[2,e.sent()];case 2:return[2,n]}})})}function h0(n){return typeof n=="function"?n():n}function p0(n){var e,t,r;return fl(this,function(i){switch(i.label){case 0:e=0,t=1,i.label=1;case 1:return e<n?[4,e]:[3,3];case 2:return i.sent(),r=Bt([t,e+t],2),e=r[0],t=r[1],[3,1];case 3:return[4,n];case 4:return i.sent(),[3,3];case 5:return[2]}})}function ws(n,e){return Object.assign.apply(Object,Ti([{}],Bt(n.map(e)),!1))}function _c(n,e){Object.entries(n).forEach(function(t){var r=Bt(t,2),i=r[0],a=r[1];return e(a,i)})}function cv(n,e){if(typeof e!="function"){var t=e;e=function(r){return r[t].toString()}}return ws(n,function(r){var i;return i={},i[e(r)]=r,i})}function dv(n){return n==null}function Xe(n,e){return dv(n)?null:e(n)}function dt(n,e){return dv(n)?void 0:e(n)}function Bo(){var n,e,t=new Promise(function(r,i){n=r,e=i});return{promise:t,resolve:n,reject:e}}function m0(n,e,t){if(typeof n=="number"&&(n=n.toString()),e=e-n.length,e<=0)return n;t===void 0&&(t=" ");var r="";do(e&1)===1&&(r+=t),e>>=1,e&&(t+=t);while(e);return r+n}function er(n,e,t){var r=n.split(e);return r.length<=t?r:Ti(Ti([],Bt(r.slice(0,t-1)),!1),[r.slice(t-1).join(e)],!1)}var _0={},Xu,Ju,Oo=typeof process>"u"?[]:(Ju=(Xu=_0.LOGGING)===null||Xu===void 0?void 0:Xu.split(";").map(function(n){var e=n.split("=",2),t=e[0],r=e[1];return r?[t==="default"?void 0:t.split(":"),Cd(r)]:null}).filter(function(n){return!!n}).sort(function(n,e){var t,r,i=n[0],a=e[0];return((t=a==null?void 0:a.length)!==null&&t!==void 0?t:0)-((r=i==null?void 0:i.length)!==null&&r!==void 0?r:0)}))!==null&&Ju!==void 0?Ju:[],Yu=Oo.findIndex(function(n){var e=n[0];return!e}),hv=void 0;Yu!==-1&&(hv=Oo[Yu][1],Oo.splice(Yu));function g0(n,e){return e.length<=n.length&&e.every(function(t,r){return t===n[r]})}function pv(n){for(var e=n.split(":"),t=0,r=Oo;t<r.length;t++){var i=r[t],a=i[0],s=i[1];if(g0(e,a))return s}return hv}var mv=function(){function n(e){var t=e.name,r=e.minLevel,i=e.emoji,a=i===void 0?!1:i,s=e.colors,o=e.timestamps,u=o===void 0?Rl:o,h,m;this._name=t,this._minLevel=(m=(h=dt(r,function(w){return Cd(w)}))!==null&&h!==void 0?h:pv(t))!==null&&m!==void 0?m:ie.WARNING,this._emoji=a,this._colors=s,this._timestamps=u}return n.prototype.crit=function(e){this.log(ie.CRITICAL,e)},n.prototype.error=function(e){this.log(ie.ERROR,e)},n.prototype.warn=function(e){this.log(ie.WARNING,e)},n.prototype.info=function(e){this.log(ie.INFO,e)},n.prototype.debug=function(e){this.log(ie.DEBUG,e)},n.prototype.trace=function(e){this.log(ie.TRACE,e)},n}(),f0=function(n){gl(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.log=function(t,r){if(!(t>this._minLevel)){var i=uv[t],a="[".concat(this._name,"] ").concat(r);this._timestamps&&(a="[".concat(new Date().toISOString(),"] ").concat(r)),i(a)}},e}(mv),y0=function(){function n(e){var t=e.name,r=e.minLevel,i=e.custom,a;this._minLevel=(a=dt(r,function(s){return Cd(s)}))!==null&&a!==void 0?a:pv(t),this._override=typeof i=="function"?{log:i}:i}return n.prototype.log=function(e,t){this._shouldLog(e)&&this._override.log(e,t)},n.prototype.crit=function(e){this._override.crit?this._shouldLog(ie.CRITICAL)&&this._override.crit(e):this.log(ie.CRITICAL,e)},n.prototype.error=function(e){this._override.error?this._shouldLog(ie.ERROR)&&this._override.error(e):this.log(ie.ERROR,e)},n.prototype.warn=function(e){this._override.warn?this._shouldLog(ie.WARNING)&&this._override.warn(e):this.log(ie.WARNING,e)},n.prototype.info=function(e){this._override.info?this._shouldLog(ie.INFO)&&this._override.info(e):this.log(ie.INFO,e)},n.prototype.debug=function(e){this._override.debug?this._shouldLog(ie.DEBUG)&&this._override.debug(e):this.log(ie.DEBUG,e)},n.prototype.trace=function(e){this._override.trace?this._shouldLog(ie.TRACE)&&this._override.trace(e):this.log(ie.TRACE,e)},n.prototype._shouldLog=function(e){return this._minLevel===void 0||this._minLevel>=e},n}(),Ct,Et,Ht,b0=(Ct={},Ct[ie.CRITICAL]="",Ct[ie.ERROR]="",Ct[ie.WARNING]=" ",Ct[ie.INFO]=" ",Ct[ie.DEBUG]="",Ct[ie.TRACE]="",Ct),v0={black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,blackBright:90,redBright:91,greenBright:92,yellowBright:93,blueBright:94,magentaBright:95,cyanBright:96,whiteBright:97},w0={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBlackBright:100,bgRedBright:101,bgGreenBright:102,bgYellowBright:103,bgBlueBright:104,bgMagentaBright:105,bgCyanBright:106,bgWhiteBright:107};function Al(n,e,t){return function(r){return"\x1B[".concat(n,"m").concat(t?t(r):r,"\x1B[").concat(e,"m")}}function ct(n){return Al(v0[n],39)}function ms(n,e){return Al(w0[n],49,e)}var x0=(Et={},Et[ie.CRITICAL]=ct("red"),Et[ie.ERROR]=ct("redBright"),Et[ie.WARNING]=ct("yellow"),Et[ie.INFO]=ct("blue"),Et[ie.DEBUG]=ct("magenta"),Et[ie.TRACE]=Al(0,0),Et),Pg=(Ht={},Ht[ie.CRITICAL]=ms("bgRed",ct("white")),Ht[ie.ERROR]=ms("bgRedBright",ct("white")),Ht[ie.WARNING]=ms("bgYellow",ct("black")),Ht[ie.INFO]=ms("bgBlue",ct("white")),Ht[ie.DEBUG]=ms("bgMagenta",ct("black")),Ht[ie.TRACE]=Al(7,27),Ht),S0=function(n){gl(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.log=function(t,r){var i,a,s;if(!(t>this._minLevel)){var o=uv[t],u="";if(this._timestamps&&(u+="[".concat(new Date().toISOString(),"] ")),this._emoji){var h=b0[t];u+="".concat(h," ")}var m=(s=(i=this._colors)!==null&&i!==void 0?i:(a=process.stdout)===null||a===void 0?void 0:a.isTTY)!==null&&s!==void 0?s:!0;m?u+="".concat(Pg[t](this._name)," ").concat(Pg[t](ie[t])," ").concat(x0[t](r)):u+="[".concat(this._name,":").concat(ie[t].toLowerCase(),"] ").concat(r),o(u)}},e}(mv);function Tl(n){return n.custom?new y0(n):Rl?new S0(n):new f0(n)}let Ed=class extends Error{constructor(...e){var t;super(...e),Object.setPrototypeOf(this,new.target.prototype),(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}};class Dg extends Ed{}class _v extends Ed{}class Bg extends Ed{constructor(e){super(`Need to retry after ${e} ms`),this._retryAt=Date.now()+e}get retryAt(){return this._retryAt}}class Hd{constructor({logger:e}){this._queue=[],this._batchRunning=!1,this._paused=!1,this._logger=Tl({name:"rate-limiter",emoji:!0,...e})}async request(e,t){return this._logger.trace("request start"),await new Promise((r,i)=>{var a;const s={req:e,resolve:r,reject:i,limitReachedBehavior:(a=t==null?void 0:t.limitReachedBehavior)!==null&&a!==void 0?a:"enqueue"};this._batchRunning||this._nextBatchTimer||this._paused?(this._logger.trace(`request queued batchRunning:${this._batchRunning.toString()} hasNextBatchTimer:${(!!this._nextBatchTimer).toString()} paused:${this._paused.toString()}`),this._queue.push(s)):this._runRequestBatch([s])})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextBatch()}get stats(){var e,t,r,i,a;return{lastKnownLimit:(t=(e=this._parameters)===null||e===void 0?void 0:e.limit)!==null&&t!==void 0?t:null,lastKnownRemainingRequests:(i=(r=this._parameters)===null||r===void 0?void 0:r.remaining)!==null&&i!==void 0?i:null,lastKnownResetDate:Xe((a=this._parameters)===null||a===void 0?void 0:a.resetsAt,s=>new Date(s))}}async _runRequestBatch(e){this._logger.trace(`runRequestBatch start specs:${e.length}`),this._batchRunning=!0,this._parameters&&this._logger.debug(`Remaining requests: ${this._parameters.remaining}`),this._logger.debug(`Doing ${e.length} requests, new queue length is ${this._queue.length}`);const t=e.map(async s=>{const{req:o,resolve:u,reject:h}=s;try{const m=await this.doRequest(o),w=this.needsToRetryAfter(m);if(w!==null)throw this._queue.unshift(s),this._logger.info(`Retrying after ${w} ms`),new Bg(w);const g=this.getParametersFromResponse(m);return u(m),g}catch(m){if(m instanceof Bg)throw m;h(m);return}}),r=await Promise.allSettled(t),i=r.filter(s=>s.status==="rejected"),a=Date.now();if(i.length){this._logger.trace("runRequestBatch some rejected");const o=Math.max(a,...i.map(u=>u.reason.retryAt))-a;this._logger.warn(`Waiting for ${o} ms because the rate limit was exceeded`),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},o)}else{this._logger.trace("runRequestBatch none rejected");const s=r.filter(o=>o.status==="fulfilled"&&o.value!==void 0).map(o=>o.value).reduce((o,u)=>o?u.remaining<o.remaining?u:o:u,void 0);if(this._batchRunning=!1,s)if(this._parameters=s,s.resetsAt<a||s.remaining>0)this._logger.trace("runRequestBatch canRunMore"),this._runNextBatch();else{const o=s.resetsAt-a;this._logger.trace(`runRequestBatch delay:${o}`),this._logger.warn(`Waiting for ${o} ms because the rate limit was reached`),this._queue=this._queue.filter(u=>{switch(u.limitReachedBehavior){case"enqueue":return!0;case"null":return u.resolve(null),!1;case"throw":return u.reject(new _v("Request removed from queue because the rate limit was reached")),!1;default:throw new Error("this should never happen")}}),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},o)}}this._logger.trace("runRequestBatch end")}_runNextBatch(){if(this._paused)return;this._logger.trace("runNextBatch start"),this._nextBatchTimer&&(clearTimeout(this._nextBatchTimer),this._nextBatchTimer=void 0);const e=this._parameters?Math.min(this._parameters.remaining,this._parameters.limit/10):1,t=this._queue.splice(0,e);t.length&&this._runRequestBatch(t),this._logger.trace("runNextBatch end")}}class C0{constructor(e){this._children=new Map,this._paused=!1,this._partitionKeyCallback=e.getPartitionKey,this._createChildCallback=e.createChild}async request(e,t){const r=this._partitionKeyCallback(e);return await this._getChild(r).request(e,t)}clear(){for(const e of this._children.values())e.clear()}pause(){this._paused=!0;for(const e of this._children.values())e.pause()}resume(){this._paused=!1;for(const e of this._children.values())e.resume()}getChildStats(e){if(!this._children.has(e))return null;const t=this._children.get(e);return t instanceof Hd?t.stats:null}_getChild(e){if(this._children.has(e))return this._children.get(e);const t=this._createChildCallback(e);return this._paused&&t.pause(),this._children.set(e,t),t}}class E0{constructor({logger:e,bucketSize:t,timeFrame:r,doRequest:i,getPartitionKey:a}){this._partitionedQueue=new Map,this._usedFromBucket=new Map,this._counterTimers=new Set,this._paused=!1,this._destroyed=!1,this._logger=Tl({name:"rate-limiter",emoji:!0,...e}),this._bucketSize=t,this._timeFrame=r,this._callback=i,this._partitionKeyCallback=a}async request(e,t){return await new Promise((r,i)=>{var a,s;if(this._destroyed){i(new Dg("Rate limiter was destroyed"));return}const o={req:e,resolve:r,reject:i,limitReachedBehavior:(a=t==null?void 0:t.limitReachedBehavior)!==null&&a!==void 0?a:"enqueue"},u=this._partitionKeyCallback(e),h=(s=this._usedFromBucket.get(u))!==null&&s!==void 0?s:0;if(h>=this._bucketSize||this._paused)switch(o.limitReachedBehavior){case"enqueue":{const m=this._getPartitionedQueue(u);m.push(o),h+m.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} for ${u?`partition ${u}`:"default partition"} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${m.length}`):this._logger.info(`Enqueueing request for ${u?`partition ${u}`:"default partition"} because the rate limiter is paused; queue size is ${m.length}`);break}case"null":{o.resolve(null),this._paused?this._logger.info(`Returning null for request for ${u?`partition ${u}`:"default partition"} because the rate limiter is paused`):this._logger.warn(`Rate limit of ${this._bucketSize} for ${u?`partition ${u}`:"default partition"} was reached, dropping request and returning null`);break}case"throw":{o.reject(new _v(`Request dropped because ${this._paused?"the rate limiter is paused":`the rate limit for ${u?`partition ${u}`:"default partition"} was reached`}`));break}default:throw new Error("this should never happen")}else this._runRequest(o,u)})}clear(){this._partitionedQueue.clear()}pause(){this._paused=!0}resume(){this._paused=!1;for(const e of this._partitionedQueue.keys())this._runNextRequest(e)}destroy(){this._paused=!1,this._destroyed=!0,this._counterTimers.forEach(e=>{clearTimeout(e)});for(const e of this._partitionedQueue.values())for(const t of e)t.reject(new Dg("Rate limiter was destroyed"));this._partitionedQueue.clear()}_getPartitionedQueue(e){if(this._partitionedQueue.has(e))return this._partitionedQueue.get(e);const t=[];return this._partitionedQueue.set(e,t),t}async _runRequest(e,t){var r;const i=this._getPartitionedQueue(t);this._logger.debug(`doing a request for ${t?`partition ${t}`:"default partition"}, new queue length is ${i.length}`),this._usedFromBucket.set(t,((r=this._usedFromBucket.get(t))!==null&&r!==void 0?r:0)+1);const{req:a,resolve:s,reject:o}=e;try{s(await this._callback(a))}catch(u){o(u)}finally{const u=setTimeout(()=>{this._counterTimers.delete(u);const h=this._usedFromBucket.get(t)-1;this._usedFromBucket.set(t,h),i.length&&h<this._bucketSize&&this._runNextRequest(t)},this._timeFrame);this._counterTimers.add(u)}}_runNextRequest(e){if(this._paused)return;const r=this._getPartitionedQueue(e).shift();r&&this._runRequest(r,e)}}var gv=cy();const H0=ir(gv);var R0=dy();const fv=ir(R0);hy();ad();const c=Symbol("twurpleRawData");class K{constructor(e){this[c]=e}}class ji extends Error{constructor(e,t){var r;super(e,t),Object.setPrototypeOf(this,new.target.prototype),(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}}class A0 extends ji{constructor(){super("Relation returned null - this may be a library bug or a race condition in your own code")}}function te(n){if(n==null)throw new A0;return n}function L(n,e,t){return r=>{const i=t?function(){return`[${e}#${this[t]} - please check https://twurple.js.org/reference/${n}/classes/${e}.html for available properties]`}:function(){return`[${e} - please check https://twurple.js.org/reference/${n}/classes/${e}.html for available properties]`};Object.defineProperty(r.prototype,Symbol.for("nodejs.util.inspect.custom"),{value:i,enumerable:!1})}}let gc=class extends K{get authorName(){return this[c].author_name}get bitsEnabled(){return this[c].bits_enabled}get installable(){return this[c].can_install}get configurationLocation(){return this[c].configuration_location}get description(){return this[c].description}get tosUrl(){return this[c].eula_tos_url}get hasChatSupport(){return this[c].has_chat_support}get iconUrl(){return this[c].icon_url}getIconUrl(e){return this[c].icon_urls[e]}get id(){return this[c].id}get name(){return this[c].name}get privacyPolicyUrl(){return this[c].privacy_policy_url}get requestsIdentityLink(){return this[c].request_identity_link}get screenshotUrls(){return this[c].screenshot_urls}get state(){return this[c].state}get subscriptionsSupportLevel(){return this[c].subscriptions_support_level}get summary(){return this[c].summary}get supportEmail(){return this[c].support_email}get version(){return this[c].version}get viewerSummary(){return this[c].viewer_summary}get viewerSummery(){return this[c].viewer_summary}get allowedConfigUrls(){return this[c].allowlisted_config_urls}get allowedPanelUrls(){return this[c].allowlisted_panel_urls}get mobileViewerUrl(){var e,t;return(t=(e=this[c].views.mobile)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get panelViewerUrl(){var e,t;return(t=(e=this[c].views.panel)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get panelHeight(){var e,t;return(t=(e=this[c].views.panel)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:null}get panelCanLinkExternalContent(){var e,t;return(t=(e=this[c].views.panel)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}get overlayViewerUrl(){var e,t;return(t=(e=this[c].views.video_overlay)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get overlayCanLinkExternalContent(){var e,t;return(t=(e=this[c].views.video_overlay)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}get componentViewerUrl(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get componentAspectWidth(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.aspect_width)!==null&&t!==void 0?t:null}get componentAspectHeight(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.aspect_height)!==null&&t!==void 0?t:null}get componentAspectRatioX(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.aspect_ratio_x)!==null&&t!==void 0?t:null}get componentAspectRatioY(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.aspect_ratio_y)!==null&&t!==void 0?t:null}get componentAutoScales(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.autoscale)!==null&&t!==void 0?t:null}get componentScalePixels(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.scale_pixels)!==null&&t!==void 0?t:null}get componentTargetHeight(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.target_height)!==null&&t!==void 0?t:null}get componentSize(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.size)!==null&&t!==void 0?t:null}get componentZoom(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.zoom)!==null&&t!==void 0?t:null}get componentZoomPixels(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.zoom_pixels)!==null&&t!==void 0?t:null}get componentCanLinkExternalContent(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}get configViewerUrl(){var e,t;return(t=(e=this[c].views.config)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get configCanLinkExternalContent(){var e,t;return(t=(e=this[c].views.config)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}};gc=P([L("api","HelixExtension","id")],gc);class Pi extends ji{constructor(e){super(`${e} - this should never happen, please file a bug in the GitHub issue tracker`)}}function R(n){return typeof n=="string"?n:typeof n=="number"?n.toString(10):n.id}function Ss(n){return typeof n=="string"?n:n.name}class Di extends ji{constructor(e,t,r,i,a,s){super(`Encountered HTTP status code ${e}: ${t}

URL: ${r}
Method: ${i}
Body:
${!s&&a.length>150?`${a.slice(0,147)}...`:a}`),this._statusCode=e,this._url=r,this._method=i,this._body=a}get statusCode(){return this._statusCode}get url(){return this._url}get method(){return this._method}get body(){return this._body}}async function fc(n,e){var t;if(!n.ok){const r=n.headers.get("Content-Type")==="application/json",i=r?JSON.stringify(await n.json(),null,2):await n.text(),a=fv(e.query,{arrayFormat:"repeat",addQueryPrefix:!0}),s=`${e.url}${a}`;throw new Di(n.status,n.statusText,s,(t=e.method)!==null&&t!==void 0?t:"GET",i,r)}}async function yv(n){if(n.status===204)return;const e=await n.text();if(e)return JSON.parse(e)}function T0(n,e,t){switch(e){case"helix":{const r=n.replace(/^\//,"");return t?r==="eventsub/subscriptions"?`http://localhost:${t}/${r}`:`http://localhost:${t}/mock/${r}`:`https://api.twitch.tv/helix/${r}`}case"auth":return`https://id.twitch.tv/oauth2/${n.replace(/^\//,"")}`;case"custom":return n;default:return n}}async function Il(n,e,t,r,i={},a){var s,o;const u=(s=n.type)!==null&&s!==void 0?s:"helix",h=T0(n.url,u,a),m=fv(n.query,{arrayFormat:"repeat",addQueryPrefix:!0}),w=new gv.Headers({Accept:"application/json"});let g;n.jsonBody&&(g=JSON.stringify(n.jsonBody),w.append("Content-Type","application/json")),e&&u!=="auth"&&w.append("Client-ID",e),t&&w.append("Authorization",`${u==="helix"?r??"Bearer":"OAuth"} ${t}`);const _={...i,method:(o=n.method)!==null&&o!==void 0?o:"GET",headers:w,body:g};return await H0(`${h}${m}`,_)}async function bv(n,e,t,r,i={}){const a=await Il(n,e,t,r,i);return await fc(a,n),await yv(a)}function pe(n){return{broadcaster_id:R(n)}}class I0 extends ji{}class P0 extends Hd{async doRequest({options:e,clientId:t,accessToken:r,authorizationType:i,fetchOptions:a,mockServerPort:s}){return await Il(e,t,r,i,a,s)}needsToRetryAfter(e){return e.status===429&&(!e.headers.has("ratelimit-remaining")||Number(e.headers.get("ratelimit-remaining"))===0)?+e.headers.get("ratelimit-reset")*1e3-Date.now():null}getParametersFromResponse(e){const{headers:t}=e;return{limit:+t.get("ratelimit-limit"),remaining:+t.get("ratelimit-remaining"),resetsAt:+t.get("ratelimit-reset")*1e3}}}function D0(n){switch(typeof n){case"undefined":return"";case"object":{if(n===null)return"";if("cacheKey"in n)return n.cacheKey;const e=JSON.stringify(n);if(e!=="{}")return e}default:return n.toString()}}function vv(n,e,t){return[n,...e.map(D0)].join("/")+(t?"/":"")}const bt=Symbol("cache");function to(n){var e,t;return t=class extends n{constructor(){super(...arguments),this[e]=new Map}getFromCache(r){if(this._cleanCache(),this[bt].has(r)){const i=this[bt].get(r);if(i)return i.value}}setCache(r,i,a){this[bt].set(r,{value:i,expires:Date.now()+a*1e3})}removeFromCache(r,i){const a=this._getInternalCacheKey(r,i);i?this[bt].forEach((s,o)=>{o.startsWith(a)&&this[bt].delete(o)}):this[bt].delete(a)}_cleanCache(){const r=Date.now();this[bt].forEach((i,a)=>{i.expires<r&&this[bt].delete(a)})}_getInternalCacheKey(r,i){if(typeof r=="string"){let a=r;return a.endsWith("/")||(a+="/"),a}else{const a=r.shift();return vv(a,r,i)}}},e=bt,t}function ge(n=1/0){return function(e,t,r){if(r.get){const i=r.get;r.get=function(){const a=vv(t,[]),s=this.getFromCache(a);if(s)return s;const o=i.call(this);return this.setCache(a,o,n),o}}return r}}class B0{constructor(e,t,r,i=!1){this.owner=e,this.event=t,this.listener=r,this._internal=i}unbind(){this.owner.removeListener(this)}}class Pl{constructor(){this._eventListeners=new Map,this._internalEventListeners=new Map}on(e,t){return this._addListener(!1,e,t)}addListener(e,t){return this._addListener(!1,e,t)}removeListener(e,t){this._removeListener(!1,e,t)}registerEvent(){const e=t=>this.addListener(e,t);return e}emit(e,...t){if(this._eventListeners.has(e))for(const r of this._eventListeners.get(e))r(...t);if(this._internalEventListeners.has(e))for(const r of this._internalEventListeners.get(e))r(...t)}registerInternalEvent(){const e=t=>this.addInternalListener(e,t);return e}addInternalListener(e,t){return this._addListener(!0,e,t)}removeInternalListener(e,t){this._removeListener(!0,e,t)}_addListener(e,t,r){const i=e?this._eventListeners:this._internalEventListeners;return i.has(t)?i.get(t).push(r):i.set(t,[r]),new B0(this,t,r,e)}_removeListener(e,t,r){const i=e?this._eventListeners:this._internalEventListeners;if(!t)i.clear();else if(typeof t=="object"){const a=t;this._removeListener(a._internal,a.event,a.listener)}else{const a=t;if(i.has(a))if(r){const s=i.get(a);let o=0;for(;(o=s.indexOf(r))!==-1;)s.splice(o,1)}else i.delete(a)}}}const O0=6e4;function U0(n){return Xe(n.expiresIn,e=>n.obtainmentTimestamp+e*1e3-O0)}function yc(n){var e;return(e=Xe(U0(n),t=>Date.now()>t))!==null&&e!==void 0?e:!1}class q0 extends ji{constructor(e){super("Invalid token supplied",e)}}function k0(n,e){return{grant_type:"client_credentials",client_id:n,client_secret:e}}let bc=class extends K{constructor(e){super(e),this._obtainmentDate=new Date}get clientId(){return this[c].client_id}get userId(){var e;return(e=this[c].user_id)!==null&&e!==void 0?e:null}get userName(){var e;return(e=this[c].login)!==null&&e!==void 0?e:null}get scopes(){return this[c].scopes}get expiryDate(){return Xe(this[c].expires_in,e=>new Date(this._obtainmentDate.getTime()+e*1e3))}};bc=P([L("auth","TokenInfo","clientId")],bc);function M0(n){var e,t;return{accessToken:n.access_token,refreshToken:n.refresh_token||null,scope:(e=n.scope)!==null&&e!==void 0?e:[],expiresIn:(t=n.expires_in)!==null&&t!==void 0?t:null,obtainmentTimestamp:Date.now()}}async function j0(n,e){return M0(await bv({type:"auth",url:"token",method:"POST",query:k0(n,e)}))}class L0{constructor(e){this._newTokenScopeSets=[],this._newTokenPromise=null,this._queuedScopeSets=[],this._queueExecutor=null,this._queuePromise=null,this._executor=e}async fetch(...e){var t;const r=e.filter(o=>!!o);if(this._newTokenPromise){if(!r.length)return await this._newTokenPromise;if(this._queueExecutor?this._queuedScopeSets.push(...r):this._queuedScopeSets=[...r],!this._queuePromise){const{promise:o,resolve:u,reject:h}=Bo();this._queuePromise=o,this._queueExecutor=async()=>{var m;if(this._queuePromise){this._newTokenScopeSets=this._queuedScopeSets,this._queuedScopeSets=[],this._newTokenPromise=this._queuePromise,this._queuePromise=null,this._queueExecutor=null;try{u(await this._executor(this._newTokenScopeSets))}catch(w){h(w)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(m=this._queueExecutor)===null||m===void 0||m.call(this)}}}}return await this._queuePromise}this._newTokenScopeSets=[...r];const{promise:i,resolve:a,reject:s}=Bo();this._newTokenPromise=i;try{a(await this._executor(this._newTokenScopeSets))}catch(o){s(o)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(t=this._queueExecutor)===null||t===void 0||t.call(this)}return await i}}let Bi=class{constructor(e,t,r=[]){this._clientId=e,this._clientSecret=t,this._impliedScopes=r,this._fetcher=new L0(async i=>await this._fetch(i))}get clientId(){return this._clientId}get currentScopes(){return this._impliedScopes}async getAccessTokenForUser(e,...t){if(t.every(r=>{var i;return(i=r==null?void 0:r.some(a=>this._impliedScopes.includes(a)))!==null&&i!==void 0?i:!0}))return{...await this.getAppAccessToken(),userId:R(e)};throw new Error("Can not get user access token for AppTokenAuthProvider")}getCurrentScopesForUser(){return this._impliedScopes}async getAnyAccessToken(){return await this._fetcher.fetch()}async getAppAccessToken(e=!1){return e&&(this._token=void 0),await this._fetcher.fetch()}async _fetch(e){if(e.length>0)for(const t of e)if(this._impliedScopes.length){if(t.every(r=>!this._impliedScopes.includes(r)))throw new Error(`One of the scopes ${t.join(", ")} requested but only the scope ${this._impliedScopes.join(", ")} is implied`)}else throw new Error(`One of the scopes ${t.join(", ")} requested but the client credentials flow does not support scopes`);return!this._token||yc(this._token)?this._token=await j0(this._clientId,this._clientSecret):this._token}};P([V(!1)],Bi.prototype,"_clientSecret",void 0);P([V(!1)],Bi.prototype,"_token",void 0);P([V(!1)],Bi.prototype,"_fetcher",void 0);Bi=P([L("auth","AppTokenAuthProvider","clientId")],Bi);var N0=Ry();function F0(n={}){const{count:e=10,period:t="all",startDate:r,contextUserId:i}=n;return{count:e.toString(),period:t,started_at:r==null?void 0:r.toISOString(),user_id:i}}class be{constructor(e){this._client=e}_getUserContextIdWithDefault(e){var t;return(t=this._client._getUserIdFromRequestContext(e))!==null&&t!==void 0?t:e}}P([V(!1)],be.prototype,"_client",void 0);let Uo=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}get rank(){return this[c].rank}get amount(){return this[c].score}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};P([V(!1)],Uo.prototype,"_client",void 0);Uo=P([L("api","HelixBitsLeaderboardEntry","userId")],Uo);let As=class extends K{constructor(e,t){super(e),this._client=t}get entries(){return this[c].data.map(e=>new Uo(e,this._client))}get totalCount(){return this[c].total}};P([V(!1)],As.prototype,"_client",void 0);P([ge()],As.prototype,"entries",null);As=P([to,L("api","HelixBitsLeaderboard")],As);let vc=class extends K{constructor(e){super(cv(e,t=>t.prefix.toLowerCase()))}getCheermoteDisplayInfo(e,t,r){e=e.toLowerCase();const{background:i,state:a,scale:s}=r,{tiers:o}=this[c][e],u=o.sort((h,m)=>m.min_bits-h.min_bits).find(h=>h.min_bits<=t);if(!u)throw new Pi(`Cheermote "${e}" does not have an applicable tier for ${t} bits`);return{url:u.images[i][a][s],color:u.color}}getPossibleNames(){return Object.keys(this[c])}};vc=P([L("api","HelixCheermoteList")],vc);let wc=class extends be{async getLeaderboard(e,t={}){const r=await this._client.callApi({type:"helix",url:"bits/leaderboard",userId:R(e),scopes:["bits:read"],query:F0(t)});return new As(r,this._client)}async getCheermotes(e){const t=await this._client.callApi({type:"helix",url:"bits/cheermotes",userId:dt(e,R),query:dt(e,pe)});return new vc(t.data)}};wc=P([L("api","HelixBitsApi")],wc);function $0(n){var e;return{game_id:n.gameId,broadcaster_language:n.language,title:n.title,delay:(e=n.delay)===null||e===void 0?void 0:e.toString(),tags:n.tags,content_classification_labels:n.contentClassificationLabels,is_branded_content:n.isBrandedContent}}function G0(n,e){return{broadcaster_id:R(n),length:e}}function Og(n,e){return{broadcaster_id:R(n),user_id:R(e)}}function Zu(n,e){return{broadcaster_id:R(n),user_id:dt(e,R)}}function Ug(n,e){return{broadcaster_id:dt(e,R),user_id:R(n)}}function me(n,e){return{[n]:e}}function qg(n){return{user_id:R(n)}}function wv(n,e){return{broadcaster_id:n,moderator_id:e}}function Dl(n,e){return{broadcaster_id:R(n),id:e}}function xv(n,e){return{broadcaster_id:R(n),user_id:e.map(R)}}let tr=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].user_id}get name(){return this[c].user_login}get displayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};P([V(!1)],tr.prototype,"_client",void 0);tr=P([L("api","HelixUserRelation","id")],tr);class Ze{constructor(e,t,r,i,a,s=100){this._callOptions=e,this._queryParamName=t,this._matchKey=r,this._mapper=a,this._limitPerRequest=s,this._requestedIds=[],this._requestResolversById=new Map,this._waitTimer=null,this._client=i,this._delay=i._batchDelay}async request(e){const{promise:t,resolve:r,reject:i}=Bo();return this._requestedIds.includes(e)||this._requestedIds.push(e),this._requestResolversById.has(e)?this._requestResolversById.get(e).push({resolve:r,reject:i}):this._requestResolversById.set(e,[{resolve:r,reject:i}]),this._waitTimer&&(clearTimeout(this._waitTimer),this._waitTimer=null),this._requestedIds.length>=this._limitPerRequest?this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest)):this._waitTimer=setTimeout(()=>{this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest))},this._delay),await t}async _handleBatch(e){var t;try{const{data:r}=await this._doRequest(e),i=cv(r,this._matchKey);for(const a of e){for(const s of(t=this._requestResolversById.get(a))!==null&&t!==void 0?t:[])Object.prototype.hasOwnProperty.call(i,a)?s.resolve(this._mapper(i[a])):s.resolve(null);this._requestResolversById.delete(a)}}catch{await Promise.all(e.map(async i=>{var a,s;try{const o=await this._doRequest([i]);for(const u of(a=this._requestResolversById.get(i))!==null&&a!==void 0?a:[])u.resolve(o.data.length?this._mapper(o.data[0]):null)}catch(o){for(const u of(s=this._requestResolversById.get(i))!==null&&s!==void 0?s:[])u.reject(o)}this._requestResolversById.delete(i)}))}}async _doRequest(e){return await this._client.callApi({type:"helix",...this._callOptions,query:{...this._callOptions.query,[this._queryParamName]:e}})}}P([V(!1)],Ze.prototype,"_client",void 0);var ec;Object.prototype.hasOwnProperty.call(Symbol,"asyncIterator")||(Symbol.asyncIterator=(ec=Symbol.asyncIterator)!==null&&ec!==void 0?ec:Symbol.for("Symbol.asyncIterator"));let fe=class{constructor(e,t,r,i=100){this._callOptions=e,this._mapper=r,this._limitPerPage=i,this._isFinished=!1,this._client=t}get current(){var e;return(e=this._currentData)===null||e===void 0?void 0:e.data}async getNext(){var e;if(this._isFinished)return[];const t=await this._fetchData();return!((e=t.data)===null||e===void 0)&&e.length?this._processResult(t):(this._isFinished=!0,[])}async getAll(){this.reset();const e=[];do{const t=await this.getNext();if(!t.length)break;e.push(...t)}while(this._currentCursor);return this.reset(),e}get currentCursor(){return this._currentCursor}reset(){this._currentCursor=void 0,this._isFinished=!1,this._currentData=void 0}async*[Symbol.asyncIterator](){for(this.reset();;){const e=await this.getNext();if(!e.length)break;yield*e[Symbol.iterator]()}}async _fetchData(e={}){return await this._client.callApi({type:"helix",...this._callOptions,...e,query:{...this._callOptions.query,after:this._currentCursor,first:this._limitPerPage.toString(),...e.query}})}_processResult(e){var t;return this._currentCursor=typeof e.pagination=="string"?e.pagination:(t=e.pagination)===null||t===void 0?void 0:t.cursor,this._currentCursor===void 0&&(this._isFinished=!0),this._currentData=e,e.data.reduce((r,i)=>{const a=this._mapper(i);return Array.isArray(a)?[...r,...a]:[...r,a]},[])}};P([V(!1)],fe.prototype,"_client",void 0);fe=P([L("api","HelixPaginatedRequest")],fe);let nr=class extends fe{async getTotalCount(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).total}};nr=P([L("api","HelixPaginatedRequestWithTotal")],nr);function xe(n,e,t){var r;let i;return{get data(){var a,s;return i??(i=(s=(a=n.data)===null||a===void 0?void 0:a.map(o=>new e(o,t)))!==null&&s!==void 0?s:[])},cursor:typeof n.pagination=="string"?n.pagination:(r=n.pagination)===null||r===void 0?void 0:r.cursor}}function It(n,e,t){let r;return{get data(){var i,a;return r??(r=(a=(i=n.data)===null||i===void 0?void 0:i.map(s=>new e(s,t)))!==null&&a!==void 0?a:[])},cursor:n.pagination.cursor,total:n.total}}function de({after:n,before:e,limit:t}={}){return{after:n,before:e,first:t==null?void 0:t.toString()}}let Ci=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].broadcaster_id}get name(){return this[c].broadcaster_login}get displayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get language(){return this[c].broadcaster_language}get gameId(){return this[c].game_id}get gameName(){return this[c].game_name}async getGame(){return this[c].game_id?te(await this._client.games.getGameById(this[c].game_id)):null}get title(){return this[c].title}get delay(){return this[c].delay}get tags(){return this[c].tags}get contentClassificationLabels(){return this[c].content_classification_labels}get isBrandedContent(){return this[c].is_branded_content}};P([V(!1)],Ci.prototype,"_client",void 0);Ci=P([L("api","HelixChannel","id")],Ci);let qo=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get creationDate(){return new Date(this[c].created_at)}};P([V(!1)],qo.prototype,"_client",void 0);qo=P([L("api","HelixChannelEditor","userId")],qo);let Ts=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get followDate(){return new Date(this[c].followed_at)}};P([V(!1)],Ts.prototype,"_client",void 0);Ts=P([L("api","HelixChannelFollower","userId")],Ts);let Is=class extends K{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get followDate(){return new Date(this[c].followed_at)}};P([V(!1)],Is.prototype,"_client",void 0);Is=P([L("api","HelixFollowedChannel","broadcasterId")],Is);let xc=class extends K{get snoozeCount(){return this[c].snooze_count}get snoozeRefreshDate(){return this[c].snooze_refresh_at?new Date(this[c].snooze_refresh_at*1e3):null}get nextAdDate(){return this[c].next_ad_at?new Date(this[c].next_ad_at*1e3):null}get duration(){return this[c].duration}get lastAdDate(){return this[c].last_ad_at?new Date(this[c].last_ad_at*1e3):null}get prerollFreeTime(){return this[c].preroll_free_time}};xc=P([L("api","HelixAdSchedule")],xc);let Sc=class extends K{get snoozeCount(){return this[c].snooze_count}get snoozeRefreshDate(){return new Date(this[c].snooze_refresh_at*1e3)}get nextAdDate(){return new Date(this[c].next_ad_at*1e3)}};Sc=P([L("api","HelixSnoozeNextAdResult")],Sc);let ko=class extends be{constructor(){super(...arguments),this._getChannelByIdBatcher=new Ze({url:"channels"},"broadcaster_id","broadcaster_id",this._client,e=>new Ci(e,this._client))}async getChannelInfoById(e){const t=R(e),r=await this._client.callApi({type:"helix",url:"channels",userId:t,query:pe(t)});return Xe(r.data[0],i=>new Ci(i,this._client))}async getChannelInfoByIdBatched(e){return await this._getChannelByIdBatcher.request(R(e))}async getChannelInfoByIds(e){const t=e.map(R);return(await this._client.callApi({type:"helix",url:"channels",query:me("broadcaster_id",t)})).data.map(i=>new Ci(i,this._client))}async updateChannelInfo(e,t){await this._client.callApi({type:"helix",url:"channels",method:"PATCH",userId:R(e),scopes:["channel:manage:broadcast"],query:pe(e),jsonBody:$0(t)})}async startChannelCommercial(e,t){await this._client.callApi({type:"helix",url:"channels/commercial",method:"POST",userId:R(e),scopes:["channel:edit:commercial"],jsonBody:G0(e,t)})}async getChannelEditors(e){return(await this._client.callApi({type:"helix",url:"channels/editors",userId:R(e),scopes:["channel:read:editors"],query:pe(e)})).data.map(r=>new qo(r,this._client))}async getVips(e,t){const r=await this._client.callApi({type:"helix",url:"channels/vips",userId:R(e),scopes:["channel:read:vips","channel:manage:vips"],query:{...pe(e),...de(t)}});return xe(r,tr,this._client)}getVipsPaginated(e){return new fe({url:"channels/vips",userId:R(e),scopes:["channel:read:vips","channel:manage:vips"],query:pe(e)},this._client,t=>new tr(t,this._client))}async checkVipForUsers(e,t){return(await this._client.callApi({type:"helix",url:"channels/vips",userId:R(e),scopes:["channel:read:vips","channel:manage:vips"],query:xv(e,t)})).data.map(i=>new tr(i,this._client))}async checkVipForUser(e,t){const r=R(t);return(await this.checkVipForUsers(e,[r])).some(a=>a.id===r)}async addVip(e,t){await this._client.callApi({type:"helix",url:"channels/vips",method:"POST",userId:R(e),scopes:["channel:manage:vips"],query:Og(e,t)})}async removeVip(e,t){await this._client.callApi({type:"helix",url:"channels/vips",method:"DELETE",userId:R(e),scopes:["channel:manage:vips"],query:Og(e,t)})}async getChannelFollowerCount(e){return(await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:R(e),query:{...Zu(e),...de({limit:1})}})).total}async getChannelFollowers(e,t,r){const i=await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:R(e),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:{...Zu(e,t),...de(r)}});return It(i,Ts,this._client)}getChannelFollowersPaginated(e){return new nr({url:"channels/followers",method:"GET",userId:R(e),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:Zu(e)},this._client,t=>new Ts(t,this._client))}async getFollowedChannels(e,t,r){const i=await this._client.callApi({type:"helix",url:"channels/followed",method:"GET",userId:R(e),scopes:["user:read:follows"],query:{...Ug(e,t),...de(r)}});return It(i,Is,this._client)}getFollowedChannelsPaginated(e,t){return new nr({url:"channels/followed",method:"GET",userId:R(e),scopes:["user:read:follows"],query:Ug(e,t)},this._client,r=>new Is(r,this._client))}async getAdSchedule(e){const t=await this._client.callApi({type:"helix",url:"channels/ads",method:"GET",userId:R(e),scopes:["channel:read:ads"],query:pe(e)});return new xc(t.data[0])}async snoozeNextAd(e){const t=await this._client.callApi({type:"helix",url:"channels/ads/schedule/snooze",method:"POST",userId:R(e),scopes:["channel:manage:ads"],query:pe(e)});return new Sc(t.data[0])}};P([V(!1)],ko.prototype,"_getChannelByIdBatcher",void 0);ko=P([L("api","HelixChannelApi")],ko);function Q0(n,e){return{broadcaster_id:R(n),only_manageable_rewards:e==null?void 0:e.toString()}}function kg(n,e){return{broadcaster_id:R(n),id:e}}function Mg(n){var e,t,r;const i={title:n.title,cost:n.cost,prompt:n.prompt,background_color:n.backgroundColor,is_enabled:n.isEnabled,is_user_input_required:n.userInputRequired,should_redemptions_skip_request_queue:n.autoFulfill};return n.maxRedemptionsPerStream!==void 0&&(i.is_max_per_stream_enabled=!!n.maxRedemptionsPerStream,i.max_per_stream=(e=n.maxRedemptionsPerStream)!==null&&e!==void 0?e:0),n.maxRedemptionsPerUserPerStream!==void 0&&(i.is_max_per_user_per_stream_enabled=!!n.maxRedemptionsPerUserPerStream,i.max_per_user_per_stream=(t=n.maxRedemptionsPerUserPerStream)!==null&&t!==void 0?t:0),n.globalCooldown!==void 0&&(i.is_global_cooldown_enabled=!!n.globalCooldown,i.global_cooldown_seconds=(r=n.globalCooldown)!==null&&r!==void 0?r:0),"isPaused"in n&&(i.is_paused=n.isPaused),i}function jg(n,e,t){return{broadcaster_id:R(n),reward_id:e,id:t}}function Lg(n,e,t,r){return{broadcaster_id:R(n),reward_id:e,status:t,sort:r.newestFirst?"NEWEST":"OLDEST"}}let Jt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}getImageUrl(e){var t,r;const i=`url_${e}x`;return(r=(t=this[c].image)===null||t===void 0?void 0:t[i])!==null&&r!==void 0?r:this[c].default_image[i]}get backgroundColor(){return this[c].background_color}get isEnabled(){return this[c].is_enabled}get cost(){return this[c].cost}get title(){return this[c].title}get prompt(){return this[c].prompt}get userInputRequired(){return this[c].is_user_input_required}get maxRedemptionsPerStream(){return this[c].max_per_stream_setting.is_enabled?this[c].max_per_stream_setting.max_per_stream:null}get maxRedemptionsPerUserPerStream(){return this[c].max_per_user_per_stream_setting.is_enabled?this[c].max_per_user_per_stream_setting.max_per_user_per_stream:null}get globalCooldown(){return this[c].global_cooldown_setting.is_enabled?this[c].global_cooldown_setting.global_cooldown_seconds:null}get isPaused(){return this[c].is_paused}get isInStock(){return this[c].is_in_stock}get redemptionsThisStream(){return this[c].redemptions_redeemed_current_stream}get autoFulfill(){return this[c].should_redemptions_skip_request_queue}get cooldownExpiryDate(){return this[c].cooldown_expires_at?new Date(this[c].cooldown_expires_at):null}};P([V(!1)],Jt.prototype,"_client",void 0);Jt=P([L("api","HelixCustomReward","id")],Jt);let Yt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get userInput(){return this[c].user_input}get isFulfilled(){return this[c].status==="FULFILLED"}get isCanceled(){return this[c].status==="CANCELED"}get redemptionDate(){return new Date(this[c].redeemed_at)}get rewardId(){return this[c].reward.id}get rewardTitle(){return this[c].reward.title}get rewardPrompt(){return this[c].reward.prompt}get rewardCost(){return this[c].reward.cost}async getReward(){return te(await this._client.channelPoints.getCustomRewardById(this[c].broadcaster_id,this[c].reward.id))}async updateStatus(e){return(await this._client.channelPoints.updateRedemptionStatusByIds(this[c].broadcaster_id,this[c].reward.id,[this[c].id],e))[0]}};P([V(!1)],Yt.prototype,"_client",void 0);Yt=P([L("api","HelixCustomRewardRedemption","id")],Yt);let Cc=class extends be{async getCustomRewards(e,t){return(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:R(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:Q0(e,t)})).data.map(i=>new Jt(i,this._client))}async getCustomRewardsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:R(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:Dl(e,t)})).data.map(i=>new Jt(i,this._client)):[]}async getCustomRewardById(e,t){const r=await this.getCustomRewardsByIds(e,[t]);return r.length?r[0]:null}async createCustomReward(e,t){const r=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"POST",userId:R(e),scopes:["channel:manage:redemptions"],query:pe(e),jsonBody:Mg(t)});return new Jt(r.data[0],this._client)}async updateCustomReward(e,t,r){const i=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"PATCH",userId:R(e),scopes:["channel:manage:redemptions"],query:kg(e,t),jsonBody:Mg(r)});return new Jt(i.data[0],this._client)}async deleteCustomReward(e,t){await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"DELETE",userId:R(e),scopes:["channel:manage:redemptions"],query:kg(e,t)})}async getRedemptionsByIds(e,t,r){return r.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:R(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:jg(e,t,r)})).data.map(a=>new Yt(a,this._client)):[]}async getRedemptionById(e,t,r){const i=await this.getRedemptionsByIds(e,t,[r]);return i.length?i[0]:null}async getRedemptionsForBroadcaster(e,t,r,i){const a=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:R(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:{...Lg(e,t,r,i),...de(i)}});return xe(a,Yt,this._client)}getRedemptionsForBroadcasterPaginated(e,t,r,i){return new fe({url:"channel_points/custom_rewards/redemptions",userId:R(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:Lg(e,t,r,i)},this._client,a=>new Yt(a,this._client),50)}async updateRedemptionStatusByIds(e,t,r,i){return r.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",method:"PATCH",userId:R(e),scopes:["channel:manage:redemptions"],query:jg(e,t,r),jsonBody:{status:i}})).data.map(s=>new Yt(s,this._client)):[]}};Cc=P([L("api","HelixChannelPointsApi")],Cc);let Ps=class extends K{get value(){return this[c].value}get decimalPlaces(){return this[c].decimal_places}get localizedValue(){return this.value/10**this.decimalPlaces}get currency(){return this[c].currency}};Ps=P([L("api","HelixCharityCampaignAmount")],Ps);let Mo=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get charityName(){return this[c].charity_name}get charityDescription(){return this[c].charity_description}get charityLogo(){return this[c].charity_logo}get charityWebsite(){return this[c].charity_website}get currentAmount(){return new Ps(this[c].current_amount)}get targetAmount(){return new Ps(this[c].target_amount)}};P([V(!1)],Mo.prototype,"_client",void 0);Mo=P([L("api","HelixCharityCampaign","id")],Mo);let jo=class extends K{constructor(e,t){super(e),this._client=t}get campaignId(){return this[c].campaign_id}get donorId(){return this[c].user_id}get donorName(){return this[c].user_login}get donorDisplayName(){return this[c].user_name}async getDonor(){return te(await this._client.users.getUserById(this[c].user_id))}get amount(){return new Ps(this[c].amount)}};P([V(!1)],jo.prototype,"_client",void 0);jo=P([L("api","HelixCharityCampaignDonation")],jo);let Ec=class extends be{async getCharityCampaign(e){const t=await this._client.callApi({type:"helix",url:"charity/campaigns",method:"GET",userId:R(e),scopes:["channel:read:charity"],query:pe(e)});return new Mo(t.data[0],this._client)}async getCharityCampaignDonations(e,t){const r=await this._client.callApi({type:"helix",url:"charity/donations",userId:R(e),scopes:["channel:read:charity"],query:{...pe(e),...de(t)}});return xe(r,jo,this._client)}};Ec=P([L("api","HelixCharityApi")],Ec);function W0(n){return{slow_mode:n.slowModeEnabled,slow_mode_wait_time:n.slowModeDelay,follower_mode:n.followerOnlyModeEnabled,follower_mode_duration:n.followerOnlyModeDelay,subscriber_mode:n.subscriberOnlyModeEnabled,emote_mode:n.emoteOnlyModeEnabled,unique_chat_mode:n.uniqueChatModeEnabled,non_moderator_chat_delay:n.nonModeratorChatDelayEnabled,non_moderator_chat_delay_duration:n.nonModeratorChatDelay}}function V0(n,e){return{user_id:R(n),color:e}}function z0(n,e,t){return{from_broadcaster_id:R(n),to_broadcaster_id:R(e),moderator_id:t}}function Ng(n,e){return{broadcaster_id:n,sender_id:e}}function Fg(n,e){return{message:n,reply_parent_message_id:e==null?void 0:e.replyParentMessageId}}class Sv extends K{get id(){return this[c].id}get name(){return this[c].name}get formats(){return this[c].format}get scales(){return this[c].scale}get themeModes(){return this[c].theme_mode}getStaticImageUrl(e="1.0",t="light"){return this[c].format.includes("static")&&this[c].scale.includes(e)?this.getFormattedImageUrl(e,"static",t):null}getAnimatedImageUrl(e="1.0",t="light"){return this[c].format.includes("animated")&&this[c].scale.includes(e)?this.getFormattedImageUrl(e,"animated",t):null}getFormattedImageUrl(e="1.0",t="static",r="light"){return`https://static-cdn.jtvnw.net/emoticons/v2/${this[c].id}/${t}/${r}/${e}`}}let Ds=class extends Sv{getImageUrl(e){return this[c].images[`url_${e}x`]}};Ds=P([L("api","HelixEmote","id")],Ds);let Lo=class extends Ds{constructor(e,t){super(e),this._client=t}get tier(){return this[c].tier||null}get type(){return this[c].emote_type}get emoteSetId(){return this[c].emote_set_id}async getAllEmotesFromSet(){return await this._client.chat.getEmotesFromSets([this[c].emote_set_id])}};P([V(!1)],Lo.prototype,"_client",void 0);Lo=P([L("api","HelixChannelEmote","id")],Lo);let Hc=class extends K{get id(){return this[c].id}getImageUrl(e){return this[c][`image_url_${e}x`]}get title(){return this[c].title}get description(){return this[c].description}get clickAction(){return this[c].click_action}get clickUrl(){return this[c].click_url}};Hc=P([L("api","HelixChatBadgeVersion","id")],Hc);let Bs=class extends K{get id(){return this[c].set_id}get versions(){return this[c].versions.map(e=>new Hc(e))}getVersion(e){var t;return(t=this.versions.find(r=>r.id===e))!==null&&t!==void 0?t:null}};P([ge()],Bs.prototype,"versions",null);Bs=P([to,L("api","HelixChatBadgeSet","id")],Bs);let Os=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};P([V(!1)],Os.prototype,"_client",void 0);Os=P([L("api","HelixChatChatter")],Os);let No=class extends K{get broadcasterId(){return this[c].broadcaster_id}get slowModeEnabled(){return this[c].slow_mode}get slowModeDelay(){return this[c].slow_mode_wait_time}get followerOnlyModeEnabled(){return this[c].follower_mode}get followerOnlyModeDelay(){return this[c].follower_mode_duration}get subscriberOnlyModeEnabled(){return this[c].subscriber_mode}get emoteOnlyModeEnabled(){return this[c].emote_mode}get uniqueChatModeEnabled(){return this[c].unique_chat_mode}};No=P([L("api","HelixChatSettings","broadcasterId")],No);let Fo=class extends Ds{constructor(e,t){super(e),this._client=t}get type(){return this[c].emote_type}get emoteSetId(){return this[c].emote_set_id}get ownerId(){switch(this[c].owner_id){case"0":case"twitch":return null;default:return this[c].owner_id}}async getOwner(){switch(this[c].owner_id){case"0":case"twitch":return null;default:return await this._client.users.getUserById(this[c].owner_id)}}};P([V(!1)],Fo.prototype,"_client",void 0);Fo=P([L("api","HelixEmoteFromSet","id")],Fo);let Us=class extends Sv{constructor(e,t){super(e),this._client=t}get type(){return this[c].emote_type}get emoteSetId(){return this[c].emote_set_id||null}get ownerId(){return this[c].owner_id||null}async getAllEmotesFromSet(){return this[c].emote_set_id?await this._client.chat.getEmotesFromSets([this[c].emote_set_id]):null}async getOwner(){return this[c].owner_id?await this._client.users.getUserById(this[c].owner_id):null}};P([V(!1)],Us.prototype,"_client",void 0);Us=P([L("api","HelixUserEmote","id")],Us);let $o=class extends No{get nonModeratorChatDelayEnabled(){return this[c].non_moderator_chat_delay}get nonModeratorChatDelay(){return this[c].non_moderator_chat_delay_duration}};$o=P([L("api","HelixPrivilegedChatSettings","broadcasterId")],$o);let Go=class extends K{get id(){return this[c].message_id}get isSent(){return this[c].is_sent}get dropReasonCode(){var e;return(e=this[c].drop_reason)===null||e===void 0?void 0:e.code}get dropReasonMessage(){var e;return(e=this[c].drop_reason)===null||e===void 0?void 0:e.message}};Go=P([L("api","HelixSentChatMessage","id")],Go);function K0(n){return{broadcaster_id:R(n)}}let Qo=class extends K{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[c].broadcaster_id}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}};P([V(!1)],Qo.prototype,"_client",void 0);Qo=P([L("api","HelixSharedChatSessionParticipant","broadcasterId")],Qo);let Wo=class extends K{constructor(e,t){super(e),this._client=t}get sessionId(){return this[c].session_id}get hostBroadcasterId(){return this[c].host_broadcaster_id}async getHostBroadcaster(){return te(await this._client.users.getUserById(this[c].host_broadcaster_id))}get participants(){return this[c].participants.map(e=>new Qo(e,this._client))}get createdDate(){return new Date(this[c].created_at)}get updatedDate(){return new Date(this[c].updated_at)}};P([V(!1)],Wo.prototype,"_client",void 0);Wo=P([L("api","HelixSharedChatSession","sessionId")],Wo);let Rc=class extends be{async getChatters(e,t){const r=R(e),i=await this._client.callApi({type:"helix",url:"chat/chatters",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:{...this._createModeratorActionQuery(r),...de(t)}});return It(i,Os,this._client)}getChattersPaginated(e){const t=R(e);return new nr({url:"chat/chatters",userId:t,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:this._createModeratorActionQuery(t)},this._client,r=>new Os(r,this._client),1e3)}async getGlobalBadges(){return(await this._client.callApi({type:"helix",url:"chat/badges/global"})).data.map(t=>new Bs(t))}async getChannelBadges(e){return(await this._client.callApi({type:"helix",url:"chat/badges",userId:R(e),query:pe(e)})).data.map(r=>new Bs(r))}async getGlobalEmotes(){return(await this._client.callApi({type:"helix",url:"chat/emotes/global"})).data.map(t=>new Ds(t))}async getChannelEmotes(e){return(await this._client.callApi({type:"helix",url:"chat/emotes",userId:R(e),query:pe(e)})).data.map(r=>new Lo(r,this._client))}async getEmotesFromSets(e){return(await this._client.callApi({type:"helix",url:"chat/emotes/set",query:me("emote_set_id",e)})).data.map(r=>new Fo(r,this._client))}async getUserEmotes(e,t){const r=R(e),i=await this._client.callApi({type:"helix",url:"chat/emotes/user",userId:R(e),scopes:["user:read:emotes"],query:{...me("user_id",r),...me("broadcasterId",t!=null&&t.broadcaster?R(t.broadcaster):void 0),...de(t)}});return xe(i,Us,this._client)}getUserEmotesPaginated(e,t){const r=R(e);return new fe({url:"chat/emotes/user",userId:r,scopes:["user:read:emotes"],query:{...me("user_id",r),...me("broadcasterId",t?R(t):void 0)}},this._client,i=>new Us(i,this._client))}async getSettings(e){const t=await this._client.callApi({type:"helix",url:"chat/settings",userId:R(e),query:pe(e)});return new No(t.data[0])}async getSettingsPrivileged(e){const t=R(e),r=await this._client.callApi({type:"helix",url:"chat/settings",userId:t,canOverrideScopedUserContext:!0,scopes:["moderator:read:chat_settings"],query:this._createModeratorActionQuery(t)});return new $o(r.data[0])}async updateSettings(e,t){const r=R(e),i=await this._client.callApi({type:"helix",url:"chat/settings",method:"PATCH",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:chat_settings"],query:this._createModeratorActionQuery(r),jsonBody:W0(t)});return new $o(i.data[0])}async sendChatMessage(e,t,r){const i=R(e),a=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",userId:i,canOverrideScopedUserContext:!0,scopes:["user:write:chat"],query:Ng(i,this._getUserContextIdWithDefault(i)),jsonBody:Fg(t,r)});return new Go(a.data[0])}async sendChatMessageAsApp(e,t,r,i){const a=R(e),s=R(t),o=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",forceType:"app",query:Ng(s,a),jsonBody:Fg(r,i)});return new Go(o.data[0])}async sendAnnouncement(e,t){const r=R(e);await this._client.callApi({type:"helix",url:"chat/announcements",method:"POST",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:announcements"],query:this._createModeratorActionQuery(r),jsonBody:{message:t.message,color:t.color}})}async getColorsForUsers(e){const t=await this._client.callApi({type:"helix",url:"chat/color",query:me("user_id",e.map(R))});return new Map(t.data.map(r=>[r.user_id,r.color||null]))}async getColorForUser(e){const t=await this._client.callApi({type:"helix",url:"chat/color",userId:R(e),query:me("user_id",R(e))});if(t.data.length)return t.data[0].color||null}async setColorForUser(e,t){await this._client.callApi({type:"helix",url:"chat/color",method:"PUT",userId:R(e),scopes:["user:manage:chat_color"],query:V0(e,t)})}async shoutoutUser(e,t){const r=R(e);await this._client.callApi({type:"helix",url:"chat/shoutouts",method:"POST",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:shoutouts"],query:z0(e,t,this._getUserContextIdWithDefault(r))})}async getSharedChatSession(e){const t=R(e),r=await this._client.callApi({type:"helix",url:"shared_chat/session",userId:t,query:K0(t)});return r.data.length===0?null:new Wo(r.data[0],this._client)}_createModeratorActionQuery(e){return wv(e,this._getUserContextIdWithDefault(e))}};Rc=P([L("api","HelixChatApi")],Rc);function X0(n,e){return{broadcaster_id:R(n),has_delay:e.toString()}}function $g(n){const{filterType:e,ids:t,startDate:r,endDate:i,isFeatured:a}=n;return{[e]:t,started_at:r,ended_at:i,is_featured:a==null?void 0:a.toString()}}let Ei=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get url(){return this[c].url}get embedUrl(){return this[c].embed_url}get broadcasterId(){return this[c].broadcaster_id}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get creatorId(){return this[c].creator_id}get creatorDisplayName(){return this[c].creator_name}async getCreator(){return te(await this._client.users.getUserById(this[c].creator_id))}get videoId(){return this[c].video_id}async getVideo(){return te(await this._client.videos.getVideoById(this[c].video_id))}get gameId(){return this[c].game_id}async getGame(){return this[c].game_id?te(await this._client.games.getGameById(this[c].game_id)):null}get language(){return this[c].language}get title(){return this[c].title}get views(){return this[c].view_count}get creationDate(){return new Date(this[c].created_at)}get thumbnailUrl(){return this[c].thumbnail_url}get duration(){return this[c].duration}get vodOffset(){return this[c].vod_offset}get isFeatured(){return this[c].is_featured}};P([V(!1)],Ei.prototype,"_client",void 0);Ei=P([L("api","HelixClip","id")],Ei);let Vo=class extends be{constructor(){super(...arguments),this._getClipByIdBatcher=new Ze({url:"clips"},"id","id",this._client,e=>new Ei(e,this._client))}async getClipsForBroadcaster(e,t={}){return await this._getClips({...t,filterType:"broadcaster_id",ids:R(e),userId:R(e)})}getClipsForBroadcasterPaginated(e,t={}){return this._getClipsPaginated({...t,filterType:"broadcaster_id",ids:R(e),userId:R(e)})}async getClipsForGame(e,t={}){return await this._getClips({...t,filterType:"game_id",ids:e})}getClipsForGamePaginated(e,t={}){return this._getClipsPaginated({...t,filterType:"game_id",ids:e})}async getClipsByIds(e){return(await this._getClips({filterType:"id",ids:e})).data}async getClipById(e){const t=await this.getClipsByIds([e]);return t.length?t[0]:null}async getClipByIdBatched(e){return await this._getClipByIdBatcher.request(e)}async createClip(e){const{channel:t,createAfterDelay:r=!1}=e;return(await this._client.callApi({type:"helix",url:"clips",method:"POST",userId:R(t),scopes:["clips:edit"],canOverrideScopedUserContext:!0,query:X0(t,r)})).data[0].id}async _getClips(e){if(!e.ids.length)return{data:[]};const t=await this._client.callApi({type:"helix",url:"clips",userId:e.userId,query:{...$g(e),...de(e)}});return xe(t,Ei,this._client)}_getClipsPaginated(e){return new fe({url:"clips",userId:e.userId,query:$g(e)},this._client,t=>new Ei(t,this._client))}};P([V(!1)],Vo.prototype,"_getClipByIdBatcher",void 0);Vo=P([L("api","HelixClipApi")],Vo);class J0 extends K{get id(){return this[c].id}get name(){return this[c].name}get description(){return this[c].description}}let Ac=class extends be{async getAll(e){return(await this._client.callApi({url:"content_classification_labels",query:{locale:e}})).data.map(r=>new J0(r))}};Ac=P([L("api","HelixContentClassificationLabelApi")],Ac);function Gg(n,e){return{user_id:e?dt(n.user,R):void 0,game_id:n.gameId,fulfillment_status:n.fulfillmentStatus}}function Y0(n,e){return{fulfillment_status:e,entitlement_ids:n}}let Zt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get rewardId(){return this[c].benefit_id}get grantDate(){return new Date(this[c].timestamp)}get userId(){return this[c].user_id}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get gameId(){return this[c].game_id}async getGame(){return te(await this._client.games.getGameById(this[c].game_id))}get fulfillmentStatus(){return this[c].fulfillment_status}get updateDate(){return new Date(this[c].last_updated)}};P([V(!1)],Zt.prototype,"_client",void 0);Zt=P([L("api","HelixDropsEntitlement")],Zt);let zo=class extends be{constructor(){super(...arguments),this._getDropsEntitlementByIdBatcher=new Ze({url:"entitlements/drops"},"id","id",this._client,e=>new Zt(e,this._client))}async getDropsEntitlements(e,t=!1){const r=await this._client.callApi({type:"helix",url:"entitlements/drops",userId:dt(e.user,R),forceType:e.user&&t?"app":void 0,query:{...Gg(e,t),...de(e)}});return xe(r,Zt,this._client)}getDropsEntitlementsPaginated(e,t=!1){return new fe({url:"entitlements/drops",userId:dt(e.user,R),forceType:e.user&&t?"app":void 0,query:Gg(e,t)},this._client,r=>new Zt(r,this._client))}async getDropsEntitlementsByIds(e){return(await this._client.callApi({type:"helix",url:"entitlements/drops",query:{id:e}})).data.map(r=>new Zt(r,this._client))}async getDropsEntitlementById(e){var t;return(t=(await this.getDropsEntitlementsByIds([e]))[0])!==null&&t!==void 0?t:null}async getDropsEntitlementByIdBatched(e){return await this._getDropsEntitlementByIdBatcher.request(e)}async updateDropsEntitlements(e,t){const r=await this._client.callApi({type:"helix",url:"entitlements/drops",method:"PATCH",jsonBody:Y0(e,t)});return new Map(r.data.flatMap(i=>i.ids.map(a=>[a,i.status])))}};P([V(!1)],zo.prototype,"_getDropsEntitlementByIdBatcher",void 0);zo=P([L("api","HelixEntitlementApi")],zo);function le(n){return{broadcaster_user_id:R(n)}}function Eo(n,e){return{broadcaster_user_id:R(n),reward_id:e}}function Ne(n,e){return{broadcaster_user_id:n,moderator_user_id:e}}function Rt(n,e){return{broadcaster_user_id:n,user_id:e}}function Z0(n){return{organization_id:n.organizationId,category_id:n.categoryId,campaign_id:n.campaignId}}function Qg(n,e){return{conduit_id:n,status:e}}function eC(n,e){return{id:n,shard_count:e.toString()}}function tC(n,e){return{conduit_id:n,shards:e}}let vt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get status(){return this[c].status}get type(){return this[c].type}get cost(){return this[c].cost}get condition(){return this[c].condition}get creationDate(){return new Date(this[c].created_at)}get transportMethod(){return this[c].transport.method}async unsubscribe(){await this._client.eventSub.deleteSubscription(this[c].id)}get _transport(){return this[c].transport}set _status(e){this[c].status=e}};P([V(!1)],vt.prototype,"_client",void 0);vt=P([L("api","HelixEventSubSubscription","id")],vt);let Si=class extends nr{constructor(e,t,r){super({url:"eventsub/subscriptions",userId:t,query:e},r,i=>new vt(i,r))}async getTotalCost(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).total_cost}async getMaxTotalCost(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).max_total_cost}};Si=P([L("api","HelixPaginatedEventSubSubscriptionsRequest")],Si);let Hi=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get shardCount(){return this[c].shard_count}async update(e){return await this._client.eventSub.updateConduit(this[c].id,e)}async delete(){await this._client.eventSub.deleteConduit(this[c].id)}async getShards(){return await this._client.eventSub.getConduitShards(this[c].id)}};P([V(!1)],Hi.prototype,"_client",void 0);Hi=P([L("api","HelixEventSubConduit")],Hi);let Cs=class extends K{get id(){return this[c].id}get status(){return this[c].status}get transportMethod(){return this[c].transport.method}};Cs=P([L("api","HelixEventSubConduitShard")],Cs);let Tc=class extends be{async getSubscriptions(e){const t=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:de(e)});return{...It(t,vt,this._client),totalCost:t.total_cost,maxTotalCost:t.max_total_cost}}getSubscriptionsPaginated(){return new Si({},void 0,this._client)}async getSubscriptionsForStatus(e,t){const r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...de(t),status:e}});return{...It(r,vt,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForStatusPaginated(e){return new Si({status:e},void 0,this._client)}async getSubscriptionsForType(e,t){const r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...de(t),type:e}});return{...It(r,vt,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForTypePaginated(e){return new Si({type:e},void 0,this._client)}async getSubscriptionsForUser(e,t){const r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",userId:R(e),query:{...me("user_id",R(e)),...de(t)}});return{...It(r,vt,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForUserPaginated(e){const t=R(e);return new Si(me("user_id",t),t,this._client)}async createSubscription(e,t,r,i,a,s,o,u){const h=i.method==="webhook"||i.method==="conduit",m=h?void 0:s;if(!h&&!a)throw new Error(`Transport ${i.method} can only handle subscriptions with user context`);const w={type:e,version:t,condition:r,transport:i};u&&(w.is_batching_enabled=!0);const g=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"POST",scopes:m,userId:dt(a,R),canOverrideScopedUserContext:o,forceType:h?"app":"user",jsonBody:w});return new vt(g.data[0],this._client)}async deleteSubscription(e){await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"DELETE",query:{id:e}})}async deleteAllSubscriptions(){await this._deleteSubscriptionsWithCondition()}async deleteBrokenSubscriptions(){await this._deleteSubscriptionsWithCondition(e=>e.status!=="enabled"&&e.status!=="webhook_callback_verification_pending")}async subscribeToStreamOnlineEvents(e,t){return await this.createSubscription("stream.online","1",le(e),t,e)}async subscribeToStreamOfflineEvents(e,t){return await this.createSubscription("stream.offline","1",le(e),t,e)}async subscribeToChannelUpdateEvents(e,t){return await this.createSubscription("channel.update","2",le(e),t,e)}async subscribeToChannelFollowEvents(e,t){const r=R(e);return await this.createSubscription("channel.follow","2",Ne(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:followers"],!0)}async subscribeToChannelSubscriptionEvents(e,t){return await this.createSubscription("channel.subscribe","1",le(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionGiftEvents(e,t){return await this.createSubscription("channel.subscription.gift","1",le(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionMessageEvents(e,t){return await this.createSubscription("channel.subscription.message","1",le(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionEndEvents(e,t){return await this.createSubscription("channel.subscription.end","1",le(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelCheerEvents(e,t){return await this.createSubscription("channel.cheer","1",le(e),t,e,["bits:read"])}async subscribeToChannelCharityCampaignStartEvents(e,t){return await this.createSubscription("channel.charity_campaign.start","1",le(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityCampaignStopEvents(e,t){return await this.createSubscription("channel.charity_campaign.stop","1",le(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityDonationEvents(e,t){return await this.createSubscription("channel.charity_campaign.donate","1",le(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityCampaignProgressEvents(e,t){return await this.createSubscription("channel.charity_campaign.progress","1",le(e),t,e,["channel:read:charity"])}async subscribeToChannelBanEvents(e,t){return await this.createSubscription("channel.ban","1",le(e),t,e,["channel:moderate"])}async subscribeToChannelUnbanEvents(e,t){return await this.createSubscription("channel.unban","1",le(e),t,e,["channel:moderate"])}async subscribeToChannelShieldModeBeginEvents(e,t){const r=R(e);return await this.createSubscription("channel.shield_mode.begin","1",Ne(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelShieldModeEndEvents(e,t){const r=R(e);return await this.createSubscription("channel.shield_mode.end","1",Ne(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelModeratorAddEvents(e,t){return await this.createSubscription("channel.moderator.add","1",le(e),t,e,["moderation:read"])}async subscribeToChannelModeratorRemoveEvents(e,t){return await this.createSubscription("channel.moderator.remove","1",le(e),t,e,["moderation:read"])}async subscribeToChannelRaidEventsFrom(e,t){return await this.createSubscription("channel.raid","1",me("from_broadcaster_user_id",R(e)),t,e)}async subscribeToChannelRaidEventsTo(e,t){return await this.createSubscription("channel.raid","1",me("to_broadcaster_user_id",R(e)),t,e)}async subscribeToChannelRewardAddEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.add","1",le(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.update","1",le(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward.update","1",Eo(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",le(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",Eo(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",le(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",Eo(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",le(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",Eo(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelAutomaticRewardRedemptionAddEvents(e,t){return await this.createSubscription("channel.channel_points_automatic_reward_redemption.add","1",le(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelPollBeginEvents(e,t){return await this.createSubscription("channel.poll.begin","1",le(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollProgressEvents(e,t){return await this.createSubscription("channel.poll.progress","1",le(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollEndEvents(e,t){return await this.createSubscription("channel.poll.end","1",le(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPredictionBeginEvents(e,t){return await this.createSubscription("channel.prediction.begin","1",le(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionProgressEvents(e,t){return await this.createSubscription("channel.prediction.progress","1",le(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionLockEvents(e,t){return await this.createSubscription("channel.prediction.lock","1",le(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionEndEvents(e,t){return await this.createSubscription("channel.prediction.end","1",le(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelGoalBeginEvents(e,t){return await this.createSubscription("channel.goal.begin","1",le(e),t,e,["channel:read:goals"])}async subscribeToChannelGoalProgressEvents(e,t){return await this.createSubscription("channel.goal.progress","1",le(e),t,e,["channel:read:goals"])}async subscribeToChannelGoalEndEvents(e,t){return await this.createSubscription("channel.goal.end","1",le(e),t,e,["channel:read:goals"])}async subscribeToChannelHypeTrainBeginEvents(e,t){return await this.createSubscription("channel.hype_train.begin","1",le(e),t,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainProgressEvents(e,t){return await this.createSubscription("channel.hype_train.progress","1",le(e),t,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainEndEvents(e,t){return await this.createSubscription("channel.hype_train.end","1",le(e),t,e,["channel:read:hype_train"])}async subscribeToChannelShoutoutCreateEvents(e,t){const r=R(e);return await this.createSubscription("channel.shoutout.create","1",Ne(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelShoutoutReceiveEvents(e,t){const r=R(e);return await this.createSubscription("channel.shoutout.receive","1",Ne(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelAdBreakBeginEvents(e,t){return await this.createSubscription("channel.ad_break.begin","1",le(e),t,e,["channel:read:ads"])}async subscribeToChannelChatClearEvents(e,t){const r=R(e);return await this.createSubscription("channel.chat.clear","1",Rt(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatClearUserMessagesEvents(e,t){const r=R(e);return await this.createSubscription("channel.chat.clear_user_messages","1",Rt(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatMessageDeleteEvents(e,t){const r=R(e);return await this.createSubscription("channel.chat.message_delete","1",Rt(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatNotificationEvents(e,t){const r=R(e);return await this.createSubscription("channel.chat.notification","1",Rt(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatMessageEvents(e,t){const r=R(e);return await this.createSubscription("channel.chat.message","1",Rt(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatSettingsUpdateEvents(e,t){const r=R(e);return await this.createSubscription("channel.chat_settings.update","1",Rt(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelUnbanRequestCreateEvents(e,t){const r=R(e);return await this.createSubscription("channel.unban_request.create","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelUnbanRequestResolveEvents(e,t){const r=R(e);return await this.createSubscription("channel.unban_request.resolve","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelModerateEvents(e,t){const r=R(e);return await this.createSubscription("channel.moderate","2",Ne(r,this._getUserContextIdWithDefault(r)),t,e,[],!0)}async subscribeToChannelWarningAcknowledgeEvents(e,t){const r=R(e);return await this.createSubscription("channel.warning.acknowledge","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelWarningSendEvents(e,t){const r=R(e);return await this.createSubscription("channel.warning.send","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelVipAddEvents(e,t){return await this.createSubscription("channel.vip.add","1",le(e),t,e,["channel:read:vips","channel:manage:vips"])}async subscribeToChannelVipRemoveEvents(e,t){return await this.createSubscription("channel.vip.remove","1",le(e),t,e,["channel:read:vips","channel:manage:vips"])}async subscribeToExtensionBitsTransactionCreateEvents(e,t){return await this.createSubscription("extension.bits_transaction.create","1",me("extension_client_id",e),t)}async subscribeToUserAuthorizationGrantEvents(e,t){return await this.createSubscription("user.authorization.grant","1",me("client_id",e),t)}async subscribeToUserAuthorizationRevokeEvents(e,t){return await this.createSubscription("user.authorization.revoke","1",me("client_id",e),t)}async subscribeToUserUpdateEvents(e,t,r){return await this.createSubscription("user.update","1",me("user_id",R(e)),t,e,r?["user:read:email"]:void 0)}async subscribeToUserWhisperMessageEvents(e,t){return await this.createSubscription("user.whisper.message","1",me("user_id",R(e)),t,e,["user:read:whispers","user:manage:whispers"])}async subscribeToDropEntitlementGrantEvents(e,t){return await this.createSubscription("drop.entitlement.grant","1",Z0(e),t,void 0,void 0,!1,!0)}async subscribeToAutoModMessageHoldEvents(e,t){const r=R(e);return await this.createSubscription("automod.message.hold","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateEvents(e,t){const r=R(e);return await this.createSubscription("automod.message.update","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageHoldV2Events(e,t){const r=R(e);return await this.createSubscription("automod.message.hold","2",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateV2Events(e,t){const r=R(e);return await this.createSubscription("automod.message.update","2",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModSettingsUpdateEvents(e,t){const r=R(e);return await this.createSubscription("automod.settings.update","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:automod_settings"],!0)}async subscribeToAutoModTermsUpdateEvents(e,t){const r=R(e);return await this.createSubscription("automod.terms.update","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToChannelChatUserMessageHoldEvents(e,t){const r=R(e);return await this.createSubscription("channel.chat.user_message_hold","1",Rt(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatUserMessageUpdateEvents(e,t){const r=R(e);return await this.createSubscription("channel.chat.user_message_update","1",Rt(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelSuspiciousUserUpdateEvents(e,t){const r=R(e);return await this.createSubscription("channel.suspicious_user.update","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSuspiciousUserMessageEvents(e,t){const r=R(e);return await this.createSubscription("channel.suspicious_user.message","1",Ne(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSharedChatSessionBeginEvents(e,t){const r=R(e);return await this.createSubscription("channel.shared_chat.begin","1",le(r),t,r)}async subscribeToChannelSharedChatSessionUpdateEvents(e,t){const r=R(e);return await this.createSubscription("channel.shared_chat.update","1",le(r),t,r)}async subscribeToChannelSharedChatSessionEndEvents(e,t){const r=R(e);return await this.createSubscription("channel.shared_chat.end","1",le(r),t,r)}async getConduits(){return(await this._client.callApi({type:"helix",url:"eventsub/conduits"})).data.map(t=>new Hi(t,this._client))}async createConduit(e){const t=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"POST",query:{...me("shard_count",e.toString())}});return new Hi(t.data[0],this._client)}async updateConduit(e,t){const r=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"PATCH",query:eC(e,t)});return new Hi(r.data[0],this._client)}async deleteConduit(e){await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"DELETE",query:{...me("id",e)}})}async getConduitShards(e,t,r){const i=await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",query:{...Qg(e,t),...de(r)}});return{...xe(i,Cs,this._client)}}getConduitShardsPaginated(e,t){return new fe({url:"eventsub/conduits/shards",query:Qg(e,t)},this._client,r=>new Cs(r))}async updateConduitShards(e,t){return(await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",method:"PATCH",jsonBody:tC(e,t)})).data.map(i=>new Cs(i))}async _deleteSubscriptionsWithCondition(e){const t=this.getSubscriptionsPaginated();for await(const r of t)(!e||e(r))&&await r.unsubscribe()}};Tc=P([L("api","HelixEventSubApi")],Tc);function rC(n,e){return{extension_id:n,extension_version:e}}function nC(n){return{sku:n.sku,cost:{amount:n.cost,type:"bits"},display_name:n.displayName,in_development:n.inDevelopment,expiration:n.expirationDate,is_broadcast:n.broadcast}}function Wg(n,e){return{extension_id:n,id:e.transactionIds}}let qs=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].broadcaster_id}get displayName(){return this[c].broadcaster_name}async getChannel(){return te(await this._client.channels.getChannelInfoById(this[c].broadcaster_id))}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get gameId(){return this[c].game_id}get gameName(){return this[c].game_name}async getGame(){return this[c].game_id?te(await this._client.games.getGameById(this[c].game_id)):null}get title(){return this[c].title}};P([V(!1)],qs.prototype,"_client",void 0);qs=P([L("api","HelixChannelReference","id")],qs);let Ko=class extends K{get sku(){return this[c].sku}get cost(){return this[c].cost.amount}get displayName(){return this[c].display_name}get inDevelopment(){return this[c].in_development}get isBroadcast(){return this[c].is_broadcast}get expirationDate(){return Xe(this[c].expiration,e=>new Date(e))}};Ko=P([L("api","HelixExtensionBitsProduct","sku")],Ko);let ks=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get transactionDate(){return new Date(this[c].timestamp)}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_name}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get productType(){return this[c].product_type}get productSku(){return this[c].product_data.sku}get productCost(){return this[c].product_data.cost.amount}get productDisplayName(){return this[c].product_data.displayName}get productInDevelopment(){return this[c].product_data.inDevelopment}};P([V(!1)],ks.prototype,"_client",void 0);ks=P([L("api","HelixExtensionTransaction","id")],ks);let Ic=class extends be{async getReleasedExtension(e,t){const r=await this._client.callApi({type:"helix",url:"extensions/released",query:rC(e,t)});return new gc(r.data[0])}async getLiveChannelsWithExtension(e,t){const r=await this._client.callApi({type:"helix",url:"extensions/live",query:{...me("extension_id",e),...de(t)}});return xe(r,qs,this._client)}getLiveChannelsWithExtensionPaginated(e){return new fe({url:"extensions/live",query:me("extension_id",e)},this._client,t=>new qs(t,this._client))}async getExtensionBitsProducts(e){return(await this._client.callApi({type:"helix",url:"bits/extensions",forceType:"app",query:me("should_include_all",e==null?void 0:e.toString())})).data.map(r=>new Ko(r))}async putExtensionBitsProduct(e){const t=await this._client.callApi({type:"helix",url:"bits/extensions",method:"PUT",forceType:"app",jsonBody:nC(e)});return new Ko(t.data[0])}async getExtensionTransactions(e,t={}){const r=await this._client.callApi({type:"helix",url:"extensions/transactions",forceType:"app",query:{...Wg(e,t),...de(t)}});return xe(r,ks,this._client)}getExtensionTransactionsPaginated(e,t={}){return new fe({url:"extensions/transactions",forceType:"app",query:Wg(e,t)},this._client,r=>new ks(r,this._client))}};Ic=P([L("api","HelixExtensionsApi")],Ic);let at=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get name(){return this[c].name}get boxArtUrl(){return this[c].box_art_url}get igdbId(){return this[c].igdb_id||null}getBoxArtUrl(e,t){return this[c].box_art_url.replace("{width}",e.toString()).replace("{height}",t.toString())}async getStreams(e){return await this._client.streams.getStreams({...e,game:this[c].id})}getStreamsPaginated(){return this._client.streams.getStreamsPaginated({game:this[c].id})}};P([V(!1)],at.prototype,"_client",void 0);at=P([L("api","HelixGame","id")],at);let Oi=class extends be{constructor(){super(...arguments),this._getGameByIdBatcher=new Ze({url:"games"},"id","id",this._client,e=>new at(e,this._client)),this._getGameByNameBatcher=new Ze({url:"games"},"name","name",this._client,e=>new at(e,this._client)),this._getGameByIgdbIdBatcher=new Ze({url:"games"},"igdb_id","igdb_id",this._client,e=>new at(e,this._client))}async getGamesByIds(e){return await this._getGames("id",e)}async getGamesByNames(e){return await this._getGames("name",e)}async getGamesByIgdbIds(e){return await this._getGames("igdb_id",e)}async getGameById(e){var t;return(t=(await this._getGames("id",[e]))[0])!==null&&t!==void 0?t:null}async getGameByName(e){var t;return(t=(await this._getGames("name",[e]))[0])!==null&&t!==void 0?t:null}async getGameByIgdbId(e){var t;return(t=(await this._getGames("igdb_id",[e]))[0])!==null&&t!==void 0?t:null}async getGameByIdBatched(e){return await this._getGameByIdBatcher.request(e)}async getGameByNameBatched(e){return await this._getGameByNameBatcher.request(e)}async getGameByIgdbIdBatched(e){return await this._getGameByIgdbIdBatcher.request(e)}async getTopGames(e){const t=await this._client.callApi({type:"helix",url:"games/top",query:de(e)});return xe(t,at,this._client)}getTopGamesPaginated(){return new fe({url:"games/top"},this._client,e=>new at(e,this._client))}async _getGames(e,t){return t.length?(await this._client.callApi({type:"helix",url:"games",query:{[e]:t}})).data.map(i=>new at(i,this._client)):[]}};P([V(!1)],Oi.prototype,"_getGameByIdBatcher",void 0);P([V(!1)],Oi.prototype,"_getGameByNameBatcher",void 0);P([V(!1)],Oi.prototype,"_getGameByIgdbIdBatcher",void 0);Oi=P([L("api","HelixGameApi")],Oi);let Xo=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterDisplayName(){return this[c].broadcaster_name}get broadcasterName(){return this[c].broadcaster_login}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get type(){return this[c].type}get description(){return this[c].description}get currentAmount(){return this[c].current_amount}get targetAmount(){return this[c].target_amount}get creationDate(){return this[c].created_at}};P([V(!1)],Xo.prototype,"_client",void 0);Xo=P([L("api","HelixGoal","id")],Xo);let Pc=class extends be{async getGoals(e){return(await this._client.callApi({type:"helix",url:"goals",userId:R(e),scopes:["channel:read:goals"],query:pe(e)})).data.map(r=>new Xo(r,this._client))}};Pc=P([L("api","HelixGoalApi")],Pc);let Ms=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user}async getUser(){return te(await this._client.users.getUserById(this[c].user))}get type(){return this[c].type}get total(){return this[c].total}};P([V(!1)],Ms.prototype,"_client",void 0);Ms=P([L("api","HelixHypeTrainContribution","userId")],Ms);let js=class extends K{constructor(e,t){super(e),this._client=t}get eventId(){return this[c].id}get eventType(){return this[c].event_type}get eventDate(){return new Date(this[c].event_timestamp)}get eventVersion(){return this[c].version}get id(){return this[c].event_data.id}get broadcasterId(){return this[c].event_data.broadcaster_id}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].event_data.broadcaster_id))}get level(){return this[c].event_data.level}get startDate(){return new Date(this[c].event_data.started_at)}get expiryDate(){return new Date(this[c].event_data.expires_at)}get cooldownDate(){return new Date(this[c].event_data.cooldown_end_time)}get total(){return this[c].event_data.total}get goal(){return this[c].event_data.goal}get lastContribution(){return new Ms(this[c].event_data.last_contribution,this._client)}get topContributions(){return this[c].event_data.top_contributions.map(e=>new Ms(e,this._client))}};P([V(!1)],js.prototype,"_client",void 0);js=P([L("api","HelixHypeTrainEvent","id")],js);class iC extends be{async getHypeTrainEventsForBroadcaster(e,t){const r=await this._client.callApi({type:"helix",url:"hypetrain/events",userId:R(e),scopes:["channel:read:hype_train"],query:{...pe(e),...de(t)}});return xe(r,js,this._client)}getHypeTrainEventsForBroadcasterPaginated(e){return new fe({url:"hypetrain/events",userId:R(e),scopes:["channel:read:hype_train"],query:pe(e)},this._client,t=>new js(t,this._client))}}function Vg(n,e){return{broadcaster_id:R(n),user_id:e==null?void 0:e.userId}}function zg(n,e){return{broadcaster_id:R(n),user_id:R(e)}}function aC(n,e,t,r,i){return{unban_request_id:t,broadcaster_id:R(n),moderator_id:R(e),status:r?"approved":"denied",resolution_text:i}}function sC(n,e,t){return{user_id:R(n),msg_id:e,action:t?"ALLOW":"DENY"}}function oC(n){return{overall_level:n.overallLevel,aggression:n.aggression,bullying:n.bullying,disability:n.disability,misogyny:n.misogyny,race_ethnicity_or_religion:n.raceEthnicityOrReligion,sex_based_terms:n.sexBasedTerms,sexuality_sex_or_gender:n.sexualitySexOrGender,swearing:n.swearing}}function lC(n){return{data:{duration:n.duration,reason:n.reason,user_id:R(n.user)}}}function uC(n){return{is_active:n}}function cC(n){return{data:n.map(e=>({msg_id:e.messageId,msg_text:e.messageText}))}}function dC(n,e){return{data:{user_id:R(n),reason:e}}}let Jo=class extends K{get broadcasterId(){return this[c].broadcaster_id}get moderatorId(){return this[c].moderator_id}get overallLevel(){return this[c].overall_level?this[c].overall_level:null}get disability(){return this[c].disability}get aggression(){return this[c].aggression}get sexualitySexOrGender(){return this[c].sexuality_sex_or_gender}get misogyny(){return this[c].misogyny}get bullying(){return this[c].bullying}get swearing(){return this[c].swearing}get raceEthnicityOrReligion(){return this[c].race_ethnicity_or_religion}get sexBasedTerms(){return this[c].sex_based_terms}};Jo=P([L("api","HelixAutoModSettings","broadcasterId")],Jo);let Dc=class extends K{get messageId(){return this[c].msg_id}get isPermitted(){return this[c].is_permitted}};Dc=P([L("api","HelixAutoModStatus","messageId")],Dc);let Ui=class extends K{constructor(e,t,r){super(e),this._expiryTimestamp=t,this._client=r}get creationDate(){return new Date(this[c].created_at)}get expiryDate(){return Xe(this._expiryTimestamp,e=>new Date(e))}get moderatorId(){return this[c].moderator_id}async getModerator(){return te(await this._client.users.getUserById(this[c].moderator_id))}get userId(){return this[c].user_id}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};P([V(!1)],Ui.prototype,"_client",void 0);P([V(!1)],Ui.prototype,"_expiryTimestamp",void 0);Ui=P([L("api","HelixBanUser","userId")],Ui);let Yo=class extends Ui{constructor(e,t){super(e,e.expires_at||null,t)}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}get moderatorName(){return this[c].moderator_login}get moderatorDisplayName(){return this[c].moderator_name}get reason(){return this[c].reason||null}};Yo=P([L("api","HelixBan","userId")],Yo);let Zo=class extends K{get broadcasterId(){return this[c].broadcaster_id}get creationDate(){return new Date(this[c].created_at)}get expirationDate(){return this[c].expires_at?new Date(this[c].expires_at):null}get id(){return this[c].id}get moderatorId(){return this[c].moderator_id}get text(){return this[c].text}get updatedDate(){return new Date(this[c].updated_at)}};Zo=P([L("api","HelixBlockedTerm","id")],Zo);let Ls=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].broadcaster_id}get name(){return this[c].broadcaster_login}get displayName(){return this[c].broadcaster_name}async getChannel(){return te(await this._client.channels.getChannelInfoById(this[c].broadcaster_id))}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}};P([V(!1)],Ls.prototype,"_client",void 0);Ls=P([L("api","HelixModeratedChannel","id")],Ls);let Ns=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};P([V(!1)],Ns.prototype,"_client",void 0);Ns=P([L("api","HelixModerator","userId")],Ns);let Fs=class extends K{constructor(e,t){super(e),this._client=t}get isActive(){return this[c].is_active}get moderatorId(){return this[c].moderator_id}get moderatorName(){return this[c].moderator_login}get moderatorDisplayName(){return this[c].moderator_name}async getModerator(){return te(await this._client.users.getUserById(this[c].moderator_id))}get lastActivationDate(){return this[c].last_activated_at===""?null:new Date(this[c].last_activated_at)}};P([V(!1)],Fs.prototype,"_client",void 0);Fs=P([L("api","HelixShieldModeStatus")],Fs);let Ri=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_id}get broadcasterDisplayName(){return this[c].broadcaster_id}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get moderatorId(){return this[c].moderator_id}get moderatorName(){return this[c].moderator_login}get moderatorDisplayName(){return this[c].moderator_name}async getModerator(){return te(await this._client.users.getUserById(this[c].moderator_id))}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get message(){return this[c].text}get creationDate(){return new Date(this[c].created_at)}get resolutionMessage(){return this[c].resolution_text||null}get resolutionDate(){return Xe(this[c].resolved_at,e=>new Date(e))}};P([V(!1)],Ri.prototype,"_client",void 0);Ri=P([L("api","HelixUnbanRequest","id")],Ri);let el=class extends K{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[c].user_id}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get moderatorId(){return this[c].moderator_id}async getModerator(){return te(await this._client.users.getUserById(this[c].moderator_id))}get userId(){return this[c].user_id}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get reason(){return this[c].reason}};P([V(!1)],el.prototype,"_client",void 0);el=P([L("api","HelixWarning","userId")],el);let Bc=class extends be{async getBannedUsers(e,t){const r=await this._client.callApi({type:"helix",url:"moderation/banned",userId:R(e),scopes:["moderation:read"],query:{...Vg(e,t),...de(t)}});return xe(r,Yo,this._client)}getBannedUsersPaginated(e){return new fe({url:"moderation/banned",userId:R(e),scopes:["moderation:read"],query:pe(e)},this._client,t=>new Yo(t,this._client),50)}async checkUserBan(e,t){const r=R(t);return(await this.getBannedUsers(e,{userId:r})).data.some(a=>a.userId===r)}async getModerators(e,t){const r=await this._client.callApi({type:"helix",url:"moderation/moderators",userId:R(e),scopes:["moderation:read","channel:manage:moderators"],query:{...Vg(e,t),...de(t)}});return xe(r,Ns,this._client)}getModeratorsPaginated(e){return new fe({url:"moderation/moderators",userId:R(e),scopes:["moderation:read","channel:manage:moderators"],query:pe(e)},this._client,t=>new Ns(t,this._client))}async getModeratedChannels(e,t){const r=R(e),i=await this._client.callApi({type:"helix",url:"moderation/channels",userId:r,scopes:["user:read:moderated_channels"],query:{...me("user_id",r),...de(t)}});return xe(i,Ls,this._client)}getModeratedChannelsPaginated(e){const t=R(e);return new fe({url:"moderation/channels",userId:t,scopes:["user:read:moderated_channels"],query:me("user_id",t)},this._client,r=>new Ls(r,this._client))}async checkUserMod(e,t){const r=R(t);return(await this.getModerators(e,{userId:r})).data.some(a=>a.userId===r)}async addModerator(e,t){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"POST",userId:R(e),scopes:["channel:manage:moderators"],query:zg(e,t)})}async removeModerator(e,t){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"DELETE",userId:R(e),scopes:["channel:manage:moderators"],query:zg(e,t)})}async checkAutoModStatus(e,t){return(await this._client.callApi({type:"helix",url:"moderation/enforcements/status",method:"POST",userId:R(e),scopes:["moderation:read"],query:pe(e),jsonBody:cC(t)})).data.map(i=>new Dc(i))}async processHeldAutoModMessage(e,t,r){await this._client.callApi({type:"helix",url:"moderation/automod/message",method:"POST",userId:R(e),scopes:["moderator:manage:automod"],jsonBody:sC(e,t,r)})}async getAutoModSettings(e){const t=R(e);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",userId:t,scopes:["moderator:read:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(t)})).data.map(i=>new Jo(i))}async updateAutoModSettings(e,t){const r=R(e);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",method:"PUT",userId:r,scopes:["moderator:manage:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:oC(t)})).data.map(a=>new Jo(a))}async banUser(e,t){const r=R(e);return(await this._client.callApi({type:"helix",url:"moderation/bans",method:"POST",userId:r,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:lC(t)})).data.map(a=>new Ui(a,a.end_time,this._client))}async unbanUser(e,t){const r=R(e);await this._client.callApi({type:"helix",url:"moderation/bans",method:"DELETE",userId:r,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...me("user_id",R(t))}})}async getBlockedTerms(e,t){const r=R(e),i=await this._client.callApi({type:"helix",url:"moderation/blocked_terms",userId:r,scopes:["moderator:read:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...de(t)}});return xe(i,Zo,this._client)}async addBlockedTerm(e,t){const r=R(e);return(await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"POST",userId:r,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:{text:t}})).data.map(a=>new Zo(a))}async removeBlockedTerm(e,t,r){const i=R(e);await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"DELETE",userId:i,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(i),id:r}})}async deleteChatMessages(e,t){const r=R(e);await this._client.callApi({type:"helix",url:"moderation/chat",method:"DELETE",userId:r,scopes:["moderator:manage:chat_messages"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...me("message_id",t)}})}async getShieldModeStatus(e){const t=R(e),r=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"GET",userId:t,scopes:["moderator:read:shield_mode","moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(t)});return new Fs(r.data[0],this._client)}async updateShieldModeStatus(e,t){const r=R(e),i=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"PUT",userId:r,scopes:["moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:uC(t)});return new Fs(i.data[0],this._client)}async getUnbanRequests(e,t,r){const i=R(e),a=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"GET",userId:i,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(i),...me("status",t),...de(r)}});return xe(a,Ri,this._client)}getUnbanRequestsPaginated(e,t){const r=R(e);return new fe({url:"moderation/unban_requests",method:"GET",userId:r,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...me("status",t)}},this._client,i=>new Ri(i,this._client))}async resolveUnbanRequest(e,t,r,i){const a=R(e),s=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"PATCH",userId:a,scopes:["moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:aC(a,this._getUserContextIdWithDefault(a),t,r,i==null?void 0:i.slice(0,500))});return new Ri(s.data[0],this._client)}async warnUser(e,t,r){const i=R(e),a=await this._client.callApi({type:"helix",url:"moderation/warnings",method:"POST",userId:i,scopes:["moderator:manage:warnings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(i),jsonBody:dC(t,r.slice(0,500))});return new el(a.data[0],this._client)}_createModeratorActionQuery(e){return wv(e,this._getUserContextIdWithDefault(e))}};Bc=P([L("api","HelixModerationApi")],Bc);function hC(n,e){var t;return{broadcaster_id:R(n),title:e.title,choices:e.choices.map(r=>({title:r})),duration:e.duration,channel_points_voting_enabled:e.channelPointsPerVote!=null,channel_points_per_vote:(t=e.channelPointsPerVote)!==null&&t!==void 0?t:0}}function pC(n,e,t){return{broadcaster_id:R(n),id:e,status:t?"TERMINATED":"ARCHIVED"}}let Oc=class extends K{get id(){return this[c].id}get title(){return this[c].title}get totalVotes(){return this[c].votes}get channelPointsVotes(){return this[c].channel_points_votes}};Oc=P([L("api","HelixPollChoice","id")],Oc);let At=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get title(){return this[c].title}get isChannelPointsVotingEnabled(){return this[c].channel_points_voting_enabled}get channelPointsPerVote(){return this[c].channel_points_per_vote}get status(){return this[c].status}get durationInSeconds(){return this[c].duration}get startDate(){return new Date(this[c].started_at)}get endDate(){return new Date(this.startDate.getTime()+this[c].duration*1e3)}get choices(){return this[c].choices.map(e=>new Oc(e))}};P([V(!1)],At.prototype,"_client",void 0);At=P([L("api","HelixPoll","id")],At);let Uc=class extends be{async getPolls(e,t){const r=await this._client.callApi({type:"helix",url:"polls",userId:R(e),scopes:["channel:read:polls","channel:manage:polls"],query:{...pe(e),...de(t)}});return xe(r,At,this._client)}getPollsPaginated(e){return new fe({url:"polls",userId:R(e),scopes:["channel:read:polls","channel:manage:polls"],query:pe(e)},this._client,t=>new At(t,this._client),20)}async getPollsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"polls",userId:R(e),scopes:["channel:read:polls","channel:manage:polls"],query:Dl(e,t)})).data.map(i=>new At(i,this._client)):[]}async getPollById(e,t){const r=await this.getPollsByIds(e,[t]);return r.length?r[0]:null}async createPoll(e,t){const r=await this._client.callApi({type:"helix",url:"polls",method:"POST",userId:R(e),scopes:["channel:manage:polls"],jsonBody:hC(e,t)});return new At(r.data[0],this._client)}async endPoll(e,t,r=!0){const i=await this._client.callApi({type:"helix",url:"polls",method:"PATCH",userId:R(e),scopes:["channel:manage:polls"],jsonBody:pC(e,t,r)});return new At(i.data[0],this._client)}};Uc=P([L("api","HelixPollApi")],Uc);function mC(n,e){return{broadcaster_id:R(n),title:e.title,outcomes:e.outcomes.map(t=>({title:t})),prediction_window:e.autoLockAfter}}function _C(n,e,t,r){return{broadcaster_id:R(n),id:e,status:t,winning_outcome_id:r}}let tl=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return await this._client.users.getUserById(this[c].user_id)}get channelPointsUsed(){return this[c].channel_points_used}get channelPointsWon(){return this[c].channel_points_won}};P([V(!1)],tl.prototype,"_client",void 0);tl=P([L("api","HelixPredictor","userId")],tl);let $s=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get title(){return this[c].title}get users(){return this[c].users}get totalChannelPoints(){return this[c].channel_points}get color(){return this[c].color}get topPredictors(){var e,t;return(t=(e=this[c].top_predictors)===null||e===void 0?void 0:e.map(r=>new tl(r,this._client)))!==null&&t!==void 0?t:[]}};P([V(!1)],$s.prototype,"_client",void 0);$s=P([L("api","HelixPredictionOutcome","id")],$s);let Tt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get title(){return this[c].title}get status(){return this[c].status}get autoLockAfter(){return this[c].prediction_window}get creationDate(){return new Date(this[c].created_at)}get endDate(){return this[c].ended_at?new Date(this[c].ended_at):null}get lockDate(){return this[c].locked_at?new Date(this[c].locked_at):null}get outcomes(){return this[c].outcomes.map(e=>new $s(e,this._client))}get winningOutcomeId(){return this[c].winning_outcome_id||null}get winningOutcome(){if(!this[c].winning_outcome_id)return null;const e=this[c].outcomes.find(t=>t.id===this[c].winning_outcome_id);if(!e)throw new Pi("Winning outcome not found in outcomes array");return new $s(e,this._client)}};P([V(!1)],Tt.prototype,"_client",void 0);Tt=P([L("api","HelixPrediction","id")],Tt);let qc=class extends be{async getPredictions(e,t){const r=await this._client.callApi({type:"helix",url:"predictions",userId:R(e),scopes:["channel:read:predictions"],query:{...pe(e),...de(t)}});return xe(r,Tt,this._client)}getPredictionsPaginated(e){return new fe({url:"predictions",userId:R(e),scopes:["channel:read:predictions"],query:pe(e)},this._client,t=>new Tt(t,this._client),20)}async getPredictionsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"predictions",userId:R(e),scopes:["channel:read:predictions"],query:Dl(e,t)})).data.map(i=>new Tt(i,this._client)):[]}async getPredictionById(e,t){const r=await this.getPredictionsByIds(e,[t]);return r.length?r[0]:null}async createPrediction(e,t){const r=await this._client.callApi({type:"helix",url:"predictions",method:"POST",userId:R(e),scopes:["channel:manage:predictions"],jsonBody:mC(e,t)});return new Tt(r.data[0],this._client)}async lockPrediction(e,t){return await this._endPrediction(e,t,"LOCKED")}async resolvePrediction(e,t,r){return await this._endPrediction(e,t,"RESOLVED",r)}async cancelPrediction(e,t){return await this._endPrediction(e,t,"CANCELED")}async _endPrediction(e,t,r,i){const a=await this._client.callApi({type:"helix",url:"predictions",method:"PATCH",userId:R(e),scopes:["channel:manage:predictions"],jsonBody:_C(e,t,r,i)});return new Tt(a.data[0],this._client)}};qc=P([L("api","HelixPredictionApi")],qc);function gC(n,e){return{from_broadcaster_id:R(n),to_broadcaster_id:R(e)}}let kc=class extends K{get creationDate(){return new Date(this[c].created_at)}get targetIsMature(){return this[c].is_mature}};kc=P([L("api","HelixRaid")],kc);let Mc=class extends be{async startRaid(e,t){const r=await this._client.callApi({type:"helix",url:"raids",method:"POST",userId:R(e),scopes:["channel:manage:raids"],query:gC(e,t)});return new kc(r.data[0])}async cancelRaid(e){await this._client.callApi({type:"helix",url:"raids",method:"DELETE",userId:R(e),scopes:["channel:manage:raids"],query:pe(e)})}};Mc=P([L("api","HelixRaidApi")],Mc);function Cv(n,e){var t;return{broadcaster_id:R(n),start_time:e==null?void 0:e.startDate,utc_offset:(t=e==null?void 0:e.utcOffset)===null||t===void 0?void 0:t.toString()}}function fC(n,e){return e.vacation?{broadcaster_id:R(n),is_vacation_enabled:"true",vacation_start_time:e.vacation.startDate,vacation_end_time:e.vacation.endDate,timezone:e.vacation.timezone}:{broadcaster_id:R(n),is_vacation_enabled:"false"}}function yC(n){return{start_time:n.startDate,timezone:n.timezone,is_recurring:n.isRecurring,duration:n.duration,category_id:n.categoryId,title:n.title}}function Kg(n,e){return{broadcaster_id:R(n),id:e}}function bC(n){return{start_time:n.startDate,timezone:n.timezone,is_canceled:n.isCanceled,duration:n.duration,category_id:n.categoryId,title:n.title}}let Dt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get startDate(){return new Date(this[c].start_time)}get endDate(){return new Date(this[c].end_time)}get title(){return this[c].title}get cancelEndDate(){return Xe(this[c].canceled_until,e=>new Date(e))}get categoryId(){var e,t;return(t=(e=this[c].category)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:null}get categoryName(){var e,t;return(t=(e=this[c].category)===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:null}async getCategory(){var e;const t=(e=this[c].category)===null||e===void 0?void 0:e.id;return t?await this._client.games.getGameById(t):null}get isRecurring(){return this[c].is_recurring}};P([V(!1)],Dt.prototype,"_client",void 0);Dt=P([L("api","HelixScheduleSegment","id")],Dt);let jc=class extends fe{constructor(e,t,r){super({url:"schedule",query:Cv(e,r)},t,i=>new Dt(i,t),25)}async _fetchData(e={}){var t;const r=await super._fetchData(e);return{data:(t=r.data.segments)!==null&&t!==void 0?t:[],pagination:r.pagination}}};jc=P([L("api","HelixPaginatedScheduleSegmentRequest")],jc);let rl=class extends K{constructor(e,t){super(e),this._client=t}get segments(){var e,t;return(t=(e=this[c].segments)===null||e===void 0?void 0:e.map(r=>new Dt(r,this._client)))!==null&&t!==void 0?t:[]}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get vacationStartDate(){var e;const t=(e=this[c].vacation)===null||e===void 0?void 0:e.start_time;return t?new Date(t):null}get vacationEndDate(){var e;const t=(e=this[c].vacation)===null||e===void 0?void 0:e.end_time;return t?new Date(t):null}};P([V(!1)],rl.prototype,"_client",void 0);rl=P([L("api","HelixSchedule","broadcasterId")],rl);class vC extends be{async getSchedule(e,t){const r=await this._client.callApi({type:"helix",url:"schedule",userId:R(e),query:{...Cv(e,t),...de(t)}});return{data:new rl(r.data,this._client),cursor:r.pagination.cursor}}getScheduleSegmentsPaginated(e,t){return new jc(e,this._client,t)}async getScheduleSegmentsByIds(e,t){var r,i;return(i=(r=(await this._client.callApi({type:"helix",url:"schedule",userId:R(e),query:Dl(e,t)})).data.segments)===null||r===void 0?void 0:r.map(s=>new Dt(s,this._client)))!==null&&i!==void 0?i:[]}async getScheduleSegmentById(e,t){const r=await this.getScheduleSegmentsByIds(e,[t]);return r.length?r[0]:null}async getScheduleAsIcal(e){return await this._client.callApi({type:"helix",url:"schedule/icalendar",query:pe(e)})}async updateScheduleSettings(e,t){await this._client.callApi({type:"helix",url:"schedule/settings",method:"PATCH",userId:R(e),scopes:["channel:manage:schedule"],query:fC(e,t)})}async createScheduleSegment(e,t){const r=await this._client.callApi({type:"helix",url:"schedule/segment",method:"POST",userId:R(e),scopes:["channel:manage:schedule"],query:pe(e),jsonBody:yC(t)});return new Dt(r.data.segments[0],this._client)}async updateScheduleSegment(e,t,r){const i=await this._client.callApi({type:"helix",url:"schedule/segment",method:"PATCH",userId:R(e),scopes:["channel:manage:schedule"],query:Kg(e,t),jsonBody:bC(r)});return new Dt(i.data.segments[0],this._client)}async deleteScheduleSegment(e,t){await this._client.callApi({type:"helix",url:"schedule/segment",method:"DELETE",userId:R(e),scopes:["channel:manage:schedule"],query:Kg(e,t)})}}function Xg(n,e){var t;return{query:n,live_only:(t=e.liveOnly)===null||t===void 0?void 0:t.toString()}}let Gs=class extends K{constructor(e,t){super(e),this._client=t}get language(){return this[c].broadcaster_language}get id(){return this[c].id}get name(){return this[c].broadcaster_login}get displayName(){return this[c].display_name}async getUser(){return te(await this._client.users.getUserById(this[c].id))}get gameId(){return this[c].game_id}get gameName(){return this[c].game_name}async getGame(){return this[c].game_id?te(await this._client.games.getGameById(this[c].game_id)):null}get isLive(){return this[c].is_live}get tags(){return this[c].tags}get thumbnailUrl(){return this[c].thumbnail_url}get startDate(){return this[c].is_live?new Date(this[c].started_at):null}};P([V(!1)],Gs.prototype,"_client",void 0);Gs=P([L("api","HelixChannelSearchResult","id")],Gs);let Lc=class extends be{async searchCategories(e,t){const r=await this._client.callApi({type:"helix",url:"search/categories",query:{query:e,...de(t)}});return xe(r,at,this._client)}searchCategoriesPaginated(e){return new fe({url:"search/categories",query:{query:e}},this._client,t=>new at(t,this._client))}async searchChannels(e,t={}){const r=await this._client.callApi({type:"helix",url:"search/channels",query:{...Xg(e,t),...de(t)}});return xe(r,Gs,this._client)}searchChannelsPaginated(e,t={}){return new fe({url:"search/channels",query:Xg(e,t)},this._client,r=>new Gs(r,this._client))}};Lc=P([L("api","HelixSearchApi")],Lc);class wC extends ji{constructor(e){super("Your stream needs to be live to do this",e)}}function tc(n){return{game_id:n.game,language:n.language,type:n.type,user_id:n.userId,user_login:n.userName}}function xC(n,e){return{user_id:R(n),description:e}}function Jg(n){return{video_id:n}}let ut=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get gameId(){return this[c].game_id}get gameName(){return this[c].game_name}async getGame(){return this[c].game_id?te(await this._client.games.getGameById(this[c].game_id)):null}get type(){return this[c].type}get title(){return this[c].title}get viewers(){return this[c].viewer_count}get startDate(){return new Date(this[c].started_at)}get language(){return this[c].language}get thumbnailUrl(){return this[c].thumbnail_url}getThumbnailUrl(e,t){return this[c].thumbnail_url.replace("{width}",e.toString()).replace("{height}",t.toString())}get tags(){return this[c].tags}get isMature(){return this[c].is_mature}};P([V(!1)],ut.prototype,"_client",void 0);ut=P([L("api","HelixStream","id")],ut);let Qs=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get creationDate(){return new Date(this[c].created_at)}get description(){return this[c].description}get positionInSeconds(){return this[c].position_seconds}};P([V(!1)],Qs.prototype,"_client",void 0);Qs=P([L("api","HelixStreamMarker","id")],Qs);let Nc=class extends Qs{constructor(e,t,r){super(e,r),this._videoId=t}get url(){return this[c].URL}get videoId(){return this._videoId}async getVideo(){return te(await this._client.videos.getVideoById(this._videoId))}};Nc=P([L("api","HelixStreamMarkerWithVideo","id")],Nc);var vi;let Ws=vi=class extends be{constructor(){super(...arguments),this._getStreamByUserIdBatcher=new Ze({url:"streams"},"user_id","user_id",this._client,e=>new ut(e,this._client)),this._getStreamByUserNameBatcher=new Ze({url:"streams"},"user_login","user_login",this._client,e=>new ut(e,this._client))}async getStreams(e={}){const t=await this._client.callApi({url:"streams",type:"helix",query:{...tc(e),...de(e)}});return xe(t,ut,this._client)}getStreamsPaginated(e={}){return new fe({url:"streams",query:tc(e)},this._client,t=>new ut(t,this._client))}async getStreamsByUserNames(e){return(await this.getStreams({userName:e.map(Ss)})).data}async getStreamByUserName(e){var t;return(t=(await this.getStreamsByUserNames([e]))[0])!==null&&t!==void 0?t:null}async getStreamByUserNameBatched(e){return await this._getStreamByUserNameBatcher.request(Ss(e))}async getStreamsByUserIds(e){return(await this.getStreams({userId:e.map(R)})).data}async getStreamByUserId(e){const t=R(e),r=await this._client.callApi({url:"streams",type:"helix",userId:t,query:tc({userId:t})});return Xe(r.data[0],i=>new ut(i,this._client))}async getStreamByUserIdBatched(e){return await this._getStreamByUserIdBatcher.request(R(e))}async getStreamMarkersForUser(e,t){var r;const i=await this._client.callApi({url:"streams/markers",type:"helix",query:{...qg(e),...de(t)},userId:R(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:Tg(i.data.map(a=>vi._mapGetStreamMarkersResult(a,this._client))),cursor:(r=i.pagination)===null||r===void 0?void 0:r.cursor}}getStreamMarkersForUserPaginated(e){return new fe({url:"streams/markers",query:qg(e),userId:R(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,t=>vi._mapGetStreamMarkersResult(t,this._client))}async getStreamMarkersForVideo(e,t,r){var i;const a=await this._client.callApi({url:"streams/markers",type:"helix",query:{...Jg(t),...de(r)},userId:R(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:Tg(a.data.map(s=>vi._mapGetStreamMarkersResult(s,this._client))),cursor:(i=a.pagination)===null||i===void 0?void 0:i.cursor}}getStreamMarkersForVideoPaginated(e,t){return new fe({url:"streams/markers",query:Jg(t),userId:R(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,r=>vi._mapGetStreamMarkersResult(r,this._client))}async createStreamMarker(e,t){try{const r=await this._client.callApi({url:"streams/markers",method:"POST",type:"helix",userId:R(e),scopes:["channel:manage:broadcast"],canOverrideScopedUserContext:!0,jsonBody:xC(e,t)});return new Qs(r.data[0],this._client)}catch(r){throw r instanceof Di&&r.statusCode===404?new wC({cause:r}):r}}async getStreamKey(e){const t=R(e);return(await this._client.callApi({type:"helix",url:"streams/key",userId:t,scopes:["channel:read:stream_key"],query:pe(e)})).data[0].stream_key}async getFollowedStreams(e,t){const r=R(e),i=await this._client.callApi({type:"helix",url:"streams/followed",userId:r,scopes:["user:read:follows"],query:{...me("user_id",r),...de(t)}});return xe(i,ut,this._client)}getFollowedStreamsPaginated(e){const t=R(e);return new fe({url:"streams/followed",userId:t,scopes:["user:read:follows"],query:me("user_id",t)},this._client,r=>new ut(r,this._client))}static _mapGetStreamMarkersResult(e,t){return e.videos.reduce((r,i)=>[...r,...i.markers.map(a=>new Nc(a,i.video_id,t))],[])}};P([V(!1)],Ws.prototype,"_getStreamByUserIdBatcher",void 0);P([V(!1)],Ws.prototype,"_getStreamByUserNameBatcher",void 0);Ws=vi=P([L("api","HelixStreamApi")],Ws);function SC(n,e){return{broadcaster_id:R(n),user_id:R(e)}}let Vs=class extends K{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return await this._client.users.getUserById(this[c].broadcaster_id)}get isGift(){return this[c].is_gift}get tier(){return this[c].tier}};P([V(!1)],Vs.prototype,"_client",void 0);Vs=P([L("api","HelixUserSubscription","broadcasterId")],Vs);let zs=class extends Vs{get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return te(await this._client.users.getUserById(this[c].broadcaster_id))}get gifterId(){return this[c].is_gift?this[c].gifter_id:null}get gifterName(){return this[c].is_gift?this[c].gifter_login:null}get gifterDisplayName(){return this[c].is_gift?this[c].gifter_name:null}async getGifter(){return this[c].is_gift?te(await this._client.users.getUserById(this[c].gifter_id)):null}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};zs=P([L("api","HelixSubscription","userId")],zs);let Fc=class extends nr{constructor(e,t){super({url:"subscriptions",scopes:["channel:read:subscriptions"],userId:R(e),query:pe(e)},t,r=>new zs(r,t))}async getPoints(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).points}};Fc=P([L("api","HelixPaginatedSubscriptionsRequest")],Fc);let $c=class extends be{async getSubscriptions(e,t){const r=await this._client.callApi({url:"subscriptions",scopes:["channel:read:subscriptions"],type:"helix",userId:R(e),query:{...pe(e),...de(t)}});return{...It(r,zs,this._client),points:r.points}}getSubscriptionsPaginated(e){return new Fc(e,this._client)}async getSubscriptionsForUsers(e,t){return(await this._client.callApi({type:"helix",url:"subscriptions",userId:R(e),scopes:["channel:read:subscriptions"],query:xv(e,t)})).data.map(i=>new zs(i,this._client))}async getSubscriptionForUser(e,t){const r=await this.getSubscriptionsForUsers(e,[t]);return r.length?r[0]:null}async checkUserSubscription(e,t){try{const r=await this._client.callApi({type:"helix",url:"subscriptions/user",userId:R(e),scopes:["user:read:subscriptions"],query:SC(t,e)});return new Vs(r.data[0],this._client)}catch(r){if(r instanceof Di&&r.statusCode===404)return null;throw r}}};$c=P([L("api","HelixSubscriptionApi")],$c);let Ks=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get name(){return this[c].team_name}get displayName(){return this[c].team_display_name}get backgroundImageUrl(){return this[c].background_image_url}get bannerUrl(){return this[c].banner}get creationDate(){return new Date(this[c].created_at)}get updateDate(){return new Date(this[c].updated_at)}get info(){return this[c].info}get logoThumbnailUrl(){return this[c].thumbnail_url}async getUserRelations(){return(await this._client.teams.getTeamById(this.id)).userRelations}};P([V(!1)],Ks.prototype,"_client",void 0);Ks=P([L("api","HelixTeam","id")],Ks);let nl=class extends Ks{get userRelations(){return this[c].users.map(e=>new tr(e,this._client))}};nl=P([L("api","HelixTeamWithUsers","id")],nl);let Gc=class extends be{async getTeamsForBroadcaster(e){var t,r;return(r=(t=(await this._client.callApi({type:"helix",url:"teams/channel",userId:R(e),query:pe(e)})).data)===null||t===void 0?void 0:t.map(a=>new Ks(a,this._client)))!==null&&r!==void 0?r:[]}async getTeamById(e){try{const t=await this._client.callApi({type:"helix",url:"teams",query:{id:e}});return new nl(t.data[0],this._client)}catch(t){if(t instanceof Di&&t.statusCode===500)return null;throw t}}async getTeamByName(e){try{const t=await this._client.callApi({type:"helix",url:"teams",query:{name:e}});return new nl(t.data[0],this._client)}catch(t){if(t instanceof Di&&t.statusCode===404)return null;throw t}}};Gc=P([L("api","HelixTeamApi")],Gc);function CC(n,e){return{target_user_id:R(n),source_context:e.sourceContext,reason:e.reason}}function EC(n){return{target_user_id:R(n)}}class Ev extends K{get id(){return this[c].id}get version(){return this[c].version}get name(){return this[c].name}}let Es=class extends Ev{constructor(e,t,r){super(r),this._slotType=e,this._slotId=t}get slotType(){return this._slotType}get slotId(){return this._slotId}};Es=P([L("api","HelixInstalledExtension","id")],Es);let il=class extends K{getExtensionAtSlot(e,t){const r=this[c][e][t];return r.active?new Es(e,t,r):null}getExtensionsForSlotType(e){return[...Object.entries(this[c][e])].filter(t=>t[1].active).map(([t,r])=>new Es(e,t,r))}getAllExtensions(){return[...Object.entries(this[c])].flatMap(([e,t])=>[...Object.entries(t)].filter(r=>r[1].active).map(([r,i])=>new Es(e,r,i)))}};il=P([L("api","HelixInstalledExtensionList")],il);let Qc=class extends Ev{get canActivate(){return this[c].can_activate}get types(){return this[c].type}};Qc=P([L("api","HelixUserExtension","id")],Qc);let Pt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get name(){return this[c].login}get displayName(){return this[c].display_name}get description(){return this[c].description}get type(){return this[c].type}get broadcasterType(){return this[c].broadcaster_type}get profilePictureUrl(){return this[c].profile_image_url}get offlinePlaceholderUrl(){return this[c].offline_image_url}get creationDate(){return new Date(this[c].created_at)}async getStream(){return await this._client.streams.getStreamByUserId(this)}async getFollowedChannels(){return await this._client.channels.getFollowedChannels(this)}async getFollowedChannel(e){var t;return(t=(await this._client.channels.getFollowedChannels(this,e)).data[0])!==null&&t!==void 0?t:null}async follows(e){return await this.getFollowedChannel(e)!==null}async getChannelFollowers(){return await this._client.channels.getChannelFollowers(this)}async getChannelFollower(e){var t;return(t=(await this._client.channels.getChannelFollowers(this,e)).data[0])!==null&&t!==void 0?t:null}async isFollowedBy(e){return await this.getChannelFollower(e)!==null}async getSubscriptionTo(e){return await this._client.subscriptions.checkUserSubscription(this,e)}async isSubscribedTo(e){return await this.getSubscriptionTo(e)!==null}async getSubscriber(e){return await this._client.subscriptions.getSubscriptionForUser(this,e)}async hasSubscriber(e){return await this.getSubscriber(e)!==null}};P([V(!1)],Pt.prototype,"_client",void 0);Pt=P([L("api","HelixUser","id")],Pt);let al=class extends Pt{get email(){return this[c].email}async setDescription(e){return await this._client.users.updateAuthenticatedUser(this,{description:e})}};al=P([L("api","HelixPrivilegedUser","id")],al);let Xs=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].display_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}};P([V(!1)],Xs.prototype,"_client",void 0);Xs=P([L("api","HelixUserBlock","userId")],Xs);let Js=class extends be{constructor(){super(...arguments),this._getUserByIdBatcher=new Ze({url:"users"},"id","id",this._client,e=>new Pt(e,this._client)),this._getUserByNameBatcher=new Ze({url:"users"},"login","login",this._client,e=>new Pt(e,this._client))}async getUsersByIds(e){return await this._getUsers("id",e.map(R))}async getUsersByNames(e){return await this._getUsers("login",e.map(Ss))}async getUserById(e){const t=R(e),r=await this._client.callApi({type:"helix",url:"users",userId:t,query:{id:t}});return Xe(r.data[0],i=>new Pt(i,this._client))}async getUserByIdBatched(e){return await this._getUserByIdBatcher.request(R(e))}async getUserByName(e){const t=await this._getUsers("login",[Ss(e)]);return t.length?t[0]:null}async getUserByNameBatched(e){return await this._getUserByNameBatcher.request(Ss(e))}async getAuthenticatedUser(e,t=!1){var r;const i=await this._client.callApi({type:"helix",url:"users",forceType:"user",userId:R(e),scopes:t?["user:read:email"]:void 0});if(!(!((r=i.data)===null||r===void 0)&&r.length))throw new Pi("Could not get authenticated user");return new al(i.data[0],this._client)}async updateAuthenticatedUser(e,t){const r=await this._client.callApi({type:"helix",url:"users",method:"PUT",userId:R(e),scopes:["user:edit"],query:{description:t.description}});return new al(r.data[0],this._client)}async getBlocks(e,t){const r=await this._client.callApi({type:"helix",url:"users/blocks",userId:R(e),scopes:["user:read:blocked_users"],query:{...pe(e),...de(t)}});return xe(r,Xs,this._client)}getBlocksPaginated(e){return new fe({url:"users/blocks",userId:R(e),scopes:["user:read:blocked_users"],query:pe(e)},this._client,t=>new Xs(t,this._client))}async createBlock(e,t,r={}){await this._client.callApi({type:"helix",url:"users/blocks",method:"PUT",userId:R(e),scopes:["user:manage:blocked_users"],query:CC(t,r)})}async deleteBlock(e,t){await this._client.callApi({type:"helix",url:"users/blocks",method:"DELETE",userId:R(e),scopes:["user:manage:blocked_users"],query:EC(t)})}async getExtensionsForAuthenticatedUser(e,t=!1){return(await this._client.callApi({type:"helix",url:"users/extensions/list",userId:R(e),scopes:t?["channel:manage:extensions"]:["user:read:broadcast","channel:manage:extensions"]})).data.map(i=>new Qc(i))}async getActiveExtensions(e,t=!1){const r=R(e),i=await this._client.callApi({type:"helix",url:"users/extensions",userId:r,scopes:t?["user:read:broadcast","channel:manage:extensions"]:void 0,query:me("user_id",r)});return new il(i.data)}async updateActiveExtensionsForAuthenticatedUser(e,t){const r=await this._client.callApi({type:"helix",url:"users/extensions",method:"PUT",userId:R(e),scopes:["channel:manage:extensions"],jsonBody:{data:t}});return new il(r.data)}async _getUsers(e,t){if(t.length===0)return[];const r={[e]:t};return(await this._client.callApi({type:"helix",url:"users",query:r})).data.map(a=>new Pt(a,this._client))}};P([V(!1)],Js.prototype,"_getUserByIdBatcher",void 0);P([V(!1)],Js.prototype,"_getUserByNameBatcher",void 0);Js=P([L("api","HelixUserApi")],Js);let rr=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return te(await this._client.users.getUserById(this[c].user_id))}get title(){return this[c].title}get description(){return this[c].description}get creationDate(){return new Date(this[c].created_at)}get publishDate(){return new Date(this[c].published_at)}get url(){return this[c].url}get thumbnailUrl(){return this[c].thumbnail_url}getThumbnailUrl(e,t){return this[c].thumbnail_url.replace("%{width}",e.toString()).replace("%{height}",t.toString())}get isPublic(){return this[c].viewable==="public"}get views(){return this[c].view_count}get language(){return this[c].language}get type(){return this[c].type}get duration(){return this[c].duration}get durationInSeconds(){const e=this[c].duration.match(/\d+[hms]/g);if(!e)throw new Pi(`Could not parse duration string: ${this[c].duration}`);return e.map(t=>{const r=/(\d+)([hms])/.exec(t);if(!r)throw new Pi(`Could not parse partial duration string: ${t}`);const[,i,a]=r;return parseInt(i,10)*{h:3600,m:60,s:1}[a]}).reduce((t,r)=>t+r)}get streamId(){return this[c].stream_id}get mutedSegmentData(){var e,t;return(t=(e=this[c].muted_segments)===null||e===void 0?void 0:e.slice())!==null&&t!==void 0?t:[]}isMutedAt(e,t,r=!1){if(this[c].muted_segments===null)return!1;if(t==null)return this[c].muted_segments.some(a=>a.offset<=e&&e<=a.offset+a.duration);const i=e+t;return r?this[c].muted_segments.some(a=>{const s=a.offset+a.duration;return e<s&&a.offset<i}):this[c].muted_segments.some(a=>{const s=a.offset+a.duration;return a.offset<=e&&i<=s})}};P([V(!1)],rr.prototype,"_client",void 0);P([ge()],rr.prototype,"durationInSeconds",null);rr=P([to,L("api","HelixVideo","id")],rr);var To;let sl=To=class extends be{constructor(){super(...arguments),this._getVideoByIdBatcher=new Ze({url:"videos"},"id","id",this._client,e=>new rr(e,this._client))}async getVideosByIds(e){return(await this._getVideos("id",e)).data}async getVideoById(e){const t=await this.getVideosByIds([e]);return t.length?t[0]:null}async getVideoByIdBatched(e){return await this._getVideoByIdBatcher.request(e)}async getVideosByUser(e,t={}){const r=R(e);return await this._getVideos("user_id",[r],t)}getVideosByUserPaginated(e,t={}){const r=R(e);return this._getVideosPaginated("user_id",[r],t)}async getVideosByGame(e,t={}){return await this._getVideos("game_id",[e],t)}getVideosByGamePaginated(e,t={}){return this._getVideosPaginated("game_id",[e],t)}async deleteVideosByIds(e,t){await this._client.callApi({type:"helix",url:"videos",method:"DELETE",scopes:["channel:manage:videos"],userId:R(e),query:{id:t}})}async _getVideos(e,t,r={}){if(!t.length)return{data:[]};const i=await this._client.callApi({type:"helix",url:"videos",userId:e==="user_id"?t[0]:void 0,query:{...To._makeVideosQuery(e,t,r),...de(r)}});return xe(i,rr,this._client)}_getVideosPaginated(e,t,r={}){return new fe({url:"videos",userId:e==="user_id"?t[0]:void 0,query:To._makeVideosQuery(e,t,r)},this._client,i=>new rr(i,this._client))}static _makeVideosQuery(e,t,r={}){const{language:i,period:a,orderBy:s,type:o}=r;return{[e]:t,language:i,period:a,sort:s,type:o}}};P([V(!1)],sl.prototype,"_getVideoByIdBatcher",void 0);sl=To=P([L("api","HelixVideoApi")],sl);function HC(n,e){return{from_user_id:R(n),to_user_id:R(e)}}let Wc=class extends be{async sendWhisper(e,t,r){await this._client.callApi({type:"helix",url:"whispers",method:"POST",userId:R(e),scopes:["user:manage:whispers"],query:HC(e,t),jsonBody:{message:r}})}};Wc=P([L("api","HelixWhisperApi")],Wc);class RC{constructor(e,t,r){this._options=e,this._httpStatus=t,this._resolvedUserId=r}get options(){return this._options}get httpStatus(){return this._httpStatus}get resolvedUserId(){return this._resolvedUserId}}let _e=class extends Pl{constructor(e,t,r){super(),this.onRequest=this.registerEvent(),this._config=e,this._logger=t,this._rateLimiter=r}async requestScopesForUser(e,t){await this._config.authProvider.getAccessTokenForUser(e,...t.map(r=>[r]))}async getTokenInfo(){try{const e=await this.callApi({type:"auth",url:"validate"});return new bc(e)}catch(e){throw e instanceof Di&&e.statusCode===401?new q0({cause:e}):e}}async callApi(e){var t;const{authProvider:r}=this._config;if(!((t=e.auth)!==null&&t!==void 0?t:!0))return await bv(e,r.clientId,void 0,void 0,this._config.fetchOptions);let a=!1;if(e.forceType)switch(e.forceType){case"app":{if(!r.getAppAccessToken)throw new Error("Tried to make an API call that requires an app access token but your auth provider does not support that");const u=await r.getAppAccessToken();return await this._callApiUsingInitialToken(e,u)}case"user":{a=!0;break}default:throw new Pi(`Unknown forced token type: ${e.forceType}`)}if(e.scopes&&(a=!0),a){const u=e.canOverrideScopedUserContext?this._getUserIdFromRequestContext(e.userId):e.userId;if(!u)throw new Error("Tried to make an API call with a user context but no context user ID");const h=await r.getAccessTokenForUser(u,e.scopes);if(!h)throw new Error(`Tried to make an API call with a user context for user ID ${u} but no token was found`);if(yc(h)&&r.refreshAccessTokenForUser){const m=await r.refreshAccessTokenForUser(u);return await this._callApiUsingInitialToken(e,m,!0)}return await this._callApiUsingInitialToken(e,h)}const s=this._getUserIdFromRequestContext(e.userId),o=s===null?await r.getAnyAccessToken():await r.getAnyAccessToken(s??e.userId);if(yc(o)&&o.userId&&r.refreshAccessTokenForUser){const u=await r.refreshAccessTokenForUser(o.userId);return await this._callApiUsingInitialToken(e,u,!0)}return await this._callApiUsingInitialToken(e,o)}get bits(){return new wc(this)}get channels(){return new ko(this)}get channelPoints(){return new Cc(this)}get charity(){return new Ec(this)}get chat(){return new Rc(this)}get clips(){return new Vo(this)}get contentClassificationLabels(){return new Ac(this)}get entitlements(){return new zo(this)}get eventSub(){return new Tc(this)}get extensions(){return new Ic(this)}get games(){return new Oi(this)}get hypeTrain(){return new iC(this)}get goals(){return new Pc(this)}get moderation(){return new Bc(this)}get polls(){return new Uc(this)}get predictions(){return new qc(this)}get raids(){return new Mc(this)}get schedule(){return new vC(this)}get search(){return new Lc(this)}get streams(){return new Ws(this)}get subscriptions(){return new $c(this)}get teams(){return new Gc(this)}get users(){return new Js(this)}get videos(){return new sl(this)}get whispers(){return new Wc(this)}get rateLimiterStats(){return this._rateLimiter instanceof Hd?this._rateLimiter.stats:null}get _authProvider(){return this._config.authProvider}get _mockServerPort(){return this._config.mockServerPort}get _batchDelay(){var e;return(e=this._config.batchDelay)!==null&&e!==void 0?e:0}_getUserIdFromRequestContext(e){return e}async _callApiUsingInitialToken(e,t,r=!1){var i;const{authProvider:a}=this._config,{authorizationType:s}=a;let o=await this._callApiInternal(e,a.clientId,t.accessToken,s);if(o.status===401&&!r){if(t.userId){if(a.refreshAccessTokenForUser){const u=await a.refreshAccessTokenForUser(t.userId);o=await this._callApiInternal(e,a.clientId,u.accessToken,s)}}else if(a.getAppAccessToken){const u=await a.getAppAccessToken(!0);o=await this._callApiInternal(e,a.clientId,u.accessToken,s)}}return this.emit(this.onRequest,new RC(e,o.status,(i=t.userId)!==null&&i!==void 0?i:null)),await fc(o,e),await yv(o)}async _callApiInternal(e,t,r,i){var a,s,o;const{fetchOptions:u,mockServerPort:h}=this._config,m=(a=e.type)!==null&&a!==void 0?a:"helix";this._logger.debug(`Calling ${m} API: ${(s=e.method)!==null&&s!==void 0?s:"GET"} ${e.url}`),this._logger.trace(`Query: ${JSON.stringify(e.query)}`),e.jsonBody&&this._logger.trace(`Request body: ${JSON.stringify(e.jsonBody)}`);const w=N0.operation({retries:3,minTimeout:500,factor:2}),{promise:g,resolve:_,reject:p}=Bo();w.attempt(async()=>{try{const d=m==="helix"?await this._rateLimiter.request({options:e,clientId:t,accessToken:r,authorizationType:i,fetchOptions:u,mockServerPort:h}):await Il(e,t,r,i,u,h);!d.ok&&d.status>=500&&d.status<600&&await fc(d,e),_(d)}catch(d){if(w.retry(d))return;p(w.mainError())}});const l=await g;return this._logger.debug(`Called ${m} API: ${(o=e.method)!==null&&o!==void 0?o:"GET"} ${e.url} - result: ${l.status}`),l}};P([ge()],_e.prototype,"bits",null);P([ge()],_e.prototype,"channels",null);P([ge()],_e.prototype,"channelPoints",null);P([ge()],_e.prototype,"charity",null);P([ge()],_e.prototype,"chat",null);P([ge()],_e.prototype,"clips",null);P([ge()],_e.prototype,"contentClassificationLabels",null);P([ge()],_e.prototype,"entitlements",null);P([ge()],_e.prototype,"eventSub",null);P([ge()],_e.prototype,"extensions",null);P([ge()],_e.prototype,"games",null);P([ge()],_e.prototype,"hypeTrain",null);P([ge()],_e.prototype,"goals",null);P([ge()],_e.prototype,"moderation",null);P([ge()],_e.prototype,"polls",null);P([ge()],_e.prototype,"predictions",null);P([ge()],_e.prototype,"raids",null);P([ge()],_e.prototype,"schedule",null);P([ge()],_e.prototype,"search",null);P([ge()],_e.prototype,"streams",null);P([ge()],_e.prototype,"subscriptions",null);P([ge()],_e.prototype,"teams",null);P([ge()],_e.prototype,"users",null);P([ge()],_e.prototype,"videos",null);P([ge()],_e.prototype,"whispers",null);_e=P([to,L("api","ApiClient")],_e);let Vc=class extends _e{_getUserIdFromRequestContext(){return null}};Vc=P([L("api","ApiClient")],Vc);let ol=class extends _e{constructor(e,t,r,i){super(e,t,r),this._userId=i}_getUserIdFromRequestContext(){return this._userId}};ol=P([L("api","ApiClient")],ol);let zc=class extends _e{constructor(e){if(!e.authProvider)throw new I0("No auth provider given. Please supply the `authProvider` option.");const t={name:"twurple:api:rate-limiter",...e.logger};super(e,Tl({name:"twurple:api:client",...e.logger}),Rl?new C0({getPartitionKey:r=>{var i;return(i=r.userId)!==null&&i!==void 0?i:null},createChild:()=>new P0({logger:t})}):new E0({logger:t,bucketSize:800,timeFrame:64e3,doRequest:async({options:r,clientId:i,accessToken:a,authorizationType:s,fetchOptions:o,mockServerPort:u})=>await Il(r,i,a,s,o,u),getPartitionKey:r=>{var i;return(i=r.userId)!==null&&i!==void 0?i:null}}))}async asUser(e,t){const r=new ol(this._config,this._logger,this._rateLimiter,R(e));return await t(r)}async asIntent(e,t){if(!this._authProvider.getAccessTokenForIntent)throw new Error("Trying to use intents with an auth provider that does not support them");for(const r of e){const i=await this._authProvider.getAccessTokenForIntent(r);if(i){const a=new ol(this._config,this._logger,this._rateLimiter,i.userId);return await t(a)}}throw new Error(`Intents [${e.join(", ")}] not found in auth provider`)}async withoutUser(e){const t=new Vc(this._config,this._logger,this._rateLimiter);return await e(t)}};zc=P([L("api","ApiClient")],zc);const AC={},Yg=n=>{let e;const t=new Set,r=(m,w)=>{const g=typeof m=="function"?m(e):m;if(!Object.is(g,e)){const _=e;e=w??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(p=>p(e,_))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>h,subscribe:m=>(t.add(m),()=>t.delete(m)),destroy:()=>{(AC?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},h=e=n(r,i,u);return u},TC=n=>n?Yg(n):Yg;var rc={exports:{}},nc={},ic={exports:{}},ac={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function IC(){if(Zg)return ac;Zg=1;var n=_l();function e(w,g){return w===g&&(w!==0||1/w===1/g)||w!==w&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function o(w,g){var _=g(),p=r({inst:{value:_,getSnapshot:g}}),l=p[0].inst,d=p[1];return a(function(){l.value=_,l.getSnapshot=g,u(l)&&d({inst:l})},[w,_,g]),i(function(){return u(l)&&d({inst:l}),w(function(){u(l)&&d({inst:l})})},[w]),s(_),_}function u(w){var g=w.getSnapshot;w=w.value;try{var _=g();return!t(w,_)}catch{return!0}}function h(w,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:o;return ac.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,ac}var ef;function PC(){return ef||(ef=1,ic.exports=IC()),ic.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf;function DC(){if(tf)return nc;tf=1;var n=_l(),e=PC();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,o=n.useMemo,u=n.useDebugValue;return nc.useSyncExternalStoreWithSelector=function(h,m,w,g,_){var p=a(null);if(p.current===null){var l={hasValue:!1,value:null};p.current=l}else l=p.current;p=o(function(){function b(H){if(!x){if(x=!0,A=H,H=g(H),_!==void 0&&l.hasValue){var E=l.value;if(_(E,H))return I=E}return I=H}if(E=I,r(A,H))return E;var B=g(H);return _!==void 0&&_(E,B)?(A=H,E):(A=H,I=B)}var x=!1,A,I,y=w===void 0?null:w;return[function(){return b(m())},y===null?void 0:function(){return b(y())}]},[m,w,g,_]);var d=i(h,p[0],p[1]);return s(function(){l.hasValue=!0,l.value=d},[d]),u(d),d},nc}var rf;function BC(){return rf||(rf=1,rc.exports=DC()),rc.exports}var OC=BC();const UC=ir(OC),Hv={},{useDebugValue:qC}=Bx,{useSyncExternalStoreWithSelector:kC}=UC;let nf=!1;const MC=n=>n;function jC(n,e=MC,t){(Hv?"production":void 0)!=="production"&&t&&!nf&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),nf=!0);const r=kC(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return qC(r),r}const af=n=>{(Hv?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?TC(n):n,t=(r,i)=>jC(e,r,i);return Object.assign(t,e),t},LC=n=>n?af(n):af,sc={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,STORYBOOK:"true",VITE_API_BASE_URL:"http://localhost:9155/",VITE_BASE_PATH:"http://localhost:9155/",VITE_PROD:"true"},Kc=new Map,Ho=n=>{const e=Kc.get(n);return e?Object.fromEntries(Object.entries(e.stores).map(([t,r])=>[t,r.getState()])):{}},NC=(n,e,t)=>{if(n===void 0)return{type:"untracked",connection:e.connect(t)};const r=Kc.get(t.name);if(r)return{type:"tracked",store:n,...r};const i={connection:e.connect(t),stores:{}};return Kc.set(t.name,i),{type:"tracked",store:n,...i}},FC=(n,e={})=>(t,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...u}=e;let h;try{h=(a??(sc?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!h)return(sc?"production":void 0)!=="production"&&a&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),n(t,r,i);const{connection:m,...w}=NC(o,h,u);let g=!0;i.setState=(l,d,b)=>{const x=t(l,d);if(!g)return x;const A=b===void 0?{type:s||"anonymous"}:typeof b=="string"?{type:b}:b;return o===void 0?(m==null||m.send(A,r()),x):(m==null||m.send({...A,type:`${o}/${A.type}`},{...Ho(u.name),[o]:i.getState()}),x)};const _=(...l)=>{const d=g;g=!1,t(...l),g=d},p=n(i.setState,r,i);if(w.type==="untracked"?m==null||m.init(p):(w.stores[w.store]=i,m==null||m.init(Object.fromEntries(Object.entries(w.stores).map(([l,d])=>[l,l===w.store?p:d.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let l=!1;const d=i.dispatch;i.dispatch=(...b)=>{(sc?"production":void 0)!=="production"&&b[0].type==="__setState"&&!l&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),l=!0),d(...b)}}return m.subscribe(l=>{var d;switch(l.type){case"ACTION":if(typeof l.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return oc(l.payload,b=>{if(b.type==="__setState"){if(o===void 0){_(b.state);return}Object.keys(b.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const x=b.state[o];if(x==null)return;JSON.stringify(i.getState())!==JSON.stringify(x)&&_(x);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(b)});case"DISPATCH":switch(l.payload.type){case"RESET":return _(p),o===void 0?m==null?void 0:m.init(i.getState()):m==null?void 0:m.init(Ho(u.name));case"COMMIT":if(o===void 0){m==null||m.init(i.getState());return}return m==null?void 0:m.init(Ho(u.name));case"ROLLBACK":return oc(l.state,b=>{if(o===void 0){_(b),m==null||m.init(i.getState());return}_(b[o]),m==null||m.init(Ho(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return oc(l.state,b=>{if(o===void 0){_(b);return}JSON.stringify(i.getState())!==JSON.stringify(b[o])&&_(b[o])});case"IMPORT_STATE":{const{nextLiftedState:b}=l.payload,x=(d=b.computedStates.slice(-1)[0])==null?void 0:d.state;if(!x)return;_(o===void 0?x:x[o]),m==null||m.send(null,b);return}case"PAUSE_RECORDING":return g=!g}return}}),p},$C=FC,oc=(n,e)=>{let t;try{t=JSON.parse(n)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}t!==void 0&&e(t)},GC={badges:[],twitchMessages:[]},sf=LC()($C((n,e)=>({...GC,init:(t,r)=>{const{client:i,fetcher:a,parser:s,newParser:o}=QC(t,r);WC(i).then(u=>n({badges:u})).catch(u=>{console.error(u),n({badges:[]})}),Promise.all([a.fetchTwitchEmotes(),a.fetchTwitchEmotes(785975641),a.fetchBTTVEmotes(),a.fetchSevenTVEmotes(),a.fetchSevenTVEmotes(785975641),a.fetchFFZEmotes()]).then(()=>{console.log("Emotes loaded"),n({fetcher:a,parser:s,twitchApiClient:i,parseToLink:o})}).catch(u=>{console.error("Error loading emotes..."),console.error(u),n({fetcher:a,parser:s,twitchApiClient:i,parseToLink:o})})},setBadges:t=>n({badges:t}),parse:(t,r)=>{const i=e().parser??e().parseToLink;return i?i.parse(t,r):t},sendMsgToPyrokxnezxz:async t=>{await Ox.invoke("TwitchMsg",t)}})));function QC(n,e){const t=new Bi(n,e),r=new zc({authProvider:t}),i=new Ku.EmoteFetcher(void 0,void 0,{apiClient:r}),a=new Ku.EmoteParser(i,{template:'<img class="emote" alt="{name}" src="{link}" />',match:/(\w+)+?/g}),s=new Ku.EmoteParser(i,{template:'<img class="emote" alt="{name}" src="{link}" />',match:new RegExp("(?<!<[^>]*)(\\w+)(?![^<]*>)","g")});return{fetcher:i,parser:a,client:r,newParser:s}}async function WC(n){const e=await n.chat.getChannelBadges(785975641),t=await n.chat.getGlobalBadges();return[...e,...t]}class VC extends Pl{constructor({lineBased:e,logger:t,additionalOptions:r}={}){super(),this._currentLine="",this._connecting=!1,this._connected=!1,this.onReceive=this.registerEvent(),this.onConnect=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onEnd=this.registerEvent(),this._lineBased=e??!1,this._logger=t,this._additionalOptions=r}get isConnecting(){return this._connecting}get isConnected(){return this._connected}sendLine(e){this._connected&&(e=e.replace(/[\0\r\n]/g,""),this.sendRaw(`${e}\r
`))}assumeExternalDisconnect(){var e;(e=this._logger)===null||e===void 0||e.trace("AbstractConnection assumeExternalDisconnect"),this._connected=!1,this._connecting=!1,this.clearSocket(),this.emit(this.onDisconnect,!1)}receiveRaw(e){var t,r;if(!this._lineBased){this.emit(this.onReceive,e);return}const i=e.split(`\r
`);if(this._currentLine+=(t=i.shift())!==null&&t!==void 0?t:"",i.length){this.emit(this.onReceive,this._currentLine),this._currentLine=(r=i.pop())!==null&&r!==void 0?r:"";for(const a of i)this.emit(this.onReceive,a)}}}class zC{constructor(){throw new Error("DirectConnection is not implemented in a browser environment")}}class KC extends Pl{constructor(e,t,r={}){var i;super(),this._type=e,this._target=t,this._config=r,this._retryLimit=1/0,this._initialRetryLimit=3,this._connecting=!1,this._connectionRetryCount=0,this.onReceive=this.registerEvent(),this.onConnect=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onEnd=this.registerEvent(),this._retryLimit=(i=r.retryLimit)!==null&&i!==void 0?i:1/0,this._logger=r.logger}get isConnected(){var e,t;return(t=(e=this._currentConnection)===null||e===void 0?void 0:e.isConnected)!==null&&t!==void 0?t:!1}get isConnecting(){var e,t;return(t=(e=this._currentConnection)===null||e===void 0?void 0:e.isConnecting)!==null&&t!==void 0?t:this._connecting}get hasSocket(){var e,t;return(t=(e=this._currentConnection)===null||e===void 0?void 0:e.hasSocket)!==null&&t!==void 0?t:!1}sendLine(e){var t;(t=this._currentConnection)===null||t===void 0||t.sendLine(e)}connect(){if(this._currentConnection||this._connecting)throw new Error("Connection already present");this._connecting=!0,this._connectionRetryCount=0,this._tryConnect(!0)}disconnect(){var e;if((e=this._logger)===null||e===void 0||e.trace(`PersistentConnection disconnect currentConnectionExists:${(!!this._currentConnection).toString()} connecting:${this._connecting.toString()}`),this._connecting=!1,this._currentConnection){const t=this._currentConnection;this._currentConnection=void 0,t.disconnect()}}assumeExternalDisconnect(){var e,t;(e=this._logger)===null||e===void 0||e.trace("PersistentConnection assumeExternalDisconnect"),(t=this._currentConnection)===null||t===void 0||t.assumeExternalDisconnect()}reconnect(){this._reconnect(!0)}acknowledgeSuccessfulReconnect(){this._previousConnection&&(this._previousConnection.disconnect(),this._previousConnection=void 0)}_startTryingToConnect(e=!1){this._connecting=!0,this._connectionRetryCount=0,this._tryConnect(e)}_tryConnect(e=!1){var t,r;(t=this._logger)===null||t===void 0||t.trace(`PersistentConnection tryConnect currentConnectionExists:${(!!this._currentConnection).toString()} connecting:${this._connecting.toString()}`);const i=e?this._initialRetryLimit:this._retryLimit;(r=this._retryTimerGenerator)!==null&&r!==void 0||(this._retryTimerGenerator=p0(120));const a=this._currentConnection=new this._type(h0(this._target),this._config);a.onReceive(s=>this.emit(this.onReceive,s)),a.onConnect(()=>{this.emit(this.onConnect),this._connecting=!1,this._retryTimerGenerator=void 0}),a.onDisconnect((s,o)=>{var u,h,m;if(this.emit(this.onDisconnect,s,o),s)this.emit(this.onEnd,!0),this._connecting=!1,this._retryTimerGenerator=void 0,a.disconnect(),this._currentConnection===a&&(this._currentConnection=void 0),this._previousConnection===a&&(this._previousConnection=void 0);else if(this._connecting){if((u=this._logger)===null||u===void 0||u.debug(`Connection error caught: ${(h=o==null?void 0:o.message)!==null&&h!==void 0?h:"unknown error"}`),this._connectionRetryCount>=i)return;this._connectionRetryCount++;const w=this._retryTimerGenerator.next().value;w!==0&&((m=this._logger)===null||m===void 0||m.info(`Retrying in ${w} seconds`)),setTimeout(()=>{var g;this._connecting&&((g=this._logger)===null||g===void 0||g.info(e?"Retrying connection":"Trying to reconnect"),this._tryConnect())},w*1e3)}else this._reconnect()}),a.connect()}_reconnect(e=!1){e&&this._config.overlapManualReconnect?(this._previousConnection=this._currentConnection,this._currentConnection=void 0):this.disconnect(),this._startTryingToConnect(e)}}var wi=null;typeof WebSocket<"u"?wi=WebSocket:typeof MozWebSocket<"u"?wi=MozWebSocket:typeof global<"u"?wi=global.WebSocket||global.MozWebSocket:typeof window<"u"?wi=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(wi=self.WebSocket||self.MozWebSocket);class XC extends VC{constructor(e,t){if(super(t),this._socket=null,this._closingOnDemand=!1,e.hostName&&e.port)this._url=`ws${e.secure?"s":""}://${e.hostName}:${e.port}`;else if(e.url)this._url=e.url;else throw new Error("WebSocketConnection requires either hostName & port or url to be set")}get hasSocket(){return!!this._socket}sendRaw(e){var t;(t=this._socket)===null||t===void 0||t.send(e)}connect(){var e,t;(e=this._logger)===null||e===void 0||e.trace("WebSocketConnection connect"),this._connecting=!0,this._socket=new wi(this._url,(t=this._additionalOptions)===null||t===void 0?void 0:t.wsOptions),this._socket.onopen=()=>{var r;(r=this._logger)===null||r===void 0||r.trace("WebSocketConnection onOpen"),this._connected=!0,this._connecting=!1,this._closingOnDemand=!1,this.emit(this.onConnect)},this._socket.onmessage=({data:r})=>{this.receiveRaw(r.toString())},this._socket.onerror=r=>{var i;(i=this._logger)===null||i===void 0||i.trace(`WebSocketConnection onError message:${r.message}`)},this._socket.onclose=r=>{var i;const a=this._connected,s=this._connecting;if((i=this._logger)===null||i===void 0||i.trace(`WebSocketConnection onClose wasConnected:${a.toString()} wasConnecting:${s.toString()} closingOnDemand:${this._closingOnDemand.toString()} wasClean:${r.wasClean.toString()}`),this._connected=!1,this._connecting=!1,this._closingOnDemand)this._closingOnDemand=!1,this.emit(this.onDisconnect,!0),this.emit(this.onEnd,!0);else{const o=new Error(`[${r.code}] ${r.reason}`);this.emit(this.onDisconnect,!1,o),this.emit(this.onEnd,!1,o)}this.clearSocket()}}disconnect(){var e,t;(e=this._logger)===null||e===void 0||e.trace("WebSocketConnection disconnect"),this._closingOnDemand=!0,(t=this._socket)===null||t===void 0||t.close()}clearSocket(){this._socket&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onerror=null,this._socket.onclose=null,this._socket=null)}}function Hs(n){var e,t,r;if(Array.isArray(n)){for(t=Array(e=n.length);e--;)t[e]=(r=n[e])&&typeof r=="object"?Hs(r):r;return t}if(Object.prototype.toString.call(n)==="[object Object]"){t={};for(e in n)e==="__proto__"?Object.defineProperty(t,e,{value:Hs(n[e]),configurable:!0,enumerable:!0,writable:!0}):t[e]=(r=n[e])&&typeof r=="object"?Hs(r):r;return t}return n}const JC={name:"away-notify"};class ll extends Error{constructor(e,t,r){super(`command "${e}" expected ${t} or more parameters, got ${r}`),this._command=e,this._expectedParams=t,this._actualParams=r,Object.setPrototypeOf(this,ll.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ll)}get command(){return this._command}get expectedParams(){return this._expectedParams}get actualParams(){return this._actualParams}}class ul extends Error{constructor(e,t,r,i){var a;super(`required parameter "${t}" did not validate against ${(a=r.type)!==null&&a!==void 0?a:"regex"} validation: "${i}"`),this._command=e,this._paramName=t,this._paramSpec=r,this._givenValue=i,Object.setPrototypeOf(this,ul.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ul)}get command(){return this._command}get paramName(){return this._paramName}get paramSpec(){return this._paramSpec}get givenValue(){return this._givenValue}}const Ai={channelTypes:"#&",supportedUserModes:"iwso",supportedChannelModes:{prefix:"ov",list:"b",alwaysWithParam:"ovk",paramWhenSet:"l",noParam:"imnpst"},prefixes:[{modeChar:"v",prefix:"+"},{modeChar:"o",prefix:"@"}]};var lc={exports:{}},of;function YC(){return of||(of=1,function(n){n.exports=e=>{if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},n.exports.default=n.exports}(lc)),lc.exports}var ZC=YC();const eE=ir(ZC);function Xc(n,e="#&"){return new RegExp(`^[${eE(e)}][^ \b\0
\r,]+$`).test(n)}const lf={0:"\0",n:`
`,r:"\r","":""};function uf(n){if(!n.startsWith("")||(n=n.substring(1),n.endsWith("")&&(n=n.slice(0,-1)),!n))return!1;n=n.replace(/\x10(.)/,(r,i)=>i in lf?lf[i]:"");let[e,t=""]=er(n," ",2);return e=e?e.toUpperCase():"",{command:e,params:t}}const tE={"\\":"\\",";":":","\n":"n","\r":"r"," ":"s"};function rE(n){return n.replace(/[\\;\n\r ]/g,e=>`\\${tE[e]}`)}function nE(n){let e=`${n.nick}`;return n.user&&(e+=`!${n.user}`),n.host&&(e+=`@${n.host}`),e}function iE(n,e,t,r,i=Ai,a=!1){const s=new n(n.COMMAND,void 0,{serverProperties:i}),o={};if(s._paramSpec&&_c(s._paramSpec,(u,h)=>{if(!(a&&u.noServer)&&!(!a&&u.noClient)){if(h in e){const m=e[h];if(m!==void 0){if(n.checkParam(m,u,i))o[h]={value:m,trailing:!!u.trailing};else if(!u.optional)throw new Error(`required parameter "${h}" did not suit requirements: "${m}"`)}}if(!(h in o)&&!u.optional)throw new Error(`required parameter "${h}" not found in command "${n.COMMAND}"`)}}),s._parsedParams=o,s._paramSpec)for(const u of Object.keys(s._paramSpec))Object.defineProperty(s,u,{get(){var h,m;return(m=(h=this._parsedParams)===null||h===void 0?void 0:h[u])===null||m===void 0?void 0:m.value}});return s._initPrefixAndTags(t,r),s}class F{static checkParam(e,t,r=Ai){return!(t.type==="channel"&&!Xc(e,r.channelTypes)||t.type==="channelList"&&!e.split(",").every(a=>Xc(a,r.channelTypes))||t.match&&!t.match.test(e))}constructor(e,{params:t,tags:r,prefix:i,rawLine:a}={},{serverProperties:s=Ai,isServer:o=!1,shouldParseParams:u=!0}={},h){this._params=[],this._serverProperties=Ai,this._paramSpec=h,this._command=e,this._params=t,this._tags=r??new Map,this._prefix=i,this._serverProperties=s,this._raw=a,u&&this.parseParams(o)}getMinParamCount(e=!1){return this._paramSpec?Object.values(this._paramSpec).filter(t=>t.noServer&&e||t.noClient&&!e?!1:!t.optional).length:0}get paramCount(){var e,t;return(t=(e=this._params)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}prefixToString(){return this._prefix?nE(this._prefix):""}tagsToString(){return[...this._tags.entries()].map(([e,t])=>t?`${e}=${rE(t)}`:e).join(";")}toString(e=!1,t=!1){const i=[t?this._buildCommandFromRawParams():this._buildCommandFromNamedParams()];if(e){const s=this.prefixToString();s&&i.unshift(`:${s}`)}const a=this.tagsToString();return a&&i.unshift(`@${a}`),i.join(" ")}_initPrefixAndTags(e,t){this._prefix=e,t&&(this._tags=t)}parseParams(e=!1){if(this._params){let t=this.getMinParamCount(e);if(t>this._params.length)throw new ll(this._command,t,this._params.length);const r=this._paramSpec;if(!r)return;let i=0;const a={};for(const[s,o]of Object.entries(r)){if(o.noServer&&e||o.noClient&&!e)continue;if(this._params.length-i<=t){if(o.optional)continue;if(this._params.length-i!==t)throw new Error("not enough parameters left for required parameters parsing (this is a library bug)")}let u=this._params[i];if(!u){if(o.optional)break;throw new Error("unexpected parameter underflow")}if(o.rest){const h=[];for(;this._params[i]&&!this._params[i].trailing;)h.push(this._params[i].value),++i;if(!h.length){if(o.optional)continue;throw new Error(`no parameters left for required rest parameter "${s}"`)}u={value:h.join(" "),trailing:!1}}if(F.checkParam(u.value,o))a[s]={...u},o.optional||--t,o.rest||++i;else if(!o.optional)throw new ul(this._command,s,o,u.value);if(o.trailing)break}if(this._parsedParams=a,this._paramSpec)for(const s of Object.keys(this._paramSpec))Object.defineProperty(this,s,{get(){var o,u;return(u=(o=this._parsedParams)===null||o===void 0?void 0:o[s])===null||u===void 0?void 0:u.value}})}}get rawParamValues(){var e,t;return(t=(e=this._params)===null||e===void 0?void 0:e.map(r=>r.value))!==null&&t!==void 0?t:[]}get prefix(){return this._prefix}get command(){return this._command}get tags(){return this._tags}get rawLine(){return this._raw}isResponseTo(e){return!1}endsResponseTo(e){return!1}_acceptsInReplyCollection(e){return e.isResponseTo(this)}_buildCommandFromNamedParams(){const e=this._paramSpec?Object.keys(this._paramSpec):[];return[this._command,...e.map(t=>{var r;const i=(r=this._parsedParams)===null||r===void 0?void 0:r[t];if(i)return(i.trailing?":":"")+i.value}).filter(t=>t!==void 0)].join(" ")}_buildCommandFromRawParams(){var e,t;return[this._command,...(t=(e=this._params)===null||e===void 0?void 0:e.map(r=>`${r.trailing?":":""}${r.value}`))!==null&&t!==void 0?t:[]].join(" ")}}F.COMMAND="";F.SUPPORTS_CAPTURE=!1;class Rv extends F{constructor(e,t,r){super(e,t,r,{reference:{},type:{optional:!0},additionalParams:{optional:!0}})}}Rv.COMMAND="BATCH";const aE={name:"batch",messageTypes:[Rv],usesTags:!0},sE={name:"cap-notify"};class Av extends F{constructor(e,t,r){super(e,t,r,{newUser:{},newHost:{}})}}Av.COMMAND="CHGHOST";const oE={name:"chghost",messageTypes:[Av]},lE={name:"invite-notify"};class Tv extends F{}Tv.COMMAND="ACK";const uE={name:"labeled-response",messageTypes:[Tv],usesTags:!0},cE={name:"message-tags",usesTags:!0},dE={name:"multi-prefix"},hE=Object.freeze(Object.defineProperty({__proto__:null,AwayNotify:JC,Batch:aE,CapNotify:sE,ChgHost:oE,InviteNotify:lE,LabeledResponse:uE,MessageTags:cE,MultiPrefix:dE},Symbol.toStringTag,{value:"Module"}));class pE{constructor(e,t,...r){this._client=e,this._originalMessage=t,this._messages=[],this._endEventHandlers=new Map,this._types=new Set(r)}untilEvent(e){this._cleanEndEventHandler(e);const t=this._client.on(e,()=>this.end());this._endEventHandlers.set(e,t)}async promise(){return this._promise||(this._promise=new Promise(e=>{this._promiseResolve=e})),await this._promise}collect(e){return this._originalMessage._acceptsInReplyCollection(e)?(this._messages.push(e),e.endsResponseTo(this._originalMessage)&&this.end(),!0):!1}end(){this._client.stopCollect(this),this._cleanEndEventHandlers(),this._promiseResolve&&this._promiseResolve(this._messages)}_cleanEndEventHandlers(){this._endEventHandlers.forEach(e=>{this._client.removeListener(e)}),this._endEventHandlers.clear()}_cleanEndEventHandler(e){this._endEventHandlers.has(e)&&(this._client.removeListener(this._endEventHandlers.get(e)),this._endEventHandlers.delete(e))}}class Rd extends F{constructor(e,t,r){super(e,t,r,{password:{}})}}Rd.COMMAND="PASS";class Rs extends F{constructor(e,t,r){super(e,t,r,{nick:{}})}}Rs.COMMAND="NICK";class Ad extends F{constructor(e,t,r){super(e,t,r,{user:{},mode:{},unused:{},realName:{trailing:!0}})}}Ad.COMMAND="USER";class Iv extends F{constructor(e,t,r){super(e,t,r,{name:{},password:{}})}}Iv.COMMAND="OPER";class Td extends F{constructor(e,t,r){super(e,t,r,{text:{trailing:!0,optional:!0}})}}Td.COMMAND="QUIT";class Pv extends F{constructor(e,t,r){super(e,t,r,{server:{},reason:{trailing:!0}})}}Pv.COMMAND="SQUIT";class cl extends F{constructor(e,t,r){super(e,t,r,{channel:{type:"channel"},key:{optional:!0}})}}cl.COMMAND="JOIN";class dl extends F{constructor(e,t,r){super(e,t,r,{channel:{type:"channel"},reason:{trailing:!0,optional:!0}})}}dl.COMMAND="PART";class hl extends Error{constructor(e){super(`Unknown channel mode character ${e}`),this._char=e,Object.setPrototypeOf(this,hl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hl)}get char(){return this._char}}class Dv extends F{constructor(e,t,r){super(e,t,r,{target:{},modes:{rest:!0,optional:!0}})}get isChannel(){return Xc(this.target,this._serverProperties.channelTypes)}separate(){const e=[],t=this.modes;if(!t)throw new Error("can't separate a channel mode request, just set actions");const r=t.split(" "),i=r.shift();let a="add";for(const s of i){let o=a;switch(s){case"+":{a="add";break}case"-":{a="remove";break}default:{let u=!1,h=!0;if(this.isChannel){if(this._serverProperties.supportedChannelModes.alwaysWithParam.includes(s)||this._serverProperties.supportedChannelModes.prefix.includes(s))u=!0;else if(this._serverProperties.supportedChannelModes.paramWhenSet.includes(s))a==="add"&&(u=!0);else if(this._serverProperties.supportedChannelModes.list.includes(s))r.length?u=!0:o="getList";else if(!this._serverProperties.supportedChannelModes.noParam.includes(s))throw new hl(s)}else h=this._serverProperties.supportedUserModes.includes(s);if(u&&!r.length)continue;e.push({prefix:this._prefix,action:o,letter:s,param:u?r.shift():void 0,known:h})}}}return e}}Dv.COMMAND="MODE";class Bv extends F{constructor(e,t,r){super(e,t,r,{channel:{type:"channel"},newTopic:{optional:!0,trailing:!0}})}}Bv.COMMAND="TOPIC";class ro extends F{constructor(e,t,r){super(e,t,r,{channel:{type:"channelList",optional:!0}})}}ro.COMMAND="NAMES";ro.SUPPORTS_CAPTURE=!0;class Ov extends F{constructor(e,t,r){super(e,t,r,{channel:{optional:!0},server:{optional:!0}})}}Ov.COMMAND="LIST";class Uv extends F{constructor(e,t,r){super(e,t,r,{target:{},channel:{type:"channel"}})}}Uv.COMMAND="INVITE";class qv extends F{constructor(e,t,r){super(e,t,r,{channel:{type:"channel"},target:{},reason:{trailing:!0,optional:!0}})}}qv.COMMAND="KICK";class kv extends F{constructor(e,t,r){super(e,t,r,{server:{optional:!0}})}}kv.COMMAND="TIME";class Ys extends F{constructor(e,t,r){super(e,t,r,{target:{},text:{trailing:!0}})}}Ys.COMMAND="PRIVMSG";class Id extends F{constructor(e,t,r){super(e,t,r,{target:{},text:{trailing:!0}})}}Id.COMMAND="NOTICE";class Bl extends F{constructor(e,t,r){super(e,t,r,{mask:{},flags:{optional:!0},extendedMask:{optional:!0,trailing:!0}})}}Bl.COMMAND="WHO";class Mv extends F{constructor(e,t,r){super(e,t,r,{server:{optional:!0},nickMask:{}})}}Mv.COMMAND="WHOIS";class jv extends F{constructor(e,t,r){super(e,t,r,{nick:{},count:{optional:!0},server:{optional:!0}})}}jv.COMMAND="WHOWAS";class Lv extends F{constructor(e,t,r){super(e,t,r,{target:{},reason:{trailing:!0,optional:!0}})}}Lv.COMMAND="KILL";class pl extends F{constructor(e,t,r){super(e,t,r,{text:{trailing:!0}})}}pl.COMMAND="PING";class ml extends F{constructor(e,t,r){super(e,t,r,{server:{noClient:!0},text:{trailing:!0}})}}ml.COMMAND="PONG";class Nv extends F{constructor(e,t,r){super(e,t,r,{text:{trailing:!0}})}}Nv.COMMAND="ERROR";class Fv extends F{constructor(e,t,r){super(e,t,r,{text:{trailing:!0,optional:!0}})}}Fv.COMMAND="AWAY";class $v extends F{}$v.COMMAND="REHASH";class Gv extends F{}Gv.COMMAND="RESTART";class Qv extends F{constructor(e,t,r){super(e,t,r,{text:{trailing:!0}})}}Qv.COMMAND="WALLOPS";class Wv extends F{constructor(e,t,r){super(e,t,r,{nicks:{rest:!0}})}}Wv.COMMAND="USERHOST";class Vv extends F{constructor(e,t,r){super(e,t,r,{nicks:{rest:!0}})}}Vv.COMMAND="ISON";class Ye extends F{constructor(e,t,r){super(e,t,r,{target:{match:/^(?:[a-z_\-\[\]\\^{}|`][a-z0-9_\-\[\]\\^{}|`]+|\*)$/i,optional:!0,noClient:!0},subCommand:{match:/^(?:LS|LIST|REQ|ACK|NAK|END|NEW|DEL)$/i},version:{match:/^\d+$/,optional:!0},continued:{match:/^\*$/,optional:!0},capabilities:{trailing:!0,optional:!0}})}isResponseTo(e){if(!(e instanceof Ye))return!1;switch(this.subCommand){case"ACK":case"NAK":return e.subCommand==="REQ"&&e.capabilities===this.capabilities.trim();case"LS":case"LIST":return e.subCommand===this.subCommand;default:return!1}}endsResponseTo(e){if(!(e instanceof Ye))return!1;switch(this.subCommand){case"LS":case"LIST":return!this.continued;default:return!0}}}Ye.COMMAND="CAP";Ye.SUPPORTS_CAPTURE=!0;class zv extends F{constructor(e,t,r){super(e,t,r,{target:{}})}}zv.COMMAND="TAGMSG";const Kv=Object.freeze(Object.defineProperty({__proto__:null,Away:Fv,CapabilityNegotiation:Ye,ChannelInvite:Uv,ChannelJoin:cl,ChannelKick:qv,ChannelList:Ov,ChannelPart:dl,ClientQuit:Td,ErrorMessage:Nv,IsOnQuery:Vv,Kill:Lv,Mode:Dv,Names:ro,NickChange:Rs,Notice:Id,OperLogin:Iv,Password:Rd,Ping:pl,Pong:ml,PrivateMessage:Ys,Rehash:$v,Restart:Gv,ServerQuit:Pv,TagMessage:zv,Time:kv,Topic:Bv,UserHostQuery:Wv,UserRegistration:Ad,Wallops:Qv,WhoIsQuery:Mv,WhoQuery:Bl,WhoWasQuery:jv},Symbol.toStringTag,{value:"Module"}));class Pd extends F{constructor(e,t,r){super(e,t,r,{me:{},welcomeText:{trailing:!0}})}}Pd.COMMAND="001";class Xv extends F{constructor(e,t,r){super(e,t,r,{me:{},yourHost:{trailing:!0}})}}Xv.COMMAND="002";class Jv extends F{constructor(e,t,r){super(e,t,r,{me:{},createdText:{trailing:!0}})}}Jv.COMMAND="003";class Dd extends F{constructor(e,t,r){super(e,t,r,{me:{},serverName:{},version:{},userModes:{},channelModes:{},channelModesWithParam:{optional:!0}})}}Dd.COMMAND="004";class Bd extends F{constructor(e,t,r){super(e,t,r,{me:{},supports:{rest:!0},suffix:{trailing:!0}})}}Bd.COMMAND="005";class Yv extends F{constructor(e,t,r){super(e,t,r,{me:{},modes:{}})}}Yv.COMMAND="221";class Zv extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},text:{trailing:!0}})}}Zv.COMMAND="301";class ew extends F{constructor(e,t,r){super(e,t,r,{me:{},hosts:{trailing:!0}})}}ew.COMMAND="302";class tw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}tw.COMMAND="305";class rw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}rw.COMMAND="306";class nw extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},username:{},host:{},_unused:{},realname:{trailing:!0}})}}nw.COMMAND="311";class iw extends F{constructor(e,t,r){super(e,t,r,{me:{},query:{},suffix:{trailing:!0}})}isResponseTo(e){return e instanceof Bl}endsResponseTo(){return!0}}iw.COMMAND="315";class aw extends F{constructor(e,t,r){super(e,t,r,{me:{},nickMask:{},suffix:{trailing:!0}})}}aw.COMMAND="318";class sw extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},channels:{trailing:!0}})}}sw.COMMAND="319";class ow extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},memberCount:{},topic:{trailing:!0}})}}ow.COMMAND="322";class lw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}lw.COMMAND="323";class uw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},modes:{rest:!0}})}}uw.COMMAND="324";class cw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}cw.COMMAND="331";class dw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},topic:{trailing:!0}})}}dw.COMMAND="332";class hw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},who:{},ts:{}})}}hw.COMMAND="333";class pw extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},channel:{type:"channel"}})}}pw.COMMAND="341";class mw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},mask:{},creatorName:{optional:!0},timestamp:{optional:!0}})}}mw.COMMAND="348";class _w extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}_w.COMMAND="349";class gw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{},user:{},host:{},server:{},nick:{},flags:{},hopsAndRealName:{trailing:!0}})}get isAway(){return this.flags.includes("G")}get isOper(){return this.flags.includes("*")}get isBot(){return this.flags.includes("B")}isResponseTo(e){return e instanceof Bl}}gw.COMMAND="352";class fw extends F{constructor(e,t,r){super(e,t,r,{me:{},channelType:{},channel:{type:"channel"},names:{trailing:!0}})}isResponseTo(e){return e instanceof ro}}fw.COMMAND="353";class yw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{},suffix:{trailing:!0}})}isResponseTo(e){return e instanceof ro}endsResponseTo(){return!0}}yw.COMMAND="366";class bw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},mask:{},creatorName:{optional:!0},timestamp:{optional:!0}})}}bw.COMMAND="367";class vw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}vw.COMMAND="368";class ww extends F{constructor(e,t,r){super(e,t,r,{me:{},line:{trailing:!0}})}}ww.COMMAND="372";class xw extends F{constructor(e,t,r){super(e,t,r,{me:{},line:{trailing:!0}})}}xw.COMMAND="375";class Od extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Od.COMMAND="376";class Sw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Sw.COMMAND="381";class Cw extends F{constructor(e,t,r){super(e,t,r,{me:{},server:{optional:!0},timestamp:{trailing:!0}})}}Cw.COMMAND="391";class Ew extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},suffix:{trailing:!0}})}}Ew.COMMAND="401";class Hw extends F{constructor(e,t,r){super(e,t,r,{me:{},server:{},suffix:{trailing:!0}})}}Hw.COMMAND="402";class Rw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{},suffix:{trailing:!0}})}}Rw.COMMAND="403";class Aw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Aw.COMMAND="404";class Tw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Tw.COMMAND="405";class Iw extends F{constructor(e,t,r){super(e,t,r,{me:{},subCommand:{},suffix:{trailing:!0}})}}Iw.COMMAND="410";class Pw extends F{constructor(e,t,r){super(e,t,r,{me:{},originalCommand:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command===this.originalCommand}endsResponseTo(){return!0}}Pw.COMMAND="421";class Ud extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Ud.COMMAND="422";class Dw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}Dw.COMMAND="431";class Bw extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}Bw.COMMAND="432";class Ow extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}Ow.COMMAND="433";class Uw extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}Uw.COMMAND="436";class qw extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},channel:{type:"channel"},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}qw.COMMAND="441";class kw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}kw.COMMAND="442";class Mw extends F{constructor(e,t,r){super(e,t,r,{me:{},nick:{},channel:{type:"channel"},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}Mw.COMMAND="443";class jw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}jw.COMMAND="451";class Lw extends F{constructor(e,t,r){super(e,t,r,{me:{},originalCommand:{},suffix:{trailing:!0}})}}Lw.COMMAND="461";class qd extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}qd.COMMAND="462";class Nw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Nw.COMMAND="471";class Fw extends F{constructor(e,t,r){super(e,t,r,{me:{},char:{},suffix:{trailing:!0}})}}Fw.COMMAND="472";class $w extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}$w.COMMAND="473";class Gw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Gw.COMMAND="474";class Qw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Qw.COMMAND="475";class Ww extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{},suffix:{trailing:!0}})}}Ww.COMMAND="479";class Vw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Vw.COMMAND="481";class zw extends F{constructor(e,t,r){super(e,t,r,{me:{},channel:{},suffix:{trailing:!0}})}}zw.COMMAND="482";class Kw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Kw.COMMAND="491";class Xw extends F{constructor(e,t,r){super(e,t,r,{me:{},modeChar:{optional:!0,match:/^\w$/},suffix:{trailing:!0}})}}Xw.COMMAND="501";class Jw extends F{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Jw.COMMAND="502";const Yw=Object.freeze(Object.defineProperty({__proto__:null,Error401NoSuchNick:Ew,Error402NoSuchServer:Hw,Error403NoSuchChannel:Rw,Error404CanNotSendToChan:Aw,Error405TooManyChannels:Tw,Error410InvalidCapCmd:Iw,Error421UnknownCommand:Pw,Error422NoMotd:Ud,Error431NoNickNameGiven:Dw,Error432ErroneusNickname:Bw,Error433NickNameInUse:Ow,Error436NickCollision:Uw,Error441UserNotInChannel:qw,Error442NotOnChannel:kw,Error443UserOnChannel:Mw,Error451NotRegistered:jw,Error461NeedMoreParams:Lw,Error462AlreadyRegistered:qd,Error471ChannelIsFull:Nw,Error472UnknownMode:Fw,Error473InviteOnlyChan:$w,Error474BannedFromChan:Gw,Error475BadChannelKey:Qw,Error479BadChanName:Ww,Error481NoPrivileges:Vw,Error482ChanOpPrivsNeeded:zw,Error491NoOperHost:Kw,Error501UmodeUnknownFlag:Xw,Error502UsersDontMatch:Jw,Reply001Welcome:Pd,Reply002YourHost:Xv,Reply003Created:Jv,Reply004ServerInfo:Dd,Reply005Isupport:Bd,Reply221UmodeIs:Yv,Reply301Away:Zv,Reply302UserHost:ew,Reply305UnAway:tw,Reply306NowAway:rw,Reply311WhoisUser:nw,Reply315EndOfWho:iw,Reply318EndOfWhois:aw,Reply319WhoisChannels:sw,Reply322List:ow,Reply323ListEnd:lw,Reply324ChannelModeIs:uw,Reply331NoTopic:cw,Reply332Topic:dw,Reply333TopicWhoTime:hw,Reply341Inviting:pw,Reply348ExceptList:mw,Reply349EndOfExceptList:_w,Reply352WhoReply:gw,Reply353NamesReply:fw,Reply366EndOfNames:yw,Reply367BanList:bw,Reply368EndOfBanList:vw,Reply372Motd:ww,Reply375MotdStart:xw,Reply376EndOfMotd:Od,Reply381YoureOper:Sw,Reply391Time:Cw},Symbol.toStringTag,{value:"Module"})),mE=new Map([...Object.values(Kv),...Object.values(Yw)].map(n=>[n.COMMAND,n]));function _E(n){const[e,t]=er(n,"!",2);if(t){const[r,i]=er(t,"@",2);return i?{nick:e,user:r,host:i}:{nick:e,host:r}}return{nick:e}}const cf={":":";",n:`
`,r:"\r",s:" "};function gE(n){const e=new Map,t=n.split(";");for(const r of t){const[i,a]=er(r,"=",2);i!==""&&e.set(i,a?a.replace(/\\(.?)/g,(s,o)=>Object.prototype.hasOwnProperty.call(cf,o)?cf[o]:o):"")}return e}function fE(n,e=Ai,t=mE,r=!1,i=[],a=!0){const s=n.split(" ");let o,u;const h=[];let m,w;for(;s.length;){if([o]=s,o.startsWith("@")&&!m&&!u&&!w)m=gE(o.slice(1));else if(o.startsWith(":"))if(!w&&!u)o.length>1&&(w=_E(o.slice(1)));else{h.push({value:s.join(" ").slice(1),trailing:!0});break}else u?h.push({value:o,trailing:!1}):u=o.toUpperCase();s.shift()}if(m||(m=new Map),!u)throw new Error(`line without command received: ${n}`);a&&(a=!i.includes(u));let g=F;return t.has(u)&&(g=t.get(u)),new g(u,{params:h,tags:m,prefix:w,rawLine:n},{serverProperties:e,isServer:r,shouldParseParams:a})}class yE extends Pl{constructor(e){super(),this._registered=!1,this._supportsCapabilities=!0,this._events=new Map,this._registeredMessageTypes=new Map,this.onConnect=this.registerEvent(),this.onRegister=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onPrivmsg=this.registerEvent(),this.onAction=this.registerEvent(),this.onNotice=this.registerEvent(),this.onNickChange=this.registerEvent(),this.onCtcp=this.registerEvent(),this.onCtcpReply=this.registerEvent(),this.onPasswordError=this.registerEvent(),this.onAnyMessage=this.registerEvent(),this._serverProperties=Hs(Ai),this._supportedFeatures={},this._collectors=[],this._clientCapabilities=new Map,this._serverCapabilities=new Map,this._negotiatedCapabilities=new Map,this._currentChannels=new Set,this._hasRegisteredBefore=!1,this._channelsFromLastRegister=new Set,this._initialConnectionSetupDone=!1;const{connection:t,credentials:r,channels:i,channelTypes:a,webSocket:s,logger:o={}}=e;this._options=e;const{pingOnInactivity:u=60,pingTimeout:h=10}=t;this._pingOnInactivity=u,this._pingTimeout=h,this._currentNick=r.nick,this._logger=Tl({name:"ircv3",emoji:!0,...o}),this.registerCoreMessageTypes();const{hostName:m,secure:w,reconnect:g=!0}=t,_={hostName:m,port:this.port,secure:w},p={lineBased:!0,logger:this._logger,additionalOptions:e.connectionOptions},l=s?XC:zC;g?this._connection=new KC(l,_,p):this._connection=new l(p,this._logger,e.connectionOptions);for(const d of Object.values(hE))this.addCapability(d);this.addInternalListener(this.onRegister,async()=>{const d=this._hasRegisteredBefore,b=this._channelsFromLastRegister;this._hasRegisteredBefore=!0,this._channelsFromLastRegister=new Set;const x=d&&this._options.rejoinChannelsOnReconnect?b:await Ig(i);if(x)for(const A of x)this.join(A)}),this.onTypedMessage(Ye,async({subCommand:d,capabilities:b})=>{const x=b.split(" ");switch(d.toUpperCase()){case"NEW":{this._logger.debug(`Server registered new capabilities: ${x.join(", ")}`);const A=ws(x,y=>{if(!y)return{};const[H,E]=er(y,"=",2);return{[H]:{name:H,param:E||!0}}});for(const[y,H]of Object.entries(A))this._serverCapabilities.set(y,H);const I=Object.keys(A);await this._negotiateCapabilities(Array.from(this._clientCapabilities.entries()).filter(([y])=>I.includes(y)).map(([,y])=>y));break}case"DEL":{this._logger.debug(`Server removed capabilities: ${x.join(", ")}`);for(const A of x)this._serverCapabilities.delete(A),this._negotiatedCapabilities.delete(A)}}}),this.onTypedMessage(pl,({text:d})=>{this.sendMessage(ml,{text:d})}),this.onTypedMessage(Pd,({me:d})=>this._handleReceivedClientNick(d)),this.onTypedMessage(Dd,({userModes:d})=>{d&&(this._serverProperties.supportedUserModes=d)}),this.onTypedMessage(Bd,({supports:d})=>{const b=ws(d.split(" "),x=>{const[A,I]=er(x,"=",2);return{[A]:I||!0}});this._supportedFeatures={...this._supportedFeatures,...b}}),this.onTypedMessage(Od,({me:d})=>{this._registered||(this._handleReceivedClientNick(d),this._registered=!0,this.emit(this.onRegister))}),this.onTypedMessage(Ud,({me:d})=>{this._registered||(this._handleReceivedClientNick(d),this._registered=!0,this.emit(this.onRegister))}),this.onTypedMessage(qd,({me:d})=>{this._registered||(this._logger.warn("We thought we're not registered yet, but we actually are"),this._handleReceivedClientNick(d),this._registered=!0,this.emit(this.onRegister))}),this.onTypedMessage(Ys,d=>{var b;const{target:x,text:A}=d,I=uf(A),y=(b=d.prefix)===null||b===void 0?void 0:b.nick;I?I.command==="ACTION"?this.emit(this.onAction,x,y,I.params,d):this.emit(this.onCtcp,x,y,I.command,I.params,d):this.emit(this.onPrivmsg,x,y,A,d)}),this.onTypedMessage(Rs,d=>{var b;const{nick:x}=d,A=(b=d.prefix)===null||b===void 0?void 0:b.nick;A===this._currentNick&&(this._currentNick=x),this.emit(this.onNickChange,A,x,d)}),this.onTypedMessage(Id,d=>{var b;const{target:x,text:A}=d,I=uf(A),y=(b=d.prefix)===null||b===void 0?void 0:b.nick;I&&this.emit(this.onCtcpReply,x,y,I.command,I.params,d),this.emit(this.onNotice,x,y,A,d)}),this._options.manuallyAcknowledgeJoins||this.onTypedMessage(cl,({channel:d,prefix:b})=>{(b==null?void 0:b.nick)===this._currentNick&&this.acknowledgeJoin(d)}),this.onTypedMessage(dl,d=>{var b;((b=d.prefix)===null||b===void 0?void 0:b.nick)===this._currentNick&&(this._currentChannels.delete(d.channel),this._channelsFromLastRegister.delete(d.channel))}),this.addInternalListener(this.onRegister,()=>this._startPingCheckTimer()),this._desiredNick=r.nick,this._userName=r.userName,this._realName=r.realName,a&&(this._serverProperties.channelTypes=a)}receiveLine(e){var t;this._logger.debug(`Received message: ${e}`);let r;try{r=fE(e,this._serverProperties,this._registeredMessageTypes,!0,this._options.nonConformingCommands)}catch(i){this._logger.error(`Error parsing message: ${i.message}`),this._logger.trace((t=i.stack)!==null&&t!==void 0?t:"No stack available");return}this._logger.trace(`Parsed message: ${JSON.stringify(r)}`),this._startPingCheckTimer(),this.emit(this.onAnyMessage,r),this._handleEvents(r)}get serverProperties(){return Hs(this._serverProperties)}get port(){const{webSocket:e,connection:{port:t,secure:r}}=this._options;return t||(e?r?443:80:r?6697:6667)}pingCheck(){const e=Date.now(),t=e.toString(),r=this.onTypedMessage(ml,i=>{const{text:a}=i;a===t&&(this._logger.debug(`Current ping: ${Date.now()-e}ms`),this._pingTimeoutTimer&&clearTimeout(this._pingTimeoutTimer),this.removeMessageListener(r))});this._pingTimeoutTimer=setTimeout(()=>{this.removeMessageListener(r),this._options.connection.reconnect===!1?this._logger.error(`Disconnecting because the last ping took over ${this._pingTimeout} seconds`):this._logger.warn(`Reconnecting because the last ping took over ${this._pingTimeout} seconds`),this._connection.assumeExternalDisconnect()},this._pingTimeout*1e3),this.sendMessage(pl,{text:t})}reconnect(e){this.quit(e),this.connect()}registerMessageType(e){e.COMMAND!==""&&(this._logger.trace(`Registering message type ${e.COMMAND}`),this._registeredMessageTypes.set(e.COMMAND.toUpperCase(),e))}knowsCommand(e){return this._registeredMessageTypes.has(e.toUpperCase())}getCommandClass(e){return this._registeredMessageTypes.get(e.toUpperCase())}acknowledgeJoin(e){this._currentChannels.add(e),this._channelsFromLastRegister.add(e)}connect(){this._supportsCapabilities=!1,this._negotiatedCapabilities=new Map,this._currentChannels=new Set,this._currentNick=this._desiredNick,this._setupConnection(),this._logger.info(`Connecting to ${this._options.connection.hostName}:${this.port}`),this._connection.connect()}addCapability(e){if(this._clientCapabilities.set(e.name,e),e.messageTypes)for(const t of Object.values(e.messageTypes))this.registerMessageType(t)}async registerCapability(e){return this.addCapability(e),this._serverCapabilities.has(e.name)?await this._negotiateCapabilities([e]):[]}send(e){this.sendRaw(e.toString())}sendRaw(e){this._connection.isConnected&&(this._logger.debug(`Sending message: ${e}`),this._connection.sendLine(e))}onNamedMessage(e,t,r){this._events.has(e)||this._events.set(e,new Map);const i=this._events.get(e);if(!r)do r=`${e}:${m0(Math.random()*1e4,4,"0")}`;while(i.has(r));return i.set(r,t),r}onTypedMessage(e,t,r){return this.onNamedMessage(e.COMMAND,t,r)}removeMessageListener(e){const[t]=e.split(":");this._events.has(t)&&this._events.get(t).delete(e)}createMessage(e,t,r){const i=r?new Map(Object.entries(r)):void 0;return iE(e,t,void 0,i,this.serverProperties)}sendMessage(e,t,r){this.send(this.createMessage(e,t,r))}async sendMessageAndCaptureReply(e,t){if(!e.SUPPORTS_CAPTURE)throw new Error(`The command "${e.COMMAND}" does not support reply capture`);const r=this.createMessage(e,t),i=this.collect(r).promise();return this.send(r),await i}get isConnected(){return this._connection.isConnected}get isConnecting(){return this._connection.isConnecting}get isRegistered(){return this._registered}get currentNick(){return this._currentNick}get currentChannels(){return Array.from(this._currentChannels)}collect(e,...t){const r=new pE(this,e,...t);return this._collectors.push(r),r}stopCollect(e){this._collectors.splice(this._collectors.findIndex(t=>t===e),1)}join(e,t){this.sendMessage(cl,{channel:e,key:t})}part(e){this.sendMessage(dl,{channel:e})}quit(e){this.sendMessage(Td,{text:e}),this.quitAbruptly()}quitAbruptly(){this._registered=!1,this._connection.disconnect()}say(e,t,r={}){this.sendMessage(Ys,{target:e,text:t},r)}sendCtcp(e,t,r){this.say(e,`${t.toUpperCase()} ${r}`)}action(e,t){this.sendCtcp(e,"ACTION",t)}changeNick(e){this._currentNick!==e&&(this._desiredNick=e,this.isRegistered&&this.sendMessage(Rs,{nick:e}))}registerCoreMessageTypes(){_c(Kv,e=>{this.registerMessageType(e)}),_c(Yw,e=>{this.registerMessageType(e)})}async _negotiateCapabilityBatch(e){return await Promise.all(e.filter(t=>t.length).map(async t=>await this._negotiateCapabilities(t)))}async _negotiateCapabilities(e){const t=ws(e,s=>({[s.name]:s})),i=(await this.sendMessageAndCaptureReply(Ye,{subCommand:"REQ",capabilities:e.map(s=>s.name).join(" ")})).shift();if(!i)throw new Error("capability negotiation failed unexpectedly without any reply");if(!(i instanceof Ye))throw new Error(`capability negotiation failed unexpectedly with "${i.command}" command`);const a=i.capabilities.split(" ").filter(s=>s);if(i.subCommand==="ACK"){this._logger.debug(`Successfully negotiated capabilities: ${a.join(", ")}`);const s=a.map(o=>t[o]);for(const o of s){const u=this._clientCapabilities.get(o.name);u.param=o.param,this._negotiatedCapabilities.set(u.name,u)}return s}return this._logger.warn(`Failed to negotiate capabilities: ${a.join(", ")}`),new Error("capabilities failed to negotiate")}_setupConnection(){this._initialConnectionSetupDone||(this._connection.onConnect(async()=>{var e,t;this._logger.info(`Connection to server ${this._options.connection.hostName}:${this.port} established`),this.emit(this.onConnect),this._logger.debug("Determining connection password");try{const[r]=await Promise.all([Ig(this._options.credentials.password),this.sendMessageAndCaptureReply(Ye,{subCommand:"LS",version:"302"}).then(async i=>{if(!i.length||!(i[0]instanceof Ye))return this._logger.debug("Server does not support capabilities"),[];this._supportsCapabilities=!0;const a=i.map(o=>ws(o.capabilities.split(" "),u=>{if(!u)return{};const[h,m]=er(u,"=",2);return{[h]:{name:h,param:m||!0}}}));this._serverCapabilities=new Map(Object.entries(Object.assign({},...a))),this._logger.debug(`Capabilities supported by server: ${Array.from(this._serverCapabilities.keys()).join(", ")}`);const s=a.map(o=>{const u=Object.keys(o);return Array.from(this._clientCapabilities.entries()).filter(([h])=>u.includes(h)).map(([,h])=>h)});return await this._negotiateCapabilityBatch(s)}).then(()=>{this.sendMessage(Ye,{subCommand:"END"})})]);r&&this.sendMessage(Rd,{password:r}),this.sendMessage(Rs,{nick:this._desiredNick}),this.sendMessage(Ad,{user:(e=this._userName)!==null&&e!==void 0?e:this._desiredNick,mode:"8",unused:"*",realName:(t=this._realName)!==null&&t!==void 0?t:this._desiredNick})}catch(r){this.emit(this.onPasswordError,r),this.quit()}}),this._initialConnectionSetupDone=!0,this._connection.onReceive(e=>{this.receiveLine(e)}),this._connection.onDisconnect((e,t)=>{var r;if(this._registered=!1,this._pingCheckTimer&&clearTimeout(this._pingCheckTimer),this._pingTimeoutTimer&&clearTimeout(this._pingTimeoutTimer),e)this._logger.info("Disconnected");else{const i=(r=this._options.connection.reconnect)!==null&&r!==void 0?r:!0,a=t?`Disconnected unexpectedly: ${t.message}`:"Disconnected unexpectedly";i?this._logger.warn(`${a}; trying to reconnect`):this._logger.error(a)}this.emit(this.onDisconnect,e,t)}),this._connection.onEnd(e=>{e||this._logger.warn("No further retries will be made")}))}_handleReceivedClientNick(e){this._currentNick!==e&&(this._currentNick!==""&&this._logger.warn(`Mismatching nicks: passed ${this._currentNick}, but you're actually ${e}`),this._currentNick=e)}_handleEvents(e){this._collectors.some(r=>r.collect(e));const t=this._events.get(e.constructor.COMMAND);if(t)for(const r of t.values())r(e)}_startPingCheckTimer(){this._pingCheckTimer&&clearTimeout(this._pingCheckTimer),this._connection.isConnected?this._pingCheckTimer=setTimeout(()=>this.pingCheck(),this._pingOnInactivity*1e3):this._pingCheckTimer=void 0}}P([V(!1)],yE.prototype,"_options",void 0);var Io;let qi=Io=class{constructor(e,t){this._userName=e.toLowerCase(),this._userData=t?new Map(t):new Map}static _parseBadgesLike(e){return e?new Map(e.split(",").map(t=>{const r=t.indexOf("/");return r===-1?[t,""]:[t.slice(0,r),t.slice(r+1)]})):new Map}get userName(){return this._userName}get displayName(){var e;return(e=this._userData.get("display-name"))!==null&&e!==void 0?e:this._userName}get color(){return this._userData.get("color")}get badges(){const e=this._userData.get("badges");return Io._parseBadgesLike(e)}get badgeInfo(){const e=this._userData.get("badge-info");return Io._parseBadgesLike(e)}get userId(){return this._userData.get("user-id")}get userType(){return this._userData.get("user-type")}get isBroadcaster(){return this.badges.has("broadcaster")}get isSubscriber(){return this.badges.has("subscriber")||this.isFounder}get isFounder(){return this.badges.has("founder")}get isMod(){return this.badges.has("moderator")}get isVip(){const e=this._userData.get("vip");return e!=null&&e!=="0"}get isArtist(){return this.badges.has("artist-badge")}};P([V(!1)],qi.prototype,"_userData",void 0);P([ge()],qi.prototype,"badges",null);P([ge()],qi.prototype,"badgeInfo",null);qi=Io=P([to,L("chat","ChatUser","userId")],qi);function bE(n){return n?new Map(n.split("/").map(e=>{const[t,r]=e.split(":",2);return r?[t,r.split(",")]:null}).filter(e=>e!==null)):new Map}const vE=["ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","TEN"];let Jc=class extends Ys{get id(){return this._tags.get("id")}get date(){const e=this._tags.get("tmi-sent-ts");return new Date(Number(e))}get userInfo(){return new qi(this._prefix.nick,this._tags)}get channelId(){var e;return(e=this._tags.get("room-id"))!==null&&e!==void 0?e:null}get isCheer(){return this._tags.has("bits")}get isRedemption(){return!!this._tags.get("custom-reward-id")}get rewardId(){return this._tags.get("custom-reward-id")||null}get isFirst(){return this._tags.get("first-msg")==="1"}get isReturningChatter(){return this._tags.get("returning-chatter")==="1"}get isHighlight(){return this._tags.get("msg-id")==="highlighted-message"}get isReply(){return this._tags.has("reply-parent-msg-id")}get parentMessageId(){var e;return(e=this._tags.get("reply-parent-msg-id"))!==null&&e!==void 0?e:null}get parentMessageText(){var e;return(e=this._tags.get("reply-parent-msg-body"))!==null&&e!==void 0?e:null}get parentMessageUserId(){var e;return(e=this._tags.get("reply-parent-user-id"))!==null&&e!==void 0?e:null}get parentMessageUserName(){var e;return(e=this._tags.get("reply-parent-user-login"))!==null&&e!==void 0?e:null}get parentMessageUserDisplayName(){var e;return(e=this._tags.get("reply-parent-display-name"))!==null&&e!==void 0?e:null}get threadMessageId(){var e;return(e=this._tags.get("reply-thread-parent-msg-id"))!==null&&e!==void 0?e:null}get threadMessageUserId(){var e;return(e=this._tags.get("reply-thread-parent-user-id"))!==null&&e!==void 0?e:null}get bits(){var e;return Number((e=this._tags.get("bits"))!==null&&e!==void 0?e:0)}get emoteOffsets(){return bE(this._tags.get("emotes"))}get isHypeChat(){return this._tags.has("pinned-chat-paid-amount")}get hypeChatAmount(){return Xe(this._tags.get("pinned-chat-paid-amount"),Number)}get hypeChatDecimalPlaces(){return Xe(this._tags.get("pinned-chat-paid-exponent"),Number)}get hypeChatLocalizedAmount(){const e=this.hypeChatAmount;return e?e/10**this.hypeChatDecimalPlaces:null}get hypeChatCurrency(){var e;return(e=this._tags.get("pinned-chat-paid-currency"))!==null&&e!==void 0?e:null}get hypeChatLevel(){const e=this._tags.get("pinned-chat-paid-level");return e?vE.indexOf(e)+1:null}get hypeChatIsSystemMessage(){const e=this._tags.get("pinned-chat-paid-is-system-message");return e?!!Number(e):null}};Jc=P([L("chat","ChatMessage","id")],Jc);var _s={},gi={},Ro={},Kt={},Xt={},uc={},df;function Zw(){return df||(df=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Doctype=n.CDATA=n.Tag=n.Style=n.Script=n.Comment=n.Directive=n.Text=n.Root=n.isTag=n.ElementType=void 0;var e;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(e=n.ElementType||(n.ElementType={}));function t(r){return r.type===e.Tag||r.type===e.Script||r.type===e.Style}n.isTag=t,n.Root=e.Root,n.Text=e.Text,n.Directive=e.Directive,n.Comment=e.Comment,n.Script=e.Script,n.Style=e.Style,n.Tag=e.Tag,n.CDATA=e.CDATA,n.Doctype=e.Doctype}(uc)),uc}var ue={},hf;function pf(){if(hf)return ue;hf=1;var n=ue&&ue.__extends||function(){var y=function(H,E){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var Z in j)Object.prototype.hasOwnProperty.call(j,Z)&&(B[Z]=j[Z])},y(H,E)};return function(H,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");y(H,E);function B(){this.constructor=H}H.prototype=E===null?Object.create(E):(B.prototype=E.prototype,new B)}}(),e=ue&&ue.__assign||function(){return e=Object.assign||function(y){for(var H,E=1,B=arguments.length;E<B;E++){H=arguments[E];for(var j in H)Object.prototype.hasOwnProperty.call(H,j)&&(y[j]=H[j])}return y},e.apply(this,arguments)};Object.defineProperty(ue,"__esModule",{value:!0}),ue.cloneNode=ue.hasChildren=ue.isDocument=ue.isDirective=ue.isComment=ue.isText=ue.isCDATA=ue.isTag=ue.Element=ue.Document=ue.CDATA=ue.NodeWithChildren=ue.ProcessingInstruction=ue.Comment=ue.Text=ue.DataNode=ue.Node=void 0;var t=Zw(),r=function(){function y(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(y.prototype,"parentNode",{get:function(){return this.parent},set:function(H){this.parent=H},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"previousSibling",{get:function(){return this.prev},set:function(H){this.prev=H},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"nextSibling",{get:function(){return this.next},set:function(H){this.next=H},enumerable:!1,configurable:!0}),y.prototype.cloneNode=function(H){return H===void 0&&(H=!1),A(this,H)},y}();ue.Node=r;var i=function(y){n(H,y);function H(E){var B=y.call(this)||this;return B.data=E,B}return Object.defineProperty(H.prototype,"nodeValue",{get:function(){return this.data},set:function(E){this.data=E},enumerable:!1,configurable:!0}),H}(r);ue.DataNode=i;var a=function(y){n(H,y);function H(){var E=y!==null&&y.apply(this,arguments)||this;return E.type=t.ElementType.Text,E}return Object.defineProperty(H.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),H}(i);ue.Text=a;var s=function(y){n(H,y);function H(){var E=y!==null&&y.apply(this,arguments)||this;return E.type=t.ElementType.Comment,E}return Object.defineProperty(H.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),H}(i);ue.Comment=s;var o=function(y){n(H,y);function H(E,B){var j=y.call(this,B)||this;return j.name=E,j.type=t.ElementType.Directive,j}return Object.defineProperty(H.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),H}(i);ue.ProcessingInstruction=o;var u=function(y){n(H,y);function H(E){var B=y.call(this)||this;return B.children=E,B}return Object.defineProperty(H.prototype,"firstChild",{get:function(){var E;return(E=this.children[0])!==null&&E!==void 0?E:null},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"childNodes",{get:function(){return this.children},set:function(E){this.children=E},enumerable:!1,configurable:!0}),H}(r);ue.NodeWithChildren=u;var h=function(y){n(H,y);function H(){var E=y!==null&&y.apply(this,arguments)||this;return E.type=t.ElementType.CDATA,E}return Object.defineProperty(H.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),H}(u);ue.CDATA=h;var m=function(y){n(H,y);function H(){var E=y!==null&&y.apply(this,arguments)||this;return E.type=t.ElementType.Root,E}return Object.defineProperty(H.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),H}(u);ue.Document=m;var w=function(y){n(H,y);function H(E,B,j,Z){j===void 0&&(j=[]),Z===void 0&&(Z=E==="script"?t.ElementType.Script:E==="style"?t.ElementType.Style:t.ElementType.Tag);var z=y.call(this,j)||this;return z.name=E,z.attribs=B,z.type=Z,z}return Object.defineProperty(H.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"tagName",{get:function(){return this.name},set:function(E){this.name=E},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"attributes",{get:function(){var E=this;return Object.keys(this.attribs).map(function(B){var j,Z;return{name:B,value:E.attribs[B],namespace:(j=E["x-attribsNamespace"])===null||j===void 0?void 0:j[B],prefix:(Z=E["x-attribsPrefix"])===null||Z===void 0?void 0:Z[B]}})},enumerable:!1,configurable:!0}),H}(u);ue.Element=w;function g(y){return(0,t.isTag)(y)}ue.isTag=g;function _(y){return y.type===t.ElementType.CDATA}ue.isCDATA=_;function p(y){return y.type===t.ElementType.Text}ue.isText=p;function l(y){return y.type===t.ElementType.Comment}ue.isComment=l;function d(y){return y.type===t.ElementType.Directive}ue.isDirective=d;function b(y){return y.type===t.ElementType.Root}ue.isDocument=b;function x(y){return Object.prototype.hasOwnProperty.call(y,"children")}ue.hasChildren=x;function A(y,H){H===void 0&&(H=!1);var E;if(p(y))E=new a(y.data);else if(l(y))E=new s(y.data);else if(g(y)){var B=H?I(y.children):[],j=new w(y.name,e({},y.attribs),B);B.forEach(function(se){return se.parent=j}),y.namespace!=null&&(j.namespace=y.namespace),y["x-attribsNamespace"]&&(j["x-attribsNamespace"]=e({},y["x-attribsNamespace"])),y["x-attribsPrefix"]&&(j["x-attribsPrefix"]=e({},y["x-attribsPrefix"])),E=j}else if(_(y)){var B=H?I(y.children):[],Z=new h(B);B.forEach(function(D){return D.parent=Z}),E=Z}else if(b(y)){var B=H?I(y.children):[],z=new m(B);B.forEach(function(D){return D.parent=z}),y["x-mode"]&&(z["x-mode"]=y["x-mode"]),E=z}else if(d(y)){var Te=new o(y.name,y.data);y["x-name"]!=null&&(Te["x-name"]=y["x-name"],Te["x-publicId"]=y["x-publicId"],Te["x-systemId"]=y["x-systemId"]),E=Te}else throw new Error("Not implemented yet: ".concat(y.type));return E.startIndex=y.startIndex,E.endIndex=y.endIndex,y.sourceCodeLocation!=null&&(E.sourceCodeLocation=y.sourceCodeLocation),E}ue.cloneNode=A;function I(y){for(var H=y.map(function(B){return A(B,!0)}),E=1;E<H.length;E++)H[E].prev=H[E-1],H[E-1].next=H[E];return H}return ue}var mf;function ex(){return mf||(mf=1,function(n){var e=Xt&&Xt.__createBinding||(Object.create?function(o,u,h,m){m===void 0&&(m=h);var w=Object.getOwnPropertyDescriptor(u,h);(!w||("get"in w?!u.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return u[h]}}),Object.defineProperty(o,m,w)}:function(o,u,h,m){m===void 0&&(m=h),o[m]=u[h]}),t=Xt&&Xt.__exportStar||function(o,u){for(var h in o)h!=="default"&&!Object.prototype.hasOwnProperty.call(u,h)&&e(u,o,h)};Object.defineProperty(n,"__esModule",{value:!0}),n.DomHandler=void 0;var r=Zw(),i=pf();t(pf(),n);var a={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},s=function(){function o(u,h,m){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof h=="function"&&(m=h,h=a),typeof u=="object"&&(h=u,u=void 0),this.callback=u??null,this.options=h??a,this.elementCB=m??null}return o.prototype.onparserinit=function(u){this.parser=u},o.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(u){this.handleCallback(u)},o.prototype.onclosetag=function(){this.lastNode=null;var u=this.tagStack.pop();this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(u)},o.prototype.onopentag=function(u,h){var m=this.options.xmlMode?r.ElementType.Tag:void 0,w=new i.Element(u,h,void 0,m);this.addNode(w),this.tagStack.push(w)},o.prototype.ontext=function(u){var h=this.lastNode;if(h&&h.type===r.ElementType.Text)h.data+=u,this.options.withEndIndices&&(h.endIndex=this.parser.endIndex);else{var m=new i.Text(u);this.addNode(m),this.lastNode=m}},o.prototype.oncomment=function(u){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=u;return}var h=new i.Comment(u);this.addNode(h),this.lastNode=h},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var u=new i.Text(""),h=new i.CDATA([u]);this.addNode(h),u.parent=h,this.lastNode=u},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(u,h){var m=new i.ProcessingInstruction(u,h);this.addNode(m)},o.prototype.handleCallback=function(u){if(typeof this.callback=="function")this.callback(u,this.dom);else if(u)throw u},o.prototype.addNode=function(u){var h=this.tagStack[this.tagStack.length-1],m=h.children[h.children.length-1];this.options.withStartIndices&&(u.startIndex=this.parser.startIndex),this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),h.children.push(u),m&&(u.prev=m,m.next=u),u.parent=h,this.lastNode=null},o}();n.DomHandler=s,n.default=s}(Xt)),Xt}var cc={},_f;function wE(){return _f||(_f=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CARRIAGE_RETURN_PLACEHOLDER_REGEX=n.CARRIAGE_RETURN_PLACEHOLDER=n.CARRIAGE_RETURN_REGEX=n.CARRIAGE_RETURN=n.CASE_SENSITIVE_TAG_NAMES_MAP=n.CASE_SENSITIVE_TAG_NAMES=void 0,n.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],n.CASE_SENSITIVE_TAG_NAMES_MAP=n.CASE_SENSITIVE_TAG_NAMES.reduce(function(e,t){return e[t.toLowerCase()]=t,e},{}),n.CARRIAGE_RETURN="\r",n.CARRIAGE_RETURN_REGEX=new RegExp(n.CARRIAGE_RETURN,"g"),n.CARRIAGE_RETURN_PLACEHOLDER="__HTML_DOM_PARSER_CARRIAGE_RETURN_PLACEHOLDER_".concat(Date.now(),"__"),n.CARRIAGE_RETURN_PLACEHOLDER_REGEX=new RegExp(n.CARRIAGE_RETURN_PLACEHOLDER,"g")}(cc)),cc}var gf;function tx(){if(gf)return Kt;gf=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.formatAttributes=r,Kt.escapeSpecialCharacters=a,Kt.revertEscapedCharacters=s,Kt.formatDOM=o;var n=ex(),e=wE();function t(u){return e.CASE_SENSITIVE_TAG_NAMES_MAP[u]}function r(u){for(var h={},m=0,w=u.length;m<w;m++){var g=u[m];h[g.name]=g.value}return h}function i(u){u=u.toLowerCase();var h=t(u);return h||u}function a(u){return u.replace(e.CARRIAGE_RETURN_REGEX,e.CARRIAGE_RETURN_PLACEHOLDER)}function s(u){return u.replace(e.CARRIAGE_RETURN_PLACEHOLDER_REGEX,e.CARRIAGE_RETURN)}function o(u,h,m){h===void 0&&(h=null);for(var w=[],g,_=0,p=u.length;_<p;_++){var l=u[_];switch(l.nodeType){case 1:{var d=i(l.nodeName);g=new n.Element(d,r(l.attributes)),g.children=o(d==="template"?l.content.childNodes:l.childNodes,g);break}case 3:g=new n.Text(s(l.nodeValue));break;case 8:g=new n.Comment(l.nodeValue);break;default:continue}var b=w[_-1]||null;b&&(b.next=g),g.parent=h,g.prev=b,g.next=null,w.push(g)}return m&&(g=new n.ProcessingInstruction(m.substring(0,m.indexOf(" ")).toLowerCase(),m),g.next=w[0]||null,g.parent=h,w.unshift(g),w[1]&&(w[1].prev=w[0])),w}return Kt}var ff;function xE(){if(ff)return Ro;ff=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.default=l;var n=tx(),e="html",t="head",r="body",i=/<([a-zA-Z]+[0-9]?)/,a=/<head[^]*>/i,s=/<body[^]*>/i,o=function(d,b){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},u=function(d,b){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},h=typeof window=="object"&&window.DOMParser;if(typeof h=="function"){var m=new h,w="text/html";u=function(d,b){return b&&(d="<".concat(b,">").concat(d,"</").concat(b,">")),m.parseFromString(d,w)},o=u}if(typeof document=="object"&&document.implementation){var g=document.implementation.createHTMLDocument();o=function(d,b){if(b){var x=g.documentElement.querySelector(b);return x&&(x.innerHTML=d),g}return g.documentElement.innerHTML=d,g}}var _=typeof document=="object"&&document.createElement("template"),p;_&&_.content&&(p=function(d){return _.innerHTML=d,_.content.childNodes});function l(d){var b,x;d=(0,n.escapeSpecialCharacters)(d);var A=d.match(i),I=A&&A[1]?A[1].toLowerCase():"";switch(I){case e:{var y=u(d);if(!a.test(d)){var H=y.querySelector(t);(b=H==null?void 0:H.parentNode)===null||b===void 0||b.removeChild(H)}if(!s.test(d)){var H=y.querySelector(r);(x=H==null?void 0:H.parentNode)===null||x===void 0||x.removeChild(H)}return y.querySelectorAll(e)}case t:case r:{var E=o(d).querySelectorAll(I);return s.test(d)&&a.test(d)?E[0].parentNode.childNodes:E}default:{if(p)return p(d);var H=o(d,r).querySelector(r);return H.childNodes}}}return Ro}var yf;function SE(){if(yf)return gi;yf=1;var n=gi&&gi.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(gi,"__esModule",{value:!0}),gi.default=i;var e=n(xE()),t=tx(),r=/<(![a-zA-Z\s]+)>/;function i(a){if(typeof a!="string")throw new TypeError("First argument must be a string");if(!a)return[];var s=a.match(r),o=s?s[1]:void 0;return(0,t.formatDOM)((0,e.default)(a),null,o)}return gi}var Ao={},Je={},gs={},bf;function CE(){if(bf)return gs;bf=1;var n=0;gs.SAME=n;var e=1;return gs.CAMELCASE=e,gs.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1},gs}var vf;function EE(){if(vf)return Je;vf=1;const n=0,e=1,t=2,r=3,i=4,a=5,s=6;function o(y){return h.hasOwnProperty(y)?h[y]:null}function u(y,H,E,B,j,Z,z){this.acceptsBooleans=H===t||H===r||H===i,this.attributeName=B,this.attributeNamespace=j,this.mustUseProperty=E,this.propertyName=y,this.type=H,this.sanitizeURL=Z,this.removeEmptyString=z}const h={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach(y=>{h[y]=new u(y,n,!1,y,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([y,H])=>{h[y]=new u(y,e,!1,H,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(y=>{h[y]=new u(y,t,!1,y.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(y=>{h[y]=new u(y,t,!1,y,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(y=>{h[y]=new u(y,r,!1,y.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(y=>{h[y]=new u(y,r,!0,y,null,!1,!1)}),["capture","download"].forEach(y=>{h[y]=new u(y,i,!1,y,null,!1,!1)}),["cols","rows","size","span"].forEach(y=>{h[y]=new u(y,s,!1,y,null,!1,!1)}),["rowSpan","start"].forEach(y=>{h[y]=new u(y,a,!1,y.toLowerCase(),null,!1,!1)});const w=/[\-\:]([a-z])/g,g=y=>y[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(y=>{const H=y.replace(w,g);h[H]=new u(H,e,!1,y,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(y=>{const H=y.replace(w,g);h[H]=new u(H,e,!1,y,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(y=>{const H=y.replace(w,g);h[H]=new u(H,e,!1,y,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(y=>{h[y]=new u(y,e,!1,y.toLowerCase(),null,!1,!1)});const _="xlinkHref";h[_]=new u("xlinkHref",e,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(y=>{h[y]=new u(y,e,!1,y.toLowerCase(),null,!0,!0)});const{CAMELCASE:p,SAME:l,possibleStandardNames:d}=CE(),x=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD"+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",A=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+x+"]*$")),I=Object.keys(d).reduce((y,H)=>{const E=d[H];return E===l?y[H]=H:E===p?y[H.toLowerCase()]=H:y[H]=E,y},{});return Je.BOOLEAN=r,Je.BOOLEANISH_STRING=t,Je.NUMERIC=a,Je.OVERLOADED_BOOLEAN=i,Je.POSITIVE_NUMERIC=s,Je.RESERVED=n,Je.STRING=e,Je.getPropertyInfo=o,Je.isCustomAttribute=A,Je.possibleStandardNames=I,Je}var fs={},fi={},dc,wf;function HE(){if(wf)return dc;wf=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,o=/^\s+|\s+$/g,u=`
`,h="/",m="*",w="",g="comment",_="declaration";dc=function(l,d){if(typeof l!="string")throw new TypeError("First argument must be a string");if(!l)return[];d=d||{};var b=1,x=1;function A(se){var D=se.match(e);D&&(b+=D.length);var N=se.lastIndexOf(u);x=~N?se.length-N:x+se.length}function I(){var se={line:b,column:x};return function(D){return D.position=new y(se),B(),D}}function y(se){this.start=se,this.end={line:b,column:x},this.source=d.source}y.prototype.content=l;function H(se){var D=new Error(d.source+":"+b+":"+x+": "+se);if(D.reason=se,D.filename=d.source,D.line=b,D.column=x,D.source=l,!d.silent)throw D}function E(se){var D=se.exec(l);if(D){var N=D[0];return A(N),l=l.slice(N.length),D}}function B(){E(t)}function j(se){var D;for(se=se||[];D=Z();)D!==!1&&se.push(D);return se}function Z(){var se=I();if(!(h!=l.charAt(0)||m!=l.charAt(1))){for(var D=2;w!=l.charAt(D)&&(m!=l.charAt(D)||h!=l.charAt(D+1));)++D;if(D+=2,w===l.charAt(D-1))return H("End of comment missing");var N=l.slice(2,D-2);return x+=2,A(N),l=l.slice(D),x+=2,se({type:g,comment:N})}}function z(){var se=I(),D=E(r);if(D){if(Z(),!E(i))return H("property missing ':'");var N=E(a),ae=se({type:_,property:p(D[0].replace(n,w)),value:N?p(N[0].replace(n,w)):w});return E(s),ae}}function Te(){var se=[];j(se);for(var D;D=z();)D!==!1&&(se.push(D),j(se));return se}return B(),Te()};function p(l){return l?l.replace(o,w):w}return dc}var xf;function RE(){if(xf)return fi;xf=1;var n=fi&&fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fi,"__esModule",{value:!0}),fi.default=t;var e=n(HE());function t(r,i){var a=null;if(!r||typeof r!="string")return a;var s=(0,e.default)(r),o=typeof i=="function";return s.forEach(function(u){if(u.type==="declaration"){var h=u.property,m=u.value;o?i(h,m,u):m&&(a=a||{},a[h]=m)}}),a}return fi}var ys={},Sf;function AE(){if(Sf)return ys;Sf=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(h){return!h||t.test(h)||n.test(h)},s=function(h,m){return m.toUpperCase()},o=function(h,m){return"".concat(m,"-")},u=function(h,m){return m===void 0&&(m={}),a(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(i,o):h=h.replace(r,o),h.replace(e,s))};return ys.camelCase=u,ys}var bs,Cf;function TE(){if(Cf)return bs;Cf=1;var n=bs&&bs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=n(RE()),t=AE();function r(i,a){var s={};return!i||typeof i!="string"||(0,e.default)(i,function(o,u){o&&u&&(s[(0,t.camelCase)(o,a)]=u)}),s}return r.default=r,bs=r,bs}var Ef;function rx(){return Ef||(Ef=1,function(n){var e=fs&&fs.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(n,"__esModule",{value:!0}),n.returnFirstArg=n.canTextBeChildOfNode=n.ELEMENTS_WITH_NO_TEXT_CHILDREN=n.PRESERVE_CUSTOM_ATTRIBUTES=void 0,n.isCustomComponent=a,n.setStyleProp=o;var t=_l(),r=e(TE()),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function a(m,w){return m.includes("-")?!i.has(m):!!(w&&typeof w.is=="string")}var s={reactCompat:!0};function o(m,w){if(typeof m=="string"){if(!m.trim()){w.style={};return}try{w.style=(0,r.default)(m,s)}catch{w.style={}}}}n.PRESERVE_CUSTOM_ATTRIBUTES=Number(t.version.split(".")[0])>=16,n.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var u=function(m){return!n.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(m.name)};n.canTextBeChildOfNode=u;var h=function(m){return m};n.returnFirstArg=h}(fs)),fs}var Hf;function nx(){if(Hf)return Ao;Hf=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.default=a;var n=EE(),e=rx(),t=["checked","value"],r=["input","select","textarea"],i={reset:!0,submit:!0};function a(o,u){o===void 0&&(o={});var h={},m=!!(o.type&&i[o.type]);for(var w in o){var g=o[w];if((0,n.isCustomAttribute)(w)){h[w]=g;continue}var _=w.toLowerCase(),p=s(_);if(p){var l=(0,n.getPropertyInfo)(p);switch(t.includes(p)&&r.includes(u)&&!m&&(p=s("default"+_)),h[p]=g,l&&l.type){case n.BOOLEAN:h[p]=!0;break;case n.OVERLOADED_BOOLEAN:g===""&&(h[p]=!0);break}continue}e.PRESERVE_CUSTOM_ATTRIBUTES&&(h[w]=g)}return(0,e.setStyleProp)(o.style,h),h}function s(o){return n.possibleStandardNames[o]}return Ao}var yi={},Rf;function IE(){if(Rf)return yi;Rf=1;var n=yi&&yi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(yi,"__esModule",{value:!0}),yi.default=a;var e=_l(),t=n(nx()),r=rx(),i={cloneElement:e.cloneElement,createElement:e.createElement,isValidElement:e.isValidElement};function a(o,u){u===void 0&&(u={});for(var h=[],m=typeof u.replace=="function",w=u.transform||r.returnFirstArg,g=u.library||i,_=g.cloneElement,p=g.createElement,l=g.isValidElement,d=o.length,b=0;b<d;b++){var x=o[b];if(m){var A=u.replace(x,b);if(l(A)){d>1&&(A=_(A,{key:A.key||b})),h.push(w(A,x,b));continue}}if(x.type==="text"){var I=!x.data.trim().length;if(I&&x.parent&&!(0,r.canTextBeChildOfNode)(x.parent)||u.trim&&I)continue;h.push(w(x.data,x,b));continue}var y=x,H={};s(y)?((0,r.setStyleProp)(y.attribs.style,y.attribs),H=y.attribs):y.attribs&&(H=(0,t.default)(y.attribs,y.name));var E=void 0;switch(x.type){case"script":case"style":x.children[0]&&(H.dangerouslySetInnerHTML={__html:x.children[0].data});break;case"tag":x.name==="textarea"&&x.children[0]?H.defaultValue=x.children[0].data:x.children&&x.children.length&&(E=a(x.children,u));break;default:continue}d>1&&(H.key=b),h.push(w(p(x.name,H,E),x,b))}return h.length===1?h[0]:h}function s(o){return r.PRESERVE_CUSTOM_ATTRIBUTES&&o.type==="tag"&&(0,r.isCustomComponent)(o.name,o.attribs)}return yi}var Af;function PE(){return Af||(Af=1,function(n){var e=_s&&_s.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(n,"__esModule",{value:!0}),n.htmlToDOM=n.domToReact=n.attributesToProps=n.Text=n.ProcessingInstruction=n.Element=n.Comment=void 0,n.default=o;var t=e(SE());n.htmlToDOM=t.default;var r=e(nx());n.attributesToProps=r.default;var i=e(IE());n.domToReact=i.default;var a=ex();Object.defineProperty(n,"Comment",{enumerable:!0,get:function(){return a.Comment}}),Object.defineProperty(n,"Element",{enumerable:!0,get:function(){return a.Element}}),Object.defineProperty(n,"ProcessingInstruction",{enumerable:!0,get:function(){return a.ProcessingInstruction}}),Object.defineProperty(n,"Text",{enumerable:!0,get:function(){return a.Text}});var s={lowerCaseAttributeNames:!1};function o(u,h){if(typeof u!="string")throw new TypeError("First argument must be a string");return u?(0,i.default)((0,t.default)(u,(h==null?void 0:h.htmlparser2)||s),h):[]}}(_s)),_s}var DE=PE();const Tf=ir(DE),ix=Tf.default||Tf,BE={mp4:"video/mp4",m4v:"video/mp4",mov:"video/quicktime",qt:"video/quicktime",webm:"video/webm",ogv:"video/ogg",ogg:"video/ogg",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",flv:"video/x-flv",mkv:"video/x-matroska","3gp":"video/3gpp","3g2":"video/3gpp2",mpeg:"video/mpeg",mpg:"video/mpeg",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp",svg:"image/svg+xml",svgz:"image/svg+xml",bmp:"image/bmp",ico:"image/x-icon",tif:"image/tiff",tiff:"image/tiff",avif:"image/avif",apng:"image/apng",jfif:"image/jpeg",pjpeg:"image/jpeg",pjp:"image/jpeg"};function OE(n){const e=/<img\s+([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi;return n.replace(e,(t,r,i,a)=>{var h;const s=((h=i.split(".").pop())==null?void 0:h.toLowerCase().split(/[#?]/)[0])||"";debugger;const o=BE[s]||"application/octet-stream";return/type=["'][^"']*["']/i.test(t)?t:`<img ${r}src="${i}" type="${o}"${a}>`})}var hc={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var If;function UE(){return If||(If=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var a="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(a=i(a,r(o)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var s="";for(var o in a)e.call(a,o)&&a[o]&&(s=i(s,o));return s}function i(a,s){return s?a?a+" "+s:a+s:a}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(hc)),hc.exports}var qE=UE();const ax=ir(qE),kE=["xxl","xl","lg","md","sm","xs"],ME="xs",Ol=ki.createContext({prefixes:{},breakpoints:kE,minBreakpoint:ME}),{Consumer:uT,Provider:cT}=Ol;function sx(n,e){const{prefixes:t}=ki.useContext(Ol);return n||t[e]||e}function jE(){const{breakpoints:n}=ki.useContext(Ol);return n}function LE(){const{minBreakpoint:n}=ki.useContext(Ol);return n}const ox=ki.forwardRef(({bsPrefix:n,fluid:e=!1,as:t="div",className:r,...i},a)=>{const s=sx(n,"container"),o=typeof e=="string"?`-${e}`:"-fluid";return lt.jsx(t,{ref:a,...i,className:ax(r,e?`${s}${o}`:s)})});ox.displayName="Container";const xi=ki.forwardRef(({bsPrefix:n,className:e,as:t="div",...r},i)=>{const a=sx(n,"row"),s=jE(),o=LE(),u=`${a}-cols`,h=[];return s.forEach(m=>{const w=r[m];delete r[m];let g;w!=null&&typeof w=="object"?{cols:g}=w:g=w;const _=m!==o?`-${m}`:"";g!=null&&h.push(`${u}${_}-${g}`)}),lt.jsx(t,{ref:i,...r,className:ax(e,a,...h)})});xi.displayName="Row";const NE="_grid_1uqjo_1",FE="_grid_cell_1uqjo_13",bi={grid:NE,grid_cell:FE};function $E({mediaInfo:n}){const e=sf(u=>u.parser),t=sf(u=>u.parseToLink),r=n.mediaInfo.textInfo.text;if(r===null&&r===""||!e||!t)return;const i=r==null?void 0:r.split("="),a=i==null?void 0:i.length;if(a){if(a&&a>2)return console.error("    "),null}else return null;const s=[];for(let u=0;u<i.length;u++)if(i[u]=i[u].trim(),i[u]){const h=GE({text:i[u],parser:e,newParser:t});h&&(s[u]=h)}const o=i[1]!=null&&s[1]!=null;return lt.jsxs(ox,{className:bi.grid,children:[lt.jsx(xi,{className:bi.grid_cell,children:lt.jsx(rh.Textfit,{forceSingleModeWidth:!0,style:{width:"100%",height:"100%",marginLeft:"auto",marginRight:"auto",textAlign:"center",display:"flex",justifyContent:"center",alignContent:"center",flexWrap:"nowrap",alignItems:"stretch"},max:2e3,children:s[0]})}),lt.jsx(xi,{className:bi.grid_cell}),lt.jsx(xi,{className:bi.grid_cell}),lt.jsx(xi,{className:bi.grid_cell}),lt.jsx(xi,{className:bi.grid_cell+` down-cell ${o?" bg-black":""}`,children:lt.jsx(rh.Textfit,{forceSingleModeWidth:!0,style:{width:"100%",height:"100%",marginLeft:"auto",marginRight:"auto",textAlign:"center",display:"flex",justifyContent:"center",alignContent:"center",flexWrap:"nowrap",alignItems:"stretch"},max:2e3,children:o?s[1]:""})})]})}$E.__docgenInfo={description:"",methods:[],displayName:"BigTextBlockForAudio",props:{mediaInfo:{required:!0,tsType:{name:"MediaDto"},description:""}}};function GE({text:n,parser:e,newParser:t}){var a,s;if(!n)return;let r="";if(typeof n=="string")r=n.replace(/[\u{E0000}-\u{E007F}]/gu,""),n&&e&&(r=e.parse(n,1));else if("message"in n&&typeof n.message=="string"){let o=function(m){return m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")};const u=n;if(u.message===void 0)return;r=u.message.replace(/[\u{E0000}-\u{E007F}]/gu,""),(s=(a=u.emoteSet)==null?void 0:a.emotes)==null||s.forEach(m=>{m.name===void 0||m.imageUrl===void 0||u.message===void 0||(r=r.replaceAll(new RegExp(`(?<!<[^>]*)${o(m.name)}(?![^<]*>)`,"g"),`<img class="emote"
        srcset="//static-cdn.jtvnw.net/emoticons/v2/${m.id}/default/dark/1.0 1x, //static-cdn.jtvnw.net/emoticons/v2/${m.id}/default/light/2.0 2x, //static-cdn.jtvnw.net/emoticons/v2/${m.id}/default/dark/4.0 4x" alt="${m.name}" 
        loading="lazy"
        decoding="async" />`))});const h=t.parse(r);r=OE(h)}else throw new Error("Invalid message type");return n?ix(r):void 0}function xs(n,e){if(n>=-1&&e<=1)return function(a,s){if(a<-1||s>1)throw new Error("min must be >= -1 and max must be <= 1");const o=Math.random()*(s-a)+a;return Math.round(o*1e3)/1e3}(n,e);const t=new Uint32Array(1);window.crypto.getRandomValues(t);const r=t[0]/4294967296;return Math.floor(r*(e-n+1))+n}function dT(n,e,t=!0){const r={},{positionInfo:i}=e;let a,s;if(a=n.offsetWidth||i.width||0,s=n.offsetHeight||i.height||0,!a&&i.width&&(a=i.width),!s&&i.height&&(s=i.height),i.randomCoordinates){const o=Math.max(0,window.innerWidth-a),u=Math.max(0,window.innerHeight-s);let h=xs(0,o),m=xs(0,u);return t||(h=xs(0,window.innerWidth),m=xs(0,window.innerHeight)),r.left=`${h}px`,r.top=`${m}px`,r.position="absolute",r}if(i.isHorizontalCenter&&i.isVerticallCenter){let o={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return t&&(o={...o,maxWidth:`${window.innerWidth}px`,maxHeight:`${window.innerHeight}px`}),o}if(i.isHorizontalCenter){let o=i.yCoordinate!==void 0?i.yCoordinate:0;return i.yCoordinate===void 0&&t&&(o+s/2>window.innerHeight&&(o=window.innerHeight-s/2),o-s/2<0&&(o=s/2)),r.position="absolute",r.left="50%",r.transform="translateX(-50%)",r.top=`${o}px`,r}if(i.isVerticallCenter){let o=i.xCoordinate!==void 0?i.xCoordinate:0;return i.xCoordinate===void 0&&t&&(o+a/2>window.innerWidth&&(o=window.innerWidth-a/2),o-a/2<0&&(o=a/2)),r.position="absolute",r.top="50%",r.transform="translateY(-50%)",r.left=`${o}px`,r}if(i.xCoordinate!==void 0){let o=i.xCoordinate;t&&(o+a>window.innerWidth&&(o=window.innerWidth-a),o<0&&(o=0)),r.left=`${o}px`,r.position="absolute"}if(i.yCoordinate!==void 0){let o=i.yCoordinate;t&&(o+s>window.innerHeight&&(o=window.innerHeight-s),o<0&&(o=0)),r.top=`${o}px`,r.position="absolute"}return(r.left!==void 0||r.top!==void 0)&&(r.position="absolute"),r}function hT(n){const e={};return n!=null&&n.positionInfo.isRotated&&(e.transform=`rotate(${xs(n.positionInfo.rotation*-1,n.positionInfo.rotation)}deg)`),e}const QE=(n=1)=>{const e=Math.floor(Math.random()*256),t=Math.floor(Math.random()*256),r=Math.floor(Math.random()*256);return`rgba(${e}, ${t}, ${r}, ${n})`};function pT(n,e){let t="",r="";if(e instanceof Jc?(t=e.text,e.userInfo.badges.forEach((a,s)=>{const o=n.find(m=>m.id==s),u=o==null?void 0:o.versions.find(m=>m.id==a);if(!u)return;const h=u.getImageUrl(4);r=r+`<img class="badge_pa" src="${h}" type="image/png">
`})):e.badges!==void 0&&(t=e.message,e.badges.forEach(a=>{var h;const s=n.find(m=>m.id==a.key),o=(h=s==null?void 0:s.versions)==null?void 0:h.find(m=>m.id==a.value);if(!o)return;const u=o.getImageUrl(4);r=r+`<img class="badge_pa" src="${u}" type="image/png">
`})),!t)return;const i=ix(r);if(typeof i!="string")return i}function mT(n,e,t){if(typeof n=="string")return n=n.replace(/[\u{E0000}-\u{E007F}]/gu,""),n.split(" ").map(a=>e.parse(a,1));if("message"in n&&typeof n.message=="string"){const r=n;if(r.message===void 0||r.emoteSet===void 0||r.emoteSet.emotes===void 0)return;r.message=r.message.replace(/[\u{E0000}-\u{E007F}]/gu,"");const i=r.emoteSet.emotes.map(s=>{var o;return s.name!==void 0&&(r.message=(o=r.message)==null?void 0:o.replace(s.name,"")),s.imageUrl});return r.message.trim().split(" ").forEach(s=>{i.push(t.parse(s,1))}),i.filter(s=>s!==void 0)}else throw new Error("text must be string or ChatMessage")}const WE=n=>{if(n==="white"||n==="#ffffff"||n==="rgb(255, 255, 255)")return!0},_T=n=>{for(;;){const e=QE(n);if(!WE(e))return e}},gT=n=>{var e,t;return(((e=n==null?void 0:n.faceImage.url)==null?void 0:e.includes(".mp4"))||((t=n==null?void 0:n.faceImage.url)==null?void 0:t.includes(".webm")))??!1};function fT(n){if(!n)return;n=n.trim();const e=[];let t=[];const r=n.replace(/[\u{E0000}-\u{E007F}]/gu,"").split(/\s+/).filter(i=>i.trim().length>0);for(const i of r)i.startsWith("https://")||i.startsWith("http://")?(t.length>0&&(e.push({type:"text",content:t.join(" "),id:Ki()}),t=[]),i.includes(".mp4")||i.includes(".webm")||i.includes(".ogg")?e.push({id:Ki(),type:"video",source:i,content:i}):i.includes(".jpeg")||i.includes(".jpg")||i.includes(".png")||i.includes(".gif")||i.includes(".svg")||i.includes(".webp")?e.push({id:Ki(),type:"image",source:i,content:i}):e.push({id:Ki(),type:"link",source:i,content:i})):i&&t.push(i);return t.length>0&&e.push({id:Ki(),type:"text",content:t.join(" ")}),e}function yT(n,e,t){if(t){const s=n.filter(u=>!e.some(h=>t(u,h))),o=e.filter(u=>!n.some(h=>t(h,u)));return[...s,...o]}const r=new Set(n),i=new Set(e),a=[];for(const s of n)i.has(s)||a.push(s);for(const s of e)r.has(s)||a.push(s);return a}export{$E as B,ox as C,xi as R,xs as a,_T as b,GE as c,gT as d,yT as e,mT as f,QE as g,dT as h,WE as i,hT as j,fT as p,pT as r,sf as u};
