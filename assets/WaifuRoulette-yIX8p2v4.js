import{a as Ie,g as Me,r as F,j as M}from"./iframe-BjL-cKrh.js";import{a as b}from"./animate.module-CI42XwLX.js";import{g as ye}from"./index-3u8u-C0z.js";const Le="_baza_1dxj7_13",Be="_textShadow_1dxj7_32",he={baza:Le,"alert-box":"_alert-box_1dxj7_23",textShadow:Be,"roulette-name-text":"_roulette-name-text_1dxj7_36","smooth-box":"_smooth-box_1dxj7_47","merge-container":"_merge-container_1dxj7_59","merge-text":"_merge-text_1dxj7_73","merge-image":"_merge-image_1dxj7_87"};var k={exports:{}},Ue=k.exports,Oe;function Ke(){return Oe||(Oe=1,function(q,ee){(function($,y){q.exports=y(Ie())})(Ue,V=>(()=>{var $={"./src/components/PrizesWrapper/PrizesWrapper.css":(s,t,e)=>{e.r(t)},"./src/components/Wrapper/Wrapper.css":(s,t,e)=>{e.r(t)},"./src/designs/Regular/Regular.css":(s,t,e)=>{e.r(t)},"./src/components/PrizesWrapper/PrizesWrapper.tsx":(s,t,e)=>{e.r(t),e.d(t,{default:()=>i});var r=e("react"),n=e.n(r),l=e("./src/context/RouletteContext.tsx"),d=e("./src/utills/index.ts");e("./src/components/PrizesWrapper/PrizesWrapper.css");var u=function(c){var a=c.children,P=c.className,m=c.tagName,o=m===void 0?"div":m,g=c.style,v=(0,r.useContext)(l.default),z=v.type,O=v.options,L=v.start,x=v.prizeListClassName,p=O.withoutAnimation!==!0&&L!==!0,E=(0,d.classNames)("roulette-pro-prize-list",{"with-animation":p},[z],x,P);return n().createElement(o,{className:E,style:g},a)};const i=u},"./src/components/PrizesWrapper/index.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var r=e("./src/components/PrizesWrapper/PrizesWrapper.tsx");const n=r.default},"./src/components/Roulette/Roulette.tsx":(s,t,e)=>{e.r(t),e.d(t,{default:()=>m});var r=e("react"),n=e.n(r),l=e("./src/designs/Regular/index.ts"),d=e("./src/context/RouletteContext.tsx"),u=e("./src/components/Wrapper/index.ts"),i=e("./src/components/PrizesWrapper/index.ts"),c=e("./src/utills/index.ts"),a=e("./src/hooks/index.ts"),P=function(o){var g,v,z,O=o.topChildren,L=o.bottomChildren,x=o.designPlugin,p=o.prizeItemRenderFunction,E=o.prizes,W=o.defaultDesignOptions,j=W===void 0?{}:W,I=o.start,B=o.prizeIndex,U=o.spinningTime,X=U===void 0?10:U,w=o.transitionFunction,te=w===void 0?"cubic-bezier(0.0125, 0.1, 0.1, 1)":w,oe=o.onPrizeDefined,Re=oe===void 0?function(){}:oe,R=o.classes,K=o.soundWhileSpinning,le=o.options,re=le===void 0?{}:le,ue=o.type,T=ue===void 0?"horizontal":ue,de=(0,r.useState)(0),ce=de[0],fe=de[1],G=(0,r.useRef)(),me=(0,a.useAudio)(K??""),De=me.start,pe=me.stop,ve=re.stopInCenter,ne=(0,l.default)(j)({type:T}),A=typeof x!="function"?ne:x({type:T}),J=A.prizeItemWidth,Q=A.prizeItemHeight;(0,r.useEffect)(function(){if(G){var f=function(){var _=G.current.getBoundingClientRect(),C=_.width,D=_.height;switch(T){case"horizontal":return fe(C);case"vertical":return fe(D);default:console.error("Unknown roulette type ".concat(T))}};return f(),window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}}},[G,T]),(0,r.useEffect)(function(){if(I){K&&De();var f=setTimeout(function(){Re(),K&&pe()},X*1e3);return function(){clearTimeout(f),K&&pe()}}},[I,X]);var ze=(0,r.useMemo)(function(){var f=T==="horizontal"?J:Q,_=(0,c.getPrizeOffset)(f,B,ce/2),C=ve===!0?0:(0,c.getPrizeAdditionalOffset)(f);return _+C},[T,B,J,Q,ce,ve]),Ae=function(){var f,_,C=function(){switch(T){case"horizontal":return"left";case"vertical":return"top";default:throw new Error("Type is unknown")}},D=C();return I===!1?(f={},f[D]="0",f.willChange=D,f):(_={transition:"all ".concat(X,"s ").concat(te," 0s")},_[D]="-".concat(ze,"px"),_)},Ce=Ae(),Ee=(0,r.useCallback)(function(){return typeof p=="function"?p:typeof A.prizeItemRenderFunction=="function"?A.prizeItemRenderFunction:ne.prizeItemRenderFunction},[ne.prizeItemRenderFunction,A.prizeItemRenderFunction,p]),H=(0,r.useMemo)(function(){var f,_=Ee(),C=(0,c.classNames)(R?.prizeItem,(f=A.classes)===null||f===void 0?void 0:f.prizeItem);return E.map(function(D){return n().createElement("li",{key:D.id,className:C},_(D))})},[E,Ee,R?.prizeItem,(g=A.classes)===null||g===void 0?void 0:g.prizeItem]);(0,r.useEffect)(function(){var f,_,C,D;if(H.length!==0){for(var Y=-1,Z=-1,_e=function(){Y=-1,Z=-1},se=0;se<H.length;se+=1){var N=(D=(C=(_=(f=H[se])===null||f===void 0?void 0:f.props)===null||_===void 0?void 0:_.children)===null||C===void 0?void 0:C.props)===null||D===void 0?void 0:D.style,ie=N?.width,ae=N?.height;if(Y===-1&&Z===-1){Y=ie,Z=ae;continue}if(!(Y===ie&&Z===ae)){(ie!==J||ae!==Q)&&console.error("One or more prize items have a different width or height than what is set in the designPlugin. Therefore, the roulette is incorrectly calculating the offset for the prize item index. Please check your `prizeItemRenderFunction`. All prize items must have the same width and height as set in the `prizeItemRenderFunction`"),console.error("One or more prize items have different width or height; therefore, the roulette is incorrectly calculating the offset for the prize item index. All prize items must have the same width and height. Please check your `prizeItemRenderFunction` or `designPlugin` options");break}}return _e(),function(){_e()}}},[H,J,Q]);var ge=(0,c.classNames)(R?.wrapper,(v=A.classes)===null||v===void 0?void 0:v.wrapper),Pe=(0,c.classNames)(R?.prizeListWrapper,(z=A.classes)===null||z===void 0?void 0:z.prizeListWrapper),xe=(0,r.useMemo)(function(){return{options:re,start:I,wrapperClassName:ge,prizeListClassName:Pe,type:T}},[re,I,T,Pe,ge]),Te=n().createElement(r.Fragment,null,A.topChildren,O),We=n().createElement(r.Fragment,null,A.bottomChildren,L);return n().createElement(d.default.Provider,{value:xe},n().createElement(u.default,{ref:G},Te,n().createElement(i.default,{tagName:"ul",style:Ce},H),We))};const m=P},"./src/components/Roulette/index.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var r=e("./src/components/Roulette/Roulette.tsx");const n=r.default},"./src/components/Wrapper/Wrapper.tsx":(s,t,e)=>{e.r(t),e.d(t,{default:()=>i});var r=e("react"),n=e.n(r),l=e("./src/utills/index.ts"),d=e("./src/context/RouletteContext.tsx");e("./src/components/Wrapper/Wrapper.css");var u=(0,r.forwardRef)(function(c,a){var P=c.children,m=c.className,o=(0,r.useContext)(d.default),g=(0,l.classNames)("roulette-pro-wrapper",o.wrapperClassName,m);return n().createElement("div",{className:g,ref:a},P)});u.displayName="Wrapper";const i=u},"./src/components/Wrapper/index.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var r=e("./src/components/Wrapper/Wrapper.tsx");const n=r.default},"./src/context/RouletteContext.tsx":(s,t,e)=>{e.r(t),e.d(t,{default:()=>l});var r=e("react"),n=(0,r.createContext)({});const l=n},"./src/designs/Regular/Regular.tsx":(s,t,e)=>{e.r(t),e.d(t,{default:()=>u});var r=e("react"),n=e.n(r);e("./src/designs/Regular/Regular.css");var l=function(i){var c=i.type,a=i.hideCenterDelimiter;return a!==!0?n().createElement("div",{"data-testid":"design-top",className:"roulette-pro-regular-design-top ".concat(c)}):null},d=function(i){var c=i.prizesWithText,a=i.hideCenterDelimiter;return function(P){var m=P.type,o=205,g=m==="vertical"?172:174,v=c===!0?234:g,z="roulette-pro-regular-design-prize-item-".concat(m);return{topChildren:n().createElement(l,{type:m,hideCenterDelimiter:a}),bottomChildren:null,prizeItemWidth:o,prizeItemHeight:v,prizeItemRenderFunction:function(O){var L=O.image,x=O.text,p=c===!0&&x!==void 0;return n().createElement("div",{className:"roulette-pro-regular-prize-item",style:{width:o,height:v}},n().createElement("div",{className:p===!0?"roulette-pro-regular-prize-item-wrapper":"roulette-pro-regular-prize-item-wrapper center"},n().createElement("div",{className:"roulette-pro-regular-image-wrapper"},n().createElement("img",{className:"roulette-pro-regular-prize-item-image",src:L,alt:p===!0?"prize item ".concat(x):"prize item"})),p===!0&&n().createElement("p",{className:"roulette-pro-regular-prize-item-text"},x)))},classes:{prizeItem:z}}}};const u=d},"./src/designs/Regular/index.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var r=e("./src/designs/Regular/Regular.tsx");const n=r.default},"./src/hooks/index.ts":(s,t,e)=>{e.r(t),e.d(t,{useAudio:()=>r.default});var r=e("./src/hooks/useAudio/index.ts")},"./src/hooks/useAudio/index.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var r=e("./src/hooks/useAudio/useAudio.ts");const n=r.default},"./src/hooks/useAudio/useAudio.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>l});var r=e("react"),n=function(d){var u=(0,r.useState)(null),i=u[0],c=u[1],a=(0,r.useState)(!1),P=a[0],m=a[1];(0,r.useEffect)(function(){typeof window>"u"||typeof Audio>"u"||!d||c(new Audio(d))},[d]);var o=(0,r.useCallback)(function(){i&&(i.play(),m(!0))},[i]),g=(0,r.useCallback)(function(){i&&(i.pause(),i.currentTime=0,m(!1))},[i]);return(0,r.useEffect)(function(){return function(){m(!1)}},[]),(0,r.useEffect)(function(){if(i){var v=function(){g()};return i.addEventListener("ended",v),function(){i.removeEventListener("ended",v)}}},[i,g]),{isPlaying:P,start:o,stop:g}};const l=n},"./src/utills/classNames/classNames.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>c});var r=function(a){return Array.isArray(a)},n=function(a){return a!==null&&r(a)===!1&&typeof a=="object"},l=function(a){return typeof a=="function"},d=function(a){return typeof a=="boolean"},u=function(a){return a.toString!==Object.prototype.toString},i=function(){for(var a=[],P=0;P<arguments.length;P++)a[P]=arguments[P];for(var m="",o=function(p,E){var W=d(p);!p||W===!0||(m+="".concat(E!==void 0?E:p," "))},g=function(p){var E=Object.entries(p),W=u(p);if(E.forEach(function(I){var B=I[0],U=I[1];if(U){var X=l(U),w=B==="toString";if(X===!0&&w===!1){var te=U();o(te,B);return}w===!1&&(m+="".concat(B," "))}}),W===!0){var j=p.toString();o(j)}},v=function(p){p.forEach(function(E){if(!(!E||typeof E=="boolean")){var W=r(E),j=n(E);if(W===!0)return v(E);if(j===!0)return g(E);m+="".concat(E," ")}})},z=0;z<a.length;z+=1){var O=a[z],L=n(O),x=r(O);if(L===!0){g(O);continue}if(x===!0){v(O);continue}o(O)}return m.trim()};const c=i},"./src/utills/classNames/index.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var r=e("./src/utills/classNames/classNames.ts");const n=r.default},"./src/utills/getPrizeAdditionalOffset/getPrizeAdditionalOffset.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>l});var r=e("./src/utills/getRandomIntInRange/index.ts"),n=function(d){var u=d/2,i=(0,r.default)(-u+1,u-1);return i};const l=n},"./src/utills/getPrizeAdditionalOffset/index.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var r=e("./src/utills/getPrizeAdditionalOffset/getPrizeAdditionalOffset.ts");const n=r.default},"./src/utills/getPrizeOffset/getPrizeOffset.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var r=function(l,d,u){return l*d-(u-l/2)};const n=r},"./src/utills/getPrizeOffset/index.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var r=e("./src/utills/getPrizeOffset/getPrizeOffset.ts");const n=r.default},"./src/utills/getRandomIntInRange/getRandomIntInRange.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var r=function(l,d){var u=Math.ceil(l),i=Math.floor(d);return Math.floor(Math.random()*(i-u+1)+u)};const n=r},"./src/utills/getRandomIntInRange/index.ts":(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var r=e("./src/utills/getRandomIntInRange/getRandomIntInRange.ts");const n=r.default},"./src/utills/index.ts":(s,t,e)=>{e.r(t),e.d(t,{classNames:()=>d.default,getPrizeAdditionalOffset:()=>l.default,getPrizeOffset:()=>r.default,getRandomIntInRange:()=>n.default});var r=e("./src/utills/getPrizeOffset/index.ts"),n=e("./src/utills/getRandomIntInRange/index.ts"),l=e("./src/utills/getPrizeAdditionalOffset/index.ts"),d=e("./src/utills/classNames/index.ts")},react:s=>{s.exports=V}},y={};function h(s){var t=y[s];if(t!==void 0)return t.exports;var e=y[s]={exports:{}};return $[s](e,e.exports,h),e.exports}h.n=s=>{var t=s&&s.__esModule?()=>s.default:()=>s;return h.d(t,{a:t}),t},h.d=(s,t)=>{for(var e in t)h.o(t,e)&&!h.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:t[e]})},h.o=(s,t)=>Object.prototype.hasOwnProperty.call(s,t),h.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var S={};return(()=>{/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/h.r(S),h.d(S,{default:()=>t});var s=h("./src/components/Roulette/index.ts");const t=s.default})(),S})())}(k)),k.exports}var Ne=Ke();const Fe=Me(Ne);function Se({rouletteIndex:q,prizes:ee,callback:V,name:$,color:y}){if(ee.length===0)throw new Error("Prizes is empty");const[h,S]=F.useState(!1),s=F.useRef(null),t=F.useRef(null),[e,r]=F.useState(!1),[n]=F.useState(y||ye()),[l,d]=F.useState({width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center",alignSelf:"center",animationDuration:"2.2s"});return M.jsxs("div",{ref:s,className:" "+b.animated+" "+b.fadeIn,onAnimationEnd:()=>{S(!0),r(!0)},style:l,children:[M.jsxs("div",{ref:t,className:he["smooth-box"],style:{width:"100%",margin:"0 auto",height:"100%",alignSelf:"center",position:"relative"},children:[e&&M.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"4px",height:`${t.current.offsetHeight}px`,background:"orange",zIndex:10,transform:"translate(-50%, -50%)",visibility:e?"visible":"hidden"}}),M.jsx(Fe,{start:h,prizes:ee,prizeIndex:q,spinningTime:20,type:"horizontal",classes:{},options:{withoutAnimation:!0},defaultDesignOptions:{prizesWithText:!0,hideCenterDelimiter:!0},onPrizeDefined:()=>{r(!1);const u=s.current;u.onanimationend=()=>{V()},d(i=>({...i,animationDuration:"1.5s"})),u.className=" "+b.animated+" "+b.fadeOut}})]}),M.jsxs("div",{className:he["roulette-name-text"],children:[M.jsx("span",{children:"рулетка"}),M.jsx("span",{children:"для"}),M.jsx("span",{style:{color:n},children:$})]})]})}Se.__docgenInfo={description:"",methods:[],displayName:"WaifuRoulette",props:{rouletteIndex:{required:!0,tsType:{name:"number"},description:""},prizes:{required:!0,tsType:{name:"Array",elements:[{name:"PrizeType"}],raw:"PrizeType[]"},description:""},callback:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},name:{required:!0,tsType:{name:"string"},description:""},color:{required:!1,tsType:{name:"string"},description:""}}};export{Se as W,he as s};
