import{r as c,e as x,j as t}from"./iframe-BjL-cKrh.js";import{u as M}from"./useSiteColors-C4fCSJVZ.js";import{u as P,a as I,b as A,C as v,F as _}from"./scoreboardStore-SHNMYMIe.js";import{E as w,a as N}from"./eye-DK0hHhBl.js";import{P as m,B as b}from"./Button-FnY6RG2Q.js";var B=["color","size","title","className"];function y(){return y=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},y.apply(null,arguments)}function L(e,n){if(e==null)return{};var a,r,o=R(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],n.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}function R(e,n){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var S=c.forwardRef(function(e,n){var a=e.color,r=a===void 0?"currentColor":a,o=e.size,i=o===void 0?"1em":o,d=e.title,f=d===void 0?null:d,u=e.className,g=u===void 0?"":u,p=L(e,B);return x.createElement("svg",y({ref:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:r,className:["bi","bi-clock",g].filter(Boolean).join(" ")},p),f?x.createElement("title",null,f):null,x.createElement("path",{d:"M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z"}),x.createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0"}))});S.propTypes={color:m.string,size:m.oneOfType([m.string,m.number]),title:m.string,className:m.string};const U=()=>{const e=M(),n=P(),a=I(),{setVisibility:r,setAnimationDuration:o}=A(),[i,d]=c.useState(!1),[f,u]=c.useState(!1),[g]=c.useState(Date.now()),[p,C]=c.useState(Date.now()),[j,z]=c.useState(Date.now());c.useEffect(()=>{const s=setInterval(()=>{z(Date.now())},1e3);return()=>clearInterval(s)},[]),c.useEffect(()=>{C(Date.now())},[n]);const T=()=>{const s=!n;i||(s?(d(!0),u(!0),r(s),setTimeout(()=>{d(!1),u(!1)},a)):(d(!0),u(!1),r(s),setTimeout(()=>{d(!1)},100)))},k=s=>{const l=parseInt(s.target.value);!isNaN(l)&&l>=100&&l<=99999&&o(l)},O=()=>{const s=Math.min(a+500,1e4);o(s)},V=()=>{const s=Math.max(a-500,100);o(s)},$=()=>{const s=Math.floor((j-g)/1e3),l=Math.floor(s/3600),h=Math.floor(s%3600/60),E=s%60;return`${l.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}:${E.toString().padStart(2,"0")}`},D=()=>{const s=Math.floor((j-p)/1e3);if(s<60)return`${s}с назад`;if(s<3600)return`${Math.floor(s/60)}м ${s%60}с назад`;{const l=Math.floor(s/3600),h=Math.floor(s%3600/60);return`${l}ч ${h}м назад`}};return t.jsx(v,{className:"shadow-lg p-3 mb-4",style:{backgroundColor:e.background.card,borderRadius:18,border:`2px solid ${e.border.accent}`,height:"100%"},children:t.jsxs(v.Body,{className:"d-flex flex-column h-100",children:[t.jsxs("div",{className:"d-flex flex-column align-items-center mb-3 gap-2 text-center",children:[n?t.jsx(w,{color:e.text.accent,size:20}):t.jsx(N,{color:e.text.accent,size:20}),t.jsx("span",{className:"fw-bold text-uppercase",style:{color:e.text.accent,letterSpacing:1,fontSize:14},children:"Visibility Panel"})]}),t.jsxs("div",{className:"d-flex flex-column gap-3 flex-grow-1",children:[t.jsx(b,{variant:n?"success":"danger",size:"lg",className:"fw-bold py-3",onClick:T,disabled:i,style:{backgroundColor:n?e.background.success:e.background.danger,borderColor:n?e.border.success:e.border.danger,color:e.text.light,fontSize:16,letterSpacing:1},children:i?t.jsxs("div",{className:"d-flex align-items-center gap-2",children:[t.jsx("div",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),f?"Показываем...":"Скрываем..."]}):n?t.jsxs("div",{className:"d-flex align-items-center gap-2",children:[t.jsx(w,{}),"СКРЫТЬ"]}):t.jsxs("div",{className:"d-flex align-items-center gap-2",children:[t.jsx(N,{}),"ПОКАЗАТЬ"]})}),t.jsxs("div",{className:"d-flex flex-column gap-2",children:[t.jsxs("div",{className:"d-flex align-items-center gap-2",children:[t.jsx(S,{color:e.text.secondary,size:16}),t.jsxs("span",{className:"fw-bold",style:{fontSize:12,color:e.text.secondary},children:["Время анимации: ",a,"мс"]})]}),t.jsxs("div",{className:"d-flex align-items-center gap-2",children:[t.jsx(b,{variant:"outline-secondary",size:"sm",onClick:V,style:{backgroundColor:e.background.card,borderColor:e.border.secondary,color:e.text.secondary},children:"-"}),t.jsx(_.Range,{min:"100",max:"10000",step:"100",value:a,onChange:k,className:"flex-grow-1",style:{accentColor:e.text.accent}}),t.jsx(b,{variant:"outline-secondary",size:"sm",onClick:O,style:{backgroundColor:e.background.card,borderColor:e.border.secondary,color:e.text.secondary},children:"+"})]})]}),t.jsxs("div",{className:"d-flex flex-column gap-1 mt-auto",children:[t.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[t.jsx("span",{className:"fw-bold",style:{fontSize:11,color:e.text.secondary},children:"Страница открыта:"}),t.jsx("span",{className:"fw-bold",style:{fontSize:11,color:e.text.accent},children:$()})]}),t.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[t.jsx("span",{className:"fw-bold",style:{fontSize:11,color:e.text.secondary},children:"Последнее обновление:"}),t.jsx("span",{className:"fw-bold",style:{fontSize:11,color:e.text.accent},children:D()})]})]})]})]})})};U.__docgenInfo={description:"",methods:[],displayName:"VisibilityCard"};export{U as V};
