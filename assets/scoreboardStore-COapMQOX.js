import{c as u,u as m,b as le,d as ce,P as N}from"./Button-3c3iSS8m.js";import{r as l,j as c}from"./iframe-gjcH4K4g.js";import{S as I}from"./SignalRHubWrapper-CWQjSTaf.js";import{H as ie}from"./index-DvKbMQdh.js";import{c as de}from"./react-BN_IyKAS.js";const E=a=>l.forwardRef((e,o)=>c.jsx("div",{...e,ref:o,className:u(e.className,a)})),g=l.forwardRef(({className:a,bsPrefix:e,as:o="div",...r},t)=>(e=m(e,"card-body"),c.jsx(o,{ref:t,className:u(a,e),...r})));g.displayName="CardBody";const M=l.forwardRef(({className:a,bsPrefix:e,as:o="div",...r},t)=>(e=m(e,"card-footer"),c.jsx(o,{ref:t,className:u(a,e),...r})));M.displayName="CardFooter";const V=l.createContext(null);V.displayName="CardHeaderContext";const B=l.forwardRef(({bsPrefix:a,className:e,as:o="div",...r},t)=>{const n=m(a,"card-header"),s=l.useMemo(()=>({cardHeaderBsPrefix:n}),[n]);return c.jsx(V.Provider,{value:s,children:c.jsx(o,{ref:t,...r,className:u(e,n)})})});B.displayName="CardHeader";const H=l.forwardRef(({bsPrefix:a,className:e,variant:o,as:r="img",...t},n)=>{const s=m(a,"card-img");return c.jsx(r,{ref:n,className:u(o?`${s}-${o}`:s,e),...t})});H.displayName="CardImg";const b=l.forwardRef(({className:a,bsPrefix:e,as:o="div",...r},t)=>(e=m(e,"card-img-overlay"),c.jsx(o,{ref:t,className:u(a,e),...r})));b.displayName="CardImgOverlay";const O=l.forwardRef(({className:a,bsPrefix:e,as:o="a",...r},t)=>(e=m(e,"card-link"),c.jsx(o,{ref:t,className:u(a,e),...r})));O.displayName="CardLink";const ue=E("h6"),U=l.forwardRef(({className:a,bsPrefix:e,as:o=ue,...r},t)=>(e=m(e,"card-subtitle"),c.jsx(o,{ref:t,className:u(a,e),...r})));U.displayName="CardSubtitle";const G=l.forwardRef(({className:a,bsPrefix:e,as:o="p",...r},t)=>(e=m(e,"card-text"),c.jsx(o,{ref:t,className:u(a,e),...r})));G.displayName="CardText";const me=E("h5"),z=l.forwardRef(({className:a,bsPrefix:e,as:o=me,...r},t)=>(e=m(e,"card-title"),c.jsx(o,{ref:t,className:u(a,e),...r})));z.displayName="CardTitle";const W=l.forwardRef(({bsPrefix:a,className:e,bg:o,text:r,border:t,body:n=!1,children:s,as:i="div",...p},d)=>{const y=m(a,"card");return c.jsx(i,{ref:d,...p,className:u(e,y,o&&`bg-${o}`,r&&`text-${r}`,t&&`border-${t}`),children:n?c.jsx(g,{children:s}):s})});W.displayName="Card";const $e=Object.assign(W,{Img:H,Title:z,Subtitle:U,Body:g,Link:O,Text:G,Header:B,Footer:M,ImgOverlay:b});function pe(a,e){return l.Children.toArray(a).some(o=>l.isValidElement(o)&&o.type===e)}function fe({as:a,bsPrefix:e,className:o,...r}){e=m(e,"col");const t=le(),n=ce(),s=[],i=[];return t.forEach(p=>{const d=r[p];delete r[p];let y,v,h;typeof d=="object"&&d!=null?{span:y,offset:v,order:h}=d:y=d;const S=p!==n?`-${p}`:"";y&&s.push(y===!0?`${e}${S}`:`${e}${S}-${y}`),h!=null&&i.push(`order${S}-${h}`),v!=null&&i.push(`offset${S}-${v}`)}),[{...r,className:u(o,...s,...i)},{as:a,bsPrefix:e,spans:s}]}const q=l.forwardRef((a,e)=>{const[{className:o,...r},{as:t="div",bsPrefix:n,spans:s}]=fe(a);return c.jsx(t,{...r,ref:e,className:u(o,!s.length&&n)})});q.displayName="Col";const ye={type:N.string,tooltip:N.bool,as:N.elementType},j=l.forwardRef(({as:a="div",className:e,type:o="valid",tooltip:r=!1,...t},n)=>c.jsx(a,{...t,ref:n,className:u(e,`${o}-${r?"tooltip":"feedback"}`)}));j.displayName="Feedback";j.propTypes=ye;const C=l.createContext({}),T=l.forwardRef(({id:a,bsPrefix:e,className:o,type:r="checkbox",isValid:t=!1,isInvalid:n=!1,as:s="input",...i},p)=>{const{controlId:d}=l.useContext(C);return e=m(e,"form-check-input"),c.jsx(s,{...i,ref:p,type:r,id:a||d,className:u(o,e,t&&"is-valid",n&&"is-invalid")})});T.displayName="FormCheckInput";const F=l.forwardRef(({bsPrefix:a,className:e,htmlFor:o,...r},t)=>{const{controlId:n}=l.useContext(C);return a=m(a,"form-check-label"),c.jsx("label",{...r,ref:t,htmlFor:o||n,className:u(e,a)})});F.displayName="FormCheckLabel";const J=l.forwardRef(({id:a,bsPrefix:e,bsSwitchPrefix:o,inline:r=!1,reverse:t=!1,disabled:n=!1,isValid:s=!1,isInvalid:i=!1,feedbackTooltip:p=!1,feedback:d,feedbackType:y,className:v,style:h,title:S="",type:R="checkbox",label:_,children:$,as:te="input",...oe},re)=>{e=m(e,"form-check"),o=m(o,"form-switch");const{controlId:k}=l.useContext(C),se=l.useMemo(()=>({controlId:a||k}),[k,a]),D=!$&&_!=null&&_!==!1||pe($,F),ne=c.jsx(T,{...oe,type:R==="switch"?"checkbox":R,ref:re,isValid:s,isInvalid:i,disabled:n,as:te});return c.jsx(C.Provider,{value:se,children:c.jsx("div",{style:h,className:u(v,D&&e,r&&`${e}-inline`,t&&`${e}-reverse`,R==="switch"&&o),children:$||c.jsxs(c.Fragment,{children:[ne,D&&c.jsx(F,{title:S,children:_}),d&&c.jsx(j,{type:y,tooltip:p,children:d})]})})})});J.displayName="FormCheck";const w=Object.assign(J,{Input:T,Label:F}),K=l.forwardRef(({bsPrefix:a,type:e,size:o,htmlSize:r,id:t,className:n,isValid:s=!1,isInvalid:i=!1,plaintext:p,readOnly:d,as:y="input",...v},h)=>{const{controlId:S}=l.useContext(C);return a=m(a,"form-control"),c.jsx(y,{...v,type:e,size:r,ref:h,readOnly:d,id:t||S,className:u(n,p?`${a}-plaintext`:a,o&&`${a}-${o}`,e==="color"&&`${a}-color`,s&&"is-valid",i&&"is-invalid")})});K.displayName="FormControl";const ve=Object.assign(K,{Feedback:j}),Q=l.forwardRef(({className:a,bsPrefix:e,as:o="div",...r},t)=>(e=m(e,"form-floating"),c.jsx(o,{ref:t,className:u(a,e),...r})));Q.displayName="FormFloating";const x=l.forwardRef(({controlId:a,as:e="div",...o},r)=>{const t=l.useMemo(()=>({controlId:a}),[a]);return c.jsx(C.Provider,{value:t,children:c.jsx(e,{...o,ref:r})})});x.displayName="FormGroup";const X=l.forwardRef(({as:a="label",bsPrefix:e,column:o=!1,visuallyHidden:r=!1,className:t,htmlFor:n,...s},i)=>{const{controlId:p}=l.useContext(C);e=m(e,"form-label");let d="col-form-label";typeof o=="string"&&(d=`${d} ${d}-${o}`);const y=u(t,e,r&&"visually-hidden",o&&d);return n=n||p,o?c.jsx(q,{ref:i,as:"label",className:y,htmlFor:n,...s}):c.jsx(a,{ref:i,className:y,htmlFor:n,...s})});X.displayName="FormLabel";const Y=l.forwardRef(({bsPrefix:a,className:e,id:o,...r},t)=>{const{controlId:n}=l.useContext(C);return a=m(a,"form-range"),c.jsx("input",{...r,type:"range",ref:t,className:u(e,a),id:o||n})});Y.displayName="FormRange";const Z=l.forwardRef(({bsPrefix:a,size:e,htmlSize:o,className:r,isValid:t=!1,isInvalid:n=!1,id:s,...i},p)=>{const{controlId:d}=l.useContext(C);return a=m(a,"form-select"),c.jsx("select",{...i,size:o,ref:p,className:u(r,a,e&&`${a}-${e}`,t&&"is-valid",n&&"is-invalid"),id:s||d})});Z.displayName="FormSelect";const P=l.forwardRef(({bsPrefix:a,className:e,as:o="small",muted:r,...t},n)=>(a=m(a,"form-text"),c.jsx(o,{...t,ref:n,className:u(e,a,r&&"text-muted")})));P.displayName="FormText";const ee=l.forwardRef((a,e)=>c.jsx(w,{...a,ref:e,type:"switch"}));ee.displayName="Switch";const Ce=Object.assign(ee,{Input:w.Input,Label:w.Label}),ae=l.forwardRef(({bsPrefix:a,className:e,children:o,controlId:r,label:t,...n},s)=>(a=m(a,"form-floating"),c.jsxs(x,{ref:s,className:u(e,a),controlId:r,...n,children:[o,c.jsx("label",{htmlFor:r,children:t})]})));ae.displayName="FloatingLabel";const Se={_ref:N.any,validated:N.bool,as:N.elementType},L=l.forwardRef(({className:a,validated:e,as:o="form",...r},t)=>c.jsx(o,{...r,ref:t,className:u(a,e&&"was-validated")}));L.displayName="Form";L.propTypes=Se;const ge=Object.assign(L,{Group:x,Control:ve,Floating:Q,Check:w,Switch:Ce,Label:X,Text:P,Range:Y,Select:Z,FloatingLabel:ae}),he={name:"Default",mainColor:"#3F00FF",playerNamesColor:"#ffffff",tournamentTitleColor:"#3F00FF",fightModeColor:"#3F00FF",scoreColor:"#ffffff",backgroundColor:"#23272f",borderColor:"#3F00FF"},Ne={headerTop:16,headerLeft:50,playersTop:0,playersLeft:0,playersRight:0,headerHeight:60,headerWidth:400,playerBarHeight:80,playerBarWidth:500,scoreSize:60,flagSize:24,spacing:16,padding:16,showHeader:!0,showFlags:!0,showSponsors:!0,showTags:!0},A={_connection:I.build(),player1:{name:"Daigo Umehara",sponsor:"Red Bull",score:2,tag:"The Beast",flag:"jp",final:"none",_lastEdit:0,_receivedAt:0},player2:{name:"Tokido",sponsor:"Mad Catz",score:1,tag:"Murder Face",flag:"jp",final:"none",_lastEdit:0,_receivedAt:0},meta:{title:"Street Fighter 6",fightRule:"Grand Finals",_lastEdit:0,_receivedAt:0},color:he,layout:Ne,isVisible:!0,animationDuration:800},f=de((a,e)=>{const o=I.build(),r=t=>{e().handleReceiveState(t),o.off("ReceiveState",r)};return o.on("ReceiveState",r),o.start().catch(t=>{console.error("Error starting SignalR connection:",t)}),{...A,_connection:o,setPlayer1:t=>{const s={...e().player1,...t,_lastEdit:Date.now()};a({player1:s});const i=e()._createServerState(s);e()._sendToServer("UpdateState",i)},setPlayer2:t=>{const s={...e().player2,...t,_lastEdit:Date.now()};a({player2:s});const i=e()._createServerState(void 0,s);e()._sendToServer("UpdateState",i)},swapPlayers:()=>{const{player1:t,player2:n}=e(),s=Date.now(),i={...n,_lastEdit:s},p={...t,_lastEdit:s};a({player1:i,player2:p});const d=e()._createServerState(i,p);e()._sendToServer("UpdateState",d)},setMeta:t=>{const s={...e().meta,...t,_lastEdit:Date.now()};a({meta:s});const i=e()._createServerState(void 0,void 0,s);e()._sendToServer("UpdateState",i)},setColor:t=>{const s={...e().color,...t,_lastEdit:Date.now()};a({color:s});const i=e()._createServerState(void 0,void 0,void 0,s);e()._sendToServer("UpdateState",i)},handleColorChange:t=>{e().setColor(t)},setLayout:t=>{const s={...e().layout,...t};a({layout:s});const i=e()._createServerState(void 0,void 0,void 0,void 0,s);e()._sendToServer("UpdateState",i)},setVisibility:t=>{a({isVisible:t}),e()._sendToServer("SetVisibility",t)},setAnimationDuration:t=>{a({animationDuration:t});const n=e()._createServerState(void 0,void 0,void 0,void 0,void 0,void 0,t);e()._sendToServer("UpdateState",n)},reset:()=>{a(A);const t=e()._createServerState();e()._sendToServer("UpdateState",t)},handleReceiveState:t=>{t.player1&&a({player1:{...t.player1,_receivedAt:Date.now()}}),t.player2&&a({player2:{...t.player2,_receivedAt:Date.now()}}),t.meta&&a({meta:{...t.meta,_receivedAt:Date.now()}}),t.color&&a({color:{...t.color,_lastEdit:Date.now()}}),t.layout&&a({layout:t.layout}),typeof t.isVisible=="boolean"&&a({isVisible:t.isVisible}),t.animationDuration&&a({animationDuration:t.animationDuration})},_sendToServer:(t,n)=>{try{const s=e()._connection;return!s||s.state!==ie.Connected?(console.log("SignalR connection not available, using local state only"),!0):(console.log(`Sending ${t}:`,n),s.invoke(t,n),console.log(`Successfully sent ${t}`),!0)}catch(s){return console.error(`Error sending ${t}:`,s),!1}},_createServerState:(t,n,s,i,p,d,y)=>{const v=e();return{player1:t||v.player1,player2:n||v.player2,meta:s||v.meta,colors:i||v.color,layout:p||v.layout,isVisible:d!==void 0?d:v.isVisible,animationDuration:y||v.animationDuration}}}}),Te=()=>f(a=>a.player1),xe=()=>f(a=>a.player2),Le=()=>f(a=>a.meta),ke=()=>f(a=>a.color),De=()=>f(a=>a.layout),Ae=()=>f(a=>a.isVisible),Ie=()=>f(a=>a.animationDuration),Ee=()=>{const a=f(r=>r.setPlayer1),e=f(r=>r.setPlayer2),o=f(r=>r.swapPlayers);return{setPlayer1:a,setPlayer2:e,swapPlayers:o}},Me=()=>({setMeta:f(e=>e.setMeta)}),Ve=()=>{const a=f(o=>o.setColor),e=f(o=>o.handleColorChange);return{setColor:a,handleColorChange:e}},Be=()=>({setLayout:f(e=>e.setLayout)}),He=()=>{const a=f(o=>o.setVisibility),e=f(o=>o.setAnimationDuration);return{setVisibility:a,setAnimationDuration:e}},be=()=>{const a=f(o=>o.reset),e=f(o=>o.handleReceiveState);return{reset:a,handleReceiveState:e}};export{$e as C,ge as F,Ie as a,He as b,Ne as c,he as d,f as e,Le as f,Me as g,ke as h,Ve as i,q as j,De as k,Be as l,Ee as m,be as n,Te as o,xe as p,Ae as u};
