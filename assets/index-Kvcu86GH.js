import{a as of,g as Ii,r as Pi,j as lt,c as ux,b as cx,e as Ld}from"./iframe-ewsJ7F1S.js";import{l as Nd}from"./index-BmQsvoyR.js";import{S as dx,v as $i}from"./v4-BMV8v22Z.js";var Gi={},dr={},wo={},kt={},Mt={},ou={},Fd;function lf(){return Fd||(Fd=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Doctype=n.CDATA=n.Tag=n.Style=n.Script=n.Comment=n.Directive=n.Text=n.Root=n.isTag=n.ElementType=void 0;var e;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(e=n.ElementType||(n.ElementType={}));function t(r){return r.type===e.Tag||r.type===e.Script||r.type===e.Style}n.isTag=t,n.Root=e.Root,n.Text=e.Text,n.Directive=e.Directive,n.Comment=e.Comment,n.Script=e.Script,n.Style=e.Style,n.Tag=e.Tag,n.CDATA=e.CDATA,n.Doctype=e.Doctype}(ou)),ou}var le={},$d;function Gd(){if($d)return le;$d=1;var n=le&&le.__extends||function(){var _=function(x,H){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,$){q.__proto__=$}||function(q,$){for(var se in $)Object.prototype.hasOwnProperty.call($,se)&&(q[se]=$[se])},_(x,H)};return function(x,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");_(x,H);function q(){this.constructor=x}x.prototype=H===null?Object.create(H):(q.prototype=H.prototype,new q)}}(),e=le&&le.__assign||function(){return e=Object.assign||function(_){for(var x,H=1,q=arguments.length;H<q;H++){x=arguments[H];for(var $ in x)Object.prototype.hasOwnProperty.call(x,$)&&(_[$]=x[$])}return _},e.apply(this,arguments)};Object.defineProperty(le,"__esModule",{value:!0}),le.cloneNode=le.hasChildren=le.isDocument=le.isDirective=le.isComment=le.isText=le.isCDATA=le.isTag=le.Element=le.Document=le.CDATA=le.NodeWithChildren=le.ProcessingInstruction=le.Comment=le.Text=le.DataNode=le.Node=void 0;var t=lf(),r=function(){function _(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(_.prototype,"parentNode",{get:function(){return this.parent},set:function(x){this.parent=x},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"previousSibling",{get:function(){return this.prev},set:function(x){this.prev=x},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"nextSibling",{get:function(){return this.next},set:function(x){this.next=x},enumerable:!1,configurable:!0}),_.prototype.cloneNode=function(x){return x===void 0&&(x=!1),R(this,x)},_}();le.Node=r;var i=function(_){n(x,_);function x(H){var q=_.call(this)||this;return q.data=H,q}return Object.defineProperty(x.prototype,"nodeValue",{get:function(){return this.data},set:function(H){this.data=H},enumerable:!1,configurable:!0}),x}(r);le.DataNode=i;var a=function(_){n(x,_);function x(){var H=_!==null&&_.apply(this,arguments)||this;return H.type=t.ElementType.Text,H}return Object.defineProperty(x.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),x}(i);le.Text=a;var s=function(_){n(x,_);function x(){var H=_!==null&&_.apply(this,arguments)||this;return H.type=t.ElementType.Comment,H}return Object.defineProperty(x.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),x}(i);le.Comment=s;var o=function(_){n(x,_);function x(H,q){var $=_.call(this,q)||this;return $.name=H,$.type=t.ElementType.Directive,$}return Object.defineProperty(x.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),x}(i);le.ProcessingInstruction=o;var u=function(_){n(x,_);function x(H){var q=_.call(this)||this;return q.children=H,q}return Object.defineProperty(x.prototype,"firstChild",{get:function(){var H;return(H=this.children[0])!==null&&H!==void 0?H:null},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"childNodes",{get:function(){return this.children},set:function(H){this.children=H},enumerable:!1,configurable:!0}),x}(r);le.NodeWithChildren=u;var h=function(_){n(x,_);function x(){var H=_!==null&&_.apply(this,arguments)||this;return H.type=t.ElementType.CDATA,H}return Object.defineProperty(x.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),x}(u);le.CDATA=h;var m=function(_){n(x,_);function x(){var H=_!==null&&_.apply(this,arguments)||this;return H.type=t.ElementType.Root,H}return Object.defineProperty(x.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),x}(u);le.Document=m;var w=function(_){n(x,_);function x(H,q,$,se){$===void 0&&($=[]),se===void 0&&(se=H==="script"?t.ElementType.Script:H==="style"?t.ElementType.Style:t.ElementType.Tag);var z=_.call(this,$)||this;return z.name=H,z.attribs=q,z.type=se,z}return Object.defineProperty(x.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"tagName",{get:function(){return this.name},set:function(H){this.name=H},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"attributes",{get:function(){var H=this;return Object.keys(this.attribs).map(function(q){var $,se;return{name:q,value:H.attribs[q],namespace:($=H["x-attribsNamespace"])===null||$===void 0?void 0:$[q],prefix:(se=H["x-attribsPrefix"])===null||se===void 0?void 0:se[q]}})},enumerable:!1,configurable:!0}),x}(u);le.Element=w;function y(_){return(0,t.isTag)(_)}le.isTag=y;function g(_){return _.type===t.ElementType.CDATA}le.isCDATA=g;function p(_){return _.type===t.ElementType.Text}le.isText=p;function l(_){return _.type===t.ElementType.Comment}le.isComment=l;function d(_){return _.type===t.ElementType.Directive}le.isDirective=d;function v(_){return _.type===t.ElementType.Root}le.isDocument=v;function C(_){return Object.prototype.hasOwnProperty.call(_,"children")}le.hasChildren=C;function R(_,x){x===void 0&&(x=!1);var H;if(p(_))H=new a(_.data);else if(l(_))H=new s(_.data);else if(y(_)){var q=x?P(_.children):[],$=new w(_.name,e({},_.attribs),q);q.forEach(function(ae){return ae.parent=$}),_.namespace!=null&&($.namespace=_.namespace),_["x-attribsNamespace"]&&($["x-attribsNamespace"]=e({},_["x-attribsNamespace"])),_["x-attribsPrefix"]&&($["x-attribsPrefix"]=e({},_["x-attribsPrefix"])),H=$}else if(g(_)){var q=x?P(_.children):[],se=new h(q);q.forEach(function(D){return D.parent=se}),H=se}else if(v(_)){var q=x?P(_.children):[],z=new m(q);q.forEach(function(D){return D.parent=z}),_["x-mode"]&&(z["x-mode"]=_["x-mode"]),H=z}else if(d(_)){var Me=new o(_.name,_.data);_["x-name"]!=null&&(Me["x-name"]=_["x-name"],Me["x-publicId"]=_["x-publicId"],Me["x-systemId"]=_["x-systemId"]),H=Me}else throw new Error("Not implemented yet: ".concat(_.type));return H.startIndex=_.startIndex,H.endIndex=_.endIndex,_.sourceCodeLocation!=null&&(H.sourceCodeLocation=_.sourceCodeLocation),H}le.cloneNode=R;function P(_){for(var x=_.map(function(q){return R(q,!0)}),H=1;H<x.length;H++)x[H].prev=x[H-1],x[H-1].next=x[H];return x}return le}var Qd;function uf(){return Qd||(Qd=1,function(n){var e=Mt&&Mt.__createBinding||(Object.create?function(o,u,h,m){m===void 0&&(m=h);var w=Object.getOwnPropertyDescriptor(u,h);(!w||("get"in w?!u.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return u[h]}}),Object.defineProperty(o,m,w)}:function(o,u,h,m){m===void 0&&(m=h),o[m]=u[h]}),t=Mt&&Mt.__exportStar||function(o,u){for(var h in o)h!=="default"&&!Object.prototype.hasOwnProperty.call(u,h)&&e(u,o,h)};Object.defineProperty(n,"__esModule",{value:!0}),n.DomHandler=void 0;var r=lf(),i=Gd();t(Gd(),n);var a={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},s=function(){function o(u,h,m){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof h=="function"&&(m=h,h=a),typeof u=="object"&&(h=u,u=void 0),this.callback=u??null,this.options=h??a,this.elementCB=m??null}return o.prototype.onparserinit=function(u){this.parser=u},o.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(u){this.handleCallback(u)},o.prototype.onclosetag=function(){this.lastNode=null;var u=this.tagStack.pop();this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(u)},o.prototype.onopentag=function(u,h){var m=this.options.xmlMode?r.ElementType.Tag:void 0,w=new i.Element(u,h,void 0,m);this.addNode(w),this.tagStack.push(w)},o.prototype.ontext=function(u){var h=this.lastNode;if(h&&h.type===r.ElementType.Text)h.data+=u,this.options.withEndIndices&&(h.endIndex=this.parser.endIndex);else{var m=new i.Text(u);this.addNode(m),this.lastNode=m}},o.prototype.oncomment=function(u){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=u;return}var h=new i.Comment(u);this.addNode(h),this.lastNode=h},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var u=new i.Text(""),h=new i.CDATA([u]);this.addNode(h),u.parent=h,this.lastNode=u},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(u,h){var m=new i.ProcessingInstruction(u,h);this.addNode(m)},o.prototype.handleCallback=function(u){if(typeof this.callback=="function")this.callback(u,this.dom);else if(u)throw u},o.prototype.addNode=function(u){var h=this.tagStack[this.tagStack.length-1],m=h.children[h.children.length-1];this.options.withStartIndices&&(u.startIndex=this.parser.startIndex),this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),h.children.push(u),m&&(u.prev=m,m.next=u),u.parent=h,this.lastNode=null},o}();n.DomHandler=s,n.default=s}(Mt)),Mt}var lu={},Wd;function hx(){return Wd||(Wd=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CARRIAGE_RETURN_PLACEHOLDER_REGEX=n.CARRIAGE_RETURN_PLACEHOLDER=n.CARRIAGE_RETURN_REGEX=n.CARRIAGE_RETURN=n.CASE_SENSITIVE_TAG_NAMES_MAP=n.CASE_SENSITIVE_TAG_NAMES=void 0,n.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],n.CASE_SENSITIVE_TAG_NAMES_MAP=n.CASE_SENSITIVE_TAG_NAMES.reduce(function(e,t){return e[t.toLowerCase()]=t,e},{}),n.CARRIAGE_RETURN="\r",n.CARRIAGE_RETURN_REGEX=new RegExp(n.CARRIAGE_RETURN,"g"),n.CARRIAGE_RETURN_PLACEHOLDER="__HTML_DOM_PARSER_CARRIAGE_RETURN_PLACEHOLDER_".concat(Date.now(),"__"),n.CARRIAGE_RETURN_PLACEHOLDER_REGEX=new RegExp(n.CARRIAGE_RETURN_PLACEHOLDER,"g")}(lu)),lu}var Vd;function cf(){if(Vd)return kt;Vd=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.formatAttributes=r,kt.escapeSpecialCharacters=a,kt.revertEscapedCharacters=s,kt.formatDOM=o;var n=uf(),e=hx();function t(u){return e.CASE_SENSITIVE_TAG_NAMES_MAP[u]}function r(u){for(var h={},m=0,w=u.length;m<w;m++){var y=u[m];h[y.name]=y.value}return h}function i(u){u=u.toLowerCase();var h=t(u);return h||u}function a(u){return u.replace(e.CARRIAGE_RETURN_REGEX,e.CARRIAGE_RETURN_PLACEHOLDER)}function s(u){return u.replace(e.CARRIAGE_RETURN_PLACEHOLDER_REGEX,e.CARRIAGE_RETURN)}function o(u,h,m){h===void 0&&(h=null);for(var w=[],y,g=0,p=u.length;g<p;g++){var l=u[g];switch(l.nodeType){case 1:{var d=i(l.nodeName);y=new n.Element(d,r(l.attributes)),y.children=o(d==="template"?l.content.childNodes:l.childNodes,y);break}case 3:y=new n.Text(s(l.nodeValue));break;case 8:y=new n.Comment(l.nodeValue);break;default:continue}var v=w[g-1]||null;v&&(v.next=y),y.parent=h,y.prev=v,y.next=null,w.push(y)}return m&&(y=new n.ProcessingInstruction(m.substring(0,m.indexOf(" ")).toLowerCase(),m),y.next=w[0]||null,y.parent=h,w.unshift(y),w[1]&&(w[1].prev=w[0])),w}return kt}var zd;function px(){if(zd)return wo;zd=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.default=l;var n=cf(),e="html",t="head",r="body",i=/<([a-zA-Z]+[0-9]?)/,a=/<head[^]*>/i,s=/<body[^]*>/i,o=function(d,v){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},u=function(d,v){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},h=typeof window=="object"&&window.DOMParser;if(typeof h=="function"){var m=new h,w="text/html";u=function(d,v){return v&&(d="<".concat(v,">").concat(d,"</").concat(v,">")),m.parseFromString(d,w)},o=u}if(typeof document=="object"&&document.implementation){var y=document.implementation.createHTMLDocument();o=function(d,v){if(v){var C=y.documentElement.querySelector(v);return C&&(C.innerHTML=d),y}return y.documentElement.innerHTML=d,y}}var g=typeof document=="object"&&document.createElement("template"),p;g&&g.content&&(p=function(d){return g.innerHTML=d,g.content.childNodes});function l(d){var v,C;d=(0,n.escapeSpecialCharacters)(d);var R=d.match(i),P=R&&R[1]?R[1].toLowerCase():"";switch(P){case e:{var _=u(d);if(!a.test(d)){var x=_.querySelector(t);(v=x==null?void 0:x.parentNode)===null||v===void 0||v.removeChild(x)}if(!s.test(d)){var x=_.querySelector(r);(C=x==null?void 0:x.parentNode)===null||C===void 0||C.removeChild(x)}return _.querySelectorAll(e)}case t:case r:{var H=o(d).querySelectorAll(P);return s.test(d)&&a.test(d)?H[0].parentNode.childNodes:H}default:{if(p)return p(d);var x=o(d,r).querySelector(r);return x.childNodes}}}return wo}var Kd;function mx(){if(Kd)return dr;Kd=1;var n=dr&&dr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(dr,"__esModule",{value:!0}),dr.default=i;var e=n(px()),t=cf(),r=/<(![a-zA-Z\s]+)>/;function i(a){if(typeof a!="string")throw new TypeError("First argument must be a string");if(!a)return[];var s=a.match(r),o=s?s[1]:void 0;return(0,t.formatDOM)((0,e.default)(a),null,o)}return dr}var xo={},Ye={},Qi={},Xd;function _x(){if(Xd)return Qi;Xd=1;var n=0;Qi.SAME=n;var e=1;return Qi.CAMELCASE=e,Qi.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1},Qi}var Jd;function gx(){if(Jd)return Ye;Jd=1;const n=0,e=1,t=2,r=3,i=4,a=5,s=6;function o(_){return h.hasOwnProperty(_)?h[_]:null}function u(_,x,H,q,$,se,z){this.acceptsBooleans=x===t||x===r||x===i,this.attributeName=q,this.attributeNamespace=$,this.mustUseProperty=H,this.propertyName=_,this.type=x,this.sanitizeURL=se,this.removeEmptyString=z}const h={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach(_=>{h[_]=new u(_,n,!1,_,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([_,x])=>{h[_]=new u(_,e,!1,x,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(_=>{h[_]=new u(_,t,!1,_.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(_=>{h[_]=new u(_,t,!1,_,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(_=>{h[_]=new u(_,r,!1,_.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(_=>{h[_]=new u(_,r,!0,_,null,!1,!1)}),["capture","download"].forEach(_=>{h[_]=new u(_,i,!1,_,null,!1,!1)}),["cols","rows","size","span"].forEach(_=>{h[_]=new u(_,s,!1,_,null,!1,!1)}),["rowSpan","start"].forEach(_=>{h[_]=new u(_,a,!1,_.toLowerCase(),null,!1,!1)});const w=/[\-\:]([a-z])/g,y=_=>_[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(_=>{const x=_.replace(w,y);h[x]=new u(x,e,!1,_,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(_=>{const x=_.replace(w,y);h[x]=new u(x,e,!1,_,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(_=>{const x=_.replace(w,y);h[x]=new u(x,e,!1,_,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(_=>{h[_]=new u(_,e,!1,_.toLowerCase(),null,!1,!1)});const g="xlinkHref";h[g]=new u("xlinkHref",e,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(_=>{h[_]=new u(_,e,!1,_.toLowerCase(),null,!0,!0)});const{CAMELCASE:p,SAME:l,possibleStandardNames:d}=_x(),C=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD"+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",R=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+C+"]*$")),P=Object.keys(d).reduce((_,x)=>{const H=d[x];return H===l?_[x]=x:H===p?_[x.toLowerCase()]=x:_[x]=H,_},{});return Ye.BOOLEAN=r,Ye.BOOLEANISH_STRING=t,Ye.NUMERIC=a,Ye.OVERLOADED_BOOLEAN=i,Ye.POSITIVE_NUMERIC=s,Ye.RESERVED=n,Ye.STRING=e,Ye.getPropertyInfo=o,Ye.isCustomAttribute=R,Ye.possibleStandardNames=P,Ye}var Wi={},hr={},uu,Yd;function fx(){if(Yd)return uu;Yd=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,o=/^\s+|\s+$/g,u=`
`,h="/",m="*",w="",y="comment",g="declaration";uu=function(l,d){if(typeof l!="string")throw new TypeError("First argument must be a string");if(!l)return[];d=d||{};var v=1,C=1;function R(ae){var D=ae.match(e);D&&(v+=D.length);var L=ae.lastIndexOf(u);C=~L?ae.length-L:C+ae.length}function P(){var ae={line:v,column:C};return function(D){return D.position=new _(ae),q(),D}}function _(ae){this.start=ae,this.end={line:v,column:C},this.source=d.source}_.prototype.content=l;function x(ae){var D=new Error(d.source+":"+v+":"+C+": "+ae);if(D.reason=ae,D.filename=d.source,D.line=v,D.column=C,D.source=l,!d.silent)throw D}function H(ae){var D=ae.exec(l);if(D){var L=D[0];return R(L),l=l.slice(L.length),D}}function q(){H(t)}function $(ae){var D;for(ae=ae||[];D=se();)D!==!1&&ae.push(D);return ae}function se(){var ae=P();if(!(h!=l.charAt(0)||m!=l.charAt(1))){for(var D=2;w!=l.charAt(D)&&(m!=l.charAt(D)||h!=l.charAt(D+1));)++D;if(D+=2,w===l.charAt(D-1))return x("End of comment missing");var L=l.slice(2,D-2);return C+=2,R(L),l=l.slice(D),C+=2,ae({type:y,comment:L})}}function z(){var ae=P(),D=H(r);if(D){if(se(),!H(i))return x("property missing ':'");var L=H(a),ie=ae({type:g,property:p(D[0].replace(n,w)),value:L?p(L[0].replace(n,w)):w});return H(s),ie}}function Me(){var ae=[];$(ae);for(var D;D=z();)D!==!1&&(ae.push(D),$(ae));return ae}return q(),Me()};function p(l){return l?l.replace(o,w):w}return uu}var Zd;function yx(){if(Zd)return hr;Zd=1;var n=hr&&hr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hr,"__esModule",{value:!0}),hr.default=t;var e=n(fx());function t(r,i){var a=null;if(!r||typeof r!="string")return a;var s=(0,e.default)(r),o=typeof i=="function";return s.forEach(function(u){if(u.type==="declaration"){var h=u.property,m=u.value;o?i(h,m,u):m&&(a=a||{},a[h]=m)}}),a}return hr}var Vi={},eh;function bx(){if(eh)return Vi;eh=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(h){return!h||t.test(h)||n.test(h)},s=function(h,m){return m.toUpperCase()},o=function(h,m){return"".concat(m,"-")},u=function(h,m){return m===void 0&&(m={}),a(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(i,o):h=h.replace(r,o),h.replace(e,s))};return Vi.camelCase=u,Vi}var zi,th;function vx(){if(th)return zi;th=1;var n=zi&&zi.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=n(yx()),t=bx();function r(i,a){var s={};return!i||typeof i!="string"||(0,e.default)(i,function(o,u){o&&u&&(s[(0,t.camelCase)(o,a)]=u)}),s}return r.default=r,zi=r,zi}var rh;function df(){return rh||(rh=1,function(n){var e=Wi&&Wi.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(n,"__esModule",{value:!0}),n.returnFirstArg=n.canTextBeChildOfNode=n.ELEMENTS_WITH_NO_TEXT_CHILDREN=n.PRESERVE_CUSTOM_ATTRIBUTES=void 0,n.isCustomComponent=a,n.setStyleProp=o;var t=of(),r=e(vx()),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function a(m,w){return m.includes("-")?!i.has(m):!!(w&&typeof w.is=="string")}var s={reactCompat:!0};function o(m,w){if(typeof m=="string"){if(!m.trim()){w.style={};return}try{w.style=(0,r.default)(m,s)}catch{w.style={}}}}n.PRESERVE_CUSTOM_ATTRIBUTES=Number(t.version.split(".")[0])>=16,n.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var u=function(m){return!n.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(m.name)};n.canTextBeChildOfNode=u;var h=function(m){return m};n.returnFirstArg=h}(Wi)),Wi}var nh;function hf(){if(nh)return xo;nh=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.default=a;var n=gx(),e=df(),t=["checked","value"],r=["input","select","textarea"],i={reset:!0,submit:!0};function a(o,u){o===void 0&&(o={});var h={},m=!!(o.type&&i[o.type]);for(var w in o){var y=o[w];if((0,n.isCustomAttribute)(w)){h[w]=y;continue}var g=w.toLowerCase(),p=s(g);if(p){var l=(0,n.getPropertyInfo)(p);switch(t.includes(p)&&r.includes(u)&&!m&&(p=s("default"+g)),h[p]=y,l&&l.type){case n.BOOLEAN:h[p]=!0;break;case n.OVERLOADED_BOOLEAN:y===""&&(h[p]=!0);break}continue}e.PRESERVE_CUSTOM_ATTRIBUTES&&(h[w]=y)}return(0,e.setStyleProp)(o.style,h),h}function s(o){return n.possibleStandardNames[o]}return xo}var pr={},ih;function wx(){if(ih)return pr;ih=1;var n=pr&&pr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(pr,"__esModule",{value:!0}),pr.default=a;var e=of(),t=n(hf()),r=df(),i={cloneElement:e.cloneElement,createElement:e.createElement,isValidElement:e.isValidElement};function a(o,u){u===void 0&&(u={});for(var h=[],m=typeof u.replace=="function",w=u.transform||r.returnFirstArg,y=u.library||i,g=y.cloneElement,p=y.createElement,l=y.isValidElement,d=o.length,v=0;v<d;v++){var C=o[v];if(m){var R=u.replace(C,v);if(l(R)){d>1&&(R=g(R,{key:R.key||v})),h.push(w(R,C,v));continue}}if(C.type==="text"){var P=!C.data.trim().length;if(P&&C.parent&&!(0,r.canTextBeChildOfNode)(C.parent)||u.trim&&P)continue;h.push(w(C.data,C,v));continue}var _=C,x={};s(_)?((0,r.setStyleProp)(_.attribs.style,_.attribs),x=_.attribs):_.attribs&&(x=(0,t.default)(_.attribs,_.name));var H=void 0;switch(C.type){case"script":case"style":C.children[0]&&(x.dangerouslySetInnerHTML={__html:C.children[0].data});break;case"tag":C.name==="textarea"&&C.children[0]?x.defaultValue=C.children[0].data:C.children&&C.children.length&&(H=a(C.children,u));break;default:continue}d>1&&(x.key=v),h.push(w(p(C.name,x,H),C,v))}return h.length===1?h[0]:h}function s(o){return r.PRESERVE_CUSTOM_ATTRIBUTES&&o.type==="tag"&&(0,r.isCustomComponent)(o.name,o.attribs)}return pr}var ah;function xx(){return ah||(ah=1,function(n){var e=Gi&&Gi.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(n,"__esModule",{value:!0}),n.htmlToDOM=n.domToReact=n.attributesToProps=n.Text=n.ProcessingInstruction=n.Element=n.Comment=void 0,n.default=o;var t=e(mx());n.htmlToDOM=t.default;var r=e(hf());n.attributesToProps=r.default;var i=e(wx());n.domToReact=i.default;var a=uf();Object.defineProperty(n,"Comment",{enumerable:!0,get:function(){return a.Comment}}),Object.defineProperty(n,"Element",{enumerable:!0,get:function(){return a.Element}}),Object.defineProperty(n,"ProcessingInstruction",{enumerable:!0,get:function(){return a.ProcessingInstruction}}),Object.defineProperty(n,"Text",{enumerable:!0,get:function(){return a.Text}});var s={lowerCaseAttributeNames:!1};function o(u,h){if(typeof u!="string")throw new TypeError("First argument must be a string");return u?(0,i.default)((0,t.default)(u,(h==null?void 0:h.htmlparser2)||s),h):[]}}(Gi)),Gi}var Sx=xx();const sh=Ii(Sx),pf=sh.default||sh;var ec=function(n,e){return ec=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},ec(n,e)};function ul(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ec(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ao=function(){return Ao=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ao.apply(this,arguments)};function mf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function I(n,e,t,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var o=n.length-1;o>=0;o--)(s=n[o])&&(a=(i<3?s(a):i>3?s(e,t,a):s(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function _f(n,e){return function(t,r){e(t,r,n)}}function gf(n,e,t,r,i,a){function s(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var o=r.kind,u=o==="getter"?"get":o==="setter"?"set":"value",h=!e&&n?r.static?n:n.prototype:null,m=e||(h?Object.getOwnPropertyDescriptor(h,r.name):{}),w,y=!1,g=t.length-1;g>=0;g--){var p={};for(var l in r)p[l]=l==="access"?{}:r[l];for(var l in r.access)p.access[l]=r.access[l];p.addInitializer=function(v){if(y)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(v||null))};var d=(0,t[g])(o==="accessor"?{get:m.get,set:m.set}:m[u],p);if(o==="accessor"){if(d===void 0)continue;if(d===null||typeof d!="object")throw new TypeError("Object expected");(w=s(d.get))&&(m.get=w),(w=s(d.set))&&(m.set=w),(w=s(d.init))&&i.unshift(w)}else(w=s(d))&&(o==="field"?i.unshift(w):m[u]=w)}h&&Object.defineProperty(h,r.name,m),y=!0}function ff(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function yf(n){return typeof n=="symbol"?n:"".concat(n)}function bf(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function vf(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Lc(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(m){try{h(r.next(m))}catch(w){s(w)}}function u(m){try{h(r.throw(m))}catch(w){s(w)}}function h(m){m.done?a(m.value):i(m.value).then(o,u)}h((r=r.apply(n,e||[])).next())})}function cl(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(h){return function(m){return u([h,m])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(t=0)),t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(m){h=[6,m],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var dl=Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]};function wf(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&dl(e,n,t)}function Ro(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bt(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a}function xf(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Bt(arguments[e]));return n}function Sf(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function xi(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function Si(n){return this instanceof Si?(this.v=n,this):new Si(n)}function Cf(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(p){return Promise.resolve(p).then(g,w)}}function o(g,p){r[g]&&(i[g]=function(l){return new Promise(function(d,v){a.push([g,l,d,v])>1||u(g,l)})},p&&(i[g]=p(i[g])))}function u(g,p){try{h(r[g](p))}catch(l){y(a[0][3],l)}}function h(g){g.value instanceof Si?Promise.resolve(g.value.v).then(m,w):y(a[0][2],g)}function m(g){u("next",g)}function w(g){u("throw",g)}function y(g,p){g(p),a.shift(),a.length&&u(a[0][0],a[0][1])}}function Ef(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=n[i]?function(s){return(t=!t)?{value:Si(n[i](s)),done:!1}:a?a(s):s}:a}}function Hf(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Ro=="function"?Ro(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(s){return new Promise(function(o,u){s=n[a](s),i(o,u,s.done,s.value)})}}function i(a,s,o,u){Promise.resolve(u).then(function(h){a({value:h,done:o})},s)}}function Af(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var Cx=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},tc=function(n){return tc=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},tc(n)};function Rf(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=tc(n),r=0;r<t.length;r++)t[r]!=="default"&&dl(e,n,t[r]);return Cx(e,n),e}function Tf(n){return n&&n.__esModule?n:{default:n}}function If(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function Pf(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function Df(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function Bf(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var Ex=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function Of(n){function e(a){n.error=n.hasError?new Ex(a,n.error,"An error was suppressed during disposal."):a,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var a=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(a).then(i,function(s){return e(s),i()})}else r|=1}catch(s){e(s)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function Uf(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,a,s){return r?e?".jsx":".js":i&&(!a||!s)?t:i+a+"."+s.toLowerCase()+"js"}):n}const Hx={__extends:ul,__assign:Ao,__rest:mf,__decorate:I,__param:_f,__esDecorate:gf,__runInitializers:ff,__propKey:yf,__setFunctionName:bf,__metadata:vf,__awaiter:Lc,__generator:cl,__createBinding:dl,__exportStar:wf,__values:Ro,__read:Bt,__spread:xf,__spreadArrays:Sf,__spreadArray:xi,__await:Si,__asyncGenerator:Cf,__asyncDelegator:Ef,__asyncValues:Hf,__makeTemplateObject:Af,__importStar:Rf,__importDefault:Tf,__classPrivateFieldGet:If,__classPrivateFieldSet:Pf,__classPrivateFieldIn:Df,__addDisposableResource:Bf,__disposeResources:Of,__rewriteRelativeImportExtension:Uf},Ax=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Bf,get __assign(){return Ao},__asyncDelegator:Ef,__asyncGenerator:Cf,__asyncValues:Hf,__await:Si,__awaiter:Lc,__classPrivateFieldGet:If,__classPrivateFieldIn:Df,__classPrivateFieldSet:Pf,__createBinding:dl,__decorate:I,__disposeResources:Of,__esDecorate:gf,__exportStar:wf,__extends:ul,__generator:cl,__importDefault:Tf,__importStar:Rf,__makeTemplateObject:Af,__metadata:vf,__param:_f,__propKey:yf,__read:Bt,__rest:mf,__rewriteRelativeImportExtension:Uf,__runInitializers:ff,__setFunctionName:bf,__spread:xf,__spreadArray:xi,__spreadArrays:Sf,__values:Ro,default:Hx},Symbol.toStringTag,{value:"Module"})),hl=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";var St,ne;(function(n){n[n.CRITICAL=0]="CRITICAL",n[n.ERROR=1]="ERROR",n[n.WARNING=2]="WARNING",n[n.INFO=3]="INFO",n[n.DEBUG=4]="DEBUG",n[n.TRACE=7]="TRACE"})(ne||(ne={}));function Nc(n){if(typeof n=="number"){if(Object.prototype.hasOwnProperty.call(ne,n))return n;var e=Object.keys(ne).map(function(r){return parseInt(r,10)}).filter(function(r){return!isNaN(r)&&r<n});return e.length?Math.max.apply(Math,e):ne.WARNING}var t=n.replace(/\d+$/,"").toUpperCase();if(!Object.prototype.hasOwnProperty.call(ne,t))throw new Error("Unknown log level string: ".concat(n));return ne[t]}var Rx=hl?console.log.bind(console):console.debug.bind(console),qf=(St={},St[ne.CRITICAL]=console.error.bind(console),St[ne.ERROR]=console.error.bind(console),St[ne.WARNING]=console.warn.bind(console),St[ne.INFO]=console.info.bind(console),St[ne.DEBUG]=Rx.bind(console),St[ne.TRACE]=console.trace.bind(console),St);function V(n){return function(e,t){Object.defineProperty(e,t,{get:function(){},set:function(r){Object.defineProperty(this,t,{value:r,writable:!0,enumerable:n})},enumerable:n})}}function oh(n){var e;return(e=[]).concat.apply(e,xi([],Bt(n),!1))}function lh(n){return Lc(this,void 0,Promise,function(){return cl(this,function(e){switch(e.label){case 0:return typeof n!="function"?[3,2]:[4,n()];case 1:return[2,e.sent()];case 2:return[2,n]}})})}function Tx(n){return typeof n=="function"?n():n}function Ix(n){var e,t,r;return cl(this,function(i){switch(i.label){case 0:e=0,t=1,i.label=1;case 1:return e<n?[4,e]:[3,3];case 2:return i.sent(),r=Bt([t,e+t],2),e=r[0],t=r[1],[3,1];case 3:return[4,n];case 4:return i.sent(),[3,3];case 5:return[2]}})}function _s(n,e){return Object.assign.apply(Object,xi([{}],Bt(n.map(e)),!1))}function rc(n,e){Object.entries(n).forEach(function(t){var r=Bt(t,2),i=r[0],a=r[1];return e(a,i)})}function kf(n,e){if(typeof e!="function"){var t=e;e=function(r){return r[t].toString()}}return _s(n,function(r){var i;return i={},i[e(r)]=r,i})}function Mf(n){return n==null}function Je(n,e){return Mf(n)?null:e(n)}function dt(n,e){return Mf(n)?void 0:e(n)}function To(){var n,e,t=new Promise(function(r,i){n=r,e=i});return{promise:t,resolve:n,reject:e}}function Px(n,e,t){if(typeof n=="number"&&(n=n.toString()),e=e-n.length,e<=0)return n;t===void 0&&(t=" ");var r="";do(e&1)===1&&(r+=t),e>>=1,e&&(t+=t);while(e);return r+n}function er(n,e,t){var r=n.split(e);return r.length<=t?r:xi(xi([],Bt(r.slice(0,t-1)),!1),[r.slice(t-1).join(e)],!1)}var Dx={},cu,du,Io=typeof process>"u"?[]:(du=(cu=Dx.LOGGING)===null||cu===void 0?void 0:cu.split(";").map(function(n){var e=n.split("=",2),t=e[0],r=e[1];return r?[t==="default"?void 0:t.split(":"),Nc(r)]:null}).filter(function(n){return!!n}).sort(function(n,e){var t,r,i=n[0],a=e[0];return((t=a==null?void 0:a.length)!==null&&t!==void 0?t:0)-((r=i==null?void 0:i.length)!==null&&r!==void 0?r:0)}))!==null&&du!==void 0?du:[],hu=Io.findIndex(function(n){var e=n[0];return!e}),jf=void 0;hu!==-1&&(jf=Io[hu][1],Io.splice(hu));function Bx(n,e){return e.length<=n.length&&e.every(function(t,r){return t===n[r]})}function Lf(n){for(var e=n.split(":"),t=0,r=Io;t<r.length;t++){var i=r[t],a=i[0],s=i[1];if(Bx(e,a))return s}return jf}var Nf=function(){function n(e){var t=e.name,r=e.minLevel,i=e.emoji,a=i===void 0?!1:i,s=e.colors,o=e.timestamps,u=o===void 0?hl:o,h,m;this._name=t,this._minLevel=(m=(h=dt(r,function(w){return Nc(w)}))!==null&&h!==void 0?h:Lf(t))!==null&&m!==void 0?m:ne.WARNING,this._emoji=a,this._colors=s,this._timestamps=u}return n.prototype.crit=function(e){this.log(ne.CRITICAL,e)},n.prototype.error=function(e){this.log(ne.ERROR,e)},n.prototype.warn=function(e){this.log(ne.WARNING,e)},n.prototype.info=function(e){this.log(ne.INFO,e)},n.prototype.debug=function(e){this.log(ne.DEBUG,e)},n.prototype.trace=function(e){this.log(ne.TRACE,e)},n}(),Ox=function(n){ul(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.log=function(t,r){if(!(t>this._minLevel)){var i=qf[t],a="[".concat(this._name,"] ").concat(r);this._timestamps&&(a="[".concat(new Date().toISOString(),"] ").concat(r)),i(a)}},e}(Nf),Ux=function(){function n(e){var t=e.name,r=e.minLevel,i=e.custom,a;this._minLevel=(a=dt(r,function(s){return Nc(s)}))!==null&&a!==void 0?a:Lf(t),this._override=typeof i=="function"?{log:i}:i}return n.prototype.log=function(e,t){this._shouldLog(e)&&this._override.log(e,t)},n.prototype.crit=function(e){this._override.crit?this._shouldLog(ne.CRITICAL)&&this._override.crit(e):this.log(ne.CRITICAL,e)},n.prototype.error=function(e){this._override.error?this._shouldLog(ne.ERROR)&&this._override.error(e):this.log(ne.ERROR,e)},n.prototype.warn=function(e){this._override.warn?this._shouldLog(ne.WARNING)&&this._override.warn(e):this.log(ne.WARNING,e)},n.prototype.info=function(e){this._override.info?this._shouldLog(ne.INFO)&&this._override.info(e):this.log(ne.INFO,e)},n.prototype.debug=function(e){this._override.debug?this._shouldLog(ne.DEBUG)&&this._override.debug(e):this.log(ne.DEBUG,e)},n.prototype.trace=function(e){this._override.trace?this._shouldLog(ne.TRACE)&&this._override.trace(e):this.log(ne.TRACE,e)},n.prototype._shouldLog=function(e){return this._minLevel===void 0||this._minLevel>=e},n}(),Ct,Et,Ht,qx=(Ct={},Ct[ne.CRITICAL]="üõë",Ct[ne.ERROR]="‚ùå",Ct[ne.WARNING]="‚ö†Ô∏è ",Ct[ne.INFO]="‚ÑπÔ∏è ",Ct[ne.DEBUG]="üêû",Ct[ne.TRACE]="üêæ",Ct),kx={black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,blackBright:90,redBright:91,greenBright:92,yellowBright:93,blueBright:94,magentaBright:95,cyanBright:96,whiteBright:97},Mx={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBlackBright:100,bgRedBright:101,bgGreenBright:102,bgYellowBright:103,bgBlueBright:104,bgMagentaBright:105,bgCyanBright:106,bgWhiteBright:107};function pl(n,e,t){return function(r){return"\x1B[".concat(n,"m").concat(t?t(r):r,"\x1B[").concat(e,"m")}}function ct(n){return pl(kx[n],39)}function Ki(n,e){return pl(Mx[n],49,e)}var jx=(Et={},Et[ne.CRITICAL]=ct("red"),Et[ne.ERROR]=ct("redBright"),Et[ne.WARNING]=ct("yellow"),Et[ne.INFO]=ct("blue"),Et[ne.DEBUG]=ct("magenta"),Et[ne.TRACE]=pl(0,0),Et),uh=(Ht={},Ht[ne.CRITICAL]=Ki("bgRed",ct("white")),Ht[ne.ERROR]=Ki("bgRedBright",ct("white")),Ht[ne.WARNING]=Ki("bgYellow",ct("black")),Ht[ne.INFO]=Ki("bgBlue",ct("white")),Ht[ne.DEBUG]=Ki("bgMagenta",ct("black")),Ht[ne.TRACE]=pl(7,27),Ht),Lx=function(n){ul(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.log=function(t,r){var i,a,s;if(!(t>this._minLevel)){var o=qf[t],u="";if(this._timestamps&&(u+="[".concat(new Date().toISOString(),"] ")),this._emoji){var h=qx[t];u+="".concat(h," ")}var m=(s=(i=this._colors)!==null&&i!==void 0?i:(a=process.stdout)===null||a===void 0?void 0:a.isTTY)!==null&&s!==void 0?s:!0;m?u+="".concat(uh[t](this._name)," ").concat(uh[t](ne[t])," ").concat(jx[t](r)):u+="[".concat(this._name,":").concat(ne[t].toLowerCase(),"] ").concat(r),o(u)}},e}(Nf);function ml(n){return n.custom?new Ux(n):hl?new Lx(n):new Ox(n)}let Ff=class extends Error{constructor(...e){var t;super(...e),Object.setPrototypeOf(this,new.target.prototype),(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}},ch=class extends Ff{constructor(e){super(`Need to retry after ${e} ms`),this._retryAt=Date.now()+e}get retryAt(){return this._retryAt}},$f=class extends Ff{},Fc=class{constructor({logger:e}){this._queue=[],this._batchRunning=!1,this._paused=!1,this._logger=ml({name:"rate-limiter",emoji:!0,...e})}async request(e,t){return this._logger.trace("request start"),await new Promise((r,i)=>{var a;const s={req:e,resolve:r,reject:i,limitReachedBehavior:(a=t==null?void 0:t.limitReachedBehavior)!==null&&a!==void 0?a:"enqueue"};this._batchRunning||this._nextBatchTimer||this._paused?(this._logger.trace(`request queued batchRunning:${this._batchRunning.toString()} hasNextBatchTimer:${(!!this._nextBatchTimer).toString()} paused:${this._paused.toString()}`),this._queue.push(s)):this._runRequestBatch([s])})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextBatch()}get stats(){var e,t,r,i,a;return{lastKnownLimit:(t=(e=this._parameters)===null||e===void 0?void 0:e.limit)!==null&&t!==void 0?t:null,lastKnownRemainingRequests:(i=(r=this._parameters)===null||r===void 0?void 0:r.remaining)!==null&&i!==void 0?i:null,lastKnownResetDate:Je((a=this._parameters)===null||a===void 0?void 0:a.resetsAt,s=>new Date(s))}}async _runRequestBatch(e){this._logger.trace(`runRequestBatch start specs:${e.length}`),this._batchRunning=!0,this._parameters&&this._logger.debug(`Remaining requests: ${this._parameters.remaining}`),this._logger.debug(`Doing ${e.length} requests, new queue length is ${this._queue.length}`);const t=e.map(async s=>{const{req:o,resolve:u,reject:h}=s;try{const m=await this.doRequest(o),w=this.needsToRetryAfter(m);if(w!==null)throw this._queue.unshift(s),this._logger.info(`Retrying after ${w} ms`),new ch(w);const y=this.getParametersFromResponse(m);return u(m),y}catch(m){if(m instanceof ch)throw m;h(m);return}}),r=await Promise.allSettled(t),i=r.filter(s=>s.status==="rejected"),a=Date.now();if(i.length){this._logger.trace("runRequestBatch some rejected");const o=Math.max(a,...i.map(u=>u.reason.retryAt))-a;this._logger.warn(`Waiting for ${o} ms because the rate limit was exceeded`),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},o)}else{this._logger.trace("runRequestBatch none rejected");const s=r.filter(o=>o.status==="fulfilled"&&o.value!==void 0).map(o=>o.value).reduce((o,u)=>o?u.remaining<o.remaining?u:o:u,void 0);if(this._batchRunning=!1,s)if(this._parameters=s,s.resetsAt<a||s.remaining>0)this._logger.trace("runRequestBatch canRunMore"),this._runNextBatch();else{const o=s.resetsAt-a;this._logger.trace(`runRequestBatch delay:${o}`),this._logger.warn(`Waiting for ${o} ms because the rate limit was reached`),this._queue=this._queue.filter(u=>{switch(u.limitReachedBehavior){case"enqueue":return!0;case"null":return u.resolve(null),!1;case"throw":return u.reject(new $f("Request removed from queue because the rate limit was reached")),!1;default:throw new Error("this should never happen")}}),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},o)}}this._logger.trace("runRequestBatch end")}_runNextBatch(){if(this._paused)return;this._logger.trace("runNextBatch start"),this._nextBatchTimer&&(clearTimeout(this._nextBatchTimer),this._nextBatchTimer=void 0);const e=this._parameters?Math.min(this._parameters.remaining,this._parameters.limit/10):1,t=this._queue.splice(0,e);t.length&&this._runRequestBatch(t),this._logger.trace("runNextBatch end")}},Nx=class{constructor(e){this._children=new Map,this._paused=!1,this._partitionKeyCallback=e.getPartitionKey,this._createChildCallback=e.createChild}async request(e,t){const r=this._partitionKeyCallback(e);return await this._getChild(r).request(e,t)}clear(){for(const e of this._children.values())e.clear()}pause(){this._paused=!0;for(const e of this._children.values())e.pause()}resume(){this._paused=!1;for(const e of this._children.values())e.resume()}getChildStats(e){if(!this._children.has(e))return null;const t=this._children.get(e);return t instanceof Fc?t.stats:null}_getChild(e){if(this._children.has(e))return this._children.get(e);const t=this._createChildCallback(e);return this._paused&&t.pause(),this._children.set(e,t),t}},Fx=class{constructor({logger:e,bucketSize:t,timeFrame:r,doRequest:i,getPartitionKey:a}){this._partitionedQueue=new Map,this._usedFromBucket=new Map,this._paused=!1,this._logger=ml({name:"rate-limiter",emoji:!0,...e}),this._bucketSize=t,this._timeFrame=r,this._callback=i,this._partitionKeyCallback=a}async request(e,t){return await new Promise((r,i)=>{var a,s;const o={req:e,resolve:r,reject:i,limitReachedBehavior:(a=t==null?void 0:t.limitReachedBehavior)!==null&&a!==void 0?a:"enqueue"},u=this._partitionKeyCallback(e),h=(s=this._usedFromBucket.get(u))!==null&&s!==void 0?s:0;if(h>=this._bucketSize||this._paused)switch(o.limitReachedBehavior){case"enqueue":{const m=this._getPartitionedQueue(u);m.push(o),h+m.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} for ${u?`partition ${u}`:"default partition"} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${m.length}`):this._logger.info(`Enqueueing request for ${u?`partition ${u}`:"default partition"} because the rate limiter is paused; queue size is ${m.length}`);break}case"null":{o.resolve(null),this._paused?this._logger.info(`Returning null for request for ${u?`partition ${u}`:"default partition"} because the rate limiter is paused`):this._logger.warn(`Rate limit of ${this._bucketSize} for ${u?`partition ${u}`:"default partition"} was reached, dropping request and returning null`);break}case"throw":{o.reject(new $f(`Request dropped because ${this._paused?"the rate limiter is paused":`the rate limit for ${u?`partition ${u}`:"default partition"} was reached`}`));break}default:throw new Error("this should never happen")}else this._runRequest(o,u)})}clear(){this._partitionedQueue.clear()}pause(){this._paused=!0}resume(){this._paused=!1;for(const e of this._partitionedQueue.keys())this._runNextRequest(e)}_getPartitionedQueue(e){if(this._partitionedQueue.has(e))return this._partitionedQueue.get(e);const t=[];return this._partitionedQueue.set(e,t),t}async _runRequest(e,t){var r;const i=this._getPartitionedQueue(t);this._logger.debug(`doing a request for ${t?`partition ${t}`:"default partition"}, new queue length is ${i.length}`),this._usedFromBucket.set(t,((r=this._usedFromBucket.get(t))!==null&&r!==void 0?r:0)+1);const{req:a,resolve:s,reject:o}=e;try{s(await this._callback(a))}catch(u){o(u)}finally{setTimeout(()=>{const u=this._usedFromBucket.get(t)-1;this._usedFromBucket.set(t,u),i.length&&u<this._bucketSize&&this._runNextRequest(t)},this._timeFrame)}}_runNextRequest(e){if(this._paused)return;const r=this._getPartitionedQueue(e).shift();r&&this._runRequest(r,e)}},$x=class{constructor(e,t,r,i=!1){this.owner=e,this.event=t,this.listener=r,this._internal=i}unbind(){this.owner.removeListener(this)}},_l=class{constructor(){this._eventListeners=new Map,this._internalEventListeners=new Map}on(e,t){return this._addListener(!1,e,t)}addListener(e,t){return this._addListener(!1,e,t)}removeListener(e,t){this._removeListener(!1,e,t)}registerEvent(){const e=t=>this.addListener(e,t);return e}emit(e,...t){if(this._eventListeners.has(e))for(const r of this._eventListeners.get(e))r(...t);if(this._internalEventListeners.has(e))for(const r of this._internalEventListeners.get(e))r(...t)}registerInternalEvent(){const e=t=>this.addInternalListener(e,t);return e}addInternalListener(e,t){return this._addListener(!0,e,t)}removeInternalListener(e,t){this._removeListener(!0,e,t)}_addListener(e,t,r){const i=e?this._eventListeners:this._internalEventListeners;return i.has(t)?i.get(t).push(r):i.set(t,[r]),new $x(this,t,r,e)}_removeListener(e,t,r){const i=e?this._eventListeners:this._internalEventListeners;if(!t)i.clear();else if(typeof t=="object"){const a=t;this._removeListener(a._internal,a.event,a.listener)}else{const a=t;if(i.has(a))if(r){const s=i.get(a);let o=0;for(;(o=s.indexOf(r))!==-1;)s.splice(o,1)}else i.delete(a)}}};const Gx=6e4;function Qx(n){return Je(n.expiresIn,e=>n.obtainmentTimestamp+e*1e3-Gx)}function nc(n){var e;return(e=Je(Qx(n),t=>Date.now()>t))!==null&&e!==void 0?e:!1}var gs={exports:{}},Wx=gs.exports,dh;function Gf(){return dh||(dh=1,function(n,e){var t=typeof self<"u"?self:Wx,r=function(){function a(){this.fetch=!1,this.DOMException=t.DOMException}return a.prototype=t,new a}();(function(a){(function(s){var o={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(D){return D&&DataView.prototype.isPrototypeOf(D)}if(o.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(D){return D&&h.indexOf(Object.prototype.toString.call(D))>-1};function w(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function y(D){return typeof D!="string"&&(D=String(D)),D}function g(D){var L={next:function(){var ie=D.shift();return{done:ie===void 0,value:ie}}};return o.iterable&&(L[Symbol.iterator]=function(){return L}),L}function p(D){this.map={},D instanceof p?D.forEach(function(L,ie){this.append(ie,L)},this):Array.isArray(D)?D.forEach(function(L){this.append(L[0],L[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(L){this.append(L,D[L])},this)}p.prototype.append=function(D,L){D=w(D),L=y(L);var ie=this.map[D];this.map[D]=ie?ie+", "+L:L},p.prototype.delete=function(D){delete this.map[w(D)]},p.prototype.get=function(D){return D=w(D),this.has(D)?this.map[D]:null},p.prototype.has=function(D){return this.map.hasOwnProperty(w(D))},p.prototype.set=function(D,L){this.map[w(D)]=y(L)},p.prototype.forEach=function(D,L){for(var ie in this.map)this.map.hasOwnProperty(ie)&&D.call(L,this.map[ie],ie,this)},p.prototype.keys=function(){var D=[];return this.forEach(function(L,ie){D.push(ie)}),g(D)},p.prototype.values=function(){var D=[];return this.forEach(function(L){D.push(L)}),g(D)},p.prototype.entries=function(){var D=[];return this.forEach(function(L,ie){D.push([ie,L])}),g(D)},o.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function l(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function d(D){return new Promise(function(L,ie){D.onload=function(){L(D.result)},D.onerror=function(){ie(D.error)}})}function v(D){var L=new FileReader,ie=d(L);return L.readAsArrayBuffer(D),ie}function C(D){var L=new FileReader,ie=d(L);return L.readAsText(D),ie}function R(D){for(var L=new Uint8Array(D),ie=new Array(L.length),pe=0;pe<L.length;pe++)ie[pe]=String.fromCharCode(L[pe]);return ie.join("")}function P(D){if(D.slice)return D.slice(0);var L=new Uint8Array(D.byteLength);return L.set(new Uint8Array(D)),L.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(D){this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:o.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:o.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():o.arrayBuffer&&o.blob&&u(D)?(this._bodyArrayBuffer=P(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||m(D))?this._bodyArrayBuffer=P(D):this._bodyText=D=Object.prototype.toString.call(D):this._bodyText="",this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var D=l(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var D=l(this);if(D)return D;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(R(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then($)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function H(D){var L=D.toUpperCase();return x.indexOf(L)>-1?L:D}function q(D,L){L=L||{};var ie=L.body;if(D instanceof q){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,L.headers||(this.headers=new p(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!ie&&D._bodyInit!=null&&(ie=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=L.credentials||this.credentials||"same-origin",(L.headers||!this.headers)&&(this.headers=new p(L.headers)),this.method=H(L.method||this.method||"GET"),this.mode=L.mode||this.mode||null,this.signal=L.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ie)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ie)}q.prototype.clone=function(){return new q(this,{body:this._bodyInit})};function $(D){var L=new FormData;return D.trim().split("&").forEach(function(ie){if(ie){var pe=ie.split("="),xe=pe.shift().replace(/\+/g," "),J=pe.join("=").replace(/\+/g," ");L.append(decodeURIComponent(xe),decodeURIComponent(J))}}),L}function se(D){var L=new p,ie=D.replace(/\r?\n[\t ]+/g," ");return ie.split(/\r?\n/).forEach(function(pe){var xe=pe.split(":"),J=xe.shift().trim();if(J){var ht=xe.join(":").trim();L.append(J,ht)}}),L}_.call(q.prototype);function z(D,L){L||(L={}),this.type="default",this.status=L.status===void 0?200:L.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in L?L.statusText:"OK",this.headers=new p(L.headers),this.url=L.url||"",this._initBody(D)}_.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},z.error=function(){var D=new z(null,{status:0,statusText:""});return D.type="error",D};var Me=[301,302,303,307,308];z.redirect=function(D,L){if(Me.indexOf(L)===-1)throw new RangeError("Invalid status code");return new z(null,{status:L,headers:{location:D}})},s.DOMException=a.DOMException;try{new s.DOMException}catch{s.DOMException=function(L,ie){this.message=L,this.name=ie;var pe=Error(L);this.stack=pe.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function ae(D,L){return new Promise(function(ie,pe){var xe=new q(D,L);if(xe.signal&&xe.signal.aborted)return pe(new s.DOMException("Aborted","AbortError"));var J=new XMLHttpRequest;function ht(){J.abort()}J.onload=function(){var X={status:J.status,statusText:J.statusText,headers:se(J.getAllResponseHeaders()||"")};X.url="responseURL"in J?J.responseURL:X.headers.get("X-Request-URL");var Se="response"in J?J.response:J.responseText;ie(new z(Se,X))},J.onerror=function(){pe(new TypeError("Network request failed"))},J.ontimeout=function(){pe(new TypeError("Network request failed"))},J.onabort=function(){pe(new s.DOMException("Aborted","AbortError"))},J.open(xe.method,xe.url,!0),xe.credentials==="include"?J.withCredentials=!0:xe.credentials==="omit"&&(J.withCredentials=!1),"responseType"in J&&o.blob&&(J.responseType="blob"),xe.headers.forEach(function(X,Se){J.setRequestHeader(Se,X)}),xe.signal&&(xe.signal.addEventListener("abort",ht),J.onreadystatechange=function(){J.readyState===4&&xe.signal.removeEventListener("abort",ht)}),J.send(typeof xe._bodyInit>"u"?null:xe._bodyInit)})}return ae.polyfill=!0,a.fetch||(a.fetch=ae,a.Headers=p,a.Request=q,a.Response=z),s.Headers=p,s.Request=q,s.Response=z,s.fetch=ae,Object.defineProperty(s,"__esModule",{value:!0}),s})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e}(gs,gs.exports)),gs.exports}var Qf=Gf();const Vx=Ii(Qf);var pu,hh;function $c(){if(hh)return pu;hh=1;var n=Object.prototype.hasOwnProperty,e=Array.isArray,t=function(){for(var g=[],p=0;p<256;++p)g.push("%"+((p<16?"0":"")+p.toString(16)).toUpperCase());return g}(),r=function(p){for(;p.length>1;){var l=p.pop(),d=l.obj[l.prop];if(e(d)){for(var v=[],C=0;C<d.length;++C)typeof d[C]<"u"&&v.push(d[C]);l.obj[l.prop]=v}}},i=function(p,l){for(var d=l&&l.plainObjects?Object.create(null):{},v=0;v<p.length;++v)typeof p[v]<"u"&&(d[v]=p[v]);return d},a=function g(p,l,d){if(!l)return p;if(typeof l!="object"){if(e(p))p.push(l);else if(p&&typeof p=="object")(d&&(d.plainObjects||d.allowPrototypes)||!n.call(Object.prototype,l))&&(p[l]=!0);else return[p,l];return p}if(!p||typeof p!="object")return[p].concat(l);var v=p;return e(p)&&!e(l)&&(v=i(p,d)),e(p)&&e(l)?(l.forEach(function(C,R){if(n.call(p,R)){var P=p[R];P&&typeof P=="object"&&C&&typeof C=="object"?p[R]=g(P,C,d):p.push(C)}else p[R]=C}),p):Object.keys(l).reduce(function(C,R){var P=l[R];return n.call(C,R)?C[R]=g(C[R],P,d):C[R]=P,C},v)},s=function(p,l){return Object.keys(l).reduce(function(d,v){return d[v]=l[v],d},p)},o=function(g,p,l){var d=g.replace(/\+/g," ");if(l==="iso-8859-1")return d.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(d)}catch{return d}},u=function(p,l,d){if(p.length===0)return p;var v=p;if(typeof p=="symbol"?v=Symbol.prototype.toString.call(p):typeof p!="string"&&(v=String(p)),d==="iso-8859-1")return escape(v).replace(/%u[0-9a-f]{4}/gi,function(_){return"%26%23"+parseInt(_.slice(2),16)+"%3B"});for(var C="",R=0;R<v.length;++R){var P=v.charCodeAt(R);if(P===45||P===46||P===95||P===126||P>=48&&P<=57||P>=65&&P<=90||P>=97&&P<=122){C+=v.charAt(R);continue}if(P<128){C=C+t[P];continue}if(P<2048){C=C+(t[192|P>>6]+t[128|P&63]);continue}if(P<55296||P>=57344){C=C+(t[224|P>>12]+t[128|P>>6&63]+t[128|P&63]);continue}R+=1,P=65536+((P&1023)<<10|v.charCodeAt(R)&1023),C+=t[240|P>>18]+t[128|P>>12&63]+t[128|P>>6&63]+t[128|P&63]}return C},h=function(p){for(var l=[{obj:{o:p},prop:"o"}],d=[],v=0;v<l.length;++v)for(var C=l[v],R=C.obj[C.prop],P=Object.keys(R),_=0;_<P.length;++_){var x=P[_],H=R[x];typeof H=="object"&&H!==null&&d.indexOf(H)===-1&&(l.push({obj:R,prop:x}),d.push(H))}return r(l),p},m=function(p){return Object.prototype.toString.call(p)==="[object RegExp]"},w=function(p){return!p||typeof p!="object"?!1:!!(p.constructor&&p.constructor.isBuffer&&p.constructor.isBuffer(p))},y=function(p,l){return[].concat(p,l)};return pu={arrayToObject:i,assign:s,combine:y,compact:h,decode:o,encode:u,isBuffer:w,isRegExp:m,merge:a},pu}var mu,ph;function Gc(){if(ph)return mu;ph=1;var n=String.prototype.replace,e=/%20/g,t=$c(),r={RFC1738:"RFC1738",RFC3986:"RFC3986"};return mu=t.assign({default:r.RFC3986,formatters:{RFC1738:function(i){return n.call(i,e,"+")},RFC3986:function(i){return String(i)}}},r),mu}var _u,mh;function Wf(){if(mh)return _u;mh=1;var n=$c(),e=Gc(),t=Object.prototype.hasOwnProperty,r={brackets:function(p){return p+"[]"},comma:"comma",indices:function(p,l){return p+"["+l+"]"},repeat:function(p){return p}},i=Array.isArray,a=Array.prototype.push,s=function(g,p){a.apply(g,i(p)?p:[p])},o=Date.prototype.toISOString,u=e.default,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:u,formatter:e.formatters[u],indices:!1,serializeDate:function(p){return o.call(p)},skipNulls:!1,strictNullHandling:!1},m=function(p){return typeof p=="string"||typeof p=="number"||typeof p=="boolean"||typeof p=="symbol"||typeof p=="bigint"},w=function g(p,l,d,v,C,R,P,_,x,H,q,$,se){var z=p;if(typeof P=="function"?z=P(l,z):z instanceof Date?z=H(z):d==="comma"&&i(z)&&(z=z.join(",")),z===null){if(v)return R&&!$?R(l,h.encoder,se,"key"):l;z=""}if(m(z)||n.isBuffer(z)){if(R){var Me=$?l:R(l,h.encoder,se,"key");return[q(Me)+"="+q(R(z,h.encoder,se,"value"))]}return[q(l)+"="+q(String(z))]}var ae=[];if(typeof z>"u")return ae;var D;if(i(P))D=P;else{var L=Object.keys(z);D=_?L.sort(_):L}for(var ie=0;ie<D.length;++ie){var pe=D[ie];C&&z[pe]===null||(i(z)?s(ae,g(z[pe],typeof d=="function"?d(l,pe):l,d,v,C,R,P,_,x,H,q,$,se)):s(ae,g(z[pe],l+(x?"."+pe:"["+pe+"]"),d,v,C,R,P,_,x,H,q,$,se)))}return ae},y=function(p){if(!p)return h;if(p.encoder!==null&&p.encoder!==void 0&&typeof p.encoder!="function")throw new TypeError("Encoder has to be a function.");var l=p.charset||h.charset;if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var d=e.default;if(typeof p.format<"u"){if(!t.call(e.formatters,p.format))throw new TypeError("Unknown format option provided.");d=p.format}var v=e.formatters[d],C=h.filter;return(typeof p.filter=="function"||i(p.filter))&&(C=p.filter),{addQueryPrefix:typeof p.addQueryPrefix=="boolean"?p.addQueryPrefix:h.addQueryPrefix,allowDots:typeof p.allowDots>"u"?h.allowDots:!!p.allowDots,charset:l,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:h.charsetSentinel,delimiter:typeof p.delimiter>"u"?h.delimiter:p.delimiter,encode:typeof p.encode=="boolean"?p.encode:h.encode,encoder:typeof p.encoder=="function"?p.encoder:h.encoder,encodeValuesOnly:typeof p.encodeValuesOnly=="boolean"?p.encodeValuesOnly:h.encodeValuesOnly,filter:C,formatter:v,serializeDate:typeof p.serializeDate=="function"?p.serializeDate:h.serializeDate,skipNulls:typeof p.skipNulls=="boolean"?p.skipNulls:h.skipNulls,sort:typeof p.sort=="function"?p.sort:null,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:h.strictNullHandling}};return _u=function(g,p){var l=g,d=y(p),v,C;typeof d.filter=="function"?(C=d.filter,l=C("",l)):i(d.filter)&&(C=d.filter,v=C);var R=[];if(typeof l!="object"||l===null)return"";var P;p&&p.arrayFormat in r?P=p.arrayFormat:p&&"indices"in p?P=p.indices?"indices":"repeat":P="indices";var _=r[P];v||(v=Object.keys(l)),d.sort&&v.sort(d.sort);for(var x=0;x<v.length;++x){var H=v[x];d.skipNulls&&l[H]===null||s(R,w(l[H],H,_,d.strictNullHandling,d.skipNulls,d.encode?d.encoder:null,d.filter,d.sort,d.allowDots,d.serializeDate,d.formatter,d.encodeValuesOnly,d.charset))}var q=R.join(d.delimiter),$=d.addQueryPrefix===!0?"?":"";return d.charsetSentinel&&(d.charset==="iso-8859-1"?$+="utf8=%26%2310003%3B&":$+="utf8=%E2%9C%93&"),q.length>0?$+q:""},_u}var zx=Wf();const Vf=Ii(zx);var gu,_h;function zf(){if(_h)return gu;_h=1;var n=$c(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},i=function(g){return g.replace(/&#(\d+);/g,function(p,l){return String.fromCharCode(parseInt(l,10))})},a=function(g,p){return g&&typeof g=="string"&&p.comma&&g.indexOf(",")>-1?g.split(","):g},s=function(p,l){if(t(p)){for(var d=[],v=0;v<p.length;v+=1)d.push(l(p[v]));return d}return l(p)},o="utf8=%26%2310003%3B",u="utf8=%E2%9C%93",h=function(p,l){var d={},v=l.ignoreQueryPrefix?p.replace(/^\?/,""):p,C=l.parameterLimit===1/0?void 0:l.parameterLimit,R=v.split(l.delimiter,C),P=-1,_,x=l.charset;if(l.charsetSentinel)for(_=0;_<R.length;++_)R[_].indexOf("utf8=")===0&&(R[_]===u?x="utf-8":R[_]===o&&(x="iso-8859-1"),P=_,_=R.length);for(_=0;_<R.length;++_)if(_!==P){var H=R[_],q=H.indexOf("]="),$=q===-1?H.indexOf("="):q+1,se,z;$===-1?(se=l.decoder(H,r.decoder,x,"key"),z=l.strictNullHandling?null:""):(se=l.decoder(H.slice(0,$),r.decoder,x,"key"),z=s(a(H.slice($+1),l),function(Me){return l.decoder(Me,r.decoder,x,"value")})),z&&l.interpretNumericEntities&&x==="iso-8859-1"&&(z=i(z)),H.indexOf("[]=")>-1&&(z=t(z)?[z]:z),e.call(d,se)?d[se]=n.combine(d[se],z):d[se]=z}return d},m=function(g,p,l,d){for(var v=d?p:a(p,l),C=g.length-1;C>=0;--C){var R,P=g[C];if(P==="[]"&&l.parseArrays)R=[].concat(v);else{R=l.plainObjects?Object.create(null):{};var _=P.charAt(0)==="["&&P.charAt(P.length-1)==="]"?P.slice(1,-1):P,x=parseInt(_,10);!l.parseArrays&&_===""?R={0:v}:!isNaN(x)&&P!==_&&String(x)===_&&x>=0&&l.parseArrays&&x<=l.arrayLimit?(R=[],R[x]=v):R[_]=v}v=R}return v},w=function(p,l,d,v){if(p){var C=d.allowDots?p.replace(/\.([^.[]+)/g,"[$1]"):p,R=/(\[[^[\]]*])/,P=/(\[[^[\]]*])/g,_=d.depth>0&&R.exec(C),x=_?C.slice(0,_.index):C,H=[];if(x){if(!d.plainObjects&&e.call(Object.prototype,x)&&!d.allowPrototypes)return;H.push(x)}for(var q=0;d.depth>0&&(_=P.exec(C))!==null&&q<d.depth;){if(q+=1,!d.plainObjects&&e.call(Object.prototype,_[1].slice(1,-1))&&!d.allowPrototypes)return;H.push(_[1])}return _&&H.push("["+C.slice(_.index)+"]"),m(H,l,d,v)}},y=function(p){if(!p)return r;if(p.decoder!==null&&p.decoder!==void 0&&typeof p.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var l=typeof p.charset>"u"?r.charset:p.charset;return{allowDots:typeof p.allowDots>"u"?r.allowDots:!!p.allowDots,allowPrototypes:typeof p.allowPrototypes=="boolean"?p.allowPrototypes:r.allowPrototypes,arrayLimit:typeof p.arrayLimit=="number"?p.arrayLimit:r.arrayLimit,charset:l,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:r.charsetSentinel,comma:typeof p.comma=="boolean"?p.comma:r.comma,decoder:typeof p.decoder=="function"?p.decoder:r.decoder,delimiter:typeof p.delimiter=="string"||n.isRegExp(p.delimiter)?p.delimiter:r.delimiter,depth:typeof p.depth=="number"||p.depth===!1?+p.depth:r.depth,ignoreQueryPrefix:p.ignoreQueryPrefix===!0,interpretNumericEntities:typeof p.interpretNumericEntities=="boolean"?p.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof p.parameterLimit=="number"?p.parameterLimit:r.parameterLimit,parseArrays:p.parseArrays!==!1,plainObjects:typeof p.plainObjects=="boolean"?p.plainObjects:r.plainObjects,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:r.strictNullHandling}};return gu=function(g,p){var l=y(p);if(g===""||g===null||typeof g>"u")return l.plainObjects?Object.create(null):{};for(var d=typeof g=="string"?h(g,l):g,v=l.plainObjects?Object.create(null):{},C=Object.keys(d),R=0;R<C.length;++R){var P=C[R],_=w(P,d[P],l,typeof g=="string");v=n.merge(v,_,l)}return n.compact(v)},gu}zf();Gc();const c=Symbol("twurpleRawData");let K=class{constructor(e){this[c]=e}},Di=class extends Error{constructor(e,t){var r;super(e,t),Object.setPrototypeOf(this,new.target.prototype),(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}},Kx=class extends Di{constructor(){super("Relation returned null - this may be a library bug or a race condition in your own code")}};function re(n){if(n==null)throw new Kx;return n}function j(n,e,t){return r=>{const i=t?function(){return`[${e}#${this[t]} - please check https://twurple.js.org/reference/${n}/classes/${e}.html for available properties]`}:function(){return`[${e} - please check https://twurple.js.org/reference/${n}/classes/${e}.html for available properties]`};Object.defineProperty(r.prototype,Symbol.for("nodejs.util.inspect.custom"),{value:i,enumerable:!1})}}let ic=class extends K{get authorName(){return this[c].author_name}get bitsEnabled(){return this[c].bits_enabled}get installable(){return this[c].can_install}get configurationLocation(){return this[c].configuration_location}get description(){return this[c].description}get tosUrl(){return this[c].eula_tos_url}get hasChatSupport(){return this[c].has_chat_support}get iconUrl(){return this[c].icon_url}getIconUrl(e){return this[c].icon_urls[e]}get id(){return this[c].id}get name(){return this[c].name}get privacyPolicyUrl(){return this[c].privacy_policy_url}get requestsIdentityLink(){return this[c].request_identity_link}get screenshotUrls(){return this[c].screenshot_urls}get state(){return this[c].state}get subscriptionsSupportLevel(){return this[c].subscriptions_support_level}get summary(){return this[c].summary}get supportEmail(){return this[c].support_email}get version(){return this[c].version}get viewerSummery(){return this[c].viewer_summary}get allowedConfigUrls(){return this[c].allowlisted_config_urls}get allowedPanelUrls(){return this[c].allowlisted_panel_urls}get mobileViewerUrl(){var e,t;return(t=(e=this[c].views.mobile)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get panelViewerUrl(){var e,t;return(t=(e=this[c].views.panel)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get panelHeight(){var e,t;return(t=(e=this[c].views.panel)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:null}get panelCanLinkExternalContent(){var e,t;return(t=(e=this[c].views.panel)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}get overlayViewerUrl(){var e,t;return(t=(e=this[c].views.video_overlay)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get overlayCanLinkExternalContent(){var e,t;return(t=(e=this[c].views.video_overlay)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}get componentViewerUrl(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get componentAspectWidth(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.aspect_width)!==null&&t!==void 0?t:null}get componentAspectHeight(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.aspect_height)!==null&&t!==void 0?t:null}get componentAspectRatioX(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.aspect_ratio_x)!==null&&t!==void 0?t:null}get componentAspectRatioY(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.aspect_ratio_y)!==null&&t!==void 0?t:null}get componentAutoScales(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.autoscale)!==null&&t!==void 0?t:null}get componentScalePixels(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.scale_pixels)!==null&&t!==void 0?t:null}get componentTargetHeight(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.target_height)!==null&&t!==void 0?t:null}get componentSize(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.size)!==null&&t!==void 0?t:null}get componentZoom(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.zoom)!==null&&t!==void 0?t:null}get componentZoomPixels(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.zoom_pixels)!==null&&t!==void 0?t:null}get componentCanLinkExternalContent(){var e,t;return(t=(e=this[c].views.component)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}get configViewerUrl(){var e,t;return(t=(e=this[c].views.config)===null||e===void 0?void 0:e.viewer_url)!==null&&t!==void 0?t:null}get configCanLinkExternalContent(){var e,t;return(t=(e=this[c].views.config)===null||e===void 0?void 0:e.can_link_external_content)!==null&&t!==void 0?t:null}};ic=I([j("api","HelixExtension","id")],ic);let Ci=class extends Di{constructor(e){super(`${e} - this should never happen, please file a bug in the GitHub issue tracker`)}};function A(n){return typeof n=="string"?n:typeof n=="number"?n.toString(10):n.id}function fs(n){return typeof n=="string"?n:n.name}let Ei=class extends Di{constructor(e,t,r,i,a,s){super(`Encountered HTTP status code ${e}: ${t}

URL: ${r}
Method: ${i}
Body:
${!s&&a.length>150?`${a.slice(0,147)}...`:a}`),this._statusCode=e,this._url=r,this._method=i,this._body=a}get statusCode(){return this._statusCode}get url(){return this._url}get method(){return this._method}get body(){return this._body}};async function ac(n,e){var t;if(!n.ok){const r=n.headers.get("Content-Type")==="application/json",i=r?JSON.stringify(await n.json(),null,2):await n.text(),a=Vf(e.query,{arrayFormat:"repeat",addQueryPrefix:!0}),s=`${e.url}${a}`;throw new Ei(n.status,n.statusText,s,(t=e.method)!==null&&t!==void 0?t:"GET",i,r)}}async function Kf(n){if(n.status===204)return;const e=await n.text();if(e)return JSON.parse(e)}function Xx(n,e,t){switch(e){case"helix":{const r=n.replace(/^\//,"");return t?r==="eventsub/subscriptions"?`http://localhost:${t}/${r}`:`http://localhost:${t}/mock/${r}`:`https://api.twitch.tv/helix/${r}`}case"auth":return`https://id.twitch.tv/oauth2/${n.replace(/^\//,"")}`;case"custom":return n;default:return n}}async function gl(n,e,t,r,i={},a){var s,o;const u=(s=n.type)!==null&&s!==void 0?s:"helix",h=Xx(n.url,u,a),m=Vf(n.query,{arrayFormat:"repeat",addQueryPrefix:!0}),w=new Qf.Headers({Accept:"application/json"});let y;n.jsonBody&&(y=JSON.stringify(n.jsonBody),w.append("Content-Type","application/json")),e&&u!=="auth"&&w.append("Client-ID",e),t&&w.append("Authorization",`${u==="helix"?r??"Bearer":"OAuth"} ${t}`);const g={...i,method:(o=n.method)!==null&&o!==void 0?o:"GET",headers:w,body:y};return await Vx(`${h}${m}`,g)}async function Xf(n,e,t,r,i={}){const a=await gl(n,e,t,r,i);return await ac(a,n),await Kf(a)}function he(n){return{broadcaster_id:A(n)}}let Jx=class extends Di{constructor(e){super("Invalid token supplied",e)}};function Yx(n,e){return{grant_type:"client_credentials",client_id:n,client_secret:e}}let sc=class extends K{constructor(e){super(e),this._obtainmentDate=new Date}get clientId(){return this[c].client_id}get userId(){var e;return(e=this[c].user_id)!==null&&e!==void 0?e:null}get userName(){var e;return(e=this[c].login)!==null&&e!==void 0?e:null}get scopes(){return this[c].scopes}get expiryDate(){return Je(this[c].expires_in,e=>new Date(this._obtainmentDate.getTime()+e*1e3))}};sc=I([j("auth","TokenInfo","clientId")],sc);function Zx(n){var e,t;return{accessToken:n.access_token,refreshToken:n.refresh_token||null,scope:(e=n.scope)!==null&&e!==void 0?e:[],expiresIn:(t=n.expires_in)!==null&&t!==void 0?t:null,obtainmentTimestamp:Date.now()}}async function eS(n,e){return Zx(await Xf({type:"auth",url:"token",method:"POST",query:Yx(n,e)}))}let tS=class{constructor(e){this._newTokenScopeSets=[],this._newTokenPromise=null,this._queuedScopeSets=[],this._queueExecutor=null,this._queuePromise=null,this._executor=e}async fetch(...e){var t;const r=e.filter(o=>!!o);if(this._newTokenPromise){if(!r.length)return await this._newTokenPromise;if(this._queueExecutor?this._queuedScopeSets.push(...r):this._queuedScopeSets=[...r],!this._queuePromise){const{promise:o,resolve:u,reject:h}=To();this._queuePromise=o,this._queueExecutor=async()=>{var m;if(this._queuePromise){this._newTokenScopeSets=this._queuedScopeSets,this._queuedScopeSets=[],this._newTokenPromise=this._queuePromise,this._queuePromise=null,this._queueExecutor=null;try{u(await this._executor(this._newTokenScopeSets))}catch(w){h(w)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(m=this._queueExecutor)===null||m===void 0||m.call(this)}}}}return await this._queuePromise}this._newTokenScopeSets=[...r];const{promise:i,resolve:a,reject:s}=To();this._newTokenPromise=i;try{a(await this._executor(this._newTokenScopeSets))}catch(o){s(o)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(t=this._queueExecutor)===null||t===void 0||t.call(this)}return await i}},Hi=class{constructor(e,t,r=[]){this._clientId=e,this._clientSecret=t,this._impliedScopes=r,this._fetcher=new tS(async i=>await this._fetch(i))}get clientId(){return this._clientId}get currentScopes(){return this._impliedScopes}async getAccessTokenForUser(){throw new Error("Can not get user access token for AppTokenAuthProvider")}getCurrentScopesForUser(){throw new Error("Can not get user scopes for AppTokenAuthProvider")}async getAnyAccessToken(){return await this._fetcher.fetch()}async getAppAccessToken(e=!1){return e&&(this._token=void 0),await this._fetcher.fetch()}async _fetch(e){if(e.length>0)for(const t of e)if(this._impliedScopes.length){if(t.every(r=>!this._impliedScopes.includes(r)))throw new Error(`One of the scopes ${t.join(", ")} requested but only the scope ${this._impliedScopes.join(", ")} is implied`)}else throw new Error(`One of the scopes ${t.join(", ")} requested but the client credentials flow does not support scopes`);return!this._token||nc(this._token)?this._token=await eS(this._clientId,this._clientSecret):this._token}};I([V(!1)],Hi.prototype,"_clientSecret",void 0);I([V(!1)],Hi.prototype,"_token",void 0);I([V(!1)],Hi.prototype,"_fetcher",void 0);Hi=I([j("auth","AppTokenAuthProvider","clientId")],Hi);class rS extends _l{constructor({lineBased:e,logger:t,additionalOptions:r}={}){super(),this._currentLine="",this._connecting=!1,this._connected=!1,this.onReceive=this.registerEvent(),this.onConnect=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onEnd=this.registerEvent(),this._lineBased=e??!1,this._logger=t,this._additionalOptions=r}get isConnecting(){return this._connecting}get isConnected(){return this._connected}sendLine(e){this._connected&&(e=e.replace(/[\0\r\n]/g,""),this.sendRaw(`${e}\r
`))}assumeExternalDisconnect(){var e;(e=this._logger)===null||e===void 0||e.trace("AbstractConnection assumeExternalDisconnect"),this._connected=!1,this._connecting=!1,this.clearSocket(),this.emit(this.onDisconnect,!1)}receiveRaw(e){var t,r;if(!this._lineBased){this.emit(this.onReceive,e);return}const i=e.split(`\r
`);if(this._currentLine+=(t=i.shift())!==null&&t!==void 0?t:"",i.length){this.emit(this.onReceive,this._currentLine),this._currentLine=(r=i.pop())!==null&&r!==void 0?r:"";for(const a of i)this.emit(this.onReceive,a)}}}class nS{constructor(){throw new Error("DirectConnection is not implemented in a browser environment")}}class iS extends _l{constructor(e,t,r={}){var i;super(),this._type=e,this._target=t,this._config=r,this._retryLimit=1/0,this._initialRetryLimit=3,this._connecting=!1,this._connectionRetryCount=0,this.onReceive=this.registerEvent(),this.onConnect=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onEnd=this.registerEvent(),this._retryLimit=(i=r.retryLimit)!==null&&i!==void 0?i:1/0,this._logger=r.logger}get isConnected(){var e,t;return(t=(e=this._currentConnection)===null||e===void 0?void 0:e.isConnected)!==null&&t!==void 0?t:!1}get isConnecting(){var e,t;return(t=(e=this._currentConnection)===null||e===void 0?void 0:e.isConnecting)!==null&&t!==void 0?t:this._connecting}get hasSocket(){var e,t;return(t=(e=this._currentConnection)===null||e===void 0?void 0:e.hasSocket)!==null&&t!==void 0?t:!1}sendLine(e){var t;(t=this._currentConnection)===null||t===void 0||t.sendLine(e)}connect(){if(this._currentConnection||this._connecting)throw new Error("Connection already present");this._connecting=!0,this._connectionRetryCount=0,this._tryConnect(!0)}disconnect(){var e;if((e=this._logger)===null||e===void 0||e.trace(`PersistentConnection disconnect currentConnectionExists:${(!!this._currentConnection).toString()} connecting:${this._connecting.toString()}`),this._connecting=!1,this._currentConnection){const t=this._currentConnection;this._currentConnection=void 0,t.disconnect()}}assumeExternalDisconnect(){var e,t;(e=this._logger)===null||e===void 0||e.trace("PersistentConnection assumeExternalDisconnect"),(t=this._currentConnection)===null||t===void 0||t.assumeExternalDisconnect()}reconnect(){this._reconnect(!0)}acknowledgeSuccessfulReconnect(){this._previousConnection&&(this._previousConnection.disconnect(),this._previousConnection=void 0)}_startTryingToConnect(e=!1){this._connecting=!0,this._connectionRetryCount=0,this._tryConnect(e)}_tryConnect(e=!1){var t,r;(t=this._logger)===null||t===void 0||t.trace(`PersistentConnection tryConnect currentConnectionExists:${(!!this._currentConnection).toString()} connecting:${this._connecting.toString()}`);const i=e?this._initialRetryLimit:this._retryLimit;(r=this._retryTimerGenerator)!==null&&r!==void 0||(this._retryTimerGenerator=Ix(120));const a=this._currentConnection=new this._type(Tx(this._target),this._config);a.onReceive(s=>this.emit(this.onReceive,s)),a.onConnect(()=>{this.emit(this.onConnect),this._connecting=!1,this._retryTimerGenerator=void 0}),a.onDisconnect((s,o)=>{var u,h,m;if(this.emit(this.onDisconnect,s,o),s)this.emit(this.onEnd,!0),this._connecting=!1,this._retryTimerGenerator=void 0,a.disconnect(),this._currentConnection===a&&(this._currentConnection=void 0),this._previousConnection===a&&(this._previousConnection=void 0);else if(this._connecting){if((u=this._logger)===null||u===void 0||u.debug(`Connection error caught: ${(h=o==null?void 0:o.message)!==null&&h!==void 0?h:"unknown error"}`),this._connectionRetryCount>=i)return;this._connectionRetryCount++;const w=this._retryTimerGenerator.next().value;w!==0&&((m=this._logger)===null||m===void 0||m.info(`Retrying in ${w} seconds`)),setTimeout(()=>{var y;this._connecting&&((y=this._logger)===null||y===void 0||y.info(e?"Retrying connection":"Trying to reconnect"),this._tryConnect())},w*1e3)}else this._reconnect()}),a.connect()}_reconnect(e=!1){e&&this._config.overlapManualReconnect?(this._previousConnection=this._currentConnection,this._currentConnection=void 0):this.disconnect(),this._startTryingToConnect(e)}}var pi=null;typeof WebSocket<"u"?pi=WebSocket:typeof MozWebSocket<"u"?pi=MozWebSocket:typeof global<"u"?pi=global.WebSocket||global.MozWebSocket:typeof window<"u"?pi=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(pi=self.WebSocket||self.MozWebSocket);class aS extends rS{constructor(e,t){if(super(t),this._socket=null,this._closingOnDemand=!1,e.hostName&&e.port)this._url=`ws${e.secure?"s":""}://${e.hostName}:${e.port}`;else if(e.url)this._url=e.url;else throw new Error("WebSocketConnection requires either hostName & port or url to be set")}get hasSocket(){return!!this._socket}sendRaw(e){var t;(t=this._socket)===null||t===void 0||t.send(e)}connect(){var e,t;(e=this._logger)===null||e===void 0||e.trace("WebSocketConnection connect"),this._connecting=!0,this._socket=new pi(this._url,(t=this._additionalOptions)===null||t===void 0?void 0:t.wsOptions),this._socket.onopen=()=>{var r;(r=this._logger)===null||r===void 0||r.trace("WebSocketConnection onOpen"),this._connected=!0,this._connecting=!1,this._closingOnDemand=!1,this.emit(this.onConnect)},this._socket.onmessage=({data:r})=>{this.receiveRaw(r.toString())},this._socket.onerror=r=>{var i;(i=this._logger)===null||i===void 0||i.trace(`WebSocketConnection onError message:${r.message}`)},this._socket.onclose=r=>{var i;const a=this._connected,s=this._connecting;if((i=this._logger)===null||i===void 0||i.trace(`WebSocketConnection onClose wasConnected:${a.toString()} wasConnecting:${s.toString()} closingOnDemand:${this._closingOnDemand.toString()} wasClean:${r.wasClean.toString()}`),this._connected=!1,this._connecting=!1,this._closingOnDemand)this._closingOnDemand=!1,this.emit(this.onDisconnect,!0),this.emit(this.onEnd,!0);else{const o=new Error(`[${r.code}] ${r.reason}`);this.emit(this.onDisconnect,!1,o),this.emit(this.onEnd,!1,o)}this.clearSocket()}}disconnect(){var e,t;(e=this._logger)===null||e===void 0||e.trace("WebSocketConnection disconnect"),this._closingOnDemand=!0,(t=this._socket)===null||t===void 0||t.close()}clearSocket(){this._socket&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onerror=null,this._socket.onclose=null,this._socket=null)}}function ys(n){var e,t,r;if(Array.isArray(n)){for(t=Array(e=n.length);e--;)t[e]=(r=n[e])&&typeof r=="object"?ys(r):r;return t}if(Object.prototype.toString.call(n)==="[object Object]"){t={};for(e in n)e==="__proto__"?Object.defineProperty(t,e,{value:ys(n[e]),configurable:!0,enumerable:!0,writable:!0}):t[e]=(r=n[e])&&typeof r=="object"?ys(r):r;return t}return n}const sS={name:"away-notify"};class Po extends Error{constructor(e,t,r){super(`command "${e}" expected ${t} or more parameters, got ${r}`),this._command=e,this._expectedParams=t,this._actualParams=r,Object.setPrototypeOf(this,Po.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Po)}get command(){return this._command}get expectedParams(){return this._expectedParams}get actualParams(){return this._actualParams}}class Do extends Error{constructor(e,t,r,i){var a;super(`required parameter "${t}" did not validate against ${(a=r.type)!==null&&a!==void 0?a:"regex"} validation: "${i}"`),this._command=e,this._paramName=t,this._paramSpec=r,this._givenValue=i,Object.setPrototypeOf(this,Do.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Do)}get command(){return this._command}get paramName(){return this._paramName}get paramSpec(){return this._paramSpec}get givenValue(){return this._givenValue}}const fi={channelTypes:"#&",supportedUserModes:"iwso",supportedChannelModes:{prefix:"ov",list:"b",alwaysWithParam:"ovk",paramWhenSet:"l",noParam:"imnpst"},prefixes:[{modeChar:"v",prefix:"+"},{modeChar:"o",prefix:"@"}]};var fu={exports:{}},gh;function oS(){return gh||(gh=1,function(n){n.exports=e=>{if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},n.exports.default=n.exports}(fu)),fu.exports}var lS=oS();const uS=Ii(lS);function oc(n,e="#&"){return new RegExp(`^[${uS(e)}][^ \b\0
\r,]+$`).test(n)}const fh={0:"\0",n:`
`,r:"\r","":""};function yh(n){if(!n.startsWith("")||(n=n.substring(1),n.endsWith("")&&(n=n.slice(0,-1)),!n))return!1;n=n.replace(/\x10(.)/,(r,i)=>i in fh?fh[i]:"");let[e,t=""]=er(n," ",2);return e=e?e.toUpperCase():"",{command:e,params:t}}const cS={"\\":"\\",";":":","\n":"n","\r":"r"," ":"s"};function dS(n){return n.replace(/[\\;\n\r ]/g,e=>`\\${cS[e]}`)}function hS(n){let e=`${n.nick}`;return n.user&&(e+=`!${n.user}`),n.host&&(e+=`@${n.host}`),e}function pS(n,e,t,r,i=fi,a=!1){const s=new n(n.COMMAND,void 0,{serverProperties:i}),o={};if(s._paramSpec&&rc(s._paramSpec,(u,h)=>{if(!(a&&u.noServer)&&!(!a&&u.noClient)){if(h in e){const m=e[h];if(m!==void 0){if(n.checkParam(m,u,i))o[h]={value:m,trailing:!!u.trailing};else if(!u.optional)throw new Error(`required parameter "${h}" did not suit requirements: "${m}"`)}}if(!(h in o)&&!u.optional)throw new Error(`required parameter "${h}" not found in command "${n.COMMAND}"`)}}),s._parsedParams=o,s._paramSpec)for(const u of Object.keys(s._paramSpec))Object.defineProperty(s,u,{get(){var h,m;return(m=(h=this._parsedParams)===null||h===void 0?void 0:h[u])===null||m===void 0?void 0:m.value}});return s._initPrefixAndTags(t,r),s}class N{static checkParam(e,t,r=fi){return!(t.type==="channel"&&!oc(e,r.channelTypes)||t.type==="channelList"&&!e.split(",").every(a=>oc(a,r.channelTypes))||t.match&&!t.match.test(e))}constructor(e,{params:t,tags:r,prefix:i,rawLine:a}={},{serverProperties:s=fi,isServer:o=!1,shouldParseParams:u=!0}={},h){this._params=[],this._serverProperties=fi,this._paramSpec=h,this._command=e,this._params=t,this._tags=r??new Map,this._prefix=i,this._serverProperties=s,this._raw=a,u&&this.parseParams(o)}getMinParamCount(e=!1){return this._paramSpec?Object.values(this._paramSpec).filter(t=>t.noServer&&e||t.noClient&&!e?!1:!t.optional).length:0}get paramCount(){var e,t;return(t=(e=this._params)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}prefixToString(){return this._prefix?hS(this._prefix):""}tagsToString(){return[...this._tags.entries()].map(([e,t])=>t?`${e}=${dS(t)}`:e).join(";")}toString(e=!1,t=!1){const i=[t?this._buildCommandFromRawParams():this._buildCommandFromNamedParams()];if(e){const s=this.prefixToString();s&&i.unshift(`:${s}`)}const a=this.tagsToString();return a&&i.unshift(`@${a}`),i.join(" ")}_initPrefixAndTags(e,t){this._prefix=e,t&&(this._tags=t)}parseParams(e=!1){if(this._params){let t=this.getMinParamCount(e);if(t>this._params.length)throw new Po(this._command,t,this._params.length);const r=this._paramSpec;if(!r)return;let i=0;const a={};for(const[s,o]of Object.entries(r)){if(o.noServer&&e||o.noClient&&!e)continue;if(this._params.length-i<=t){if(o.optional)continue;if(this._params.length-i!==t)throw new Error("not enough parameters left for required parameters parsing (this is a library bug)")}let u=this._params[i];if(!u){if(o.optional)break;throw new Error("unexpected parameter underflow")}if(o.rest){const h=[];for(;this._params[i]&&!this._params[i].trailing;)h.push(this._params[i].value),++i;if(!h.length){if(o.optional)continue;throw new Error(`no parameters left for required rest parameter "${s}"`)}u={value:h.join(" "),trailing:!1}}if(N.checkParam(u.value,o))a[s]={...u},o.optional||--t,o.rest||++i;else if(!o.optional)throw new Do(this._command,s,o,u.value);if(o.trailing)break}if(this._parsedParams=a,this._paramSpec)for(const s of Object.keys(this._paramSpec))Object.defineProperty(this,s,{get(){var o,u;return(u=(o=this._parsedParams)===null||o===void 0?void 0:o[s])===null||u===void 0?void 0:u.value}})}}get rawParamValues(){var e,t;return(t=(e=this._params)===null||e===void 0?void 0:e.map(r=>r.value))!==null&&t!==void 0?t:[]}get prefix(){return this._prefix}get command(){return this._command}get tags(){return this._tags}get rawLine(){return this._raw}isResponseTo(e){return!1}endsResponseTo(e){return!1}_acceptsInReplyCollection(e){return e.isResponseTo(this)}_buildCommandFromNamedParams(){const e=this._paramSpec?Object.keys(this._paramSpec):[];return[this._command,...e.map(t=>{var r;const i=(r=this._parsedParams)===null||r===void 0?void 0:r[t];if(i)return(i.trailing?":":"")+i.value}).filter(t=>t!==void 0)].join(" ")}_buildCommandFromRawParams(){var e,t;return[this._command,...(t=(e=this._params)===null||e===void 0?void 0:e.map(r=>`${r.trailing?":":""}${r.value}`))!==null&&t!==void 0?t:[]].join(" ")}}N.COMMAND="";N.SUPPORTS_CAPTURE=!1;class Jf extends N{constructor(e,t,r){super(e,t,r,{reference:{},type:{optional:!0},additionalParams:{optional:!0}})}}Jf.COMMAND="BATCH";const mS={name:"batch",messageTypes:[Jf],usesTags:!0},_S={name:"cap-notify"};class Yf extends N{constructor(e,t,r){super(e,t,r,{newUser:{},newHost:{}})}}Yf.COMMAND="CHGHOST";const gS={name:"chghost",messageTypes:[Yf]},fS={name:"invite-notify"};class Zf extends N{}Zf.COMMAND="ACK";const yS={name:"labeled-response",messageTypes:[Zf],usesTags:!0},bS={name:"message-tags",usesTags:!0},vS={name:"multi-prefix"},wS=Object.freeze(Object.defineProperty({__proto__:null,AwayNotify:sS,Batch:mS,CapNotify:_S,ChgHost:gS,InviteNotify:fS,LabeledResponse:yS,MessageTags:bS,MultiPrefix:vS},Symbol.toStringTag,{value:"Module"}));class xS{constructor(e,t,...r){this._client=e,this._originalMessage=t,this._messages=[],this._endEventHandlers=new Map,this._types=new Set(r)}untilEvent(e){this._cleanEndEventHandler(e);const t=this._client.on(e,()=>this.end());this._endEventHandlers.set(e,t)}async promise(){return this._promise||(this._promise=new Promise(e=>{this._promiseResolve=e})),await this._promise}collect(e){return this._originalMessage._acceptsInReplyCollection(e)?(this._messages.push(e),e.endsResponseTo(this._originalMessage)&&this.end(),!0):!1}end(){this._client.stopCollect(this),this._cleanEndEventHandlers(),this._promiseResolve&&this._promiseResolve(this._messages)}_cleanEndEventHandlers(){this._endEventHandlers.forEach(e=>{this._client.removeListener(e)}),this._endEventHandlers.clear()}_cleanEndEventHandler(e){this._endEventHandlers.has(e)&&(this._client.removeListener(this._endEventHandlers.get(e)),this._endEventHandlers.delete(e))}}class Qc extends N{constructor(e,t,r){super(e,t,r,{password:{}})}}Qc.COMMAND="PASS";class bs extends N{constructor(e,t,r){super(e,t,r,{nick:{}})}}bs.COMMAND="NICK";class Wc extends N{constructor(e,t,r){super(e,t,r,{user:{},mode:{},unused:{},realName:{trailing:!0}})}}Wc.COMMAND="USER";class ey extends N{constructor(e,t,r){super(e,t,r,{name:{},password:{}})}}ey.COMMAND="OPER";class Vc extends N{constructor(e,t,r){super(e,t,r,{text:{trailing:!0,optional:!0}})}}Vc.COMMAND="QUIT";class ty extends N{constructor(e,t,r){super(e,t,r,{server:{},reason:{trailing:!0}})}}ty.COMMAND="SQUIT";class Bo extends N{constructor(e,t,r){super(e,t,r,{channel:{type:"channel"},key:{optional:!0}})}}Bo.COMMAND="JOIN";class Oo extends N{constructor(e,t,r){super(e,t,r,{channel:{type:"channel"},reason:{trailing:!0,optional:!0}})}}Oo.COMMAND="PART";class Uo extends Error{constructor(e){super(`Unknown channel mode character ${e}`),this._char=e,Object.setPrototypeOf(this,Uo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uo)}get char(){return this._char}}class ry extends N{constructor(e,t,r){super(e,t,r,{target:{},modes:{rest:!0,optional:!0}})}get isChannel(){return oc(this.target,this._serverProperties.channelTypes)}separate(){const e=[],t=this.modes;if(!t)throw new Error("can't separate a channel mode request, just set actions");const r=t.split(" "),i=r.shift();let a="add";for(const s of i){let o=a;switch(s){case"+":{a="add";break}case"-":{a="remove";break}default:{let u=!1,h=!0;if(this.isChannel){if(this._serverProperties.supportedChannelModes.alwaysWithParam.includes(s)||this._serverProperties.supportedChannelModes.prefix.includes(s))u=!0;else if(this._serverProperties.supportedChannelModes.paramWhenSet.includes(s))a==="add"&&(u=!0);else if(this._serverProperties.supportedChannelModes.list.includes(s))r.length?u=!0:o="getList";else if(!this._serverProperties.supportedChannelModes.noParam.includes(s))throw new Uo(s)}else h=this._serverProperties.supportedUserModes.includes(s);if(u&&!r.length)continue;e.push({prefix:this._prefix,action:o,letter:s,param:u?r.shift():void 0,known:h})}}}return e}}ry.COMMAND="MODE";class ny extends N{constructor(e,t,r){super(e,t,r,{channel:{type:"channel"},newTopic:{optional:!0,trailing:!0}})}}ny.COMMAND="TOPIC";class Vs extends N{constructor(e,t,r){super(e,t,r,{channel:{type:"channelList",optional:!0}})}}Vs.COMMAND="NAMES";Vs.SUPPORTS_CAPTURE=!0;class iy extends N{constructor(e,t,r){super(e,t,r,{channel:{optional:!0},server:{optional:!0}})}}iy.COMMAND="LIST";class ay extends N{constructor(e,t,r){super(e,t,r,{target:{},channel:{type:"channel"}})}}ay.COMMAND="INVITE";class sy extends N{constructor(e,t,r){super(e,t,r,{channel:{type:"channel"},target:{},reason:{trailing:!0,optional:!0}})}}sy.COMMAND="KICK";class oy extends N{constructor(e,t,r){super(e,t,r,{server:{optional:!0}})}}oy.COMMAND="TIME";class xs extends N{constructor(e,t,r){super(e,t,r,{target:{},text:{trailing:!0}})}}xs.COMMAND="PRIVMSG";class zc extends N{constructor(e,t,r){super(e,t,r,{target:{},text:{trailing:!0}})}}zc.COMMAND="NOTICE";class fl extends N{constructor(e,t,r){super(e,t,r,{mask:{},flags:{optional:!0},extendedMask:{optional:!0,trailing:!0}})}}fl.COMMAND="WHO";class ly extends N{constructor(e,t,r){super(e,t,r,{server:{optional:!0},nickMask:{}})}}ly.COMMAND="WHOIS";class uy extends N{constructor(e,t,r){super(e,t,r,{nick:{},count:{optional:!0},server:{optional:!0}})}}uy.COMMAND="WHOWAS";class cy extends N{constructor(e,t,r){super(e,t,r,{target:{},reason:{trailing:!0,optional:!0}})}}cy.COMMAND="KILL";class qo extends N{constructor(e,t,r){super(e,t,r,{text:{trailing:!0}})}}qo.COMMAND="PING";class ko extends N{constructor(e,t,r){super(e,t,r,{server:{noClient:!0},text:{trailing:!0}})}}ko.COMMAND="PONG";class dy extends N{constructor(e,t,r){super(e,t,r,{text:{trailing:!0}})}}dy.COMMAND="ERROR";class hy extends N{constructor(e,t,r){super(e,t,r,{text:{trailing:!0,optional:!0}})}}hy.COMMAND="AWAY";class py extends N{}py.COMMAND="REHASH";class my extends N{}my.COMMAND="RESTART";class _y extends N{constructor(e,t,r){super(e,t,r,{text:{trailing:!0}})}}_y.COMMAND="WALLOPS";class gy extends N{constructor(e,t,r){super(e,t,r,{nicks:{rest:!0}})}}gy.COMMAND="USERHOST";class fy extends N{constructor(e,t,r){super(e,t,r,{nicks:{rest:!0}})}}fy.COMMAND="ISON";class Ze extends N{constructor(e,t,r){super(e,t,r,{target:{match:/^(?:[a-z_\-\[\]\\^{}|`][a-z0-9_\-\[\]\\^{}|`]+|\*)$/i,optional:!0,noClient:!0},subCommand:{match:/^(?:LS|LIST|REQ|ACK|NAK|END|NEW|DEL)$/i},version:{match:/^\d+$/,optional:!0},continued:{match:/^\*$/,optional:!0},capabilities:{trailing:!0,optional:!0}})}isResponseTo(e){if(!(e instanceof Ze))return!1;switch(this.subCommand){case"ACK":case"NAK":return e.subCommand==="REQ"&&e.capabilities===this.capabilities.trim();case"LS":case"LIST":return e.subCommand===this.subCommand;default:return!1}}endsResponseTo(e){if(!(e instanceof Ze))return!1;switch(this.subCommand){case"LS":case"LIST":return!this.continued;default:return!0}}}Ze.COMMAND="CAP";Ze.SUPPORTS_CAPTURE=!0;class yy extends N{constructor(e,t,r){super(e,t,r,{target:{}})}}yy.COMMAND="TAGMSG";const by=Object.freeze(Object.defineProperty({__proto__:null,Away:hy,CapabilityNegotiation:Ze,ChannelInvite:ay,ChannelJoin:Bo,ChannelKick:sy,ChannelList:iy,ChannelPart:Oo,ClientQuit:Vc,ErrorMessage:dy,IsOnQuery:fy,Kill:cy,Mode:ry,Names:Vs,NickChange:bs,Notice:zc,OperLogin:ey,Password:Qc,Ping:qo,Pong:ko,PrivateMessage:xs,Rehash:py,Restart:my,ServerQuit:ty,TagMessage:yy,Time:oy,Topic:ny,UserHostQuery:gy,UserRegistration:Wc,Wallops:_y,WhoIsQuery:ly,WhoQuery:fl,WhoWasQuery:uy},Symbol.toStringTag,{value:"Module"}));class Kc extends N{constructor(e,t,r){super(e,t,r,{me:{},welcomeText:{trailing:!0}})}}Kc.COMMAND="001";class vy extends N{constructor(e,t,r){super(e,t,r,{me:{},yourHost:{trailing:!0}})}}vy.COMMAND="002";class wy extends N{constructor(e,t,r){super(e,t,r,{me:{},createdText:{trailing:!0}})}}wy.COMMAND="003";class Xc extends N{constructor(e,t,r){super(e,t,r,{me:{},serverName:{},version:{},userModes:{},channelModes:{},channelModesWithParam:{optional:!0}})}}Xc.COMMAND="004";class Jc extends N{constructor(e,t,r){super(e,t,r,{me:{},supports:{rest:!0},suffix:{trailing:!0}})}}Jc.COMMAND="005";class xy extends N{constructor(e,t,r){super(e,t,r,{me:{},modes:{}})}}xy.COMMAND="221";class Sy extends N{constructor(e,t,r){super(e,t,r,{me:{},nick:{},text:{trailing:!0}})}}Sy.COMMAND="301";class Cy extends N{constructor(e,t,r){super(e,t,r,{me:{},hosts:{trailing:!0}})}}Cy.COMMAND="302";class Ey extends N{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Ey.COMMAND="305";class Hy extends N{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Hy.COMMAND="306";class Ay extends N{constructor(e,t,r){super(e,t,r,{me:{},nick:{},username:{},host:{},_unused:{},realname:{trailing:!0}})}}Ay.COMMAND="311";class Ry extends N{constructor(e,t,r){super(e,t,r,{me:{},query:{},suffix:{trailing:!0}})}isResponseTo(e){return e instanceof fl}endsResponseTo(){return!0}}Ry.COMMAND="315";class Ty extends N{constructor(e,t,r){super(e,t,r,{me:{},nickMask:{},suffix:{trailing:!0}})}}Ty.COMMAND="318";class Iy extends N{constructor(e,t,r){super(e,t,r,{me:{},nick:{},channels:{trailing:!0}})}}Iy.COMMAND="319";class Py extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},memberCount:{},topic:{trailing:!0}})}}Py.COMMAND="322";class Dy extends N{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Dy.COMMAND="323";class By extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},modes:{rest:!0}})}}By.COMMAND="324";class Oy extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Oy.COMMAND="331";class Uy extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},topic:{trailing:!0}})}}Uy.COMMAND="332";class qy extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},who:{},ts:{}})}}qy.COMMAND="333";class ky extends N{constructor(e,t,r){super(e,t,r,{me:{},nick:{},channel:{type:"channel"}})}}ky.COMMAND="341";class My extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},mask:{},creatorName:{optional:!0},timestamp:{optional:!0}})}}My.COMMAND="348";class jy extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}jy.COMMAND="349";class Ly extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{},user:{},host:{},server:{},nick:{},flags:{},hopsAndRealName:{trailing:!0}})}get isAway(){return this.flags.includes("G")}get isOper(){return this.flags.includes("*")}get isBot(){return this.flags.includes("B")}isResponseTo(e){return e instanceof fl}}Ly.COMMAND="352";class Ny extends N{constructor(e,t,r){super(e,t,r,{me:{},channelType:{},channel:{type:"channel"},names:{trailing:!0}})}isResponseTo(e){return e instanceof Vs}}Ny.COMMAND="353";class Fy extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{},suffix:{trailing:!0}})}isResponseTo(e){return e instanceof Vs}endsResponseTo(){return!0}}Fy.COMMAND="366";class $y extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},mask:{},creatorName:{optional:!0},timestamp:{optional:!0}})}}$y.COMMAND="367";class Gy extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Gy.COMMAND="368";class Qy extends N{constructor(e,t,r){super(e,t,r,{me:{},line:{trailing:!0}})}}Qy.COMMAND="372";class Wy extends N{constructor(e,t,r){super(e,t,r,{me:{},line:{trailing:!0}})}}Wy.COMMAND="375";class Yc extends N{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Yc.COMMAND="376";class Vy extends N{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Vy.COMMAND="381";class zy extends N{constructor(e,t,r){super(e,t,r,{me:{},server:{optional:!0},timestamp:{trailing:!0}})}}zy.COMMAND="391";class Ky extends N{constructor(e,t,r){super(e,t,r,{me:{},nick:{},suffix:{trailing:!0}})}}Ky.COMMAND="401";class Xy extends N{constructor(e,t,r){super(e,t,r,{me:{},server:{},suffix:{trailing:!0}})}}Xy.COMMAND="402";class Jy extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{},suffix:{trailing:!0}})}}Jy.COMMAND="403";class Yy extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Yy.COMMAND="404";class Zy extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Zy.COMMAND="405";class eb extends N{constructor(e,t,r){super(e,t,r,{me:{},subCommand:{},suffix:{trailing:!0}})}}eb.COMMAND="410";class tb extends N{constructor(e,t,r){super(e,t,r,{me:{},originalCommand:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command===this.originalCommand}endsResponseTo(){return!0}}tb.COMMAND="421";class Zc extends N{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}Zc.COMMAND="422";class rb extends N{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}rb.COMMAND="431";class nb extends N{constructor(e,t,r){super(e,t,r,{me:{},nick:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}nb.COMMAND="432";class ib extends N{constructor(e,t,r){super(e,t,r,{me:{},nick:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}ib.COMMAND="433";class ab extends N{constructor(e,t,r){super(e,t,r,{me:{},nick:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}ab.COMMAND="436";class sb extends N{constructor(e,t,r){super(e,t,r,{me:{},nick:{},channel:{type:"channel"},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}sb.COMMAND="441";class ob extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}ob.COMMAND="442";class lb extends N{constructor(e,t,r){super(e,t,r,{me:{},nick:{},channel:{type:"channel"},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}lb.COMMAND="443";class ub extends N{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}ub.COMMAND="451";class cb extends N{constructor(e,t,r){super(e,t,r,{me:{},originalCommand:{},suffix:{trailing:!0}})}}cb.COMMAND="461";class ed extends N{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}ed.COMMAND="462";class db extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}db.COMMAND="471";class hb extends N{constructor(e,t,r){super(e,t,r,{me:{},char:{},suffix:{trailing:!0}})}}hb.COMMAND="472";class pb extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}pb.COMMAND="473";class mb extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}mb.COMMAND="474";class _b extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}_b.COMMAND="475";class gb extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{},suffix:{trailing:!0}})}}gb.COMMAND="479";class fb extends N{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}fb.COMMAND="481";class yb extends N{constructor(e,t,r){super(e,t,r,{me:{},channel:{},suffix:{trailing:!0}})}}yb.COMMAND="482";class bb extends N{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}bb.COMMAND="491";class vb extends N{constructor(e,t,r){super(e,t,r,{me:{},modeChar:{optional:!0,match:/^\w$/},suffix:{trailing:!0}})}}vb.COMMAND="501";class wb extends N{constructor(e,t,r){super(e,t,r,{me:{},suffix:{trailing:!0}})}}wb.COMMAND="502";const xb=Object.freeze(Object.defineProperty({__proto__:null,Error401NoSuchNick:Ky,Error402NoSuchServer:Xy,Error403NoSuchChannel:Jy,Error404CanNotSendToChan:Yy,Error405TooManyChannels:Zy,Error410InvalidCapCmd:eb,Error421UnknownCommand:tb,Error422NoMotd:Zc,Error431NoNickNameGiven:rb,Error432ErroneusNickname:nb,Error433NickNameInUse:ib,Error436NickCollision:ab,Error441UserNotInChannel:sb,Error442NotOnChannel:ob,Error443UserOnChannel:lb,Error451NotRegistered:ub,Error461NeedMoreParams:cb,Error462AlreadyRegistered:ed,Error471ChannelIsFull:db,Error472UnknownMode:hb,Error473InviteOnlyChan:pb,Error474BannedFromChan:mb,Error475BadChannelKey:_b,Error479BadChanName:gb,Error481NoPrivileges:fb,Error482ChanOpPrivsNeeded:yb,Error491NoOperHost:bb,Error501UmodeUnknownFlag:vb,Error502UsersDontMatch:wb,Reply001Welcome:Kc,Reply002YourHost:vy,Reply003Created:wy,Reply004ServerInfo:Xc,Reply005Isupport:Jc,Reply221UmodeIs:xy,Reply301Away:Sy,Reply302UserHost:Cy,Reply305UnAway:Ey,Reply306NowAway:Hy,Reply311WhoisUser:Ay,Reply315EndOfWho:Ry,Reply318EndOfWhois:Ty,Reply319WhoisChannels:Iy,Reply322List:Py,Reply323ListEnd:Dy,Reply324ChannelModeIs:By,Reply331NoTopic:Oy,Reply332Topic:Uy,Reply333TopicWhoTime:qy,Reply341Inviting:ky,Reply348ExceptList:My,Reply349EndOfExceptList:jy,Reply352WhoReply:Ly,Reply353NamesReply:Ny,Reply366EndOfNames:Fy,Reply367BanList:$y,Reply368EndOfBanList:Gy,Reply372Motd:Qy,Reply375MotdStart:Wy,Reply376EndOfMotd:Yc,Reply381YoureOper:Vy,Reply391Time:zy},Symbol.toStringTag,{value:"Module"})),SS=new Map([...Object.values(by),...Object.values(xb)].map(n=>[n.COMMAND,n]));function CS(n){const[e,t]=er(n,"!",2);if(t){const[r,i]=er(t,"@",2);return i?{nick:e,user:r,host:i}:{nick:e,host:r}}return{nick:e}}const bh={":":";",n:`
`,r:"\r",s:" "};function ES(n){const e=new Map,t=n.split(";");for(const r of t){const[i,a]=er(r,"=",2);i!==""&&e.set(i,a?a.replace(/\\(.?)/g,(s,o)=>Object.prototype.hasOwnProperty.call(bh,o)?bh[o]:o):"")}return e}function HS(n,e=fi,t=SS,r=!1,i=[],a=!0){const s=n.split(" ");let o,u;const h=[];let m,w;for(;s.length;){if([o]=s,o.startsWith("@")&&!m&&!u&&!w)m=ES(o.slice(1));else if(o.startsWith(":"))if(!w&&!u)o.length>1&&(w=CS(o.slice(1)));else{h.push({value:s.join(" ").slice(1),trailing:!0});break}else u?h.push({value:o,trailing:!1}):u=o.toUpperCase();s.shift()}if(m||(m=new Map),!u)throw new Error(`line without command received: ${n}`);a&&(a=!i.includes(u));let y=N;return t.has(u)&&(y=t.get(u)),new y(u,{params:h,tags:m,prefix:w,rawLine:n},{serverProperties:e,isServer:r,shouldParseParams:a})}class AS extends _l{constructor(e){super(),this._registered=!1,this._supportsCapabilities=!0,this._events=new Map,this._registeredMessageTypes=new Map,this.onConnect=this.registerEvent(),this.onRegister=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onPrivmsg=this.registerEvent(),this.onAction=this.registerEvent(),this.onNotice=this.registerEvent(),this.onNickChange=this.registerEvent(),this.onCtcp=this.registerEvent(),this.onCtcpReply=this.registerEvent(),this.onPasswordError=this.registerEvent(),this.onAnyMessage=this.registerEvent(),this._serverProperties=ys(fi),this._supportedFeatures={},this._collectors=[],this._clientCapabilities=new Map,this._serverCapabilities=new Map,this._negotiatedCapabilities=new Map,this._currentChannels=new Set,this._hasRegisteredBefore=!1,this._channelsFromLastRegister=new Set,this._initialConnectionSetupDone=!1;const{connection:t,credentials:r,channels:i,channelTypes:a,webSocket:s,logger:o={}}=e;this._options=e;const{pingOnInactivity:u=60,pingTimeout:h=10}=t;this._pingOnInactivity=u,this._pingTimeout=h,this._currentNick=r.nick,this._logger=ml({name:"ircv3",emoji:!0,...o}),this.registerCoreMessageTypes();const{hostName:m,secure:w,reconnect:y=!0}=t,g={hostName:m,port:this.port,secure:w},p={lineBased:!0,logger:this._logger,additionalOptions:e.connectionOptions},l=s?aS:nS;y?this._connection=new iS(l,g,p):this._connection=new l(p,this._logger,e.connectionOptions);for(const d of Object.values(wS))this.addCapability(d);this.addInternalListener(this.onRegister,async()=>{const d=this._hasRegisteredBefore,v=this._channelsFromLastRegister;this._hasRegisteredBefore=!0,this._channelsFromLastRegister=new Set;const C=d&&this._options.rejoinChannelsOnReconnect?v:await lh(i);if(C)for(const R of C)this.join(R)}),this.onTypedMessage(Ze,async({subCommand:d,capabilities:v})=>{const C=v.split(" ");switch(d.toUpperCase()){case"NEW":{this._logger.debug(`Server registered new capabilities: ${C.join(", ")}`);const R=_s(C,_=>{if(!_)return{};const[x,H]=er(_,"=",2);return{[x]:{name:x,param:H||!0}}});for(const[_,x]of Object.entries(R))this._serverCapabilities.set(_,x);const P=Object.keys(R);await this._negotiateCapabilities(Array.from(this._clientCapabilities.entries()).filter(([_])=>P.includes(_)).map(([,_])=>_));break}case"DEL":{this._logger.debug(`Server removed capabilities: ${C.join(", ")}`);for(const R of C)this._serverCapabilities.delete(R),this._negotiatedCapabilities.delete(R)}}}),this.onTypedMessage(qo,({text:d})=>{this.sendMessage(ko,{text:d})}),this.onTypedMessage(Kc,({me:d})=>this._handleReceivedClientNick(d)),this.onTypedMessage(Xc,({userModes:d})=>{d&&(this._serverProperties.supportedUserModes=d)}),this.onTypedMessage(Jc,({supports:d})=>{const v=_s(d.split(" "),C=>{const[R,P]=er(C,"=",2);return{[R]:P||!0}});this._supportedFeatures={...this._supportedFeatures,...v}}),this.onTypedMessage(Yc,({me:d})=>{this._registered||(this._handleReceivedClientNick(d),this._registered=!0,this.emit(this.onRegister))}),this.onTypedMessage(Zc,({me:d})=>{this._registered||(this._handleReceivedClientNick(d),this._registered=!0,this.emit(this.onRegister))}),this.onTypedMessage(ed,({me:d})=>{this._registered||(this._logger.warn("We thought we're not registered yet, but we actually are"),this._handleReceivedClientNick(d),this._registered=!0,this.emit(this.onRegister))}),this.onTypedMessage(xs,d=>{var v;const{target:C,text:R}=d,P=yh(R),_=(v=d.prefix)===null||v===void 0?void 0:v.nick;P?P.command==="ACTION"?this.emit(this.onAction,C,_,P.params,d):this.emit(this.onCtcp,C,_,P.command,P.params,d):this.emit(this.onPrivmsg,C,_,R,d)}),this.onTypedMessage(bs,d=>{var v;const{nick:C}=d,R=(v=d.prefix)===null||v===void 0?void 0:v.nick;R===this._currentNick&&(this._currentNick=C),this.emit(this.onNickChange,R,C,d)}),this.onTypedMessage(zc,d=>{var v;const{target:C,text:R}=d,P=yh(R),_=(v=d.prefix)===null||v===void 0?void 0:v.nick;P&&this.emit(this.onCtcpReply,C,_,P.command,P.params,d),this.emit(this.onNotice,C,_,R,d)}),this._options.manuallyAcknowledgeJoins||this.onTypedMessage(Bo,({channel:d,prefix:v})=>{(v==null?void 0:v.nick)===this._currentNick&&this.acknowledgeJoin(d)}),this.onTypedMessage(Oo,d=>{var v;((v=d.prefix)===null||v===void 0?void 0:v.nick)===this._currentNick&&(this._currentChannels.delete(d.channel),this._channelsFromLastRegister.delete(d.channel))}),this.addInternalListener(this.onRegister,()=>this._startPingCheckTimer()),this._desiredNick=r.nick,this._userName=r.userName,this._realName=r.realName,a&&(this._serverProperties.channelTypes=a)}receiveLine(e){var t;this._logger.debug(`Received message: ${e}`);let r;try{r=HS(e,this._serverProperties,this._registeredMessageTypes,!0,this._options.nonConformingCommands)}catch(i){this._logger.error(`Error parsing message: ${i.message}`),this._logger.trace((t=i.stack)!==null&&t!==void 0?t:"No stack available");return}this._logger.trace(`Parsed message: ${JSON.stringify(r)}`),this._startPingCheckTimer(),this.emit(this.onAnyMessage,r),this._handleEvents(r)}get serverProperties(){return ys(this._serverProperties)}get port(){const{webSocket:e,connection:{port:t,secure:r}}=this._options;return t||(e?r?443:80:r?6697:6667)}pingCheck(){const e=Date.now(),t=e.toString(),r=this.onTypedMessage(ko,i=>{const{text:a}=i;a===t&&(this._logger.debug(`Current ping: ${Date.now()-e}ms`),this._pingTimeoutTimer&&clearTimeout(this._pingTimeoutTimer),this.removeMessageListener(r))});this._pingTimeoutTimer=setTimeout(()=>{this.removeMessageListener(r),this._options.connection.reconnect===!1?this._logger.error(`Disconnecting because the last ping took over ${this._pingTimeout} seconds`):this._logger.warn(`Reconnecting because the last ping took over ${this._pingTimeout} seconds`),this._connection.assumeExternalDisconnect()},this._pingTimeout*1e3),this.sendMessage(qo,{text:t})}reconnect(e){this.quit(e),this.connect()}registerMessageType(e){e.COMMAND!==""&&(this._logger.trace(`Registering message type ${e.COMMAND}`),this._registeredMessageTypes.set(e.COMMAND.toUpperCase(),e))}knowsCommand(e){return this._registeredMessageTypes.has(e.toUpperCase())}getCommandClass(e){return this._registeredMessageTypes.get(e.toUpperCase())}acknowledgeJoin(e){this._currentChannels.add(e),this._channelsFromLastRegister.add(e)}connect(){this._supportsCapabilities=!1,this._negotiatedCapabilities=new Map,this._currentChannels=new Set,this._currentNick=this._desiredNick,this._setupConnection(),this._logger.info(`Connecting to ${this._options.connection.hostName}:${this.port}`),this._connection.connect()}addCapability(e){if(this._clientCapabilities.set(e.name,e),e.messageTypes)for(const t of Object.values(e.messageTypes))this.registerMessageType(t)}async registerCapability(e){return this.addCapability(e),this._serverCapabilities.has(e.name)?await this._negotiateCapabilities([e]):[]}send(e){this.sendRaw(e.toString())}sendRaw(e){this._connection.isConnected&&(this._logger.debug(`Sending message: ${e}`),this._connection.sendLine(e))}onNamedMessage(e,t,r){this._events.has(e)||this._events.set(e,new Map);const i=this._events.get(e);if(!r)do r=`${e}:${Px(Math.random()*1e4,4,"0")}`;while(i.has(r));return i.set(r,t),r}onTypedMessage(e,t,r){return this.onNamedMessage(e.COMMAND,t,r)}removeMessageListener(e){const[t]=e.split(":");this._events.has(t)&&this._events.get(t).delete(e)}createMessage(e,t,r){const i=r?new Map(Object.entries(r)):void 0;return pS(e,t,void 0,i,this.serverProperties)}sendMessage(e,t,r){this.send(this.createMessage(e,t,r))}async sendMessageAndCaptureReply(e,t){if(!e.SUPPORTS_CAPTURE)throw new Error(`The command "${e.COMMAND}" does not support reply capture`);const r=this.createMessage(e,t),i=this.collect(r).promise();return this.send(r),await i}get isConnected(){return this._connection.isConnected}get isConnecting(){return this._connection.isConnecting}get isRegistered(){return this._registered}get currentNick(){return this._currentNick}get currentChannels(){return Array.from(this._currentChannels)}collect(e,...t){const r=new xS(this,e,...t);return this._collectors.push(r),r}stopCollect(e){this._collectors.splice(this._collectors.findIndex(t=>t===e),1)}join(e,t){this.sendMessage(Bo,{channel:e,key:t})}part(e){this.sendMessage(Oo,{channel:e})}quit(e){this.sendMessage(Vc,{text:e}),this.quitAbruptly()}quitAbruptly(){this._registered=!1,this._connection.disconnect()}say(e,t,r={}){this.sendMessage(xs,{target:e,text:t},r)}sendCtcp(e,t,r){this.say(e,`${t.toUpperCase()} ${r}`)}action(e,t){this.sendCtcp(e,"ACTION",t)}changeNick(e){this._currentNick!==e&&(this._desiredNick=e,this.isRegistered&&this.sendMessage(bs,{nick:e}))}registerCoreMessageTypes(){rc(by,e=>{this.registerMessageType(e)}),rc(xb,e=>{this.registerMessageType(e)})}async _negotiateCapabilityBatch(e){return await Promise.all(e.filter(t=>t.length).map(async t=>await this._negotiateCapabilities(t)))}async _negotiateCapabilities(e){const t=_s(e,s=>({[s.name]:s})),i=(await this.sendMessageAndCaptureReply(Ze,{subCommand:"REQ",capabilities:e.map(s=>s.name).join(" ")})).shift();if(!i)throw new Error("capability negotiation failed unexpectedly without any reply");if(!(i instanceof Ze))throw new Error(`capability negotiation failed unexpectedly with "${i.command}" command`);const a=i.capabilities.split(" ").filter(s=>s);if(i.subCommand==="ACK"){this._logger.debug(`Successfully negotiated capabilities: ${a.join(", ")}`);const s=a.map(o=>t[o]);for(const o of s){const u=this._clientCapabilities.get(o.name);u.param=o.param,this._negotiatedCapabilities.set(u.name,u)}return s}return this._logger.warn(`Failed to negotiate capabilities: ${a.join(", ")}`),new Error("capabilities failed to negotiate")}_setupConnection(){this._initialConnectionSetupDone||(this._connection.onConnect(async()=>{var e,t;this._logger.info(`Connection to server ${this._options.connection.hostName}:${this.port} established`),this.emit(this.onConnect),this._logger.debug("Determining connection password");try{const[r]=await Promise.all([lh(this._options.credentials.password),this.sendMessageAndCaptureReply(Ze,{subCommand:"LS",version:"302"}).then(async i=>{if(!i.length||!(i[0]instanceof Ze))return this._logger.debug("Server does not support capabilities"),[];this._supportsCapabilities=!0;const a=i.map(o=>_s(o.capabilities.split(" "),u=>{if(!u)return{};const[h,m]=er(u,"=",2);return{[h]:{name:h,param:m||!0}}}));this._serverCapabilities=new Map(Object.entries(Object.assign({},...a))),this._logger.debug(`Capabilities supported by server: ${Array.from(this._serverCapabilities.keys()).join(", ")}`);const s=a.map(o=>{const u=Object.keys(o);return Array.from(this._clientCapabilities.entries()).filter(([h])=>u.includes(h)).map(([,h])=>h)});return await this._negotiateCapabilityBatch(s)}).then(()=>{this.sendMessage(Ze,{subCommand:"END"})})]);r&&this.sendMessage(Qc,{password:r}),this.sendMessage(bs,{nick:this._desiredNick}),this.sendMessage(Wc,{user:(e=this._userName)!==null&&e!==void 0?e:this._desiredNick,mode:"8",unused:"*",realName:(t=this._realName)!==null&&t!==void 0?t:this._desiredNick})}catch(r){this.emit(this.onPasswordError,r),this.quit()}}),this._initialConnectionSetupDone=!0,this._connection.onReceive(e=>{this.receiveLine(e)}),this._connection.onDisconnect((e,t)=>{var r;if(this._registered=!1,this._pingCheckTimer&&clearTimeout(this._pingCheckTimer),this._pingTimeoutTimer&&clearTimeout(this._pingTimeoutTimer),e)this._logger.info("Disconnected");else{const i=(r=this._options.connection.reconnect)!==null&&r!==void 0?r:!0,a=t?`Disconnected unexpectedly: ${t.message}`:"Disconnected unexpectedly";i?this._logger.warn(`${a}; trying to reconnect`):this._logger.error(a)}this.emit(this.onDisconnect,e,t)}),this._connection.onEnd(e=>{e||this._logger.warn("No further retries will be made")}))}_handleReceivedClientNick(e){this._currentNick!==e&&(this._currentNick!==""&&this._logger.warn(`Mismatching nicks: passed ${this._currentNick}, but you're actually ${e}`),this._currentNick=e)}_handleEvents(e){this._collectors.some(r=>r.collect(e));const t=this._events.get(e.constructor.COMMAND);if(t)for(const r of t.values())r(e)}_startPingCheckTimer(){this._pingCheckTimer&&clearTimeout(this._pingCheckTimer),this._connection.isConnected?this._pingCheckTimer=setTimeout(()=>this.pingCheck(),this._pingOnInactivity*1e3):this._pingCheckTimer=void 0}}I([V(!1)],AS.prototype,"_options",void 0);function RS(n){switch(typeof n){case"undefined":return"";case"object":{if(n===null)return"";if("cacheKey"in n)return n.cacheKey;const e=JSON.stringify(n);if(e!=="{}")return e}default:return n.toString()}}function Sb(n,e,t){return[n,...e.map(RS)].join("/")+(t?"/":"")}const _t=Symbol("cache");function zs(n){var e,t;return t=class extends n{constructor(){super(...arguments),this[e]=new Map}getFromCache(r){if(this._cleanCache(),this[_t].has(r)){const i=this[_t].get(r);if(i)return i.value}}setCache(r,i,a){this[_t].set(r,{value:i,expires:Date.now()+a*1e3})}removeFromCache(r,i){const a=this._getInternalCacheKey(r,i);i?this[_t].forEach((s,o)=>{o.startsWith(a)&&this[_t].delete(o)}):this[_t].delete(a)}_cleanCache(){const r=Date.now();this[_t].forEach((i,a)=>{i.expires<r&&this[_t].delete(a)})}_getInternalCacheKey(r,i){if(typeof r=="string"){let a=r;return a.endsWith("/")||(a+="/"),a}else{const a=r.shift();return Sb(a,r,i)}}},e=_t,t}function ge(n=1/0){return function(e,t,r){if(r.get){const i=r.get;r.get=function(){const a=Sb(t,[]),s=this.getFromCache(a);if(s)return s;const o=i.call(this);return this.setCache(a,o,n),o}}return r}}var Eo;let Ai=Eo=class{constructor(e,t){this._userName=e.toLowerCase(),this._userData=t?new Map(t):new Map}static _parseBadgesLike(e){return e?new Map(e.split(",").map(t=>{const r=t.indexOf("/");return r===-1?[t,""]:[t.slice(0,r),t.slice(r+1)]})):new Map}get userName(){return this._userName}get displayName(){var e;return(e=this._userData.get("display-name"))!==null&&e!==void 0?e:this._userName}get color(){return this._userData.get("color")}get badges(){const e=this._userData.get("badges");return Eo._parseBadgesLike(e)}get badgeInfo(){const e=this._userData.get("badge-info");return Eo._parseBadgesLike(e)}get userId(){return this._userData.get("user-id")}get userType(){return this._userData.get("user-type")}get isBroadcaster(){return this.badges.has("broadcaster")}get isSubscriber(){return this.badges.has("subscriber")||this.isFounder}get isFounder(){return this.badges.has("founder")}get isMod(){return this.badges.has("moderator")}get isVip(){const e=this._userData.get("vip");return e!=null&&e!=="0"}get isArtist(){return this.badges.has("artist-badge")}};I([V(!1)],Ai.prototype,"_userData",void 0);I([ge()],Ai.prototype,"badges",null);I([ge()],Ai.prototype,"badgeInfo",null);Ai=Eo=I([zs,j("chat","ChatUser","userId")],Ai);function TS(n){return n?new Map(n.split("/").map(e=>{const[t,r]=e.split(":",2);return r?[t,r.split(",")]:null}).filter(e=>e!==null)):new Map}const IS=["ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","TEN"];let lc=class extends xs{get id(){return this._tags.get("id")}get date(){const e=this._tags.get("tmi-sent-ts");return new Date(Number(e))}get userInfo(){return new Ai(this._prefix.nick,this._tags)}get channelId(){var e;return(e=this._tags.get("room-id"))!==null&&e!==void 0?e:null}get isCheer(){return this._tags.has("bits")}get isRedemption(){return!!this._tags.get("custom-reward-id")}get rewardId(){return this._tags.get("custom-reward-id")||null}get isFirst(){return this._tags.get("first-msg")==="1"}get isReturningChatter(){return this._tags.get("returning-chatter")==="1"}get isHighlight(){return this._tags.get("msg-id")==="highlighted-message"}get isReply(){return this._tags.has("reply-parent-msg-id")}get parentMessageId(){var e;return(e=this._tags.get("reply-parent-msg-id"))!==null&&e!==void 0?e:null}get parentMessageText(){var e;return(e=this._tags.get("reply-parent-msg-body"))!==null&&e!==void 0?e:null}get parentMessageUserId(){var e;return(e=this._tags.get("reply-parent-user-id"))!==null&&e!==void 0?e:null}get parentMessageUserName(){var e;return(e=this._tags.get("reply-parent-user-login"))!==null&&e!==void 0?e:null}get parentMessageUserDisplayName(){var e;return(e=this._tags.get("reply-parent-display-name"))!==null&&e!==void 0?e:null}get threadMessageId(){var e;return(e=this._tags.get("reply-thread-parent-msg-id"))!==null&&e!==void 0?e:null}get threadMessageUserId(){var e;return(e=this._tags.get("reply-thread-parent-user-id"))!==null&&e!==void 0?e:null}get bits(){var e;return Number((e=this._tags.get("bits"))!==null&&e!==void 0?e:0)}get emoteOffsets(){return TS(this._tags.get("emotes"))}get isHypeChat(){return this._tags.has("pinned-chat-paid-amount")}get hypeChatAmount(){return Je(this._tags.get("pinned-chat-paid-amount"),Number)}get hypeChatDecimalPlaces(){return Je(this._tags.get("pinned-chat-paid-exponent"),Number)}get hypeChatLocalizedAmount(){const e=this.hypeChatAmount;return e?e/10**this.hypeChatDecimalPlaces:null}get hypeChatCurrency(){var e;return(e=this._tags.get("pinned-chat-paid-currency"))!==null&&e!==void 0?e:null}get hypeChatLevel(){const e=this._tags.get("pinned-chat-paid-level");return e?IS.indexOf(e)+1:null}get hypeChatIsSystemMessage(){const e=this._tags.get("pinned-chat-paid-is-system-message");return e?!!Number(e):null}};lc=I([j("chat","ChatMessage","id")],lc);const PS={mp4:"video/mp4",m4v:"video/mp4",mov:"video/quicktime",qt:"video/quicktime",webm:"video/webm",ogv:"video/ogg",ogg:"video/ogg",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",flv:"video/x-flv",mkv:"video/x-matroska","3gp":"video/3gpp","3g2":"video/3gpp2",mpeg:"video/mpeg",mpg:"video/mpeg",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp",svg:"image/svg+xml",svgz:"image/svg+xml",bmp:"image/bmp",ico:"image/x-icon",tif:"image/tiff",tiff:"image/tiff",avif:"image/avif",apng:"image/apng",jfif:"image/jpeg",pjpeg:"image/jpeg",pjp:"image/jpeg"};function DS(n){const e=/<img\s+([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi;return n.replace(e,(t,r,i,a)=>{var h;const s=((h=i.split(".").pop())==null?void 0:h.toLowerCase().split(/[#?]/)[0])||"";debugger;const o=PS[s]||"application/octet-stream";return/type=["'][^"']*["']/i.test(t)?t:`<img ${r}src="${i}" type="${o}"${a}>`})}var yu={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var vh;function BS(){return vh||(vh=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var a="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(a=i(a,r(o)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var s="";for(var o in a)e.call(a,o)&&a[o]&&(s=i(s,o));return s}function i(a,s){return s?a?a+" "+s:a+s:a}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(yu)),yu.exports}var OS=BS();const Cb=Ii(OS),US=["xxl","xl","lg","md","sm","xs"],qS="xs",yl=Pi.createContext({prefixes:{},breakpoints:US,minBreakpoint:qS}),{Consumer:ME,Provider:jE}=yl;function Eb(n,e){const{prefixes:t}=Pi.useContext(yl);return n||t[e]||e}function kS(){const{breakpoints:n}=Pi.useContext(yl);return n}function MS(){const{minBreakpoint:n}=Pi.useContext(yl);return n}const Hb=Pi.forwardRef(({bsPrefix:n,fluid:e=!1,as:t="div",className:r,...i},a)=>{const s=Eb(n,"container"),o=typeof e=="string"?`-${e}`:"-fluid";return lt.jsx(t,{ref:a,...i,className:Cb(r,e?`${s}${o}`:s)})});Hb.displayName="Container";const mi=Pi.forwardRef(({bsPrefix:n,className:e,as:t="div",...r},i)=>{const a=Eb(n,"row"),s=kS(),o=MS(),u=`${a}-cols`,h=[];return s.forEach(m=>{const w=r[m];delete r[m];let y;w!=null&&typeof w=="object"?{cols:y}=w:y=w;const g=m!==o?`-${m}`:"";y!=null&&h.push(`${u}${g}-${y}`)}),lt.jsx(t,{ref:i,...r,className:Cb(e,a,...h)})});mi.displayName="Row";const jS="_grid_1uqjo_1",LS="_grid_cell_1uqjo_13",mr={grid:jS,grid_cell:LS};var bu,wh;function Ks(){if(wh)return bu;wh=1;class n{constructor(t,r,i){if(new.target.name===n.name)throw new Error("Base Emote class cannot be used");this.fetcher=t.fetcher,this.channel=t,this.id=r,this.type=null,this._setup(i)}_setup(t){this.code=t.code}toLink(){return null}toString(){return this.code}toObject(){return{code:this.code,id:this.id,channel_id:this.channel.channel_id}}}return bu=n,bu}var vu,xh;function ir(){return xh||(xh=1,vu={Twitch:{CDN:(n,e)=>`https://static-cdn.jtvnw.net/emoticons/v2/${n}/default/dark/${e+1}.0`},BTTV:{Global:"https://api.betterttv.net/3/cached/emotes/global",Channel:n=>`https://api.betterttv.net/3/cached/users/twitch/${n}`,CDN:(n,e)=>`https://cdn.betterttv.net/emote/${n}/${e+1}x.webp`},SevenTV:{Global:"https://7tv.io/v3/emote-sets/global",Channel:n=>`https://7tv.io/v3/users/twitch/${n}`,CDN:(n,e)=>`https://cdn.7tv.app/emote/${n}/${e}`},FFZ:{sets:{Global:3,Modifiers:1532818},Set:n=>`https://api.frankerfacez.com/v1/set/${n}`,Channel:n=>`https://api.frankerfacez.com/v1/room/id/${n}`,CDN:(n,e)=>`https://cdn.frankerfacez.com/emote/${n}/${e}`,CDNAnimated:(n,e)=>`https://cdn.frankerfacez.com/emote/${n}/animated/${e}.webp`},Templates:{html:'<img alt="{name}" title="{name}" class="twitch-emote twitch-emote-{size}" src="{link}">',markdown:'![{name}]({link} "{name}")',bbcode:"[img]{link}[/img]",plain:"{link}"}}),vu}var wu,Sh;function Ab(){if(Sh)return wu;Sh=1;const n=Ks(),e=ir();class t extends n{constructor(i,a,s){super(i,a,s),this.type="bttv"}get owner(){return this.fetcher.channels.get(this.ownerName)}_setup(i){super._setup(i),this.ownerName="user"in i?i.user.name:null,this.animated=i.animated,this.imageType="webp"}toLink(i=0){return e.BTTV.CDN(this.id,i)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,ownerName:this.ownerName,type:this.type})}static fromObject(i,a=null){return new t(a,i.id,{code:i.code,animated:i.animated,user:{name:i.ownerName}})}}return wu=t,wu}var xu,Ch;function td(){if(Ch)return xu;Ch=1;class n extends Map{find(t,r){if(typeof t=="string"){if(typeof r>"u")return null;for(const i of this.values())if(i[t]===r)return i;return null}if(typeof t=="function"){let i=0;for(const a of this.values()){if(t(a,i,this))return a;i++}return null}return null}filter(t,r){r&&(t=t.bind(r));const i=new this.constructor;let a=0;for(const[s,o]of this)t(o,a,this)&&i.set(s,o),a++;return i}map(t,r){r&&(t=t.bind(r));const i=new Array(this.size);let a=0;for(const s of this.values())i[a]=t(s,a,this),a++;return i}}return xu=n,xu}var Su,Eh;function Rb(){if(Eh)return Su;Eh=1;const n=td();class e{constructor(r,i){this.fetcher=r,this.channel_id=i,this.emotes=new n}fetchBTTVEmotes(){return this.fetcher.fetchBTTVEmotes(this.id)}fetchFFZEmotes(){return this.fetcher.fetchFFZEmotes(this.id)}fetchSevenTVEmotes(){return this.fetcher.fetchSevenTVEmotes(this.id)}}return Su=e,Su}var Cu,Hh;function Tb(){if(Hh)return Cu;Hh=1;const n=Ks(),e=ir();class t extends n{constructor(i,a,s){super(i,a,s),this.type="ffz"}get owner(){return this.fetcher.channels.get(this.ownerName)}_setup(i){super._setup(i),this.code=i.name,this.ownerName="owner"in i?i.owner.name:null,this.sizes="animated"in i?Object.keys(i.animated):Object.keys(i.urls),this.animated="animated"in i,this.imageType="animated"in i?"webp":"png",this.modifier=i.modifier&&(i.modifier_flags&1)!==0}toLink(i=0){return i=this.sizes[i],this.animated?e.FFZ.CDNAnimated(this.id,i):e.FFZ.CDN(this.id,i)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,sizes:this.sizes,ownerName:this.ownerName,type:this.type,modifier:this.modifier})}static fromObject(i,a=null){const s=i.sizes.reduce((o,u)=>(o[u]=u,o),{});return new t(a,i.id,{code:i.code,name:i.code,urls:s,...i.animated?{animated:s}:{},owner:{name:i.ownerName},modifier:i.modifier,modifier_flags:i.modifier})}}return Cu=t,Cu}var Eu,Ah;function Ib(){if(Ah)return Eu;Ah=1;const n=Ks(),e=ir();class t extends n{constructor(i,a,s){super(i,a,s),this.type="7tv"}get owner(){return this.fetcher.channels.get(this.ownerName)}_setup(i){super._setup(i),this.code=i.name,this.ownerName="owner"in i.data?i.data.owner.display_name:null,this.sizes=i.data.host.files.filter(a=>a.format===this.channel.format.toUpperCase()).map(a=>a.name),this.animated=i.data.animated,this.imageType=this.channel.format}toLink(i=0){return i=this.sizes[i],e.SevenTV.CDN(this.id,i)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,sizes:this.sizes,ownerName:this.ownerName,type:this.type,imageType:this.imageType})}static fromObject(i,a){const s=i.sizes.map(o=>({format:a.format.toUpperCase(),name:o}));return new t(a,i.id,{code:i.code,name:i.code,data:{animated:i.animated,owner:{display_name:i.ownerName},host:{files:s}}})}}return Eu=t,Eu}var Hu,Rh;function Pb(){if(Rh)return Hu;Rh=1;const n=Ks(),e=ir();class t extends n{constructor(i,a,s){super(i,a,s),this.type="twitch"}get owner(){return this.channel}_setup(i){super._setup(i),this.set=i.emoticon_set,this.animated="animated"in i.formats,this.imageType="animated"in i.formats?"gif":"png"}toLink(i=0){return e.Twitch.CDN(this.id,i)}toObject(){return Object.assign({},super.toObject(),{animated:this.animated,set:this.set,type:this.type})}static fromObject(i,a=null){return new t(a,i.id,{code:i.code,animated:i.animated,emoticon_set:i.set,formats:i.animated?{animated:i.animated}:{}})}}return Hu=t,Hu}var Au,Th;function NS(){if(Th)return Au;Th=1;function n(f,b){return function(){return f.apply(b,arguments)}}const{toString:e}=Object.prototype,{getPrototypeOf:t}=Object,r=(f=>b=>{const S=e.call(b);return f[S]||(f[S]=S.slice(8,-1).toLowerCase())})(Object.create(null)),i=f=>(f=f.toLowerCase(),b=>r(b)===f),a=f=>b=>typeof b===f,{isArray:s}=Array,o=a("undefined");function u(f){return f!==null&&!o(f)&&f.constructor!==null&&!o(f.constructor)&&y(f.constructor.isBuffer)&&f.constructor.isBuffer(f)}const h=i("ArrayBuffer");function m(f){let b;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?b=ArrayBuffer.isView(f):b=f&&f.buffer&&h(f.buffer),b}const w=a("string"),y=a("function"),g=a("number"),p=f=>f!==null&&typeof f=="object",l=f=>f===!0||f===!1,d=f=>{if(r(f)!=="object")return!1;const b=t(f);return(b===null||b===Object.prototype||Object.getPrototypeOf(b)===null)&&!(Symbol.toStringTag in f)&&!(Symbol.iterator in f)},v=i("Date"),C=i("File"),R=i("Blob"),P=i("FileList"),_=f=>p(f)&&y(f.pipe),x=f=>{let b;return f&&(typeof FormData=="function"&&f instanceof FormData||y(f.append)&&((b=r(f))==="formdata"||b==="object"&&y(f.toString)&&f.toString()==="[object FormData]"))},H=i("URLSearchParams"),[q,$,se,z]=["ReadableStream","Request","Response","Headers"].map(i),Me=f=>f.trim?f.trim():f.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ae(f,b,{allOwnKeys:S=!1}={}){if(f===null||typeof f>"u")return;let E,T;if(typeof f!="object"&&(f=[f]),s(f))for(E=0,T=f.length;E<T;E++)b.call(null,f[E],E,f);else{const B=S?Object.getOwnPropertyNames(f):Object.keys(f),O=B.length;let F;for(E=0;E<O;E++)F=B[E],b.call(null,f[F],F,f)}}function D(f,b){b=b.toLowerCase();const S=Object.keys(f);let E=S.length,T;for(;E-- >0;)if(T=S[E],b===T.toLowerCase())return T;return null}const L=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ux,ie=f=>!o(f)&&f!==L;function pe(){const{caseless:f}=ie(this)&&this||{},b={},S=(E,T)=>{const B=f&&D(b,T)||T;d(b[B])&&d(E)?b[B]=pe(b[B],E):d(E)?b[B]=pe({},E):s(E)?b[B]=E.slice():b[B]=E};for(let E=0,T=arguments.length;E<T;E++)arguments[E]&&ae(arguments[E],S);return b}const xe=(f,b,S,{allOwnKeys:E}={})=>(ae(b,(T,B)=>{S&&y(T)?f[B]=n(T,S):f[B]=T},{allOwnKeys:E}),f),J=f=>(f.charCodeAt(0)===65279&&(f=f.slice(1)),f),ht=(f,b,S,E)=>{f.prototype=Object.create(b.prototype,E),f.prototype.constructor=f,Object.defineProperty(f,"super",{value:b.prototype}),S&&Object.assign(f.prototype,S)},X=(f,b,S,E)=>{let T,B,O;const F={};if(b=b||{},f==null)return b;do{for(T=Object.getOwnPropertyNames(f),B=T.length;B-- >0;)O=T[B],(!E||E(O,f,b))&&!F[O]&&(b[O]=f[O],F[O]=!0);f=S!==!1&&t(f)}while(f&&(!S||S(f,b))&&f!==Object.prototype);return b},Se=(f,b,S)=>{f=String(f),(S===void 0||S>f.length)&&(S=f.length),S-=b.length;const E=f.indexOf(b,S);return E!==-1&&E===S},Ce=f=>{if(!f)return null;if(s(f))return f;let b=f.length;if(!g(b))return null;const S=new Array(b);for(;b-- >0;)S[b]=f[b];return S},rt=(f=>b=>f&&b instanceof f)(typeof Uint8Array<"u"&&t(Uint8Array)),Te=(f,b)=>{const E=(f&&f[Symbol.iterator]).call(f);let T;for(;(T=E.next())&&!T.done;){const B=T.value;b.call(f,B[0],B[1])}},Fe=(f,b)=>{let S;const E=[];for(;(S=f.exec(b))!==null;)E.push(S);return E},Pe=i("HTMLFormElement"),De=f=>f.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(S,E,T){return E.toUpperCase()+T}),nt=(({hasOwnProperty:f})=>(b,S)=>f.call(b,S))(Object.prototype),pt=i("RegExp"),wt=(f,b)=>{const S=Object.getOwnPropertyDescriptors(f),E={};ae(S,(T,B)=>{let O;(O=b(T,B,f))!==!1&&(E[B]=O||T)}),Object.defineProperties(f,E)},Oi=f=>{wt(f,(b,S)=>{if(y(f)&&["arguments","caller","callee"].indexOf(S)!==-1)return!1;const E=f[S];if(y(E)){if(b.enumerable=!1,"writable"in b){b.writable=!1;return}b.set||(b.set=()=>{throw Error("Can not rewrite read-only method '"+S+"'")})}})},Ui=(f,b)=>{const S={},E=T=>{T.forEach(B=>{S[B]=!0})};return s(f)?E(f):E(String(f).split(b)),S},qi=()=>{},sr=(f,b)=>f!=null&&Number.isFinite(f=+f)?f:b,Qe="abcdefghijklmnopqrstuvwxyz",Js="0123456789",Ys={DIGIT:Js,ALPHA:Qe,ALPHA_DIGIT:Qe+Qe.toUpperCase()+Js},Rl=(f=16,b=Ys.ALPHA_DIGIT)=>{let S="";const{length:E}=b;for(;f--;)S+=b[Math.random()*E|0];return S};function Tl(f){return!!(f&&y(f.append)&&f[Symbol.toStringTag]==="FormData"&&f[Symbol.iterator])}const Il=f=>{const b=new Array(10),S=(E,T)=>{if(p(E)){if(b.indexOf(E)>=0)return;if(!("toJSON"in E)){b[T]=E;const B=s(E)?[]:{};return ae(E,(O,F)=>{const Y=S(O,T+1);!o(Y)&&(B[F]=Y)}),b[T]=void 0,B}}return E};return S(f,0)},Pl=i("AsyncFunction"),Dl=f=>f&&(p(f)||y(f))&&y(f.then)&&y(f.catch),Zs=((f,b)=>f?setImmediate:b?((S,E)=>(L.addEventListener("message",({source:T,data:B})=>{T===L&&B===S&&E.length&&E.shift()()},!1),T=>{E.push(T),L.postMessage(S,"*")}))(`axios@${Math.random()}`,[]):S=>setTimeout(S))(typeof setImmediate=="function",y(L.postMessage)),Bl=typeof queueMicrotask<"u"?queueMicrotask.bind(L):typeof process<"u"&&process.nextTick||Zs;var k={isArray:s,isArrayBuffer:h,isBuffer:u,isFormData:x,isArrayBufferView:m,isString:w,isNumber:g,isBoolean:l,isObject:p,isPlainObject:d,isReadableStream:q,isRequest:$,isResponse:se,isHeaders:z,isUndefined:o,isDate:v,isFile:C,isBlob:R,isRegExp:pt,isFunction:y,isStream:_,isURLSearchParams:H,isTypedArray:rt,isFileList:P,forEach:ae,merge:pe,extend:xe,trim:Me,stripBOM:J,inherits:ht,toFlatObject:X,kindOf:r,kindOfTest:i,endsWith:Se,toArray:Ce,forEachEntry:Te,matchAll:Fe,isHTMLForm:Pe,hasOwnProperty:nt,hasOwnProp:nt,reduceDescriptors:wt,freezeMethods:Oi,toObjectSet:Ui,toCamelCase:De,noop:qi,toFiniteNumber:sr,findKey:D,global:L,isContextDefined:ie,ALPHABET:Ys,generateString:Rl,isSpecCompliantForm:Tl,toJSONObject:Il,isAsyncFn:Pl,isThenable:Dl,setImmediate:Zs,asap:Bl};function oe(f,b,S,E,T){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=f,this.name="AxiosError",b&&(this.code=b),S&&(this.config=S),E&&(this.request=E),T&&(this.response=T,this.status=T.status?T.status:null)}k.inherits(oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.status}}});const eo=oe.prototype,to={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(f=>{to[f]={value:f}}),Object.defineProperties(oe,to),Object.defineProperty(eo,"isAxiosError",{value:!0}),oe.from=(f,b,S,E,T,B)=>{const O=Object.create(eo);return k.toFlatObject(f,O,function(Y){return Y!==Error.prototype},F=>F!=="isAxiosError"),oe.call(O,f.message,b,S,E,T),O.cause=f,O.name=f.name,B&&Object.assign(O,B),O};var Ol=null;function ki(f){return k.isPlainObject(f)||k.isArray(f)}function ro(f){return k.endsWith(f,"[]")?f.slice(0,-2):f}function no(f,b,S){return f?f.concat(b).map(function(T,B){return T=ro(T),!S&&B?"["+T+"]":T}).join(S?".":""):b}function Ul(f){return k.isArray(f)&&!f.some(ki)}const ql=k.toFlatObject(k,{},null,function(b){return/^is[A-Z]/.test(b)});function or(f,b,S){if(!k.isObject(f))throw new TypeError("target must be an object");b=b||new FormData,S=k.toFlatObject(S,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ue,te){return!k.isUndefined(te[ue])});const E=S.metaTokens,T=S.visitor||Q,B=S.dots,O=S.indexes,Y=(S.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(b);if(!k.isFunction(T))throw new TypeError("visitor must be a function");function G(ee){if(ee===null)return"";if(k.isDate(ee))return ee.toISOString();if(!Y&&k.isBlob(ee))throw new oe("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(ee)||k.isTypedArray(ee)?Y&&typeof Blob=="function"?new Blob([ee]):Buffer.from(ee):ee}function Q(ee,ue,te){let He=ee;if(ee&&!te&&typeof ee=="object"){if(k.endsWith(ue,"{}"))ue=E?ue:ue.slice(0,-2),ee=JSON.stringify(ee);else if(k.isArray(ee)&&Ul(ee)||(k.isFileList(ee)||k.endsWith(ue,"[]"))&&(He=k.toArray(ee)))return ue=ro(ue),He.forEach(function(Le,mt){!(k.isUndefined(Le)||Le===null)&&b.append(O===!0?no([ue],mt,B):O===null?ue:ue+"[]",G(Le))}),!1}return ki(ee)?!0:(b.append(no(te,ue,B),G(ee)),!1)}const Z=[],ye=Object.assign(ql,{defaultVisitor:Q,convertValue:G,isVisitable:ki});function Be(ee,ue){if(!k.isUndefined(ee)){if(Z.indexOf(ee)!==-1)throw Error("Circular reference detected in "+ue.join("."));Z.push(ee),k.forEach(ee,function(He,Oe){(!(k.isUndefined(He)||He===null)&&T.call(b,He,k.isString(Oe)?Oe.trim():Oe,ue,ye))===!0&&Be(He,ue?ue.concat(Oe):[Oe])}),Z.pop()}}if(!k.isObject(f))throw new TypeError("data must be an object");return Be(f),b}function io(f){const b={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(f).replace(/[!'()~]|%20|%00/g,function(E){return b[E]})}function Mi(f,b){this._pairs=[],f&&or(f,this,b)}const ao=Mi.prototype;ao.append=function(b,S){this._pairs.push([b,S])},ao.toString=function(b){const S=b?function(E){return b.call(this,E,io)}:io;return this._pairs.map(function(T){return S(T[0])+"="+S(T[1])},"").join("&")};function kl(f){return encodeURIComponent(f).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function so(f,b,S){if(!b)return f;const E=S&&S.encode||kl;k.isFunction(S)&&(S={serialize:S});const T=S&&S.serialize;let B;if(T?B=T(b,S):B=k.isURLSearchParams(b)?b.toString():new Mi(b,S).toString(E),B){const O=f.indexOf("#");O!==-1&&(f=f.slice(0,O)),f+=(f.indexOf("?")===-1?"?":"&")+B}return f}class Ml{constructor(){this.handlers=[]}use(b,S,E){return this.handlers.push({fulfilled:b,rejected:S,synchronous:E?E.synchronous:!1,runWhen:E?E.runWhen:null}),this.handlers.length-1}eject(b){this.handlers[b]&&(this.handlers[b]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(b){k.forEach(this.handlers,function(E){E!==null&&b(E)})}}var oo=Ml,lo={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jl=typeof URLSearchParams<"u"?URLSearchParams:Mi,Ll=typeof FormData<"u"?FormData:null,Nl=typeof Blob<"u"?Blob:null,Fl={isBrowser:!0,classes:{URLSearchParams:jl,FormData:Ll,Blob:Nl},protocols:["http","https","file","blob","url","data"]};const ji=typeof window<"u"&&typeof document<"u",Li=typeof navigator=="object"&&navigator||void 0,$l=ji&&(!Li||["ReactNative","NativeScript","NS"].indexOf(Li.product)<0),Gl=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ql=ji&&window.location.href||"http://localhost";var Wl=Object.freeze({__proto__:null,hasBrowserEnv:ji,hasStandardBrowserWebWorkerEnv:Gl,hasStandardBrowserEnv:$l,navigator:Li,origin:Ql}),je={...Wl,...Fl};function Vl(f,b){return or(f,new je.classes.URLSearchParams,Object.assign({visitor:function(S,E,T,B){return je.isNode&&k.isBuffer(S)?(this.append(E,S.toString("base64")),!1):B.defaultVisitor.apply(this,arguments)}},b))}function zl(f){return k.matchAll(/\w+|\[(\w*)]/g,f).map(b=>b[0]==="[]"?"":b[1]||b[0])}function Kl(f){const b={},S=Object.keys(f);let E;const T=S.length;let B;for(E=0;E<T;E++)B=S[E],b[B]=f[B];return b}function uo(f){function b(S,E,T,B){let O=S[B++];if(O==="__proto__")return!0;const F=Number.isFinite(+O),Y=B>=S.length;return O=!O&&k.isArray(T)?T.length:O,Y?(k.hasOwnProp(T,O)?T[O]=[T[O],E]:T[O]=E,!F):((!T[O]||!k.isObject(T[O]))&&(T[O]=[]),b(S,E,T[O],B)&&k.isArray(T[O])&&(T[O]=Kl(T[O])),!F)}if(k.isFormData(f)&&k.isFunction(f.entries)){const S={};return k.forEachEntry(f,(E,T)=>{b(zl(E),T,S,0)}),S}return null}function Xl(f,b,S){if(k.isString(f))try{return(b||JSON.parse)(f),k.trim(f)}catch(E){if(E.name!=="SyntaxError")throw E}return(S||JSON.stringify)(f)}const Ni={transitional:lo,adapter:["xhr","http","fetch"],transformRequest:[function(b,S){const E=S.getContentType()||"",T=E.indexOf("application/json")>-1,B=k.isObject(b);if(B&&k.isHTMLForm(b)&&(b=new FormData(b)),k.isFormData(b))return T?JSON.stringify(uo(b)):b;if(k.isArrayBuffer(b)||k.isBuffer(b)||k.isStream(b)||k.isFile(b)||k.isBlob(b)||k.isReadableStream(b))return b;if(k.isArrayBufferView(b))return b.buffer;if(k.isURLSearchParams(b))return S.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),b.toString();let F;if(B){if(E.indexOf("application/x-www-form-urlencoded")>-1)return Vl(b,this.formSerializer).toString();if((F=k.isFileList(b))||E.indexOf("multipart/form-data")>-1){const Y=this.env&&this.env.FormData;return or(F?{"files[]":b}:b,Y&&new Y,this.formSerializer)}}return B||T?(S.setContentType("application/json",!1),Xl(b)):b}],transformResponse:[function(b){const S=this.transitional||Ni.transitional,E=S&&S.forcedJSONParsing,T=this.responseType==="json";if(k.isResponse(b)||k.isReadableStream(b))return b;if(b&&k.isString(b)&&(E&&!this.responseType||T)){const O=!(S&&S.silentJSONParsing)&&T;try{return JSON.parse(b)}catch(F){if(O)throw F.name==="SyntaxError"?oe.from(F,oe.ERR_BAD_RESPONSE,this,null,this.response):F}}return b}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:je.classes.FormData,Blob:je.classes.Blob},validateStatus:function(b){return b>=200&&b<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],f=>{Ni.headers[f]={}});var Fi=Ni;const Jl=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Yl=f=>{const b={};let S,E,T;return f&&f.split(`
`).forEach(function(O){T=O.indexOf(":"),S=O.substring(0,T).trim().toLowerCase(),E=O.substring(T+1).trim(),!(!S||b[S]&&Jl[S])&&(S==="set-cookie"?b[S]?b[S].push(E):b[S]=[E]:b[S]=b[S]?b[S]+", "+E:E)}),b};const co=Symbol("internals");function Ot(f){return f&&String(f).trim().toLowerCase()}function lr(f){return f===!1||f==null?f:k.isArray(f)?f.map(lr):String(f)}function Zl(f){const b=Object.create(null),S=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let E;for(;E=S.exec(f);)b[E[1]]=E[2];return b}const ur=f=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(f.trim());function eu(f,b,S,E,T){if(k.isFunction(E))return E.call(this,b,S);if(T&&(b=S),!!k.isString(b)){if(k.isString(E))return b.indexOf(E)!==-1;if(k.isRegExp(E))return E.test(b)}}function Mw(f){return f.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(b,S,E)=>S.toUpperCase()+E)}function jw(f,b){const S=k.toCamelCase(" "+b);["get","set","has"].forEach(E=>{Object.defineProperty(f,E+S,{value:function(T,B,O){return this[E].call(this,b,T,B,O)},configurable:!0})})}class ho{constructor(b){b&&this.set(b)}set(b,S,E){const T=this;function B(F,Y,G){const Q=Ot(Y);if(!Q)throw new Error("header name must be a non-empty string");const Z=k.findKey(T,Q);(!Z||T[Z]===void 0||G===!0||G===void 0&&T[Z]!==!1)&&(T[Z||Y]=lr(F))}const O=(F,Y)=>k.forEach(F,(G,Q)=>B(G,Q,Y));if(k.isPlainObject(b)||b instanceof this.constructor)O(b,S);else if(k.isString(b)&&(b=b.trim())&&!ur(b))O(Yl(b),S);else if(k.isHeaders(b))for(const[F,Y]of b.entries())B(Y,F,E);else b!=null&&B(S,b,E);return this}get(b,S){if(b=Ot(b),b){const E=k.findKey(this,b);if(E){const T=this[E];if(!S)return T;if(S===!0)return Zl(T);if(k.isFunction(S))return S.call(this,T,E);if(k.isRegExp(S))return S.exec(T);throw new TypeError("parser must be boolean|regexp|function")}}}has(b,S){if(b=Ot(b),b){const E=k.findKey(this,b);return!!(E&&this[E]!==void 0&&(!S||eu(this,this[E],E,S)))}return!1}delete(b,S){const E=this;let T=!1;function B(O){if(O=Ot(O),O){const F=k.findKey(E,O);F&&(!S||eu(E,E[F],F,S))&&(delete E[F],T=!0)}}return k.isArray(b)?b.forEach(B):B(b),T}clear(b){const S=Object.keys(this);let E=S.length,T=!1;for(;E--;){const B=S[E];(!b||eu(this,this[B],B,b,!0))&&(delete this[B],T=!0)}return T}normalize(b){const S=this,E={};return k.forEach(this,(T,B)=>{const O=k.findKey(E,B);if(O){S[O]=lr(T),delete S[B];return}const F=b?Mw(B):String(B).trim();F!==B&&delete S[B],S[F]=lr(T),E[F]=!0}),this}concat(...b){return this.constructor.concat(this,...b)}toJSON(b){const S=Object.create(null);return k.forEach(this,(E,T)=>{E!=null&&E!==!1&&(S[T]=b&&k.isArray(E)?E.join(", "):E)}),S}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([b,S])=>b+": "+S).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(b){return b instanceof this?b:new this(b)}static concat(b,...S){const E=new this(b);return S.forEach(T=>E.set(T)),E}static accessor(b){const E=(this[co]=this[co]={accessors:{}}).accessors,T=this.prototype;function B(O){const F=Ot(O);E[F]||(jw(T,O),E[F]=!0)}return k.isArray(b)?b.forEach(B):B(b),this}}ho.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),k.reduceDescriptors(ho.prototype,({value:f},b)=>{let S=b[0].toUpperCase()+b.slice(1);return{get:()=>f,set(E){this[S]=E}}}),k.freezeMethods(ho);var it=ho;function tu(f,b){const S=this||Fi,E=b||S,T=it.from(E.headers);let B=E.data;return k.forEach(f,function(F){B=F.call(S,B,T.normalize(),b?b.status:void 0)}),T.normalize(),B}function xd(f){return!!(f&&f.__CANCEL__)}function cr(f,b,S){oe.call(this,f??"canceled",oe.ERR_CANCELED,b,S),this.name="CanceledError"}k.inherits(cr,oe,{__CANCEL__:!0});function Sd(f,b,S){const E=S.config.validateStatus;!S.status||!E||E(S.status)?f(S):b(new oe("Request failed with status code "+S.status,[oe.ERR_BAD_REQUEST,oe.ERR_BAD_RESPONSE][Math.floor(S.status/100)-4],S.config,S.request,S))}function Lw(f){const b=/^([-+\w]{1,25})(:?\/\/|:)/.exec(f);return b&&b[1]||""}function Nw(f,b){f=f||10;const S=new Array(f),E=new Array(f);let T=0,B=0,O;return b=b!==void 0?b:1e3,function(Y){const G=Date.now(),Q=E[B];O||(O=G),S[T]=Y,E[T]=G;let Z=B,ye=0;for(;Z!==T;)ye+=S[Z++],Z=Z%f;if(T=(T+1)%f,T===B&&(B=(B+1)%f),G-O<b)return;const Be=Q&&G-Q;return Be?Math.round(ye*1e3/Be):void 0}}function Fw(f,b){let S=0,E=1e3/b,T,B;const O=(G,Q=Date.now())=>{S=Q,T=null,B&&(clearTimeout(B),B=null),f.apply(null,G)};return[(...G)=>{const Q=Date.now(),Z=Q-S;Z>=E?O(G,Q):(T=G,B||(B=setTimeout(()=>{B=null,O(T)},E-Z)))},()=>T&&O(T)]}const po=(f,b,S=3)=>{let E=0;const T=Nw(50,250);return Fw(B=>{const O=B.loaded,F=B.lengthComputable?B.total:void 0,Y=O-E,G=T(Y),Q=O<=F;E=O;const Z={loaded:O,total:F,progress:F?O/F:void 0,bytes:Y,rate:G||void 0,estimated:G&&F&&Q?(F-O)/G:void 0,event:B,lengthComputable:F!=null,[b?"download":"upload"]:!0};f(Z)},S)},Cd=(f,b)=>{const S=f!=null;return[E=>b[0]({lengthComputable:S,total:f,loaded:E}),b[1]]},Ed=f=>(...b)=>k.asap(()=>f(...b));var $w=je.hasStandardBrowserEnv?((f,b)=>S=>(S=new URL(S,je.origin),f.protocol===S.protocol&&f.host===S.host&&(b||f.port===S.port)))(new URL(je.origin),je.navigator&&/(msie|trident)/i.test(je.navigator.userAgent)):()=>!0,Gw=je.hasStandardBrowserEnv?{write(f,b,S,E,T,B){const O=[f+"="+encodeURIComponent(b)];k.isNumber(S)&&O.push("expires="+new Date(S).toGMTString()),k.isString(E)&&O.push("path="+E),k.isString(T)&&O.push("domain="+T),B===!0&&O.push("secure"),document.cookie=O.join("; ")},read(f){const b=document.cookie.match(new RegExp("(^|;\\s*)("+f+")=([^;]*)"));return b?decodeURIComponent(b[3]):null},remove(f){this.write(f,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qw(f){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(f)}function Ww(f,b){return b?f.replace(/\/?\/$/,"")+"/"+b.replace(/^\/+/,""):f}function Hd(f,b){return f&&!Qw(b)?Ww(f,b):b}const Ad=f=>f instanceof it?{...f}:f;function Ut(f,b){b=b||{};const S={};function E(G,Q,Z,ye){return k.isPlainObject(G)&&k.isPlainObject(Q)?k.merge.call({caseless:ye},G,Q):k.isPlainObject(Q)?k.merge({},Q):k.isArray(Q)?Q.slice():Q}function T(G,Q,Z,ye){if(k.isUndefined(Q)){if(!k.isUndefined(G))return E(void 0,G,Z,ye)}else return E(G,Q,Z,ye)}function B(G,Q){if(!k.isUndefined(Q))return E(void 0,Q)}function O(G,Q){if(k.isUndefined(Q)){if(!k.isUndefined(G))return E(void 0,G)}else return E(void 0,Q)}function F(G,Q,Z){if(Z in b)return E(G,Q);if(Z in f)return E(void 0,G)}const Y={url:B,method:B,data:B,baseURL:O,transformRequest:O,transformResponse:O,paramsSerializer:O,timeout:O,timeoutMessage:O,withCredentials:O,withXSRFToken:O,adapter:O,responseType:O,xsrfCookieName:O,xsrfHeaderName:O,onUploadProgress:O,onDownloadProgress:O,decompress:O,maxContentLength:O,maxBodyLength:O,beforeRedirect:O,transport:O,httpAgent:O,httpsAgent:O,cancelToken:O,socketPath:O,responseEncoding:O,validateStatus:F,headers:(G,Q,Z)=>T(Ad(G),Ad(Q),Z,!0)};return k.forEach(Object.keys(Object.assign({},f,b)),function(Q){const Z=Y[Q]||T,ye=Z(f[Q],b[Q],Q);k.isUndefined(ye)&&Z!==F||(S[Q]=ye)}),S}var Rd=f=>{const b=Ut({},f);let{data:S,withXSRFToken:E,xsrfHeaderName:T,xsrfCookieName:B,headers:O,auth:F}=b;b.headers=O=it.from(O),b.url=so(Hd(b.baseURL,b.url),f.params,f.paramsSerializer),F&&O.set("Authorization","Basic "+btoa((F.username||"")+":"+(F.password?unescape(encodeURIComponent(F.password)):"")));let Y;if(k.isFormData(S)){if(je.hasStandardBrowserEnv||je.hasStandardBrowserWebWorkerEnv)O.setContentType(void 0);else if((Y=O.getContentType())!==!1){const[G,...Q]=Y?Y.split(";").map(Z=>Z.trim()).filter(Boolean):[];O.setContentType([G||"multipart/form-data",...Q].join("; "))}}if(je.hasStandardBrowserEnv&&(E&&k.isFunction(E)&&(E=E(b)),E||E!==!1&&$w(b.url))){const G=T&&B&&Gw.read(B);G&&O.set(T,G)}return b},Vw=typeof XMLHttpRequest<"u"&&function(f){return new Promise(function(S,E){const T=Rd(f);let B=T.data;const O=it.from(T.headers).normalize();let{responseType:F,onUploadProgress:Y,onDownloadProgress:G}=T,Q,Z,ye,Be,ee;function ue(){Be&&Be(),ee&&ee(),T.cancelToken&&T.cancelToken.unsubscribe(Q),T.signal&&T.signal.removeEventListener("abort",Q)}let te=new XMLHttpRequest;te.open(T.method.toUpperCase(),T.url,!0),te.timeout=T.timeout;function He(){if(!te)return;const Le=it.from("getAllResponseHeaders"in te&&te.getAllResponseHeaders()),Ge={data:!F||F==="text"||F==="json"?te.responseText:te.response,status:te.status,statusText:te.statusText,headers:Le,config:f,request:te};Sd(function(qt){S(qt),ue()},function(qt){E(qt),ue()},Ge),te=null}"onloadend"in te?te.onloadend=He:te.onreadystatechange=function(){!te||te.readyState!==4||te.status===0&&!(te.responseURL&&te.responseURL.indexOf("file:")===0)||setTimeout(He)},te.onabort=function(){te&&(E(new oe("Request aborted",oe.ECONNABORTED,f,te)),te=null)},te.onerror=function(){E(new oe("Network Error",oe.ERR_NETWORK,f,te)),te=null},te.ontimeout=function(){let mt=T.timeout?"timeout of "+T.timeout+"ms exceeded":"timeout exceeded";const Ge=T.transitional||lo;T.timeoutErrorMessage&&(mt=T.timeoutErrorMessage),E(new oe(mt,Ge.clarifyTimeoutError?oe.ETIMEDOUT:oe.ECONNABORTED,f,te)),te=null},B===void 0&&O.setContentType(null),"setRequestHeader"in te&&k.forEach(O.toJSON(),function(mt,Ge){te.setRequestHeader(Ge,mt)}),k.isUndefined(T.withCredentials)||(te.withCredentials=!!T.withCredentials),F&&F!=="json"&&(te.responseType=T.responseType),G&&([ye,ee]=po(G,!0),te.addEventListener("progress",ye)),Y&&te.upload&&([Z,Be]=po(Y),te.upload.addEventListener("progress",Z),te.upload.addEventListener("loadend",Be)),(T.cancelToken||T.signal)&&(Q=Le=>{te&&(E(!Le||Le.type?new cr(null,f,te):Le),te.abort(),te=null)},T.cancelToken&&T.cancelToken.subscribe(Q),T.signal&&(T.signal.aborted?Q():T.signal.addEventListener("abort",Q)));const Oe=Lw(T.url);if(Oe&&je.protocols.indexOf(Oe)===-1){E(new oe("Unsupported protocol "+Oe+":",oe.ERR_BAD_REQUEST,f));return}te.send(B||null)})},zw=(f,b)=>{const{length:S}=f=f?f.filter(Boolean):[];if(b||S){let E=new AbortController,T;const B=function(G){if(!T){T=!0,F();const Q=G instanceof Error?G:this.reason;E.abort(Q instanceof oe?Q:new cr(Q instanceof Error?Q.message:Q))}};let O=b&&setTimeout(()=>{O=null,B(new oe(`timeout ${b} of ms exceeded`,oe.ETIMEDOUT))},b);const F=()=>{f&&(O&&clearTimeout(O),O=null,f.forEach(G=>{G.unsubscribe?G.unsubscribe(B):G.removeEventListener("abort",B)}),f=null)};f.forEach(G=>G.addEventListener("abort",B));const{signal:Y}=E;return Y.unsubscribe=()=>k.asap(F),Y}};const Kw=function*(f,b){let S=f.byteLength;if(S<b){yield f;return}let E=0,T;for(;E<S;)T=E+b,yield f.slice(E,T),E=T},Xw=async function*(f,b){for await(const S of Jw(f))yield*Kw(S,b)},Jw=async function*(f){if(f[Symbol.asyncIterator]){yield*f;return}const b=f.getReader();try{for(;;){const{done:S,value:E}=await b.read();if(S)break;yield E}}finally{await b.cancel()}},Td=(f,b,S,E)=>{const T=Xw(f,b);let B=0,O,F=Y=>{O||(O=!0,E&&E(Y))};return new ReadableStream({async pull(Y){try{const{done:G,value:Q}=await T.next();if(G){F(),Y.close();return}let Z=Q.byteLength;if(S){let ye=B+=Z;S(ye)}Y.enqueue(new Uint8Array(Q))}catch(G){throw F(G),G}},cancel(Y){return F(Y),T.return()}},{highWaterMark:2})},mo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Id=mo&&typeof ReadableStream=="function",Yw=mo&&(typeof TextEncoder=="function"?(f=>b=>f.encode(b))(new TextEncoder):async f=>new Uint8Array(await new Response(f).arrayBuffer())),Pd=(f,...b)=>{try{return!!f(...b)}catch{return!1}},Zw=Id&&Pd(()=>{let f=!1;const b=new Request(je.origin,{body:new ReadableStream,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!b}),Dd=64*1024,ru=Id&&Pd(()=>k.isReadableStream(new Response("").body)),_o={stream:ru&&(f=>f.body)};mo&&(f=>{["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!_o[b]&&(_o[b]=k.isFunction(f[b])?S=>S[b]():(S,E)=>{throw new oe(`Response type '${b}' is not supported`,oe.ERR_NOT_SUPPORT,E)})})})(new Response);const ex=async f=>{if(f==null)return 0;if(k.isBlob(f))return f.size;if(k.isSpecCompliantForm(f))return(await new Request(je.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(k.isArrayBufferView(f)||k.isArrayBuffer(f))return f.byteLength;if(k.isURLSearchParams(f)&&(f=f+""),k.isString(f))return(await Yw(f)).byteLength},tx=async(f,b)=>{const S=k.toFiniteNumber(f.getContentLength());return S??ex(b)};var rx=mo&&(async f=>{let{url:b,method:S,data:E,signal:T,cancelToken:B,timeout:O,onDownloadProgress:F,onUploadProgress:Y,responseType:G,headers:Q,withCredentials:Z="same-origin",fetchOptions:ye}=Rd(f);G=G?(G+"").toLowerCase():"text";let Be=zw([T,B&&B.toAbortSignal()],O),ee;const ue=Be&&Be.unsubscribe&&(()=>{Be.unsubscribe()});let te;try{if(Y&&Zw&&S!=="get"&&S!=="head"&&(te=await tx(Q,E))!==0){let Ge=new Request(b,{method:"POST",body:E,duplex:"half"}),xt;if(k.isFormData(E)&&(xt=Ge.headers.get("content-type"))&&Q.setContentType(xt),Ge.body){const[qt,vo]=Cd(te,po(Ed(Y)));E=Td(Ge.body,Dd,qt,vo)}}k.isString(Z)||(Z=Z?"include":"omit");const He="credentials"in Request.prototype;ee=new Request(b,{...ye,signal:Be,method:S.toUpperCase(),headers:Q.normalize().toJSON(),body:E,duplex:"half",credentials:He?Z:void 0});let Oe=await fetch(ee);const Le=ru&&(G==="stream"||G==="response");if(ru&&(F||Le&&ue)){const Ge={};["status","statusText","headers"].forEach(jd=>{Ge[jd]=Oe[jd]});const xt=k.toFiniteNumber(Oe.headers.get("content-length")),[qt,vo]=F&&Cd(xt,po(Ed(F),!0))||[];Oe=new Response(Td(Oe.body,Dd,qt,()=>{vo&&vo(),ue&&ue()}),Ge)}G=G||"text";let mt=await _o[k.findKey(_o,G)||"text"](Oe,f);return!Le&&ue&&ue(),await new Promise((Ge,xt)=>{Sd(Ge,xt,{data:mt,headers:it.from(Oe.headers),status:Oe.status,statusText:Oe.statusText,config:f,request:ee})})}catch(He){throw ue&&ue(),He&&He.name==="TypeError"&&/fetch/i.test(He.message)?Object.assign(new oe("Network Error",oe.ERR_NETWORK,f,ee),{cause:He.cause||He}):oe.from(He,He&&He.code,f,ee)}});const nu={http:Ol,xhr:Vw,fetch:rx};k.forEach(nu,(f,b)=>{if(f){try{Object.defineProperty(f,"name",{value:b})}catch{}Object.defineProperty(f,"adapterName",{value:b})}});const Bd=f=>`- ${f}`,nx=f=>k.isFunction(f)||f===null||f===!1;var Od={getAdapter:f=>{f=k.isArray(f)?f:[f];const{length:b}=f;let S,E;const T={};for(let B=0;B<b;B++){S=f[B];let O;if(E=S,!nx(S)&&(E=nu[(O=String(S)).toLowerCase()],E===void 0))throw new oe(`Unknown adapter '${O}'`);if(E)break;T[O||"#"+B]=E}if(!E){const B=Object.entries(T).map(([F,Y])=>`adapter ${F} `+(Y===!1?"is not supported by the environment":"is not available in the build"));let O=b?B.length>1?`since :
`+B.map(Bd).join(`
`):" "+Bd(B[0]):"as no adapter specified";throw new oe("There is no suitable adapter to dispatch the request "+O,"ERR_NOT_SUPPORT")}return E},adapters:nu};function iu(f){if(f.cancelToken&&f.cancelToken.throwIfRequested(),f.signal&&f.signal.aborted)throw new cr(null,f)}function Ud(f){return iu(f),f.headers=it.from(f.headers),f.data=tu.call(f,f.transformRequest),["post","put","patch"].indexOf(f.method)!==-1&&f.headers.setContentType("application/x-www-form-urlencoded",!1),Od.getAdapter(f.adapter||Fi.adapter)(f).then(function(E){return iu(f),E.data=tu.call(f,f.transformResponse,E),E.headers=it.from(E.headers),E},function(E){return xd(E)||(iu(f),E&&E.response&&(E.response.data=tu.call(f,f.transformResponse,E.response),E.response.headers=it.from(E.response.headers))),Promise.reject(E)})}const qd="1.7.9",go={};["object","boolean","number","function","string","symbol"].forEach((f,b)=>{go[f]=function(E){return typeof E===f||"a"+(b<1?"n ":" ")+f}});const kd={};go.transitional=function(b,S,E){function T(B,O){return"[Axios v"+qd+"] Transitional option '"+B+"'"+O+(E?". "+E:"")}return(B,O,F)=>{if(b===!1)throw new oe(T(O," has been removed"+(S?" in "+S:"")),oe.ERR_DEPRECATED);return S&&!kd[O]&&(kd[O]=!0,console.warn(T(O," has been deprecated since v"+S+" and will be removed in the near future"))),b?b(B,O,F):!0}},go.spelling=function(b){return(S,E)=>(console.warn(`${E} is likely a misspelling of ${b}`),!0)};function ix(f,b,S){if(typeof f!="object")throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);const E=Object.keys(f);let T=E.length;for(;T-- >0;){const B=E[T],O=b[B];if(O){const F=f[B],Y=F===void 0||O(F,B,f);if(Y!==!0)throw new oe("option "+B+" must be "+Y,oe.ERR_BAD_OPTION_VALUE);continue}if(S!==!0)throw new oe("Unknown option "+B,oe.ERR_BAD_OPTION)}}var fo={assertOptions:ix,validators:go};const ot=fo.validators;class yo{constructor(b){this.defaults=b,this.interceptors={request:new oo,response:new oo}}async request(b,S){try{return await this._request(b,S)}catch(E){if(E instanceof Error){let T={};Error.captureStackTrace?Error.captureStackTrace(T):T=new Error;const B=T.stack?T.stack.replace(/^.+\n/,""):"";try{E.stack?B&&!String(E.stack).endsWith(B.replace(/^.+\n.+\n/,""))&&(E.stack+=`
`+B):E.stack=B}catch{}}throw E}}_request(b,S){typeof b=="string"?(S=S||{},S.url=b):S=b||{},S=Ut(this.defaults,S);const{transitional:E,paramsSerializer:T,headers:B}=S;E!==void 0&&fo.assertOptions(E,{silentJSONParsing:ot.transitional(ot.boolean),forcedJSONParsing:ot.transitional(ot.boolean),clarifyTimeoutError:ot.transitional(ot.boolean)},!1),T!=null&&(k.isFunction(T)?S.paramsSerializer={serialize:T}:fo.assertOptions(T,{encode:ot.function,serialize:ot.function},!0)),fo.assertOptions(S,{baseUrl:ot.spelling("baseURL"),withXsrfToken:ot.spelling("withXSRFToken")},!0),S.method=(S.method||this.defaults.method||"get").toLowerCase();let O=B&&k.merge(B.common,B[S.method]);B&&k.forEach(["delete","get","head","post","put","patch","common"],ee=>{delete B[ee]}),S.headers=it.concat(O,B);const F=[];let Y=!0;this.interceptors.request.forEach(function(ue){typeof ue.runWhen=="function"&&ue.runWhen(S)===!1||(Y=Y&&ue.synchronous,F.unshift(ue.fulfilled,ue.rejected))});const G=[];this.interceptors.response.forEach(function(ue){G.push(ue.fulfilled,ue.rejected)});let Q,Z=0,ye;if(!Y){const ee=[Ud.bind(this),void 0];for(ee.unshift.apply(ee,F),ee.push.apply(ee,G),ye=ee.length,Q=Promise.resolve(S);Z<ye;)Q=Q.then(ee[Z++],ee[Z++]);return Q}ye=F.length;let Be=S;for(Z=0;Z<ye;){const ee=F[Z++],ue=F[Z++];try{Be=ee(Be)}catch(te){ue.call(this,te);break}}try{Q=Ud.call(this,Be)}catch(ee){return Promise.reject(ee)}for(Z=0,ye=G.length;Z<ye;)Q=Q.then(G[Z++],G[Z++]);return Q}getUri(b){b=Ut(this.defaults,b);const S=Hd(b.baseURL,b.url);return so(S,b.params,b.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(b){yo.prototype[b]=function(S,E){return this.request(Ut(E||{},{method:b,url:S,data:(E||{}).data}))}}),k.forEach(["post","put","patch"],function(b){function S(E){return function(B,O,F){return this.request(Ut(F||{},{method:b,headers:E?{"Content-Type":"multipart/form-data"}:{},url:B,data:O}))}}yo.prototype[b]=S(),yo.prototype[b+"Form"]=S(!0)});var bo=yo;class au{constructor(b){if(typeof b!="function")throw new TypeError("executor must be a function.");let S;this.promise=new Promise(function(B){S=B});const E=this;this.promise.then(T=>{if(!E._listeners)return;let B=E._listeners.length;for(;B-- >0;)E._listeners[B](T);E._listeners=null}),this.promise.then=T=>{let B;const O=new Promise(F=>{E.subscribe(F),B=F}).then(T);return O.cancel=function(){E.unsubscribe(B)},O},b(function(B,O,F){E.reason||(E.reason=new cr(B,O,F),S(E.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(b){if(this.reason){b(this.reason);return}this._listeners?this._listeners.push(b):this._listeners=[b]}unsubscribe(b){if(!this._listeners)return;const S=this._listeners.indexOf(b);S!==-1&&this._listeners.splice(S,1)}toAbortSignal(){const b=new AbortController,S=E=>{b.abort(E)};return this.subscribe(S),b.signal.unsubscribe=()=>this.unsubscribe(S),b.signal}static source(){let b;return{token:new au(function(T){b=T}),cancel:b}}}var ax=au;function sx(f){return function(S){return f.apply(null,S)}}function ox(f){return k.isObject(f)&&f.isAxiosError===!0}const su={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(su).forEach(([f,b])=>{su[b]=f});var lx=su;function Md(f){const b=new bo(f),S=n(bo.prototype.request,b);return k.extend(S,bo.prototype,b,{allOwnKeys:!0}),k.extend(S,b,null,{allOwnKeys:!0}),S.create=function(T){return Md(Ut(f,T))},S}const Ie=Md(Fi);return Ie.Axios=bo,Ie.CanceledError=cr,Ie.CancelToken=ax,Ie.isCancel=xd,Ie.VERSION=qd,Ie.toFormData=or,Ie.AxiosError=oe,Ie.Cancel=Ie.CanceledError,Ie.all=function(b){return Promise.all(b)},Ie.spread=sx,Ie.isAxiosError=ox,Ie.mergeConfig=Ut,Ie.AxiosHeaders=it,Ie.formToJSON=f=>uo(k.isHTMLForm(f)?new FormData(f):f),Ie.getAdapter=Od.getAdapter,Ie.HttpStatusCode=lx,Ie.default=Ie,Au=Ie,Au}var Ru={},_r={};const M=cx(Ax);var Tu={},Ih;function bl(){return Ih||(Ih=1,Tu.isNode=!1),Tu}var Iu={},Xi={},Ji={},gt={},Ph;function Bi(){if(Ph)return gt;Ph=1;var n;Object.defineProperty(gt,"__esModule",{value:!0}),gt.LogLevelToConsoleFunction=gt.resolveLogLevel=gt.LogLevel=void 0;var e=bl(),t;(function(a){a[a.CRITICAL=0]="CRITICAL",a[a.ERROR=1]="ERROR",a[a.WARNING=2]="WARNING",a[a.INFO=3]="INFO",a[a.DEBUG=4]="DEBUG",a[a.TRACE=7]="TRACE"})(t||(t={})),gt.LogLevel=t;function r(a){if(typeof a=="number"){if(Object.prototype.hasOwnProperty.call(t,a))return a;var s=Object.keys(t).map(function(u){return parseInt(u,10)}).filter(function(u){return!isNaN(u)&&u<a});return s.length?Math.max.apply(Math,s):t.WARNING}var o=a.replace(/\d+$/,"").toUpperCase();if(!Object.prototype.hasOwnProperty.call(t,o))throw new Error("Unknown log level string: ".concat(a));return t[o]}gt.resolveLogLevel=r;var i=e.isNode?console.log.bind(console):console.debug.bind(console);return gt.LogLevelToConsoleFunction=(n={},n[t.CRITICAL]=console.error.bind(console),n[t.ERROR]=console.error.bind(console),n[t.WARNING]=console.warn.bind(console),n[t.INFO]=console.info.bind(console),n[t.DEBUG]=i.bind(console),n[t.TRACE]=console.trace.bind(console),n),gt}var Yi={},Pu={},Zi={},Dh;function FS(){if(Dh)return Zi;Dh=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.Enumerable=void 0;function n(e){return e===void 0&&(e=!0),function(t,r){Object.defineProperty(t,r,{get:function(){},set:function(i){Object.defineProperty(this,r,{value:i,writable:!0,enumerable:e})},enumerable:e})}}return Zi.Enumerable=n,Zi}var ea={},Bh;function $S(){if(Bh)return ea;Bh=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.flatten=void 0;var n=M;function e(t){var r;return(r=[]).concat.apply(r,n.__spreadArray([],n.__read(t),!1))}return ea.flatten=e,ea}var ta={},Oh;function GS(){if(Oh)return ta;Oh=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.immutableSplice=void 0;var n=M;function e(t,r,i){for(var a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];return n.__spreadArray(n.__spreadArray(n.__spreadArray([],n.__read(t.slice(0,r)),!1),n.__read(a),!1),n.__read(t.slice(r+i)),!1)}return ta.immutableSplice=e,ta}var ra={},Uh;function QS(){if(Uh)return ra;Uh=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.partitionedFlatMap=void 0;var n=M;function e(t,r,i){var a,s,o,u={};try{for(var h=n.__values(t),m=h.next();!m.done;m=h.next()){var w=m.value,y=r(w),g=i(w);Array.isArray(g)||(g=[g]),Object.prototype.hasOwnProperty.call(u,y)?(o=u[y]).push.apply(o,n.__spreadArray([],n.__read(g),!1)):u[y]=g}}catch(p){a={error:p}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return u}return ra.partitionedFlatMap=e,ra}var jt={},qh;function WS(){if(qh)return jt;qh=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.resolveConfigValueSync=jt.resolveConfigValue=void 0;var n=M;function e(r){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(i){switch(i.label){case 0:return typeof r!="function"?[3,2]:[4,r()];case 1:return[2,i.sent()];case 2:return[2,r]}})})}jt.resolveConfigValue=e;function t(r){return typeof r=="function"?r():r}return jt.resolveConfigValueSync=t,jt}var na={},kh;function VS(){if(kh)return na;kh=1,Object.defineProperty(na,"__esModule",{value:!0}),na.deprecateClass=void 0;var n=M;function e(t,r){var i=!1;return function(a){n.__extends(s,a);function s(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return i||(console.warn(r),i=!0),a.apply(this,n.__spreadArray([],n.__read(o),!1))||this}return s}(t)}return na.deprecateClass=e,na}var Du={},Mh;function zS(){return Mh||(Mh=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.match=n.eq=void 0;var e=function(i){return{otherwise:function(){return i},on:function(){return e(i)}}},t=function(i){return{on:function(a,s){return a(i)?e(s(i)):t(i)},otherwise:function(a){return a(i)}}};n.match=t;var r=function(i){return function(a){return i===a}};n.eq=r,t.eq=n.eq}(Du)),Du}var ia={},jh;function KS(){if(jh)return ia;jh=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.fibWithLimit=void 0;var n=M;function e(t){var r,i,a;return n.__generator(this,function(s){switch(s.label){case 0:r=0,i=1,s.label=1;case 1:return r<t?[4,r]:[3,3];case 2:return s.sent(),a=n.__read([i,r+i],2),r=a[0],i=a[1],[3,1];case 3:return[4,t];case 4:return s.sent(),[3,3];case 5:return[2]}})}return ia.fibWithLimit=e,ia}var aa={},Lh;function rd(){if(Lh)return aa;Lh=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.arrayToObject=void 0;var n=M;function e(t,r){return Object.assign.apply(Object,n.__spreadArray([{}],n.__read(t.map(r)),!1))}return aa.arrayToObject=e,aa}var sa={},Nh;function XS(){if(Nh)return sa;Nh=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.entriesToObject=void 0;var n=M,e=rd();function t(r){return(0,e.arrayToObject)(r,function(i){var a,s=n.__read(i,2),o=s[0],u=s[1];return a={},a[o]=u,a})}return sa.entriesToObject=t,sa}var oa={},Fh;function JS(){if(Fh)return oa;Fh=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.forEachObjectEntry=void 0;var n=M;function e(t,r){Object.entries(t).forEach(function(i){var a=n.__read(i,2),s=a[0],o=a[1];return r(o,s)})}return oa.forEachObjectEntry=e,oa}var la={},$h;function YS(){if($h)return la;$h=1,Object.defineProperty(la,"__esModule",{value:!0}),la.groupBy=void 0;var n=M;function e(t,r){var i,a,s;if(typeof r!="function"){var o=r;r=function(g){return g[o].toString()}}var u={};try{for(var h=n.__values(t),m=h.next();!m.done;m=h.next()){var w=m.value,y=r(w);((s=u[y])!==null&&s!==void 0?s:u[y]=[]).push(w)}}catch(g){i={error:g}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return u}return la.groupBy=e,la}var ua={},Gh;function ZS(){if(Gh)return ua;Gh=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.indexBy=void 0;var n=rd();function e(t,r){if(typeof r!="function"){var i=r;r=function(a){return a[i].toString()}}return(0,n.arrayToObject)(t,function(a){var s;return s={},s[r(a)]=a,s})}return ua.indexBy=e,ua}var ca={},Qh;function e0(){if(Qh)return ca;Qh=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.mapObject=void 0;var n=M;function e(t,r){var i=Object.entries(t).map(function(a){var s,o=n.__read(a,2),u=o[0],h=o[1];return s={},s[u]=r(h,u),s});return Object.assign.apply(Object,n.__spreadArray([{}],n.__read(i),!1))}return ca.mapObject=e,ca}var da={},ha={},Wh;function Db(){if(Wh)return ha;Wh=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.pick=void 0;var n=M;function e(t,r){return Object.assign.apply(Object,n.__spreadArray([{}],n.__read(Object.entries(t).filter(function(i){var a=n.__read(i,1),s=a[0];return r.includes(s)}).map(function(i){var a,s=n.__read(i,2),o=s[0],u=s[1];return a={},a[o]=u,a})),!1))}return ha.pick=e,ha}var Vh;function t0(){if(Vh)return da;Vh=1,Object.defineProperty(da,"__esModule",{value:!0}),da.omit=void 0;var n=Db();function e(t,r){return(0,n.pick)(t,Object.keys(t).filter(function(i){return!r.includes(i)}))}return da.omit=e,da}var ft={},zh;function r0(){if(zh)return ft;zh=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.mapOptional=ft.mapNullable=ft.isNullish=void 0;function n(r){return r==null}ft.isNullish=n;function e(r,i){return n(r)?null:i(r)}ft.mapNullable=e;function t(r,i){return n(r)?void 0:i(r)}return ft.mapOptional=t,ft}var pa={},Kh;function n0(){if(Kh)return pa;Kh=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.delay=void 0;var n=M;function e(t){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(r){switch(r.label){case 0:return[4,new Promise(function(i){return setTimeout(i,t)})];case 1:return r.sent(),[2]}})})}return pa.delay=e,pa}var ma={},Xh;function i0(){if(Xh)return ma;Xh=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.promiseWithResolvers=void 0;function n(){var e,t,r=new Promise(function(i,a){e=i,t=a});return{promise:r,resolve:e,reject:t}}return ma.promiseWithResolvers=n,ma}var _a={},Jh;function a0(){if(Jh)return _a;Jh=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.padLeft=void 0;function n(e,t,r){if(typeof e=="number"&&(e=e.toString()),t=t-e.length,t<=0)return e;r===void 0&&(r=" ");var i="";do(t&1)===1&&(i+=r),t>>=1,t&&(r+=r);while(t);return i+e}return _a.padLeft=n,_a}var ga={},Yh;function s0(){if(Yh)return ga;Yh=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.splitWithLimit=void 0;var n=M;function e(t,r,i){var a=t.split(r);return a.length<=i?a:n.__spreadArray(n.__spreadArray([],n.__read(a.slice(0,i-1)),!1),[a.slice(i-1).join(r)],!1)}return ga.splitWithLimit=e,ga}var Lt={},Zh;function o0(){if(Zh)return Lt;Zh=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.utf8Substring=Lt.utf8Length=void 0;var n=M;function e(r){return n.__spreadArray([],n.__read(r),!1).length}Lt.utf8Length=e;function t(r,i,a){return n.__spreadArray([],n.__read(r),!1).slice(i,a).join("")}return Lt.utf8Substring=t,Lt}var ep;function W(){return ep||(ep=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.utf8Substring=n.utf8Length=n.splitWithLimit=n.padLeft=n.promiseWithResolvers=n.delay=n.mapOptional=n.mapNullable=n.isNullish=n.pick=n.omit=n.mapObject=n.indexBy=n.groupBy=n.forEachObjectEntry=n.entriesToObject=n.arrayToObject=n.fibWithLimit=n.eq=n.match=n.deprecateClass=n.resolveConfigValueSync=n.resolveConfigValue=n.partitionedFlatMap=n.immutableSplice=n.flatten=n.Enumerable=void 0;var e=FS();Object.defineProperty(n,"Enumerable",{enumerable:!0,get:function(){return e.Enumerable}});var t=$S();Object.defineProperty(n,"flatten",{enumerable:!0,get:function(){return t.flatten}});var r=GS();Object.defineProperty(n,"immutableSplice",{enumerable:!0,get:function(){return r.immutableSplice}});var i=QS();Object.defineProperty(n,"partitionedFlatMap",{enumerable:!0,get:function(){return i.partitionedFlatMap}});var a=WS();Object.defineProperty(n,"resolveConfigValue",{enumerable:!0,get:function(){return a.resolveConfigValue}}),Object.defineProperty(n,"resolveConfigValueSync",{enumerable:!0,get:function(){return a.resolveConfigValueSync}});var s=VS();Object.defineProperty(n,"deprecateClass",{enumerable:!0,get:function(){return s.deprecateClass}});var o=zS();Object.defineProperty(n,"match",{enumerable:!0,get:function(){return o.match}}),Object.defineProperty(n,"eq",{enumerable:!0,get:function(){return o.eq}});var u=KS();Object.defineProperty(n,"fibWithLimit",{enumerable:!0,get:function(){return u.fibWithLimit}});var h=rd();Object.defineProperty(n,"arrayToObject",{enumerable:!0,get:function(){return h.arrayToObject}});var m=XS();Object.defineProperty(n,"entriesToObject",{enumerable:!0,get:function(){return m.entriesToObject}});var w=JS();Object.defineProperty(n,"forEachObjectEntry",{enumerable:!0,get:function(){return w.forEachObjectEntry}});var y=YS();Object.defineProperty(n,"groupBy",{enumerable:!0,get:function(){return y.groupBy}});var g=ZS();Object.defineProperty(n,"indexBy",{enumerable:!0,get:function(){return g.indexBy}});var p=e0();Object.defineProperty(n,"mapObject",{enumerable:!0,get:function(){return p.mapObject}});var l=t0();Object.defineProperty(n,"omit",{enumerable:!0,get:function(){return l.omit}});var d=Db();Object.defineProperty(n,"pick",{enumerable:!0,get:function(){return d.pick}});var v=r0();Object.defineProperty(n,"isNullish",{enumerable:!0,get:function(){return v.isNullish}}),Object.defineProperty(n,"mapNullable",{enumerable:!0,get:function(){return v.mapNullable}}),Object.defineProperty(n,"mapOptional",{enumerable:!0,get:function(){return v.mapOptional}});var C=n0();Object.defineProperty(n,"delay",{enumerable:!0,get:function(){return C.delay}});var R=i0();Object.defineProperty(n,"promiseWithResolvers",{enumerable:!0,get:function(){return R.promiseWithResolvers}});var P=a0();Object.defineProperty(n,"padLeft",{enumerable:!0,get:function(){return P.padLeft}});var _=s0();Object.defineProperty(n,"splitWithLimit",{enumerable:!0,get:function(){return _.splitWithLimit}});var x=o0();Object.defineProperty(n,"utf8Length",{enumerable:!0,get:function(){return x.utf8Length}}),Object.defineProperty(n,"utf8Substring",{enumerable:!0,get:function(){return x.utf8Substring}})}(Pu)),Pu}var fa={},tp;function Bb(){if(tp)return fa;tp=1;var n={},e,t;Object.defineProperty(fa,"__esModule",{value:!0}),fa.getMinLogLevelFromEnv=void 0;var r=Bi(),i=typeof process>"u"?[]:(t=(e=n.LOGGING)===null||e===void 0?void 0:e.split(";").map(function(h){var m=h.split("=",2),w=m[0],y=m[1];return y?[w==="default"?void 0:w.split(":"),(0,r.resolveLogLevel)(y)]:null}).filter(function(h){return!!h}).sort(function(h,m){var w,y,g=h[0],p=m[0];return((w=p==null?void 0:p.length)!==null&&w!==void 0?w:0)-((y=g==null?void 0:g.length)!==null&&y!==void 0?y:0)}))!==null&&t!==void 0?t:[],a=i.findIndex(function(h){var m=h[0];return!m}),s=void 0;a!==-1&&(s=i[a][1],i.splice(a));function o(h,m){return m.length<=h.length&&m.every(function(w,y){return w===h[y]})}function u(h){for(var m=h.split(":"),w=0,y=i;w<y.length;w++){var g=y[w],p=g[0],l=g[1];if(o(m,p))return l}return s}return fa.getMinLogLevelFromEnv=u,fa}var rp;function Ob(){if(rp)return Yi;rp=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.BaseLogger=void 0;var n=W(),e=bl(),t=Bb(),r=Bi(),i=function(){function a(s){var o=s.name,u=s.minLevel,h=s.emoji,m=h===void 0?!1:h,w=s.colors,y=s.timestamps,g=y===void 0?e.isNode:y,p,l;this._name=o,this._minLevel=(l=(p=(0,n.mapOptional)(u,function(d){return(0,r.resolveLogLevel)(d)}))!==null&&p!==void 0?p:(0,t.getMinLogLevelFromEnv)(o))!==null&&l!==void 0?l:r.LogLevel.WARNING,this._emoji=m,this._colors=w,this._timestamps=g}return a.prototype.crit=function(s){this.log(r.LogLevel.CRITICAL,s)},a.prototype.error=function(s){this.log(r.LogLevel.ERROR,s)},a.prototype.warn=function(s){this.log(r.LogLevel.WARNING,s)},a.prototype.info=function(s){this.log(r.LogLevel.INFO,s)},a.prototype.debug=function(s){this.log(r.LogLevel.DEBUG,s)},a.prototype.trace=function(s){this.log(r.LogLevel.TRACE,s)},a}();return Yi.BaseLogger=i,Yi}var np;function l0(){if(np)return Ji;np=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.BrowserLogger=void 0;var n=M,e=Bi(),t=Ob(),r=function(i){n.__extends(a,i);function a(){return i!==null&&i.apply(this,arguments)||this}return a.prototype.log=function(s,o){if(!(s>this._minLevel)){var u=e.LogLevelToConsoleFunction[s],h="[".concat(this._name,"] ").concat(o);this._timestamps&&(h="[".concat(new Date().toISOString(),"] ").concat(o)),u(h)}},a}(t.BaseLogger);return Ji.BrowserLogger=r,Ji}var ya={},ip;function u0(){if(ip)return ya;ip=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.CustomLoggerWrapper=void 0;var n=W(),e=Bb(),t=Bi(),r=function(){function i(a){var s=a.name,o=a.minLevel,u=a.custom,h;this._minLevel=(h=(0,n.mapOptional)(o,function(m){return(0,t.resolveLogLevel)(m)}))!==null&&h!==void 0?h:(0,e.getMinLogLevelFromEnv)(s),this._override=typeof u=="function"?{log:u}:u}return i.prototype.log=function(a,s){this._shouldLog(a)&&this._override.log(a,s)},i.prototype.crit=function(a){this._override.crit?this._shouldLog(t.LogLevel.CRITICAL)&&this._override.crit(a):this.log(t.LogLevel.CRITICAL,a)},i.prototype.error=function(a){this._override.error?this._shouldLog(t.LogLevel.ERROR)&&this._override.error(a):this.log(t.LogLevel.ERROR,a)},i.prototype.warn=function(a){this._override.warn?this._shouldLog(t.LogLevel.WARNING)&&this._override.warn(a):this.log(t.LogLevel.WARNING,a)},i.prototype.info=function(a){this._override.info?this._shouldLog(t.LogLevel.INFO)&&this._override.info(a):this.log(t.LogLevel.INFO,a)},i.prototype.debug=function(a){this._override.debug?this._shouldLog(t.LogLevel.DEBUG)&&this._override.debug(a):this.log(t.LogLevel.DEBUG,a)},i.prototype.trace=function(a){this._override.trace?this._shouldLog(t.LogLevel.TRACE)&&this._override.trace(a):this.log(t.LogLevel.TRACE,a)},i.prototype._shouldLog=function(a){return this._minLevel===void 0||this._minLevel>=a},i}();return ya.CustomLoggerWrapper=r,ya}var Bu={},ap;function c0(){return ap||(ap=1,function(n){var e,t,r;Object.defineProperty(n,"__esModule",{value:!0}),n.NodeLogger=n.LogLevelToBackgroundColor=n.LogLevelToColor=n.LogLevelToEmoji=void 0;var i=M,a=Bi(),s=Ob();n.LogLevelToEmoji=(e={},e[a.LogLevel.CRITICAL]="üõë",e[a.LogLevel.ERROR]="‚ùå",e[a.LogLevel.WARNING]="‚ö†Ô∏è ",e[a.LogLevel.INFO]="‚ÑπÔ∏è ",e[a.LogLevel.DEBUG]="üêû",e[a.LogLevel.TRACE]="üêæ",e);var o={black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,blackBright:90,redBright:91,greenBright:92,yellowBright:93,blueBright:94,magentaBright:95,cyanBright:96,whiteBright:97},u={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBlackBright:100,bgRedBright:101,bgGreenBright:102,bgYellowBright:103,bgBlueBright:104,bgMagentaBright:105,bgCyanBright:106,bgWhiteBright:107};function h(g,p,l){return function(d){return"\x1B[".concat(g,"m").concat(l?l(d):d,"\x1B[").concat(p,"m")}}function m(g){return h(o[g],39)}function w(g,p){return h(u[g],49,p)}n.LogLevelToColor=(t={},t[a.LogLevel.CRITICAL]=m("red"),t[a.LogLevel.ERROR]=m("redBright"),t[a.LogLevel.WARNING]=m("yellow"),t[a.LogLevel.INFO]=m("blue"),t[a.LogLevel.DEBUG]=m("magenta"),t[a.LogLevel.TRACE]=h(0,0),t),n.LogLevelToBackgroundColor=(r={},r[a.LogLevel.CRITICAL]=w("bgRed",m("white")),r[a.LogLevel.ERROR]=w("bgRedBright",m("white")),r[a.LogLevel.WARNING]=w("bgYellow",m("black")),r[a.LogLevel.INFO]=w("bgBlue",m("white")),r[a.LogLevel.DEBUG]=w("bgMagenta",m("black")),r[a.LogLevel.TRACE]=h(7,27),r);var y=function(g){i.__extends(p,g);function p(){return g!==null&&g.apply(this,arguments)||this}return p.prototype.log=function(l,d){var v,C,R;if(!(l>this._minLevel)){var P=a.LogLevelToConsoleFunction[l],_="";if(this._timestamps&&(_+="[".concat(new Date().toISOString(),"] ")),this._emoji){var x=n.LogLevelToEmoji[l];_+="".concat(x," ")}var H=(R=(v=this._colors)!==null&&v!==void 0?v:(C=process.stdout)===null||C===void 0?void 0:C.isTTY)!==null&&R!==void 0?R:!0;H?_+="".concat(n.LogLevelToBackgroundColor[l](this._name)," ").concat(n.LogLevelToBackgroundColor[l](a.LogLevel[l])," ").concat(n.LogLevelToColor[l](d)):_+="[".concat(this._name,":").concat(a.LogLevel[l].toLowerCase(),"] ").concat(d),P(_)}},p}(s.BaseLogger);n.NodeLogger=y}(Bu)),Bu}var sp;function d0(){if(sp)return Xi;sp=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.createLogger=void 0;var n=bl(),e=l0(),t=u0(),r=c0();function i(a){return a.custom?new t.CustomLoggerWrapper(a):n.isNode?new r.NodeLogger(a):new e.BrowserLogger(a)}return Xi.createLogger=i,Xi}var op;function vl(){return op||(op=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.LogLevel=n.createLogger=void 0;var e=d0();Object.defineProperty(n,"createLogger",{enumerable:!0,get:function(){return e.createLogger}});var t=Bi();Object.defineProperty(n,"LogLevel",{enumerable:!0,get:function(){return t.LogLevel}})}(Iu)),Iu}var Ou={},ba={},va={},lp;function Ub(){if(lp)return va;lp=1,Object.defineProperty(va,"__esModule",{value:!0}),va.CustomError=void 0;class n extends Error{constructor(...t){var r;super(...t),Object.setPrototypeOf(this,new.target.prototype),(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}}return va.CustomError=n,va}var up;function qb(){if(up)return ba;up=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.RetryAfterError=void 0;const n=Ub();let e=class extends n.CustomError{constructor(r){super(`Need to retry after ${r} ms`),this._retryAt=Date.now()+r}get retryAt(){return this._retryAt}};return ba.RetryAfterError=e,ba}var wa={},cp;function wl(){if(cp)return wa;cp=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.RateLimitReachedError=void 0;const n=Ub();let e=class extends n.CustomError{};return wa.RateLimitReachedError=e,wa}var xa={},dp;function h0(){if(dp)return xa;dp=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.NullRateLimiter=void 0;let n=class{constructor(t){this._callback=t}async request(t){return await this._callback(t)}clear(){}pause(){}resume(){}};return xa.NullRateLimiter=n,xa}var Sa={},Ca={},hp;function kb(){if(hp)return Ca;hp=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.ResponseBasedRateLimiter=void 0;const n=vl(),e=W(),t=wl(),r=qb();let i=class{constructor({logger:s}){this._queue=[],this._batchRunning=!1,this._paused=!1,this._logger=(0,n.createLogger)({name:"rate-limiter",emoji:!0,...s})}async request(s,o){return this._logger.trace("request start"),await new Promise((u,h)=>{var m;const w={req:s,resolve:u,reject:h,limitReachedBehavior:(m=o==null?void 0:o.limitReachedBehavior)!==null&&m!==void 0?m:"enqueue"};this._batchRunning||this._nextBatchTimer||this._paused?(this._logger.trace(`request queued batchRunning:${this._batchRunning.toString()} hasNextBatchTimer:${(!!this._nextBatchTimer).toString()} paused:${this._paused.toString()}`),this._queue.push(w)):this._runRequestBatch([w])})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextBatch()}get stats(){var s,o,u,h,m;return{lastKnownLimit:(o=(s=this._parameters)===null||s===void 0?void 0:s.limit)!==null&&o!==void 0?o:null,lastKnownRemainingRequests:(h=(u=this._parameters)===null||u===void 0?void 0:u.remaining)!==null&&h!==void 0?h:null,lastKnownResetDate:(0,e.mapNullable)((m=this._parameters)===null||m===void 0?void 0:m.resetsAt,w=>new Date(w))}}async _runRequestBatch(s){this._logger.trace(`runRequestBatch start specs:${s.length}`),this._batchRunning=!0,this._parameters&&this._logger.debug(`Remaining requests: ${this._parameters.remaining}`),this._logger.debug(`Doing ${s.length} requests, new queue length is ${this._queue.length}`);const o=s.map(async w=>{const{req:y,resolve:g,reject:p}=w;try{const l=await this.doRequest(y),d=this.needsToRetryAfter(l);if(d!==null)throw this._queue.unshift(w),this._logger.info(`Retrying after ${d} ms`),new r.RetryAfterError(d);const v=this.getParametersFromResponse(l);return g(l),v}catch(l){if(l instanceof r.RetryAfterError)throw l;p(l);return}}),u=await Promise.allSettled(o),h=u.filter(w=>w.status==="rejected"),m=Date.now();if(h.length){this._logger.trace("runRequestBatch some rejected");const y=Math.max(m,...h.map(g=>g.reason.retryAt))-m;this._logger.warn(`Waiting for ${y} ms because the rate limit was exceeded`),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},y)}else{this._logger.trace("runRequestBatch none rejected");const w=u.filter(y=>y.status==="fulfilled"&&y.value!==void 0).map(y=>y.value).reduce((y,g)=>y?g.remaining<y.remaining?g:y:g,void 0);if(this._batchRunning=!1,w)if(this._parameters=w,w.resetsAt<m||w.remaining>0)this._logger.trace("runRequestBatch canRunMore"),this._runNextBatch();else{const y=w.resetsAt-m;this._logger.trace(`runRequestBatch delay:${y}`),this._logger.warn(`Waiting for ${y} ms because the rate limit was reached`),this._queue=this._queue.filter(g=>{switch(g.limitReachedBehavior){case"enqueue":return!0;case"null":return g.resolve(null),!1;case"throw":return g.reject(new t.RateLimitReachedError("Request removed from queue because the rate limit was reached")),!1;default:throw new Error("this should never happen")}}),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},y)}}this._logger.trace("runRequestBatch end")}_runNextBatch(){if(this._paused)return;this._logger.trace("runNextBatch start"),this._nextBatchTimer&&(clearTimeout(this._nextBatchTimer),this._nextBatchTimer=void 0);const s=this._parameters?Math.min(this._parameters.remaining,this._parameters.limit/10):1,o=this._queue.splice(0,s);o.length&&this._runRequestBatch(o),this._logger.trace("runNextBatch end")}};return Ca.ResponseBasedRateLimiter=i,Ca}var pp;function p0(){if(pp)return Sa;pp=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.PartitionedRateLimiter=void 0;const n=kb();let e=class{constructor(r){this._children=new Map,this._paused=!1,this._partitionKeyCallback=r.getPartitionKey,this._createChildCallback=r.createChild}async request(r,i){const a=this._partitionKeyCallback(r);return await this._getChild(a).request(r,i)}clear(){for(const r of this._children.values())r.clear()}pause(){this._paused=!0;for(const r of this._children.values())r.pause()}resume(){this._paused=!1;for(const r of this._children.values())r.resume()}getChildStats(r){if(!this._children.has(r))return null;const i=this._children.get(r);return i instanceof n.ResponseBasedRateLimiter?i.stats:null}_getChild(r){if(this._children.has(r))return this._children.get(r);const i=this._createChildCallback(r);return this._paused&&i.pause(),this._children.set(r,i),i}};return Sa.PartitionedRateLimiter=e,Sa}var Ea={},mp;function m0(){if(mp)return Ea;mp=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.PartitionedTimeBasedRateLimiter=void 0;const n=vl(),e=wl();let t=class{constructor({logger:i,bucketSize:a,timeFrame:s,doRequest:o,getPartitionKey:u}){this._partitionedQueue=new Map,this._usedFromBucket=new Map,this._paused=!1,this._logger=(0,n.createLogger)({name:"rate-limiter",emoji:!0,...i}),this._bucketSize=a,this._timeFrame=s,this._callback=o,this._partitionKeyCallback=u}async request(i,a){return await new Promise((s,o)=>{var u,h;const m={req:i,resolve:s,reject:o,limitReachedBehavior:(u=a==null?void 0:a.limitReachedBehavior)!==null&&u!==void 0?u:"enqueue"},w=this._partitionKeyCallback(i),y=(h=this._usedFromBucket.get(w))!==null&&h!==void 0?h:0;if(y>=this._bucketSize||this._paused)switch(m.limitReachedBehavior){case"enqueue":{const g=this._getPartitionedQueue(w);g.push(m),y+g.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} for ${w?`partition ${w}`:"default partition"} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${g.length}`):this._logger.info(`Enqueueing request for ${w?`partition ${w}`:"default partition"} because the rate limiter is paused; queue size is ${g.length}`);break}case"null":{m.resolve(null),this._paused?this._logger.info(`Returning null for request for ${w?`partition ${w}`:"default partition"} because the rate limiter is paused`):this._logger.warn(`Rate limit of ${this._bucketSize} for ${w?`partition ${w}`:"default partition"} was reached, dropping request and returning null`);break}case"throw":{m.reject(new e.RateLimitReachedError(`Request dropped because ${this._paused?"the rate limiter is paused":`the rate limit for ${w?`partition ${w}`:"default partition"} was reached`}`));break}default:throw new Error("this should never happen")}else this._runRequest(m,w)})}clear(){this._partitionedQueue.clear()}pause(){this._paused=!0}resume(){this._paused=!1;for(const i of this._partitionedQueue.keys())this._runNextRequest(i)}_getPartitionedQueue(i){if(this._partitionedQueue.has(i))return this._partitionedQueue.get(i);const a=[];return this._partitionedQueue.set(i,a),a}async _runRequest(i,a){var s;const o=this._getPartitionedQueue(a);this._logger.debug(`doing a request for ${a?`partition ${a}`:"default partition"}, new queue length is ${o.length}`),this._usedFromBucket.set(a,((s=this._usedFromBucket.get(a))!==null&&s!==void 0?s:0)+1);const{req:u,resolve:h,reject:m}=i;try{h(await this._callback(u))}catch(w){m(w)}finally{setTimeout(()=>{const w=this._usedFromBucket.get(a)-1;this._usedFromBucket.set(a,w),o.length&&w<this._bucketSize&&this._runNextRequest(a)},this._timeFrame)}}_runNextRequest(i){if(this._paused)return;const s=this._getPartitionedQueue(i).shift();s&&this._runRequest(s,i)}};return Ea.PartitionedTimeBasedRateLimiter=t,Ea}var Ha={},_p;function Mb(){if(_p)return Ha;_p=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.TimeBasedRateLimiter=void 0;const n=vl(),e=wl();let t=class{constructor({logger:i,bucketSize:a,timeFrame:s,doRequest:o}){this._queue=[],this._usedFromBucket=0,this._paused=!1,this._logger=(0,n.createLogger)({name:"rate-limiter",emoji:!0,...i}),this._bucketSize=a,this._timeFrame=s,this._callback=o}async request(i,a){return await new Promise((s,o)=>{var u;const h={req:i,resolve:s,reject:o,limitReachedBehavior:(u=a==null?void 0:a.limitReachedBehavior)!==null&&u!==void 0?u:"enqueue"};if(this._usedFromBucket>=this._bucketSize||this._paused)switch(h.limitReachedBehavior){case"enqueue":{this._queue.push(h),this._usedFromBucket+this._queue.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${this._queue.length}`):this._logger.info(`Enqueueing request because the rate limiter is paused; queue size is ${this._queue.length}`);break}case"null":{h.resolve(null),this._logger.warn(`Rate limit of ${this._bucketSize} was reached, dropping request and returning null`),this._paused?this._logger.info("Returning null for request because the rate limiter is paused"):this._logger.warn(`Rate limit of ${this._bucketSize} was reached, dropping request and returning null`);break}case"throw":{h.reject(new e.RateLimitReachedError(`Request dropped because ${this._paused?"the rate limiter is paused":"the rate limit was reached"}`));break}default:throw new Error("this should never happen")}else this._runRequest(h)})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextRequest()}async _runRequest(i){this._logger.debug(`doing a request, new queue length is ${this._queue.length}`),this._usedFromBucket+=1;const{req:a,resolve:s,reject:o}=i;try{s(await this._callback(a))}catch(u){o(u)}finally{setTimeout(()=>{this._usedFromBucket-=1,this._queue.length&&this._usedFromBucket<this._bucketSize&&this._runNextRequest()},this._timeFrame)}}_runNextRequest(){if(this._paused)return;const i=this._queue.shift();i&&this._runRequest(i)}};return Ha.TimeBasedRateLimiter=t,Ha}var Aa={},gp;function _0(){if(gp)return Aa;gp=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.TimedPassthruRateLimiter=void 0;const n=Mb();let e=class extends n.TimeBasedRateLimiter{constructor(r,i){super({...i,async doRequest(a,s){return await r.request(a,s)}})}};return Aa.TimedPassthruRateLimiter=e,Aa}var fp;function nd(){return fp||(fp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.TimedPassthruRateLimiter=n.TimeBasedRateLimiter=n.ResponseBasedRateLimiter=n.PartitionedTimeBasedRateLimiter=n.PartitionedRateLimiter=n.NullRateLimiter=n.RateLimitReachedError=n.RetryAfterError=void 0;var e=qb();Object.defineProperty(n,"RetryAfterError",{enumerable:!0,get:function(){return e.RetryAfterError}});var t=wl();Object.defineProperty(n,"RateLimitReachedError",{enumerable:!0,get:function(){return t.RateLimitReachedError}});var r=h0();Object.defineProperty(n,"NullRateLimiter",{enumerable:!0,get:function(){return r.NullRateLimiter}});var i=p0();Object.defineProperty(n,"PartitionedRateLimiter",{enumerable:!0,get:function(){return i.PartitionedRateLimiter}});var a=m0();Object.defineProperty(n,"PartitionedTimeBasedRateLimiter",{enumerable:!0,get:function(){return a.PartitionedTimeBasedRateLimiter}});var s=kb();Object.defineProperty(n,"ResponseBasedRateLimiter",{enumerable:!0,get:function(){return s.ResponseBasedRateLimiter}});var o=Mb();Object.defineProperty(n,"TimeBasedRateLimiter",{enumerable:!0,get:function(){return o.TimeBasedRateLimiter}});var u=_0();Object.defineProperty(n,"TimedPassthruRateLimiter",{enumerable:!0,get:function(){return u.TimedPassthruRateLimiter}})}(Ou)),Ou}var Uu={},Nt={},qu,yp;function jb(){if(yp)return qu;yp=1;var n=Wf(),e=zf(),t=Gc();return qu={formats:t,parse:e,stringify:n},qu}var Ft={},Ra={},ku={},Mu={},ju={},bp;function g0(){if(bp)return ju;bp=1;function n(e){if(typeof e!="object")return e;var t,r,i=Object.prototype.toString.call(e);if(i==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){r=new e.constructor;for(t in e)e.hasOwnProperty(t)&&r[t]!==e[t]&&(r[t]=n(e[t]))}else{r={};for(t in e)t==="__proto__"?Object.defineProperty(r,t,{value:n(e[t]),configurable:!0,enumerable:!0,writable:!0}):r[t]=n(e[t])}return r}if(i==="[object Array]"){for(t=e.length,r=Array(t);t--;)r[t]=n(e[t]);return r}return i==="[object Set]"?(r=new Set,e.forEach(function(a){r.add(n(a))}),r):i==="[object Map]"?(r=new Map,e.forEach(function(a,s){r.set(n(s),n(a))}),r):i==="[object Date]"?new Date(+e):i==="[object RegExp]"?(r=new RegExp(e.source,e.flags),r.lastIndex=e.lastIndex,r):i==="[object DataView]"?new e.constructor(n(e.buffer)):i==="[object ArrayBuffer]"?e.slice(0):i.slice(-6)==="Array]"?new e.constructor(e):e}return ju.klona=n,ju}var vp;function Lb(){return vp||(vp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataObject=n.getRawData=n.rawDataSymbol=void 0;const e=g0();n.rawDataSymbol=Symbol("twurpleRawData");function t(i){return(0,e.klona)(i[n.rawDataSymbol])}n.getRawData=t;class r{constructor(a){this[n.rawDataSymbol]=a}}n.DataObject=r}(Mu)),Mu}var Ta={},Ia={},Pa={},wp;function id(){if(wp)return Pa;wp=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.CustomError=void 0;let n=class extends Error{constructor(t,r){var i;super(t,r),Object.setPrototypeOf(this,new.target.prototype),(i=Error.captureStackTrace)===null||i===void 0||i.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}};return Pa.CustomError=n,Pa}var xp;function Nb(){if(xp)return Ia;xp=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.RelationAssertionError=void 0;const n=id();let e=class extends n.CustomError{constructor(){super("Relation returned null - this may be a library bug or a race condition in your own code")}};return Ia.RelationAssertionError=e,Ia}var Sp;function f0(){if(Sp)return Ta;Sp=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.checkRelationAssertion=void 0;const n=Nb();function e(t){if(t==null)throw new n.RelationAssertionError;return t}return Ta.checkRelationAssertion=e,Ta}var Da={},Cp;function Fb(){if(Cp)return Da;Cp=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.rtfm=void 0;function n(e,t,r){return i=>{const a=r?function(){return`[${t}#${this[r]} - please check https://twurple.js.org/reference/${e}/classes/${t}.html for available properties]`}:function(){return`[${t} - please check https://twurple.js.org/reference/${e}/classes/${t}.html for available properties]`};Object.defineProperty(i.prototype,Symbol.for("nodejs.util.inspect.custom"),{value:a,enumerable:!1})}}return Da.rtfm=n,Da}var gr={},Ep;function y0(){if(Ep)return gr;Ep=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.HelixExtension=void 0;const n=M,e=Lb(),t=Fb();let r=class extends e.DataObject{get authorName(){return this[e.rawDataSymbol].author_name}get bitsEnabled(){return this[e.rawDataSymbol].bits_enabled}get installable(){return this[e.rawDataSymbol].can_install}get configurationLocation(){return this[e.rawDataSymbol].configuration_location}get description(){return this[e.rawDataSymbol].description}get tosUrl(){return this[e.rawDataSymbol].eula_tos_url}get hasChatSupport(){return this[e.rawDataSymbol].has_chat_support}get iconUrl(){return this[e.rawDataSymbol].icon_url}getIconUrl(a){return this[e.rawDataSymbol].icon_urls[a]}get id(){return this[e.rawDataSymbol].id}get name(){return this[e.rawDataSymbol].name}get privacyPolicyUrl(){return this[e.rawDataSymbol].privacy_policy_url}get requestsIdentityLink(){return this[e.rawDataSymbol].request_identity_link}get screenshotUrls(){return this[e.rawDataSymbol].screenshot_urls}get state(){return this[e.rawDataSymbol].state}get subscriptionsSupportLevel(){return this[e.rawDataSymbol].subscriptions_support_level}get summary(){return this[e.rawDataSymbol].summary}get supportEmail(){return this[e.rawDataSymbol].support_email}get version(){return this[e.rawDataSymbol].version}get viewerSummery(){return this[e.rawDataSymbol].viewer_summary}get allowedConfigUrls(){return this[e.rawDataSymbol].allowlisted_config_urls}get allowedPanelUrls(){return this[e.rawDataSymbol].allowlisted_panel_urls}get mobileViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.mobile)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get panelViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.panel)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get panelHeight(){var a,s;return(s=(a=this[e.rawDataSymbol].views.panel)===null||a===void 0?void 0:a.height)!==null&&s!==void 0?s:null}get panelCanLinkExternalContent(){var a,s;return(s=(a=this[e.rawDataSymbol].views.panel)===null||a===void 0?void 0:a.can_link_external_content)!==null&&s!==void 0?s:null}get overlayViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.video_overlay)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get overlayCanLinkExternalContent(){var a,s;return(s=(a=this[e.rawDataSymbol].views.video_overlay)===null||a===void 0?void 0:a.can_link_external_content)!==null&&s!==void 0?s:null}get componentViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get componentAspectWidth(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.aspect_width)!==null&&s!==void 0?s:null}get componentAspectHeight(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.aspect_height)!==null&&s!==void 0?s:null}get componentAspectRatioX(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.aspect_ratio_x)!==null&&s!==void 0?s:null}get componentAspectRatioY(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.aspect_ratio_y)!==null&&s!==void 0?s:null}get componentAutoScales(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.autoscale)!==null&&s!==void 0?s:null}get componentScalePixels(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.scale_pixels)!==null&&s!==void 0?s:null}get componentTargetHeight(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.target_height)!==null&&s!==void 0?s:null}get componentSize(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.size)!==null&&s!==void 0?s:null}get componentZoom(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.zoom)!==null&&s!==void 0?s:null}get componentZoomPixels(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.zoom_pixels)!==null&&s!==void 0?s:null}get componentCanLinkExternalContent(){var a,s;return(s=(a=this[e.rawDataSymbol].views.component)===null||a===void 0?void 0:a.can_link_external_content)!==null&&s!==void 0?s:null}get configViewerUrl(){var a,s;return(s=(a=this[e.rawDataSymbol].views.config)===null||a===void 0?void 0:a.viewer_url)!==null&&s!==void 0?s:null}get configCanLinkExternalContent(){var a,s;return(s=(a=this[e.rawDataSymbol].views.config)===null||a===void 0?void 0:a.can_link_external_content)!==null&&s!==void 0?s:null}};return gr.HelixExtension=r,gr.HelixExtension=r=n.__decorate([(0,t.rtfm)("api","HelixExtension","id")],r),gr}var Ba={},Hp;function b0(){if(Hp)return Ba;Hp=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.HellFreezesOverError=void 0;const n=id();let e=class extends n.CustomError{constructor(r){super(`${r} - this should never happen, please file a bug in the GitHub issue tracker`)}};return Ba.HellFreezesOverError=e,Ba}var $t={},Ap;function v0(){if(Ap)return $t;Ap=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.extractUserName=$t.extractUserId=void 0;function n(t){return typeof t=="string"?t:typeof t=="number"?t.toString(10):t.id}$t.extractUserId=n;function e(t){return typeof t=="string"?t:t.name}return $t.extractUserName=e,$t}var Rp;function U(){return Rp||(Rp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.extractUserName=n.extractUserId=n.RelationAssertionError=n.HellFreezesOverError=n.CustomError=n.HelixExtension=n.rtfm=n.checkRelationAssertion=n.rawDataSymbol=n.getRawData=n.DataObject=void 0;var e=Lb();Object.defineProperty(n,"DataObject",{enumerable:!0,get:function(){return e.DataObject}}),Object.defineProperty(n,"getRawData",{enumerable:!0,get:function(){return e.getRawData}}),Object.defineProperty(n,"rawDataSymbol",{enumerable:!0,get:function(){return e.rawDataSymbol}});var t=f0();Object.defineProperty(n,"checkRelationAssertion",{enumerable:!0,get:function(){return t.checkRelationAssertion}});var r=Fb();Object.defineProperty(n,"rtfm",{enumerable:!0,get:function(){return r.rtfm}});var i=y0();Object.defineProperty(n,"HelixExtension",{enumerable:!0,get:function(){return i.HelixExtension}});var a=id();Object.defineProperty(n,"CustomError",{enumerable:!0,get:function(){return a.CustomError}});var s=b0();Object.defineProperty(n,"HellFreezesOverError",{enumerable:!0,get:function(){return s.HellFreezesOverError}});var o=Nb();Object.defineProperty(n,"RelationAssertionError",{enumerable:!0,get:function(){return o.RelationAssertionError}});var u=v0();Object.defineProperty(n,"extractUserId",{enumerable:!0,get:function(){return u.extractUserId}}),Object.defineProperty(n,"extractUserName",{enumerable:!0,get:function(){return u.extractUserName}})}(ku)),ku}var Tp;function $b(){if(Tp)return Ra;Tp=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.HttpStatusCodeError=void 0;const n=U();let e=class extends n.CustomError{constructor(r,i,a,s,o,u){super(`Encountered HTTP status code ${r}: ${i}

URL: ${a}
Method: ${s}
Body:
${!u&&o.length>150?`${o.slice(0,147)}...`:o}`),this._statusCode=r,this._url=a,this._method=s,this._body=o}get statusCode(){return this._statusCode}get url(){return this._url}get method(){return this._method}get body(){return this._body}};return Ra.HttpStatusCodeError=e,Ra}var Ip;function Gb(){if(Ip)return Ft;Ip=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.transformTwitchApiResponse=Ft.handleTwitchApiResponseError=void 0;const n=jb(),e=$b();async function t(i,a){var s;if(!i.ok){const o=i.headers.get("Content-Type")==="application/json",u=o?JSON.stringify(await i.json(),null,2):await i.text(),h=(0,n.stringify)(a.query,{arrayFormat:"repeat",addQueryPrefix:!0}),m=`${a.url}${h}`;throw new e.HttpStatusCodeError(i.status,i.statusText,m,(s=a.method)!==null&&s!==void 0?s:"GET",u,o)}}Ft.handleTwitchApiResponseError=t;async function r(i){if(i.status===204)return;const a=await i.text();if(a)return JSON.parse(a)}return Ft.transformTwitchApiResponse=r,Ft}var Oa={},Pp;function w0(){if(Pp)return Oa;Pp=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.getTwitchApiUrl=void 0;function n(e,t,r){switch(t){case"helix":{const i=e.replace(/^\//,"");return r?i==="eventsub/subscriptions"?`http://localhost:${r}/${i}`:`http://localhost:${r}/mock/${i}`:`https://api.twitch.tv/helix/${i}`}case"auth":return`https://id.twitch.tv/oauth2/${e.replace(/^\//,"")}`;case"custom":return e;default:return e}}return Oa.getTwitchApiUrl=n,Oa}var Dp;function x0(){if(Dp)return Nt;Dp=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.callTwitchApi=Nt.callTwitchApiRaw=void 0;const n=Gf(),e=jb(),t=Gb(),r=w0();async function i(s,o,u,h,m={},w){var y,g;const p=(y=s.type)!==null&&y!==void 0?y:"helix",l=(0,r.getTwitchApiUrl)(s.url,p,w),d=(0,e.stringify)(s.query,{arrayFormat:"repeat",addQueryPrefix:!0}),v=new n.Headers({Accept:"application/json"});let C;s.jsonBody&&(C=JSON.stringify(s.jsonBody),v.append("Content-Type","application/json")),o&&p!=="auth"&&v.append("Client-ID",o),u&&v.append("Authorization",`${p==="helix"?h??"Bearer":"OAuth"} ${u}`);const R={...m,method:(g=s.method)!==null&&g!==void 0?g:"GET",headers:v,body:C};return await(0,n.default)(`${l}${d}`,R)}Nt.callTwitchApiRaw=i;async function a(s,o,u,h,m={}){const w=await i(s,o,u,h,m);return await(0,t.handleTwitchApiResponseError)(w,s),await(0,t.transformTwitchApiResponse)(w)}return Nt.callTwitchApi=a,Nt}var Ua={},Bp;function S0(){if(Bp)return Ua;Bp=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.createBroadcasterQuery=void 0;const n=U();function e(t){return{broadcaster_id:(0,n.extractUserId)(t)}}return Ua.createBroadcasterQuery=e,Ua}var Op;function Re(){return Op||(Op=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.HttpStatusCodeError=n.transformTwitchApiResponse=n.handleTwitchApiResponseError=n.createBroadcasterQuery=n.callTwitchApiRaw=n.callTwitchApi=void 0;var e=x0();Object.defineProperty(n,"callTwitchApi",{enumerable:!0,get:function(){return e.callTwitchApi}}),Object.defineProperty(n,"callTwitchApiRaw",{enumerable:!0,get:function(){return e.callTwitchApiRaw}});var t=S0();Object.defineProperty(n,"createBroadcasterQuery",{enumerable:!0,get:function(){return t.createBroadcasterQuery}});var r=Gb();Object.defineProperty(n,"handleTwitchApiResponseError",{enumerable:!0,get:function(){return r.handleTwitchApiResponseError}}),Object.defineProperty(n,"transformTwitchApiResponse",{enumerable:!0,get:function(){return r.transformTwitchApiResponse}});var i=$b();Object.defineProperty(n,"HttpStatusCodeError",{enumerable:!0,get:function(){return i.HttpStatusCodeError}})}(Uu)),Uu}var qa={},Up;function Qb(){if(Up)return qa;Up=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.ConfigError=void 0;const n=U();class e extends n.CustomError{}return qa.ConfigError=e,qa}var ka={},qp;function C0(){if(qp)return ka;qp=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.HelixRateLimiter=void 0;const n=nd(),e=Re();class t extends n.ResponseBasedRateLimiter{async doRequest({options:i,clientId:a,accessToken:s,authorizationType:o,fetchOptions:u,mockServerPort:h}){return await(0,e.callTwitchApiRaw)(i,a,s,o,u,h)}needsToRetryAfter(i){return i.status===429&&(!i.headers.has("ratelimit-remaining")||Number(i.headers.get("ratelimit-remaining"))===0)?+i.headers.get("ratelimit-reset")*1e3-Date.now():null}getParametersFromResponse(i){const{headers:a}=i;return{limit:+a.get("ratelimit-limit"),remaining:+a.get("ratelimit-remaining"),resetsAt:+a.get("ratelimit-reset")*1e3}}}return ka.HelixRateLimiter=t,ka}var fr={},Lu={},Ma={},ja={},kp;function xl(){if(kp)return ja;kp=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.createCacheKey=void 0;function n(t){switch(typeof t){case"undefined":return"";case"object":{if(t===null)return"";if("cacheKey"in t)return t.cacheKey;const r=JSON.stringify(t);if(r!=="{}")return r}default:return t.toString()}}function e(t,r,i){return[t,...r.map(n)].join("/")+(i?"/":"")}return ja.createCacheKey=e,ja}var Mp;function E0(){if(Mp)return Ma;Mp=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.Cacheable=void 0;const n=xl(),e=Symbol("cache");function t(r){var i,a;return a=class extends r{constructor(){super(...arguments),this[i]=new Map}getFromCache(s){if(this._cleanCache(),this[e].has(s)){const o=this[e].get(s);if(o)return o.value}}setCache(s,o,u){this[e].set(s,{value:o,expires:Date.now()+u*1e3})}removeFromCache(s,o){const u=this._getInternalCacheKey(s,o);o?this[e].forEach((h,m)=>{m.startsWith(u)&&this[e].delete(m)}):this[e].delete(u)}_cleanCache(){const s=Date.now();this[e].forEach((o,u)=>{o.expires<s&&this[e].delete(u)})}_getInternalCacheKey(s,o){if(typeof s=="string"){let u=s;return u.endsWith("/")||(u+="/"),u}else{const u=s.shift();return(0,n.createCacheKey)(u,s,o)}}},i=e,a}return Ma.Cacheable=t,Ma}var La={},jp;function H0(){if(jp)return La;jp=1,Object.defineProperty(La,"__esModule",{value:!0}),La.Cached=void 0;const n=xl();function e(t=1/0,r=!1){return function(i,a,s){const o=s.value;return s.value=async function(...u){const h=(0,n.createCacheKey)(a,u),m=this.getFromCache(h);if(m)return m;const w=await o.apply(this,u);return(w!=null||r)&&this.setCache(h,w,t),w},s}}return La.Cached=e,La}var Na={},Lp;function A0(){if(Lp)return Na;Lp=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.CachedGetter=void 0;const n=xl();function e(t=1/0){return function(r,i,a){if(a.get){const s=a.get;a.get=function(){const o=(0,n.createCacheKey)(i,[]),u=this.getFromCache(o);if(u)return u;const h=s.call(this);return this.setCache(o,h,t),h}}return a}}return Na.CachedGetter=e,Na}var Fa={},Np;function R0(){if(Np)return Fa;Np=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.ClearsCache=void 0;function n(e,t){return function(r,i,a){const s=a.value;return a.value=async function(...o){const u=await s.apply(this,o),h=t===void 0?o.slice():o.slice(0,t);return this.removeFromCache([e,...h],!0),u},a}}return Fa.ClearsCache=n,Fa}var Fp;function Sl(){return Fp||(Fp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.createCacheKey=n.ClearsCache=n.CachedGetter=n.Cached=n.Cacheable=void 0;var e=E0();Object.defineProperty(n,"Cacheable",{enumerable:!0,get:function(){return e.Cacheable}});var t=H0();Object.defineProperty(n,"Cached",{enumerable:!0,get:function(){return t.Cached}});var r=A0();Object.defineProperty(n,"CachedGetter",{enumerable:!0,get:function(){return r.CachedGetter}});var i=R0();Object.defineProperty(n,"ClearsCache",{enumerable:!0,get:function(){return i.ClearsCache}});var a=xl();Object.defineProperty(n,"createCacheKey",{enumerable:!0,get:function(){return a.createCacheKey}})}(Lu)),Lu}var Nu={},$a={},Ga={},$p;function Wb(){if($p)return Ga;$p=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.Listener=void 0;let n=class{constructor(t,r,i,a=!1){this.owner=t,this.event=r,this.listener=i,this._internal=a}unbind(){this.owner.removeListener(this)}};return Ga.Listener=n,Ga}var Gp;function T0(){if(Gp)return $a;Gp=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.EventEmitter=void 0;const n=Wb();let e=class{constructor(){this._eventListeners=new Map,this._internalEventListeners=new Map}on(r,i){return this._addListener(!1,r,i)}addListener(r,i){return this._addListener(!1,r,i)}removeListener(r,i){this._removeListener(!1,r,i)}registerEvent(){const r=i=>this.addListener(r,i);return r}emit(r,...i){if(this._eventListeners.has(r))for(const a of this._eventListeners.get(r))a(...i);if(this._internalEventListeners.has(r))for(const a of this._internalEventListeners.get(r))a(...i)}registerInternalEvent(){const r=i=>this.addInternalListener(r,i);return r}addInternalListener(r,i){return this._addListener(!0,r,i)}removeInternalListener(r,i){this._removeListener(!0,r,i)}_addListener(r,i,a){const s=r?this._eventListeners:this._internalEventListeners;return s.has(i)?s.get(i).push(a):s.set(i,[a]),new n.Listener(this,i,a,r)}_removeListener(r,i,a){const s=r?this._eventListeners:this._internalEventListeners;if(!i)s.clear();else if(typeof i=="object"){const o=i;this._removeListener(o._internal,o.event,o.listener)}else{const o=i;if(s.has(o))if(a){const u=s.get(o);let h=0;for(;(h=u.indexOf(a))!==-1;)u.splice(h,1)}else s.delete(o)}}};return $a.EventEmitter=e,$a}var Qp;function Vb(){return Qp||(Qp=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Listener=n.EventEmitter=void 0;var e=T0();Object.defineProperty(n,"EventEmitter",{enumerable:!0,get:function(){return e.EventEmitter}});var t=Wb();Object.defineProperty(n,"Listener",{enumerable:!0,get:function(){return t.Listener}})}(Nu)),Nu}var Fu={},Gt={},Wp;function ad(){if(Wp)return Gt;Wp=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.accessTokenIsExpired=Gt.getExpiryDateOfAccessToken=void 0;const n=W(),e=6e4;function t(a){return(0,n.mapNullable)(a.expiresIn,s=>a.obtainmentTimestamp+s*1e3-e)}function r(a){return(0,n.mapNullable)(t(a),s=>new Date(s))}Gt.getExpiryDateOfAccessToken=r;function i(a){var s;return(s=(0,n.mapNullable)(t(a),o=>Date.now()>o))!==null&&s!==void 0?s:!1}return Gt.accessTokenIsExpired=i,Gt}var Ee={},Qa={},Vp;function sd(){if(Vp)return Qa;Vp=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.InvalidTokenError=void 0;const n=U();let e=class extends n.CustomError{constructor(r){super("Invalid token supplied",r)}};return Qa.InvalidTokenError=e,Qa}var Wa={},zp;function od(){if(zp)return Wa;zp=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.InvalidTokenTypeError=void 0;const n=U();let e=class extends n.CustomError{};return Wa.InvalidTokenTypeError=e,Wa}var at={},Kp;function I0(){if(Kp)return at;Kp=1,Object.defineProperty(at,"__esModule",{value:!0}),at.createRevokeTokenQuery=at.createRefreshTokenQuery=at.createGetAppTokenQuery=at.createExchangeCodeQuery=void 0;function n(i,a,s,o){return{grant_type:"authorization_code",client_id:i,client_secret:a,code:s,redirect_uri:o}}at.createExchangeCodeQuery=n;function e(i,a){return{grant_type:"client_credentials",client_id:i,client_secret:a}}at.createGetAppTokenQuery=e;function t(i,a,s){return{grant_type:"refresh_token",client_id:i,client_secret:a,refresh_token:s}}at.createRefreshTokenQuery=t;function r(i,a){return{client_id:i,token:a}}return at.createRevokeTokenQuery=r,at}var yr={},Xp;function zb(){if(Xp)return yr;Xp=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.TokenInfo=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a){super(a),this._obtainmentDate=new Date}get clientId(){return this[t.rawDataSymbol].client_id}get userId(){var a;return(a=this[t.rawDataSymbol].user_id)!==null&&a!==void 0?a:null}get userName(){var a;return(a=this[t.rawDataSymbol].login)!==null&&a!==void 0?a:null}get scopes(){return this[t.rawDataSymbol].scopes}get expiryDate(){return(0,e.mapNullable)(this[t.rawDataSymbol].expires_in,a=>new Date(this._obtainmentDate.getTime()+a*1e3))}};return yr.TokenInfo=r,yr.TokenInfo=r=n.__decorate([(0,t.rtfm)("auth","TokenInfo","clientId")],r),yr}var Jp;function Cl(){if(Jp)return Ee;Jp=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.loadAndCompareTokenInfo=Ee.compareScopeSets=Ee.compareScopes=Ee.getValidTokenFromProviderForIntent=Ee.getValidTokenFromProviderForUser=Ee.getTokenInfo=Ee.revokeToken=Ee.refreshUserToken=Ee.getAppToken=Ee.exchangeCode=void 0;const n=Re(),e=sd(),t=od(),r=I0(),i=zb();function a(v){var C,R;return{accessToken:v.access_token,refreshToken:v.refresh_token||null,scope:(C=v.scope)!==null&&C!==void 0?C:[],expiresIn:(R=v.expires_in)!==null&&R!==void 0?R:null,obtainmentTimestamp:Date.now()}}async function s(v,C,R,P){return a(await(0,n.callTwitchApi)({type:"auth",url:"token",method:"POST",query:(0,r.createExchangeCodeQuery)(v,C,R,P)}))}Ee.exchangeCode=s;async function o(v,C){return a(await(0,n.callTwitchApi)({type:"auth",url:"token",method:"POST",query:(0,r.createGetAppTokenQuery)(v,C)}))}Ee.getAppToken=o;async function u(v,C,R){return a(await(0,n.callTwitchApi)({type:"auth",url:"token",method:"POST",query:(0,r.createRefreshTokenQuery)(v,C,R)}))}Ee.refreshUserToken=u;async function h(v,C){await(0,n.callTwitchApi)({type:"auth",url:"revoke",method:"POST",query:(0,r.createRevokeTokenQuery)(v,C)})}Ee.revokeToken=h;async function m(v,C){try{const R=await(0,n.callTwitchApi)({type:"auth",url:"validate"},C,v);return new i.TokenInfo(R)}catch(R){throw R instanceof n.HttpStatusCodeError&&R.statusCode===401?new e.InvalidTokenError({cause:R}):R}}Ee.getTokenInfo=m;async function w(v,C,R,P){let _=null,x=!1;try{const H=await v.getAccessTokenForUser(C,R);if(H){x=!0;const q=await m(H.accessToken);return{accessToken:H,tokenInfo:q}}}catch(H){H instanceof e.InvalidTokenError?_=H:P==null||P.error(`Retrieving an access token failed: ${H.message}`)}if(x&&(P==null||P.warn("No valid token available; trying to refresh"),v.refreshAccessTokenForUser))try{const H=await v.refreshAccessTokenForUser(C),q=await m(H.accessToken);return{accessToken:H,tokenInfo:q}}catch(H){H instanceof e.InvalidTokenError?_=H:P==null||P.error(`Refreshing the access token failed: ${H.message}`)}throw _??new Error("Could not retrieve a valid token")}Ee.getValidTokenFromProviderForUser=w;async function y(v,C,R,P){let _=null,x=!1;if(!v.getAccessTokenForIntent)throw new t.InvalidTokenTypeError("This call requires an AuthProvider that supports intents.\nPlease use an auth provider that does, such as `RefreshingAuthProvider`.");try{const H=await v.getAccessTokenForIntent(C,R);if(H){x=!0;const q=await m(H.accessToken);return{accessToken:H,tokenInfo:q}}}catch(H){H instanceof e.InvalidTokenError?_=H:P==null||P.error(`Retrieving an access token failed: ${H.message}`)}if(x&&(P==null||P.warn("No valid token available; trying to refresh"),v.refreshAccessTokenForIntent))try{const H=await v.refreshAccessTokenForIntent(C),q=await m(H.accessToken);return{accessToken:H,tokenInfo:q}}catch(H){H instanceof e.InvalidTokenError?_=H:P==null||P.error(`Refreshing the access token failed: ${H.message}`)}throw _??new Error("Could not retrieve a valid token")}Ee.getValidTokenFromProviderForIntent=y;const g=new Map([["channel_commercial",["channel:edit:commercial"]],["channel_editor",["channel:manage:broadcast"]],["channel_read",["channel:read:stream_key"]],["channel_subscriptions",["channel:read:subscriptions"]],["user_blocks_read",["user:read:blocked_users"]],["user_blocks_edit",["user:manage:blocked_users"]],["user_follows_edit",["user:edit:follows"]],["user_read",["user:read:email"]],["user_subscriptions",["user:read:subscriptions"]],["user:edit:broadcast",["channel:manage:broadcast","channel:manage:extensions"]]]);function p(v,C){if(C!=null&&C.length){const R=new Set(v.flatMap(P=>{var _;return[P,...(_=g.get(P))!==null&&_!==void 0?_:[]]}));if(C.every(P=>!R.has(P))){const P=C.join(", ");throw new Error(`This token does not have any of the requested scopes (${P}) and can not be upgraded.
If you need dynamically upgrading scopes, please implement the AuthProvider interface accordingly:

	https://twurple.js.org/reference/auth/interfaces/AuthProvider.html`)}}}Ee.compareScopes=p;function l(v,C){for(const R of C)p(v,R)}Ee.compareScopeSets=l;async function d(v,C,R,P,_){if(_!=null&&_.length||!R){const x=await m(C,v);if(!x.userId)throw new Error("Trying to use an app access token as a user access token");const H=P??x.scopes;return _&&l(H,_.filter(q=>!!q)),[H,x.userId]}return[P,R]}return Ee.loadAndCompareTokenInfo=d,Ee}var Va={},Yp;function ld(){if(Yp)return Va;Yp=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.TokenFetcher=void 0;const n=W();let e=class{constructor(r){this._newTokenScopeSets=[],this._newTokenPromise=null,this._queuedScopeSets=[],this._queueExecutor=null,this._queuePromise=null,this._executor=r}async fetch(...r){var i;const a=r.filter(h=>!!h);if(this._newTokenPromise){if(!a.length)return await this._newTokenPromise;if(this._queueExecutor?this._queuedScopeSets.push(...a):this._queuedScopeSets=[...a],!this._queuePromise){const{promise:h,resolve:m,reject:w}=(0,n.promiseWithResolvers)();this._queuePromise=h,this._queueExecutor=async()=>{var y;if(this._queuePromise){this._newTokenScopeSets=this._queuedScopeSets,this._queuedScopeSets=[],this._newTokenPromise=this._queuePromise,this._queuePromise=null,this._queueExecutor=null;try{m(await this._executor(this._newTokenScopeSets))}catch(g){w(g)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(y=this._queueExecutor)===null||y===void 0||y.call(this)}}}}return await this._queuePromise}this._newTokenScopeSets=[...a];const{promise:s,resolve:o,reject:u}=(0,n.promiseWithResolvers)();this._newTokenPromise=s;try{o(await this._executor(this._newTokenScopeSets))}catch(h){u(h)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(i=this._queueExecutor)===null||i===void 0||i.call(this)}return await s}};return Va.TokenFetcher=e,Va}var br={},Zp;function P0(){if(Zp)return br;Zp=1,Object.defineProperty(br,"__esModule",{value:!0}),br.AppTokenAuthProvider=void 0;const n=M,e=W(),t=U(),r=ad(),i=Cl(),a=ld();let s=class{constructor(u,h,m=[]){this._clientId=u,this._clientSecret=h,this._impliedScopes=m,this._fetcher=new a.TokenFetcher(async w=>await this._fetch(w))}get clientId(){return this._clientId}get currentScopes(){return this._impliedScopes}async getAccessTokenForUser(){throw new Error("Can not get user access token for AppTokenAuthProvider")}getCurrentScopesForUser(){throw new Error("Can not get user scopes for AppTokenAuthProvider")}async getAnyAccessToken(){return await this._fetcher.fetch()}async getAppAccessToken(u=!1){return u&&(this._token=void 0),await this._fetcher.fetch()}async _fetch(u){if(u.length>0)for(const h of u)if(this._impliedScopes.length){if(h.every(m=>!this._impliedScopes.includes(m)))throw new Error(`One of the scopes ${h.join(", ")} requested but only the scope ${this._impliedScopes.join(", ")} is implied`)}else throw new Error(`One of the scopes ${h.join(", ")} requested but the client credentials flow does not support scopes`);return!this._token||(0,r.accessTokenIsExpired)(this._token)?this._token=await(0,i.getAppToken)(this._clientId,this._clientSecret):this._token}};return br.AppTokenAuthProvider=s,n.__decorate([(0,e.Enumerable)(!1)],s.prototype,"_clientSecret",void 0),n.__decorate([(0,e.Enumerable)(!1)],s.prototype,"_token",void 0),n.__decorate([(0,e.Enumerable)(!1)],s.prototype,"_fetcher",void 0),br.AppTokenAuthProvider=s=n.__decorate([(0,t.rtfm)("auth","AppTokenAuthProvider","clientId")],s),br}var vr={},za={},em;function Kb(){if(em)return za;em=1,Object.defineProperty(za,"__esModule",{value:!0}),za.CachedRefreshFailureError=void 0;const n=U();let e=class extends n.CustomError{constructor(r){super(`The user context for the user ${r} has been disabled.
This happened because the access token became invalid (e.g. by expiry) and refreshing it failed (e.g. because the account's password was changed).

Use .addUser(), .addUserForToken() or .addUserForCode() for the same user context to re-enable the user with a new, valid token.`),this.userId=r}};return za.CachedRefreshFailureError=e,za}var Ka={},tm;function Xb(){if(tm)return Ka;tm=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.IntermediateUserRemovalError=void 0;const n=U();let e=class extends n.CustomError{constructor(r){super(`User ${r} was removed while trying to fetch a token.

Make sure you're not executing any actions when you want to remove a user.`),this.userId=r}};return Ka.IntermediateUserRemovalError=e,Ka}var Xa={},rm;function Jb(){if(rm)return Xa;rm=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.UnknownIntentError=void 0;const n=U();let e=class extends n.CustomError{constructor(r){super(`Unknown intent: ${r}`),this.intent=r}};return Xa.UnknownIntentError=e,Xa}var nm;function D0(){if(nm)return vr;nm=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.RefreshingAuthProvider=void 0;const n=M,e=W(),t=Vb(),r=U(),i=ad(),a=Kb(),s=Xb(),o=sd(),u=od(),h=Jb(),m=Cl(),w=ld();let y=class extends t.EventEmitter{constructor(p){var l;super(),this._userAccessTokens=new Map,this._userTokenFetchers=new Map,this._intentToUserId=new Map,this._userIdToIntents=new Map,this._cachedRefreshFailures=new Set,this.onRefresh=this.registerEvent(),this.onRefreshFailure=this.registerEvent(),this._clientId=p.clientId,this._clientSecret=p.clientSecret,this._redirectUri=p.redirectUri,this._appImpliedScopes=(l=p.appImpliedScopes)!==null&&l!==void 0?l:[],this._appTokenFetcher=new w.TokenFetcher(async d=>await this._fetchAppToken(d))}addUser(p,l,d){const v=(0,r.extractUserId)(p);if(!l.refreshToken)throw new Error(`Trying to add user ${v} without refresh token`);this._cachedRefreshFailures.delete(v),this._userAccessTokens.set(v,{...l,userId:v}),this._userTokenFetchers.has(v)||this._userTokenFetchers.set(v,new w.TokenFetcher(async C=>await this._fetchUserToken(v,C))),d&&this.addIntentsToUser(p,d)}async addUserForToken(p,l){let d=null;if(p.accessToken&&!(0,i.accessTokenIsExpired)(p))try{const P=await(0,m.getTokenInfo)(p.accessToken);d=[p,P]}catch(P){if(!(P instanceof o.InvalidTokenError))throw P}if(!d){if(!p.refreshToken)throw new o.InvalidTokenError;const P=await(0,m.refreshUserToken)(this._clientId,this._clientSecret,p.refreshToken),_=await(0,m.getTokenInfo)(P.accessToken);this.emit(this.onRefresh,_.userId,P),d=[P,_]}const[v,C]=d;if(!C.userId)throw new u.InvalidTokenTypeError("Could not determine a user ID for your token; you might be trying to disguise an app token as a user token.");const R=v.scope?v:{...v,scope:C.scopes};return this.addUser(C.userId,R,l),C.userId}async addUserForCode(p,l){if(!this._redirectUri)throw new Error("This method requires you to pass a `redirectUri` as a configuration property");const d=await(0,m.exchangeCode)(this._clientId,this._clientSecret,p,this._redirectUri);return await this.addUserForToken(d,l)}hasUser(p){return this._userTokenFetchers.has((0,r.extractUserId)(p))}removeUser(p){const l=(0,r.extractUserId)(p);if(this._userIdToIntents.has(l)){const d=this._userIdToIntents.get(l);for(const v of d)this._intentToUserId.delete(v);this._userIdToIntents.delete(l)}this._userAccessTokens.delete(l),this._userTokenFetchers.delete(l),this._cachedRefreshFailures.delete(l)}addIntentsToUser(p,l){const d=(0,r.extractUserId)(p);if(!this._userAccessTokens.has(d))throw new Error("Trying to add intents to a user that was not added to this provider");for(const v of l)this._intentToUserId.has(v)&&this._userIdToIntents.get(this._intentToUserId.get(v)).delete(v),this._intentToUserId.set(v,d),this._userIdToIntents.has(d)?this._userIdToIntents.get(d).add(v):this._userIdToIntents.set(d,new Set([v]))}getIntentsForUser(p){const l=(0,r.extractUserId)(p);return this._userIdToIntents.has(l)?Array.from(this._userIdToIntents.get(l)):[]}removeIntents(p){var l;for(const d of p)if(this._intentToUserId.has(d)){const v=this._intentToUserId.get(d);(l=this._userIdToIntents.get(v))===null||l===void 0||l.delete(d),this._intentToUserId.delete(d)}}async refreshAccessTokenForUser(p){const l=(0,r.extractUserId)(p);if(this._cachedRefreshFailures.has(l))throw new a.CachedRefreshFailureError(l);const d=this._userAccessTokens.get(l);if(!d)throw new Error("Trying to refresh token for user that was not added to the provider");const v=await this._refreshUserTokenWithCallback(l,d.refreshToken);return this._checkIntermediateUserRemoval(l),this._userAccessTokens.set(l,{...v,userId:l}),this.emit(this.onRefresh,l,v),{...v,userId:l}}async refreshAccessTokenForIntent(p){if(!this._intentToUserId.has(p))throw new h.UnknownIntentError(p);const l=this._intentToUserId.get(p);return await this.refreshAccessTokenForUser(l)}get clientId(){return this._clientId}getCurrentScopesForUser(p){var l;const d=this._userAccessTokens.get((0,r.extractUserId)(p));if(!d)throw new Error("Trying to get scopes for user that was not added to the provider");return(l=d.scope)!==null&&l!==void 0?l:[]}async getAccessTokenForUser(p,...l){const d=(0,r.extractUserId)(p),v=this._userTokenFetchers.get(d);if(!v)return null;if(this._cachedRefreshFailures.has(d))throw new a.CachedRefreshFailureError(d);return(0,m.compareScopeSets)(this.getCurrentScopesForUser(d),l.filter(Boolean)),await v.fetch(...l)}async getAccessTokenForIntent(p,...l){if(!this._intentToUserId.has(p))return null;const d=this._intentToUserId.get(p),v=await this.getAccessTokenForUser(d,...l);if(!v)throw new r.HellFreezesOverError(`Found intent ${p} corresponding to user ID ${d} but no token was found`);return{...v,userId:d}}async getAnyAccessToken(p){if(p){const l=(0,r.extractUserId)(p);if(this._userAccessTokens.has(l)){const d=await this.getAccessTokenForUser(l);if(!d)throw new r.HellFreezesOverError(`Token for user ID ${l} exists but nothing was returned by getAccessTokenForUser`);return{...d,userId:l}}}return await this.getAppAccessToken()}async getAppAccessToken(p=!1){return p&&(this._appAccessToken=void 0),await this._appTokenFetcher.fetch(...this._appImpliedScopes.map(l=>[l]))}_checkIntermediateUserRemoval(p){if(!this._userTokenFetchers.has(p))throw this._cachedRefreshFailures.delete(p),new s.IntermediateUserRemovalError(p)}async _fetchUserToken(p,l){const d=this._userAccessTokens.get(p);if(!d)throw new Error("Trying to get token for user that was not added to the provider");if(d.accessToken&&!(0,i.accessTokenIsExpired)(d))try{if(d.scope)return(0,m.compareScopeSets)(d.scope,l),d;const[C=[]]=await(0,m.loadAndCompareTokenInfo)(this._clientId,d.accessToken,p,d.scope,l),R={...d,scope:C};return this._checkIntermediateUserRemoval(p),this._userAccessTokens.set(p,R),R}catch(C){if(!(C instanceof o.InvalidTokenError))throw C}this._checkIntermediateUserRemoval(p);const v=await this.refreshAccessTokenForUser(p);return(0,m.compareScopeSets)(v.scope,l),v}async _refreshUserTokenWithCallback(p,l){try{return await(0,m.refreshUserToken)(this.clientId,this._clientSecret,l)}catch(d){throw this._cachedRefreshFailures.add(p),this.emit(this.onRefreshFailure,p,d),d}}async _fetchAppToken(p){if(p.length>0)for(const l of p)if(this._appImpliedScopes.length){if(l.every(d=>!this._appImpliedScopes.includes(d)))throw new Error(`One of the scopes ${l.join(", ")} requested but only the scope ${this._appImpliedScopes.join(", ")} is implied`)}else throw new Error(`One of the scopes ${l.join(", ")} requested but the client credentials flow does not support scopes`);return!this._appAccessToken||(0,i.accessTokenIsExpired)(this._appAccessToken)?await this._refreshAppToken():this._appAccessToken}async _refreshAppToken(){return this._appAccessToken=await(0,m.getAppToken)(this._clientId,this._clientSecret)}};return vr.RefreshingAuthProvider=y,n.__decorate([(0,e.Enumerable)(!1)],y.prototype,"_clientSecret",void 0),n.__decorate([(0,e.Enumerable)(!1)],y.prototype,"_userAccessTokens",void 0),n.__decorate([(0,e.Enumerable)(!1)],y.prototype,"_userTokenFetchers",void 0),n.__decorate([(0,e.Enumerable)(!1)],y.prototype,"_appAccessToken",void 0),n.__decorate([(0,e.Enumerable)(!1)],y.prototype,"_appTokenFetcher",void 0),vr.RefreshingAuthProvider=y=n.__decorate([(0,r.rtfm)("auth","RefreshingAuthProvider","clientId")],y),vr}var wr={},im;function B0(){if(im)return wr;im=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.StaticAuthProvider=void 0;const n=M,e=W(),t=U(),r=Cl();let i=class{constructor(s,o,u){this._clientId=s||"",this._accessToken=typeof o=="string"?{accessToken:o,refreshToken:null,scope:u??[],expiresIn:null,obtainmentTimestamp:Date.now()}:o,this._scopes=u}get clientId(){return this._clientId}async getAccessTokenForUser(s,...o){return await this._getAccessToken(o)}async getAccessTokenForIntent(s,...o){return await this._getAccessToken(o)}async getAnyAccessToken(){return await this._getAccessToken()}getCurrentScopesForUser(){var s;return(s=this._scopes)!==null&&s!==void 0?s:[]}async _getAccessToken(s){const[o,u]=await(0,r.loadAndCompareTokenInfo)(this._clientId,this._accessToken.accessToken,this._userId,this._scopes,s);return this._scopes=o,this._userId=u,{...this._accessToken,userId:u}}};return wr.StaticAuthProvider=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_clientId",void 0),n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_accessToken",void 0),wr.StaticAuthProvider=i=n.__decorate([(0,t.rtfm)("auth","StaticAuthProvider","clientId")],i),wr}var am;function Yb(){return am||(am=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.UnknownIntentError=n.InvalidTokenTypeError=n.InvalidTokenError=n.IntermediateUserRemovalError=n.CachedRefreshFailureError=n.StaticAuthProvider=n.RefreshingAuthProvider=n.AppTokenAuthProvider=n.TokenInfo=n.TokenFetcher=n.revokeToken=n.refreshUserToken=n.getValidTokenFromProviderForIntent=n.getValidTokenFromProviderForUser=n.getTokenInfo=n.getAppToken=n.exchangeCode=n.getExpiryDateOfAccessToken=n.accessTokenIsExpired=void 0;var e=ad();Object.defineProperty(n,"accessTokenIsExpired",{enumerable:!0,get:function(){return e.accessTokenIsExpired}}),Object.defineProperty(n,"getExpiryDateOfAccessToken",{enumerable:!0,get:function(){return e.getExpiryDateOfAccessToken}});var t=Cl();Object.defineProperty(n,"exchangeCode",{enumerable:!0,get:function(){return t.exchangeCode}}),Object.defineProperty(n,"getAppToken",{enumerable:!0,get:function(){return t.getAppToken}}),Object.defineProperty(n,"getTokenInfo",{enumerable:!0,get:function(){return t.getTokenInfo}}),Object.defineProperty(n,"getValidTokenFromProviderForUser",{enumerable:!0,get:function(){return t.getValidTokenFromProviderForUser}}),Object.defineProperty(n,"getValidTokenFromProviderForIntent",{enumerable:!0,get:function(){return t.getValidTokenFromProviderForIntent}}),Object.defineProperty(n,"refreshUserToken",{enumerable:!0,get:function(){return t.refreshUserToken}}),Object.defineProperty(n,"revokeToken",{enumerable:!0,get:function(){return t.revokeToken}});var r=ld();Object.defineProperty(n,"TokenFetcher",{enumerable:!0,get:function(){return r.TokenFetcher}});var i=zb();Object.defineProperty(n,"TokenInfo",{enumerable:!0,get:function(){return i.TokenInfo}});var a=P0();Object.defineProperty(n,"AppTokenAuthProvider",{enumerable:!0,get:function(){return a.AppTokenAuthProvider}});var s=D0();Object.defineProperty(n,"RefreshingAuthProvider",{enumerable:!0,get:function(){return s.RefreshingAuthProvider}});var o=B0();Object.defineProperty(n,"StaticAuthProvider",{enumerable:!0,get:function(){return o.StaticAuthProvider}});var u=Kb();Object.defineProperty(n,"CachedRefreshFailureError",{enumerable:!0,get:function(){return u.CachedRefreshFailureError}});var h=Xb();Object.defineProperty(n,"IntermediateUserRemovalError",{enumerable:!0,get:function(){return h.IntermediateUserRemovalError}});var m=sd();Object.defineProperty(n,"InvalidTokenError",{enumerable:!0,get:function(){return m.InvalidTokenError}});var w=od();Object.defineProperty(n,"InvalidTokenTypeError",{enumerable:!0,get:function(){return w.InvalidTokenTypeError}});var y=Jb();Object.defineProperty(n,"UnknownIntentError",{enumerable:!0,get:function(){return y.UnknownIntentError}})}(Fu)),Fu}var $u={},Gu,sm;function O0(){if(sm)return Gu;sm=1;function n(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return Gu=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},r),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,r=0,i=0;i<this._errors.length;i++){var a=this._errors[i],s=a.message,o=(e[s]||0)+1;e[s]=o,o>=r&&(t=a,r=o)}return t},Gu}var om;function U0(){return om||(om=1,function(n){var e=O0();n.operation=function(t){var r=n.timeouts(t);return new e(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in t)r[i]=t[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],s=0;s<r.retries;s++)a.push(this.createTimeout(s,r));return t&&t.forever&&!a.length&&a.push(this.createTimeout(s,r)),a.sort(function(o,u){return o-u}),a},n.createTimeout=function(t,r){var i=r.randomize?Math.random()+1:1,a=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,t));return a=Math.min(a,r.maxTimeout),a},n.wrap=function(t,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var a in t)typeof t[a]=="function"&&i.push(a)}for(var s=0;s<i.length;s++){var o=i[s],u=t[o];t[o]=(function(m){var w=n.operation(r),y=Array.prototype.slice.call(arguments,1),g=y.pop();y.push(function(p){w.retry(p)||(p&&(arguments[0]=w.mainError()),g.apply(this,arguments))}),w.attempt(function(){m.apply(t,y)})}).bind(t,u),t[o].options=r}}}($u)),$u}var Qu,lm;function Zb(){return lm||(lm=1,Qu=U0()),Qu}var xr={},Ja={},um;function q0(){if(um)return Ja;um=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.createBitsLeaderboardQuery=void 0;function n(e={}){const{count:t=10,period:r="all",startDate:i,contextUserId:a}=e;return{count:t.toString(),period:r,started_at:i==null?void 0:i.toISOString(),user_id:a}}return Ja.createBitsLeaderboardQuery=n,Ja}var Ya={},cm;function ve(){if(cm)return Ya;cm=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.BaseApi=void 0;const n=M,e=W();class t{constructor(i){this._client=i}_getUserContextIdWithDefault(i){var a;return(a=this._client._getUserIdFromRequestContext(i))!==null&&a!==void 0?a:i}}return Ya.BaseApi=t,n.__decorate([(0,e.Enumerable)(!1)],t.prototype,"_client",void 0),Ya}var Sr={},Cr={},dm;function ev(){if(dm)return Cr;dm=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.HelixBitsLeaderboardEntry=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}get rank(){return this[t.rawDataSymbol].rank}get amount(){return this[t.rawDataSymbol].score}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return Cr.HelixBitsLeaderboardEntry=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Cr.HelixBitsLeaderboardEntry=r=n.__decorate([(0,t.rtfm)("api","HelixBitsLeaderboardEntry","userId")],r),Cr}var hm;function tv(){if(hm)return Sr;hm=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.HelixBitsLeaderboard=void 0;const n=M,e=Sl(),t=W(),r=U(),i=ev();let a=class extends r.DataObject{constructor(o,u){super(o),this._client=u}get entries(){return this[r.rawDataSymbol].data.map(o=>new i.HelixBitsLeaderboardEntry(o,this._client))}get totalCount(){return this[r.rawDataSymbol].total}};return Sr.HelixBitsLeaderboard=a,n.__decorate([(0,t.Enumerable)(!1)],a.prototype,"_client",void 0),n.__decorate([(0,e.CachedGetter)()],a.prototype,"entries",null),Sr.HelixBitsLeaderboard=a=n.__decorate([e.Cacheable,(0,r.rtfm)("api","HelixBitsLeaderboard")],a),Sr}var Er={},pm;function rv(){if(pm)return Er;pm=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.HelixCheermoteList=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a){super((0,e.indexBy)(a,s=>s.prefix.toLowerCase()))}getCheermoteDisplayInfo(a,s,o){a=a.toLowerCase();const{background:u,state:h,scale:m}=o,{tiers:w}=this[t.rawDataSymbol][a],y=w.sort((g,p)=>p.min_bits-g.min_bits).find(g=>g.min_bits<=s);if(!y)throw new t.HellFreezesOverError(`Cheermote "${a}" does not have an applicable tier for ${s} bits`);return{url:y.images[u][h][m],color:y.color}}getPossibleNames(){return Object.keys(this[t.rawDataSymbol])}};return Er.HelixCheermoteList=r,Er.HelixCheermoteList=r=n.__decorate([(0,t.rtfm)("api","HelixCheermoteList")],r),Er}var mm;function nv(){if(mm)return xr;mm=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.HelixBitsApi=void 0;const n=M,e=W(),t=Re(),r=U(),i=q0(),a=ve(),s=tv(),o=rv();let u=class extends a.BaseApi{async getLeaderboard(m,w={}){const y=await this._client.callApi({type:"helix",url:"bits/leaderboard",userId:(0,r.extractUserId)(m),scopes:["bits:read"],query:(0,i.createBitsLeaderboardQuery)(w)});return new s.HelixBitsLeaderboard(y,this._client)}async getCheermotes(m){const w=await this._client.callApi({type:"helix",url:"bits/cheermotes",userId:(0,e.mapOptional)(m,r.extractUserId),query:(0,e.mapOptional)(m,t.createBroadcasterQuery)});return new o.HelixCheermoteList(w.data)}};return xr.HelixBitsApi=u,xr.HelixBitsApi=u=n.__decorate([(0,r.rtfm)("api","HelixBitsApi")],u),xr}var Hr={},We={},_m;function k0(){if(_m)return We;_m=1,Object.defineProperty(We,"__esModule",{value:!0}),We.createFollowedChannelQuery=We.createChannelFollowerQuery=We.createChannelVipUpdateQuery=We.createChannelCommercialBody=We.createChannelUpdateBody=void 0;const n=W(),e=U();function t(o){var u;return{game_id:o.gameId,broadcaster_language:o.language,title:o.title,delay:(u=o.delay)===null||u===void 0?void 0:u.toString(),tags:o.tags,content_classification_labels:o.contentClassificationLabels,is_branded_content:o.isBrandedContent}}We.createChannelUpdateBody=t;function r(o,u){return{broadcaster_id:(0,e.extractUserId)(o),length:u}}We.createChannelCommercialBody=r;function i(o,u){return{broadcaster_id:(0,e.extractUserId)(o),user_id:(0,e.extractUserId)(u)}}We.createChannelVipUpdateQuery=i;function a(o,u){return{broadcaster_id:(0,e.extractUserId)(o),user_id:(0,n.mapOptional)(u,e.extractUserId)}}We.createChannelFollowerQuery=a;function s(o,u){return{broadcaster_id:(0,n.mapOptional)(u,e.extractUserId),user_id:(0,e.extractUserId)(o)}}return We.createFollowedChannelQuery=s,We}var Ve={},gm;function tt(){if(gm)return Ve;gm=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.createChannelUsersCheckQuery=Ve.createGetByIdsQuery=Ve.createModeratorActionQuery=Ve.createUserQuery=Ve.createSingleKeyQuery=void 0;const n=U();function e(s,o){return{[s]:o}}Ve.createSingleKeyQuery=e;function t(s){return{user_id:(0,n.extractUserId)(s)}}Ve.createUserQuery=t;function r(s,o){return{broadcaster_id:s,moderator_id:o}}Ve.createModeratorActionQuery=r;function i(s,o){return{broadcaster_id:(0,n.extractUserId)(s),id:o}}Ve.createGetByIdsQuery=i;function a(s,o){return{broadcaster_id:(0,n.extractUserId)(s),user_id:o.map(n.extractUserId)}}return Ve.createChannelUsersCheckQuery=a,Ve}var Ar={},fm;function ud(){if(fm)return Ar;fm=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.HelixUserRelation=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].user_id}get name(){return this[t.rawDataSymbol].user_login}get displayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return Ar.HelixUserRelation=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Ar.HelixUserRelation=r=n.__decorate([(0,t.rtfm)("api","HelixUserRelation","id")],r),Ar}var Za={},ym;function ar(){if(ym)return Za;ym=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.HelixRequestBatcher=void 0;const n=M,e=W();class t{constructor(i,a,s,o,u,h=100){this._callOptions=i,this._queryParamName=a,this._matchKey=s,this._mapper=u,this._limitPerRequest=h,this._requestedIds=[],this._requestResolversById=new Map,this._waitTimer=null,this._client=o,this._delay=o._batchDelay}async request(i){const{promise:a,resolve:s,reject:o}=(0,e.promiseWithResolvers)();return this._requestedIds.includes(i)||this._requestedIds.push(i),this._requestResolversById.has(i)?this._requestResolversById.get(i).push({resolve:s,reject:o}):this._requestResolversById.set(i,[{resolve:s,reject:o}]),this._waitTimer&&(clearTimeout(this._waitTimer),this._waitTimer=null),this._requestedIds.length>=this._limitPerRequest?this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest)):this._waitTimer=setTimeout(()=>{this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest))},this._delay),await a}async _handleBatch(i){var a;try{const{data:s}=await this._doRequest(i),o=(0,e.indexBy)(s,this._matchKey);for(const u of i){for(const h of(a=this._requestResolversById.get(u))!==null&&a!==void 0?a:[])Object.prototype.hasOwnProperty.call(o,u)?h.resolve(this._mapper(o[u])):h.resolve(null);this._requestResolversById.delete(u)}}catch{await Promise.all(i.map(async o=>{var u,h;try{const m=await this._doRequest([o]);for(const w of(u=this._requestResolversById.get(o))!==null&&u!==void 0?u:[])w.resolve(m.data.length?this._mapper(m.data[0]):null)}catch(m){for(const w of(h=this._requestResolversById.get(o))!==null&&h!==void 0?h:[])w.reject(m)}this._requestResolversById.delete(o)}))}}async _doRequest(i){return await this._client.callApi({type:"helix",...this._callOptions,query:{...this._callOptions.query,[this._queryParamName]:i}})}}return Za.HelixRequestBatcher=t,n.__decorate([(0,e.Enumerable)(!1)],t.prototype,"_client",void 0),Za}var Rr={},bm;function qe(){if(bm)return Rr;bm=1;var n;Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.HelixPaginatedRequest=void 0;const e=M,t=W(),r=U();Object.prototype.hasOwnProperty.call(Symbol,"asyncIterator")||(Symbol.asyncIterator=(n=Symbol.asyncIterator)!==null&&n!==void 0?n:Symbol.for("Symbol.asyncIterator"));let i=class{constructor(s,o,u,h=100){this._callOptions=s,this._mapper=u,this._limitPerPage=h,this._isFinished=!1,this._client=o}get current(){var s;return(s=this._currentData)===null||s===void 0?void 0:s.data}async getNext(){var s;if(this._isFinished)return[];const o=await this._fetchData();return!((s=o.data)===null||s===void 0)&&s.length?this._processResult(o):(this._isFinished=!0,[])}async getAll(){this.reset();const s=[];do{const o=await this.getNext();if(!o.length)break;s.push(...o)}while(this._currentCursor);return this.reset(),s}get currentCursor(){return this._currentCursor}reset(){this._currentCursor=void 0,this._isFinished=!1,this._currentData=void 0}async*[Symbol.asyncIterator](){for(this.reset();;){const s=await this.getNext();if(!s.length)break;yield*s[Symbol.iterator]()}}async _fetchData(s={}){return await this._client.callApi({type:"helix",...this._callOptions,...s,query:{...this._callOptions.query,after:this._currentCursor,first:this._limitPerPage.toString(),...s.query}})}_processResult(s){var o;return this._currentCursor=typeof s.pagination=="string"?s.pagination:(o=s.pagination)===null||o===void 0?void 0:o.cursor,this._currentCursor===void 0&&(this._isFinished=!0),this._currentData=s,s.data.reduce((u,h)=>{const m=this._mapper(h);return Array.isArray(m)?[...u,...m]:[...u,m]},[])}};return Rr.HelixPaginatedRequest=i,e.__decorate([(0,t.Enumerable)(!1)],i.prototype,"_client",void 0),Rr.HelixPaginatedRequest=i=e.__decorate([(0,r.rtfm)("api","HelixPaginatedRequest")],i),Rr}var Tr={},vm;function Xs(){if(vm)return Tr;vm=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.HelixPaginatedRequestWithTotal=void 0;const n=M,e=U(),t=qe();let r=class extends t.HelixPaginatedRequest{async getTotalCount(){var a;return((a=this._currentData)!==null&&a!==void 0?a:await this._fetchData({query:{after:void 0}})).total}};return Tr.HelixPaginatedRequestWithTotal=r,Tr.HelixPaginatedRequestWithTotal=r=n.__decorate([(0,e.rtfm)("api","HelixPaginatedRequestWithTotal")],r),Tr}var Qt={},wm;function Ne(){if(wm)return Qt;wm=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.createPaginatedResultWithTotal=Qt.createPaginatedResult=void 0;function n(t,r,i){var a;let s;return{get data(){var o,u;return s??(s=(u=(o=t.data)===null||o===void 0?void 0:o.map(h=>new r(h,i)))!==null&&u!==void 0?u:[])},cursor:typeof t.pagination=="string"?t.pagination:(a=t.pagination)===null||a===void 0?void 0:a.cursor}}Qt.createPaginatedResult=n;function e(t,r,i){let a;return{get data(){var s,o;return a??(a=(o=(s=t.data)===null||s===void 0?void 0:s.map(u=>new r(u,i)))!==null&&o!==void 0?o:[])},cursor:t.pagination.cursor,total:t.total}}return Qt.createPaginatedResultWithTotal=e,Qt}var es={},xm;function ke(){if(xm)return es;xm=1,Object.defineProperty(es,"__esModule",{value:!0}),es.createPaginationQuery=void 0;function n({after:e,before:t,limit:r}={}){return{after:e,before:t,first:r==null?void 0:r.toString()}}return es.createPaginationQuery=n,es}var Ir={},Sm;function iv(){if(Sm)return Ir;Sm=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.HelixChannel=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].broadcaster_id}get name(){return this[t.rawDataSymbol].broadcaster_login}get displayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get language(){return this[t.rawDataSymbol].broadcaster_language}get gameId(){return this[t.rawDataSymbol].game_id}get gameName(){return this[t.rawDataSymbol].game_name}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get title(){return this[t.rawDataSymbol].title}get delay(){return this[t.rawDataSymbol].delay}get tags(){return this[t.rawDataSymbol].tags}get contentClassificationLabels(){return this[t.rawDataSymbol].content_classification_labels}get isBrandedContent(){return this[t.rawDataSymbol].is_branded_content}};return Ir.HelixChannel=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Ir.HelixChannel=r=n.__decorate([(0,t.rtfm)("api","HelixChannel","id")],r),Ir}var Pr={},Cm;function av(){if(Cm)return Pr;Cm=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.HelixChannelEditor=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}};return Pr.HelixChannelEditor=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Pr.HelixChannelEditor=r=n.__decorate([(0,t.rtfm)("api","HelixChannelEditor","userId")],r),Pr}var Dr={},Em;function sv(){if(Em)return Dr;Em=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.HelixChannelFollower=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get followDate(){return new Date(this[t.rawDataSymbol].followed_at)}};return Dr.HelixChannelFollower=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Dr.HelixChannelFollower=r=n.__decorate([(0,t.rtfm)("api","HelixChannelFollower","userId")],r),Dr}var Br={},Hm;function ov(){if(Hm)return Br;Hm=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.HelixFollowedChannel=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get followDate(){return new Date(this[t.rawDataSymbol].followed_at)}};return Br.HelixFollowedChannel=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Br.HelixFollowedChannel=r=n.__decorate([(0,t.rtfm)("api","HelixFollowedChannel","broadcasterId")],r),Br}var Or={},Am;function lv(){if(Am)return Or;Am=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.HelixAdSchedule=void 0;const n=M,e=U();let t=class extends e.DataObject{get snoozeCount(){return this[e.rawDataSymbol].snooze_count}get snoozeRefreshDate(){return this[e.rawDataSymbol].snooze_refresh_at?new Date(this[e.rawDataSymbol].snooze_refresh_at*1e3):null}get nextAdDate(){return this[e.rawDataSymbol].next_ad_at?new Date(this[e.rawDataSymbol].next_ad_at*1e3):null}get duration(){return this[e.rawDataSymbol].duration}get lastAdDate(){return this[e.rawDataSymbol].last_ad_at?new Date(this[e.rawDataSymbol].last_ad_at*1e3):null}get prerollFreeTime(){return this[e.rawDataSymbol].preroll_free_time}};return Or.HelixAdSchedule=t,Or.HelixAdSchedule=t=n.__decorate([(0,e.rtfm)("api","HelixAdSchedule")],t),Or}var Ur={},Rm;function M0(){if(Rm)return Ur;Rm=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.HelixSnoozeNextAdResult=void 0;const n=M,e=U();let t=class extends e.DataObject{get snoozeCount(){return this[e.rawDataSymbol].snooze_count}get snoozeRefreshDate(){return new Date(this[e.rawDataSymbol].snooze_refresh_at*1e3)}get nextAdDate(){return new Date(this[e.rawDataSymbol].next_ad_at*1e3)}};return Ur.HelixSnoozeNextAdResult=t,Ur.HelixSnoozeNextAdResult=t=n.__decorate([(0,e.rtfm)("api","HelixSnoozeNextAdResult")],t),Ur}var Tm;function uv(){if(Tm)return Hr;Tm=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.HelixChannelApi=void 0;const n=M,e=W(),t=Re(),r=U(),i=k0(),a=tt(),s=ud(),o=ar(),u=qe(),h=Xs(),m=Ne(),w=ke(),y=ve(),g=iv(),p=av(),l=sv(),d=ov(),v=lv(),C=M0();let R=class extends y.BaseApi{constructor(){super(...arguments),this._getChannelByIdBatcher=new o.HelixRequestBatcher({url:"channels"},"broadcaster_id","broadcaster_id",this._client,_=>new g.HelixChannel(_,this._client))}async getChannelInfoById(_){const x=(0,r.extractUserId)(_),H=await this._client.callApi({type:"helix",url:"channels",userId:x,query:(0,t.createBroadcasterQuery)(x)});return(0,e.mapNullable)(H.data[0],q=>new g.HelixChannel(q,this._client))}async getChannelInfoByIdBatched(_){return await this._getChannelByIdBatcher.request((0,r.extractUserId)(_))}async getChannelInfoByIds(_){const x=_.map(r.extractUserId);return(await this._client.callApi({type:"helix",url:"channels",query:(0,a.createSingleKeyQuery)("broadcaster_id",x)})).data.map(q=>new g.HelixChannel(q,this._client))}async updateChannelInfo(_,x){await this._client.callApi({type:"helix",url:"channels",method:"PATCH",userId:(0,r.extractUserId)(_),scopes:["channel:manage:broadcast"],query:(0,t.createBroadcasterQuery)(_),jsonBody:(0,i.createChannelUpdateBody)(x)})}async startChannelCommercial(_,x){await this._client.callApi({type:"helix",url:"channels/commercial",method:"POST",userId:(0,r.extractUserId)(_),scopes:["channel:edit:commercial"],jsonBody:(0,i.createChannelCommercialBody)(_,x)})}async getChannelEditors(_){return(await this._client.callApi({type:"helix",url:"channels/editors",userId:(0,r.extractUserId)(_),scopes:["channel:read:editors"],query:(0,t.createBroadcasterQuery)(_)})).data.map(H=>new p.HelixChannelEditor(H,this._client))}async getVips(_,x){const H=await this._client.callApi({type:"helix",url:"channels/vips",userId:(0,r.extractUserId)(_),scopes:["channel:read:vips","channel:manage:vips"],query:{...(0,t.createBroadcasterQuery)(_),...(0,w.createPaginationQuery)(x)}});return(0,m.createPaginatedResult)(H,s.HelixUserRelation,this._client)}getVipsPaginated(_){return new u.HelixPaginatedRequest({url:"channels/vips",userId:(0,r.extractUserId)(_),scopes:["channel:read:vips","channel:manage:vips"],query:(0,t.createBroadcasterQuery)(_)},this._client,x=>new s.HelixUserRelation(x,this._client))}async checkVipForUsers(_,x){return(await this._client.callApi({type:"helix",url:"channels/vips",userId:(0,r.extractUserId)(_),scopes:["channel:read:vips","channel:manage:vips"],query:(0,a.createChannelUsersCheckQuery)(_,x)})).data.map(q=>new s.HelixUserRelation(q,this._client))}async checkVipForUser(_,x){const H=(0,r.extractUserId)(x);return(await this.checkVipForUsers(_,[H])).some($=>$.id===H)}async addVip(_,x){await this._client.callApi({type:"helix",url:"channels/vips",method:"POST",userId:(0,r.extractUserId)(_),scopes:["channel:manage:vips"],query:(0,i.createChannelVipUpdateQuery)(_,x)})}async removeVip(_,x){await this._client.callApi({type:"helix",url:"channels/vips",method:"DELETE",userId:(0,r.extractUserId)(_),scopes:["channel:manage:vips"],query:(0,i.createChannelVipUpdateQuery)(_,x)})}async getChannelFollowerCount(_){return(await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:(0,r.extractUserId)(_),query:{...(0,i.createChannelFollowerQuery)(_),...(0,w.createPaginationQuery)({limit:1})}})).total}async getChannelFollowers(_,x,H){const q=await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:(0,r.extractUserId)(_),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:{...(0,i.createChannelFollowerQuery)(_,x),...(0,w.createPaginationQuery)(H)}});return(0,m.createPaginatedResultWithTotal)(q,l.HelixChannelFollower,this._client)}getChannelFollowersPaginated(_){return new h.HelixPaginatedRequestWithTotal({url:"channels/followers",method:"GET",userId:(0,r.extractUserId)(_),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:(0,i.createChannelFollowerQuery)(_)},this._client,x=>new l.HelixChannelFollower(x,this._client))}async getFollowedChannels(_,x,H){const q=await this._client.callApi({type:"helix",url:"channels/followed",method:"GET",userId:(0,r.extractUserId)(_),scopes:["user:read:follows"],query:{...(0,i.createFollowedChannelQuery)(_,x),...(0,w.createPaginationQuery)(H)}});return(0,m.createPaginatedResultWithTotal)(q,d.HelixFollowedChannel,this._client)}getFollowedChannelsPaginated(_,x){return new h.HelixPaginatedRequestWithTotal({url:"channels/followed",method:"GET",userId:(0,r.extractUserId)(_),scopes:["user:read:follows"],query:(0,i.createFollowedChannelQuery)(_,x)},this._client,H=>new d.HelixFollowedChannel(H,this._client))}async getAdSchedule(_){const x=await this._client.callApi({type:"helix",url:"channels/ads",method:"GET",userId:(0,r.extractUserId)(_),scopes:["channel:read:ads"],query:(0,t.createBroadcasterQuery)(_)});return new v.HelixAdSchedule(x.data[0])}async snoozeNextAd(_){const x=await this._client.callApi({type:"helix",url:"channels/ads/schedule/snooze",method:"POST",userId:(0,r.extractUserId)(_),scopes:["channel:manage:ads"],query:(0,t.createBroadcasterQuery)(_)});return new C.HelixSnoozeNextAdResult(x.data[0])}};return Hr.HelixChannelApi=R,n.__decorate([(0,e.Enumerable)(!1)],R.prototype,"_getChannelByIdBatcher",void 0),Hr.HelixChannelApi=R=n.__decorate([(0,r.rtfm)("api","HelixChannelApi")],R),Hr}var qr={},ze={},Im;function j0(){if(Im)return ze;Im=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.createRedemptionsForBroadcasterQuery=ze.createRewardRedemptionsByIdsQuery=ze.createCustomRewardBody=ze.createCustomRewardChangeQuery=ze.createCustomRewardsQuery=void 0;const n=U();function e(s,o){return{broadcaster_id:(0,n.extractUserId)(s),only_manageable_rewards:o==null?void 0:o.toString()}}ze.createCustomRewardsQuery=e;function t(s,o){return{broadcaster_id:(0,n.extractUserId)(s),id:o}}ze.createCustomRewardChangeQuery=t;function r(s){var o,u,h;const m={title:s.title,cost:s.cost,prompt:s.prompt,background_color:s.backgroundColor,is_enabled:s.isEnabled,is_user_input_required:s.userInputRequired,should_redemptions_skip_request_queue:s.autoFulfill};return s.maxRedemptionsPerStream!==void 0&&(m.is_max_per_stream_enabled=!!s.maxRedemptionsPerStream,m.max_per_stream=(o=s.maxRedemptionsPerStream)!==null&&o!==void 0?o:0),s.maxRedemptionsPerUserPerStream!==void 0&&(m.is_max_per_user_per_stream_enabled=!!s.maxRedemptionsPerUserPerStream,m.max_per_user_per_stream=(u=s.maxRedemptionsPerUserPerStream)!==null&&u!==void 0?u:0),s.globalCooldown!==void 0&&(m.is_global_cooldown_enabled=!!s.globalCooldown,m.global_cooldown_seconds=(h=s.globalCooldown)!==null&&h!==void 0?h:0),"isPaused"in s&&(m.is_paused=s.isPaused),m}ze.createCustomRewardBody=r;function i(s,o,u){return{broadcaster_id:(0,n.extractUserId)(s),reward_id:o,id:u}}ze.createRewardRedemptionsByIdsQuery=i;function a(s,o,u,h){return{broadcaster_id:(0,n.extractUserId)(s),reward_id:o,status:u,sort:h.newestFirst?"NEWEST":"OLDEST"}}return ze.createRedemptionsForBroadcasterQuery=a,ze}var kr={},Pm;function cv(){if(Pm)return kr;Pm=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.HelixCustomReward=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}getImageUrl(a){var s,o;const u=`url_${a}x`;return(o=(s=this[t.rawDataSymbol].image)===null||s===void 0?void 0:s[u])!==null&&o!==void 0?o:this[t.rawDataSymbol].default_image[u]}get backgroundColor(){return this[t.rawDataSymbol].background_color}get isEnabled(){return this[t.rawDataSymbol].is_enabled}get cost(){return this[t.rawDataSymbol].cost}get title(){return this[t.rawDataSymbol].title}get prompt(){return this[t.rawDataSymbol].prompt}get userInputRequired(){return this[t.rawDataSymbol].is_user_input_required}get maxRedemptionsPerStream(){return this[t.rawDataSymbol].max_per_stream_setting.is_enabled?this[t.rawDataSymbol].max_per_stream_setting.max_per_stream:null}get maxRedemptionsPerUserPerStream(){return this[t.rawDataSymbol].max_per_user_per_stream_setting.is_enabled?this[t.rawDataSymbol].max_per_user_per_stream_setting.max_per_user_per_stream:null}get globalCooldown(){return this[t.rawDataSymbol].global_cooldown_setting.is_enabled?this[t.rawDataSymbol].global_cooldown_setting.global_cooldown_seconds:null}get isPaused(){return this[t.rawDataSymbol].is_paused}get isInStock(){return this[t.rawDataSymbol].is_in_stock}get redemptionsThisStream(){return this[t.rawDataSymbol].redemptions_redeemed_current_stream}get autoFulfill(){return this[t.rawDataSymbol].should_redemptions_skip_request_queue}get cooldownExpiryDate(){return this[t.rawDataSymbol].cooldown_expires_at?new Date(this[t.rawDataSymbol].cooldown_expires_at):null}};return kr.HelixCustomReward=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),kr.HelixCustomReward=r=n.__decorate([(0,t.rtfm)("api","HelixCustomReward","id")],r),kr}var Mr={},Dm;function dv(){if(Dm)return Mr;Dm=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.HelixCustomRewardRedemption=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get userInput(){return this[t.rawDataSymbol].user_input}get isFulfilled(){return this[t.rawDataSymbol].status==="FULFILLED"}get isCanceled(){return this[t.rawDataSymbol].status==="CANCELED"}get redemptionDate(){return new Date(this[t.rawDataSymbol].redeemed_at)}get rewardId(){return this[t.rawDataSymbol].reward.id}get rewardTitle(){return this[t.rawDataSymbol].reward.title}get rewardPrompt(){return this[t.rawDataSymbol].reward.prompt}get rewardCost(){return this[t.rawDataSymbol].reward.cost}async getReward(){return(0,t.checkRelationAssertion)(await this._client.channelPoints.getCustomRewardById(this[t.rawDataSymbol].broadcaster_id,this[t.rawDataSymbol].reward.id))}async updateStatus(a){return(await this._client.channelPoints.updateRedemptionStatusByIds(this[t.rawDataSymbol].broadcaster_id,this[t.rawDataSymbol].reward.id,[this[t.rawDataSymbol].id],a))[0]}};return Mr.HelixCustomRewardRedemption=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Mr.HelixCustomRewardRedemption=r=n.__decorate([(0,t.rtfm)("api","HelixCustomRewardRedemption","id")],r),Mr}var Bm;function hv(){if(Bm)return qr;Bm=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.HelixChannelPointsApi=void 0;const n=M,e=Re(),t=U(),r=j0(),i=tt(),a=qe(),s=Ne(),o=ke(),u=ve(),h=cv(),m=dv();let w=class extends u.BaseApi{async getCustomRewards(g,p){return(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:(0,t.extractUserId)(g),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,r.createCustomRewardsQuery)(g,p)})).data.map(d=>new h.HelixCustomReward(d,this._client))}async getCustomRewardsByIds(g,p){return p.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:(0,t.extractUserId)(g),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,i.createGetByIdsQuery)(g,p)})).data.map(d=>new h.HelixCustomReward(d,this._client)):[]}async getCustomRewardById(g,p){const l=await this.getCustomRewardsByIds(g,[p]);return l.length?l[0]:null}async createCustomReward(g,p){const l=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"POST",userId:(0,t.extractUserId)(g),scopes:["channel:manage:redemptions"],query:(0,e.createBroadcasterQuery)(g),jsonBody:(0,r.createCustomRewardBody)(p)});return new h.HelixCustomReward(l.data[0],this._client)}async updateCustomReward(g,p,l){const d=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"PATCH",userId:(0,t.extractUserId)(g),scopes:["channel:manage:redemptions"],query:(0,r.createCustomRewardChangeQuery)(g,p),jsonBody:(0,r.createCustomRewardBody)(l)});return new h.HelixCustomReward(d.data[0],this._client)}async deleteCustomReward(g,p){await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"DELETE",userId:(0,t.extractUserId)(g),scopes:["channel:manage:redemptions"],query:(0,r.createCustomRewardChangeQuery)(g,p)})}async getRedemptionsByIds(g,p,l){return l.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:(0,t.extractUserId)(g),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,r.createRewardRedemptionsByIdsQuery)(g,p,l)})).data.map(v=>new m.HelixCustomRewardRedemption(v,this._client)):[]}async getRedemptionById(g,p,l){const d=await this.getRedemptionsByIds(g,p,[l]);return d.length?d[0]:null}async getRedemptionsForBroadcaster(g,p,l,d){const v=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:(0,t.extractUserId)(g),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:{...(0,r.createRedemptionsForBroadcasterQuery)(g,p,l,d),...(0,o.createPaginationQuery)(d)}});return(0,s.createPaginatedResult)(v,m.HelixCustomRewardRedemption,this._client)}getRedemptionsForBroadcasterPaginated(g,p,l,d){return new a.HelixPaginatedRequest({url:"channel_points/custom_rewards/redemptions",userId:(0,t.extractUserId)(g),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:(0,r.createRedemptionsForBroadcasterQuery)(g,p,l,d)},this._client,v=>new m.HelixCustomRewardRedemption(v,this._client),50)}async updateRedemptionStatusByIds(g,p,l,d){return l.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",method:"PATCH",userId:(0,t.extractUserId)(g),scopes:["channel:manage:redemptions"],query:(0,r.createRewardRedemptionsByIdsQuery)(g,p,l),jsonBody:{status:d}})).data.map(C=>new m.HelixCustomRewardRedemption(C,this._client)):[]}};return qr.HelixChannelPointsApi=w,qr.HelixChannelPointsApi=w=n.__decorate([(0,t.rtfm)("api","HelixChannelPointsApi")],w),qr}var jr={},Lr={},Nr={},Om;function cd(){if(Om)return Nr;Om=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.HelixCharityCampaignAmount=void 0;const n=M,e=U();let t=class extends e.DataObject{get value(){return this[e.rawDataSymbol].value}get decimalPlaces(){return this[e.rawDataSymbol].decimal_places}get localizedValue(){return this.value/10**this.decimalPlaces}get currency(){return this[e.rawDataSymbol].currency}};return Nr.HelixCharityCampaignAmount=t,Nr.HelixCharityCampaignAmount=t=n.__decorate([(0,e.rtfm)("api","HelixCharityCampaignAmount")],t),Nr}var Um;function pv(){if(Um)return Lr;Um=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.HelixCharityCampaign=void 0;const n=M,e=W(),t=U(),r=cd();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get charityName(){return this[t.rawDataSymbol].charity_name}get charityDescription(){return this[t.rawDataSymbol].charity_description}get charityLogo(){return this[t.rawDataSymbol].charity_logo}get charityWebsite(){return this[t.rawDataSymbol].charity_website}get currentAmount(){return new r.HelixCharityCampaignAmount(this[t.rawDataSymbol].current_amount)}get targetAmount(){return new r.HelixCharityCampaignAmount(this[t.rawDataSymbol].target_amount)}};return Lr.HelixCharityCampaign=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Lr.HelixCharityCampaign=i=n.__decorate([(0,t.rtfm)("api","HelixCharityCampaign","id")],i),Lr}var Fr={},qm;function mv(){if(qm)return Fr;qm=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.HelixCharityCampaignDonation=void 0;const n=M,e=W(),t=U(),r=cd();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get campaignId(){return this[t.rawDataSymbol].campaign_id}get donorId(){return this[t.rawDataSymbol].user_id}get donorName(){return this[t.rawDataSymbol].user_login}get donorDisplayName(){return this[t.rawDataSymbol].user_name}async getDonor(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get amount(){return new r.HelixCharityCampaignAmount(this[t.rawDataSymbol].amount)}};return Fr.HelixCharityCampaignDonation=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Fr.HelixCharityCampaignDonation=i=n.__decorate([(0,t.rtfm)("api","HelixCharityCampaignDonation")],i),Fr}var km;function _v(){if(km)return jr;km=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.HelixCharityApi=void 0;const n=M,e=Re(),t=U(),r=Ne(),i=ke(),a=ve(),s=pv(),o=mv();let u=class extends a.BaseApi{async getCharityCampaign(m){const w=await this._client.callApi({type:"helix",url:"charity/campaigns",method:"GET",userId:(0,t.extractUserId)(m),scopes:["channel:read:charity"],query:(0,e.createBroadcasterQuery)(m)});return new s.HelixCharityCampaign(w.data[0],this._client)}async getCharityCampaignDonations(m,w){const y=await this._client.callApi({type:"helix",url:"charity/donations",userId:(0,t.extractUserId)(m),scopes:["channel:read:charity"],query:{...(0,e.createBroadcasterQuery)(m),...(0,i.createPaginationQuery)(w)}});return(0,r.createPaginatedResult)(y,o.HelixCharityCampaignDonation,this._client)}};return jr.HelixCharityApi=u,jr.HelixCharityApi=u=n.__decorate([(0,t.rtfm)("api","HelixCharityApi")],u),jr}var $r={},Ke={},Mm;function L0(){if(Mm)return Ke;Mm=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.createSendChatMessageBody=Ke.createSendChatMessageQuery=Ke.createShoutoutQuery=Ke.createChatColorUpdateQuery=Ke.createChatSettingsUpdateBody=void 0;const n=U();function e(s){return{slow_mode:s.slowModeEnabled,slow_mode_wait_time:s.slowModeDelay,follower_mode:s.followerOnlyModeEnabled,follower_mode_duration:s.followerOnlyModeDelay,subscriber_mode:s.subscriberOnlyModeEnabled,emote_mode:s.emoteOnlyModeEnabled,unique_chat_mode:s.uniqueChatModeEnabled,non_moderator_chat_delay:s.nonModeratorChatDelayEnabled,non_moderator_chat_delay_duration:s.nonModeratorChatDelay}}Ke.createChatSettingsUpdateBody=e;function t(s,o){return{user_id:(0,n.extractUserId)(s),color:o}}Ke.createChatColorUpdateQuery=t;function r(s,o,u){return{from_broadcaster_id:(0,n.extractUserId)(s),to_broadcaster_id:(0,n.extractUserId)(o),moderator_id:u}}Ke.createShoutoutQuery=r;function i(s,o){return{broadcaster_id:s,sender_id:o}}Ke.createSendChatMessageQuery=i;function a(s,o){return{message:s,reply_parent_message_id:o==null?void 0:o.replyParentMessageId}}return Ke.createSendChatMessageBody=a,Ke}var Gr={},Qr={},ts={},jm;function gv(){if(jm)return ts;jm=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.HelixEmoteBase=void 0;const n=U();class e extends n.DataObject{get id(){return this[n.rawDataSymbol].id}get name(){return this[n.rawDataSymbol].name}get formats(){return this[n.rawDataSymbol].format}get scales(){return this[n.rawDataSymbol].scale}get themeModes(){return this[n.rawDataSymbol].theme_mode}getStaticImageUrl(r="1.0",i="light"){return this[n.rawDataSymbol].format.includes("static")&&this[n.rawDataSymbol].scale.includes(r)?this.getFormattedImageUrl(r,"static",i):null}getAnimatedImageUrl(r="1.0",i="light"){return this[n.rawDataSymbol].format.includes("animated")&&this[n.rawDataSymbol].scale.includes(r)?this.getFormattedImageUrl(r,"animated",i):null}getFormattedImageUrl(r="1.0",i="static",a="light"){return`https://static-cdn.jtvnw.net/emoticons/v2/${this[n.rawDataSymbol].id}/${i}/${a}/${r}`}}return ts.HelixEmoteBase=e,ts}var Lm;function El(){if(Lm)return Qr;Lm=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.HelixEmote=void 0;const n=M,e=U(),t=gv();let r=class extends t.HelixEmoteBase{getImageUrl(a){return this[e.rawDataSymbol].images[`url_${a}x`]}};return Qr.HelixEmote=r,Qr.HelixEmote=r=n.__decorate([(0,e.rtfm)("api","HelixEmote","id")],r),Qr}var Nm;function fv(){if(Nm)return Gr;Nm=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.HelixChannelEmote=void 0;const n=M,e=W(),t=U(),r=El();let i=class extends r.HelixEmote{constructor(s,o){super(s),this._client=o}get tier(){return this[t.rawDataSymbol].tier||null}get type(){return this[t.rawDataSymbol].emote_type}get emoteSetId(){return this[t.rawDataSymbol].emote_set_id}async getAllEmotesFromSet(){return await this._client.chat.getEmotesFromSets([this[t.rawDataSymbol].emote_set_id])}};return Gr.HelixChannelEmote=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Gr.HelixChannelEmote=i=n.__decorate([(0,t.rtfm)("api","HelixChannelEmote","id")],i),Gr}var Wr={},Vr={},Fm;function yv(){if(Fm)return Vr;Fm=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.HelixChatBadgeVersion=void 0;const n=M,e=U();let t=class extends e.DataObject{get id(){return this[e.rawDataSymbol].id}getImageUrl(i){return this[e.rawDataSymbol][`image_url_${i}x`]}get title(){return this[e.rawDataSymbol].title}get description(){return this[e.rawDataSymbol].description}get clickAction(){return this[e.rawDataSymbol].click_action}get clickUrl(){return this[e.rawDataSymbol].click_url}};return Vr.HelixChatBadgeVersion=t,Vr.HelixChatBadgeVersion=t=n.__decorate([(0,e.rtfm)("api","HelixChatBadgeVersion","id")],t),Vr}var $m;function bv(){if($m)return Wr;$m=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.HelixChatBadgeSet=void 0;const n=M,e=Sl(),t=U(),r=yv();let i=class extends t.DataObject{get id(){return this[t.rawDataSymbol].set_id}get versions(){return this[t.rawDataSymbol].versions.map(s=>new r.HelixChatBadgeVersion(s))}getVersion(s){var o;return(o=this.versions.find(u=>u.id===s))!==null&&o!==void 0?o:null}};return Wr.HelixChatBadgeSet=i,n.__decorate([(0,e.CachedGetter)()],i.prototype,"versions",null),Wr.HelixChatBadgeSet=i=n.__decorate([e.Cacheable,(0,t.rtfm)("api","HelixChatBadgeSet","id")],i),Wr}var zr={},Gm;function vv(){if(Gm)return zr;Gm=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.HelixChatChatter=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return zr.HelixChatChatter=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),zr.HelixChatChatter=r=n.__decorate([(0,t.rtfm)("api","HelixChatChatter")],r),zr}var Kr={},Qm;function dd(){if(Qm)return Kr;Qm=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.HelixChatSettings=void 0;const n=M,e=U();let t=class extends e.DataObject{get broadcasterId(){return this[e.rawDataSymbol].broadcaster_id}get slowModeEnabled(){return this[e.rawDataSymbol].slow_mode}get slowModeDelay(){return this[e.rawDataSymbol].slow_mode_wait_time}get followerOnlyModeEnabled(){return this[e.rawDataSymbol].follower_mode}get followerOnlyModeDelay(){return this[e.rawDataSymbol].follower_mode_duration}get subscriberOnlyModeEnabled(){return this[e.rawDataSymbol].subscriber_mode}get emoteOnlyModeEnabled(){return this[e.rawDataSymbol].emote_mode}get uniqueChatModeEnabled(){return this[e.rawDataSymbol].unique_chat_mode}};return Kr.HelixChatSettings=t,Kr.HelixChatSettings=t=n.__decorate([(0,e.rtfm)("api","HelixChatSettings","broadcasterId")],t),Kr}var Xr={},Wm;function wv(){if(Wm)return Xr;Wm=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.HelixEmoteFromSet=void 0;const n=M,e=W(),t=U(),r=El();let i=class extends r.HelixEmote{constructor(s,o){super(s),this._client=o}get type(){return this[t.rawDataSymbol].emote_type}get emoteSetId(){return this[t.rawDataSymbol].emote_set_id}get ownerId(){switch(this[t.rawDataSymbol].owner_id){case"0":case"twitch":return null;default:return this[t.rawDataSymbol].owner_id}}async getOwner(){switch(this[t.rawDataSymbol].owner_id){case"0":case"twitch":return null;default:return await this._client.users.getUserById(this[t.rawDataSymbol].owner_id)}}};return Xr.HelixEmoteFromSet=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Xr.HelixEmoteFromSet=i=n.__decorate([(0,t.rtfm)("api","HelixEmoteFromSet","id")],i),Xr}var Jr={},Vm;function xv(){if(Vm)return Jr;Vm=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.HelixUserEmote=void 0;const n=M,e=U(),t=gv(),r=W();let i=class extends t.HelixEmoteBase{constructor(s,o){super(s),this._client=o}get type(){return this[e.rawDataSymbol].emote_type}get emoteSetId(){return this[e.rawDataSymbol].emote_set_id||null}get ownerId(){return this[e.rawDataSymbol].owner_id||null}async getAllEmotesFromSet(){return this[e.rawDataSymbol].emote_set_id?await this._client.chat.getEmotesFromSets([this[e.rawDataSymbol].emote_set_id]):null}async getOwner(){return this[e.rawDataSymbol].owner_id?await this._client.users.getUserById(this[e.rawDataSymbol].owner_id):null}};return Jr.HelixUserEmote=i,n.__decorate([(0,r.Enumerable)(!1)],i.prototype,"_client",void 0),Jr.HelixUserEmote=i=n.__decorate([(0,e.rtfm)("api","HelixUserEmote","id")],i),Jr}var Yr={},zm;function Sv(){if(zm)return Yr;zm=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.HelixPrivilegedChatSettings=void 0;const n=M,e=U(),t=dd();let r=class extends t.HelixChatSettings{get nonModeratorChatDelayEnabled(){return this[e.rawDataSymbol].non_moderator_chat_delay}get nonModeratorChatDelay(){return this[e.rawDataSymbol].non_moderator_chat_delay_duration}};return Yr.HelixPrivilegedChatSettings=r,Yr.HelixPrivilegedChatSettings=r=n.__decorate([(0,e.rtfm)("api","HelixPrivilegedChatSettings","broadcasterId")],r),Yr}var Zr={},Km;function Cv(){if(Km)return Zr;Km=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.HelixSentChatMessage=void 0;const n=M,e=U();let t=class extends e.DataObject{get id(){return this[e.rawDataSymbol].message_id}get isSent(){return this[e.rawDataSymbol].is_sent}get dropReasonCode(){var i;return(i=this[e.rawDataSymbol].drop_reason)===null||i===void 0?void 0:i.code}get dropReasonMessage(){var i;return(i=this[e.rawDataSymbol].drop_reason)===null||i===void 0?void 0:i.message}};return Zr.HelixSentChatMessage=t,Zr.HelixSentChatMessage=t=n.__decorate([(0,e.rtfm)("api","HelixSentChatMessage","id")],t),Zr}var Xm;function Ev(){if(Xm)return $r;Xm=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.HelixChatApi=void 0;const n=M,e=Re(),t=U(),r=L0(),i=tt(),a=qe(),s=Xs(),o=Ne(),u=ke(),h=ve(),m=fv(),w=bv(),y=vv(),g=dd(),p=El(),l=wv(),d=xv(),v=Sv(),C=Cv();let R=class extends h.BaseApi{async getChatters(_,x){const H=(0,t.extractUserId)(_),q=await this._client.callApi({type:"helix",url:"chat/chatters",userId:H,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:{...this._createModeratorActionQuery(H),...(0,u.createPaginationQuery)(x)}});return(0,o.createPaginatedResultWithTotal)(q,y.HelixChatChatter,this._client)}getChattersPaginated(_){const x=(0,t.extractUserId)(_);return new s.HelixPaginatedRequestWithTotal({url:"chat/chatters",userId:x,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:this._createModeratorActionQuery(x)},this._client,H=>new y.HelixChatChatter(H,this._client),1e3)}async getGlobalBadges(){return(await this._client.callApi({type:"helix",url:"chat/badges/global"})).data.map(x=>new w.HelixChatBadgeSet(x))}async getChannelBadges(_){return(await this._client.callApi({type:"helix",url:"chat/badges",userId:(0,t.extractUserId)(_),query:(0,e.createBroadcasterQuery)(_)})).data.map(H=>new w.HelixChatBadgeSet(H))}async getGlobalEmotes(){return(await this._client.callApi({type:"helix",url:"chat/emotes/global"})).data.map(x=>new p.HelixEmote(x))}async getChannelEmotes(_){return(await this._client.callApi({type:"helix",url:"chat/emotes",userId:(0,t.extractUserId)(_),query:(0,e.createBroadcasterQuery)(_)})).data.map(H=>new m.HelixChannelEmote(H,this._client))}async getEmotesFromSets(_){return(await this._client.callApi({type:"helix",url:"chat/emotes/set",query:(0,i.createSingleKeyQuery)("emote_set_id",_)})).data.map(H=>new l.HelixEmoteFromSet(H,this._client))}async getUserEmotes(_,x){const H=(0,t.extractUserId)(_),q=await this._client.callApi({type:"helix",url:"chat/emotes/user",userId:(0,t.extractUserId)(_),scopes:["user:read:emotes"],query:{...(0,i.createSingleKeyQuery)("user_id",H),...(0,i.createSingleKeyQuery)("broadcasterId",x!=null&&x.broadcaster?(0,t.extractUserId)(x.broadcaster):void 0),...(0,u.createPaginationQuery)(x)}});return(0,o.createPaginatedResult)(q,d.HelixUserEmote,this._client)}getUserEmotesPaginated(_,x){const H=(0,t.extractUserId)(_);return new a.HelixPaginatedRequest({url:"chat/emotes/user",userId:H,scopes:["user:read:emotes"],query:{...(0,i.createSingleKeyQuery)("user_id",H),...(0,i.createSingleKeyQuery)("broadcasterId",x?(0,t.extractUserId)(x):void 0)}},this._client,q=>new d.HelixUserEmote(q,this._client))}async getSettings(_){const x=await this._client.callApi({type:"helix",url:"chat/settings",userId:(0,t.extractUserId)(_),query:(0,e.createBroadcasterQuery)(_)});return new g.HelixChatSettings(x.data[0])}async getSettingsPrivileged(_){const x=(0,t.extractUserId)(_),H=await this._client.callApi({type:"helix",url:"chat/settings",userId:x,canOverrideScopedUserContext:!0,scopes:["moderator:read:chat_settings"],query:this._createModeratorActionQuery(x)});return new v.HelixPrivilegedChatSettings(H.data[0])}async updateSettings(_,x){const H=(0,t.extractUserId)(_),q=await this._client.callApi({type:"helix",url:"chat/settings",method:"PATCH",userId:H,canOverrideScopedUserContext:!0,scopes:["moderator:manage:chat_settings"],query:this._createModeratorActionQuery(H),jsonBody:(0,r.createChatSettingsUpdateBody)(x)});return new v.HelixPrivilegedChatSettings(q.data[0])}async sendChatMessage(_,x,H){const q=(0,t.extractUserId)(_),$=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",userId:q,canOverrideScopedUserContext:!0,scopes:["user:write:chat"],query:(0,r.createSendChatMessageQuery)(q,this._getUserContextIdWithDefault(q)),jsonBody:(0,r.createSendChatMessageBody)(x,H)});return new C.HelixSentChatMessage($.data[0])}async sendChatMessageAsApp(_,x,H,q){const $=(0,t.extractUserId)(_),se=(0,t.extractUserId)(x),z=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",forceType:"app",query:(0,r.createSendChatMessageQuery)(se,$),jsonBody:(0,r.createSendChatMessageBody)(H,q)});return new C.HelixSentChatMessage(z.data[0])}async sendAnnouncement(_,x){const H=(0,t.extractUserId)(_);await this._client.callApi({type:"helix",url:"chat/announcements",method:"POST",userId:H,canOverrideScopedUserContext:!0,scopes:["moderator:manage:announcements"],query:this._createModeratorActionQuery(H),jsonBody:{message:x.message,color:x.color}})}async getColorsForUsers(_){const x=await this._client.callApi({type:"helix",url:"chat/color",query:(0,i.createSingleKeyQuery)("user_id",_.map(t.extractUserId))});return new Map(x.data.map(H=>[H.user_id,H.color||null]))}async getColorForUser(_){const x=await this._client.callApi({type:"helix",url:"chat/color",userId:(0,t.extractUserId)(_),query:(0,i.createSingleKeyQuery)("user_id",(0,t.extractUserId)(_))});if(x.data.length)return x.data[0].color||null}async setColorForUser(_,x){await this._client.callApi({type:"helix",url:"chat/color",method:"PUT",userId:(0,t.extractUserId)(_),scopes:["user:manage:chat_color"],query:(0,r.createChatColorUpdateQuery)(_,x)})}async shoutoutUser(_,x){const H=(0,t.extractUserId)(_);await this._client.callApi({type:"helix",url:"chat/shoutouts",method:"POST",userId:H,canOverrideScopedUserContext:!0,scopes:["moderator:manage:shoutouts"],query:(0,r.createShoutoutQuery)(_,x,this._getUserContextIdWithDefault(H))})}_createModeratorActionQuery(_){return(0,i.createModeratorActionQuery)(_,this._getUserContextIdWithDefault(_))}};return $r.HelixChatApi=R,$r.HelixChatApi=R=n.__decorate([(0,t.rtfm)("api","HelixChatApi")],R),$r}var en={},Wt={},Jm;function N0(){if(Jm)return Wt;Jm=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.createClipQuery=Wt.createClipCreateQuery=void 0;const n=U();function e(r,i){return{broadcaster_id:(0,n.extractUserId)(r),has_delay:i.toString()}}Wt.createClipCreateQuery=e;function t(r){const{filterType:i,ids:a,startDate:s,endDate:o,isFeatured:u}=r;return{[i]:a,started_at:s,ended_at:o,is_featured:u==null?void 0:u.toString()}}return Wt.createClipQuery=t,Wt}var tn={},Ym;function Hv(){if(Ym)return tn;Ym=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.HelixClip=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get url(){return this[t.rawDataSymbol].url}get embedUrl(){return this[t.rawDataSymbol].embed_url}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get creatorId(){return this[t.rawDataSymbol].creator_id}get creatorDisplayName(){return this[t.rawDataSymbol].creator_name}async getCreator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].creator_id))}get videoId(){return this[t.rawDataSymbol].video_id}async getVideo(){return(0,t.checkRelationAssertion)(await this._client.videos.getVideoById(this[t.rawDataSymbol].video_id))}get gameId(){return this[t.rawDataSymbol].game_id}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get language(){return this[t.rawDataSymbol].language}get title(){return this[t.rawDataSymbol].title}get views(){return this[t.rawDataSymbol].view_count}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get thumbnailUrl(){return this[t.rawDataSymbol].thumbnail_url}get duration(){return this[t.rawDataSymbol].duration}get vodOffset(){return this[t.rawDataSymbol].vod_offset}get isFeatured(){return this[t.rawDataSymbol].is_featured}};return tn.HelixClip=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),tn.HelixClip=r=n.__decorate([(0,t.rtfm)("api","HelixClip","id")],r),tn}var Zm;function Av(){if(Zm)return en;Zm=1,Object.defineProperty(en,"__esModule",{value:!0}),en.HelixClipApi=void 0;const n=M,e=W(),t=U(),r=N0(),i=ar(),a=qe(),s=Ne(),o=ke(),u=ve(),h=Hv();let m=class extends u.BaseApi{constructor(){super(...arguments),this._getClipByIdBatcher=new i.HelixRequestBatcher({url:"clips"},"id","id",this._client,y=>new h.HelixClip(y,this._client))}async getClipsForBroadcaster(y,g={}){return await this._getClips({...g,filterType:"broadcaster_id",ids:(0,t.extractUserId)(y),userId:(0,t.extractUserId)(y)})}getClipsForBroadcasterPaginated(y,g={}){return this._getClipsPaginated({...g,filterType:"broadcaster_id",ids:(0,t.extractUserId)(y),userId:(0,t.extractUserId)(y)})}async getClipsForGame(y,g={}){return await this._getClips({...g,filterType:"game_id",ids:y})}getClipsForGamePaginated(y,g={}){return this._getClipsPaginated({...g,filterType:"game_id",ids:y})}async getClipsByIds(y){return(await this._getClips({filterType:"id",ids:y})).data}async getClipById(y){const g=await this.getClipsByIds([y]);return g.length?g[0]:null}async getClipByIdBatched(y){return await this._getClipByIdBatcher.request(y)}async createClip(y){const{channel:g,createAfterDelay:p=!1}=y;return(await this._client.callApi({type:"helix",url:"clips",method:"POST",userId:(0,t.extractUserId)(g),scopes:["clips:edit"],canOverrideScopedUserContext:!0,query:(0,r.createClipCreateQuery)(g,p)})).data[0].id}async _getClips(y){if(!y.ids.length)return{data:[]};const g=await this._client.callApi({type:"helix",url:"clips",userId:y.userId,query:{...(0,r.createClipQuery)(y),...(0,o.createPaginationQuery)(y)}});return(0,s.createPaginatedResult)(g,h.HelixClip,this._client)}_getClipsPaginated(y){return new a.HelixPaginatedRequest({url:"clips",userId:y.userId,query:(0,r.createClipQuery)(y)},this._client,g=>new h.HelixClip(g,this._client))}};return en.HelixClipApi=m,n.__decorate([(0,e.Enumerable)(!1)],m.prototype,"_getClipByIdBatcher",void 0),en.HelixClipApi=m=n.__decorate([(0,t.rtfm)("api","HelixClipApi")],m),en}var rn={},rs={},e_;function Rv(){if(e_)return rs;e_=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.HelixContentClassificationLabel=void 0;const n=U();class e extends n.DataObject{get id(){return this[n.rawDataSymbol].id}get name(){return this[n.rawDataSymbol].name}get description(){return this[n.rawDataSymbol].description}}return rs.HelixContentClassificationLabel=e,rs}var t_;function Tv(){if(t_)return rn;t_=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.HelixContentClassificationLabelApi=void 0;const n=M,e=U(),t=ve(),r=Rv();let i=class extends t.BaseApi{async getAll(s){return(await this._client.callApi({url:"content_classification_labels",query:{locale:s}})).data.map(u=>new r.HelixContentClassificationLabel(u))}};return rn.HelixContentClassificationLabelApi=i,rn.HelixContentClassificationLabelApi=i=n.__decorate([(0,e.rtfm)("api","HelixContentClassificationLabelApi")],i),rn}var nn={},Vt={},r_;function F0(){if(r_)return Vt;r_=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.createDropsEntitlementUpdateBody=Vt.createDropsEntitlementQuery=void 0;const n=W(),e=U();function t(i,a){return{user_id:a?(0,n.mapOptional)(i.user,e.extractUserId):void 0,game_id:i.gameId,fulfillment_status:i.fulfillmentStatus}}Vt.createDropsEntitlementQuery=t;function r(i,a){return{fulfillment_status:a,entitlement_ids:i}}return Vt.createDropsEntitlementUpdateBody=r,Vt}var an={},n_;function Iv(){if(n_)return an;n_=1,Object.defineProperty(an,"__esModule",{value:!0}),an.HelixDropsEntitlement=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get rewardId(){return this[t.rawDataSymbol].benefit_id}get grantDate(){return new Date(this[t.rawDataSymbol].timestamp)}get userId(){return this[t.rawDataSymbol].user_id}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get gameId(){return this[t.rawDataSymbol].game_id}async getGame(){return(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id))}get fulfillmentStatus(){return this[t.rawDataSymbol].fulfillment_status}get updateDate(){return new Date(this[t.rawDataSymbol].last_updated)}};return an.HelixDropsEntitlement=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),an.HelixDropsEntitlement=r=n.__decorate([(0,t.rtfm)("api","HelixDropsEntitlement")],r),an}var i_;function Pv(){if(i_)return nn;i_=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.HelixEntitlementApi=void 0;const n=M,e=W(),t=U(),r=F0(),i=ar(),a=qe(),s=Ne(),o=ke(),u=ve(),h=Iv();let m=class extends u.BaseApi{constructor(){super(...arguments),this._getDropsEntitlementByIdBatcher=new i.HelixRequestBatcher({url:"entitlements/drops"},"id","id",this._client,y=>new h.HelixDropsEntitlement(y,this._client))}async getDropsEntitlements(y,g=!1){const p=await this._client.callApi({type:"helix",url:"entitlements/drops",userId:(0,e.mapOptional)(y.user,t.extractUserId),forceType:y.user&&g?"app":void 0,query:{...(0,r.createDropsEntitlementQuery)(y,g),...(0,o.createPaginationQuery)(y)}});return(0,s.createPaginatedResult)(p,h.HelixDropsEntitlement,this._client)}getDropsEntitlementsPaginated(y,g=!1){return new a.HelixPaginatedRequest({url:"entitlements/drops",userId:(0,e.mapOptional)(y.user,t.extractUserId),forceType:y.user&&g?"app":void 0,query:(0,r.createDropsEntitlementQuery)(y,g)},this._client,p=>new h.HelixDropsEntitlement(p,this._client))}async getDropsEntitlementsByIds(y){return(await this._client.callApi({type:"helix",url:"entitlements/drops",query:{id:y}})).data.map(p=>new h.HelixDropsEntitlement(p,this._client))}async getDropsEntitlementById(y){var g;return(g=(await this.getDropsEntitlementsByIds([y]))[0])!==null&&g!==void 0?g:null}async getDropsEntitlementByIdBatched(y){return await this._getDropsEntitlementByIdBatcher.request(y)}async updateDropsEntitlements(y,g){const p=await this._client.callApi({type:"helix",url:"entitlements/drops",method:"PATCH",jsonBody:(0,r.createDropsEntitlementUpdateBody)(y,g)});return new Map(p.data.flatMap(l=>l.ids.map(d=>[d,l.status])))}};return nn.HelixEntitlementApi=m,n.__decorate([(0,e.Enumerable)(!1)],m.prototype,"_getDropsEntitlementByIdBatcher",void 0),nn.HelixEntitlementApi=m=n.__decorate([(0,t.rtfm)("api","HelixEntitlementApi")],m),nn}var sn={},Ue={},a_;function $0(){if(a_)return Ue;a_=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.createEventSubConduitShardsUpdateCondition=Ue.createEventSubConduitUpdateCondition=Ue.createEventSubConduitCondition=Ue.createEventSubDropEntitlementGrantCondition=Ue.createEventSubUserCondition=Ue.createEventSubModeratorCondition=Ue.createEventSubRewardCondition=Ue.createEventSubBroadcasterCondition=void 0;const n=U();function e(h){return{broadcaster_user_id:(0,n.extractUserId)(h)}}Ue.createEventSubBroadcasterCondition=e;function t(h,m){return{broadcaster_user_id:(0,n.extractUserId)(h),reward_id:m}}Ue.createEventSubRewardCondition=t;function r(h,m){return{broadcaster_user_id:h,moderator_user_id:m}}Ue.createEventSubModeratorCondition=r;function i(h,m){return{broadcaster_user_id:h,user_id:m}}Ue.createEventSubUserCondition=i;function a(h){return{organization_id:h.organizationId,category_id:h.categoryId,campaign_id:h.campaignId}}Ue.createEventSubDropEntitlementGrantCondition=a;function s(h,m){return{conduit_id:h,status:m}}Ue.createEventSubConduitCondition=s;function o(h,m){return{id:h,shard_count:m.toString()}}Ue.createEventSubConduitUpdateCondition=o;function u(h,m){return{conduit_id:h,shards:m}}return Ue.createEventSubConduitShardsUpdateCondition=u,Ue}var on={},s_;function hd(){if(s_)return on;s_=1,Object.defineProperty(on,"__esModule",{value:!0}),on.HelixEventSubSubscription=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get status(){return this[t.rawDataSymbol].status}get type(){return this[t.rawDataSymbol].type}get cost(){return this[t.rawDataSymbol].cost}get condition(){return this[t.rawDataSymbol].condition}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get transportMethod(){return this[t.rawDataSymbol].transport.method}async unsubscribe(){await this._client.eventSub.deleteSubscription(this[t.rawDataSymbol].id)}get _transport(){return this[t.rawDataSymbol].transport}set _status(a){this[t.rawDataSymbol].status=a}};return on.HelixEventSubSubscription=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),on.HelixEventSubSubscription=r=n.__decorate([(0,t.rtfm)("api","HelixEventSubSubscription","id")],r),on}var ln={},o_;function Dv(){if(o_)return ln;o_=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.HelixPaginatedEventSubSubscriptionsRequest=void 0;const n=M,e=U(),t=Xs(),r=hd();let i=class extends t.HelixPaginatedRequestWithTotal{constructor(s,o,u){super({url:"eventsub/subscriptions",userId:o,query:s},u,h=>new r.HelixEventSubSubscription(h,u))}async getTotalCost(){var s;return((s=this._currentData)!==null&&s!==void 0?s:await this._fetchData({query:{after:void 0}})).total_cost}async getMaxTotalCost(){var s;return((s=this._currentData)!==null&&s!==void 0?s:await this._fetchData({query:{after:void 0}})).max_total_cost}};return ln.HelixPaginatedEventSubSubscriptionsRequest=i,ln.HelixPaginatedEventSubSubscriptionsRequest=i=n.__decorate([(0,e.rtfm)("api","HelixPaginatedEventSubSubscriptionsRequest")],i),ln}var un={},l_;function Bv(){if(l_)return un;l_=1,Object.defineProperty(un,"__esModule",{value:!0}),un.HelixEventSubConduit=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get shardCount(){return this[t.rawDataSymbol].shard_count}async update(a){return await this._client.eventSub.updateConduit(this[t.rawDataSymbol].id,a)}async delete(){await this._client.eventSub.deleteConduit(this[t.rawDataSymbol].id)}async getShards(){return await this._client.eventSub.getConduitShards(this[t.rawDataSymbol].id)}};return un.HelixEventSubConduit=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),un.HelixEventSubConduit=r=n.__decorate([(0,t.rtfm)("api","HelixEventSubConduit")],r),un}var cn={},u_;function Ov(){if(u_)return cn;u_=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.HelixEventSubConduitShard=void 0;const n=M,e=U();let t=class extends e.DataObject{get id(){return this[e.rawDataSymbol].id}get status(){return this[e.rawDataSymbol].status}get transportMethod(){return this[e.rawDataSymbol].transport.method}};return cn.HelixEventSubConduitShard=t,cn.HelixEventSubConduitShard=t=n.__decorate([(0,e.rtfm)("api","HelixEventSubConduitShard")],t),cn}var c_;function Uv(){if(c_)return sn;c_=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.HelixEventSubApi=void 0;const n=M,e=W(),t=U(),r=$0(),i=tt(),a=qe(),s=Ne(),o=ke(),u=ve(),h=hd(),m=Dv(),w=Bv(),y=Ov();let g=class extends u.BaseApi{async getSubscriptions(l){const d=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:(0,o.createPaginationQuery)(l)});return{...(0,s.createPaginatedResultWithTotal)(d,h.HelixEventSubSubscription,this._client),totalCost:d.total_cost,maxTotalCost:d.max_total_cost}}getSubscriptionsPaginated(){return new m.HelixPaginatedEventSubSubscriptionsRequest({},void 0,this._client)}async getSubscriptionsForStatus(l,d){const v=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...(0,o.createPaginationQuery)(d),status:l}});return{...(0,s.createPaginatedResultWithTotal)(v,h.HelixEventSubSubscription,this._client),totalCost:v.total_cost,maxTotalCost:v.max_total_cost}}getSubscriptionsForStatusPaginated(l){return new m.HelixPaginatedEventSubSubscriptionsRequest({status:l},void 0,this._client)}async getSubscriptionsForType(l,d){const v=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...(0,o.createPaginationQuery)(d),type:l}});return{...(0,s.createPaginatedResultWithTotal)(v,h.HelixEventSubSubscription,this._client),totalCost:v.total_cost,maxTotalCost:v.max_total_cost}}getSubscriptionsForTypePaginated(l){return new m.HelixPaginatedEventSubSubscriptionsRequest({type:l},void 0,this._client)}async getSubscriptionsForUser(l,d){const v=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",userId:(0,t.extractUserId)(l),query:{...(0,i.createSingleKeyQuery)("user_id",(0,t.extractUserId)(l)),...(0,o.createPaginationQuery)(d)}});return{...(0,s.createPaginatedResultWithTotal)(v,h.HelixEventSubSubscription,this._client),totalCost:v.total_cost,maxTotalCost:v.max_total_cost}}getSubscriptionsForUserPaginated(l){const d=(0,t.extractUserId)(l);return new m.HelixPaginatedEventSubSubscriptionsRequest((0,i.createSingleKeyQuery)("user_id",d),d,this._client)}async createSubscription(l,d,v,C,R,P,_,x){const H=C.method==="webhook"||C.method==="conduit",q=H?void 0:P;if(!H&&!R)throw new Error(`Transport ${C.method} can only handle subscriptions with user context`);const $={type:l,version:d,condition:v,transport:C};x&&($.is_batching_enabled=!0);const se=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"POST",scopes:q,userId:(0,e.mapOptional)(R,t.extractUserId),canOverrideScopedUserContext:_,forceType:H?"app":"user",jsonBody:$});return new h.HelixEventSubSubscription(se.data[0],this._client)}async deleteSubscription(l){await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"DELETE",query:{id:l}})}async deleteAllSubscriptions(){await this._deleteSubscriptionsWithCondition()}async deleteBrokenSubscriptions(){await this._deleteSubscriptionsWithCondition(l=>l.status!=="enabled"&&l.status!=="webhook_callback_verification_pending")}async subscribeToStreamOnlineEvents(l,d){return await this.createSubscription("stream.online","1",(0,r.createEventSubBroadcasterCondition)(l),d,l)}async subscribeToStreamOfflineEvents(l,d){return await this.createSubscription("stream.offline","1",(0,r.createEventSubBroadcasterCondition)(l),d,l)}async subscribeToChannelUpdateEvents(l,d){return await this.createSubscription("channel.update","1",(0,r.createEventSubBroadcasterCondition)(l),d,l)}async subscribeToChannelFollowEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.follow","2",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,v,["moderator:read:followers"],!0)}async subscribeToChannelSubscriptionEvents(l,d){return await this.createSubscription("channel.subscribe","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionGiftEvents(l,d){return await this.createSubscription("channel.subscription.gift","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionMessageEvents(l,d){return await this.createSubscription("channel.subscription.message","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionEndEvents(l,d){return await this.createSubscription("channel.subscription.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:subscriptions"])}async subscribeToChannelCheerEvents(l,d){return await this.createSubscription("channel.cheer","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["bits:read"])}async subscribeToChannelCharityCampaignStartEvents(l,d){return await this.createSubscription("channel.charity_campaign.start","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:charity"])}async subscribeToChannelCharityCampaignStopEvents(l,d){return await this.createSubscription("channel.charity_campaign.stop","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:charity"])}async subscribeToChannelCharityDonationEvents(l,d){return await this.createSubscription("channel.charity_campaign.donate","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:charity"])}async subscribeToChannelCharityCampaignProgressEvents(l,d){return await this.createSubscription("channel.charity_campaign.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:charity"])}async subscribeToChannelBanEvents(l,d){return await this.createSubscription("channel.ban","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:moderate"])}async subscribeToChannelUnbanEvents(l,d){return await this.createSubscription("channel.unban","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:moderate"])}async subscribeToChannelShieldModeBeginEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.shield_mode.begin","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,v,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelShieldModeEndEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.shield_mode.end","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,v,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelModeratorAddEvents(l,d){return await this.createSubscription("channel.moderator.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["moderation:read"])}async subscribeToChannelModeratorRemoveEvents(l,d){return await this.createSubscription("channel.moderator.remove","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["moderation:read"])}async subscribeToChannelRaidEventsFrom(l,d){return await this.createSubscription("channel.raid","1",(0,i.createSingleKeyQuery)("from_broadcaster_user_id",(0,t.extractUserId)(l)),d,l)}async subscribeToChannelRaidEventsTo(l,d){return await this.createSubscription("channel.raid","1",(0,i.createSingleKeyQuery)("to_broadcaster_user_id",(0,t.extractUserId)(l)),d,l)}async subscribeToChannelRewardAddEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward.update","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEventsForReward(l,d,v){return await this.createSubscription("channel.channel_points_custom_reward.update","1",(0,r.createEventSubRewardCondition)(l,d),v,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEventsForReward(l,d,v){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",(0,r.createEventSubRewardCondition)(l,d),v,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEventsForReward(l,d,v){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",(0,r.createEventSubRewardCondition)(l,d),v,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEvents(l,d){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEventsForReward(l,d,v){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",(0,r.createEventSubRewardCondition)(l,d),v,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelAutomaticRewardRedemptionAddEvents(l,d){return await this.createSubscription("channel.channel_points_automatic_reward_redemption.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelPollBeginEvents(l,d){return await this.createSubscription("channel.poll.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollProgressEvents(l,d){return await this.createSubscription("channel.poll.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollEndEvents(l,d){return await this.createSubscription("channel.poll.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPredictionBeginEvents(l,d){return await this.createSubscription("channel.prediction.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionProgressEvents(l,d){return await this.createSubscription("channel.prediction.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionLockEvents(l,d){return await this.createSubscription("channel.prediction.lock","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionEndEvents(l,d){return await this.createSubscription("channel.prediction.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelGoalBeginEvents(l,d){return await this.createSubscription("channel.goal.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:goals"])}async subscribeToChannelGoalProgressEvents(l,d){return await this.createSubscription("channel.goal.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:goals"])}async subscribeToChannelGoalEndEvents(l,d){return await this.createSubscription("channel.goal.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:goals"])}async subscribeToChannelHypeTrainBeginEvents(l,d){return await this.createSubscription("channel.hype_train.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:hype_train"])}async subscribeToChannelHypeTrainProgressEvents(l,d){return await this.createSubscription("channel.hype_train.progress","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:hype_train"])}async subscribeToChannelHypeTrainEndEvents(l,d){return await this.createSubscription("channel.hype_train.end","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:hype_train"])}async subscribeToChannelShoutoutCreateEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.shoutout.create","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,v,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelShoutoutReceiveEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.shoutout.receive","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,v,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelAdBreakBeginEvents(l,d){return await this.createSubscription("channel.ad_break.begin","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:ads"])}async subscribeToChannelChatClearEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.clear","1",(0,r.createEventSubUserCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatClearUserMessagesEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.clear_user_messages","1",(0,r.createEventSubUserCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatMessageDeleteEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.message_delete","1",(0,r.createEventSubUserCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatNotificationEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.notification","1",(0,r.createEventSubUserCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatMessageEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.message","1",(0,r.createEventSubUserCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatSettingsUpdateEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat_settings.update","1",(0,r.createEventSubUserCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["user:read:chat"],!0)}async subscribeToChannelUnbanRequestCreateEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.unban_request.create","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelUnbanRequestResolveEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.unban_request.resolve","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelModerateEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.moderate","2",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,l,[],!0)}async subscribeToChannelWarningAcknowledgeEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.warning.acknowledge","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelWarningSendEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.warning.send","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelVipAddEvents(l,d){return await this.createSubscription("channel.vip.add","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:vips","channel:manage:vips"])}async subscribeToChannelVipRemoveEvents(l,d){return await this.createSubscription("channel.vip.remove","1",(0,r.createEventSubBroadcasterCondition)(l),d,l,["channel:read:vips","channel:manage:vips"])}async subscribeToExtensionBitsTransactionCreateEvents(l,d){return await this.createSubscription("extension.bits_transaction.create","1",(0,i.createSingleKeyQuery)("extension_client_id",l),d)}async subscribeToUserAuthorizationGrantEvents(l,d){return await this.createSubscription("user.authorization.grant","1",(0,i.createSingleKeyQuery)("client_id",l),d)}async subscribeToUserAuthorizationRevokeEvents(l,d){return await this.createSubscription("user.authorization.revoke","1",(0,i.createSingleKeyQuery)("client_id",l),d)}async subscribeToUserUpdateEvents(l,d,v){return await this.createSubscription("user.update","1",(0,i.createSingleKeyQuery)("user_id",(0,t.extractUserId)(l)),d,l,v?["user:read:email"]:void 0)}async subscribeToUserWhisperMessageEvents(l,d){return await this.createSubscription("user.whisper.message","1",(0,i.createSingleKeyQuery)("user_id",(0,t.extractUserId)(l)),d,l,["user:read:whispers","user:manage:whispers"])}async subscribeToDropEntitlementGrantEvents(l,d){return await this.createSubscription("drop.entitlement.grant","1",(0,r.createEventSubDropEntitlementGrantCondition)(l),d,void 0,void 0,!1,!0)}async subscribeToAutoModMessageHoldEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("automod.message.hold","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("automod.message.update","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["moderator:manage:automod"],!0)}async subscribeToAutoModSettingsUpdateEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("automod.settings.update","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["moderator:read:automod_settings"],!0)}async subscribeToAutoModTermsUpdateEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("automod.terms.update","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["moderator:manage:automod"],!0)}async subscribeToChannelChatUserMessageHoldEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.user_message_hold","1",(0,r.createEventSubUserCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["user:read:chat"],!0)}async subscribeToChannelChatUserMessageUpdateEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.chat.user_message_update","1",(0,r.createEventSubUserCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["user:read:chat"],!0)}async subscribeToChannelSuspiciousUserUpdateEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.suspicious_user.update","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSuspiciousUserMessageEvents(l,d){const v=(0,t.extractUserId)(l);return await this.createSubscription("channel.suspicious_user.message","1",(0,r.createEventSubModeratorCondition)(v,this._getUserContextIdWithDefault(v)),d,l,["moderator:read:suspicious_users"],!0)}async getConduits(){return(await this._client.callApi({type:"helix",url:"eventsub/conduits"})).data.map(d=>new w.HelixEventSubConduit(d,this._client))}async createConduit(l){const d=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"POST",query:{...(0,i.createSingleKeyQuery)("shard_count",l.toString())}});return new w.HelixEventSubConduit(d.data[0],this._client)}async updateConduit(l,d){const v=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"PATCH",query:(0,r.createEventSubConduitUpdateCondition)(l,d)});return new w.HelixEventSubConduit(v.data[0],this._client)}async deleteConduit(l){await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"DELETE",query:{...(0,i.createSingleKeyQuery)("id",l)}})}async getConduitShards(l,d,v){const C=await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",query:{...(0,r.createEventSubConduitCondition)(l,d),...(0,o.createPaginationQuery)(v)}});return{...(0,s.createPaginatedResult)(C,y.HelixEventSubConduitShard,this._client)}}getConduitShardsPaginated(l,d){return new a.HelixPaginatedRequest({url:"eventsub/conduits/shards",query:(0,r.createEventSubConduitCondition)(l,d)},this._client,v=>new y.HelixEventSubConduitShard(v))}async updateConduitShards(l,d){return(await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",method:"PATCH",jsonBody:(0,r.createEventSubConduitShardsUpdateCondition)(l,d)})).data.map(C=>new y.HelixEventSubConduitShard(C))}async _deleteSubscriptionsWithCondition(l){const d=this.getSubscriptionsPaginated();for await(const v of d)(!l||l(v))&&await v.unsubscribe()}};return sn.HelixEventSubApi=g,sn.HelixEventSubApi=g=n.__decorate([(0,t.rtfm)("api","HelixEventSubApi")],g),sn}var dn={},yt={},d_;function G0(){if(d_)return yt;d_=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.createExtensionTransactionQuery=yt.createExtensionProductBody=yt.createReleasedExtensionFilter=void 0;function n(r,i){return{extension_id:r,extension_version:i}}yt.createReleasedExtensionFilter=n;function e(r){return{sku:r.sku,cost:{amount:r.cost,type:"bits"},display_name:r.displayName,in_development:r.inDevelopment,expiration:r.expirationDate,is_broadcast:r.broadcast}}yt.createExtensionProductBody=e;function t(r,i){return{extension_id:r,id:i.transactionIds}}return yt.createExtensionTransactionQuery=t,yt}var hn={},h_;function qv(){if(h_)return hn;h_=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.HelixChannelReference=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].broadcaster_id}get displayName(){return this[t.rawDataSymbol].broadcaster_name}async getChannel(){return(0,t.checkRelationAssertion)(await this._client.channels.getChannelInfoById(this[t.rawDataSymbol].broadcaster_id))}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get gameId(){return this[t.rawDataSymbol].game_id}get gameName(){return this[t.rawDataSymbol].game_name}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get title(){return this[t.rawDataSymbol].title}};return hn.HelixChannelReference=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),hn.HelixChannelReference=r=n.__decorate([(0,t.rtfm)("api","HelixChannelReference","id")],r),hn}var pn={},p_;function kv(){if(p_)return pn;p_=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.HelixExtensionBitsProduct=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{get sku(){return this[t.rawDataSymbol].sku}get cost(){return this[t.rawDataSymbol].cost.amount}get displayName(){return this[t.rawDataSymbol].display_name}get inDevelopment(){return this[t.rawDataSymbol].in_development}get isBroadcast(){return this[t.rawDataSymbol].is_broadcast}get expirationDate(){return(0,e.mapNullable)(this[t.rawDataSymbol].expiration,a=>new Date(a))}};return pn.HelixExtensionBitsProduct=r,pn.HelixExtensionBitsProduct=r=n.__decorate([(0,t.rtfm)("api","HelixExtensionBitsProduct","sku")],r),pn}var mn={},m_;function Mv(){if(m_)return mn;m_=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.HelixExtensionTransaction=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get transactionDate(){return new Date(this[t.rawDataSymbol].timestamp)}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_name}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get productType(){return this[t.rawDataSymbol].product_type}get productSku(){return this[t.rawDataSymbol].product_data.sku}get productCost(){return this[t.rawDataSymbol].product_data.cost.amount}get productDisplayName(){return this[t.rawDataSymbol].product_data.displayName}get productInDevelopment(){return this[t.rawDataSymbol].product_data.inDevelopment}};return mn.HelixExtensionTransaction=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),mn.HelixExtensionTransaction=r=n.__decorate([(0,t.rtfm)("api","HelixExtensionTransaction","id")],r),mn}var __;function jv(){if(__)return dn;__=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.HelixExtensionsApi=void 0;const n=M,e=U(),t=G0(),r=tt(),i=qe(),a=Ne(),s=ke(),o=ve(),u=qv(),h=kv(),m=Mv();let w=class extends o.BaseApi{async getReleasedExtension(g,p){const l=await this._client.callApi({type:"helix",url:"extensions/released",query:(0,t.createReleasedExtensionFilter)(g,p)});return new e.HelixExtension(l.data[0])}async getLiveChannelsWithExtension(g,p){const l=await this._client.callApi({type:"helix",url:"extensions/live",query:{...(0,r.createSingleKeyQuery)("extension_id",g),...(0,s.createPaginationQuery)(p)}});return(0,a.createPaginatedResult)(l,u.HelixChannelReference,this._client)}getLiveChannelsWithExtensionPaginated(g){return new i.HelixPaginatedRequest({url:"extensions/live",query:(0,r.createSingleKeyQuery)("extension_id",g)},this._client,p=>new u.HelixChannelReference(p,this._client))}async getExtensionBitsProducts(g){return(await this._client.callApi({type:"helix",url:"bits/extensions",forceType:"app",query:(0,r.createSingleKeyQuery)("should_include_all",g==null?void 0:g.toString())})).data.map(l=>new h.HelixExtensionBitsProduct(l))}async putExtensionBitsProduct(g){const p=await this._client.callApi({type:"helix",url:"bits/extensions",method:"PUT",forceType:"app",jsonBody:(0,t.createExtensionProductBody)(g)});return new h.HelixExtensionBitsProduct(p.data[0])}async getExtensionTransactions(g,p={}){const l=await this._client.callApi({type:"helix",url:"extensions/transactions",forceType:"app",query:{...(0,t.createExtensionTransactionQuery)(g,p),...(0,s.createPaginationQuery)(p)}});return(0,a.createPaginatedResult)(l,m.HelixExtensionTransaction,this._client)}getExtensionTransactionsPaginated(g,p={}){return new i.HelixPaginatedRequest({url:"extensions/transactions",forceType:"app",query:(0,t.createExtensionTransactionQuery)(g,p)},this._client,l=>new m.HelixExtensionTransaction(l,this._client))}};return dn.HelixExtensionsApi=w,dn.HelixExtensionsApi=w=n.__decorate([(0,e.rtfm)("api","HelixExtensionsApi")],w),dn}var _n={},gn={},g_;function pd(){if(g_)return gn;g_=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.HelixGame=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get name(){return this[t.rawDataSymbol].name}get boxArtUrl(){return this[t.rawDataSymbol].box_art_url}get igdbId(){return this[t.rawDataSymbol].igdb_id||null}getBoxArtUrl(a,s){return this[t.rawDataSymbol].box_art_url.replace("{width}",a.toString()).replace("{height}",s.toString())}async getStreams(a){return await this._client.streams.getStreams({...a,game:this[t.rawDataSymbol].id})}getStreamsPaginated(){return this._client.streams.getStreamsPaginated({game:this[t.rawDataSymbol].id})}};return gn.HelixGame=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),gn.HelixGame=r=n.__decorate([(0,t.rtfm)("api","HelixGame","id")],r),gn}var f_;function Lv(){if(f_)return _n;f_=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.HelixGameApi=void 0;const n=M,e=W(),t=U(),r=ar(),i=qe(),a=Ne(),s=ke(),o=ve(),u=pd();let h=class extends o.BaseApi{constructor(){super(...arguments),this._getGameByIdBatcher=new r.HelixRequestBatcher({url:"games"},"id","id",this._client,w=>new u.HelixGame(w,this._client)),this._getGameByNameBatcher=new r.HelixRequestBatcher({url:"games"},"name","name",this._client,w=>new u.HelixGame(w,this._client)),this._getGameByIgdbIdBatcher=new r.HelixRequestBatcher({url:"games"},"igdb_id","igdb_id",this._client,w=>new u.HelixGame(w,this._client))}async getGamesByIds(w){return await this._getGames("id",w)}async getGamesByNames(w){return await this._getGames("name",w)}async getGamesByIgdbIds(w){return await this._getGames("igdb_id",w)}async getGameById(w){var y;return(y=(await this._getGames("id",[w]))[0])!==null&&y!==void 0?y:null}async getGameByName(w){var y;return(y=(await this._getGames("name",[w]))[0])!==null&&y!==void 0?y:null}async getGameByIgdbId(w){var y;return(y=(await this._getGames("igdb_id",[w]))[0])!==null&&y!==void 0?y:null}async getGameByIdBatched(w){return await this._getGameByIdBatcher.request(w)}async getGameByNameBatched(w){return await this._getGameByNameBatcher.request(w)}async getGameByIgdbIdBatched(w){return await this._getGameByIgdbIdBatcher.request(w)}async getTopGames(w){const y=await this._client.callApi({type:"helix",url:"games/top",query:(0,s.createPaginationQuery)(w)});return(0,a.createPaginatedResult)(y,u.HelixGame,this._client)}getTopGamesPaginated(){return new i.HelixPaginatedRequest({url:"games/top"},this._client,w=>new u.HelixGame(w,this._client))}async _getGames(w,y){return y.length?(await this._client.callApi({type:"helix",url:"games",query:{[w]:y}})).data.map(p=>new u.HelixGame(p,this._client)):[]}};return _n.HelixGameApi=h,n.__decorate([(0,e.Enumerable)(!1)],h.prototype,"_getGameByIdBatcher",void 0),n.__decorate([(0,e.Enumerable)(!1)],h.prototype,"_getGameByNameBatcher",void 0),n.__decorate([(0,e.Enumerable)(!1)],h.prototype,"_getGameByIgdbIdBatcher",void 0),_n.HelixGameApi=h=n.__decorate([(0,t.rtfm)("api","HelixGameApi")],h),_n}var fn={},yn={},y_;function Nv(){if(y_)return yn;y_=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.HelixGoal=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get type(){return this[t.rawDataSymbol].type}get description(){return this[t.rawDataSymbol].description}get currentAmount(){return this[t.rawDataSymbol].current_amount}get targetAmount(){return this[t.rawDataSymbol].target_amount}get creationDate(){return this[t.rawDataSymbol].created_at}};return yn.HelixGoal=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),yn.HelixGoal=r=n.__decorate([(0,t.rtfm)("api","HelixGoal","id")],r),yn}var b_;function Fv(){if(b_)return fn;b_=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.HelixGoalApi=void 0;const n=M,e=Re(),t=U(),r=ve(),i=Nv();let a=class extends r.BaseApi{async getGoals(o){return(await this._client.callApi({type:"helix",url:"goals",userId:(0,t.extractUserId)(o),scopes:["channel:read:goals"],query:(0,e.createBroadcasterQuery)(o)})).data.map(h=>new i.HelixGoal(h,this._client))}};return fn.HelixGoalApi=a,fn.HelixGoalApi=a=n.__decorate([(0,t.rtfm)("api","HelixGoalApi")],a),fn}var ns={},bn={},vn={},v_;function $v(){if(v_)return vn;v_=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.HelixHypeTrainContribution=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user))}get type(){return this[t.rawDataSymbol].type}get total(){return this[t.rawDataSymbol].total}};return vn.HelixHypeTrainContribution=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),vn.HelixHypeTrainContribution=r=n.__decorate([(0,t.rtfm)("api","HelixHypeTrainContribution","userId")],r),vn}var w_;function Gv(){if(w_)return bn;w_=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.HelixHypeTrainEvent=void 0;const n=M,e=W(),t=U(),r=$v();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get eventId(){return this[t.rawDataSymbol].id}get eventType(){return this[t.rawDataSymbol].event_type}get eventDate(){return new Date(this[t.rawDataSymbol].event_timestamp)}get eventVersion(){return this[t.rawDataSymbol].version}get id(){return this[t.rawDataSymbol].event_data.id}get broadcasterId(){return this[t.rawDataSymbol].event_data.broadcaster_id}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].event_data.broadcaster_id))}get level(){return this[t.rawDataSymbol].event_data.level}get startDate(){return new Date(this[t.rawDataSymbol].event_data.started_at)}get expiryDate(){return new Date(this[t.rawDataSymbol].event_data.expires_at)}get cooldownDate(){return new Date(this[t.rawDataSymbol].event_data.cooldown_end_time)}get total(){return this[t.rawDataSymbol].event_data.total}get goal(){return this[t.rawDataSymbol].event_data.goal}get lastContribution(){return new r.HelixHypeTrainContribution(this[t.rawDataSymbol].event_data.last_contribution,this._client)}get topContributions(){return this[t.rawDataSymbol].event_data.top_contributions.map(s=>new r.HelixHypeTrainContribution(s,this._client))}};return bn.HelixHypeTrainEvent=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),bn.HelixHypeTrainEvent=i=n.__decorate([(0,t.rtfm)("api","HelixHypeTrainEvent","id")],i),bn}var x_;function Qv(){if(x_)return ns;x_=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.HelixHypeTrainApi=void 0;const n=Re(),e=U(),t=qe(),r=Ne(),i=ke(),a=ve(),s=Gv();class o extends a.BaseApi{async getHypeTrainEventsForBroadcaster(h,m){const w=await this._client.callApi({type:"helix",url:"hypetrain/events",userId:(0,e.extractUserId)(h),scopes:["channel:read:hype_train"],query:{...(0,n.createBroadcasterQuery)(h),...(0,i.createPaginationQuery)(m)}});return(0,r.createPaginatedResult)(w,s.HelixHypeTrainEvent,this._client)}getHypeTrainEventsForBroadcasterPaginated(h){return new t.HelixPaginatedRequest({url:"hypetrain/events",userId:(0,e.extractUserId)(h),scopes:["channel:read:hype_train"],query:(0,n.createBroadcasterQuery)(h)},this._client,m=>new s.HelixHypeTrainEvent(m,this._client))}}return ns.HelixHypeTrainApi=o,ns}var wn={},Ae={},S_;function Q0(){if(S_)return Ae;S_=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.createWarnUserBody=Ae.createCheckAutoModStatusBody=Ae.createUpdateShieldModeStatusBody=Ae.createBanUserBody=Ae.createAutoModSettingsBody=Ae.createAutoModProcessBody=Ae.createResolveUnbanRequestQuery=Ae.createModeratorModifyQuery=Ae.createModerationUserListQuery=void 0;const n=U();function e(m,w){return{broadcaster_id:(0,n.extractUserId)(m),user_id:w==null?void 0:w.userId}}Ae.createModerationUserListQuery=e;function t(m,w){return{broadcaster_id:(0,n.extractUserId)(m),user_id:(0,n.extractUserId)(w)}}Ae.createModeratorModifyQuery=t;function r(m,w,y,g,p){return{unban_request_id:y,broadcaster_id:(0,n.extractUserId)(m),moderator_id:(0,n.extractUserId)(w),status:g?"approved":"denied",resolution_text:p}}Ae.createResolveUnbanRequestQuery=r;function i(m,w,y){return{user_id:(0,n.extractUserId)(m),msg_id:w,action:y?"ALLOW":"DENY"}}Ae.createAutoModProcessBody=i;function a(m){return{overall_level:m.overallLevel,aggression:m.aggression,bullying:m.bullying,disability:m.disability,misogyny:m.misogyny,race_ethnicity_or_religion:m.raceEthnicityOrReligion,sex_based_terms:m.sexBasedTerms,sexuality_sex_or_gender:m.sexualitySexOrGender,swearing:m.swearing}}Ae.createAutoModSettingsBody=a;function s(m){return{data:{duration:m.duration,reason:m.reason,user_id:(0,n.extractUserId)(m.user)}}}Ae.createBanUserBody=s;function o(m){return{is_active:m}}Ae.createUpdateShieldModeStatusBody=o;function u(m){return{data:m.map(w=>({msg_id:w.messageId,msg_text:w.messageText}))}}Ae.createCheckAutoModStatusBody=u;function h(m,w){return{data:{user_id:(0,n.extractUserId)(m),reason:w}}}return Ae.createWarnUserBody=h,Ae}var xn={},C_;function W0(){if(C_)return xn;C_=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.HelixAutoModSettings=void 0;const n=M,e=U();let t=class extends e.DataObject{get broadcasterId(){return this[e.rawDataSymbol].broadcaster_id}get moderatorId(){return this[e.rawDataSymbol].moderator_id}get overallLevel(){return this[e.rawDataSymbol].overall_level?this[e.rawDataSymbol].overall_level:null}get disability(){return this[e.rawDataSymbol].disability}get aggression(){return this[e.rawDataSymbol].aggression}get sexualitySexOrGender(){return this[e.rawDataSymbol].sexuality_sex_or_gender}get misogyny(){return this[e.rawDataSymbol].misogyny}get bullying(){return this[e.rawDataSymbol].bullying}get swearing(){return this[e.rawDataSymbol].swearing}get raceEthnicityOrReligion(){return this[e.rawDataSymbol].race_ethnicity_or_religion}get sexBasedTerms(){return this[e.rawDataSymbol].sex_based_terms}};return xn.HelixAutoModSettings=t,xn.HelixAutoModSettings=t=n.__decorate([(0,e.rtfm)("api","HelixAutoModSettings","broadcasterId")],t),xn}var Sn={},E_;function V0(){if(E_)return Sn;E_=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.HelixAutoModStatus=void 0;const n=M,e=U();let t=class extends e.DataObject{get messageId(){return this[e.rawDataSymbol].msg_id}get isPermitted(){return this[e.rawDataSymbol].is_permitted}};return Sn.HelixAutoModStatus=t,Sn.HelixAutoModStatus=t=n.__decorate([(0,e.rtfm)("api","HelixAutoModStatus","messageId")],t),Sn}var Cn={},En={},H_;function md(){if(H_)return En;H_=1,Object.defineProperty(En,"__esModule",{value:!0}),En.HelixBanUser=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s,o){super(a),this._expiryTimestamp=s,this._client=o}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get expiryDate(){return(0,e.mapNullable)(this._expiryTimestamp,a=>new Date(a))}get moderatorId(){return this[t.rawDataSymbol].moderator_id}async getModerator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].moderator_id))}get userId(){return this[t.rawDataSymbol].user_id}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return En.HelixBanUser=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_expiryTimestamp",void 0),En.HelixBanUser=r=n.__decorate([(0,t.rtfm)("api","HelixBanUser","userId")],r),En}var A_;function Wv(){if(A_)return Cn;A_=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.HelixBan=void 0;const n=M,e=U(),t=md();let r=class extends t.HelixBanUser{constructor(a,s){super(a,a.expires_at||null,s)}get userName(){return this[e.rawDataSymbol].user_login}get userDisplayName(){return this[e.rawDataSymbol].user_name}get moderatorName(){return this[e.rawDataSymbol].moderator_login}get moderatorDisplayName(){return this[e.rawDataSymbol].moderator_name}get reason(){return this[e.rawDataSymbol].reason||null}};return Cn.HelixBan=r,Cn.HelixBan=r=n.__decorate([(0,e.rtfm)("api","HelixBan","userId")],r),Cn}var Hn={},R_;function Vv(){if(R_)return Hn;R_=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.HelixBlockedTerm=void 0;const n=M,e=U();let t=class extends e.DataObject{get broadcasterId(){return this[e.rawDataSymbol].broadcaster_id}get creationDate(){return new Date(this[e.rawDataSymbol].created_at)}get expirationDate(){return this[e.rawDataSymbol].expires_at?new Date(this[e.rawDataSymbol].expires_at):null}get id(){return this[e.rawDataSymbol].id}get moderatorId(){return this[e.rawDataSymbol].moderator_id}get text(){return this[e.rawDataSymbol].text}get updatedDate(){return new Date(this[e.rawDataSymbol].updated_at)}};return Hn.HelixBlockedTerm=t,Hn.HelixBlockedTerm=t=n.__decorate([(0,e.rtfm)("api","HelixBlockedTerm","id")],t),Hn}var An={},T_;function zv(){if(T_)return An;T_=1,Object.defineProperty(An,"__esModule",{value:!0}),An.HelixModeratedChannel=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].broadcaster_id}get name(){return this[t.rawDataSymbol].broadcaster_login}get displayName(){return this[t.rawDataSymbol].broadcaster_name}async getChannel(){return(0,t.checkRelationAssertion)(await this._client.channels.getChannelInfoById(this[t.rawDataSymbol].broadcaster_id))}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}};return An.HelixModeratedChannel=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),An.HelixModeratedChannel=r=n.__decorate([(0,t.rtfm)("api","HelixModeratedChannel","id")],r),An}var Rn={},I_;function Kv(){if(I_)return Rn;I_=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.HelixModerator=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return Rn.HelixModerator=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Rn.HelixModerator=r=n.__decorate([(0,t.rtfm)("api","HelixModerator","userId")],r),Rn}var Tn={},P_;function Xv(){if(P_)return Tn;P_=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.HelixShieldModeStatus=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get isActive(){return this[t.rawDataSymbol].is_active}get moderatorId(){return this[t.rawDataSymbol].moderator_id}get moderatorName(){return this[t.rawDataSymbol].moderator_login}get moderatorDisplayName(){return this[t.rawDataSymbol].moderator_name}async getModerator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].moderator_id))}get lastActivationDate(){return this[t.rawDataSymbol].last_activated_at===""?null:new Date(this[t.rawDataSymbol].last_activated_at)}};return Tn.HelixShieldModeStatus=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Tn.HelixShieldModeStatus=r=n.__decorate([(0,t.rtfm)("api","HelixShieldModeStatus")],r),Tn}var In={},D_;function Jv(){if(D_)return In;D_=1,Object.defineProperty(In,"__esModule",{value:!0}),In.HelixUnbanRequest=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_id}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get moderatorId(){return this[t.rawDataSymbol].moderator_id}get moderatorName(){return this[t.rawDataSymbol].moderator_login}get moderatorDisplayName(){return this[t.rawDataSymbol].moderator_name}async getModerator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].moderator_id))}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get message(){return this[t.rawDataSymbol].text}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get resolutionMessage(){return this[t.rawDataSymbol].resolution_text||null}get resolutionDate(){return(0,e.mapNullable)(this[t.rawDataSymbol].resolved_at,a=>new Date(a))}};return In.HelixUnbanRequest=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),In.HelixUnbanRequest=r=n.__decorate([(0,t.rtfm)("api","HelixUnbanRequest","id")],r),In}var Pn={},B_;function Yv(){if(B_)return Pn;B_=1,Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.HelixWarning=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get broadcasterId(){return this[t.rawDataSymbol].user_id}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get moderatorId(){return this[t.rawDataSymbol].moderator_id}async getModerator(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].moderator_id))}get userId(){return this[t.rawDataSymbol].user_id}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get reason(){return this[t.rawDataSymbol].reason}};return Pn.HelixWarning=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Pn.HelixWarning=r=n.__decorate([(0,t.rtfm)("api","HelixWarning","userId")],r),Pn}var O_;function Zv(){if(O_)return wn;O_=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.HelixModerationApi=void 0;const n=M,e=Re(),t=U(),r=tt(),i=Q0(),a=qe(),s=Ne(),o=ke(),u=ve(),h=W0(),m=V0(),w=Wv(),y=md(),g=Vv(),p=zv(),l=Kv(),d=Xv(),v=Jv(),C=Yv();let R=class extends u.BaseApi{async getBannedUsers(_,x){const H=await this._client.callApi({type:"helix",url:"moderation/banned",userId:(0,t.extractUserId)(_),scopes:["moderation:read"],query:{...(0,i.createModerationUserListQuery)(_,x),...(0,o.createPaginationQuery)(x)}});return(0,s.createPaginatedResult)(H,w.HelixBan,this._client)}getBannedUsersPaginated(_){return new a.HelixPaginatedRequest({url:"moderation/banned",userId:(0,t.extractUserId)(_),scopes:["moderation:read"],query:(0,e.createBroadcasterQuery)(_)},this._client,x=>new w.HelixBan(x,this._client),50)}async checkUserBan(_,x){const H=(0,t.extractUserId)(x);return(await this.getBannedUsers(_,{userId:H})).data.some($=>$.userId===H)}async getModerators(_,x){const H=await this._client.callApi({type:"helix",url:"moderation/moderators",userId:(0,t.extractUserId)(_),scopes:["moderation:read","channel:manage:moderators"],query:{...(0,i.createModerationUserListQuery)(_,x),...(0,o.createPaginationQuery)(x)}});return(0,s.createPaginatedResult)(H,l.HelixModerator,this._client)}getModeratorsPaginated(_){return new a.HelixPaginatedRequest({url:"moderation/moderators",userId:(0,t.extractUserId)(_),scopes:["moderation:read","channel:manage:moderators"],query:(0,e.createBroadcasterQuery)(_)},this._client,x=>new l.HelixModerator(x,this._client))}async getModeratedChannels(_,x){const H=(0,t.extractUserId)(_),q=await this._client.callApi({type:"helix",url:"moderation/channels",userId:H,scopes:["user:read:moderated_channels"],query:{...(0,r.createSingleKeyQuery)("user_id",H),...(0,o.createPaginationQuery)(x)}});return(0,s.createPaginatedResult)(q,p.HelixModeratedChannel,this._client)}getModeratedChannelsPaginated(_){const x=(0,t.extractUserId)(_);return new a.HelixPaginatedRequest({url:"moderation/channels",userId:x,scopes:["user:read:moderated_channels"],query:(0,r.createSingleKeyQuery)("user_id",x)},this._client,H=>new p.HelixModeratedChannel(H,this._client))}async checkUserMod(_,x){const H=(0,t.extractUserId)(x);return(await this.getModerators(_,{userId:H})).data.some($=>$.userId===H)}async addModerator(_,x){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"POST",userId:(0,t.extractUserId)(_),scopes:["channel:manage:moderators"],query:(0,i.createModeratorModifyQuery)(_,x)})}async removeModerator(_,x){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"DELETE",userId:(0,t.extractUserId)(_),scopes:["channel:manage:moderators"],query:(0,i.createModeratorModifyQuery)(_,x)})}async checkAutoModStatus(_,x){return(await this._client.callApi({type:"helix",url:"moderation/enforcements/status",method:"POST",userId:(0,t.extractUserId)(_),scopes:["moderation:read"],query:(0,e.createBroadcasterQuery)(_),jsonBody:(0,i.createCheckAutoModStatusBody)(x)})).data.map(q=>new m.HelixAutoModStatus(q))}async processHeldAutoModMessage(_,x,H){await this._client.callApi({type:"helix",url:"moderation/automod/message",method:"POST",userId:(0,t.extractUserId)(_),scopes:["moderator:manage:automod"],jsonBody:(0,i.createAutoModProcessBody)(_,x,H)})}async getAutoModSettings(_){const x=(0,t.extractUserId)(_);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",userId:x,scopes:["moderator:read:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(x)})).data.map(q=>new h.HelixAutoModSettings(q))}async updateAutoModSettings(_,x){const H=(0,t.extractUserId)(_);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",method:"PUT",userId:H,scopes:["moderator:manage:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(H),jsonBody:(0,i.createAutoModSettingsBody)(x)})).data.map($=>new h.HelixAutoModSettings($))}async banUser(_,x){const H=(0,t.extractUserId)(_);return(await this._client.callApi({type:"helix",url:"moderation/bans",method:"POST",userId:H,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(H),jsonBody:(0,i.createBanUserBody)(x)})).data.map($=>new y.HelixBanUser($,$.end_time,this._client))}async unbanUser(_,x){const H=(0,t.extractUserId)(_);await this._client.callApi({type:"helix",url:"moderation/bans",method:"DELETE",userId:H,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(H),...(0,r.createSingleKeyQuery)("user_id",(0,t.extractUserId)(x))}})}async getBlockedTerms(_,x){const H=(0,t.extractUserId)(_),q=await this._client.callApi({type:"helix",url:"moderation/blocked_terms",userId:H,scopes:["moderator:read:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(H),...(0,o.createPaginationQuery)(x)}});return(0,s.createPaginatedResult)(q,g.HelixBlockedTerm,this._client)}async addBlockedTerm(_,x){const H=(0,t.extractUserId)(_);return(await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"POST",userId:H,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(H),jsonBody:{text:x}})).data.map($=>new g.HelixBlockedTerm($))}async removeBlockedTerm(_,x,H){const q=(0,t.extractUserId)(_);await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"DELETE",userId:q,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(q),id:H}})}async deleteChatMessages(_,x){const H=(0,t.extractUserId)(_);await this._client.callApi({type:"helix",url:"moderation/chat",method:"DELETE",userId:H,scopes:["moderator:manage:chat_messages"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(H),...(0,r.createSingleKeyQuery)("message_id",x)}})}async getShieldModeStatus(_){const x=(0,t.extractUserId)(_),H=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"GET",userId:x,scopes:["moderator:read:shield_mode","moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(x)});return new d.HelixShieldModeStatus(H.data[0],this._client)}async updateShieldModeStatus(_,x){const H=(0,t.extractUserId)(_),q=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"PUT",userId:H,scopes:["moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(H),jsonBody:(0,i.createUpdateShieldModeStatusBody)(x)});return new d.HelixShieldModeStatus(q.data[0],this._client)}async getUnbanRequests(_,x,H){const q=(0,t.extractUserId)(_),$=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"GET",userId:q,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(q),...(0,r.createSingleKeyQuery)("status",x),...(0,o.createPaginationQuery)(H)}});return(0,s.createPaginatedResult)($,v.HelixUnbanRequest,this._client)}getUnbanRequestsPaginated(_,x){const H=(0,t.extractUserId)(_);return new a.HelixPaginatedRequest({url:"moderation/unban_requests",method:"GET",userId:H,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(H),...(0,r.createSingleKeyQuery)("status",x)}},this._client,q=>new v.HelixUnbanRequest(q,this._client))}async resolveUnbanRequest(_,x,H,q){const $=(0,t.extractUserId)(_),se=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"PATCH",userId:$,scopes:["moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:(0,i.createResolveUnbanRequestQuery)($,this._getUserContextIdWithDefault($),x,H,q==null?void 0:q.slice(0,500))});return new v.HelixUnbanRequest(se.data[0],this._client)}async warnUser(_,x,H){const q=(0,t.extractUserId)(_),$=await this._client.callApi({type:"helix",url:"moderation/warnings",method:"POST",userId:q,scopes:["moderator:manage:warnings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(q),jsonBody:(0,i.createWarnUserBody)(x,H.slice(0,500))});return new C.HelixWarning($.data[0],this._client)}_createModeratorActionQuery(_){return(0,r.createModeratorActionQuery)(_,this._getUserContextIdWithDefault(_))}};return wn.HelixModerationApi=R,wn.HelixModerationApi=R=n.__decorate([(0,t.rtfm)("api","HelixModerationApi")],R),wn}var Dn={},zt={},U_;function z0(){if(U_)return zt;U_=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.createPollEndBody=zt.createPollBody=void 0;const n=U();function e(r,i){var a;return{broadcaster_id:(0,n.extractUserId)(r),title:i.title,choices:i.choices.map(s=>({title:s})),duration:i.duration,channel_points_voting_enabled:i.channelPointsPerVote!=null,channel_points_per_vote:(a=i.channelPointsPerVote)!==null&&a!==void 0?a:0}}zt.createPollBody=e;function t(r,i,a){return{broadcaster_id:(0,n.extractUserId)(r),id:i,status:a?"TERMINATED":"ARCHIVED"}}return zt.createPollEndBody=t,zt}var Bn={},On={},q_;function ew(){if(q_)return On;q_=1,Object.defineProperty(On,"__esModule",{value:!0}),On.HelixPollChoice=void 0;const n=M,e=U();let t=class extends e.DataObject{get id(){return this[e.rawDataSymbol].id}get title(){return this[e.rawDataSymbol].title}get totalVotes(){return this[e.rawDataSymbol].votes}get channelPointsVotes(){return this[e.rawDataSymbol].channel_points_votes}};return On.HelixPollChoice=t,On.HelixPollChoice=t=n.__decorate([(0,e.rtfm)("api","HelixPollChoice","id")],t),On}var k_;function tw(){if(k_)return Bn;k_=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.HelixPoll=void 0;const n=M,e=W(),t=U(),r=ew();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get title(){return this[t.rawDataSymbol].title}get isChannelPointsVotingEnabled(){return this[t.rawDataSymbol].channel_points_voting_enabled}get channelPointsPerVote(){return this[t.rawDataSymbol].channel_points_per_vote}get status(){return this[t.rawDataSymbol].status}get durationInSeconds(){return this[t.rawDataSymbol].duration}get startDate(){return new Date(this[t.rawDataSymbol].started_at)}get endDate(){return new Date(this.startDate.getTime()+this[t.rawDataSymbol].duration*1e3)}get choices(){return this[t.rawDataSymbol].choices.map(s=>new r.HelixPollChoice(s))}};return Bn.HelixPoll=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),Bn.HelixPoll=i=n.__decorate([(0,t.rtfm)("api","HelixPoll","id")],i),Bn}var M_;function rw(){if(M_)return Dn;M_=1,Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.HelixPollApi=void 0;const n=M,e=Re(),t=U(),r=tt(),i=z0(),a=qe(),s=Ne(),o=ke(),u=ve(),h=tw();let m=class extends u.BaseApi{async getPolls(y,g){const p=await this._client.callApi({type:"helix",url:"polls",userId:(0,t.extractUserId)(y),scopes:["channel:read:polls"],query:{...(0,e.createBroadcasterQuery)(y),...(0,o.createPaginationQuery)(g)}});return(0,s.createPaginatedResult)(p,h.HelixPoll,this._client)}getPollsPaginated(y){return new a.HelixPaginatedRequest({url:"polls",userId:(0,t.extractUserId)(y),scopes:["channel:read:polls"],query:(0,e.createBroadcasterQuery)(y)},this._client,g=>new h.HelixPoll(g,this._client),20)}async getPollsByIds(y,g){return g.length?(await this._client.callApi({type:"helix",url:"polls",userId:(0,t.extractUserId)(y),scopes:["channel:read:polls"],query:(0,r.createGetByIdsQuery)(y,g)})).data.map(l=>new h.HelixPoll(l,this._client)):[]}async getPollById(y,g){const p=await this.getPollsByIds(y,[g]);return p.length?p[0]:null}async createPoll(y,g){const p=await this._client.callApi({type:"helix",url:"polls",method:"POST",userId:(0,t.extractUserId)(y),scopes:["channel:manage:polls"],jsonBody:(0,i.createPollBody)(y,g)});return new h.HelixPoll(p.data[0],this._client)}async endPoll(y,g,p=!0){const l=await this._client.callApi({type:"helix",url:"polls",method:"PATCH",userId:(0,t.extractUserId)(y),scopes:["channel:manage:polls"],jsonBody:(0,i.createPollEndBody)(y,g,p)});return new h.HelixPoll(l.data[0],this._client)}};return Dn.HelixPollApi=m,Dn.HelixPollApi=m=n.__decorate([(0,t.rtfm)("api","HelixPollApi")],m),Dn}var Un={},Kt={},j_;function K0(){if(j_)return Kt;j_=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.createEndPredictionBody=Kt.createPredictionBody=void 0;const n=U();function e(r,i){return{broadcaster_id:(0,n.extractUserId)(r),title:i.title,outcomes:i.outcomes.map(a=>({title:a})),prediction_window:i.autoLockAfter}}Kt.createPredictionBody=e;function t(r,i,a,s){return{broadcaster_id:(0,n.extractUserId)(r),id:i,status:a,winning_outcome_id:s}}return Kt.createEndPredictionBody=t,Kt}var qn={},kn={},Mn={},L_;function nw(){if(L_)return Mn;L_=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.HelixPredictor=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return await this._client.users.getUserById(this[t.rawDataSymbol].user_id)}get channelPointsUsed(){return this[t.rawDataSymbol].channel_points_used}get channelPointsWon(){return this[t.rawDataSymbol].channel_points_won}};return Mn.HelixPredictor=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Mn.HelixPredictor=r=n.__decorate([(0,t.rtfm)("api","HelixPredictor","userId")],r),Mn}var N_;function iw(){if(N_)return kn;N_=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.HelixPredictionOutcome=void 0;const n=M,e=W(),t=U(),r=nw();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[t.rawDataSymbol].id}get title(){return this[t.rawDataSymbol].title}get users(){return this[t.rawDataSymbol].users}get totalChannelPoints(){return this[t.rawDataSymbol].channel_points}get color(){return this[t.rawDataSymbol].color}get topPredictors(){var s,o;return(o=(s=this[t.rawDataSymbol].top_predictors)===null||s===void 0?void 0:s.map(u=>new r.HelixPredictor(u,this._client)))!==null&&o!==void 0?o:[]}};return kn.HelixPredictionOutcome=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),kn.HelixPredictionOutcome=i=n.__decorate([(0,t.rtfm)("api","HelixPredictionOutcome","id")],i),kn}var F_;function aw(){if(F_)return qn;F_=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.HelixPrediction=void 0;const n=M,e=W(),t=U(),r=iw();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[t.rawDataSymbol].id}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get title(){return this[t.rawDataSymbol].title}get status(){return this[t.rawDataSymbol].status}get autoLockAfter(){return this[t.rawDataSymbol].prediction_window}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get endDate(){return this[t.rawDataSymbol].ended_at?new Date(this[t.rawDataSymbol].ended_at):null}get lockDate(){return this[t.rawDataSymbol].locked_at?new Date(this[t.rawDataSymbol].locked_at):null}get outcomes(){return this[t.rawDataSymbol].outcomes.map(s=>new r.HelixPredictionOutcome(s,this._client))}get winningOutcomeId(){return this[t.rawDataSymbol].winning_outcome_id||null}get winningOutcome(){if(!this[t.rawDataSymbol].winning_outcome_id)return null;const s=this[t.rawDataSymbol].outcomes.find(o=>o.id===this[t.rawDataSymbol].winning_outcome_id);if(!s)throw new t.HellFreezesOverError("Winning outcome not found in outcomes array");return new r.HelixPredictionOutcome(s,this._client)}};return qn.HelixPrediction=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),qn.HelixPrediction=i=n.__decorate([(0,t.rtfm)("api","HelixPrediction","id")],i),qn}var $_;function sw(){if($_)return Un;$_=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.HelixPredictionApi=void 0;const n=M,e=Re(),t=U(),r=tt(),i=K0(),a=qe(),s=Ne(),o=ke(),u=ve(),h=aw();let m=class extends u.BaseApi{async getPredictions(y,g){const p=await this._client.callApi({type:"helix",url:"predictions",userId:(0,t.extractUserId)(y),scopes:["channel:read:predictions"],query:{...(0,e.createBroadcasterQuery)(y),...(0,o.createPaginationQuery)(g)}});return(0,s.createPaginatedResult)(p,h.HelixPrediction,this._client)}getPredictionsPaginated(y){return new a.HelixPaginatedRequest({url:"predictions",userId:(0,t.extractUserId)(y),scopes:["channel:read:predictions"],query:(0,e.createBroadcasterQuery)(y)},this._client,g=>new h.HelixPrediction(g,this._client),20)}async getPredictionsByIds(y,g){return g.length?(await this._client.callApi({type:"helix",url:"predictions",userId:(0,t.extractUserId)(y),scopes:["channel:read:predictions"],query:(0,r.createGetByIdsQuery)(y,g)})).data.map(l=>new h.HelixPrediction(l,this._client)):[]}async getPredictionById(y,g){const p=await this.getPredictionsByIds(y,[g]);return p.length?p[0]:null}async createPrediction(y,g){const p=await this._client.callApi({type:"helix",url:"predictions",method:"POST",userId:(0,t.extractUserId)(y),scopes:["channel:manage:predictions"],jsonBody:(0,i.createPredictionBody)(y,g)});return new h.HelixPrediction(p.data[0],this._client)}async lockPrediction(y,g){return await this._endPrediction(y,g,"LOCKED")}async resolvePrediction(y,g,p){return await this._endPrediction(y,g,"RESOLVED",p)}async cancelPrediction(y,g){return await this._endPrediction(y,g,"CANCELED")}async _endPrediction(y,g,p,l){const d=await this._client.callApi({type:"helix",url:"predictions",method:"PATCH",userId:(0,t.extractUserId)(y),scopes:["channel:manage:predictions"],jsonBody:(0,i.createEndPredictionBody)(y,g,p,l)});return new h.HelixPrediction(d.data[0],this._client)}};return Un.HelixPredictionApi=m,Un.HelixPredictionApi=m=n.__decorate([(0,t.rtfm)("api","HelixPredictionApi")],m),Un}var jn={},is={},G_;function X0(){if(G_)return is;G_=1,Object.defineProperty(is,"__esModule",{value:!0}),is.createRaidStartQuery=void 0;const n=U();function e(t,r){return{from_broadcaster_id:(0,n.extractUserId)(t),to_broadcaster_id:(0,n.extractUserId)(r)}}return is.createRaidStartQuery=e,is}var Ln={},Q_;function ow(){if(Q_)return Ln;Q_=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.HelixRaid=void 0;const n=M,e=U();let t=class extends e.DataObject{get creationDate(){return new Date(this[e.rawDataSymbol].created_at)}get targetIsMature(){return this[e.rawDataSymbol].is_mature}};return Ln.HelixRaid=t,Ln.HelixRaid=t=n.__decorate([(0,e.rtfm)("api","HelixRaid")],t),Ln}var W_;function lw(){if(W_)return jn;W_=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.HelixRaidApi=void 0;const n=M,e=Re(),t=U(),r=X0(),i=ve(),a=ow();let s=class extends i.BaseApi{async startRaid(u,h){const m=await this._client.callApi({type:"helix",url:"raids",method:"POST",userId:(0,t.extractUserId)(u),scopes:["channel:manage:raids"],query:(0,r.createRaidStartQuery)(u,h)});return new a.HelixRaid(m.data[0])}async cancelRaid(u){await this._client.callApi({type:"helix",url:"raids",method:"DELETE",userId:(0,t.extractUserId)(u),scopes:["channel:manage:raids"],query:(0,e.createBroadcasterQuery)(u)})}};return jn.HelixRaidApi=s,jn.HelixRaidApi=s=n.__decorate([(0,t.rtfm)("api","HelixRaidApi")],s),jn}var as={},Xe={},V_;function uw(){if(V_)return Xe;V_=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.createScheduleSegmentUpdateBody=Xe.createScheduleSegmentModifyQuery=Xe.createScheduleSegmentBody=Xe.createScheduleSettingsUpdateQuery=Xe.createScheduleQuery=void 0;const n=U();function e(s,o){var u;return{broadcaster_id:(0,n.extractUserId)(s),start_time:o==null?void 0:o.startDate,utc_offset:(u=o==null?void 0:o.utcOffset)===null||u===void 0?void 0:u.toString()}}Xe.createScheduleQuery=e;function t(s,o){return o.vacation?{broadcaster_id:(0,n.extractUserId)(s),is_vacation_enabled:"true",vacation_start_time:o.vacation.startDate,vacation_end_time:o.vacation.endDate,timezone:o.vacation.timezone}:{broadcaster_id:(0,n.extractUserId)(s),is_vacation_enabled:"false"}}Xe.createScheduleSettingsUpdateQuery=t;function r(s){return{start_time:s.startDate,timezone:s.timezone,is_recurring:s.isRecurring,duration:s.duration,category_id:s.categoryId,title:s.title}}Xe.createScheduleSegmentBody=r;function i(s,o){return{broadcaster_id:(0,n.extractUserId)(s),id:o}}Xe.createScheduleSegmentModifyQuery=i;function a(s){return{start_time:s.startDate,timezone:s.timezone,is_canceled:s.isCanceled,duration:s.duration,category_id:s.categoryId,title:s.title}}return Xe.createScheduleSegmentUpdateBody=a,Xe}var Nn={},Fn={},z_;function Hl(){if(z_)return Fn;z_=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.HelixScheduleSegment=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get startDate(){return new Date(this[t.rawDataSymbol].start_time)}get endDate(){return new Date(this[t.rawDataSymbol].end_time)}get title(){return this[t.rawDataSymbol].title}get cancelEndDate(){return(0,e.mapNullable)(this[t.rawDataSymbol].canceled_until,a=>new Date(a))}get categoryId(){var a,s;return(s=(a=this[t.rawDataSymbol].category)===null||a===void 0?void 0:a.id)!==null&&s!==void 0?s:null}get categoryName(){var a,s;return(s=(a=this[t.rawDataSymbol].category)===null||a===void 0?void 0:a.name)!==null&&s!==void 0?s:null}async getCategory(){var a;const s=(a=this[t.rawDataSymbol].category)===null||a===void 0?void 0:a.id;return s?await this._client.games.getGameById(s):null}get isRecurring(){return this[t.rawDataSymbol].is_recurring}};return Fn.HelixScheduleSegment=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Fn.HelixScheduleSegment=r=n.__decorate([(0,t.rtfm)("api","HelixScheduleSegment","id")],r),Fn}var K_;function cw(){if(K_)return Nn;K_=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.HelixPaginatedScheduleSegmentRequest=void 0;const n=M,e=U(),t=uw(),r=qe(),i=Hl();let a=class extends r.HelixPaginatedRequest{constructor(o,u,h){super({url:"schedule",query:(0,t.createScheduleQuery)(o,h)},u,m=>new i.HelixScheduleSegment(m,u),25)}async _fetchData(o={}){var u;const h=await super._fetchData(o);return{data:(u=h.data.segments)!==null&&u!==void 0?u:[],pagination:h.pagination}}};return Nn.HelixPaginatedScheduleSegmentRequest=a,Nn.HelixPaginatedScheduleSegmentRequest=a=n.__decorate([(0,e.rtfm)("api","HelixPaginatedScheduleSegmentRequest")],a),Nn}var $n={},X_;function dw(){if(X_)return $n;X_=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.HelixSchedule=void 0;const n=M,e=W(),t=U(),r=Hl();let i=class extends t.DataObject{constructor(s,o){super(s),this._client=o}get segments(){var s,o;return(o=(s=this[t.rawDataSymbol].segments)===null||s===void 0?void 0:s.map(u=>new r.HelixScheduleSegment(u,this._client)))!==null&&o!==void 0?o:[]}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id))}get vacationStartDate(){var s;const o=(s=this[t.rawDataSymbol].vacation)===null||s===void 0?void 0:s.start_time;return o?new Date(o):null}get vacationEndDate(){var s;const o=(s=this[t.rawDataSymbol].vacation)===null||s===void 0?void 0:s.end_time;return o?new Date(o):null}};return $n.HelixSchedule=i,n.__decorate([(0,e.Enumerable)(!1)],i.prototype,"_client",void 0),$n.HelixSchedule=i=n.__decorate([(0,t.rtfm)("api","HelixSchedule","broadcasterId")],i),$n}var J_;function hw(){if(J_)return as;J_=1,Object.defineProperty(as,"__esModule",{value:!0}),as.HelixScheduleApi=void 0;const n=Re(),e=U(),t=tt(),r=uw(),i=ke(),a=ve(),s=cw(),o=dw(),u=Hl();class h extends a.BaseApi{async getSchedule(w,y){const g=await this._client.callApi({type:"helix",url:"schedule",userId:(0,e.extractUserId)(w),query:{...(0,r.createScheduleQuery)(w,y),...(0,i.createPaginationQuery)(y)}});return{data:new o.HelixSchedule(g.data,this._client),cursor:g.pagination.cursor}}getScheduleSegmentsPaginated(w,y){return new s.HelixPaginatedScheduleSegmentRequest(w,this._client,y)}async getScheduleSegmentsByIds(w,y){var g,p;return(p=(g=(await this._client.callApi({type:"helix",url:"schedule",userId:(0,e.extractUserId)(w),query:(0,t.createGetByIdsQuery)(w,y)})).data.segments)===null||g===void 0?void 0:g.map(d=>new u.HelixScheduleSegment(d,this._client)))!==null&&p!==void 0?p:[]}async getScheduleSegmentById(w,y){const g=await this.getScheduleSegmentsByIds(w,[y]);return g.length?g[0]:null}async getScheduleAsIcal(w){return await this._client.callApi({type:"helix",url:"schedule/icalendar",query:(0,n.createBroadcasterQuery)(w)})}async updateScheduleSettings(w,y){await this._client.callApi({type:"helix",url:"schedule/settings",method:"PATCH",userId:(0,e.extractUserId)(w),scopes:["channel:manage:schedule"],query:(0,r.createScheduleSettingsUpdateQuery)(w,y)})}async createScheduleSegment(w,y){const g=await this._client.callApi({type:"helix",url:"schedule/segment",method:"POST",userId:(0,e.extractUserId)(w),scopes:["channel:manage:schedule"],query:(0,n.createBroadcasterQuery)(w),jsonBody:(0,r.createScheduleSegmentBody)(y)});return new u.HelixScheduleSegment(g.data.segments[0],this._client)}async updateScheduleSegment(w,y,g){const p=await this._client.callApi({type:"helix",url:"schedule/segment",method:"PATCH",userId:(0,e.extractUserId)(w),scopes:["channel:manage:schedule"],query:(0,r.createScheduleSegmentModifyQuery)(w,y),jsonBody:(0,r.createScheduleSegmentUpdateBody)(g)});return new u.HelixScheduleSegment(p.data.segments[0],this._client)}async deleteScheduleSegment(w,y){await this._client.callApi({type:"helix",url:"schedule/segment",method:"DELETE",userId:(0,e.extractUserId)(w),scopes:["channel:manage:schedule"],query:(0,r.createScheduleSegmentModifyQuery)(w,y)})}}return as.HelixScheduleApi=h,as}var Gn={},ss={},Y_;function J0(){if(Y_)return ss;Y_=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.createSearchChannelsQuery=void 0;function n(e,t){var r;return{query:e,live_only:(r=t.liveOnly)===null||r===void 0?void 0:r.toString()}}return ss.createSearchChannelsQuery=n,ss}var Qn={},Z_;function pw(){if(Z_)return Qn;Z_=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.HelixChannelSearchResult=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get language(){return this[t.rawDataSymbol].broadcaster_language}get id(){return this[t.rawDataSymbol].id}get name(){return this[t.rawDataSymbol].broadcaster_login}get displayName(){return this[t.rawDataSymbol].display_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].id))}get gameId(){return this[t.rawDataSymbol].game_id}get gameName(){return this[t.rawDataSymbol].game_name}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get isLive(){return this[t.rawDataSymbol].is_live}get tags(){return this[t.rawDataSymbol].tags}get thumbnailUrl(){return this[t.rawDataSymbol].thumbnail_url}get startDate(){return this[t.rawDataSymbol].is_live?new Date(this[t.rawDataSymbol].started_at):null}};return Qn.HelixChannelSearchResult=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Qn.HelixChannelSearchResult=r=n.__decorate([(0,t.rtfm)("api","HelixChannelSearchResult","id")],r),Qn}var eg;function mw(){if(eg)return Gn;eg=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.HelixSearchApi=void 0;const n=M,e=U(),t=J0(),r=qe(),i=Ne(),a=ke(),s=ve(),o=pd(),u=pw();let h=class extends s.BaseApi{async searchCategories(w,y){const g=await this._client.callApi({type:"helix",url:"search/categories",query:{query:w,...(0,a.createPaginationQuery)(y)}});return(0,i.createPaginatedResult)(g,o.HelixGame,this._client)}searchCategoriesPaginated(w){return new r.HelixPaginatedRequest({url:"search/categories",query:{query:w}},this._client,y=>new o.HelixGame(y,this._client))}async searchChannels(w,y={}){const g=await this._client.callApi({type:"helix",url:"search/channels",query:{...(0,t.createSearchChannelsQuery)(w,y),...(0,a.createPaginationQuery)(y)}});return(0,i.createPaginatedResult)(g,u.HelixChannelSearchResult,this._client)}searchChannelsPaginated(w,y={}){return new r.HelixPaginatedRequest({url:"search/channels",query:(0,t.createSearchChannelsQuery)(w,y)},this._client,g=>new u.HelixChannelSearchResult(g,this._client))}};return Gn.HelixSearchApi=h,Gn.HelixSearchApi=h=n.__decorate([(0,e.rtfm)("api","HelixSearchApi")],h),Gn}var Wn={},os={},tg;function _w(){if(tg)return os;tg=1,Object.defineProperty(os,"__esModule",{value:!0}),os.StreamNotLiveError=void 0;const n=U();class e extends n.CustomError{constructor(r){super("Your stream needs to be live to do this",r)}}return os.StreamNotLiveError=e,os}var bt={},rg;function Y0(){if(rg)return bt;rg=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.createVideoQuery=bt.createStreamMarkerBody=bt.createStreamQuery=void 0;const n=U();function e(i){return{game_id:i.game,language:i.language,type:i.type,user_id:i.userId,user_login:i.userName}}bt.createStreamQuery=e;function t(i,a){return{user_id:(0,n.extractUserId)(i),description:a}}bt.createStreamMarkerBody=t;function r(i){return{video_id:i}}return bt.createVideoQuery=r,bt}var Vn={},ng;function gw(){if(ng)return Vn;ng=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.HelixStream=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].user_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}get gameId(){return this[t.rawDataSymbol].game_id}get gameName(){return this[t.rawDataSymbol].game_name}async getGame(){return this[t.rawDataSymbol].game_id?(0,t.checkRelationAssertion)(await this._client.games.getGameById(this[t.rawDataSymbol].game_id)):null}get type(){return this[t.rawDataSymbol].type}get title(){return this[t.rawDataSymbol].title}get viewers(){return this[t.rawDataSymbol].viewer_count}get startDate(){return new Date(this[t.rawDataSymbol].started_at)}get language(){return this[t.rawDataSymbol].language}get thumbnailUrl(){return this[t.rawDataSymbol].thumbnail_url}getThumbnailUrl(a,s){return this[t.rawDataSymbol].thumbnail_url.replace("{width}",a.toString()).replace("{height}",s.toString())}get tags(){return this[t.rawDataSymbol].tags}get isMature(){return this[t.rawDataSymbol].is_mature}};return Vn.HelixStream=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Vn.HelixStream=r=n.__decorate([(0,t.rtfm)("api","HelixStream","id")],r),Vn}var zn={},ig;function _d(){if(ig)return zn;ig=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.HelixStreamMarker=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get description(){return this[t.rawDataSymbol].description}get positionInSeconds(){return this[t.rawDataSymbol].position_seconds}};return zn.HelixStreamMarker=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),zn.HelixStreamMarker=r=n.__decorate([(0,t.rtfm)("api","HelixStreamMarker","id")],r),zn}var Kn={},ag;function fw(){if(ag)return Kn;ag=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.HelixStreamMarkerWithVideo=void 0;const n=M,e=U(),t=_d();let r=class extends t.HelixStreamMarker{constructor(a,s,o){super(a,o),this._videoId=s}get url(){return this[e.rawDataSymbol].URL}get videoId(){return this._videoId}async getVideo(){return(0,e.checkRelationAssertion)(await this._client.videos.getVideoById(this._videoId))}};return Kn.HelixStreamMarkerWithVideo=r,Kn.HelixStreamMarkerWithVideo=r=n.__decorate([(0,e.rtfm)("api","HelixStreamMarkerWithVideo","id")],r),Kn}var sg;function yw(){if(sg)return Wn;sg=1;var n;Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.HelixStreamApi=void 0;const e=M,t=W(),r=Re(),i=U(),a=_w(),s=tt(),o=Y0(),u=ar(),h=qe(),m=Ne(),w=ke(),y=ve(),g=gw(),p=_d(),l=fw();let d=n=class extends y.BaseApi{constructor(){super(...arguments),this._getStreamByUserIdBatcher=new u.HelixRequestBatcher({url:"streams"},"user_id","user_id",this._client,C=>new g.HelixStream(C,this._client)),this._getStreamByUserNameBatcher=new u.HelixRequestBatcher({url:"streams"},"user_login","user_login",this._client,C=>new g.HelixStream(C,this._client))}async getStreams(C={}){const R=await this._client.callApi({url:"streams",type:"helix",query:{...(0,o.createStreamQuery)(C),...(0,w.createPaginationQuery)(C)}});return(0,m.createPaginatedResult)(R,g.HelixStream,this._client)}getStreamsPaginated(C={}){return new h.HelixPaginatedRequest({url:"streams",query:(0,o.createStreamQuery)(C)},this._client,R=>new g.HelixStream(R,this._client))}async getStreamsByUserNames(C){return(await this.getStreams({userName:C.map(i.extractUserName)})).data}async getStreamByUserName(C){var R;return(R=(await this.getStreamsByUserNames([C]))[0])!==null&&R!==void 0?R:null}async getStreamByUserNameBatched(C){return await this._getStreamByUserNameBatcher.request((0,i.extractUserName)(C))}async getStreamsByUserIds(C){return(await this.getStreams({userId:C.map(i.extractUserId)})).data}async getStreamByUserId(C){const R=(0,i.extractUserId)(C),P=await this._client.callApi({url:"streams",type:"helix",userId:R,query:(0,o.createStreamQuery)({userId:R})});return(0,t.mapNullable)(P.data[0],_=>new g.HelixStream(_,this._client))}async getStreamByUserIdBatched(C){return await this._getStreamByUserIdBatcher.request((0,i.extractUserId)(C))}async getStreamMarkersForUser(C,R){var P;const _=await this._client.callApi({url:"streams/markers",type:"helix",query:{...(0,s.createUserQuery)(C),...(0,w.createPaginationQuery)(R)},userId:(0,i.extractUserId)(C),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:(0,t.flatten)(_.data.map(x=>n._mapGetStreamMarkersResult(x,this._client))),cursor:(P=_.pagination)===null||P===void 0?void 0:P.cursor}}getStreamMarkersForUserPaginated(C){return new h.HelixPaginatedRequest({url:"streams/markers",query:(0,s.createUserQuery)(C),userId:(0,i.extractUserId)(C),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,R=>n._mapGetStreamMarkersResult(R,this._client))}async getStreamMarkersForVideo(C,R,P){var _;const x=await this._client.callApi({url:"streams/markers",type:"helix",query:{...(0,o.createVideoQuery)(R),...(0,w.createPaginationQuery)(P)},userId:(0,i.extractUserId)(C),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:(0,t.flatten)(x.data.map(H=>n._mapGetStreamMarkersResult(H,this._client))),cursor:(_=x.pagination)===null||_===void 0?void 0:_.cursor}}getStreamMarkersForVideoPaginated(C,R){return new h.HelixPaginatedRequest({url:"streams/markers",query:(0,o.createVideoQuery)(R),userId:(0,i.extractUserId)(C),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,P=>n._mapGetStreamMarkersResult(P,this._client))}async createStreamMarker(C,R){try{const P=await this._client.callApi({url:"streams/markers",method:"POST",type:"helix",userId:(0,i.extractUserId)(C),scopes:["channel:manage:broadcast"],canOverrideScopedUserContext:!0,jsonBody:(0,o.createStreamMarkerBody)(C,R)});return new p.HelixStreamMarker(P.data[0],this._client)}catch(P){throw P instanceof r.HttpStatusCodeError&&P.statusCode===404?new a.StreamNotLiveError({cause:P}):P}}async getStreamKey(C){const R=(0,i.extractUserId)(C);return(await this._client.callApi({type:"helix",url:"streams/key",userId:R,scopes:["channel:read:stream_key"],query:(0,r.createBroadcasterQuery)(C)})).data[0].stream_key}async getFollowedStreams(C,R){const P=(0,i.extractUserId)(C),_=await this._client.callApi({type:"helix",url:"streams/followed",userId:P,scopes:["user:read:follows"],query:{...(0,s.createSingleKeyQuery)("user_id",P),...(0,w.createPaginationQuery)(R)}});return(0,m.createPaginatedResult)(_,g.HelixStream,this._client)}getFollowedStreamsPaginated(C){const R=(0,i.extractUserId)(C);return new h.HelixPaginatedRequest({url:"streams/followed",userId:R,scopes:["user:read:follows"],query:(0,s.createSingleKeyQuery)("user_id",R)},this._client,P=>new g.HelixStream(P,this._client))}static _mapGetStreamMarkersResult(C,R){return C.videos.reduce((P,_)=>[...P,..._.markers.map(x=>new l.HelixStreamMarkerWithVideo(x,_.video_id,R))],[])}};return Wn.HelixStreamApi=d,e.__decorate([(0,t.Enumerable)(!1)],d.prototype,"_getStreamByUserIdBatcher",void 0),e.__decorate([(0,t.Enumerable)(!1)],d.prototype,"_getStreamByUserNameBatcher",void 0),Wn.HelixStreamApi=d=n=e.__decorate([(0,i.rtfm)("api","HelixStreamApi")],d),Wn}var Xn={},ls={},og;function Z0(){if(og)return ls;og=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.createSubscriptionCheckQuery=void 0;const n=U();function e(t,r){return{broadcaster_id:(0,n.extractUserId)(t),user_id:(0,n.extractUserId)(r)}}return ls.createSubscriptionCheckQuery=e,ls}var Jn={},Yn={},Zn={},lg;function gd(){if(lg)return Zn;lg=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.HelixUserSubscription=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get broadcasterId(){return this[t.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[t.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[t.rawDataSymbol].broadcaster_name}async getBroadcaster(){return await this._client.users.getUserById(this[t.rawDataSymbol].broadcaster_id)}get isGift(){return this[t.rawDataSymbol].is_gift}get tier(){return this[t.rawDataSymbol].tier}};return Zn.HelixUserSubscription=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),Zn.HelixUserSubscription=r=n.__decorate([(0,t.rtfm)("api","HelixUserSubscription","broadcasterId")],r),Zn}var ug;function fd(){if(ug)return Yn;ug=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.HelixSubscription=void 0;const n=M,e=U(),t=gd();let r=class extends t.HelixUserSubscription{get broadcasterId(){return this[e.rawDataSymbol].broadcaster_id}get broadcasterName(){return this[e.rawDataSymbol].broadcaster_login}get broadcasterDisplayName(){return this[e.rawDataSymbol].broadcaster_name}async getBroadcaster(){return(0,e.checkRelationAssertion)(await this._client.users.getUserById(this[e.rawDataSymbol].broadcaster_id))}get gifterId(){return this[e.rawDataSymbol].is_gift?this[e.rawDataSymbol].gifter_id:null}get gifterName(){return this[e.rawDataSymbol].is_gift?this[e.rawDataSymbol].gifter_login:null}get gifterDisplayName(){return this[e.rawDataSymbol].is_gift?this[e.rawDataSymbol].gifter_name:null}async getGifter(){return this[e.rawDataSymbol].is_gift?(0,e.checkRelationAssertion)(await this._client.users.getUserById(this[e.rawDataSymbol].gifter_id)):null}get userId(){return this[e.rawDataSymbol].user_id}get userName(){return this[e.rawDataSymbol].user_login}get userDisplayName(){return this[e.rawDataSymbol].user_name}async getUser(){return(0,e.checkRelationAssertion)(await this._client.users.getUserById(this[e.rawDataSymbol].user_id))}};return Yn.HelixSubscription=r,Yn.HelixSubscription=r=n.__decorate([(0,e.rtfm)("api","HelixSubscription","userId")],r),Yn}var cg;function bw(){if(cg)return Jn;cg=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.HelixPaginatedSubscriptionsRequest=void 0;const n=M,e=Re(),t=U(),r=Xs(),i=fd();let a=class extends r.HelixPaginatedRequestWithTotal{constructor(o,u){super({url:"subscriptions",scopes:["channel:read:subscriptions"],userId:(0,t.extractUserId)(o),query:(0,e.createBroadcasterQuery)(o)},u,h=>new i.HelixSubscription(h,u))}async getPoints(){var o;return((o=this._currentData)!==null&&o!==void 0?o:await this._fetchData({query:{after:void 0}})).points}};return Jn.HelixPaginatedSubscriptionsRequest=a,Jn.HelixPaginatedSubscriptionsRequest=a=n.__decorate([(0,t.rtfm)("api","HelixPaginatedSubscriptionsRequest")],a),Jn}var dg;function vw(){if(dg)return Xn;dg=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.HelixSubscriptionApi=void 0;const n=M,e=Re(),t=U(),r=tt(),i=Z0(),a=Ne(),s=ke(),o=ve(),u=bw(),h=fd(),m=gd();let w=class extends o.BaseApi{async getSubscriptions(g,p){const l=await this._client.callApi({url:"subscriptions",scopes:["channel:read:subscriptions"],type:"helix",userId:(0,t.extractUserId)(g),query:{...(0,e.createBroadcasterQuery)(g),...(0,s.createPaginationQuery)(p)}});return{...(0,a.createPaginatedResultWithTotal)(l,h.HelixSubscription,this._client),points:l.points}}getSubscriptionsPaginated(g){return new u.HelixPaginatedSubscriptionsRequest(g,this._client)}async getSubscriptionsForUsers(g,p){return(await this._client.callApi({type:"helix",url:"subscriptions",userId:(0,t.extractUserId)(g),scopes:["channel:read:subscriptions"],query:(0,r.createChannelUsersCheckQuery)(g,p)})).data.map(d=>new h.HelixSubscription(d,this._client))}async getSubscriptionForUser(g,p){const l=await this.getSubscriptionsForUsers(g,[p]);return l.length?l[0]:null}async checkUserSubscription(g,p){try{const l=await this._client.callApi({type:"helix",url:"subscriptions/user",userId:(0,t.extractUserId)(g),scopes:["user:read:subscriptions"],query:(0,i.createSubscriptionCheckQuery)(p,g)});return new m.HelixUserSubscription(l.data[0],this._client)}catch(l){if(l instanceof e.HttpStatusCodeError&&l.statusCode===404)return null;throw l}}};return Xn.HelixSubscriptionApi=w,Xn.HelixSubscriptionApi=w=n.__decorate([(0,t.rtfm)("api","HelixSubscriptionApi")],w),Xn}var ei={},ti={},hg;function yd(){if(hg)return ti;hg=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.HelixTeam=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get name(){return this[t.rawDataSymbol].team_name}get displayName(){return this[t.rawDataSymbol].team_display_name}get backgroundImageUrl(){return this[t.rawDataSymbol].background_image_url}get bannerUrl(){return this[t.rawDataSymbol].banner}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}get updateDate(){return new Date(this[t.rawDataSymbol].updated_at)}get info(){return this[t.rawDataSymbol].info}get logoThumbnailUrl(){return this[t.rawDataSymbol].thumbnail_url}async getUserRelations(){return(await this._client.teams.getTeamById(this.id)).userRelations}};return ti.HelixTeam=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),ti.HelixTeam=r=n.__decorate([(0,t.rtfm)("api","HelixTeam","id")],r),ti}var ri={},pg;function ww(){if(pg)return ri;pg=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.HelixTeamWithUsers=void 0;const n=M,e=U(),t=ud(),r=yd();let i=class extends r.HelixTeam{get userRelations(){return this[e.rawDataSymbol].users.map(s=>new t.HelixUserRelation(s,this._client))}};return ri.HelixTeamWithUsers=i,ri.HelixTeamWithUsers=i=n.__decorate([(0,e.rtfm)("api","HelixTeamWithUsers","id")],i),ri}var mg;function xw(){if(mg)return ei;mg=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.HelixTeamApi=void 0;const n=M,e=Re(),t=U(),r=ve(),i=yd(),a=ww();let s=class extends r.BaseApi{async getTeamsForBroadcaster(u){var h,m;return(m=(h=(await this._client.callApi({type:"helix",url:"teams/channel",userId:(0,t.extractUserId)(u),query:(0,e.createBroadcasterQuery)(u)})).data)===null||h===void 0?void 0:h.map(y=>new i.HelixTeam(y,this._client)))!==null&&m!==void 0?m:[]}async getTeamById(u){try{const h=await this._client.callApi({type:"helix",url:"teams",query:{id:u}});return new a.HelixTeamWithUsers(h.data[0],this._client)}catch(h){if(h instanceof e.HttpStatusCodeError&&h.statusCode===500)return null;throw h}}async getTeamByName(u){try{const h=await this._client.callApi({type:"helix",url:"teams",query:{name:u}});return new a.HelixTeamWithUsers(h.data[0],this._client)}catch(h){if(h instanceof e.HttpStatusCodeError&&h.statusCode===404)return null;throw h}}};return ei.HelixTeamApi=s,ei.HelixTeamApi=s=n.__decorate([(0,t.rtfm)("api","HelixTeamApi")],s),ei}var ni={},Xt={},_g;function eC(){if(_g)return Xt;_g=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.createUserBlockDeleteQuery=Xt.createUserBlockCreateQuery=void 0;const n=U();function e(r,i){return{target_user_id:(0,n.extractUserId)(r),source_context:i.sourceContext,reason:i.reason}}Xt.createUserBlockCreateQuery=e;function t(r){return{target_user_id:(0,n.extractUserId)(r)}}return Xt.createUserBlockDeleteQuery=t,Xt}var us={},cs={},ds={},gg;function bd(){if(gg)return ds;gg=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.HelixBaseExtension=void 0;const n=U();class e extends n.DataObject{get id(){return this[n.rawDataSymbol].id}get version(){return this[n.rawDataSymbol].version}get name(){return this[n.rawDataSymbol].name}}return ds.HelixBaseExtension=e,ds}var fg;function Sw(){if(fg)return cs;fg=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.HelixInstalledExtension=void 0;const n=M,e=U(),t=bd();let r=class extends t.HelixBaseExtension{constructor(a,s,o){super(o),this._slotType=a,this._slotId=s}get slotType(){return this._slotType}get slotId(){return this._slotId}};return r=n.__decorate([(0,e.rtfm)("api","HelixInstalledExtension","id")],r),cs.HelixInstalledExtension=r,cs}var yg;function Cw(){if(yg)return us;yg=1,Object.defineProperty(us,"__esModule",{value:!0}),us.HelixInstalledExtensionList=void 0;const n=M,e=U(),t=Sw();let r=class extends e.DataObject{getExtensionAtSlot(a,s){const o=this[e.rawDataSymbol][a][s];return o.active?new t.HelixInstalledExtension(a,s,o):null}getExtensionsForSlotType(a){return[...Object.entries(this[e.rawDataSymbol][a])].filter(s=>s[1].active).map(([s,o])=>new t.HelixInstalledExtension(a,s,o))}getAllExtensions(){return[...Object.entries(this[e.rawDataSymbol])].flatMap(([a,s])=>[...Object.entries(s)].filter(o=>o[1].active).map(([o,u])=>new t.HelixInstalledExtension(a,o,u)))}};return r=n.__decorate([(0,e.rtfm)("api","HelixInstalledExtensionList")],r),us.HelixInstalledExtensionList=r,us}var hs={},bg;function Ew(){if(bg)return hs;bg=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.HelixUserExtension=void 0;const n=M,e=U(),t=bd();let r=class extends t.HelixBaseExtension{get canActivate(){return this[e.rawDataSymbol].can_activate}get types(){return this[e.rawDataSymbol].type}};return r=n.__decorate([(0,e.rtfm)("api","HelixUserExtension","id")],r),hs.HelixUserExtension=r,hs}var ii={},ai={},vg;function vd(){if(vg)return ai;vg=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.HelixUser=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get id(){return this[t.rawDataSymbol].id}get name(){return this[t.rawDataSymbol].login}get displayName(){return this[t.rawDataSymbol].display_name}get description(){return this[t.rawDataSymbol].description}get type(){return this[t.rawDataSymbol].type}get broadcasterType(){return this[t.rawDataSymbol].broadcaster_type}get profilePictureUrl(){return this[t.rawDataSymbol].profile_image_url}get offlinePlaceholderUrl(){return this[t.rawDataSymbol].offline_image_url}get creationDate(){return new Date(this[t.rawDataSymbol].created_at)}async getStream(){return await this._client.streams.getStreamByUserId(this)}async getFollowedChannels(){return await this._client.channels.getFollowedChannels(this)}async getFollowedChannel(a){var s;return(s=(await this._client.channels.getFollowedChannels(this,a)).data[0])!==null&&s!==void 0?s:null}async follows(a){return await this.getFollowedChannel(a)!==null}async getChannelFollowers(){return await this._client.channels.getChannelFollowers(this)}async getChannelFollower(a){var s;return(s=(await this._client.channels.getChannelFollowers(this,a)).data[0])!==null&&s!==void 0?s:null}async isFollowedBy(a){return await this.getChannelFollower(a)!==null}async getSubscriptionTo(a){return await this._client.subscriptions.checkUserSubscription(this,a)}async isSubscribedTo(a){return await this.getSubscriptionTo(a)!==null}async getSubscriber(a){return await this._client.subscriptions.getSubscriptionForUser(this,a)}async hasSubscriber(a){return await this.getSubscriber(a)!==null}};return ai.HelixUser=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),ai.HelixUser=r=n.__decorate([(0,t.rtfm)("api","HelixUser","id")],r),ai}var wg;function Hw(){if(wg)return ii;wg=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.HelixPrivilegedUser=void 0;const n=M,e=U(),t=vd();let r=class extends t.HelixUser{get email(){return this[e.rawDataSymbol].email}async setDescription(a){return await this._client.users.updateAuthenticatedUser(this,{description:a})}};return ii.HelixPrivilegedUser=r,ii.HelixPrivilegedUser=r=n.__decorate([(0,e.rtfm)("api","HelixPrivilegedUser","id")],r),ii}var si={},xg;function Aw(){if(xg)return si;xg=1,Object.defineProperty(si,"__esModule",{value:!0}),si.HelixUserBlock=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].user_id}get userName(){return this[t.rawDataSymbol].user_login}get userDisplayName(){return this[t.rawDataSymbol].display_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].user_id))}};return si.HelixUserBlock=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),si.HelixUserBlock=r=n.__decorate([(0,t.rtfm)("api","HelixUserBlock","userId")],r),si}var Sg;function Rw(){if(Sg)return ni;Sg=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.HelixUserApi=void 0;const n=M,e=W(),t=Re(),r=U(),i=tt(),a=eC(),s=ar(),o=qe(),u=Ne(),h=ke(),m=ve(),w=Cw(),y=Ew(),g=Hw(),p=vd(),l=Aw();let d=class extends m.BaseApi{constructor(){super(...arguments),this._getUserByIdBatcher=new s.HelixRequestBatcher({url:"users"},"id","id",this._client,C=>new p.HelixUser(C,this._client)),this._getUserByNameBatcher=new s.HelixRequestBatcher({url:"users"},"login","login",this._client,C=>new p.HelixUser(C,this._client))}async getUsersByIds(C){return await this._getUsers("id",C.map(r.extractUserId))}async getUsersByNames(C){return await this._getUsers("login",C.map(r.extractUserName))}async getUserById(C){const R=(0,r.extractUserId)(C),P=await this._client.callApi({type:"helix",url:"users",userId:R,query:{id:R}});return(0,e.mapNullable)(P.data[0],_=>new p.HelixUser(_,this._client))}async getUserByIdBatched(C){return await this._getUserByIdBatcher.request((0,r.extractUserId)(C))}async getUserByName(C){const R=await this._getUsers("login",[(0,r.extractUserName)(C)]);return R.length?R[0]:null}async getUserByNameBatched(C){return await this._getUserByNameBatcher.request((0,r.extractUserName)(C))}async getAuthenticatedUser(C,R=!1){var P;const _=await this._client.callApi({type:"helix",url:"users",forceType:"user",userId:(0,r.extractUserId)(C),scopes:R?["user:read:email"]:void 0});if(!(!((P=_.data)===null||P===void 0)&&P.length))throw new r.HellFreezesOverError("Could not get authenticated user");return new g.HelixPrivilegedUser(_.data[0],this._client)}async updateAuthenticatedUser(C,R){const P=await this._client.callApi({type:"helix",url:"users",method:"PUT",userId:(0,r.extractUserId)(C),scopes:["user:edit"],query:{description:R.description}});return new g.HelixPrivilegedUser(P.data[0],this._client)}async getBlocks(C,R){const P=await this._client.callApi({type:"helix",url:"users/blocks",userId:(0,r.extractUserId)(C),scopes:["user:read:blocked_users"],query:{...(0,t.createBroadcasterQuery)(C),...(0,h.createPaginationQuery)(R)}});return(0,u.createPaginatedResult)(P,l.HelixUserBlock,this._client)}getBlocksPaginated(C){return new o.HelixPaginatedRequest({url:"users/blocks",userId:(0,r.extractUserId)(C),scopes:["user:read:blocked_users"],query:(0,t.createBroadcasterQuery)(C)},this._client,R=>new l.HelixUserBlock(R,this._client))}async createBlock(C,R,P={}){await this._client.callApi({type:"helix",url:"users/blocks",method:"PUT",userId:(0,r.extractUserId)(C),scopes:["user:manage:blocked_users"],query:(0,a.createUserBlockCreateQuery)(R,P)})}async deleteBlock(C,R){await this._client.callApi({type:"helix",url:"users/blocks",method:"DELETE",userId:(0,r.extractUserId)(C),scopes:["user:manage:blocked_users"],query:(0,a.createUserBlockDeleteQuery)(R)})}async getExtensionsForAuthenticatedUser(C,R=!1){return(await this._client.callApi({type:"helix",url:"users/extensions/list",userId:(0,r.extractUserId)(C),scopes:R?["channel:manage:extensions"]:["user:read:broadcast","channel:manage:extensions"]})).data.map(_=>new y.HelixUserExtension(_))}async getActiveExtensions(C,R=!1){const P=(0,r.extractUserId)(C),_=await this._client.callApi({type:"helix",url:"users/extensions",userId:P,scopes:R?["user:read:broadcast","channel:manage:extensions"]:void 0,query:(0,i.createSingleKeyQuery)("user_id",P)});return new w.HelixInstalledExtensionList(_.data)}async updateActiveExtensionsForAuthenticatedUser(C,R){const P=await this._client.callApi({type:"helix",url:"users/extensions",method:"PUT",userId:(0,r.extractUserId)(C),scopes:["channel:manage:extensions"],jsonBody:{data:R}});return new w.HelixInstalledExtensionList(P.data)}async _getUsers(C,R){if(R.length===0)return[];const P={[C]:R};return(await this._client.callApi({type:"helix",url:"users",query:P})).data.map(x=>new p.HelixUser(x,this._client))}};return ni.HelixUserApi=d,n.__decorate([(0,e.Enumerable)(!1)],d.prototype,"_getUserByIdBatcher",void 0),n.__decorate([(0,e.Enumerable)(!1)],d.prototype,"_getUserByNameBatcher",void 0),ni.HelixUserApi=d=n.__decorate([(0,r.rtfm)("api","HelixUserApi")],d),ni}var oi={},li={},Cg;function Tw(){if(Cg)return li;Cg=1,Object.defineProperty(li,"__esModule",{value:!0}),li.HelixVideo=void 0;const n=M,e=Sl(),t=W(),r=U();let i=class extends r.DataObject{constructor(s,o){super(s),this._client=o}get id(){return this[r.rawDataSymbol].id}get userId(){return this[r.rawDataSymbol].user_id}get userName(){return this[r.rawDataSymbol].user_login}get userDisplayName(){return this[r.rawDataSymbol].user_name}async getUser(){return(0,r.checkRelationAssertion)(await this._client.users.getUserById(this[r.rawDataSymbol].user_id))}get title(){return this[r.rawDataSymbol].title}get description(){return this[r.rawDataSymbol].description}get creationDate(){return new Date(this[r.rawDataSymbol].created_at)}get publishDate(){return new Date(this[r.rawDataSymbol].published_at)}get url(){return this[r.rawDataSymbol].url}get thumbnailUrl(){return this[r.rawDataSymbol].thumbnail_url}getThumbnailUrl(s,o){return this[r.rawDataSymbol].thumbnail_url.replace("%{width}",s.toString()).replace("%{height}",o.toString())}get isPublic(){return this[r.rawDataSymbol].viewable==="public"}get views(){return this[r.rawDataSymbol].view_count}get language(){return this[r.rawDataSymbol].language}get type(){return this[r.rawDataSymbol].type}get duration(){return this[r.rawDataSymbol].duration}get durationInSeconds(){const s=this[r.rawDataSymbol].duration.match(/\d+[hms]/g);if(!s)throw new r.HellFreezesOverError(`Could not parse duration string: ${this[r.rawDataSymbol].duration}`);return s.map(o=>{const u=/(\d+)([hms])/.exec(o);if(!u)throw new r.HellFreezesOverError(`Could not parse partial duration string: ${o}`);const[,h,m]=u;return parseInt(h,10)*{h:3600,m:60,s:1}[m]}).reduce((o,u)=>o+u)}get streamId(){return this[r.rawDataSymbol].stream_id}get mutedSegmentData(){var s,o;return(o=(s=this[r.rawDataSymbol].muted_segments)===null||s===void 0?void 0:s.slice())!==null&&o!==void 0?o:[]}isMutedAt(s,o,u=!1){if(this[r.rawDataSymbol].muted_segments===null)return!1;if(o==null)return this[r.rawDataSymbol].muted_segments.some(m=>m.offset<=s&&s<=m.offset+m.duration);const h=s+o;return u?this[r.rawDataSymbol].muted_segments.some(m=>{const w=m.offset+m.duration;return s<w&&m.offset<h}):this[r.rawDataSymbol].muted_segments.some(m=>{const w=m.offset+m.duration;return m.offset<=s&&h<=w})}};return li.HelixVideo=i,n.__decorate([(0,t.Enumerable)(!1)],i.prototype,"_client",void 0),n.__decorate([(0,e.CachedGetter)()],i.prototype,"durationInSeconds",null),li.HelixVideo=i=n.__decorate([e.Cacheable,(0,r.rtfm)("api","HelixVideo","id")],i),li}var Eg;function Iw(){if(Eg)return oi;Eg=1;var n;Object.defineProperty(oi,"__esModule",{value:!0}),oi.HelixVideoApi=void 0;const e=M,t=W(),r=U(),i=ar(),a=qe(),s=Ne(),o=ke(),u=ve(),h=Tw();let m=n=class extends u.BaseApi{constructor(){super(...arguments),this._getVideoByIdBatcher=new i.HelixRequestBatcher({url:"videos"},"id","id",this._client,y=>new h.HelixVideo(y,this._client))}async getVideosByIds(y){return(await this._getVideos("id",y)).data}async getVideoById(y){const g=await this.getVideosByIds([y]);return g.length?g[0]:null}async getVideoByIdBatched(y){return await this._getVideoByIdBatcher.request(y)}async getVideosByUser(y,g={}){const p=(0,r.extractUserId)(y);return await this._getVideos("user_id",[p],g)}getVideosByUserPaginated(y,g={}){const p=(0,r.extractUserId)(y);return this._getVideosPaginated("user_id",[p],g)}async getVideosByGame(y,g={}){return await this._getVideos("game_id",[y],g)}getVideosByGamePaginated(y,g={}){return this._getVideosPaginated("game_id",[y],g)}async deleteVideosByIds(y,g){await this._client.callApi({type:"helix",url:"videos",method:"DELETE",scopes:["channel:manage:videos"],userId:(0,r.extractUserId)(y),query:{id:g}})}async _getVideos(y,g,p={}){if(!g.length)return{data:[]};const l=await this._client.callApi({type:"helix",url:"videos",userId:y==="user_id"?g[0]:void 0,query:{...n._makeVideosQuery(y,g,p),...(0,o.createPaginationQuery)(p)}});return(0,s.createPaginatedResult)(l,h.HelixVideo,this._client)}_getVideosPaginated(y,g,p={}){return new a.HelixPaginatedRequest({url:"videos",userId:y==="user_id"?g[0]:void 0,query:n._makeVideosQuery(y,g,p)},this._client,l=>new h.HelixVideo(l,this._client))}static _makeVideosQuery(y,g,p={}){const{language:l,period:d,orderBy:v,type:C}=p;return{[y]:g,language:l,period:d,sort:v,type:C}}};return oi.HelixVideoApi=m,e.__decorate([(0,t.Enumerable)(!1)],m.prototype,"_getVideoByIdBatcher",void 0),oi.HelixVideoApi=m=n=e.__decorate([(0,r.rtfm)("api","HelixVideoApi")],m),oi}var ui={},ps={},Hg;function tC(){if(Hg)return ps;Hg=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.createWhisperQuery=void 0;const n=U();function e(t,r){return{from_user_id:(0,n.extractUserId)(t),to_user_id:(0,n.extractUserId)(r)}}return ps.createWhisperQuery=e,ps}var Ag;function Pw(){if(Ag)return ui;Ag=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.HelixWhisperApi=void 0;const n=M,e=U(),t=tC(),r=ve();let i=class extends r.BaseApi{async sendWhisper(s,o,u){await this._client.callApi({type:"helix",url:"whispers",method:"POST",userId:(0,e.extractUserId)(s),scopes:["user:manage:whispers"],query:(0,t.createWhisperQuery)(s,o),jsonBody:{message:u}})}};return ui.HelixWhisperApi=i,ui.HelixWhisperApi=i=n.__decorate([(0,e.rtfm)("api","HelixWhisperApi")],i),ui}var ms={},Rg;function Dw(){if(Rg)return ms;Rg=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.ApiReportedRequest=void 0;class n{constructor(t,r,i){this._options=t,this._httpStatus=r,this._resolvedUserId=i}get options(){return this._options}get httpStatus(){return this._httpStatus}get resolvedUserId(){return this._resolvedUserId}}return ms.ApiReportedRequest=n,ms}var Tg;function wd(){if(Tg)return fr;Tg=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.BaseApiClient=void 0;const n=M,e=Sl(),t=nd(),r=W(),i=Vb(),a=Re(),s=Yb(),o=U(),u=Zb(),h=nv(),m=uv(),w=hv(),y=_v(),g=Ev(),p=Av(),l=Tv(),d=Pv(),v=Uv(),C=jv(),R=Lv(),P=Fv(),_=Qv(),x=Zv(),H=rw(),q=sw(),$=lw(),se=hw(),z=mw(),Me=yw(),ae=vw(),D=xw(),L=Rw(),ie=Iw(),pe=Pw(),xe=Dw();let J=class extends i.EventEmitter{constructor(X,Se,Ce){super(),this.onRequest=this.registerEvent(),this._config=X,this._logger=Se,this._rateLimiter=Ce}async requestScopesForUser(X,Se){await this._config.authProvider.getAccessTokenForUser(X,...Se.map(Ce=>[Ce]))}async getTokenInfo(){try{const X=await this.callApi({type:"auth",url:"validate"});return new s.TokenInfo(X)}catch(X){throw X instanceof a.HttpStatusCodeError&&X.statusCode===401?new s.InvalidTokenError({cause:X}):X}}async callApi(X){var Se;const{authProvider:Ce}=this._config;if(!((Se=X.auth)!==null&&Se!==void 0?Se:!0))return await(0,a.callTwitchApi)(X,Ce.clientId,void 0,void 0,this._config.fetchOptions);let Te=!1;if(X.forceType)switch(X.forceType){case"app":{if(!Ce.getAppAccessToken)throw new Error("Tried to make an API call that requires an app access token but your auth provider does not support that");const De=await Ce.getAppAccessToken();return await this._callApiUsingInitialToken(X,De)}case"user":{Te=!0;break}default:throw new o.HellFreezesOverError(`Unknown forced token type: ${X.forceType}`)}if(X.scopes&&(Te=!0),Te){const De=X.canOverrideScopedUserContext?this._getUserIdFromRequestContext(X.userId):X.userId;if(!De)throw new Error("Tried to make an API call with a user context but no context user ID");const nt=await Ce.getAccessTokenForUser(De,X.scopes);if(!nt)throw new Error(`Tried to make an API call with a user context for user ID ${De} but no token was found`);if((0,s.accessTokenIsExpired)(nt)&&Ce.refreshAccessTokenForUser){const pt=await Ce.refreshAccessTokenForUser(De);return await this._callApiUsingInitialToken(X,pt,!0)}return await this._callApiUsingInitialToken(X,nt)}const Fe=this._getUserIdFromRequestContext(X.userId),Pe=Fe===null?await Ce.getAnyAccessToken():await Ce.getAnyAccessToken(Fe??X.userId);if((0,s.accessTokenIsExpired)(Pe)&&Pe.userId&&Ce.refreshAccessTokenForUser){const De=await Ce.refreshAccessTokenForUser(Pe.userId);return await this._callApiUsingInitialToken(X,De,!0)}return await this._callApiUsingInitialToken(X,Pe)}get bits(){return new h.HelixBitsApi(this)}get channels(){return new m.HelixChannelApi(this)}get channelPoints(){return new w.HelixChannelPointsApi(this)}get charity(){return new y.HelixCharityApi(this)}get chat(){return new g.HelixChatApi(this)}get clips(){return new p.HelixClipApi(this)}get contentClassificationLabels(){return new l.HelixContentClassificationLabelApi(this)}get entitlements(){return new d.HelixEntitlementApi(this)}get eventSub(){return new v.HelixEventSubApi(this)}get extensions(){return new C.HelixExtensionsApi(this)}get games(){return new R.HelixGameApi(this)}get hypeTrain(){return new _.HelixHypeTrainApi(this)}get goals(){return new P.HelixGoalApi(this)}get moderation(){return new x.HelixModerationApi(this)}get polls(){return new H.HelixPollApi(this)}get predictions(){return new q.HelixPredictionApi(this)}get raids(){return new $.HelixRaidApi(this)}get schedule(){return new se.HelixScheduleApi(this)}get search(){return new z.HelixSearchApi(this)}get streams(){return new Me.HelixStreamApi(this)}get subscriptions(){return new ae.HelixSubscriptionApi(this)}get teams(){return new D.HelixTeamApi(this)}get users(){return new L.HelixUserApi(this)}get videos(){return new ie.HelixVideoApi(this)}get whispers(){return new pe.HelixWhisperApi(this)}get rateLimiterStats(){return this._rateLimiter instanceof t.ResponseBasedRateLimiter?this._rateLimiter.stats:null}get _authProvider(){return this._config.authProvider}get _mockServerPort(){return this._config.mockServerPort}get _batchDelay(){var X;return(X=this._config.batchDelay)!==null&&X!==void 0?X:0}_getUserIdFromRequestContext(X){return X}async _callApiUsingInitialToken(X,Se,Ce=!1){var rt;const{authProvider:Te}=this._config,{authorizationType:Fe}=Te;let Pe=await this._callApiInternal(X,Te.clientId,Se.accessToken,Fe);if(Pe.status===401&&!Ce){if(Se.userId){if(Te.refreshAccessTokenForUser){const De=await Te.refreshAccessTokenForUser(Se.userId);Pe=await this._callApiInternal(X,Te.clientId,De.accessToken,Fe)}}else if(Te.getAppAccessToken){const De=await Te.getAppAccessToken(!0);Pe=await this._callApiInternal(X,Te.clientId,De.accessToken,Fe)}}return this.emit(this.onRequest,new xe.ApiReportedRequest(X,Pe.status,(rt=Se.userId)!==null&&rt!==void 0?rt:null)),await(0,a.handleTwitchApiResponseError)(Pe,X),await(0,a.transformTwitchApiResponse)(Pe)}async _callApiInternal(X,Se,Ce,rt){var Te,Fe,Pe;const{fetchOptions:De,mockServerPort:nt}=this._config,pt=(Te=X.type)!==null&&Te!==void 0?Te:"helix";this._logger.debug(`Calling ${pt} API: ${(Fe=X.method)!==null&&Fe!==void 0?Fe:"GET"} ${X.url}`),this._logger.trace(`Query: ${JSON.stringify(X.query)}`),X.jsonBody&&this._logger.trace(`Request body: ${JSON.stringify(X.jsonBody)}`);const wt=u.operation({retries:3,minTimeout:500,factor:2}),{promise:Oi,resolve:Ui,reject:qi}=(0,r.promiseWithResolvers)();wt.attempt(async()=>{try{const Qe=pt==="helix"?await this._rateLimiter.request({options:X,clientId:Se,accessToken:Ce,authorizationType:rt,fetchOptions:De,mockServerPort:nt}):await(0,a.callTwitchApiRaw)(X,Se,Ce,rt,De,nt);!Qe.ok&&Qe.status>=500&&Qe.status<600&&await(0,a.handleTwitchApiResponseError)(Qe,X),Ui(Qe)}catch(Qe){if(wt.retry(Qe))return;qi(wt.mainError())}});const sr=await Oi;return this._logger.debug(`Called ${pt} API: ${(Pe=X.method)!==null&&Pe!==void 0?Pe:"GET"} ${X.url} - result: ${sr.status}`),sr}};return fr.BaseApiClient=J,n.__decorate([(0,e.CachedGetter)()],J.prototype,"bits",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"channels",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"channelPoints",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"charity",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"chat",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"clips",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"contentClassificationLabels",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"entitlements",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"eventSub",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"extensions",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"games",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"hypeTrain",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"goals",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"moderation",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"polls",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"predictions",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"raids",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"schedule",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"search",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"streams",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"subscriptions",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"teams",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"users",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"videos",null),n.__decorate([(0,e.CachedGetter)()],J.prototype,"whispers",null),fr.BaseApiClient=J=n.__decorate([e.Cacheable,(0,o.rtfm)("api","ApiClient")],J),fr}var ci={},Ig;function rC(){if(Ig)return ci;Ig=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.NoContextApiClient=void 0;const n=M,e=U(),t=wd();let r=class extends t.BaseApiClient{_getUserIdFromRequestContext(){return null}};return ci.NoContextApiClient=r,ci.NoContextApiClient=r=n.__decorate([(0,e.rtfm)("api","ApiClient")],r),ci}var di={},Pg;function nC(){if(Pg)return di;Pg=1,Object.defineProperty(di,"__esModule",{value:!0}),di.UserContextApiClient=void 0;const n=M,e=U(),t=wd();let r=class extends t.BaseApiClient{constructor(a,s,o,u){super(a,s,o),this._userId=u}_getUserIdFromRequestContext(){return this._userId}};return di.UserContextApiClient=r,di.UserContextApiClient=r=n.__decorate([(0,e.rtfm)("api","ApiClient")],r),di}var Dg;function iC(){if(Dg)return _r;Dg=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.ApiClient=void 0;const n=M,e=bl(),t=vl(),r=nd(),i=Re(),a=U(),s=Qb(),o=C0(),u=wd(),h=rC(),m=nC();let w=class extends u.BaseApiClient{constructor(g){if(!g.authProvider)throw new s.ConfigError("No auth provider given. Please supply the `authProvider` option.");const p={name:"twurple:api:rate-limiter",...g.logger};super(g,(0,t.createLogger)({name:"twurple:api:client",...g.logger}),e.isNode?new r.PartitionedRateLimiter({getPartitionKey:l=>{var d;return(d=l.userId)!==null&&d!==void 0?d:null},createChild:()=>new o.HelixRateLimiter({logger:p})}):new r.PartitionedTimeBasedRateLimiter({logger:p,bucketSize:800,timeFrame:64e3,doRequest:async({options:l,clientId:d,accessToken:v,authorizationType:C,fetchOptions:R,mockServerPort:P})=>await(0,i.callTwitchApiRaw)(l,d,v,C,R,P),getPartitionKey:l=>{var d;return(d=l.userId)!==null&&d!==void 0?d:null}}))}async asUser(g,p){const l=new m.UserContextApiClient(this._config,this._logger,this._rateLimiter,(0,a.extractUserId)(g));return await p(l)}async asIntent(g,p){if(!this._authProvider.getAccessTokenForIntent)throw new Error("Trying to use intents with an auth provider that does not support them");for(const l of g){const d=await this._authProvider.getAccessTokenForIntent(l);if(d){const v=new m.UserContextApiClient(this._config,this._logger,this._rateLimiter,d.userId);return await p(v)}}throw new Error(`Intents [${g.join(", ")}] not found in auth provider`)}async withoutUser(g){const p=new h.NoContextApiClient(this._config,this._logger,this._rateLimiter);return await g(p)}};return _r.ApiClient=w,_r.ApiClient=w=n.__decorate([(0,a.rtfm)("api","ApiClient")],w),_r}var hi={},Bg;function aC(){if(Bg)return hi;Bg=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.HelixFollow=void 0;const n=M,e=W(),t=U();let r=class extends t.DataObject{constructor(a,s){super(a),this._client=s}get userId(){return this[t.rawDataSymbol].from_id}get userName(){return this[t.rawDataSymbol].from_login}get userDisplayName(){return this[t.rawDataSymbol].from_name}async getUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].from_id))}get followedUserId(){return this[t.rawDataSymbol].to_id}get followedUserName(){return this[t.rawDataSymbol].to_login}get followedUserDisplayName(){return this[t.rawDataSymbol].to_name}async getFollowedUser(){return(0,t.checkRelationAssertion)(await this._client.users.getUserById(this[t.rawDataSymbol].to_id))}get followDate(){return new Date(this[t.rawDataSymbol].followed_at)}};return hi.HelixFollow=r,n.__decorate([(0,e.Enumerable)(!1)],r.prototype,"_client",void 0),hi.HelixFollow=r=n.__decorate([(0,t.rtfm)("api","HelixFollow")],r),hi}var Og;function sC(){return Og||(Og=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.HelixHypeTrainContribution=n.HelixHypeTrainApi=n.HelixGoal=n.HelixGoalApi=n.HelixGame=n.HelixGameApi=n.HelixExtensionTransaction=n.HelixExtensionBitsProduct=n.HelixExtensionsApi=n.HelixPaginatedEventSubSubscriptionsRequest=n.HelixEventSubSubscription=n.HelixEventSubConduitShard=n.HelixEventSubConduit=n.HelixEventSubApi=n.HelixDropsEntitlement=n.HelixEntitlementApi=n.HelixContentClassificationLabel=n.HelixContentClassificationLabelApi=n.HelixClip=n.HelixClipApi=n.HelixSentChatMessage=n.HelixPrivilegedChatSettings=n.HelixUserEmote=n.HelixEmoteFromSet=n.HelixChannelEmote=n.HelixEmote=n.HelixChatChatter=n.HelixChatSettings=n.HelixChatBadgeVersion=n.HelixChatBadgeSet=n.HelixChatApi=n.HelixCharityCampaignAmount=n.HelixCharityCampaignDonation=n.HelixCharityCampaign=n.HelixCharityApi=n.HelixCustomRewardRedemption=n.HelixCustomReward=n.HelixChannelPointsApi=n.HelixChannelReference=n.HelixFollowedChannel=n.HelixChannelFollower=n.HelixChannelEditor=n.HelixChannel=n.HelixAdSchedule=n.HelixChannelApi=n.HelixCheermoteList=n.HelixBitsLeaderboardEntry=n.HelixBitsLeaderboard=n.HelixBitsApi=n.ApiClient=void 0,n.ConfigError=n.HelixWhisperApi=n.HelixVideo=n.HelixVideoApi=n.HelixUserExtension=n.HelixInstalledExtensionList=n.HelixInstalledExtension=n.HelixBaseExtension=n.HelixUser=n.HelixPrivilegedUser=n.HelixFollow=n.HelixUserBlock=n.HelixUserApi=n.HelixTeamWithUsers=n.HelixTeam=n.HelixTeamApi=n.HelixUserSubscription=n.HelixSubscription=n.HelixSubscriptionApi=n.HelixPaginatedSubscriptionsRequest=n.HelixStreamMarkerWithVideo=n.HelixStreamMarker=n.HelixStream=n.HelixStreamApi=n.HelixChannelSearchResult=n.HelixSearchApi=n.HelixPaginatedScheduleSegmentRequest=n.HelixScheduleSegment=n.HelixSchedule=n.HelixScheduleApi=n.HelixUserRelation=n.HelixRaid=n.HelixRaidApi=n.HelixPredictor=n.HelixPredictionOutcome=n.HelixPrediction=n.HelixPredictionApi=n.HelixPollChoice=n.HelixPoll=n.HelixPollApi=n.HelixWarning=n.HelixUnbanRequest=n.HelixShieldModeStatus=n.HelixBlockedTerm=n.HelixBanUser=n.HelixModeratedChannel=n.HelixModerator=n.HelixBan=n.HelixModerationApi=n.HelixHypeTrainEvent=void 0,n.HellFreezesOverError=n.HelixExtension=n.extractUserName=n.extractUserId=n.HelixPaginatedRequestWithTotal=n.HelixPaginatedRequest=n.ApiReportedRequest=n.StreamNotLiveError=void 0;var e=iC();Object.defineProperty(n,"ApiClient",{enumerable:!0,get:function(){return e.ApiClient}});var t=nv();Object.defineProperty(n,"HelixBitsApi",{enumerable:!0,get:function(){return t.HelixBitsApi}});var r=tv();Object.defineProperty(n,"HelixBitsLeaderboard",{enumerable:!0,get:function(){return r.HelixBitsLeaderboard}});var i=ev();Object.defineProperty(n,"HelixBitsLeaderboardEntry",{enumerable:!0,get:function(){return i.HelixBitsLeaderboardEntry}});var a=rv();Object.defineProperty(n,"HelixCheermoteList",{enumerable:!0,get:function(){return a.HelixCheermoteList}});var s=uv();Object.defineProperty(n,"HelixChannelApi",{enumerable:!0,get:function(){return s.HelixChannelApi}});var o=lv();Object.defineProperty(n,"HelixAdSchedule",{enumerable:!0,get:function(){return o.HelixAdSchedule}});var u=iv();Object.defineProperty(n,"HelixChannel",{enumerable:!0,get:function(){return u.HelixChannel}});var h=av();Object.defineProperty(n,"HelixChannelEditor",{enumerable:!0,get:function(){return h.HelixChannelEditor}});var m=sv();Object.defineProperty(n,"HelixChannelFollower",{enumerable:!0,get:function(){return m.HelixChannelFollower}});var w=ov();Object.defineProperty(n,"HelixFollowedChannel",{enumerable:!0,get:function(){return w.HelixFollowedChannel}});var y=qv();Object.defineProperty(n,"HelixChannelReference",{enumerable:!0,get:function(){return y.HelixChannelReference}});var g=hv();Object.defineProperty(n,"HelixChannelPointsApi",{enumerable:!0,get:function(){return g.HelixChannelPointsApi}});var p=cv();Object.defineProperty(n,"HelixCustomReward",{enumerable:!0,get:function(){return p.HelixCustomReward}});var l=dv();Object.defineProperty(n,"HelixCustomRewardRedemption",{enumerable:!0,get:function(){return l.HelixCustomRewardRedemption}});var d=_v();Object.defineProperty(n,"HelixCharityApi",{enumerable:!0,get:function(){return d.HelixCharityApi}});var v=pv();Object.defineProperty(n,"HelixCharityCampaign",{enumerable:!0,get:function(){return v.HelixCharityCampaign}});var C=mv();Object.defineProperty(n,"HelixCharityCampaignDonation",{enumerable:!0,get:function(){return C.HelixCharityCampaignDonation}});var R=cd();Object.defineProperty(n,"HelixCharityCampaignAmount",{enumerable:!0,get:function(){return R.HelixCharityCampaignAmount}});var P=Ev();Object.defineProperty(n,"HelixChatApi",{enumerable:!0,get:function(){return P.HelixChatApi}});var _=bv();Object.defineProperty(n,"HelixChatBadgeSet",{enumerable:!0,get:function(){return _.HelixChatBadgeSet}});var x=yv();Object.defineProperty(n,"HelixChatBadgeVersion",{enumerable:!0,get:function(){return x.HelixChatBadgeVersion}});var H=dd();Object.defineProperty(n,"HelixChatSettings",{enumerable:!0,get:function(){return H.HelixChatSettings}});var q=vv();Object.defineProperty(n,"HelixChatChatter",{enumerable:!0,get:function(){return q.HelixChatChatter}});var $=El();Object.defineProperty(n,"HelixEmote",{enumerable:!0,get:function(){return $.HelixEmote}});var se=fv();Object.defineProperty(n,"HelixChannelEmote",{enumerable:!0,get:function(){return se.HelixChannelEmote}});var z=wv();Object.defineProperty(n,"HelixEmoteFromSet",{enumerable:!0,get:function(){return z.HelixEmoteFromSet}});var Me=xv();Object.defineProperty(n,"HelixUserEmote",{enumerable:!0,get:function(){return Me.HelixUserEmote}});var ae=Sv();Object.defineProperty(n,"HelixPrivilegedChatSettings",{enumerable:!0,get:function(){return ae.HelixPrivilegedChatSettings}});var D=Cv();Object.defineProperty(n,"HelixSentChatMessage",{enumerable:!0,get:function(){return D.HelixSentChatMessage}});var L=Av();Object.defineProperty(n,"HelixClipApi",{enumerable:!0,get:function(){return L.HelixClipApi}});var ie=Hv();Object.defineProperty(n,"HelixClip",{enumerable:!0,get:function(){return ie.HelixClip}});var pe=Tv();Object.defineProperty(n,"HelixContentClassificationLabelApi",{enumerable:!0,get:function(){return pe.HelixContentClassificationLabelApi}});var xe=Rv();Object.defineProperty(n,"HelixContentClassificationLabel",{enumerable:!0,get:function(){return xe.HelixContentClassificationLabel}});var J=Pv();Object.defineProperty(n,"HelixEntitlementApi",{enumerable:!0,get:function(){return J.HelixEntitlementApi}});var ht=Iv();Object.defineProperty(n,"HelixDropsEntitlement",{enumerable:!0,get:function(){return ht.HelixDropsEntitlement}});var X=Uv();Object.defineProperty(n,"HelixEventSubApi",{enumerable:!0,get:function(){return X.HelixEventSubApi}});var Se=Bv();Object.defineProperty(n,"HelixEventSubConduit",{enumerable:!0,get:function(){return Se.HelixEventSubConduit}});var Ce=Ov();Object.defineProperty(n,"HelixEventSubConduitShard",{enumerable:!0,get:function(){return Ce.HelixEventSubConduitShard}});var rt=hd();Object.defineProperty(n,"HelixEventSubSubscription",{enumerable:!0,get:function(){return rt.HelixEventSubSubscription}});var Te=Dv();Object.defineProperty(n,"HelixPaginatedEventSubSubscriptionsRequest",{enumerable:!0,get:function(){return Te.HelixPaginatedEventSubSubscriptionsRequest}});var Fe=jv();Object.defineProperty(n,"HelixExtensionsApi",{enumerable:!0,get:function(){return Fe.HelixExtensionsApi}});var Pe=kv();Object.defineProperty(n,"HelixExtensionBitsProduct",{enumerable:!0,get:function(){return Pe.HelixExtensionBitsProduct}});var De=Mv();Object.defineProperty(n,"HelixExtensionTransaction",{enumerable:!0,get:function(){return De.HelixExtensionTransaction}});var nt=Lv();Object.defineProperty(n,"HelixGameApi",{enumerable:!0,get:function(){return nt.HelixGameApi}});var pt=pd();Object.defineProperty(n,"HelixGame",{enumerable:!0,get:function(){return pt.HelixGame}});var wt=Fv();Object.defineProperty(n,"HelixGoalApi",{enumerable:!0,get:function(){return wt.HelixGoalApi}});var Oi=Nv();Object.defineProperty(n,"HelixGoal",{enumerable:!0,get:function(){return Oi.HelixGoal}});var Ui=Qv();Object.defineProperty(n,"HelixHypeTrainApi",{enumerable:!0,get:function(){return Ui.HelixHypeTrainApi}});var qi=$v();Object.defineProperty(n,"HelixHypeTrainContribution",{enumerable:!0,get:function(){return qi.HelixHypeTrainContribution}});var sr=Gv();Object.defineProperty(n,"HelixHypeTrainEvent",{enumerable:!0,get:function(){return sr.HelixHypeTrainEvent}});var Qe=Zv();Object.defineProperty(n,"HelixModerationApi",{enumerable:!0,get:function(){return Qe.HelixModerationApi}});var Js=Wv();Object.defineProperty(n,"HelixBan",{enumerable:!0,get:function(){return Js.HelixBan}});var Ys=Kv();Object.defineProperty(n,"HelixModerator",{enumerable:!0,get:function(){return Ys.HelixModerator}});var Rl=zv();Object.defineProperty(n,"HelixModeratedChannel",{enumerable:!0,get:function(){return Rl.HelixModeratedChannel}});var Tl=md();Object.defineProperty(n,"HelixBanUser",{enumerable:!0,get:function(){return Tl.HelixBanUser}});var Il=Vv();Object.defineProperty(n,"HelixBlockedTerm",{enumerable:!0,get:function(){return Il.HelixBlockedTerm}});var Pl=Xv();Object.defineProperty(n,"HelixShieldModeStatus",{enumerable:!0,get:function(){return Pl.HelixShieldModeStatus}});var Dl=Jv();Object.defineProperty(n,"HelixUnbanRequest",{enumerable:!0,get:function(){return Dl.HelixUnbanRequest}});var Zs=Yv();Object.defineProperty(n,"HelixWarning",{enumerable:!0,get:function(){return Zs.HelixWarning}});var Bl=rw();Object.defineProperty(n,"HelixPollApi",{enumerable:!0,get:function(){return Bl.HelixPollApi}});var k=tw();Object.defineProperty(n,"HelixPoll",{enumerable:!0,get:function(){return k.HelixPoll}});var oe=ew();Object.defineProperty(n,"HelixPollChoice",{enumerable:!0,get:function(){return oe.HelixPollChoice}});var eo=sw();Object.defineProperty(n,"HelixPredictionApi",{enumerable:!0,get:function(){return eo.HelixPredictionApi}});var to=aw();Object.defineProperty(n,"HelixPrediction",{enumerable:!0,get:function(){return to.HelixPrediction}});var Ol=iw();Object.defineProperty(n,"HelixPredictionOutcome",{enumerable:!0,get:function(){return Ol.HelixPredictionOutcome}});var ki=nw();Object.defineProperty(n,"HelixPredictor",{enumerable:!0,get:function(){return ki.HelixPredictor}});var ro=lw();Object.defineProperty(n,"HelixRaidApi",{enumerable:!0,get:function(){return ro.HelixRaidApi}});var no=ow();Object.defineProperty(n,"HelixRaid",{enumerable:!0,get:function(){return no.HelixRaid}});var Ul=ud();Object.defineProperty(n,"HelixUserRelation",{enumerable:!0,get:function(){return Ul.HelixUserRelation}});var ql=hw();Object.defineProperty(n,"HelixScheduleApi",{enumerable:!0,get:function(){return ql.HelixScheduleApi}});var or=dw();Object.defineProperty(n,"HelixSchedule",{enumerable:!0,get:function(){return or.HelixSchedule}});var io=Hl();Object.defineProperty(n,"HelixScheduleSegment",{enumerable:!0,get:function(){return io.HelixScheduleSegment}});var Mi=cw();Object.defineProperty(n,"HelixPaginatedScheduleSegmentRequest",{enumerable:!0,get:function(){return Mi.HelixPaginatedScheduleSegmentRequest}});var ao=mw();Object.defineProperty(n,"HelixSearchApi",{enumerable:!0,get:function(){return ao.HelixSearchApi}});var kl=pw();Object.defineProperty(n,"HelixChannelSearchResult",{enumerable:!0,get:function(){return kl.HelixChannelSearchResult}});var so=yw();Object.defineProperty(n,"HelixStreamApi",{enumerable:!0,get:function(){return so.HelixStreamApi}});var Ml=gw();Object.defineProperty(n,"HelixStream",{enumerable:!0,get:function(){return Ml.HelixStream}});var oo=_d();Object.defineProperty(n,"HelixStreamMarker",{enumerable:!0,get:function(){return oo.HelixStreamMarker}});var lo=fw();Object.defineProperty(n,"HelixStreamMarkerWithVideo",{enumerable:!0,get:function(){return lo.HelixStreamMarkerWithVideo}});var jl=bw();Object.defineProperty(n,"HelixPaginatedSubscriptionsRequest",{enumerable:!0,get:function(){return jl.HelixPaginatedSubscriptionsRequest}});var Ll=vw();Object.defineProperty(n,"HelixSubscriptionApi",{enumerable:!0,get:function(){return Ll.HelixSubscriptionApi}});var Nl=fd();Object.defineProperty(n,"HelixSubscription",{enumerable:!0,get:function(){return Nl.HelixSubscription}});var Fl=gd();Object.defineProperty(n,"HelixUserSubscription",{enumerable:!0,get:function(){return Fl.HelixUserSubscription}});var ji=xw();Object.defineProperty(n,"HelixTeamApi",{enumerable:!0,get:function(){return ji.HelixTeamApi}});var Li=yd();Object.defineProperty(n,"HelixTeam",{enumerable:!0,get:function(){return Li.HelixTeam}});var $l=ww();Object.defineProperty(n,"HelixTeamWithUsers",{enumerable:!0,get:function(){return $l.HelixTeamWithUsers}});var Gl=Rw();Object.defineProperty(n,"HelixUserApi",{enumerable:!0,get:function(){return Gl.HelixUserApi}});var Ql=Aw();Object.defineProperty(n,"HelixUserBlock",{enumerable:!0,get:function(){return Ql.HelixUserBlock}});var Wl=aC();Object.defineProperty(n,"HelixFollow",{enumerable:!0,get:function(){return Wl.HelixFollow}});var je=Hw();Object.defineProperty(n,"HelixPrivilegedUser",{enumerable:!0,get:function(){return je.HelixPrivilegedUser}});var Vl=vd();Object.defineProperty(n,"HelixUser",{enumerable:!0,get:function(){return Vl.HelixUser}});var zl=bd();Object.defineProperty(n,"HelixBaseExtension",{enumerable:!0,get:function(){return zl.HelixBaseExtension}});var Kl=Sw();Object.defineProperty(n,"HelixInstalledExtension",{enumerable:!0,get:function(){return Kl.HelixInstalledExtension}});var uo=Cw();Object.defineProperty(n,"HelixInstalledExtensionList",{enumerable:!0,get:function(){return uo.HelixInstalledExtensionList}});var Xl=Ew();Object.defineProperty(n,"HelixUserExtension",{enumerable:!0,get:function(){return Xl.HelixUserExtension}});var Ni=Iw();Object.defineProperty(n,"HelixVideoApi",{enumerable:!0,get:function(){return Ni.HelixVideoApi}});var Fi=Tw();Object.defineProperty(n,"HelixVideo",{enumerable:!0,get:function(){return Fi.HelixVideo}});var Jl=Pw();Object.defineProperty(n,"HelixWhisperApi",{enumerable:!0,get:function(){return Jl.HelixWhisperApi}});var Yl=Qb();Object.defineProperty(n,"ConfigError",{enumerable:!0,get:function(){return Yl.ConfigError}});var co=_w();Object.defineProperty(n,"StreamNotLiveError",{enumerable:!0,get:function(){return co.StreamNotLiveError}});var Ot=Dw();Object.defineProperty(n,"ApiReportedRequest",{enumerable:!0,get:function(){return Ot.ApiReportedRequest}});var lr=qe();Object.defineProperty(n,"HelixPaginatedRequest",{enumerable:!0,get:function(){return lr.HelixPaginatedRequest}});var Zl=Xs();Object.defineProperty(n,"HelixPaginatedRequestWithTotal",{enumerable:!0,get:function(){return Zl.HelixPaginatedRequestWithTotal}});var ur=U();Object.defineProperty(n,"extractUserId",{enumerable:!0,get:function(){return ur.extractUserId}}),Object.defineProperty(n,"extractUserName",{enumerable:!0,get:function(){return ur.extractUserName}}),Object.defineProperty(n,"HelixExtension",{enumerable:!0,get:function(){return ur.HelixExtension}}),Object.defineProperty(n,"HellFreezesOverError",{enumerable:!0,get:function(){return ur.HellFreezesOverError}})}(Ru)),Ru}var Wu,Ug;function oC(){if(Ug)return Wu;Ug=1;const n=Ab(),e=Rb(),t=td(),r=ir(),i=Tb(),a=Ib(),s=Pb(),o=NS(),{ApiClient:u}=sC(),{AppTokenAuthProvider:h}=Yb();class m{constructor(y,g,p){if(p&&p.apiClient)this.apiClient=p.apiClient;else if(y!==void 0&&g!==void 0){const l=new h(y,g);this.apiClient=new u({authProvider:l})}this.emotes=new t,this.channels=new t,this.ffzModifiersFetched=!1}get globalChannel(){return this.channels.get(null)}_setupChannel(y,g=null){let p=this.channels.get(y);return p||(p=new e(this,y),this.channels.set(y,p)),g&&(p.format=g),p}_getRawTwitchEmotes(y){if(!this.apiClient)throw new Error("Client id or client secret not provided.");return y?this.apiClient.chat.getChannelEmotes(y):this.apiClient.chat.getGlobalEmotes()}_cacheTwitchEmote(y,g,p=null){const l=this._setupChannel(y),d=p||new s(l,g.id,g);return this.emotes.set(d.code,d),l.emotes.set(d.code,d),d}_getRawBTTVEmotes(y){const g=y?r.BTTV.Channel(y):r.BTTV.Global;return o.get(g).then(p=>p.data instanceof Array?p.data:[...p.data.channelEmotes,...p.data.sharedEmotes])}_cacheBTTVEmote(y,g,p=null){const l=this._setupChannel(y),d=p||new n(l,g.id,g);return this.emotes.set(d.code,d),l.emotes.set(d.code,d),d}_getRawFFZEmoteSet(y){const g=r.FFZ.Set(y);return o.get(g).then(p=>p.data.set.emoticons)}_getRawFFZEmotes(y){const g=r.FFZ.Channel(y);return o.get(g).then(p=>{const l=[];for(const d of Object.keys(p.data.sets)){const v=p.data.sets[d];l.push(...v.emoticons)}return l})}_cacheFFZEmote(y,g,p=null){const l=this._setupChannel(y),d=p||new i(l,g.id,g);return this.emotes.set(d.code,d),l.emotes.set(d.code,d),d}_getRawSevenTVEmotes(y){const g=y?r.SevenTV.Channel(y):r.SevenTV.Global;return o.get(g).then(p=>p.data)}_cacheSevenTVEmote(y,g,p,l=null){const d=this._setupChannel(y,p),v=l||new a(d,g.id,g);return this.emotes.set(v.code,v),d.emotes.set(v.code,v),v}fetchTwitchEmotes(y=null){return this._getRawTwitchEmotes(y).then(g=>{for(const p of g)this._cacheTwitchEmote(y,{code:p.name,id:p.id,formats:p.formats});return this.channels.get(y).emotes.filter(p=>p.type==="twitch")})}fetchBTTVEmotes(y=null){return this._getRawBTTVEmotes(y).then(g=>{for(const p of g)this._cacheBTTVEmote(y,p);return this.channels.get(y).emotes.filter(p=>p.type==="bttv")})}async fetchFFZEmotes(y=null){return this.ffzModifiersFetched||(this.ffzModifiersFetched=!0,await this._getRawFFZEmoteSet(r.FFZ.sets.Modifiers).then(g=>{for(const p of g)this._cacheFFZEmote(null,p)})),y?this._getRawFFZEmotes(y).then(g=>{for(const p of g)this._cacheFFZEmote(y,p);return this.channels.get(y).emotes.filter(p=>p.type==="ffz")}):this._getRawFFZEmoteSet(r.FFZ.sets.Global).then(g=>{for(const p of g)this._cacheFFZEmote(y,p);return this.channels.get(y).emotes.filter(p=>p.type==="ffz")})}fetchSevenTVEmotes(y=null,g="webp"){return this._getRawSevenTVEmotes(y).then(p=>{if("emotes"in p)for(const l of p.emotes)this._cacheSevenTVEmote(y,l,g);else for(const l of p.emote_set.emotes)this._cacheSevenTVEmote(y,l,g);return this.channels.get(y).emotes.filter(l=>l.type==="7tv")})}fromObject(y){const g=[],p={bttv:{class:n,cache:(l,d,v)=>this._cacheBTTVEmote(d,null,v)},ffz:{class:i,cache:(l,d,v)=>this._cacheFFZEmote(d,null,v)},"7tv":{class:a,cache:(l,d,v)=>this._cacheSevenTVEmote(d,null,l.imageType,v)},twitch:{class:s,cache:(l,d,v)=>this._cacheTwitchEmote(d,null,v)}};for(const l of y){const{type:d}=l;if(!Object.keys(p).includes(d))throw new TypeError(`Unknown type: ${d}`);const v=p[d].class;this._setupChannel(l.channel_id,d==="7tv"?l.imageType:null);const C=v.fromObject(l,this.channels.get(l.channel_id));p[d].cache(l,l.channel_id,C),g.push(C)}return g}}return Wu=m,Wu}var Vu,qg;function lC(){if(qg)return Vu;qg=1;const n=ir();class e{constructor(r,i={}){this.fetcher=r,this.options=Object.assign({template:"",type:"markdown",match:/:(.+?):/g},i),this._validateOptions(this.options)}_validateOptions(r){if(r.template&&typeof r.template!="string")throw new TypeError("Template must be a string");if(!["markdown","html","bbcode","plain"].includes(r.type))throw new TypeError("Parse type must be one of `markdown`, `html`, `bbcode`, or `plain`");if(!(r.match instanceof RegExp)||!r.match.global)throw new TypeError("Match must be a global RegExp.")}parse(r,i=0){return r.replace(this.options.match,(s,o)=>{const u=this.fetcher.emotes.get(o);if(!u)return s;if(u.modifier)return"";const h=this.options.template||n.Templates[this.options.type],m=u.toLink(i);return h.replace(/{link}/g,m).replace(/{name}/g,u.code).replace(/{size}/g,i).replace(/{creator}/g,u.ownerName||"global")})}}return Vu=e,Vu}var zu,kg;function uC(){return kg||(kg=1,zu={BTTVEmote:Ab(),Channel:Rb(),Collection:td(),Constants:ir(),Emote:Ks(),EmoteFetcher:oC(),EmoteParser:lC(),FFZEmote:Tb(),SevenTVEmote:Ib(),TwitchEmote:Pb()}),zu}var cC=uC();const Ku=Ii(cC);class dC extends Di{}class hC extends Fc{async doRequest({options:e,clientId:t,accessToken:r,authorizationType:i,fetchOptions:a,mockServerPort:s}){return await gl(e,t,r,i,a,s)}needsToRetryAfter(e){return e.status===429&&(!e.headers.has("ratelimit-remaining")||Number(e.headers.get("ratelimit-remaining"))===0)?+e.headers.get("ratelimit-reset")*1e3-Date.now():null}getParametersFromResponse(e){const{headers:t}=e;return{limit:+t.get("ratelimit-limit"),remaining:+t.get("ratelimit-remaining"),resetsAt:+t.get("ratelimit-reset")*1e3}}}var pC=Zb();function mC(n={}){const{count:e=10,period:t="all",startDate:r,contextUserId:i}=n;return{count:e.toString(),period:t,started_at:r==null?void 0:r.toISOString(),user_id:i}}class be{constructor(e){this._client=e}_getUserContextIdWithDefault(e){var t;return(t=this._client._getUserIdFromRequestContext(e))!==null&&t!==void 0?t:e}}I([V(!1)],be.prototype,"_client",void 0);let Mo=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}get rank(){return this[c].rank}get amount(){return this[c].score}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}};I([V(!1)],Mo.prototype,"_client",void 0);Mo=I([j("api","HelixBitsLeaderboardEntry","userId")],Mo);let Ss=class extends K{constructor(e,t){super(e),this._client=t}get entries(){return this[c].data.map(e=>new Mo(e,this._client))}get totalCount(){return this[c].total}};I([V(!1)],Ss.prototype,"_client",void 0);I([ge()],Ss.prototype,"entries",null);Ss=I([zs,j("api","HelixBitsLeaderboard")],Ss);let uc=class extends K{constructor(e){super(kf(e,t=>t.prefix.toLowerCase()))}getCheermoteDisplayInfo(e,t,r){e=e.toLowerCase();const{background:i,state:a,scale:s}=r,{tiers:o}=this[c][e],u=o.sort((h,m)=>m.min_bits-h.min_bits).find(h=>h.min_bits<=t);if(!u)throw new Ci(`Cheermote "${e}" does not have an applicable tier for ${t} bits`);return{url:u.images[i][a][s],color:u.color}}getPossibleNames(){return Object.keys(this[c])}};uc=I([j("api","HelixCheermoteList")],uc);let cc=class extends be{async getLeaderboard(e,t={}){const r=await this._client.callApi({type:"helix",url:"bits/leaderboard",userId:A(e),scopes:["bits:read"],query:mC(t)});return new Ss(r,this._client)}async getCheermotes(e){const t=await this._client.callApi({type:"helix",url:"bits/cheermotes",userId:dt(e,A),query:dt(e,he)});return new uc(t.data)}};cc=I([j("api","HelixBitsApi")],cc);function _C(n){var e;return{game_id:n.gameId,broadcaster_language:n.language,title:n.title,delay:(e=n.delay)===null||e===void 0?void 0:e.toString(),tags:n.tags,content_classification_labels:n.contentClassificationLabels,is_branded_content:n.isBrandedContent}}function gC(n,e){return{broadcaster_id:A(n),length:e}}function Mg(n,e){return{broadcaster_id:A(n),user_id:A(e)}}function Xu(n,e){return{broadcaster_id:A(n),user_id:dt(e,A)}}function jg(n,e){return{broadcaster_id:dt(e,A),user_id:A(n)}}function me(n,e){return{[n]:e}}function Lg(n){return{user_id:A(n)}}function Bw(n,e){return{broadcaster_id:n,moderator_id:e}}function Al(n,e){return{broadcaster_id:A(n),id:e}}function Ow(n,e){return{broadcaster_id:A(n),user_id:e.map(A)}}let tr=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].user_id}get name(){return this[c].user_login}get displayName(){return this[c].user_name}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}};I([V(!1)],tr.prototype,"_client",void 0);tr=I([j("api","HelixUserRelation","id")],tr);class et{constructor(e,t,r,i,a,s=100){this._callOptions=e,this._queryParamName=t,this._matchKey=r,this._mapper=a,this._limitPerRequest=s,this._requestedIds=[],this._requestResolversById=new Map,this._waitTimer=null,this._client=i,this._delay=i._batchDelay}async request(e){const{promise:t,resolve:r,reject:i}=To();return this._requestedIds.includes(e)||this._requestedIds.push(e),this._requestResolversById.has(e)?this._requestResolversById.get(e).push({resolve:r,reject:i}):this._requestResolversById.set(e,[{resolve:r,reject:i}]),this._waitTimer&&(clearTimeout(this._waitTimer),this._waitTimer=null),this._requestedIds.length>=this._limitPerRequest?this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest)):this._waitTimer=setTimeout(()=>{this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest))},this._delay),await t}async _handleBatch(e){var t;try{const{data:r}=await this._doRequest(e),i=kf(r,this._matchKey);for(const a of e){for(const s of(t=this._requestResolversById.get(a))!==null&&t!==void 0?t:[])Object.prototype.hasOwnProperty.call(i,a)?s.resolve(this._mapper(i[a])):s.resolve(null);this._requestResolversById.delete(a)}}catch{await Promise.all(e.map(async i=>{var a,s;try{const o=await this._doRequest([i]);for(const u of(a=this._requestResolversById.get(i))!==null&&a!==void 0?a:[])u.resolve(o.data.length?this._mapper(o.data[0]):null)}catch(o){for(const u of(s=this._requestResolversById.get(i))!==null&&s!==void 0?s:[])u.reject(o)}this._requestResolversById.delete(i)}))}}async _doRequest(e){return await this._client.callApi({type:"helix",...this._callOptions,query:{...this._callOptions.query,[this._queryParamName]:e}})}}I([V(!1)],et.prototype,"_client",void 0);var Ju;Object.prototype.hasOwnProperty.call(Symbol,"asyncIterator")||(Symbol.asyncIterator=(Ju=Symbol.asyncIterator)!==null&&Ju!==void 0?Ju:Symbol.for("Symbol.asyncIterator"));let fe=class{constructor(e,t,r,i=100){this._callOptions=e,this._mapper=r,this._limitPerPage=i,this._isFinished=!1,this._client=t}get current(){var e;return(e=this._currentData)===null||e===void 0?void 0:e.data}async getNext(){var e;if(this._isFinished)return[];const t=await this._fetchData();return!((e=t.data)===null||e===void 0)&&e.length?this._processResult(t):(this._isFinished=!0,[])}async getAll(){this.reset();const e=[];do{const t=await this.getNext();if(!t.length)break;e.push(...t)}while(this._currentCursor);return this.reset(),e}get currentCursor(){return this._currentCursor}reset(){this._currentCursor=void 0,this._isFinished=!1,this._currentData=void 0}async*[Symbol.asyncIterator](){for(this.reset();;){const e=await this.getNext();if(!e.length)break;yield*e[Symbol.iterator]()}}async _fetchData(e={}){return await this._client.callApi({type:"helix",...this._callOptions,...e,query:{...this._callOptions.query,after:this._currentCursor,first:this._limitPerPage.toString(),...e.query}})}_processResult(e){var t;return this._currentCursor=typeof e.pagination=="string"?e.pagination:(t=e.pagination)===null||t===void 0?void 0:t.cursor,this._currentCursor===void 0&&(this._isFinished=!0),this._currentData=e,e.data.reduce((r,i)=>{const a=this._mapper(i);return Array.isArray(a)?[...r,...a]:[...r,a]},[])}};I([V(!1)],fe.prototype,"_client",void 0);fe=I([j("api","HelixPaginatedRequest")],fe);let nr=class extends fe{async getTotalCount(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).total}};nr=I([j("api","HelixPaginatedRequestWithTotal")],nr);function we(n,e,t){var r;let i;return{get data(){var a,s;return i??(i=(s=(a=n.data)===null||a===void 0?void 0:a.map(o=>new e(o,t)))!==null&&s!==void 0?s:[])},cursor:typeof n.pagination=="string"?n.pagination:(r=n.pagination)===null||r===void 0?void 0:r.cursor}}function It(n,e,t){let r;return{get data(){var i,a;return r??(r=(a=(i=n.data)===null||i===void 0?void 0:i.map(s=>new e(s,t)))!==null&&a!==void 0?a:[])},cursor:n.pagination.cursor,total:n.total}}function de({after:n,before:e,limit:t}={}){return{after:n,before:e,first:t==null?void 0:t.toString()}}let yi=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].broadcaster_id}get name(){return this[c].broadcaster_login}get displayName(){return this[c].broadcaster_name}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get language(){return this[c].broadcaster_language}get gameId(){return this[c].game_id}get gameName(){return this[c].game_name}async getGame(){return this[c].game_id?re(await this._client.games.getGameById(this[c].game_id)):null}get title(){return this[c].title}get delay(){return this[c].delay}get tags(){return this[c].tags}get contentClassificationLabels(){return this[c].content_classification_labels}get isBrandedContent(){return this[c].is_branded_content}};I([V(!1)],yi.prototype,"_client",void 0);yi=I([j("api","HelixChannel","id")],yi);let jo=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userDisplayName(){return this[c].user_name}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}get creationDate(){return new Date(this[c].created_at)}};I([V(!1)],jo.prototype,"_client",void 0);jo=I([j("api","HelixChannelEditor","userId")],jo);let Cs=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}get followDate(){return new Date(this[c].followed_at)}};I([V(!1)],Cs.prototype,"_client",void 0);Cs=I([j("api","HelixChannelFollower","userId")],Cs);let Es=class extends K{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get followDate(){return new Date(this[c].followed_at)}};I([V(!1)],Es.prototype,"_client",void 0);Es=I([j("api","HelixFollowedChannel","broadcasterId")],Es);let dc=class extends K{get snoozeCount(){return this[c].snooze_count}get snoozeRefreshDate(){return this[c].snooze_refresh_at?new Date(this[c].snooze_refresh_at*1e3):null}get nextAdDate(){return this[c].next_ad_at?new Date(this[c].next_ad_at*1e3):null}get duration(){return this[c].duration}get lastAdDate(){return this[c].last_ad_at?new Date(this[c].last_ad_at*1e3):null}get prerollFreeTime(){return this[c].preroll_free_time}};dc=I([j("api","HelixAdSchedule")],dc);let hc=class extends K{get snoozeCount(){return this[c].snooze_count}get snoozeRefreshDate(){return new Date(this[c].snooze_refresh_at*1e3)}get nextAdDate(){return new Date(this[c].next_ad_at*1e3)}};hc=I([j("api","HelixSnoozeNextAdResult")],hc);let Lo=class extends be{constructor(){super(...arguments),this._getChannelByIdBatcher=new et({url:"channels"},"broadcaster_id","broadcaster_id",this._client,e=>new yi(e,this._client))}async getChannelInfoById(e){const t=A(e),r=await this._client.callApi({type:"helix",url:"channels",userId:t,query:he(t)});return Je(r.data[0],i=>new yi(i,this._client))}async getChannelInfoByIdBatched(e){return await this._getChannelByIdBatcher.request(A(e))}async getChannelInfoByIds(e){const t=e.map(A);return(await this._client.callApi({type:"helix",url:"channels",query:me("broadcaster_id",t)})).data.map(i=>new yi(i,this._client))}async updateChannelInfo(e,t){await this._client.callApi({type:"helix",url:"channels",method:"PATCH",userId:A(e),scopes:["channel:manage:broadcast"],query:he(e),jsonBody:_C(t)})}async startChannelCommercial(e,t){await this._client.callApi({type:"helix",url:"channels/commercial",method:"POST",userId:A(e),scopes:["channel:edit:commercial"],jsonBody:gC(e,t)})}async getChannelEditors(e){return(await this._client.callApi({type:"helix",url:"channels/editors",userId:A(e),scopes:["channel:read:editors"],query:he(e)})).data.map(r=>new jo(r,this._client))}async getVips(e,t){const r=await this._client.callApi({type:"helix",url:"channels/vips",userId:A(e),scopes:["channel:read:vips","channel:manage:vips"],query:{...he(e),...de(t)}});return we(r,tr,this._client)}getVipsPaginated(e){return new fe({url:"channels/vips",userId:A(e),scopes:["channel:read:vips","channel:manage:vips"],query:he(e)},this._client,t=>new tr(t,this._client))}async checkVipForUsers(e,t){return(await this._client.callApi({type:"helix",url:"channels/vips",userId:A(e),scopes:["channel:read:vips","channel:manage:vips"],query:Ow(e,t)})).data.map(i=>new tr(i,this._client))}async checkVipForUser(e,t){const r=A(t);return(await this.checkVipForUsers(e,[r])).some(a=>a.id===r)}async addVip(e,t){await this._client.callApi({type:"helix",url:"channels/vips",method:"POST",userId:A(e),scopes:["channel:manage:vips"],query:Mg(e,t)})}async removeVip(e,t){await this._client.callApi({type:"helix",url:"channels/vips",method:"DELETE",userId:A(e),scopes:["channel:manage:vips"],query:Mg(e,t)})}async getChannelFollowerCount(e){return(await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:A(e),query:{...Xu(e),...de({limit:1})}})).total}async getChannelFollowers(e,t,r){const i=await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:A(e),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:{...Xu(e,t),...de(r)}});return It(i,Cs,this._client)}getChannelFollowersPaginated(e){return new nr({url:"channels/followers",method:"GET",userId:A(e),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:Xu(e)},this._client,t=>new Cs(t,this._client))}async getFollowedChannels(e,t,r){const i=await this._client.callApi({type:"helix",url:"channels/followed",method:"GET",userId:A(e),scopes:["user:read:follows"],query:{...jg(e,t),...de(r)}});return It(i,Es,this._client)}getFollowedChannelsPaginated(e,t){return new nr({url:"channels/followed",method:"GET",userId:A(e),scopes:["user:read:follows"],query:jg(e,t)},this._client,r=>new Es(r,this._client))}async getAdSchedule(e){const t=await this._client.callApi({type:"helix",url:"channels/ads",method:"GET",userId:A(e),scopes:["channel:read:ads"],query:he(e)});return new dc(t.data[0])}async snoozeNextAd(e){const t=await this._client.callApi({type:"helix",url:"channels/ads/schedule/snooze",method:"POST",userId:A(e),scopes:["channel:manage:ads"],query:he(e)});return new hc(t.data[0])}};I([V(!1)],Lo.prototype,"_getChannelByIdBatcher",void 0);Lo=I([j("api","HelixChannelApi")],Lo);function fC(n,e){return{broadcaster_id:A(n),only_manageable_rewards:e==null?void 0:e.toString()}}function Ng(n,e){return{broadcaster_id:A(n),id:e}}function Fg(n){var e,t,r;const i={title:n.title,cost:n.cost,prompt:n.prompt,background_color:n.backgroundColor,is_enabled:n.isEnabled,is_user_input_required:n.userInputRequired,should_redemptions_skip_request_queue:n.autoFulfill};return n.maxRedemptionsPerStream!==void 0&&(i.is_max_per_stream_enabled=!!n.maxRedemptionsPerStream,i.max_per_stream=(e=n.maxRedemptionsPerStream)!==null&&e!==void 0?e:0),n.maxRedemptionsPerUserPerStream!==void 0&&(i.is_max_per_user_per_stream_enabled=!!n.maxRedemptionsPerUserPerStream,i.max_per_user_per_stream=(t=n.maxRedemptionsPerUserPerStream)!==null&&t!==void 0?t:0),n.globalCooldown!==void 0&&(i.is_global_cooldown_enabled=!!n.globalCooldown,i.global_cooldown_seconds=(r=n.globalCooldown)!==null&&r!==void 0?r:0),"isPaused"in n&&(i.is_paused=n.isPaused),i}function $g(n,e,t){return{broadcaster_id:A(n),reward_id:e,id:t}}function Gg(n,e,t,r){return{broadcaster_id:A(n),reward_id:e,status:t,sort:r.newestFirst?"NEWEST":"OLDEST"}}let Jt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}getImageUrl(e){var t,r;const i=`url_${e}x`;return(r=(t=this[c].image)===null||t===void 0?void 0:t[i])!==null&&r!==void 0?r:this[c].default_image[i]}get backgroundColor(){return this[c].background_color}get isEnabled(){return this[c].is_enabled}get cost(){return this[c].cost}get title(){return this[c].title}get prompt(){return this[c].prompt}get userInputRequired(){return this[c].is_user_input_required}get maxRedemptionsPerStream(){return this[c].max_per_stream_setting.is_enabled?this[c].max_per_stream_setting.max_per_stream:null}get maxRedemptionsPerUserPerStream(){return this[c].max_per_user_per_stream_setting.is_enabled?this[c].max_per_user_per_stream_setting.max_per_user_per_stream:null}get globalCooldown(){return this[c].global_cooldown_setting.is_enabled?this[c].global_cooldown_setting.global_cooldown_seconds:null}get isPaused(){return this[c].is_paused}get isInStock(){return this[c].is_in_stock}get redemptionsThisStream(){return this[c].redemptions_redeemed_current_stream}get autoFulfill(){return this[c].should_redemptions_skip_request_queue}get cooldownExpiryDate(){return this[c].cooldown_expires_at?new Date(this[c].cooldown_expires_at):null}};I([V(!1)],Jt.prototype,"_client",void 0);Jt=I([j("api","HelixCustomReward","id")],Jt);let Yt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}get userInput(){return this[c].user_input}get isFulfilled(){return this[c].status==="FULFILLED"}get isCanceled(){return this[c].status==="CANCELED"}get redemptionDate(){return new Date(this[c].redeemed_at)}get rewardId(){return this[c].reward.id}get rewardTitle(){return this[c].reward.title}get rewardPrompt(){return this[c].reward.prompt}get rewardCost(){return this[c].reward.cost}async getReward(){return re(await this._client.channelPoints.getCustomRewardById(this[c].broadcaster_id,this[c].reward.id))}async updateStatus(e){return(await this._client.channelPoints.updateRedemptionStatusByIds(this[c].broadcaster_id,this[c].reward.id,[this[c].id],e))[0]}};I([V(!1)],Yt.prototype,"_client",void 0);Yt=I([j("api","HelixCustomRewardRedemption","id")],Yt);let pc=class extends be{async getCustomRewards(e,t){return(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:A(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:fC(e,t)})).data.map(i=>new Jt(i,this._client))}async getCustomRewardsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:A(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:Al(e,t)})).data.map(i=>new Jt(i,this._client)):[]}async getCustomRewardById(e,t){const r=await this.getCustomRewardsByIds(e,[t]);return r.length?r[0]:null}async createCustomReward(e,t){const r=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"POST",userId:A(e),scopes:["channel:manage:redemptions"],query:he(e),jsonBody:Fg(t)});return new Jt(r.data[0],this._client)}async updateCustomReward(e,t,r){const i=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"PATCH",userId:A(e),scopes:["channel:manage:redemptions"],query:Ng(e,t),jsonBody:Fg(r)});return new Jt(i.data[0],this._client)}async deleteCustomReward(e,t){await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"DELETE",userId:A(e),scopes:["channel:manage:redemptions"],query:Ng(e,t)})}async getRedemptionsByIds(e,t,r){return r.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:A(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:$g(e,t,r)})).data.map(a=>new Yt(a,this._client)):[]}async getRedemptionById(e,t,r){const i=await this.getRedemptionsByIds(e,t,[r]);return i.length?i[0]:null}async getRedemptionsForBroadcaster(e,t,r,i){const a=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:A(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:{...Gg(e,t,r,i),...de(i)}});return we(a,Yt,this._client)}getRedemptionsForBroadcasterPaginated(e,t,r,i){return new fe({url:"channel_points/custom_rewards/redemptions",userId:A(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:Gg(e,t,r,i)},this._client,a=>new Yt(a,this._client),50)}async updateRedemptionStatusByIds(e,t,r,i){return r.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",method:"PATCH",userId:A(e),scopes:["channel:manage:redemptions"],query:$g(e,t,r),jsonBody:{status:i}})).data.map(s=>new Yt(s,this._client)):[]}};pc=I([j("api","HelixChannelPointsApi")],pc);let Hs=class extends K{get value(){return this[c].value}get decimalPlaces(){return this[c].decimal_places}get localizedValue(){return this.value/10**this.decimalPlaces}get currency(){return this[c].currency}};Hs=I([j("api","HelixCharityCampaignAmount")],Hs);let No=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get charityName(){return this[c].charity_name}get charityDescription(){return this[c].charity_description}get charityLogo(){return this[c].charity_logo}get charityWebsite(){return this[c].charity_website}get currentAmount(){return new Hs(this[c].current_amount)}get targetAmount(){return new Hs(this[c].target_amount)}};I([V(!1)],No.prototype,"_client",void 0);No=I([j("api","HelixCharityCampaign","id")],No);let Fo=class extends K{constructor(e,t){super(e),this._client=t}get campaignId(){return this[c].campaign_id}get donorId(){return this[c].user_id}get donorName(){return this[c].user_login}get donorDisplayName(){return this[c].user_name}async getDonor(){return re(await this._client.users.getUserById(this[c].user_id))}get amount(){return new Hs(this[c].amount)}};I([V(!1)],Fo.prototype,"_client",void 0);Fo=I([j("api","HelixCharityCampaignDonation")],Fo);let mc=class extends be{async getCharityCampaign(e){const t=await this._client.callApi({type:"helix",url:"charity/campaigns",method:"GET",userId:A(e),scopes:["channel:read:charity"],query:he(e)});return new No(t.data[0],this._client)}async getCharityCampaignDonations(e,t){const r=await this._client.callApi({type:"helix",url:"charity/donations",userId:A(e),scopes:["channel:read:charity"],query:{...he(e),...de(t)}});return we(r,Fo,this._client)}};mc=I([j("api","HelixCharityApi")],mc);function yC(n){return{slow_mode:n.slowModeEnabled,slow_mode_wait_time:n.slowModeDelay,follower_mode:n.followerOnlyModeEnabled,follower_mode_duration:n.followerOnlyModeDelay,subscriber_mode:n.subscriberOnlyModeEnabled,emote_mode:n.emoteOnlyModeEnabled,unique_chat_mode:n.uniqueChatModeEnabled,non_moderator_chat_delay:n.nonModeratorChatDelayEnabled,non_moderator_chat_delay_duration:n.nonModeratorChatDelay}}function bC(n,e){return{user_id:A(n),color:e}}function vC(n,e,t){return{from_broadcaster_id:A(n),to_broadcaster_id:A(e),moderator_id:t}}function Qg(n,e){return{broadcaster_id:n,sender_id:e}}function Wg(n,e){return{message:n,reply_parent_message_id:e==null?void 0:e.replyParentMessageId}}class Uw extends K{get id(){return this[c].id}get name(){return this[c].name}get formats(){return this[c].format}get scales(){return this[c].scale}get themeModes(){return this[c].theme_mode}getStaticImageUrl(e="1.0",t="light"){return this[c].format.includes("static")&&this[c].scale.includes(e)?this.getFormattedImageUrl(e,"static",t):null}getAnimatedImageUrl(e="1.0",t="light"){return this[c].format.includes("animated")&&this[c].scale.includes(e)?this.getFormattedImageUrl(e,"animated",t):null}getFormattedImageUrl(e="1.0",t="static",r="light"){return`https://static-cdn.jtvnw.net/emoticons/v2/${this[c].id}/${t}/${r}/${e}`}}let As=class extends Uw{getImageUrl(e){return this[c].images[`url_${e}x`]}};As=I([j("api","HelixEmote","id")],As);let $o=class extends As{constructor(e,t){super(e),this._client=t}get tier(){return this[c].tier||null}get type(){return this[c].emote_type}get emoteSetId(){return this[c].emote_set_id}async getAllEmotesFromSet(){return await this._client.chat.getEmotesFromSets([this[c].emote_set_id])}};I([V(!1)],$o.prototype,"_client",void 0);$o=I([j("api","HelixChannelEmote","id")],$o);let _c=class extends K{get id(){return this[c].id}getImageUrl(e){return this[c][`image_url_${e}x`]}get title(){return this[c].title}get description(){return this[c].description}get clickAction(){return this[c].click_action}get clickUrl(){return this[c].click_url}};_c=I([j("api","HelixChatBadgeVersion","id")],_c);let Rs=class extends K{get id(){return this[c].set_id}get versions(){return this[c].versions.map(e=>new _c(e))}getVersion(e){var t;return(t=this.versions.find(r=>r.id===e))!==null&&t!==void 0?t:null}};I([ge()],Rs.prototype,"versions",null);Rs=I([zs,j("api","HelixChatBadgeSet","id")],Rs);let Ts=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}};I([V(!1)],Ts.prototype,"_client",void 0);Ts=I([j("api","HelixChatChatter")],Ts);let Go=class extends K{get broadcasterId(){return this[c].broadcaster_id}get slowModeEnabled(){return this[c].slow_mode}get slowModeDelay(){return this[c].slow_mode_wait_time}get followerOnlyModeEnabled(){return this[c].follower_mode}get followerOnlyModeDelay(){return this[c].follower_mode_duration}get subscriberOnlyModeEnabled(){return this[c].subscriber_mode}get emoteOnlyModeEnabled(){return this[c].emote_mode}get uniqueChatModeEnabled(){return this[c].unique_chat_mode}};Go=I([j("api","HelixChatSettings","broadcasterId")],Go);let Qo=class extends As{constructor(e,t){super(e),this._client=t}get type(){return this[c].emote_type}get emoteSetId(){return this[c].emote_set_id}get ownerId(){switch(this[c].owner_id){case"0":case"twitch":return null;default:return this[c].owner_id}}async getOwner(){switch(this[c].owner_id){case"0":case"twitch":return null;default:return await this._client.users.getUserById(this[c].owner_id)}}};I([V(!1)],Qo.prototype,"_client",void 0);Qo=I([j("api","HelixEmoteFromSet","id")],Qo);let Is=class extends Uw{constructor(e,t){super(e),this._client=t}get type(){return this[c].emote_type}get emoteSetId(){return this[c].emote_set_id||null}get ownerId(){return this[c].owner_id||null}async getAllEmotesFromSet(){return this[c].emote_set_id?await this._client.chat.getEmotesFromSets([this[c].emote_set_id]):null}async getOwner(){return this[c].owner_id?await this._client.users.getUserById(this[c].owner_id):null}};I([V(!1)],Is.prototype,"_client",void 0);Is=I([j("api","HelixUserEmote","id")],Is);let Wo=class extends Go{get nonModeratorChatDelayEnabled(){return this[c].non_moderator_chat_delay}get nonModeratorChatDelay(){return this[c].non_moderator_chat_delay_duration}};Wo=I([j("api","HelixPrivilegedChatSettings","broadcasterId")],Wo);let Vo=class extends K{get id(){return this[c].message_id}get isSent(){return this[c].is_sent}get dropReasonCode(){var e;return(e=this[c].drop_reason)===null||e===void 0?void 0:e.code}get dropReasonMessage(){var e;return(e=this[c].drop_reason)===null||e===void 0?void 0:e.message}};Vo=I([j("api","HelixSentChatMessage","id")],Vo);let gc=class extends be{async getChatters(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"chat/chatters",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:{...this._createModeratorActionQuery(r),...de(t)}});return It(i,Ts,this._client)}getChattersPaginated(e){const t=A(e);return new nr({url:"chat/chatters",userId:t,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:this._createModeratorActionQuery(t)},this._client,r=>new Ts(r,this._client),1e3)}async getGlobalBadges(){return(await this._client.callApi({type:"helix",url:"chat/badges/global"})).data.map(t=>new Rs(t))}async getChannelBadges(e){return(await this._client.callApi({type:"helix",url:"chat/badges",userId:A(e),query:he(e)})).data.map(r=>new Rs(r))}async getGlobalEmotes(){return(await this._client.callApi({type:"helix",url:"chat/emotes/global"})).data.map(t=>new As(t))}async getChannelEmotes(e){return(await this._client.callApi({type:"helix",url:"chat/emotes",userId:A(e),query:he(e)})).data.map(r=>new $o(r,this._client))}async getEmotesFromSets(e){return(await this._client.callApi({type:"helix",url:"chat/emotes/set",query:me("emote_set_id",e)})).data.map(r=>new Qo(r,this._client))}async getUserEmotes(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"chat/emotes/user",userId:A(e),scopes:["user:read:emotes"],query:{...me("user_id",r),...me("broadcasterId",t!=null&&t.broadcaster?A(t.broadcaster):void 0),...de(t)}});return we(i,Is,this._client)}getUserEmotesPaginated(e,t){const r=A(e);return new fe({url:"chat/emotes/user",userId:r,scopes:["user:read:emotes"],query:{...me("user_id",r),...me("broadcasterId",t?A(t):void 0)}},this._client,i=>new Is(i,this._client))}async getSettings(e){const t=await this._client.callApi({type:"helix",url:"chat/settings",userId:A(e),query:he(e)});return new Go(t.data[0])}async getSettingsPrivileged(e){const t=A(e),r=await this._client.callApi({type:"helix",url:"chat/settings",userId:t,canOverrideScopedUserContext:!0,scopes:["moderator:read:chat_settings"],query:this._createModeratorActionQuery(t)});return new Wo(r.data[0])}async updateSettings(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"chat/settings",method:"PATCH",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:chat_settings"],query:this._createModeratorActionQuery(r),jsonBody:yC(t)});return new Wo(i.data[0])}async sendChatMessage(e,t,r){const i=A(e),a=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",userId:i,canOverrideScopedUserContext:!0,scopes:["user:write:chat"],query:Qg(i,this._getUserContextIdWithDefault(i)),jsonBody:Wg(t,r)});return new Vo(a.data[0])}async sendChatMessageAsApp(e,t,r,i){const a=A(e),s=A(t),o=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",forceType:"app",query:Qg(s,a),jsonBody:Wg(r,i)});return new Vo(o.data[0])}async sendAnnouncement(e,t){const r=A(e);await this._client.callApi({type:"helix",url:"chat/announcements",method:"POST",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:announcements"],query:this._createModeratorActionQuery(r),jsonBody:{message:t.message,color:t.color}})}async getColorsForUsers(e){const t=await this._client.callApi({type:"helix",url:"chat/color",query:me("user_id",e.map(A))});return new Map(t.data.map(r=>[r.user_id,r.color||null]))}async getColorForUser(e){const t=await this._client.callApi({type:"helix",url:"chat/color",userId:A(e),query:me("user_id",A(e))});if(t.data.length)return t.data[0].color||null}async setColorForUser(e,t){await this._client.callApi({type:"helix",url:"chat/color",method:"PUT",userId:A(e),scopes:["user:manage:chat_color"],query:bC(e,t)})}async shoutoutUser(e,t){const r=A(e);await this._client.callApi({type:"helix",url:"chat/shoutouts",method:"POST",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:shoutouts"],query:vC(e,t,this._getUserContextIdWithDefault(r))})}_createModeratorActionQuery(e){return Bw(e,this._getUserContextIdWithDefault(e))}};gc=I([j("api","HelixChatApi")],gc);function wC(n,e){return{broadcaster_id:A(n),has_delay:e.toString()}}function Vg(n){const{filterType:e,ids:t,startDate:r,endDate:i,isFeatured:a}=n;return{[e]:t,started_at:r,ended_at:i,is_featured:a==null?void 0:a.toString()}}let bi=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get url(){return this[c].url}get embedUrl(){return this[c].embed_url}get broadcasterId(){return this[c].broadcaster_id}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get creatorId(){return this[c].creator_id}get creatorDisplayName(){return this[c].creator_name}async getCreator(){return re(await this._client.users.getUserById(this[c].creator_id))}get videoId(){return this[c].video_id}async getVideo(){return re(await this._client.videos.getVideoById(this[c].video_id))}get gameId(){return this[c].game_id}async getGame(){return this[c].game_id?re(await this._client.games.getGameById(this[c].game_id)):null}get language(){return this[c].language}get title(){return this[c].title}get views(){return this[c].view_count}get creationDate(){return new Date(this[c].created_at)}get thumbnailUrl(){return this[c].thumbnail_url}get duration(){return this[c].duration}get vodOffset(){return this[c].vod_offset}get isFeatured(){return this[c].is_featured}};I([V(!1)],bi.prototype,"_client",void 0);bi=I([j("api","HelixClip","id")],bi);let zo=class extends be{constructor(){super(...arguments),this._getClipByIdBatcher=new et({url:"clips"},"id","id",this._client,e=>new bi(e,this._client))}async getClipsForBroadcaster(e,t={}){return await this._getClips({...t,filterType:"broadcaster_id",ids:A(e),userId:A(e)})}getClipsForBroadcasterPaginated(e,t={}){return this._getClipsPaginated({...t,filterType:"broadcaster_id",ids:A(e),userId:A(e)})}async getClipsForGame(e,t={}){return await this._getClips({...t,filterType:"game_id",ids:e})}getClipsForGamePaginated(e,t={}){return this._getClipsPaginated({...t,filterType:"game_id",ids:e})}async getClipsByIds(e){return(await this._getClips({filterType:"id",ids:e})).data}async getClipById(e){const t=await this.getClipsByIds([e]);return t.length?t[0]:null}async getClipByIdBatched(e){return await this._getClipByIdBatcher.request(e)}async createClip(e){const{channel:t,createAfterDelay:r=!1}=e;return(await this._client.callApi({type:"helix",url:"clips",method:"POST",userId:A(t),scopes:["clips:edit"],canOverrideScopedUserContext:!0,query:wC(t,r)})).data[0].id}async _getClips(e){if(!e.ids.length)return{data:[]};const t=await this._client.callApi({type:"helix",url:"clips",userId:e.userId,query:{...Vg(e),...de(e)}});return we(t,bi,this._client)}_getClipsPaginated(e){return new fe({url:"clips",userId:e.userId,query:Vg(e)},this._client,t=>new bi(t,this._client))}};I([V(!1)],zo.prototype,"_getClipByIdBatcher",void 0);zo=I([j("api","HelixClipApi")],zo);class xC extends K{get id(){return this[c].id}get name(){return this[c].name}get description(){return this[c].description}}let fc=class extends be{async getAll(e){return(await this._client.callApi({url:"content_classification_labels",query:{locale:e}})).data.map(r=>new xC(r))}};fc=I([j("api","HelixContentClassificationLabelApi")],fc);function zg(n,e){return{user_id:e?dt(n.user,A):void 0,game_id:n.gameId,fulfillment_status:n.fulfillmentStatus}}function SC(n,e){return{fulfillment_status:e,entitlement_ids:n}}let Zt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get rewardId(){return this[c].benefit_id}get grantDate(){return new Date(this[c].timestamp)}get userId(){return this[c].user_id}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}get gameId(){return this[c].game_id}async getGame(){return re(await this._client.games.getGameById(this[c].game_id))}get fulfillmentStatus(){return this[c].fulfillment_status}get updateDate(){return new Date(this[c].last_updated)}};I([V(!1)],Zt.prototype,"_client",void 0);Zt=I([j("api","HelixDropsEntitlement")],Zt);let Ko=class extends be{constructor(){super(...arguments),this._getDropsEntitlementByIdBatcher=new et({url:"entitlements/drops"},"id","id",this._client,e=>new Zt(e,this._client))}async getDropsEntitlements(e,t=!1){const r=await this._client.callApi({type:"helix",url:"entitlements/drops",userId:dt(e.user,A),forceType:e.user&&t?"app":void 0,query:{...zg(e,t),...de(e)}});return we(r,Zt,this._client)}getDropsEntitlementsPaginated(e,t=!1){return new fe({url:"entitlements/drops",userId:dt(e.user,A),forceType:e.user&&t?"app":void 0,query:zg(e,t)},this._client,r=>new Zt(r,this._client))}async getDropsEntitlementsByIds(e){return(await this._client.callApi({type:"helix",url:"entitlements/drops",query:{id:e}})).data.map(r=>new Zt(r,this._client))}async getDropsEntitlementById(e){var t;return(t=(await this.getDropsEntitlementsByIds([e]))[0])!==null&&t!==void 0?t:null}async getDropsEntitlementByIdBatched(e){return await this._getDropsEntitlementByIdBatcher.request(e)}async updateDropsEntitlements(e,t){const r=await this._client.callApi({type:"helix",url:"entitlements/drops",method:"PATCH",jsonBody:SC(e,t)});return new Map(r.data.flatMap(i=>i.ids.map(a=>[a,i.status])))}};I([V(!1)],Ko.prototype,"_getDropsEntitlementByIdBatcher",void 0);Ko=I([j("api","HelixEntitlementApi")],Ko);function ce(n){return{broadcaster_user_id:A(n)}}function So(n,e){return{broadcaster_user_id:A(n),reward_id:e}}function $e(n,e){return{broadcaster_user_id:n,moderator_user_id:e}}function At(n,e){return{broadcaster_user_id:n,user_id:e}}function CC(n){return{organization_id:n.organizationId,category_id:n.categoryId,campaign_id:n.campaignId}}function Kg(n,e){return{conduit_id:n,status:e}}function EC(n,e){return{id:n,shard_count:e.toString()}}function HC(n,e){return{conduit_id:n,shards:e}}let vt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get status(){return this[c].status}get type(){return this[c].type}get cost(){return this[c].cost}get condition(){return this[c].condition}get creationDate(){return new Date(this[c].created_at)}get transportMethod(){return this[c].transport.method}async unsubscribe(){await this._client.eventSub.deleteSubscription(this[c].id)}get _transport(){return this[c].transport}set _status(e){this[c].status=e}};I([V(!1)],vt.prototype,"_client",void 0);vt=I([j("api","HelixEventSubSubscription","id")],vt);let gi=class extends nr{constructor(e,t,r){super({url:"eventsub/subscriptions",userId:t,query:e},r,i=>new vt(i,r))}async getTotalCost(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).total_cost}async getMaxTotalCost(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).max_total_cost}};gi=I([j("api","HelixPaginatedEventSubSubscriptionsRequest")],gi);let vi=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get shardCount(){return this[c].shard_count}async update(e){return await this._client.eventSub.updateConduit(this[c].id,e)}async delete(){await this._client.eventSub.deleteConduit(this[c].id)}async getShards(){return await this._client.eventSub.getConduitShards(this[c].id)}};I([V(!1)],vi.prototype,"_client",void 0);vi=I([j("api","HelixEventSubConduit")],vi);let vs=class extends K{get id(){return this[c].id}get status(){return this[c].status}get transportMethod(){return this[c].transport.method}};vs=I([j("api","HelixEventSubConduitShard")],vs);let yc=class extends be{async getSubscriptions(e){const t=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:de(e)});return{...It(t,vt,this._client),totalCost:t.total_cost,maxTotalCost:t.max_total_cost}}getSubscriptionsPaginated(){return new gi({},void 0,this._client)}async getSubscriptionsForStatus(e,t){const r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...de(t),status:e}});return{...It(r,vt,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForStatusPaginated(e){return new gi({status:e},void 0,this._client)}async getSubscriptionsForType(e,t){const r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...de(t),type:e}});return{...It(r,vt,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForTypePaginated(e){return new gi({type:e},void 0,this._client)}async getSubscriptionsForUser(e,t){const r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",userId:A(e),query:{...me("user_id",A(e)),...de(t)}});return{...It(r,vt,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForUserPaginated(e){const t=A(e);return new gi(me("user_id",t),t,this._client)}async createSubscription(e,t,r,i,a,s,o,u){const h=i.method==="webhook"||i.method==="conduit",m=h?void 0:s;if(!h&&!a)throw new Error(`Transport ${i.method} can only handle subscriptions with user context`);const w={type:e,version:t,condition:r,transport:i};u&&(w.is_batching_enabled=!0);const y=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"POST",scopes:m,userId:dt(a,A),canOverrideScopedUserContext:o,forceType:h?"app":"user",jsonBody:w});return new vt(y.data[0],this._client)}async deleteSubscription(e){await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"DELETE",query:{id:e}})}async deleteAllSubscriptions(){await this._deleteSubscriptionsWithCondition()}async deleteBrokenSubscriptions(){await this._deleteSubscriptionsWithCondition(e=>e.status!=="enabled"&&e.status!=="webhook_callback_verification_pending")}async subscribeToStreamOnlineEvents(e,t){return await this.createSubscription("stream.online","1",ce(e),t,e)}async subscribeToStreamOfflineEvents(e,t){return await this.createSubscription("stream.offline","1",ce(e),t,e)}async subscribeToChannelUpdateEvents(e,t){return await this.createSubscription("channel.update","1",ce(e),t,e)}async subscribeToChannelFollowEvents(e,t){const r=A(e);return await this.createSubscription("channel.follow","2",$e(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:followers"],!0)}async subscribeToChannelSubscriptionEvents(e,t){return await this.createSubscription("channel.subscribe","1",ce(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionGiftEvents(e,t){return await this.createSubscription("channel.subscription.gift","1",ce(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionMessageEvents(e,t){return await this.createSubscription("channel.subscription.message","1",ce(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionEndEvents(e,t){return await this.createSubscription("channel.subscription.end","1",ce(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelCheerEvents(e,t){return await this.createSubscription("channel.cheer","1",ce(e),t,e,["bits:read"])}async subscribeToChannelCharityCampaignStartEvents(e,t){return await this.createSubscription("channel.charity_campaign.start","1",ce(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityCampaignStopEvents(e,t){return await this.createSubscription("channel.charity_campaign.stop","1",ce(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityDonationEvents(e,t){return await this.createSubscription("channel.charity_campaign.donate","1",ce(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityCampaignProgressEvents(e,t){return await this.createSubscription("channel.charity_campaign.progress","1",ce(e),t,e,["channel:read:charity"])}async subscribeToChannelBanEvents(e,t){return await this.createSubscription("channel.ban","1",ce(e),t,e,["channel:moderate"])}async subscribeToChannelUnbanEvents(e,t){return await this.createSubscription("channel.unban","1",ce(e),t,e,["channel:moderate"])}async subscribeToChannelShieldModeBeginEvents(e,t){const r=A(e);return await this.createSubscription("channel.shield_mode.begin","1",$e(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelShieldModeEndEvents(e,t){const r=A(e);return await this.createSubscription("channel.shield_mode.end","1",$e(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelModeratorAddEvents(e,t){return await this.createSubscription("channel.moderator.add","1",ce(e),t,e,["moderation:read"])}async subscribeToChannelModeratorRemoveEvents(e,t){return await this.createSubscription("channel.moderator.remove","1",ce(e),t,e,["moderation:read"])}async subscribeToChannelRaidEventsFrom(e,t){return await this.createSubscription("channel.raid","1",me("from_broadcaster_user_id",A(e)),t,e)}async subscribeToChannelRaidEventsTo(e,t){return await this.createSubscription("channel.raid","1",me("to_broadcaster_user_id",A(e)),t,e)}async subscribeToChannelRewardAddEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.add","1",ce(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.update","1",ce(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward.update","1",So(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",ce(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",So(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",ce(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",So(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",ce(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",So(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelAutomaticRewardRedemptionAddEvents(e,t){return await this.createSubscription("channel.channel_points_automatic_reward_redemption.add","1",ce(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelPollBeginEvents(e,t){return await this.createSubscription("channel.poll.begin","1",ce(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollProgressEvents(e,t){return await this.createSubscription("channel.poll.progress","1",ce(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollEndEvents(e,t){return await this.createSubscription("channel.poll.end","1",ce(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPredictionBeginEvents(e,t){return await this.createSubscription("channel.prediction.begin","1",ce(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionProgressEvents(e,t){return await this.createSubscription("channel.prediction.progress","1",ce(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionLockEvents(e,t){return await this.createSubscription("channel.prediction.lock","1",ce(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionEndEvents(e,t){return await this.createSubscription("channel.prediction.end","1",ce(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelGoalBeginEvents(e,t){return await this.createSubscription("channel.goal.begin","1",ce(e),t,e,["channel:read:goals"])}async subscribeToChannelGoalProgressEvents(e,t){return await this.createSubscription("channel.goal.progress","1",ce(e),t,e,["channel:read:goals"])}async subscribeToChannelGoalEndEvents(e,t){return await this.createSubscription("channel.goal.end","1",ce(e),t,e,["channel:read:goals"])}async subscribeToChannelHypeTrainBeginEvents(e,t){return await this.createSubscription("channel.hype_train.begin","1",ce(e),t,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainProgressEvents(e,t){return await this.createSubscription("channel.hype_train.progress","1",ce(e),t,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainEndEvents(e,t){return await this.createSubscription("channel.hype_train.end","1",ce(e),t,e,["channel:read:hype_train"])}async subscribeToChannelShoutoutCreateEvents(e,t){const r=A(e);return await this.createSubscription("channel.shoutout.create","1",$e(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelShoutoutReceiveEvents(e,t){const r=A(e);return await this.createSubscription("channel.shoutout.receive","1",$e(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelAdBreakBeginEvents(e,t){return await this.createSubscription("channel.ad_break.begin","1",ce(e),t,e,["channel:read:ads"])}async subscribeToChannelChatClearEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.clear","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatClearUserMessagesEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.clear_user_messages","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatMessageDeleteEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.message_delete","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatNotificationEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.notification","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatMessageEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.message","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatSettingsUpdateEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat_settings.update","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelUnbanRequestCreateEvents(e,t){const r=A(e);return await this.createSubscription("channel.unban_request.create","1",$e(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelUnbanRequestResolveEvents(e,t){const r=A(e);return await this.createSubscription("channel.unban_request.resolve","1",$e(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelModerateEvents(e,t){const r=A(e);return await this.createSubscription("channel.moderate","2",$e(r,this._getUserContextIdWithDefault(r)),t,e,[],!0)}async subscribeToChannelWarningAcknowledgeEvents(e,t){const r=A(e);return await this.createSubscription("channel.warning.acknowledge","1",$e(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelWarningSendEvents(e,t){const r=A(e);return await this.createSubscription("channel.warning.send","1",$e(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelVipAddEvents(e,t){return await this.createSubscription("channel.vip.add","1",ce(e),t,e,["channel:read:vips","channel:manage:vips"])}async subscribeToChannelVipRemoveEvents(e,t){return await this.createSubscription("channel.vip.remove","1",ce(e),t,e,["channel:read:vips","channel:manage:vips"])}async subscribeToExtensionBitsTransactionCreateEvents(e,t){return await this.createSubscription("extension.bits_transaction.create","1",me("extension_client_id",e),t)}async subscribeToUserAuthorizationGrantEvents(e,t){return await this.createSubscription("user.authorization.grant","1",me("client_id",e),t)}async subscribeToUserAuthorizationRevokeEvents(e,t){return await this.createSubscription("user.authorization.revoke","1",me("client_id",e),t)}async subscribeToUserUpdateEvents(e,t,r){return await this.createSubscription("user.update","1",me("user_id",A(e)),t,e,r?["user:read:email"]:void 0)}async subscribeToUserWhisperMessageEvents(e,t){return await this.createSubscription("user.whisper.message","1",me("user_id",A(e)),t,e,["user:read:whispers","user:manage:whispers"])}async subscribeToDropEntitlementGrantEvents(e,t){return await this.createSubscription("drop.entitlement.grant","1",CC(e),t,void 0,void 0,!1,!0)}async subscribeToAutoModMessageHoldEvents(e,t){const r=A(e);return await this.createSubscription("automod.message.hold","1",$e(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateEvents(e,t){const r=A(e);return await this.createSubscription("automod.message.update","1",$e(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToAutoModSettingsUpdateEvents(e,t){const r=A(e);return await this.createSubscription("automod.settings.update","1",$e(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:automod_settings"],!0)}async subscribeToAutoModTermsUpdateEvents(e,t){const r=A(e);return await this.createSubscription("automod.terms.update","1",$e(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:manage:automod"],!0)}async subscribeToChannelChatUserMessageHoldEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.user_message_hold","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatUserMessageUpdateEvents(e,t){const r=A(e);return await this.createSubscription("channel.chat.user_message_update","1",At(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelSuspiciousUserUpdateEvents(e,t){const r=A(e);return await this.createSubscription("channel.suspicious_user.update","1",$e(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSuspiciousUserMessageEvents(e,t){const r=A(e);return await this.createSubscription("channel.suspicious_user.message","1",$e(r,this._getUserContextIdWithDefault(r)),t,e,["moderator:read:suspicious_users"],!0)}async getConduits(){return(await this._client.callApi({type:"helix",url:"eventsub/conduits"})).data.map(t=>new vi(t,this._client))}async createConduit(e){const t=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"POST",query:{...me("shard_count",e.toString())}});return new vi(t.data[0],this._client)}async updateConduit(e,t){const r=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"PATCH",query:EC(e,t)});return new vi(r.data[0],this._client)}async deleteConduit(e){await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"DELETE",query:{...me("id",e)}})}async getConduitShards(e,t,r){const i=await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",query:{...Kg(e,t),...de(r)}});return{...we(i,vs,this._client)}}getConduitShardsPaginated(e,t){return new fe({url:"eventsub/conduits/shards",query:Kg(e,t)},this._client,r=>new vs(r))}async updateConduitShards(e,t){return(await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",method:"PATCH",jsonBody:HC(e,t)})).data.map(i=>new vs(i))}async _deleteSubscriptionsWithCondition(e){const t=this.getSubscriptionsPaginated();for await(const r of t)(!e||e(r))&&await r.unsubscribe()}};yc=I([j("api","HelixEventSubApi")],yc);function AC(n,e){return{extension_id:n,extension_version:e}}function RC(n){return{sku:n.sku,cost:{amount:n.cost,type:"bits"},display_name:n.displayName,in_development:n.inDevelopment,expiration:n.expirationDate,is_broadcast:n.broadcast}}function Xg(n,e){return{extension_id:n,id:e.transactionIds}}let Ps=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].broadcaster_id}get displayName(){return this[c].broadcaster_name}async getChannel(){return re(await this._client.channels.getChannelInfoById(this[c].broadcaster_id))}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get gameId(){return this[c].game_id}get gameName(){return this[c].game_name}async getGame(){return this[c].game_id?re(await this._client.games.getGameById(this[c].game_id)):null}get title(){return this[c].title}};I([V(!1)],Ps.prototype,"_client",void 0);Ps=I([j("api","HelixChannelReference","id")],Ps);let Xo=class extends K{get sku(){return this[c].sku}get cost(){return this[c].cost.amount}get displayName(){return this[c].display_name}get inDevelopment(){return this[c].in_development}get isBroadcast(){return this[c].is_broadcast}get expirationDate(){return Je(this[c].expiration,e=>new Date(e))}};Xo=I([j("api","HelixExtensionBitsProduct","sku")],Xo);let Ds=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get transactionDate(){return new Date(this[c].timestamp)}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_name}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}get productType(){return this[c].product_type}get productSku(){return this[c].product_data.sku}get productCost(){return this[c].product_data.cost.amount}get productDisplayName(){return this[c].product_data.displayName}get productInDevelopment(){return this[c].product_data.inDevelopment}};I([V(!1)],Ds.prototype,"_client",void 0);Ds=I([j("api","HelixExtensionTransaction","id")],Ds);let bc=class extends be{async getReleasedExtension(e,t){const r=await this._client.callApi({type:"helix",url:"extensions/released",query:AC(e,t)});return new ic(r.data[0])}async getLiveChannelsWithExtension(e,t){const r=await this._client.callApi({type:"helix",url:"extensions/live",query:{...me("extension_id",e),...de(t)}});return we(r,Ps,this._client)}getLiveChannelsWithExtensionPaginated(e){return new fe({url:"extensions/live",query:me("extension_id",e)},this._client,t=>new Ps(t,this._client))}async getExtensionBitsProducts(e){return(await this._client.callApi({type:"helix",url:"bits/extensions",forceType:"app",query:me("should_include_all",e==null?void 0:e.toString())})).data.map(r=>new Xo(r))}async putExtensionBitsProduct(e){const t=await this._client.callApi({type:"helix",url:"bits/extensions",method:"PUT",forceType:"app",jsonBody:RC(e)});return new Xo(t.data[0])}async getExtensionTransactions(e,t={}){const r=await this._client.callApi({type:"helix",url:"extensions/transactions",forceType:"app",query:{...Xg(e,t),...de(t)}});return we(r,Ds,this._client)}getExtensionTransactionsPaginated(e,t={}){return new fe({url:"extensions/transactions",forceType:"app",query:Xg(e,t)},this._client,r=>new Ds(r,this._client))}};bc=I([j("api","HelixExtensionsApi")],bc);let st=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get name(){return this[c].name}get boxArtUrl(){return this[c].box_art_url}get igdbId(){return this[c].igdb_id||null}getBoxArtUrl(e,t){return this[c].box_art_url.replace("{width}",e.toString()).replace("{height}",t.toString())}async getStreams(e){return await this._client.streams.getStreams({...e,game:this[c].id})}getStreamsPaginated(){return this._client.streams.getStreamsPaginated({game:this[c].id})}};I([V(!1)],st.prototype,"_client",void 0);st=I([j("api","HelixGame","id")],st);let Ri=class extends be{constructor(){super(...arguments),this._getGameByIdBatcher=new et({url:"games"},"id","id",this._client,e=>new st(e,this._client)),this._getGameByNameBatcher=new et({url:"games"},"name","name",this._client,e=>new st(e,this._client)),this._getGameByIgdbIdBatcher=new et({url:"games"},"igdb_id","igdb_id",this._client,e=>new st(e,this._client))}async getGamesByIds(e){return await this._getGames("id",e)}async getGamesByNames(e){return await this._getGames("name",e)}async getGamesByIgdbIds(e){return await this._getGames("igdb_id",e)}async getGameById(e){var t;return(t=(await this._getGames("id",[e]))[0])!==null&&t!==void 0?t:null}async getGameByName(e){var t;return(t=(await this._getGames("name",[e]))[0])!==null&&t!==void 0?t:null}async getGameByIgdbId(e){var t;return(t=(await this._getGames("igdb_id",[e]))[0])!==null&&t!==void 0?t:null}async getGameByIdBatched(e){return await this._getGameByIdBatcher.request(e)}async getGameByNameBatched(e){return await this._getGameByNameBatcher.request(e)}async getGameByIgdbIdBatched(e){return await this._getGameByIgdbIdBatcher.request(e)}async getTopGames(e){const t=await this._client.callApi({type:"helix",url:"games/top",query:de(e)});return we(t,st,this._client)}getTopGamesPaginated(){return new fe({url:"games/top"},this._client,e=>new st(e,this._client))}async _getGames(e,t){return t.length?(await this._client.callApi({type:"helix",url:"games",query:{[e]:t}})).data.map(i=>new st(i,this._client)):[]}};I([V(!1)],Ri.prototype,"_getGameByIdBatcher",void 0);I([V(!1)],Ri.prototype,"_getGameByNameBatcher",void 0);I([V(!1)],Ri.prototype,"_getGameByIgdbIdBatcher",void 0);Ri=I([j("api","HelixGameApi")],Ri);let Jo=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterDisplayName(){return this[c].broadcaster_name}get broadcasterName(){return this[c].broadcaster_login}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get type(){return this[c].type}get description(){return this[c].description}get currentAmount(){return this[c].current_amount}get targetAmount(){return this[c].target_amount}get creationDate(){return this[c].created_at}};I([V(!1)],Jo.prototype,"_client",void 0);Jo=I([j("api","HelixGoal","id")],Jo);let vc=class extends be{async getGoals(e){return(await this._client.callApi({type:"helix",url:"goals",userId:A(e),scopes:["channel:read:goals"],query:he(e)})).data.map(r=>new Jo(r,this._client))}};vc=I([j("api","HelixGoalApi")],vc);let Bs=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user}async getUser(){return re(await this._client.users.getUserById(this[c].user))}get type(){return this[c].type}get total(){return this[c].total}};I([V(!1)],Bs.prototype,"_client",void 0);Bs=I([j("api","HelixHypeTrainContribution","userId")],Bs);let Os=class extends K{constructor(e,t){super(e),this._client=t}get eventId(){return this[c].id}get eventType(){return this[c].event_type}get eventDate(){return new Date(this[c].event_timestamp)}get eventVersion(){return this[c].version}get id(){return this[c].event_data.id}get broadcasterId(){return this[c].event_data.broadcaster_id}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].event_data.broadcaster_id))}get level(){return this[c].event_data.level}get startDate(){return new Date(this[c].event_data.started_at)}get expiryDate(){return new Date(this[c].event_data.expires_at)}get cooldownDate(){return new Date(this[c].event_data.cooldown_end_time)}get total(){return this[c].event_data.total}get goal(){return this[c].event_data.goal}get lastContribution(){return new Bs(this[c].event_data.last_contribution,this._client)}get topContributions(){return this[c].event_data.top_contributions.map(e=>new Bs(e,this._client))}};I([V(!1)],Os.prototype,"_client",void 0);Os=I([j("api","HelixHypeTrainEvent","id")],Os);class TC extends be{async getHypeTrainEventsForBroadcaster(e,t){const r=await this._client.callApi({type:"helix",url:"hypetrain/events",userId:A(e),scopes:["channel:read:hype_train"],query:{...he(e),...de(t)}});return we(r,Os,this._client)}getHypeTrainEventsForBroadcasterPaginated(e){return new fe({url:"hypetrain/events",userId:A(e),scopes:["channel:read:hype_train"],query:he(e)},this._client,t=>new Os(t,this._client))}}function Jg(n,e){return{broadcaster_id:A(n),user_id:e==null?void 0:e.userId}}function Yg(n,e){return{broadcaster_id:A(n),user_id:A(e)}}function IC(n,e,t,r,i){return{unban_request_id:t,broadcaster_id:A(n),moderator_id:A(e),status:r?"approved":"denied",resolution_text:i}}function PC(n,e,t){return{user_id:A(n),msg_id:e,action:t?"ALLOW":"DENY"}}function DC(n){return{overall_level:n.overallLevel,aggression:n.aggression,bullying:n.bullying,disability:n.disability,misogyny:n.misogyny,race_ethnicity_or_religion:n.raceEthnicityOrReligion,sex_based_terms:n.sexBasedTerms,sexuality_sex_or_gender:n.sexualitySexOrGender,swearing:n.swearing}}function BC(n){return{data:{duration:n.duration,reason:n.reason,user_id:A(n.user)}}}function OC(n){return{is_active:n}}function UC(n){return{data:n.map(e=>({msg_id:e.messageId,msg_text:e.messageText}))}}function qC(n,e){return{data:{user_id:A(n),reason:e}}}let Yo=class extends K{get broadcasterId(){return this[c].broadcaster_id}get moderatorId(){return this[c].moderator_id}get overallLevel(){return this[c].overall_level?this[c].overall_level:null}get disability(){return this[c].disability}get aggression(){return this[c].aggression}get sexualitySexOrGender(){return this[c].sexuality_sex_or_gender}get misogyny(){return this[c].misogyny}get bullying(){return this[c].bullying}get swearing(){return this[c].swearing}get raceEthnicityOrReligion(){return this[c].race_ethnicity_or_religion}get sexBasedTerms(){return this[c].sex_based_terms}};Yo=I([j("api","HelixAutoModSettings","broadcasterId")],Yo);let wc=class extends K{get messageId(){return this[c].msg_id}get isPermitted(){return this[c].is_permitted}};wc=I([j("api","HelixAutoModStatus","messageId")],wc);let Ti=class extends K{constructor(e,t,r){super(e),this._expiryTimestamp=t,this._client=r}get creationDate(){return new Date(this[c].created_at)}get expiryDate(){return Je(this._expiryTimestamp,e=>new Date(e))}get moderatorId(){return this[c].moderator_id}async getModerator(){return re(await this._client.users.getUserById(this[c].moderator_id))}get userId(){return this[c].user_id}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}};I([V(!1)],Ti.prototype,"_client",void 0);I([V(!1)],Ti.prototype,"_expiryTimestamp",void 0);Ti=I([j("api","HelixBanUser","userId")],Ti);let Zo=class extends Ti{constructor(e,t){super(e,e.expires_at||null,t)}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}get moderatorName(){return this[c].moderator_login}get moderatorDisplayName(){return this[c].moderator_name}get reason(){return this[c].reason||null}};Zo=I([j("api","HelixBan","userId")],Zo);let el=class extends K{get broadcasterId(){return this[c].broadcaster_id}get creationDate(){return new Date(this[c].created_at)}get expirationDate(){return this[c].expires_at?new Date(this[c].expires_at):null}get id(){return this[c].id}get moderatorId(){return this[c].moderator_id}get text(){return this[c].text}get updatedDate(){return new Date(this[c].updated_at)}};el=I([j("api","HelixBlockedTerm","id")],el);let Us=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].broadcaster_id}get name(){return this[c].broadcaster_login}get displayName(){return this[c].broadcaster_name}async getChannel(){return re(await this._client.channels.getChannelInfoById(this[c].broadcaster_id))}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}};I([V(!1)],Us.prototype,"_client",void 0);Us=I([j("api","HelixModeratedChannel","id")],Us);let qs=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}};I([V(!1)],qs.prototype,"_client",void 0);qs=I([j("api","HelixModerator","userId")],qs);let ks=class extends K{constructor(e,t){super(e),this._client=t}get isActive(){return this[c].is_active}get moderatorId(){return this[c].moderator_id}get moderatorName(){return this[c].moderator_login}get moderatorDisplayName(){return this[c].moderator_name}async getModerator(){return re(await this._client.users.getUserById(this[c].moderator_id))}get lastActivationDate(){return this[c].last_activated_at===""?null:new Date(this[c].last_activated_at)}};I([V(!1)],ks.prototype,"_client",void 0);ks=I([j("api","HelixShieldModeStatus")],ks);let wi=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_id}get broadcasterDisplayName(){return this[c].broadcaster_id}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get moderatorId(){return this[c].moderator_id}get moderatorName(){return this[c].moderator_login}get moderatorDisplayName(){return this[c].moderator_name}async getModerator(){return re(await this._client.users.getUserById(this[c].moderator_id))}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}get message(){return this[c].text}get creationDate(){return new Date(this[c].created_at)}get resolutionMessage(){return this[c].resolution_text||null}get resolutionDate(){return Je(this[c].resolved_at,e=>new Date(e))}};I([V(!1)],wi.prototype,"_client",void 0);wi=I([j("api","HelixUnbanRequest","id")],wi);let tl=class extends K{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[c].user_id}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get moderatorId(){return this[c].moderator_id}async getModerator(){return re(await this._client.users.getUserById(this[c].moderator_id))}get userId(){return this[c].user_id}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}get reason(){return this[c].reason}};I([V(!1)],tl.prototype,"_client",void 0);tl=I([j("api","HelixWarning","userId")],tl);let xc=class extends be{async getBannedUsers(e,t){const r=await this._client.callApi({type:"helix",url:"moderation/banned",userId:A(e),scopes:["moderation:read"],query:{...Jg(e,t),...de(t)}});return we(r,Zo,this._client)}getBannedUsersPaginated(e){return new fe({url:"moderation/banned",userId:A(e),scopes:["moderation:read"],query:he(e)},this._client,t=>new Zo(t,this._client),50)}async checkUserBan(e,t){const r=A(t);return(await this.getBannedUsers(e,{userId:r})).data.some(a=>a.userId===r)}async getModerators(e,t){const r=await this._client.callApi({type:"helix",url:"moderation/moderators",userId:A(e),scopes:["moderation:read","channel:manage:moderators"],query:{...Jg(e,t),...de(t)}});return we(r,qs,this._client)}getModeratorsPaginated(e){return new fe({url:"moderation/moderators",userId:A(e),scopes:["moderation:read","channel:manage:moderators"],query:he(e)},this._client,t=>new qs(t,this._client))}async getModeratedChannels(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"moderation/channels",userId:r,scopes:["user:read:moderated_channels"],query:{...me("user_id",r),...de(t)}});return we(i,Us,this._client)}getModeratedChannelsPaginated(e){const t=A(e);return new fe({url:"moderation/channels",userId:t,scopes:["user:read:moderated_channels"],query:me("user_id",t)},this._client,r=>new Us(r,this._client))}async checkUserMod(e,t){const r=A(t);return(await this.getModerators(e,{userId:r})).data.some(a=>a.userId===r)}async addModerator(e,t){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"POST",userId:A(e),scopes:["channel:manage:moderators"],query:Yg(e,t)})}async removeModerator(e,t){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"DELETE",userId:A(e),scopes:["channel:manage:moderators"],query:Yg(e,t)})}async checkAutoModStatus(e,t){return(await this._client.callApi({type:"helix",url:"moderation/enforcements/status",method:"POST",userId:A(e),scopes:["moderation:read"],query:he(e),jsonBody:UC(t)})).data.map(i=>new wc(i))}async processHeldAutoModMessage(e,t,r){await this._client.callApi({type:"helix",url:"moderation/automod/message",method:"POST",userId:A(e),scopes:["moderator:manage:automod"],jsonBody:PC(e,t,r)})}async getAutoModSettings(e){const t=A(e);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",userId:t,scopes:["moderator:read:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(t)})).data.map(i=>new Yo(i))}async updateAutoModSettings(e,t){const r=A(e);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",method:"PUT",userId:r,scopes:["moderator:manage:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:DC(t)})).data.map(a=>new Yo(a))}async banUser(e,t){const r=A(e);return(await this._client.callApi({type:"helix",url:"moderation/bans",method:"POST",userId:r,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:BC(t)})).data.map(a=>new Ti(a,a.end_time,this._client))}async unbanUser(e,t){const r=A(e);await this._client.callApi({type:"helix",url:"moderation/bans",method:"DELETE",userId:r,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...me("user_id",A(t))}})}async getBlockedTerms(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"moderation/blocked_terms",userId:r,scopes:["moderator:read:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...de(t)}});return we(i,el,this._client)}async addBlockedTerm(e,t){const r=A(e);return(await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"POST",userId:r,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:{text:t}})).data.map(a=>new el(a))}async removeBlockedTerm(e,t,r){const i=A(e);await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"DELETE",userId:i,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(i),id:r}})}async deleteChatMessages(e,t){const r=A(e);await this._client.callApi({type:"helix",url:"moderation/chat",method:"DELETE",userId:r,scopes:["moderator:manage:chat_messages"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...me("message_id",t)}})}async getShieldModeStatus(e){const t=A(e),r=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"GET",userId:t,scopes:["moderator:read:shield_mode","moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(t)});return new ks(r.data[0],this._client)}async updateShieldModeStatus(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"PUT",userId:r,scopes:["moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:OC(t)});return new ks(i.data[0],this._client)}async getUnbanRequests(e,t,r){const i=A(e),a=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"GET",userId:i,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(i),...me("status",t),...de(r)}});return we(a,wi,this._client)}getUnbanRequestsPaginated(e,t){const r=A(e);return new fe({url:"moderation/unban_requests",method:"GET",userId:r,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...me("status",t)}},this._client,i=>new wi(i,this._client))}async resolveUnbanRequest(e,t,r,i){const a=A(e),s=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"PATCH",userId:a,scopes:["moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:IC(a,this._getUserContextIdWithDefault(a),t,r,i==null?void 0:i.slice(0,500))});return new wi(s.data[0],this._client)}async warnUser(e,t,r){const i=A(e),a=await this._client.callApi({type:"helix",url:"moderation/warnings",method:"POST",userId:i,scopes:["moderator:manage:warnings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(i),jsonBody:qC(t,r.slice(0,500))});return new tl(a.data[0],this._client)}_createModeratorActionQuery(e){return Bw(e,this._getUserContextIdWithDefault(e))}};xc=I([j("api","HelixModerationApi")],xc);function kC(n,e){var t;return{broadcaster_id:A(n),title:e.title,choices:e.choices.map(r=>({title:r})),duration:e.duration,channel_points_voting_enabled:e.channelPointsPerVote!=null,channel_points_per_vote:(t=e.channelPointsPerVote)!==null&&t!==void 0?t:0}}function MC(n,e,t){return{broadcaster_id:A(n),id:e,status:t?"TERMINATED":"ARCHIVED"}}let Sc=class extends K{get id(){return this[c].id}get title(){return this[c].title}get totalVotes(){return this[c].votes}get channelPointsVotes(){return this[c].channel_points_votes}};Sc=I([j("api","HelixPollChoice","id")],Sc);let Rt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get title(){return this[c].title}get isChannelPointsVotingEnabled(){return this[c].channel_points_voting_enabled}get channelPointsPerVote(){return this[c].channel_points_per_vote}get status(){return this[c].status}get durationInSeconds(){return this[c].duration}get startDate(){return new Date(this[c].started_at)}get endDate(){return new Date(this.startDate.getTime()+this[c].duration*1e3)}get choices(){return this[c].choices.map(e=>new Sc(e))}};I([V(!1)],Rt.prototype,"_client",void 0);Rt=I([j("api","HelixPoll","id")],Rt);let Cc=class extends be{async getPolls(e,t){const r=await this._client.callApi({type:"helix",url:"polls",userId:A(e),scopes:["channel:read:polls"],query:{...he(e),...de(t)}});return we(r,Rt,this._client)}getPollsPaginated(e){return new fe({url:"polls",userId:A(e),scopes:["channel:read:polls"],query:he(e)},this._client,t=>new Rt(t,this._client),20)}async getPollsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"polls",userId:A(e),scopes:["channel:read:polls"],query:Al(e,t)})).data.map(i=>new Rt(i,this._client)):[]}async getPollById(e,t){const r=await this.getPollsByIds(e,[t]);return r.length?r[0]:null}async createPoll(e,t){const r=await this._client.callApi({type:"helix",url:"polls",method:"POST",userId:A(e),scopes:["channel:manage:polls"],jsonBody:kC(e,t)});return new Rt(r.data[0],this._client)}async endPoll(e,t,r=!0){const i=await this._client.callApi({type:"helix",url:"polls",method:"PATCH",userId:A(e),scopes:["channel:manage:polls"],jsonBody:MC(e,t,r)});return new Rt(i.data[0],this._client)}};Cc=I([j("api","HelixPollApi")],Cc);function jC(n,e){return{broadcaster_id:A(n),title:e.title,outcomes:e.outcomes.map(t=>({title:t})),prediction_window:e.autoLockAfter}}function LC(n,e,t,r){return{broadcaster_id:A(n),id:e,status:t,winning_outcome_id:r}}let rl=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return await this._client.users.getUserById(this[c].user_id)}get channelPointsUsed(){return this[c].channel_points_used}get channelPointsWon(){return this[c].channel_points_won}};I([V(!1)],rl.prototype,"_client",void 0);rl=I([j("api","HelixPredictor","userId")],rl);let Ms=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get title(){return this[c].title}get users(){return this[c].users}get totalChannelPoints(){return this[c].channel_points}get color(){return this[c].color}get topPredictors(){var e,t;return(t=(e=this[c].top_predictors)===null||e===void 0?void 0:e.map(r=>new rl(r,this._client)))!==null&&t!==void 0?t:[]}};I([V(!1)],Ms.prototype,"_client",void 0);Ms=I([j("api","HelixPredictionOutcome","id")],Ms);let Tt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get title(){return this[c].title}get status(){return this[c].status}get autoLockAfter(){return this[c].prediction_window}get creationDate(){return new Date(this[c].created_at)}get endDate(){return this[c].ended_at?new Date(this[c].ended_at):null}get lockDate(){return this[c].locked_at?new Date(this[c].locked_at):null}get outcomes(){return this[c].outcomes.map(e=>new Ms(e,this._client))}get winningOutcomeId(){return this[c].winning_outcome_id||null}get winningOutcome(){if(!this[c].winning_outcome_id)return null;const e=this[c].outcomes.find(t=>t.id===this[c].winning_outcome_id);if(!e)throw new Ci("Winning outcome not found in outcomes array");return new Ms(e,this._client)}};I([V(!1)],Tt.prototype,"_client",void 0);Tt=I([j("api","HelixPrediction","id")],Tt);let Ec=class extends be{async getPredictions(e,t){const r=await this._client.callApi({type:"helix",url:"predictions",userId:A(e),scopes:["channel:read:predictions"],query:{...he(e),...de(t)}});return we(r,Tt,this._client)}getPredictionsPaginated(e){return new fe({url:"predictions",userId:A(e),scopes:["channel:read:predictions"],query:he(e)},this._client,t=>new Tt(t,this._client),20)}async getPredictionsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"predictions",userId:A(e),scopes:["channel:read:predictions"],query:Al(e,t)})).data.map(i=>new Tt(i,this._client)):[]}async getPredictionById(e,t){const r=await this.getPredictionsByIds(e,[t]);return r.length?r[0]:null}async createPrediction(e,t){const r=await this._client.callApi({type:"helix",url:"predictions",method:"POST",userId:A(e),scopes:["channel:manage:predictions"],jsonBody:jC(e,t)});return new Tt(r.data[0],this._client)}async lockPrediction(e,t){return await this._endPrediction(e,t,"LOCKED")}async resolvePrediction(e,t,r){return await this._endPrediction(e,t,"RESOLVED",r)}async cancelPrediction(e,t){return await this._endPrediction(e,t,"CANCELED")}async _endPrediction(e,t,r,i){const a=await this._client.callApi({type:"helix",url:"predictions",method:"PATCH",userId:A(e),scopes:["channel:manage:predictions"],jsonBody:LC(e,t,r,i)});return new Tt(a.data[0],this._client)}};Ec=I([j("api","HelixPredictionApi")],Ec);function NC(n,e){return{from_broadcaster_id:A(n),to_broadcaster_id:A(e)}}let Hc=class extends K{get creationDate(){return new Date(this[c].created_at)}get targetIsMature(){return this[c].is_mature}};Hc=I([j("api","HelixRaid")],Hc);let Ac=class extends be{async startRaid(e,t){const r=await this._client.callApi({type:"helix",url:"raids",method:"POST",userId:A(e),scopes:["channel:manage:raids"],query:NC(e,t)});return new Hc(r.data[0])}async cancelRaid(e){await this._client.callApi({type:"helix",url:"raids",method:"DELETE",userId:A(e),scopes:["channel:manage:raids"],query:he(e)})}};Ac=I([j("api","HelixRaidApi")],Ac);function qw(n,e){var t;return{broadcaster_id:A(n),start_time:e==null?void 0:e.startDate,utc_offset:(t=e==null?void 0:e.utcOffset)===null||t===void 0?void 0:t.toString()}}function FC(n,e){return e.vacation?{broadcaster_id:A(n),is_vacation_enabled:"true",vacation_start_time:e.vacation.startDate,vacation_end_time:e.vacation.endDate,timezone:e.vacation.timezone}:{broadcaster_id:A(n),is_vacation_enabled:"false"}}function $C(n){return{start_time:n.startDate,timezone:n.timezone,is_recurring:n.isRecurring,duration:n.duration,category_id:n.categoryId,title:n.title}}function Zg(n,e){return{broadcaster_id:A(n),id:e}}function GC(n){return{start_time:n.startDate,timezone:n.timezone,is_canceled:n.isCanceled,duration:n.duration,category_id:n.categoryId,title:n.title}}let Dt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get startDate(){return new Date(this[c].start_time)}get endDate(){return new Date(this[c].end_time)}get title(){return this[c].title}get cancelEndDate(){return Je(this[c].canceled_until,e=>new Date(e))}get categoryId(){var e,t;return(t=(e=this[c].category)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:null}get categoryName(){var e,t;return(t=(e=this[c].category)===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:null}async getCategory(){var e;const t=(e=this[c].category)===null||e===void 0?void 0:e.id;return t?await this._client.games.getGameById(t):null}get isRecurring(){return this[c].is_recurring}};I([V(!1)],Dt.prototype,"_client",void 0);Dt=I([j("api","HelixScheduleSegment","id")],Dt);let Rc=class extends fe{constructor(e,t,r){super({url:"schedule",query:qw(e,r)},t,i=>new Dt(i,t),25)}async _fetchData(e={}){var t;const r=await super._fetchData(e);return{data:(t=r.data.segments)!==null&&t!==void 0?t:[],pagination:r.pagination}}};Rc=I([j("api","HelixPaginatedScheduleSegmentRequest")],Rc);let nl=class extends K{constructor(e,t){super(e),this._client=t}get segments(){var e,t;return(t=(e=this[c].segments)===null||e===void 0?void 0:e.map(r=>new Dt(r,this._client)))!==null&&t!==void 0?t:[]}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get vacationStartDate(){var e;const t=(e=this[c].vacation)===null||e===void 0?void 0:e.start_time;return t?new Date(t):null}get vacationEndDate(){var e;const t=(e=this[c].vacation)===null||e===void 0?void 0:e.end_time;return t?new Date(t):null}};I([V(!1)],nl.prototype,"_client",void 0);nl=I([j("api","HelixSchedule","broadcasterId")],nl);class QC extends be{async getSchedule(e,t){const r=await this._client.callApi({type:"helix",url:"schedule",userId:A(e),query:{...qw(e,t),...de(t)}});return{data:new nl(r.data,this._client),cursor:r.pagination.cursor}}getScheduleSegmentsPaginated(e,t){return new Rc(e,this._client,t)}async getScheduleSegmentsByIds(e,t){var r,i;return(i=(r=(await this._client.callApi({type:"helix",url:"schedule",userId:A(e),query:Al(e,t)})).data.segments)===null||r===void 0?void 0:r.map(s=>new Dt(s,this._client)))!==null&&i!==void 0?i:[]}async getScheduleSegmentById(e,t){const r=await this.getScheduleSegmentsByIds(e,[t]);return r.length?r[0]:null}async getScheduleAsIcal(e){return await this._client.callApi({type:"helix",url:"schedule/icalendar",query:he(e)})}async updateScheduleSettings(e,t){await this._client.callApi({type:"helix",url:"schedule/settings",method:"PATCH",userId:A(e),scopes:["channel:manage:schedule"],query:FC(e,t)})}async createScheduleSegment(e,t){const r=await this._client.callApi({type:"helix",url:"schedule/segment",method:"POST",userId:A(e),scopes:["channel:manage:schedule"],query:he(e),jsonBody:$C(t)});return new Dt(r.data.segments[0],this._client)}async updateScheduleSegment(e,t,r){const i=await this._client.callApi({type:"helix",url:"schedule/segment",method:"PATCH",userId:A(e),scopes:["channel:manage:schedule"],query:Zg(e,t),jsonBody:GC(r)});return new Dt(i.data.segments[0],this._client)}async deleteScheduleSegment(e,t){await this._client.callApi({type:"helix",url:"schedule/segment",method:"DELETE",userId:A(e),scopes:["channel:manage:schedule"],query:Zg(e,t)})}}function ef(n,e){var t;return{query:n,live_only:(t=e.liveOnly)===null||t===void 0?void 0:t.toString()}}let js=class extends K{constructor(e,t){super(e),this._client=t}get language(){return this[c].broadcaster_language}get id(){return this[c].id}get name(){return this[c].broadcaster_login}get displayName(){return this[c].display_name}async getUser(){return re(await this._client.users.getUserById(this[c].id))}get gameId(){return this[c].game_id}get gameName(){return this[c].game_name}async getGame(){return this[c].game_id?re(await this._client.games.getGameById(this[c].game_id)):null}get isLive(){return this[c].is_live}get tags(){return this[c].tags}get thumbnailUrl(){return this[c].thumbnail_url}get startDate(){return this[c].is_live?new Date(this[c].started_at):null}};I([V(!1)],js.prototype,"_client",void 0);js=I([j("api","HelixChannelSearchResult","id")],js);let Tc=class extends be{async searchCategories(e,t){const r=await this._client.callApi({type:"helix",url:"search/categories",query:{query:e,...de(t)}});return we(r,st,this._client)}searchCategoriesPaginated(e){return new fe({url:"search/categories",query:{query:e}},this._client,t=>new st(t,this._client))}async searchChannels(e,t={}){const r=await this._client.callApi({type:"helix",url:"search/channels",query:{...ef(e,t),...de(t)}});return we(r,js,this._client)}searchChannelsPaginated(e,t={}){return new fe({url:"search/channels",query:ef(e,t)},this._client,r=>new js(r,this._client))}};Tc=I([j("api","HelixSearchApi")],Tc);class WC extends Di{constructor(e){super("Your stream needs to be live to do this",e)}}function Yu(n){return{game_id:n.game,language:n.language,type:n.type,user_id:n.userId,user_login:n.userName}}function VC(n,e){return{user_id:A(n),description:e}}function tf(n){return{video_id:n}}let ut=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}get gameId(){return this[c].game_id}get gameName(){return this[c].game_name}async getGame(){return this[c].game_id?re(await this._client.games.getGameById(this[c].game_id)):null}get type(){return this[c].type}get title(){return this[c].title}get viewers(){return this[c].viewer_count}get startDate(){return new Date(this[c].started_at)}get language(){return this[c].language}get thumbnailUrl(){return this[c].thumbnail_url}getThumbnailUrl(e,t){return this[c].thumbnail_url.replace("{width}",e.toString()).replace("{height}",t.toString())}get tags(){return this[c].tags}get isMature(){return this[c].is_mature}};I([V(!1)],ut.prototype,"_client",void 0);ut=I([j("api","HelixStream","id")],ut);let Ls=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get creationDate(){return new Date(this[c].created_at)}get description(){return this[c].description}get positionInSeconds(){return this[c].position_seconds}};I([V(!1)],Ls.prototype,"_client",void 0);Ls=I([j("api","HelixStreamMarker","id")],Ls);let Ic=class extends Ls{constructor(e,t,r){super(e,r),this._videoId=t}get url(){return this[c].URL}get videoId(){return this._videoId}async getVideo(){return re(await this._client.videos.getVideoById(this._videoId))}};Ic=I([j("api","HelixStreamMarkerWithVideo","id")],Ic);var _i;let Ns=_i=class extends be{constructor(){super(...arguments),this._getStreamByUserIdBatcher=new et({url:"streams"},"user_id","user_id",this._client,e=>new ut(e,this._client)),this._getStreamByUserNameBatcher=new et({url:"streams"},"user_login","user_login",this._client,e=>new ut(e,this._client))}async getStreams(e={}){const t=await this._client.callApi({url:"streams",type:"helix",query:{...Yu(e),...de(e)}});return we(t,ut,this._client)}getStreamsPaginated(e={}){return new fe({url:"streams",query:Yu(e)},this._client,t=>new ut(t,this._client))}async getStreamsByUserNames(e){return(await this.getStreams({userName:e.map(fs)})).data}async getStreamByUserName(e){var t;return(t=(await this.getStreamsByUserNames([e]))[0])!==null&&t!==void 0?t:null}async getStreamByUserNameBatched(e){return await this._getStreamByUserNameBatcher.request(fs(e))}async getStreamsByUserIds(e){return(await this.getStreams({userId:e.map(A)})).data}async getStreamByUserId(e){const t=A(e),r=await this._client.callApi({url:"streams",type:"helix",userId:t,query:Yu({userId:t})});return Je(r.data[0],i=>new ut(i,this._client))}async getStreamByUserIdBatched(e){return await this._getStreamByUserIdBatcher.request(A(e))}async getStreamMarkersForUser(e,t){var r;const i=await this._client.callApi({url:"streams/markers",type:"helix",query:{...Lg(e),...de(t)},userId:A(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:oh(i.data.map(a=>_i._mapGetStreamMarkersResult(a,this._client))),cursor:(r=i.pagination)===null||r===void 0?void 0:r.cursor}}getStreamMarkersForUserPaginated(e){return new fe({url:"streams/markers",query:Lg(e),userId:A(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,t=>_i._mapGetStreamMarkersResult(t,this._client))}async getStreamMarkersForVideo(e,t,r){var i;const a=await this._client.callApi({url:"streams/markers",type:"helix",query:{...tf(t),...de(r)},userId:A(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:oh(a.data.map(s=>_i._mapGetStreamMarkersResult(s,this._client))),cursor:(i=a.pagination)===null||i===void 0?void 0:i.cursor}}getStreamMarkersForVideoPaginated(e,t){return new fe({url:"streams/markers",query:tf(t),userId:A(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,r=>_i._mapGetStreamMarkersResult(r,this._client))}async createStreamMarker(e,t){try{const r=await this._client.callApi({url:"streams/markers",method:"POST",type:"helix",userId:A(e),scopes:["channel:manage:broadcast"],canOverrideScopedUserContext:!0,jsonBody:VC(e,t)});return new Ls(r.data[0],this._client)}catch(r){throw r instanceof Ei&&r.statusCode===404?new WC({cause:r}):r}}async getStreamKey(e){const t=A(e);return(await this._client.callApi({type:"helix",url:"streams/key",userId:t,scopes:["channel:read:stream_key"],query:he(e)})).data[0].stream_key}async getFollowedStreams(e,t){const r=A(e),i=await this._client.callApi({type:"helix",url:"streams/followed",userId:r,scopes:["user:read:follows"],query:{...me("user_id",r),...de(t)}});return we(i,ut,this._client)}getFollowedStreamsPaginated(e){const t=A(e);return new fe({url:"streams/followed",userId:t,scopes:["user:read:follows"],query:me("user_id",t)},this._client,r=>new ut(r,this._client))}static _mapGetStreamMarkersResult(e,t){return e.videos.reduce((r,i)=>[...r,...i.markers.map(a=>new Ic(a,i.video_id,t))],[])}};I([V(!1)],Ns.prototype,"_getStreamByUserIdBatcher",void 0);I([V(!1)],Ns.prototype,"_getStreamByUserNameBatcher",void 0);Ns=_i=I([j("api","HelixStreamApi")],Ns);function zC(n,e){return{broadcaster_id:A(n),user_id:A(e)}}let Fs=class extends K{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return await this._client.users.getUserById(this[c].broadcaster_id)}get isGift(){return this[c].is_gift}get tier(){return this[c].tier}};I([V(!1)],Fs.prototype,"_client",void 0);Fs=I([j("api","HelixUserSubscription","broadcasterId")],Fs);let $s=class extends Fs{get broadcasterId(){return this[c].broadcaster_id}get broadcasterName(){return this[c].broadcaster_login}get broadcasterDisplayName(){return this[c].broadcaster_name}async getBroadcaster(){return re(await this._client.users.getUserById(this[c].broadcaster_id))}get gifterId(){return this[c].is_gift?this[c].gifter_id:null}get gifterName(){return this[c].is_gift?this[c].gifter_login:null}get gifterDisplayName(){return this[c].is_gift?this[c].gifter_name:null}async getGifter(){return this[c].is_gift?re(await this._client.users.getUserById(this[c].gifter_id)):null}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}};$s=I([j("api","HelixSubscription","userId")],$s);let Pc=class extends nr{constructor(e,t){super({url:"subscriptions",scopes:["channel:read:subscriptions"],userId:A(e),query:he(e)},t,r=>new $s(r,t))}async getPoints(){var e;return((e=this._currentData)!==null&&e!==void 0?e:await this._fetchData({query:{after:void 0}})).points}};Pc=I([j("api","HelixPaginatedSubscriptionsRequest")],Pc);let Dc=class extends be{async getSubscriptions(e,t){const r=await this._client.callApi({url:"subscriptions",scopes:["channel:read:subscriptions"],type:"helix",userId:A(e),query:{...he(e),...de(t)}});return{...It(r,$s,this._client),points:r.points}}getSubscriptionsPaginated(e){return new Pc(e,this._client)}async getSubscriptionsForUsers(e,t){return(await this._client.callApi({type:"helix",url:"subscriptions",userId:A(e),scopes:["channel:read:subscriptions"],query:Ow(e,t)})).data.map(i=>new $s(i,this._client))}async getSubscriptionForUser(e,t){const r=await this.getSubscriptionsForUsers(e,[t]);return r.length?r[0]:null}async checkUserSubscription(e,t){try{const r=await this._client.callApi({type:"helix",url:"subscriptions/user",userId:A(e),scopes:["user:read:subscriptions"],query:zC(t,e)});return new Fs(r.data[0],this._client)}catch(r){if(r instanceof Ei&&r.statusCode===404)return null;throw r}}};Dc=I([j("api","HelixSubscriptionApi")],Dc);let Gs=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get name(){return this[c].team_name}get displayName(){return this[c].team_display_name}get backgroundImageUrl(){return this[c].background_image_url}get bannerUrl(){return this[c].banner}get creationDate(){return new Date(this[c].created_at)}get updateDate(){return new Date(this[c].updated_at)}get info(){return this[c].info}get logoThumbnailUrl(){return this[c].thumbnail_url}async getUserRelations(){return(await this._client.teams.getTeamById(this.id)).userRelations}};I([V(!1)],Gs.prototype,"_client",void 0);Gs=I([j("api","HelixTeam","id")],Gs);let il=class extends Gs{get userRelations(){return this[c].users.map(e=>new tr(e,this._client))}};il=I([j("api","HelixTeamWithUsers","id")],il);let Bc=class extends be{async getTeamsForBroadcaster(e){var t,r;return(r=(t=(await this._client.callApi({type:"helix",url:"teams/channel",userId:A(e),query:he(e)})).data)===null||t===void 0?void 0:t.map(a=>new Gs(a,this._client)))!==null&&r!==void 0?r:[]}async getTeamById(e){try{const t=await this._client.callApi({type:"helix",url:"teams",query:{id:e}});return new il(t.data[0],this._client)}catch(t){if(t instanceof Ei&&t.statusCode===500)return null;throw t}}async getTeamByName(e){try{const t=await this._client.callApi({type:"helix",url:"teams",query:{name:e}});return new il(t.data[0],this._client)}catch(t){if(t instanceof Ei&&t.statusCode===404)return null;throw t}}};Bc=I([j("api","HelixTeamApi")],Bc);function KC(n,e){return{target_user_id:A(n),source_context:e.sourceContext,reason:e.reason}}function XC(n){return{target_user_id:A(n)}}class kw extends K{get id(){return this[c].id}get version(){return this[c].version}get name(){return this[c].name}}let ws=class extends kw{constructor(e,t,r){super(r),this._slotType=e,this._slotId=t}get slotType(){return this._slotType}get slotId(){return this._slotId}};ws=I([j("api","HelixInstalledExtension","id")],ws);let al=class extends K{getExtensionAtSlot(e,t){const r=this[c][e][t];return r.active?new ws(e,t,r):null}getExtensionsForSlotType(e){return[...Object.entries(this[c][e])].filter(t=>t[1].active).map(([t,r])=>new ws(e,t,r))}getAllExtensions(){return[...Object.entries(this[c])].flatMap(([e,t])=>[...Object.entries(t)].filter(r=>r[1].active).map(([r,i])=>new ws(e,r,i)))}};al=I([j("api","HelixInstalledExtensionList")],al);let Oc=class extends kw{get canActivate(){return this[c].can_activate}get types(){return this[c].type}};Oc=I([j("api","HelixUserExtension","id")],Oc);let Pt=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get name(){return this[c].login}get displayName(){return this[c].display_name}get description(){return this[c].description}get type(){return this[c].type}get broadcasterType(){return this[c].broadcaster_type}get profilePictureUrl(){return this[c].profile_image_url}get offlinePlaceholderUrl(){return this[c].offline_image_url}get creationDate(){return new Date(this[c].created_at)}async getStream(){return await this._client.streams.getStreamByUserId(this)}async getFollowedChannels(){return await this._client.channels.getFollowedChannels(this)}async getFollowedChannel(e){var t;return(t=(await this._client.channels.getFollowedChannels(this,e)).data[0])!==null&&t!==void 0?t:null}async follows(e){return await this.getFollowedChannel(e)!==null}async getChannelFollowers(){return await this._client.channels.getChannelFollowers(this)}async getChannelFollower(e){var t;return(t=(await this._client.channels.getChannelFollowers(this,e)).data[0])!==null&&t!==void 0?t:null}async isFollowedBy(e){return await this.getChannelFollower(e)!==null}async getSubscriptionTo(e){return await this._client.subscriptions.checkUserSubscription(this,e)}async isSubscribedTo(e){return await this.getSubscriptionTo(e)!==null}async getSubscriber(e){return await this._client.subscriptions.getSubscriptionForUser(this,e)}async hasSubscriber(e){return await this.getSubscriber(e)!==null}};I([V(!1)],Pt.prototype,"_client",void 0);Pt=I([j("api","HelixUser","id")],Pt);let sl=class extends Pt{get email(){return this[c].email}async setDescription(e){return await this._client.users.updateAuthenticatedUser(this,{description:e})}};sl=I([j("api","HelixPrivilegedUser","id")],sl);let Qs=class extends K{constructor(e,t){super(e),this._client=t}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].display_name}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}};I([V(!1)],Qs.prototype,"_client",void 0);Qs=I([j("api","HelixUserBlock","userId")],Qs);let Ws=class extends be{constructor(){super(...arguments),this._getUserByIdBatcher=new et({url:"users"},"id","id",this._client,e=>new Pt(e,this._client)),this._getUserByNameBatcher=new et({url:"users"},"login","login",this._client,e=>new Pt(e,this._client))}async getUsersByIds(e){return await this._getUsers("id",e.map(A))}async getUsersByNames(e){return await this._getUsers("login",e.map(fs))}async getUserById(e){const t=A(e),r=await this._client.callApi({type:"helix",url:"users",userId:t,query:{id:t}});return Je(r.data[0],i=>new Pt(i,this._client))}async getUserByIdBatched(e){return await this._getUserByIdBatcher.request(A(e))}async getUserByName(e){const t=await this._getUsers("login",[fs(e)]);return t.length?t[0]:null}async getUserByNameBatched(e){return await this._getUserByNameBatcher.request(fs(e))}async getAuthenticatedUser(e,t=!1){var r;const i=await this._client.callApi({type:"helix",url:"users",forceType:"user",userId:A(e),scopes:t?["user:read:email"]:void 0});if(!(!((r=i.data)===null||r===void 0)&&r.length))throw new Ci("Could not get authenticated user");return new sl(i.data[0],this._client)}async updateAuthenticatedUser(e,t){const r=await this._client.callApi({type:"helix",url:"users",method:"PUT",userId:A(e),scopes:["user:edit"],query:{description:t.description}});return new sl(r.data[0],this._client)}async getBlocks(e,t){const r=await this._client.callApi({type:"helix",url:"users/blocks",userId:A(e),scopes:["user:read:blocked_users"],query:{...he(e),...de(t)}});return we(r,Qs,this._client)}getBlocksPaginated(e){return new fe({url:"users/blocks",userId:A(e),scopes:["user:read:blocked_users"],query:he(e)},this._client,t=>new Qs(t,this._client))}async createBlock(e,t,r={}){await this._client.callApi({type:"helix",url:"users/blocks",method:"PUT",userId:A(e),scopes:["user:manage:blocked_users"],query:KC(t,r)})}async deleteBlock(e,t){await this._client.callApi({type:"helix",url:"users/blocks",method:"DELETE",userId:A(e),scopes:["user:manage:blocked_users"],query:XC(t)})}async getExtensionsForAuthenticatedUser(e,t=!1){return(await this._client.callApi({type:"helix",url:"users/extensions/list",userId:A(e),scopes:t?["channel:manage:extensions"]:["user:read:broadcast","channel:manage:extensions"]})).data.map(i=>new Oc(i))}async getActiveExtensions(e,t=!1){const r=A(e),i=await this._client.callApi({type:"helix",url:"users/extensions",userId:r,scopes:t?["user:read:broadcast","channel:manage:extensions"]:void 0,query:me("user_id",r)});return new al(i.data)}async updateActiveExtensionsForAuthenticatedUser(e,t){const r=await this._client.callApi({type:"helix",url:"users/extensions",method:"PUT",userId:A(e),scopes:["channel:manage:extensions"],jsonBody:{data:t}});return new al(r.data)}async _getUsers(e,t){if(t.length===0)return[];const r={[e]:t};return(await this._client.callApi({type:"helix",url:"users",query:r})).data.map(a=>new Pt(a,this._client))}};I([V(!1)],Ws.prototype,"_getUserByIdBatcher",void 0);I([V(!1)],Ws.prototype,"_getUserByNameBatcher",void 0);Ws=I([j("api","HelixUserApi")],Ws);let rr=class extends K{constructor(e,t){super(e),this._client=t}get id(){return this[c].id}get userId(){return this[c].user_id}get userName(){return this[c].user_login}get userDisplayName(){return this[c].user_name}async getUser(){return re(await this._client.users.getUserById(this[c].user_id))}get title(){return this[c].title}get description(){return this[c].description}get creationDate(){return new Date(this[c].created_at)}get publishDate(){return new Date(this[c].published_at)}get url(){return this[c].url}get thumbnailUrl(){return this[c].thumbnail_url}getThumbnailUrl(e,t){return this[c].thumbnail_url.replace("%{width}",e.toString()).replace("%{height}",t.toString())}get isPublic(){return this[c].viewable==="public"}get views(){return this[c].view_count}get language(){return this[c].language}get type(){return this[c].type}get duration(){return this[c].duration}get durationInSeconds(){const e=this[c].duration.match(/\d+[hms]/g);if(!e)throw new Ci(`Could not parse duration string: ${this[c].duration}`);return e.map(t=>{const r=/(\d+)([hms])/.exec(t);if(!r)throw new Ci(`Could not parse partial duration string: ${t}`);const[,i,a]=r;return parseInt(i,10)*{h:3600,m:60,s:1}[a]}).reduce((t,r)=>t+r)}get streamId(){return this[c].stream_id}get mutedSegmentData(){var e,t;return(t=(e=this[c].muted_segments)===null||e===void 0?void 0:e.slice())!==null&&t!==void 0?t:[]}isMutedAt(e,t,r=!1){if(this[c].muted_segments===null)return!1;if(t==null)return this[c].muted_segments.some(a=>a.offset<=e&&e<=a.offset+a.duration);const i=e+t;return r?this[c].muted_segments.some(a=>{const s=a.offset+a.duration;return e<s&&a.offset<i}):this[c].muted_segments.some(a=>{const s=a.offset+a.duration;return a.offset<=e&&i<=s})}};I([V(!1)],rr.prototype,"_client",void 0);I([ge()],rr.prototype,"durationInSeconds",null);rr=I([zs,j("api","HelixVideo","id")],rr);var Ho;let ol=Ho=class extends be{constructor(){super(...arguments),this._getVideoByIdBatcher=new et({url:"videos"},"id","id",this._client,e=>new rr(e,this._client))}async getVideosByIds(e){return(await this._getVideos("id",e)).data}async getVideoById(e){const t=await this.getVideosByIds([e]);return t.length?t[0]:null}async getVideoByIdBatched(e){return await this._getVideoByIdBatcher.request(e)}async getVideosByUser(e,t={}){const r=A(e);return await this._getVideos("user_id",[r],t)}getVideosByUserPaginated(e,t={}){const r=A(e);return this._getVideosPaginated("user_id",[r],t)}async getVideosByGame(e,t={}){return await this._getVideos("game_id",[e],t)}getVideosByGamePaginated(e,t={}){return this._getVideosPaginated("game_id",[e],t)}async deleteVideosByIds(e,t){await this._client.callApi({type:"helix",url:"videos",method:"DELETE",scopes:["channel:manage:videos"],userId:A(e),query:{id:t}})}async _getVideos(e,t,r={}){if(!t.length)return{data:[]};const i=await this._client.callApi({type:"helix",url:"videos",userId:e==="user_id"?t[0]:void 0,query:{...Ho._makeVideosQuery(e,t,r),...de(r)}});return we(i,rr,this._client)}_getVideosPaginated(e,t,r={}){return new fe({url:"videos",userId:e==="user_id"?t[0]:void 0,query:Ho._makeVideosQuery(e,t,r)},this._client,i=>new rr(i,this._client))}static _makeVideosQuery(e,t,r={}){const{language:i,period:a,orderBy:s,type:o}=r;return{[e]:t,language:i,period:a,sort:s,type:o}}};I([V(!1)],ol.prototype,"_getVideoByIdBatcher",void 0);ol=Ho=I([j("api","HelixVideoApi")],ol);function JC(n,e){return{from_user_id:A(n),to_user_id:A(e)}}let Uc=class extends be{async sendWhisper(e,t,r){await this._client.callApi({type:"helix",url:"whispers",method:"POST",userId:A(e),scopes:["user:manage:whispers"],query:JC(e,t),jsonBody:{message:r}})}};Uc=I([j("api","HelixWhisperApi")],Uc);class YC{constructor(e,t,r){this._options=e,this._httpStatus=t,this._resolvedUserId=r}get options(){return this._options}get httpStatus(){return this._httpStatus}get resolvedUserId(){return this._resolvedUserId}}let _e=class extends _l{constructor(e,t,r){super(),this.onRequest=this.registerEvent(),this._config=e,this._logger=t,this._rateLimiter=r}async requestScopesForUser(e,t){await this._config.authProvider.getAccessTokenForUser(e,...t.map(r=>[r]))}async getTokenInfo(){try{const e=await this.callApi({type:"auth",url:"validate"});return new sc(e)}catch(e){throw e instanceof Ei&&e.statusCode===401?new Jx({cause:e}):e}}async callApi(e){var t;const{authProvider:r}=this._config;if(!((t=e.auth)!==null&&t!==void 0?t:!0))return await Xf(e,r.clientId,void 0,void 0,this._config.fetchOptions);let a=!1;if(e.forceType)switch(e.forceType){case"app":{if(!r.getAppAccessToken)throw new Error("Tried to make an API call that requires an app access token but your auth provider does not support that");const u=await r.getAppAccessToken();return await this._callApiUsingInitialToken(e,u)}case"user":{a=!0;break}default:throw new Ci(`Unknown forced token type: ${e.forceType}`)}if(e.scopes&&(a=!0),a){const u=e.canOverrideScopedUserContext?this._getUserIdFromRequestContext(e.userId):e.userId;if(!u)throw new Error("Tried to make an API call with a user context but no context user ID");const h=await r.getAccessTokenForUser(u,e.scopes);if(!h)throw new Error(`Tried to make an API call with a user context for user ID ${u} but no token was found`);if(nc(h)&&r.refreshAccessTokenForUser){const m=await r.refreshAccessTokenForUser(u);return await this._callApiUsingInitialToken(e,m,!0)}return await this._callApiUsingInitialToken(e,h)}const s=this._getUserIdFromRequestContext(e.userId),o=s===null?await r.getAnyAccessToken():await r.getAnyAccessToken(s??e.userId);if(nc(o)&&o.userId&&r.refreshAccessTokenForUser){const u=await r.refreshAccessTokenForUser(o.userId);return await this._callApiUsingInitialToken(e,u,!0)}return await this._callApiUsingInitialToken(e,o)}get bits(){return new cc(this)}get channels(){return new Lo(this)}get channelPoints(){return new pc(this)}get charity(){return new mc(this)}get chat(){return new gc(this)}get clips(){return new zo(this)}get contentClassificationLabels(){return new fc(this)}get entitlements(){return new Ko(this)}get eventSub(){return new yc(this)}get extensions(){return new bc(this)}get games(){return new Ri(this)}get hypeTrain(){return new TC(this)}get goals(){return new vc(this)}get moderation(){return new xc(this)}get polls(){return new Cc(this)}get predictions(){return new Ec(this)}get raids(){return new Ac(this)}get schedule(){return new QC(this)}get search(){return new Tc(this)}get streams(){return new Ns(this)}get subscriptions(){return new Dc(this)}get teams(){return new Bc(this)}get users(){return new Ws(this)}get videos(){return new ol(this)}get whispers(){return new Uc(this)}get rateLimiterStats(){return this._rateLimiter instanceof Fc?this._rateLimiter.stats:null}get _authProvider(){return this._config.authProvider}get _mockServerPort(){return this._config.mockServerPort}get _batchDelay(){var e;return(e=this._config.batchDelay)!==null&&e!==void 0?e:0}_getUserIdFromRequestContext(e){return e}async _callApiUsingInitialToken(e,t,r=!1){var i;const{authProvider:a}=this._config,{authorizationType:s}=a;let o=await this._callApiInternal(e,a.clientId,t.accessToken,s);if(o.status===401&&!r){if(t.userId){if(a.refreshAccessTokenForUser){const u=await a.refreshAccessTokenForUser(t.userId);o=await this._callApiInternal(e,a.clientId,u.accessToken,s)}}else if(a.getAppAccessToken){const u=await a.getAppAccessToken(!0);o=await this._callApiInternal(e,a.clientId,u.accessToken,s)}}return this.emit(this.onRequest,new YC(e,o.status,(i=t.userId)!==null&&i!==void 0?i:null)),await ac(o,e),await Kf(o)}async _callApiInternal(e,t,r,i){var a,s,o;const{fetchOptions:u,mockServerPort:h}=this._config,m=(a=e.type)!==null&&a!==void 0?a:"helix";this._logger.debug(`Calling ${m} API: ${(s=e.method)!==null&&s!==void 0?s:"GET"} ${e.url}`),this._logger.trace(`Query: ${JSON.stringify(e.query)}`),e.jsonBody&&this._logger.trace(`Request body: ${JSON.stringify(e.jsonBody)}`);const w=pC.operation({retries:3,minTimeout:500,factor:2}),{promise:y,resolve:g,reject:p}=To();w.attempt(async()=>{try{const d=m==="helix"?await this._rateLimiter.request({options:e,clientId:t,accessToken:r,authorizationType:i,fetchOptions:u,mockServerPort:h}):await gl(e,t,r,i,u,h);!d.ok&&d.status>=500&&d.status<600&&await ac(d,e),g(d)}catch(d){if(w.retry(d))return;p(w.mainError())}});const l=await y;return this._logger.debug(`Called ${m} API: ${(o=e.method)!==null&&o!==void 0?o:"GET"} ${e.url} - result: ${l.status}`),l}};I([ge()],_e.prototype,"bits",null);I([ge()],_e.prototype,"channels",null);I([ge()],_e.prototype,"channelPoints",null);I([ge()],_e.prototype,"charity",null);I([ge()],_e.prototype,"chat",null);I([ge()],_e.prototype,"clips",null);I([ge()],_e.prototype,"contentClassificationLabels",null);I([ge()],_e.prototype,"entitlements",null);I([ge()],_e.prototype,"eventSub",null);I([ge()],_e.prototype,"extensions",null);I([ge()],_e.prototype,"games",null);I([ge()],_e.prototype,"hypeTrain",null);I([ge()],_e.prototype,"goals",null);I([ge()],_e.prototype,"moderation",null);I([ge()],_e.prototype,"polls",null);I([ge()],_e.prototype,"predictions",null);I([ge()],_e.prototype,"raids",null);I([ge()],_e.prototype,"schedule",null);I([ge()],_e.prototype,"search",null);I([ge()],_e.prototype,"streams",null);I([ge()],_e.prototype,"subscriptions",null);I([ge()],_e.prototype,"teams",null);I([ge()],_e.prototype,"users",null);I([ge()],_e.prototype,"videos",null);I([ge()],_e.prototype,"whispers",null);_e=I([zs,j("api","ApiClient")],_e);let qc=class extends _e{_getUserIdFromRequestContext(){return null}};qc=I([j("api","ApiClient")],qc);let ll=class extends _e{constructor(e,t,r,i){super(e,t,r),this._userId=i}_getUserIdFromRequestContext(){return this._userId}};ll=I([j("api","ApiClient")],ll);let kc=class extends _e{constructor(e){if(!e.authProvider)throw new dC("No auth provider given. Please supply the `authProvider` option.");const t={name:"twurple:api:rate-limiter",...e.logger};super(e,ml({name:"twurple:api:client",...e.logger}),hl?new Nx({getPartitionKey:r=>{var i;return(i=r.userId)!==null&&i!==void 0?i:null},createChild:()=>new hC({logger:t})}):new Fx({logger:t,bucketSize:800,timeFrame:64e3,doRequest:async({options:r,clientId:i,accessToken:a,authorizationType:s,fetchOptions:o,mockServerPort:u})=>await gl(r,i,a,s,o,u),getPartitionKey:r=>{var i;return(i=r.userId)!==null&&i!==void 0?i:null}}))}async asUser(e,t){const r=new ll(this._config,this._logger,this._rateLimiter,A(e));return await t(r)}async asIntent(e,t){if(!this._authProvider.getAccessTokenForIntent)throw new Error("Trying to use intents with an auth provider that does not support them");for(const r of e){const i=await this._authProvider.getAccessTokenForIntent(r);if(i){const a=new ll(this._config,this._logger,this._rateLimiter,i.userId);return await t(a)}}throw new Error(`Intents [${e.join(", ")}] not found in auth provider`)}async withoutUser(e){const t=new qc(this._config,this._logger,this._rateLimiter);return await e(t)}};kc=I([j("api","ApiClient")],kc);const rf=n=>{let e;const t=new Set,r=(h,m)=>{const w=typeof h=="function"?h(e):h;if(!Object.is(w,e)){const y=e;e=m??(typeof w!="object"||w===null)?w:Object.assign({},e,w),t.forEach(g=>g(e,y))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h))},u=e=n(r,i,o);return o},ZC=n=>n?rf(n):rf,eE=n=>n;function tE(n,e=eE){const t=Ld.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return Ld.useDebugValue(t),t}const nf=n=>{const e=ZC(n),t=r=>tE(e,r);return Object.assign(t,e),t},rE=n=>n?nf(n):nf,af={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,STORYBOOK:"true",VITE_BASE_PATH:"http://localhost:9155/",VITE_PROD:"true"},Mc=new Map,Co=n=>{const e=Mc.get(n);return e?Object.fromEntries(Object.entries(e.stores).map(([t,r])=>[t,r.getState()])):{}},nE=(n,e,t)=>{if(n===void 0)return{type:"untracked",connection:e.connect(t)};const r=Mc.get(t.name);if(r)return{type:"tracked",store:n,...r};const i={connection:e.connect(t),stores:{}};return Mc.set(t.name,i),{type:"tracked",store:n,...i}},iE=(n,e={})=>(t,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...u}=e;let h;try{h=(a??(af?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!h)return n(t,r,i);const{connection:m,...w}=nE(o,h,u);let y=!0;i.setState=(l,d,v)=>{const C=t(l,d);if(!y)return C;const R=v===void 0?{type:s||"anonymous"}:typeof v=="string"?{type:v}:v;return o===void 0?(m==null||m.send(R,r()),C):(m==null||m.send({...R,type:`${o}/${R.type}`},{...Co(u.name),[o]:i.getState()}),C)};const g=(...l)=>{const d=y;y=!1,t(...l),y=d},p=n(i.setState,r,i);if(w.type==="untracked"?m==null||m.init(p):(w.stores[w.store]=i,m==null||m.init(Object.fromEntries(Object.entries(w.stores).map(([l,d])=>[l,l===w.store?p:d.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let l=!1;const d=i.dispatch;i.dispatch=(...v)=>{(af?"production":void 0)!=="production"&&v[0].type==="__setState"&&!l&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),l=!0),d(...v)}}return m.subscribe(l=>{var d;switch(l.type){case"ACTION":if(typeof l.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Zu(l.payload,v=>{if(v.type==="__setState"){if(o===void 0){g(v.state);return}Object.keys(v.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const C=v.state[o];if(C==null)return;JSON.stringify(i.getState())!==JSON.stringify(C)&&g(C);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(v)});case"DISPATCH":switch(l.payload.type){case"RESET":return g(p),o===void 0?m==null?void 0:m.init(i.getState()):m==null?void 0:m.init(Co(u.name));case"COMMIT":if(o===void 0){m==null||m.init(i.getState());return}return m==null?void 0:m.init(Co(u.name));case"ROLLBACK":return Zu(l.state,v=>{if(o===void 0){g(v),m==null||m.init(i.getState());return}g(v[o]),m==null||m.init(Co(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Zu(l.state,v=>{if(o===void 0){g(v);return}JSON.stringify(i.getState())!==JSON.stringify(v[o])&&g(v[o])});case"IMPORT_STATE":{const{nextLiftedState:v}=l.payload,C=(d=v.computedStates.slice(-1)[0])==null?void 0:d.state;if(!C)return;g(o===void 0?C:C[o]),m==null||m.send(null,v);return}case"PAUSE_RECORDING":return y=!y}return}}),p},aE=iE,Zu=(n,e)=>{let t;try{t=JSON.parse(n)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}t!==void 0&&e(t)},sE={badges:[],twitchMessages:[]},sf=rE()(aE(n=>({...sE,init:(e,t)=>{const{client:r,fetcher:i,parser:a,newParser:s}=oE(e,t);lE(r).then(o=>n({badges:o})).catch(o=>{console.error(o),n({badges:[]})}),Promise.all([i.fetchTwitchEmotes(),i.fetchTwitchEmotes(785975641),i.fetchBTTVEmotes(),i.fetchSevenTVEmotes(),i.fetchSevenTVEmotes(785975641),i.fetchFFZEmotes()]).then(()=>{console.log("Emotes loaded"),n({fetcher:i,parser:a,twitchApiClient:r,parseToLink:s})}).catch(o=>{console.error("Error loading emotes..."),console.error(o),n({fetcher:i,parser:a,twitchApiClient:r,parseToLink:s})})},sendMsgToPyrokxnezxz:async e=>{await dx.invoke("TwitchMsg",e)}})));function oE(n,e){const t=new Hi(n,e),r=new kc({authProvider:t}),i=new Ku.EmoteFetcher(void 0,void 0,{apiClient:r}),a=new Ku.EmoteParser(i,{template:'<img class="emote" alt="{name}" src="{link}" />',match:/(\w+)+?/g});var s=new Ku.EmoteParser(i,{template:'<img class="emote" alt="{name}" src="{link}" />',match:new RegExp("(?<!<[^>]*)(\\w+)(?![^<]*>)","g")});return{fetcher:i,parser:a,client:r,newParser:s}}async function lE(n){const e=await n.chat.getChannelBadges(785975641),t=await n.chat.getGlobalBadges();return[...e,...t]}function uE({mediaInfo:n}){const e=sf(u=>u.parser),t=sf(u=>u.parseToLink),r=n.mediaInfo.textInfo.text;if(r===null&&r===""||!e||!t)return;const i=r==null?void 0:r.split("="),a=i==null?void 0:i.length;if(a){if(a&&a>2)return console.error("–î–æ—Ö—É—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π –≤ —Ç–µ–∫—Å—Ç–µ –∞–ª–µ—Ä—Ç–∞"),null}else return null;const s=[];for(let u=0;u<i.length;u++)if(i[u]=i[u].trim(),i[u]){const h=cE({text:i[u],parser:e,newParser:t});h&&(s[u]=h)}const o=i[1]!=null&&s[1]!=null;return lt.jsxs(Hb,{className:mr.grid,children:[lt.jsx(mi,{className:mr.grid_cell,children:lt.jsx(Nd.Textfit,{forceSingleModeWidth:!0,style:{width:"100%",height:"100%",marginLeft:"auto",marginRight:"auto",textAlign:"center",display:"flex",justifyContent:"center",alignContent:"center",flexWrap:"nowrap",alignItems:"stretch"},max:2e3,children:s[0]})}),lt.jsx(mi,{className:mr.grid_cell}),lt.jsx(mi,{className:mr.grid_cell}),lt.jsx(mi,{className:mr.grid_cell}),lt.jsx(mi,{className:mr.grid_cell+` down-cell ${o?" bg-black":""}`,children:lt.jsx(Nd.Textfit,{forceSingleModeWidth:!0,style:{width:"100%",height:"100%",marginLeft:"auto",marginRight:"auto",textAlign:"center",display:"flex",justifyContent:"center",alignContent:"center",flexWrap:"nowrap",alignItems:"stretch"},max:2e3,children:o?s[1]:""})})]})}uE.__docgenInfo={description:"",methods:[],displayName:"BigTextBlockForAudio",props:{mediaInfo:{required:!0,tsType:{name:"MediaDto"},description:""}}};function cE({text:n,parser:e,newParser:t}){var s,o;if(!n)return;let r="";if(typeof n=="string")r=n.replace(/[\u{E0000}-\u{E007F}]/gu,""),n&&e&&(r=e.parse(n,1));else if("message"in n&&typeof n.message=="string"){let u=function(m){return m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")};var i=n;if(i.message===void 0)return;r=i.message.replace(/[\u{E0000}-\u{E007F}]/gu,""),(o=(s=i.emoteSet)==null?void 0:s.emotes)==null||o.forEach(m=>{m.name===void 0||m.imageUrl===void 0||i.message===void 0||(r=r.replaceAll(new RegExp(`(?<!<[^>]*)${u(m.name)}(?![^<]*>)`,"g"),`<img class="emote"
        srcset="//static-cdn.jtvnw.net/emoticons/v2/${m.id}/default/dark/1.0 1x, //static-cdn.jtvnw.net/emoticons/v2/${m.id}/default/light/2.0 2x, //static-cdn.jtvnw.net/emoticons/v2/${m.id}/default/dark/4.0 4x" alt="${m.name}" 
        loading="lazy"
        decoding="async" />`))});const h=t.parse(r);r=DS(h)}else throw new Error("Invalid message type");return n?pf(r):void 0}function jc(n,e){if(n>=-1&&e<=1)return function(a,s){if(a<-1||s>1)throw new Error("min must be >= -1 and max must be <= 1");const o=Math.random()*(s-a)+a;return Math.round(o*1e3)/1e3}(n,e);const t=new Uint32Array(1);window.crypto.getRandomValues(t);const r=t[0]/4294967296;return Math.floor(r*(e-n+1))+n}function eT(n,e){const t={},{positionInfo:r}=e;let i,a;if("width"in n&&typeof n.width=="number"?(i=n.width,a=n.height):(i=n.offsetWidth||r.width||0,a=n.offsetHeight||r.height||0,!i&&r.width&&(i=r.width),!a&&r.height&&(a=r.height)),r.randomCoordinates){const s=Math.max(0,window.innerWidth-i),o=Math.max(0,window.innerHeight-a);return t.left=`${jc(0,s)}px`,t.top=`${jc(0,o)}px`,t.position="absolute",t}return r.isHorizontalCenter&&r.isVerticallCenter?{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}:r.isHorizontalCenter?(t.position="absolute",t.left="50%",t.transform="translateX(-50%)",t.top=r.yCoordinate!==void 0?`${r.yCoordinate}px`:void 0,t):r.isVerticallCenter?(t.position="absolute",t.top="50%",t.transform="translateY(-50%)",t.left=r.xCoordinate!==void 0?`${r.xCoordinate}px`:void 0,t):(r.xCoordinate!==void 0&&(t.left=`${r.xCoordinate}px`),r.yCoordinate!==void 0&&(t.top=`${r.yCoordinate}px`),(t.left!==void 0||t.top!==void 0)&&(t.position="absolute"),t)}function tT(n){const e={};return n!=null&&n.positionInfo.isRotated&&(e.transform=`rotate(${jc(n.positionInfo.rotation*-1,n.positionInfo.rotation)}deg)`),e}const dE=(n=1)=>{const e=Math.floor(Math.random()*256),t=Math.floor(Math.random()*256),r=Math.floor(Math.random()*256);return`rgba(${e}, ${t}, ${r}, ${n})`};function rT(n,e){var t="",r="";if(e instanceof lc?(t=e.text,e.userInfo.badges.forEach((a,s)=>{const o=n.find(m=>m.id==s),u=o==null?void 0:o.versions.find(m=>m.id==a);if(!u)return;const h=u.getImageUrl(4);r=r+`<img class="badge" src="${h}" type="image/png">
`})):e.badges!==void 0&&(t=e.message,e.badges.forEach(a=>{var h;const s=n.find(m=>m.id==a.key),o=(h=s==null?void 0:s.versions)==null?void 0:h.find(m=>m.id==a.value);if(!o)return;const u=o.getImageUrl(4);r=r+`<img class="badge" src="${u}" type="image/png">
`})),!t)return;const i=pf(r);if(typeof i!="string")return i}function nT(n,e,t){if(typeof n=="string")return n=n.replace(/[\u{E0000}-\u{E007F}]/gu,""),n.split(" ").map(s=>e.parse(s,1));if("message"in n&&typeof n.message=="string"){var r=n;if(r.message===void 0||r.emoteSet===void 0||r.emoteSet.emotes===void 0)return;r.message=r.message.replace(/[\u{E0000}-\u{E007F}]/gu,"");const i=r.emoteSet.emotes.map(s=>{var o;return s.name!==void 0&&(r.message=(o=r.message)==null?void 0:o.replace(s.name,"")),s.imageUrl});return r.message.trim().split(" ").forEach(s=>{i.push(t.parse(s,1))}),i.filter(s=>s!==void 0)}else throw new Error("text must be string or ChatMessage")}const hE=n=>{if(n==="white"||n==="#ffffff"||n==="rgb(255, 255, 255)")return!0},iT=n=>{for(;;){const e=dE(n);if(!hE(e))return e}},aT=n=>{var e,t;return(((e=n==null?void 0:n.faceImage.url)==null?void 0:e.includes(".mp4"))||((t=n==null?void 0:n.faceImage.url)==null?void 0:t.includes(".webm")))??!1};function sT(n){if(!n)return;n=n.trim();const e=[];let t=[];const r=n.replace(/[\u{E0000}-\u{E007F}]/gu,"").split(/\s+/).filter(i=>i.trim().length>0);for(const i of r)i.startsWith("https://")||i.startsWith("http://")?(t.length>0&&(e.push({type:"text",content:t.join(" "),id:$i()}),t=[]),i.includes(".mp4")||i.includes(".webm")||i.includes(".ogg")?e.push({id:$i(),type:"video",source:i,content:i}):i.includes(".jpeg")||i.includes(".jpg")||i.includes(".png")||i.includes(".gif")||i.includes(".svg")||i.includes(".webp")?e.push({id:$i(),type:"image",source:i,content:i}):e.push({id:$i(),type:"link",source:i,content:i})):i&&t.push(i);return t.length>0&&e.push({id:$i(),type:"text",content:t.join(" ")}),e}function oT(n,e,t){if(t){const s=n.filter(u=>!e.some(h=>t(u,h))),o=e.filter(u=>!n.some(h=>t(h,u)));return[...s,...o]}const r=new Set(n),i=new Set(e),a=[];for(const s of n)i.has(s)||a.push(s);for(const s of e)r.has(s)||a.push(s);return a}export{uE as B,Hb as C,mi as R,jc as a,iT as b,cE as c,aT as d,oT as e,nT as f,dE as g,eT as h,hE as i,tT as j,sT as p,rT as r,sf as u};
