import{a as $e,g as Xe,r as z,j as o}from"./iframe-BC7DeeL6.js";import{S as De}from"./index-D3yCSxEu.js";import{l as se}from"./index-B_SPtptC.js";import{a as F}from"./animate.module-CI42XwLX.js";import{b as He,g as Me,u as Ve,e as Ye}from"./index-BW6dIR7N.js";import{A as Ge}from"./Announce-BcX6v2AV.js";import{S as G}from"./index-RHBF0zT8.js";import"./index-Chjiymov.js";import"./react-BJl0BmN6.js";import"./index-BhlHwfix.js";function Je(s){const r=[...s];for(let c=r.length-1;c>0;c--){const u=Math.floor(Math.random()*(c+1));[r[c],r[u]]=[r[u],r[c]]}return r}function Ie(s){let r;return s.waifu.isAdded?r="ты добавил":s.waifu.isMerged?r="поженился с":r="тебе выпал(-а)",r+" "+s.waifu.name}function pe(s){return s.waifu.anime?`из аниме ${s.waifu.anime}`:`из манги ${s.waifu.manga}`}const We=["Кстати","К слову","Между прочим","Кстати сказать","В самом деле","Во всяком случае","Фактически"];function Qe(s){if(!s.waifuHusband||!s.waifu.isPrivated||!s.waifuHusband.whenPrivated)return"";const r=new Date(s.waifuHusband.whenPrivated),u=new Date().getTime()-r.getTime(),p={days:Math.floor(u/(1e3*60*60*24)),hours:Math.floor(u%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(u%(1e3*60*60)/(1e3*60)),seconds:Math.floor(u%(1e3*60)/1e3)},x=Ze(p,s.waifu),T=He(0,We.length-1);return` ${We[T]}, ${x}`}function Ze(s,r){const c=s.days,u=Math.floor(c/365);let p=c%365;const x=Math.floor(p/30);p%=30;const T=Math.floor(p/7);p%=7;const i=[u>0?`${u} ${b(u,"год","года","лет")}`:null,x>0?`${x} ${b(x,"месяц","месяца","месяцев")}`:null,T>0?`${T} ${b(T,"неделя","недели","недель")}`:null,p>0?`${p} ${b(p,"день","дня","дней")}`:null,s.hours>0?`${s.hours} ${b(s.hours,"час","часа","часов")}`:null,s.minutes>0?`${s.minutes} ${b(s.minutes,"минута","минуты","минут")}`:null,s.seconds>0?`${s.seconds} ${b(s.seconds,"секунда","секунды","секунд")}`:null].filter(Boolean),t=r.anime?.trim()?" из аниме "+r.anime:" из манги "+r.manga;return`ты в браке с ${r.name}${t} уже ${i.join(", ")}!`}function b(s,r,c,u){s=Math.abs(s)%100;const p=s%10;return s>10&&s<20?u:p>1&&p<5?c:p===1?r:u}const ke="_baza_1dxj7_13",qe="_textShadow_1dxj7_32",S={baza:ke,"alert-box":"_alert-box_1dxj7_23",textShadow:qe,"roulette-name-text":"_roulette-name-text_1dxj7_36","smooth-box":"_smooth-box_1dxj7_47","merge-container":"_merge-container_1dxj7_59","merge-text":"_merge-text_1dxj7_73","merge-image":"_merge-image_1dxj7_87"};var oe={exports:{}},et=oe.exports,Ce;function tt(){return Ce||(Ce=1,function(s,r){(function(u,p){s.exports=p($e())})(et,c=>(()=>{var u={"./src/components/PrizesWrapper/PrizesWrapper.css":(i,t,e)=>{e.r(t)},"./src/components/Wrapper/Wrapper.css":(i,t,e)=>{e.r(t)},"./src/designs/Regular/Regular.css":(i,t,e)=>{e.r(t)},"./src/components/PrizesWrapper/PrizesWrapper.tsx":(i,t,e)=>{e.r(t),e.d(t,{default:()=>f});var n=e("react"),a=e.n(n),g=e("./src/context/RouletteContext.tsx"),h=e("./src/utills/index.ts");e("./src/components/PrizesWrapper/PrizesWrapper.css");var E=function(P){var m=P.children,l=P.className,v=P.tagName,d=v===void 0?"div":v,_=P.style,A=(0,n.useContext)(g.default),M=A.type,I=A.options,K=A.start,L=A.prizeListClassName,O=I.withoutAnimation!==!0&&K!==!0,y=(0,h.classNames)("roulette-pro-prize-list",{"with-animation":O},[M],L,l);return a().createElement(d,{className:y,style:_},m)};const f=E},"./src/components/PrizesWrapper/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/components/PrizesWrapper/PrizesWrapper.tsx");const a=n.default},"./src/components/Roulette/Roulette.tsx":(i,t,e)=>{e.r(t),e.d(t,{default:()=>v});var n=e("react"),a=e.n(n),g=e("./src/designs/Regular/index.ts"),h=e("./src/context/RouletteContext.tsx"),E=e("./src/components/Wrapper/index.ts"),f=e("./src/components/PrizesWrapper/index.ts"),P=e("./src/utills/index.ts"),m=e("./src/hooks/index.ts"),l=function(d){var _,A,M,I=d.topChildren,K=d.bottomChildren,L=d.designPlugin,O=d.prizeItemRenderFunction,y=d.prizes,N=d.defaultDesignOptions,J=N===void 0?{}:N,j=d.start,X=d.prizeIndex,H=d.spinningTime,Q=H===void 0?10:H,Z=d.transitionFunction,le=Z===void 0?"cubic-bezier(0.0125, 0.1, 0.1, 1)":Z,ge=d.onPrizeDefined,Se=ge===void 0?function(){}:ge,W=d.classes,V=d.soundWhileSpinning,ve=d.options,ue=ve===void 0?{}:ve,he=d.type,U=he===void 0?"horizontal":he,Ee=(0,n.useState)(0),Pe=Ee[0],xe=Ee[1],q=(0,n.useRef)(),_e=(0,m.useAudio)(V??""),Le=_e.start,Re=_e.stop,Ae=ue.stopInCenter,de=(0,g.default)(J)({type:U}),w=typeof L!="function"?de:L({type:U}),ee=w.prizeItemWidth,te=w.prizeItemHeight;(0,n.useEffect)(function(){if(q){var R=function(){var D=q.current.getBoundingClientRect(),B=D.width,C=D.height;switch(U){case"horizontal":return xe(B);case"vertical":return xe(C);default:console.error("Unknown roulette type ".concat(U))}};return R(),window.addEventListener("resize",R),function(){window.removeEventListener("resize",R)}}},[q,U]),(0,n.useEffect)(function(){if(j){V&&Le();var R=setTimeout(function(){Se(),V&&Re()},Q*1e3);return function(){clearTimeout(R),V&&Re()}}},[j,Q]);var Ue=(0,n.useMemo)(function(){var R=U==="horizontal"?ee:te,D=(0,P.getPrizeOffset)(R,X,Pe/2),B=Ae===!0?0:(0,P.getPrizeAdditionalOffset)(R);return D+B},[U,X,ee,te,Pe,Ae]),Ne=function(){var R,D,B=function(){switch(U){case"horizontal":return"left";case"vertical":return"top";default:throw new Error("Type is unknown")}},C=B();return j===!1?(R={},R[C]="0",R.willChange=C,R):(D={transition:"all ".concat(Q,"s ").concat(le," 0s")},D[C]="-".concat(Ue,"px"),D)},je=Ne(),Oe=(0,n.useCallback)(function(){return typeof O=="function"?O:typeof w.prizeItemRenderFunction=="function"?w.prizeItemRenderFunction:de.prizeItemRenderFunction},[de.prizeItemRenderFunction,w.prizeItemRenderFunction,O]),k=(0,n.useMemo)(function(){var R,D=Oe(),B=(0,P.classNames)(W?.prizeItem,(R=w.classes)===null||R===void 0?void 0:R.prizeItem);return y.map(function(C){return a().createElement("li",{key:C.id,className:B},D(C))})},[y,Oe,W?.prizeItem,(_=w.classes)===null||_===void 0?void 0:_.prizeItem]);(0,n.useEffect)(function(){var R,D,B,C;if(k.length!==0){for(var re=-1,ne=-1,Te=function(){re=-1,ne=-1},ce=0;ce<k.length;ce+=1){var Y=(C=(B=(D=(R=k[ce])===null||R===void 0?void 0:R.props)===null||D===void 0?void 0:D.children)===null||B===void 0?void 0:B.props)===null||C===void 0?void 0:C.style,fe=Y?.width,me=Y?.height;if(re===-1&&ne===-1){re=fe,ne=me;continue}if(!(re===fe&&ne===me)){(fe!==ee||me!==te)&&console.error("One or more prize items have a different width or height than what is set in the designPlugin. Therefore, the roulette is incorrectly calculating the offset for the prize item index. Please check your `prizeItemRenderFunction`. All prize items must have the same width and height as set in the `prizeItemRenderFunction`"),console.error("One or more prize items have different width or height; therefore, the roulette is incorrectly calculating the offset for the prize item index. All prize items must have the same width and height. Please check your `prizeItemRenderFunction` or `designPlugin` options");break}}return Te(),function(){Te()}}},[k,ee,te]);var ye=(0,P.classNames)(W?.wrapper,(A=w.classes)===null||A===void 0?void 0:A.wrapper),ze=(0,P.classNames)(W?.prizeListWrapper,(M=w.classes)===null||M===void 0?void 0:M.prizeListWrapper),Fe=(0,n.useMemo)(function(){return{options:ue,start:j,wrapperClassName:ye,prizeListClassName:ze,type:U}},[ue,j,U,ze,ye]),Ke=a().createElement(n.Fragment,null,w.topChildren,I),be=a().createElement(n.Fragment,null,w.bottomChildren,K);return a().createElement(h.default.Provider,{value:Fe},a().createElement(E.default,{ref:q},Ke,a().createElement(f.default,{tagName:"ul",style:je},k),be))};const v=l},"./src/components/Roulette/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/components/Roulette/Roulette.tsx");const a=n.default},"./src/components/Wrapper/Wrapper.tsx":(i,t,e)=>{e.r(t),e.d(t,{default:()=>f});var n=e("react"),a=e.n(n),g=e("./src/utills/index.ts"),h=e("./src/context/RouletteContext.tsx");e("./src/components/Wrapper/Wrapper.css");var E=(0,n.forwardRef)(function(P,m){var l=P.children,v=P.className,d=(0,n.useContext)(h.default),_=(0,g.classNames)("roulette-pro-wrapper",d.wrapperClassName,v);return a().createElement("div",{className:_,ref:m},l)});E.displayName="Wrapper";const f=E},"./src/components/Wrapper/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/components/Wrapper/Wrapper.tsx");const a=n.default},"./src/context/RouletteContext.tsx":(i,t,e)=>{e.r(t),e.d(t,{default:()=>g});var n=e("react"),a=(0,n.createContext)({});const g=a},"./src/designs/Regular/Regular.tsx":(i,t,e)=>{e.r(t),e.d(t,{default:()=>E});var n=e("react"),a=e.n(n);e("./src/designs/Regular/Regular.css");var g=function(f){var P=f.type,m=f.hideCenterDelimiter;return m!==!0?a().createElement("div",{"data-testid":"design-top",className:"roulette-pro-regular-design-top ".concat(P)}):null},h=function(f){var P=f.prizesWithText,m=f.hideCenterDelimiter;return function(l){var v=l.type,d=205,_=v==="vertical"?172:174,A=P===!0?234:_,M="roulette-pro-regular-design-prize-item-".concat(v);return{topChildren:a().createElement(g,{type:v,hideCenterDelimiter:m}),bottomChildren:null,prizeItemWidth:d,prizeItemHeight:A,prizeItemRenderFunction:function(I){var K=I.image,L=I.text,O=P===!0&&L!==void 0;return a().createElement("div",{className:"roulette-pro-regular-prize-item",style:{width:d,height:A}},a().createElement("div",{className:O===!0?"roulette-pro-regular-prize-item-wrapper":"roulette-pro-regular-prize-item-wrapper center"},a().createElement("div",{className:"roulette-pro-regular-image-wrapper"},a().createElement("img",{className:"roulette-pro-regular-prize-item-image",src:K,alt:O===!0?"prize item ".concat(L):"prize item"})),O===!0&&a().createElement("p",{className:"roulette-pro-regular-prize-item-text"},L)))},classes:{prizeItem:M}}}};const E=h},"./src/designs/Regular/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/designs/Regular/Regular.tsx");const a=n.default},"./src/hooks/index.ts":(i,t,e)=>{e.r(t),e.d(t,{useAudio:()=>n.default});var n=e("./src/hooks/useAudio/index.ts")},"./src/hooks/useAudio/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/hooks/useAudio/useAudio.ts");const a=n.default},"./src/hooks/useAudio/useAudio.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>g});var n=e("react"),a=function(h){var E=(0,n.useState)(null),f=E[0],P=E[1],m=(0,n.useState)(!1),l=m[0],v=m[1];(0,n.useEffect)(function(){typeof window>"u"||typeof Audio>"u"||!h||P(new Audio(h))},[h]);var d=(0,n.useCallback)(function(){f&&(f.play(),v(!0))},[f]),_=(0,n.useCallback)(function(){f&&(f.pause(),f.currentTime=0,v(!1))},[f]);return(0,n.useEffect)(function(){return function(){v(!1)}},[]),(0,n.useEffect)(function(){if(f){var A=function(){_()};return f.addEventListener("ended",A),function(){f.removeEventListener("ended",A)}}},[f,_]),{isPlaying:l,start:d,stop:_}};const g=a},"./src/utills/classNames/classNames.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>P});var n=function(m){return Array.isArray(m)},a=function(m){return m!==null&&n(m)===!1&&typeof m=="object"},g=function(m){return typeof m=="function"},h=function(m){return typeof m=="boolean"},E=function(m){return m.toString!==Object.prototype.toString},f=function(){for(var m=[],l=0;l<arguments.length;l++)m[l]=arguments[l];for(var v="",d=function(O,y){var N=h(O);!O||N===!0||(v+="".concat(y!==void 0?y:O," "))},_=function(O){var y=Object.entries(O),N=E(O);if(y.forEach(function(j){var X=j[0],H=j[1];if(H){var Q=g(H),Z=X==="toString";if(Q===!0&&Z===!1){var le=H();d(le,X);return}Z===!1&&(v+="".concat(X," "))}}),N===!0){var J=O.toString();d(J)}},A=function(O){O.forEach(function(y){if(!(!y||typeof y=="boolean")){var N=n(y),J=a(y);if(N===!0)return A(y);if(J===!0)return _(y);v+="".concat(y," ")}})},M=0;M<m.length;M+=1){var I=m[M],K=a(I),L=n(I);if(K===!0){_(I);continue}if(L===!0){A(I);continue}d(I)}return v.trim()};const P=f},"./src/utills/classNames/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/utills/classNames/classNames.ts");const a=n.default},"./src/utills/getPrizeAdditionalOffset/getPrizeAdditionalOffset.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>g});var n=e("./src/utills/getRandomIntInRange/index.ts"),a=function(h){var E=h/2,f=(0,n.default)(-E+1,E-1);return f};const g=a},"./src/utills/getPrizeAdditionalOffset/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/utills/getPrizeAdditionalOffset/getPrizeAdditionalOffset.ts");const a=n.default},"./src/utills/getPrizeOffset/getPrizeOffset.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=function(g,h,E){return g*h-(E-g/2)};const a=n},"./src/utills/getPrizeOffset/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/utills/getPrizeOffset/getPrizeOffset.ts");const a=n.default},"./src/utills/getRandomIntInRange/getRandomIntInRange.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=function(g,h){var E=Math.ceil(g),f=Math.floor(h);return Math.floor(Math.random()*(f-E+1)+E)};const a=n},"./src/utills/getRandomIntInRange/index.ts":(i,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e("./src/utills/getRandomIntInRange/getRandomIntInRange.ts");const a=n.default},"./src/utills/index.ts":(i,t,e)=>{e.r(t),e.d(t,{classNames:()=>h.default,getPrizeAdditionalOffset:()=>g.default,getPrizeOffset:()=>n.default,getRandomIntInRange:()=>a.default});var n=e("./src/utills/getPrizeOffset/index.ts"),a=e("./src/utills/getRandomIntInRange/index.ts"),g=e("./src/utills/getPrizeAdditionalOffset/index.ts"),h=e("./src/utills/classNames/index.ts")},react:i=>{i.exports=c}},p={};function x(i){var t=p[i];if(t!==void 0)return t.exports;var e=p[i]={exports:{}};return u[i](e,e.exports,x),e.exports}x.n=i=>{var t=i&&i.__esModule?()=>i.default:()=>i;return x.d(t,{a:t}),t},x.d=(i,t)=>{for(var e in t)x.o(t,e)&&!x.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})},x.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),x.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var T={};return(()=>{/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/x.r(T),x.d(T,{default:()=>t});var i=x("./src/components/Roulette/index.ts");const t=i.default})(),T})())}(oe)),oe.exports}var rt=tt();const nt=Xe(rt);function we({rouletteIndex:s,prizes:r,callback:c,name:u,color:p}){if(r.length===0)throw new Error("Prizes is empty");const[x,T]=z.useState(!1),i=z.useRef(null),t=z.useRef(null),[e,n]=z.useState(!1),[a]=z.useState(p||Me()),[g,h]=z.useState({width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center",alignSelf:"center",animationDuration:"2.2s"});return o.jsxs("div",{ref:i,className:" "+F.animated+" "+F.fadeIn,onAnimationEnd:()=>{T(!0),n(!0)},style:g,children:[o.jsxs("div",{ref:t,className:S["smooth-box"],style:{width:"100%",margin:"0 auto",height:"100%",alignSelf:"center",position:"relative"},children:[e&&o.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"4px",height:`${t.current.offsetHeight}px`,background:"orange",zIndex:10,transform:"translate(-50%, -50%)",visibility:e?"visible":"hidden"}}),o.jsx(nt,{start:x,prizes:r,prizeIndex:s,spinningTime:20,type:"horizontal",classes:{},options:{withoutAnimation:!0},defaultDesignOptions:{prizesWithText:!0,hideCenterDelimiter:!0},onPrizeDefined:()=>{n(!1);const E=i.current;E.onanimationend=()=>{c()},h(f=>({...f,animationDuration:"1.5s"})),E.className=" "+F.animated+" "+F.fadeOut}})]}),o.jsxs("div",{className:S["roulette-name-text"],children:[o.jsx("span",{children:"рулетка"}),o.jsx("span",{children:"для"}),o.jsx("span",{style:{color:a},children:u})]})]})}we.__docgenInfo={description:"",methods:[],displayName:"WaifuRoulette",props:{rouletteIndex:{required:!0,tsType:{name:"number"},description:""},prizes:{required:!0,tsType:{name:"Array",elements:[{name:"PrizeType"}],raw:"PrizeType[]"},description:""},callback:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},name:{required:!0,tsType:{name:"string"},description:""},color:{required:!1,tsType:{name:"string"},description:""}}};function st(s,r){switch(r.type){case 0:return r.waifu?s.isWaifuShowing?{...s,messages:[...s.messages,r.waifu]}:{...s,messages:[...s.messages],currentMessage:r.waifu,isWaifuShowing:!0}:s;case 1:if(r.waifu===void 0)return{...s};if(s.messages.length>0){const c=s.messages.filter(u=>u.waifu.shikiId!==r.waifu.waifu.shikiId);if(c.length>0){const u=c[0];return{...s,messages:c,currentMessage:u,isWaifuShowing:!0}}return{...s,isWaifuShowing:!1,messages:c,currentMessage:void 0}}return{...s,messages:[],currentMessage:void 0,isWaifuShowing:!1};case 2:{const c=Ye(s.prizes??[],r.prizes??[],(u,p)=>u.id===p.id);return c.forEach(u=>{if(u.image){const p=new Image;p.src=u.image}}),{...s,prizes:[...s.prizes,...c]}}case 3:return{...s,prizes:Je(s.prizes??[])}}}function Be(){const s={messages:[],isWaifuShowing:!1,prizes:[]},[{currentMessage:r,prizes:c},u]=z.useReducer(st,s),[p,x]=z.useState(!1),T=z.useRef(null),[i,t]=z.useState(!1),[e,n]=z.useState(-1),a=Ve(l=>l.sendMsgToPyrokxnezxz);G.useSignalREffect("waifuroll",(l,v,d,_)=>{g({waifu:l,displayName:v,waifuHusband:d,color:_})},[]),G.useSignalREffect("addnewwaifu",(l,v,d)=>{l.isAdded=!0,g({waifu:l,displayName:v,color:d})},[]),G.useSignalREffect("Mergewaifu",(l,v,d,_)=>{l.isMerged=!0;const A={waifu:l,displayName:v.name,waifuHusband:v,color:_,avatarUrl:d};g(A)},[]),G.useSignalREffect("UpdateWaifuPrizes",async l=>{u({type:2,prizes:l})},[]);function g(l){u({type:0,waifu:l})}function h(l){u({type:1,waifu:l})}function E(){u({type:3})}z.useEffect(()=>{if(r&&c){const l=c.findIndex(v=>v.id===r.waifu.shikiId);n(l)}},[c,r]),z.useEffect(()=>{r&&(r.waifu.isMerged||r.waifu.isAdded)&&t(!0)},[r]);const f=z.useCallback(()=>{G.invoke("MuteAll",[])},[]),P=z.useCallback(()=>{G.invoke("UnmuteSessions")},[]),m=z.useCallback(l=>{throw P(),h(l),Error("Failed to play audio")},[P]);return o.jsxs("div",{className:S.textShadow,children:[!p&&o.jsx(Ge,{title:"WaifuRoll",callback:()=>x(!0)}),r&&!i&&e!==-1&&o.jsx(we,{callback:()=>{t(!0),n(-1)},rouletteIndex:e,prizes:c||[],name:r.displayName,color:r.color},r.waifu.shikiId),r&&i&&!r.waifu.isMerged&&o.jsxs("div",{id:r.waifu.shikiId,ref:T,className:S.baza+" "+F.bounceIn+" "+F.animated,children:[o.jsx("div",{className:S["alert-box"],children:o.jsx("img",{src:r.waifu.imageUrl,style:{height:"498px",width:"320px"},onLoad:()=>{setTimeout(()=>{T.current.onanimationend=()=>{h(r),n(-1),t(!1),E()},T.current.className=S.baza+" "+F.bounceOut+" "+F.animated},7e3),r.waifu.isAdded||a(`@${r.displayName}, ${Ie(r)} ${pe(r)}!${Qe(r)}`)}})}),o.jsxs("div",{className:S["alert-box"],children:[o.jsx("span",{className:"text-shadow block-text",style:{color:"white"},children:o.jsx(se.Textfit,{min:1,max:1500,forceSingleModeWidth:!0,children:r.displayName.toUpperCase()})}),o.jsx("span",{className:"text-shadow block-text",style:{color:"cornflowerblue"},children:o.jsx(se.Textfit,{min:1,max:1500,forceSingleModeWidth:!0,children:Ie(r)})}),o.jsx("span",{className:"text-shadow block-text",style:{color:"red"},children:o.jsx(se.Textfit,{min:1,max:1500,forceSingleModeWidth:!0,children:pe(r)})})]})]},r.waifu.shikiId),r&&i&&r.waifu.isMerged&&o.jsxs(o.Fragment,{children:[o.jsx(De,{width:"100%",height:"100%",autorun:{speed:30,duration:20*1e3},decorateOptions:()=>({particleCount:2,angle:60,spread:55,origin:{x:0},colors:["#000000","#FF0000","#FFFFFF"]})}),o.jsx(De,{width:"100%",height:"100%",autorun:{speed:30,duration:20*1e3},decorateOptions:()=>({particleCount:2,angle:120,spread:55,origin:{x:1},colors:["#000000","#FF0000","#FFFFFF"]})}),o.jsxs("div",{className:S["merge-container"],children:[o.jsx("div",{className:S["merge-image"],children:o.jsx("img",{src:r.avatarUrl})}),o.jsx("div",{className:S["merge-text"],children:o.jsxs(se.Textfit,{style:{color:"white"},mode:"multi",min:1,max:2e3,children:["Поздравляем"," ",o.jsx("span",{style:{color:r.color},children:r.waifuHusband.name})," ","и"," ",o.jsxs("span",{style:{color:Me()},children:[r.waifu.name," "]})," ","из"," ",o.jsx("span",{style:{color:r.waifu.anime?"blue":"gold"},children:pe(r)})," ","с свадьбой!"]})}),o.jsx("div",{className:S["merge-image"],children:o.jsx("img",{src:r.waifu.imageUrl})})]}),o.jsx("audio",{controls:!1,autoPlay:!0,onError:()=>m(r),onEnded:()=>{t(!0),n(-1),P(),h(r)},onCanPlay:l=>{try{l.currentTarget?.play()}catch{l.currentTarget.muted=!0,l.currentTarget?.play()}},onCanPlayThrough:()=>f(),children:o.jsx("source",{src:"http://localhost:9155/Alerts/svadba.mp3"})},r.waifu.shikiId)]})]})}Be.__docgenInfo={description:"",methods:[],displayName:"WaifuAlerts"};const{expect:$}=__STORYBOOK_MODULE_TEST__,gt={title:"Waifu/WaifuAlerts",component:Be,parameters:{layout:"fullscreen",docs:{description:{component:"Система алертов для вайфу-рулетки с анимациями и рулеткой."}}},tags:["autodocs"],decorators:[s=>o.jsx("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",position:"relative",overflow:"hidden"},children:o.jsx(s,{})})]},ae={args:{},play:async({canvasElement:s})=>{await new Promise(u=>setTimeout(u,100)),$(s).toBeInTheDocument();const r=s.querySelectorAll('[class*="baza"]');$(r.length).toBe(0);const c=s.querySelectorAll('[class*="roulette"]');$(c.length).toBe(0)}},ie={args:{},parameters:{docs:{description:{story:"Пустая система вайфу-алертов без активных событий."}}},play:async({canvasElement:s})=>{await new Promise(p=>setTimeout(p,100)),$(s).toBeInTheDocument();const r=s.querySelectorAll('[class*="baza"]');$(r.length).toBe(0);const c=s.querySelectorAll('[class*="roulette"]');$(c.length).toBe(0);const u=s.querySelectorAll("canvas");$(u.length).toBe(0)}};ae.parameters={...ae.parameters,docs:{...ae.parameters?.docs,source:{originalSource:`{
  args: {},
  play: async ({
    canvasElement
  }) => {
    // const canvas = within(canvasElement); // Unused variable

    // Ждем появления компонента
    await new Promise(resolve => setTimeout(resolve, 100));

    // Проверяем, что компонент отрендерился
    expect(canvasElement).toBeInTheDocument();

    // Проверяем, что нет активных вайфу-алертов изначально
    const waifuAlerts = canvasElement.querySelectorAll('[class*="baza"]');
    expect(waifuAlerts.length).toBe(0);

    // Проверяем, что нет рулетки изначально
    const roulette = canvasElement.querySelectorAll('[class*="roulette"]');
    expect(roulette.length).toBe(0);
  }
}`,...ae.parameters?.docs?.source}}};ie.parameters={...ie.parameters,docs:{...ie.parameters?.docs,source:{originalSource:`{
  args: {},
  parameters: {
    docs: {
      description: {
        story: "Пустая система вайфу-алертов без активных событий."
      }
    }
  },
  play: async ({
    canvasElement
  }) => {
    // const canvas = within(canvasElement); // Unused variable

    // Ждем появления компонента
    await new Promise(resolve => setTimeout(resolve, 100));

    // Проверяем, что компонент отрендерился
    expect(canvasElement).toBeInTheDocument();

    // Проверяем, что нет вайфу-алертов
    const waifuAlerts = canvasElement.querySelectorAll('[class*="baza"]');
    expect(waifuAlerts.length).toBe(0);

    // Проверяем, что нет рулетки
    const roulette = canvasElement.querySelectorAll('[class*="roulette"]');
    expect(roulette.length).toBe(0);

    // Проверяем, что нет конфетти
    const confetti = canvasElement.querySelectorAll("canvas");
    expect(confetti.length).toBe(0);
  }
}`,...ie.parameters?.docs?.source}}};const vt=["Default","Empty"];export{ae as Default,ie as Empty,vt as __namedExportsOrder,gt as default};
