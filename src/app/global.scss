// Bootstrap CSS
@use '../styles/bootstrap';
@import 'bootstrap-icons/font/bootstrap-icons.css';

/* Применяем стили только если не в Storybook */
html:not([data-storybook]) {
  font-size: 20px;
}

/* Кастомные CSS переменные для тем */
:root {
  // Основные цвета Bootstrap
  --bs-primary: #667eea;
  --bs-primary-rgb: 102, 126, 234;
  --bs-secondary: #764ba2;
  --bs-secondary-rgb: 118, 75, 162;
  
  // Дополнительные цвета
  --bs-success: #198754;
  --bs-info: #0dcaf0;
  --bs-warning: #ffc107;
  --bs-danger: #dc3545;
  --bs-light: #f8f9fa;
  --bs-dark: #212529;
  
  // Фоновые цвета
  --bs-body-bg: #ffffff;
  --bs-body-color: #212529;
  --bs-body-bg-rgb: 255, 255, 255;
  --bs-body-color-rgb: 33, 37, 41;
  
  // Цвета компонентов
  --bs-card-bg: #ffffff;
  --bs-card-border-color: rgba(0, 0, 0, 0.125);
  --bs-border-color: #dee2e6;
  --bs-border-color-translucent: rgba(0, 0, 0, 0.125);
  
  // Тени
  --bs-box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
  --bs-box-shadow-sm: 0 0.0625rem 0.125rem rgba(0, 0, 0, 0.075);
  --bs-box-shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.175);
  
  // Тени для текста
  --text-shadow-light: 0 1px 2px rgba(0, 0, 0, 0.1);
  --text-shadow-medium: 0 2px 4px rgba(0, 0, 0, 0.15);
  --text-shadow-heavy: 0 4px 8px rgba(0, 0, 0, 0.2);
  
  // Градиенты
  --bs-gradient: linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));
  --primary-gradient: linear-gradient(135deg, var(--bs-primary) 0%, var(--bs-secondary) 100%);
  
  // Дополнительные цвета для тем
  --bs-white: #ffffff;
  --bs-black: #000000;
  --bs-gray-100: #f8f9fa;
  --bs-gray-200: #e9ecef;
  --bs-gray-300: #dee2e6;
  --bs-gray-400: #ced4da;
  --bs-gray-500: #adb5bd;
  --bs-gray-600: #6c757d;
  --bs-gray-700: #495057;
  --bs-gray-800: #343a40;
  --bs-gray-900: #212529;
  
  // Цвета для статусов
  --bs-success-light: #d1e7dd;
  --bs-success-dark: #0f5132;
  --bs-warning-light: #fff3cd;
  --bs-warning-dark: #664d03;
  --bs-danger-light: #f8d7da;
  --bs-danger-dark: #721c24;
  --bs-info-light: #cff4fc;
  --bs-info-dark: #055160;
}

[data-bs-theme="dark"] {
  // Основные цвета Bootstrap для темной темы
  --bs-primary: #7c8df8;
  --bs-primary-rgb: 124, 141, 248;
  --bs-secondary: #9b6bc7;
  --bs-secondary-rgb: 155, 107, 199;
  
  // Дополнительные цвета для темной темы
  --bs-success: #20c997;
  --bs-info: #0dcaf0;
  --bs-warning: #ffc107;
  --bs-danger: #dc3545;
  --bs-light: #343a40;
  --bs-dark: #f8f9fa;
  
  // Фоновые цвета для темной темы
  --bs-body-bg: #212529;
  --bs-body-color: #f8f9fa;
  --bs-body-bg-rgb: 33, 37, 41;
  --bs-body-color-rgb: 248, 249, 250;
  
  // Цвета компонентов для темной темы
  --bs-card-bg: #343a40;
  --bs-card-border-color: rgba(255, 255, 255, 0.125);
  --bs-border-color: #495057;
  --bs-border-color-translucent: rgba(255, 255, 255, 0.125);
  
  // Тени для темной темы
  --bs-box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.3);
  --bs-box-shadow-sm: 0 0.0625rem 0.125rem rgba(0, 0, 0, 0.3);
  --bs-box-shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.5);
  
  // Тени для текста в темной теме
  --text-shadow-light: 0 1px 2px rgba(0, 0, 0, 0.3);
  --text-shadow-medium: 0 2px 4px rgba(0, 0, 0, 0.4);
  --text-shadow-heavy: 0 4px 8px rgba(0, 0, 0, 0.5);
  
  // Градиенты для темной темы
  --bs-gradient: linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));
  --primary-gradient: linear-gradient(135deg, var(--bs-primary) 0%, var(--bs-secondary) 100%);
  
  // Дополнительные цвета для темной темы
  --bs-white: #f8f9fa;
  --bs-black: #ffffff;
  --bs-gray-100: #212529;
  --bs-gray-200: #343a40;
  --bs-gray-300: #495057;
  --bs-gray-400: #6c757d;
  --bs-gray-500: #adb5bd;
  --bs-gray-600: #ced4da;
  --bs-gray-700: #dee2e6;
  --bs-gray-800: #e9ecef;
  --bs-gray-900: #f8f9fa;
  
  // Цвета для статусов в темной теме
  --bs-success-light: #0f5132;
  --bs-success-dark: #d1e7dd;
  --bs-warning-light: #664d03;
  --bs-warning-dark: #fff3cd;
  --bs-danger-light: #721c24;
  --bs-danger-dark: #f8d7da;
  --bs-info-light: #055160;
  --bs-info-dark: #cff4fc;
}

// Устаревшие переменные для совместимости
:root {
  --main-bg: var(--bs-body-bg);
  --main-text: var(--bs-body-color);
  --table-bg: var(--bs-card-bg);
  --table-header-bg: var(--bs-light);
  --table-border: var(--bs-border-color);
  --accent: var(--bs-primary);
}

body[data-theme='dark'] {
  --main-bg: var(--bs-body-bg);
  --main-text: var(--bs-body-color);
  --table-bg: var(--bs-card-bg);
  --table-header-bg: var(--bs-light);
  --table-border: var(--bs-border-color);
  --accent: var(--bs-primary);
  background: var(--bs-body-bg) !important;
  color: var(--bs-body-color) !important;
}

body {
  background: var(--bs-body-bg);
  color: var(--bs-body-color) !important;
  transition: background-color 0.3s ease, color 0.3s ease;
}

// Глобальное правило для всех текстовых элементов
* {
  color: var(--bs-body-color) !important;
}

// Исключения для элементов с собственными цветами
.btn-primary, .btn-info, .btn-success, .btn-danger, .btn-warning,
.badge, .alert, .text-primary, .text-secondary, .text-success, 
.text-info, .text-warning, .text-danger, .text-light, .text-dark,
.text-muted, .text-white, .text-black,
.navbar-brand, .navbar-nav .nav-link,
.dropdown-menu, .dropdown-item,
.nav-link, .nav-item, .navbar-nav,
.form-control, .form-label, .form-text,
.list-group-item, .breadcrumb-item,
.pagination .page-link {
  color: inherit !important;
}

// Глобальные стили для таблиц
.table, .table-bordered, .table-sm, .table-hover {
  background: var(--bs-card-bg) !important;
  color: var(--bs-body-color) !important;
  border-color: var(--bs-border-color) !important;
}

.table thead {
  background: var(--bs-light) !important;
  color: var(--bs-body-color) !important;
}

.table th, .table td {
  border-color: var(--bs-border-color) !important;
}

// Стили для кнопок
.btn-primary, .btn-info, .btn-success, .btn-danger, .btn-warning {
  color: #fff !important;
  text-shadow: var(--text-shadow-light);
}

// Глобальные стили для текста с тенями
h1, h2, h3, h4, h5, h6 {
  text-shadow: var(--text-shadow-light);
}

// Глобальные стили для overflow и скроллбаров
body {
  overflow-x: hidden;
}

/* Предотвращение выхода текста за границы */
* {
  box-sizing: border-box;
}

/* Глобальные стили для текста */
h1, h2, h3, h4, h5, h6, p, span, div {
  word-wrap: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
  max-width: 100%;
}

/* Кастомизация скроллбаров */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bs-light);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--primary-gradient);
  border-radius: 4px;
  transition: background 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
}

/* Для Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--bs-primary) var(--bs-light);
}

/* Стили для OBS компонентов - скрываем overflow */
.obs-component {
  overflow: hidden !important;
}

/* Стили для сайта - показываем overflow */
.site-component {
  overflow: visible;
}

/* Исправление для текста, который улетает за границы */
.text-overflow-fix {
  word-wrap: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
}

/* Утилиты для теней текста */
.text-shadow-light {
  text-shadow: var(--text-shadow-light);
}

.text-shadow-medium {
  text-shadow: var(--text-shadow-medium);
}

.text-shadow-heavy {
  text-shadow: var(--text-shadow-heavy);
}

/* Утилиты для цветов */
.text-primary {
  color: var(--bs-primary) !important;
}

.text-secondary {
  color: var(--bs-secondary) !important;
}

.bg-primary {
  background-color: var(--bs-primary) !important;
}

.bg-secondary {
  background-color: var(--bs-secondary) !important;
}

.bg-body {
  background-color: var(--bs-body-bg) !important;
}

.bg-card {
  background-color: var(--bs-card-bg) !important;
}
