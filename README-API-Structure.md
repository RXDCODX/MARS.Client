# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API –ø–∞–ø–æ–∫

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ –¥–ª—è API, –≥–¥–µ —Ç–∏–ø—ã –∏ data-contracts —Å–æ–∑–¥–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –∏ SignalR —Ö–∞–±–æ–≤.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

```
src/shared/api/
‚îú‚îÄ‚îÄ types/                    # –û–±—â–∏–µ —Ç–∏–ø—ã API
‚îÇ   ‚îú‚îÄ‚îÄ types.ts             # –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ swagger_api.json)
‚îÇ   ‚îî‚îÄ‚îÄ common-enums.ts      # –û–±—â–∏–µ enum'—ã –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ data-contracts/          # Data contracts
‚îÇ   ‚îî‚îÄ‚îÄ data-contracts.ts    # Data contracts (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ swagger_api.json)
‚îú‚îÄ‚îÄ http-clients/            # HTTP –∫–ª–∏–µ–Ω—Ç—ã –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ Api.ts               # –û—Å–Ω–æ–≤–Ω–æ–π API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ [controller]/        # –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
‚îú‚îÄ‚îÄ signalr-types/           # –¢–∏–ø—ã –¥–ª—è SignalR
‚îÇ   ‚îî‚îÄ‚îÄ signalr-types.ts     # SignalR —Ç–∏–ø—ã (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ swagger_hubs.json)
‚îú‚îÄ‚îÄ signalr-clients/         # SignalR –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ [hub-name]/          # –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ö–∞–±–∞
‚îÇ       ‚îú‚îÄ‚îÄ SignalRContext.ts
‚îÇ       ‚îî‚îÄ‚îÄ SignalRHubWrapper.tsx
‚îú‚îÄ‚îÄ api-config.ts            # –£—Ç–∏–ª–∏—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ API
‚îú‚îÄ‚îÄ index.ts                 # –ì–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å–Ω—ã–π —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ data-contracts.ts        # Shim –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
```

## üîß –ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ (types/)
- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–∏–ø—ã –±–µ–∑ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –û–¥–∏–Ω —Ñ–∞–π–ª `types.ts` —Å–æ –≤—Å–µ–º–∏ —Ç–∏–ø–∞–º–∏
- –í–∫–ª—é—á–∞–µ—Ç enum'—ã –∏ –±–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è data-contracts (data-contracts/)
- –û—Ç–¥–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è data-contracts
- –û–¥–∏–Ω —Ñ–∞–π–ª `data-contracts.ts`
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è enum'–æ–≤

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–æ–≤ (http-clients/)
- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—ã –±–µ–∑ —Ç–∏–ø–æ–≤
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∏–º–ø–æ—Ä—Ç—ã —Ç–∏–ø–æ–≤

### 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SignalR —Ç–∏–ø–æ–≤ (signalr-types/)
- –û—Ç–¥–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –¥–ª—è SignalR
- –û–¥–∏–Ω —Ñ–∞–π–ª `signalr-types.ts`
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è enum'–æ–≤

### 5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SignalR –∫–ª–∏–µ–Ω—Ç–æ–≤ (signalr-clients/)
- React wrapper'—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ö–∞–±–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∏–ø—ã –∏–∑ `signalr-types/`

## üì• –ò–º–ø–æ—Ä—Ç—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã
```typescript
import type * as Types from "@/shared/api/types/types";
import type * as DataContracts from "@/shared/api/data-contracts/data-contracts";
import type * as SignalRTypes from "@/shared/api/signalr-types/signalr-types";
```

### HTTP –∫–ª–∏–µ–Ω—Ç—ã
```typescript
import { Commands, Framedata } from "@/shared/api/http-clients";
```

### SignalR –∫–ª–∏–µ–Ω—Ç—ã
```typescript
import { ScoreboardSignalRContext } from "@/shared/api/signalr-clients/Scoreboard/SignalRContext";
import ScoreboardSignalRHubWrapper from "@/shared/api/signalr-clients/Scoreboard/SignalRHubWrapper";
```

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è shim-—Ñ–∞–π–ª—ã:

- `data-contracts.ts` ‚Üí —Ä–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑ `data-contracts/data-contracts.ts`
- `SignalR/types/signalr-types.ts` ‚Üí —Ä–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑ `signalr-types/signalr-types.ts`

## üöÄ –ó–∞–ø—É—Å–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

```bash
yarn build-api
```

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - —Ç–∏–ø—ã –∏ –∫–ª–∏–µ–Ω—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
2. **–õ—É—á—à–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è** - —á–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
3. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤** - —Ç–∏–ø—ã –º–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
4. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ —Å–≤–æ–µ–π –ø–∞–ø–∫–µ
5. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
6. **–õ–µ–≥–∫–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏** - –ø—Ä–æ—â–µ –Ω–∞–π—Ç–∏ –∏ –∏–∑–º–µ–Ω–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
